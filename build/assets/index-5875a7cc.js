var Ej=Object.defineProperty;var Sj=(t,e,n)=>e in t?Ej(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var M=(t,e,n)=>(Sj(t,typeof e!="symbol"?e+"":e,n),n);function Cj(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in t)){const s=Object.getOwnPropertyDescriptor(r,o);s&&Object.defineProperty(t,o,s.get?s:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const Tj="modulepreload",Aj=function(t){return"/"+t},NE={},_a=function(e,n,r){if(!n||n.length===0)return e();const o=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=Aj(s),s in NE)return;NE[s]=!0;const i=s.endsWith(".css"),a=i?'[rel="stylesheet"]':"";if(!!r)for(let u=o.length-1;u>=0;u--){const d=o[u];if(d.href===s&&(!i||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const c=document.createElement("link");if(c.rel=i?"stylesheet":Tj,i||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),i)return new Promise((u,d)=>{c.addEventListener("load",u),c.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=s,window.dispatchEvent(i),!i.defaultPrevented)throw s})};var iRt=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function fs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Nj(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var o=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return t[r]}})}),n}var TP={exports:{}},Pe={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var PE=Object.getOwnPropertySymbols,Pj=Object.prototype.hasOwnProperty,Oj=Object.prototype.propertyIsEnumerable;function Ij(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function Rj(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(e).map(function(s){return e[s]});if(r.join("")!=="0123456789")return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(s){o[s]=s}),Object.keys(Object.assign({},o)).join("")==="abcdefghijklmnopqrst"}catch(s){return!1}}var AP=Rj()?Object.assign:function(t,e){for(var n,r=Ij(t),o,s=1;s<arguments.length;s++){n=Object(arguments[s]);for(var i in n)Pj.call(n,i)&&(r[i]=n[i]);if(PE){o=PE(n);for(var a=0;a<o.length;a++)Oj.call(n,o[a])&&(r[o[a]]=n[o[a]])}}return r};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ux=AP,Mc=60103,NP=60106;Pe.Fragment=60107;Pe.StrictMode=60108;Pe.Profiler=60114;var PP=60109,OP=60110,IP=60112;Pe.Suspense=60113;var RP=60115,MP=60116;if(typeof Symbol=="function"&&Symbol.for){var Er=Symbol.for;Mc=Er("react.element"),NP=Er("react.portal"),Pe.Fragment=Er("react.fragment"),Pe.StrictMode=Er("react.strict_mode"),Pe.Profiler=Er("react.profiler"),PP=Er("react.provider"),OP=Er("react.context"),IP=Er("react.forward_ref"),Pe.Suspense=Er("react.suspense"),RP=Er("react.memo"),MP=Er("react.lazy")}var OE=typeof Symbol=="function"&&Symbol.iterator;function Mj(t){return t===null||typeof t!="object"?null:(t=OE&&t[OE]||t["@@iterator"],typeof t=="function"?t:null)}function qf(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var DP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},LP={};function Dc(t,e,n){this.props=t,this.context=e,this.refs=LP,this.updater=n||DP}Dc.prototype.isReactComponent={};Dc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error(qf(85));this.updater.enqueueSetState(this,t,e,"setState")};Dc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function jP(){}jP.prototype=Dc.prototype;function dx(t,e,n){this.props=t,this.context=e,this.refs=LP,this.updater=n||DP}var fx=dx.prototype=new jP;fx.constructor=dx;ux(fx,Dc.prototype);fx.isPureReactComponent=!0;var px={current:null},FP=Object.prototype.hasOwnProperty,BP={key:!0,ref:!0,__self:!0,__source:!0};function zP(t,e,n){var r,o={},s=null,i=null;if(e!=null)for(r in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(s=""+e.key),e)FP.call(e,r)&&!BP.hasOwnProperty(r)&&(o[r]=e[r]);var a=arguments.length-2;if(a===1)o.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];o.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)o[r]===void 0&&(o[r]=a[r]);return{$$typeof:Mc,type:t,key:s,ref:i,props:o,_owner:px.current}}function Dj(t,e){return{$$typeof:Mc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function hx(t){return typeof t=="object"&&t!==null&&t.$$typeof===Mc}function Lj(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var IE=/\/+/g;function jy(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Lj(""+t.key):e.toString(36)}function _h(t,e,n,r,o){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(s){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case Mc:case NP:i=!0}}if(i)return i=t,o=o(i),t=r===""?"."+jy(i,0):r,Array.isArray(o)?(n="",t!=null&&(n=t.replace(IE,"$&/")+"/"),_h(o,e,n,"",function(c){return c})):o!=null&&(hx(o)&&(o=Dj(o,n+(!o.key||i&&i.key===o.key?"":(""+o.key).replace(IE,"$&/")+"/")+t)),e.push(o)),1;if(i=0,r=r===""?".":r+":",Array.isArray(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+jy(s,a);i+=_h(s,e,n,l,o)}else if(l=Mj(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+jy(s,a++),i+=_h(s,e,n,l,o);else if(s==="object")throw e=""+t,Error(qf(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e));return i}function Rp(t,e,n){if(t==null)return t;var r=[],o=0;return _h(t,r,"","",function(s){return e.call(n,s,o++)}),r}function jj(t){if(t._status===-1){var e=t._result;e=e(),t._status=0,t._result=e,e.then(function(n){t._status===0&&(n=n.default,t._status=1,t._result=n)},function(n){t._status===0&&(t._status=2,t._result=n)})}if(t._status===1)return t._result;throw t._result}var qP={current:null};function ps(){var t=qP.current;if(t===null)throw Error(qf(321));return t}var Fj={ReactCurrentDispatcher:qP,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:px,IsSomeRendererActing:{current:!1},assign:ux};Pe.Children={map:Rp,forEach:function(t,e,n){Rp(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Rp(t,function(){e++}),e},toArray:function(t){return Rp(t,function(e){return e})||[]},only:function(t){if(!hx(t))throw Error(qf(143));return t}};Pe.Component=Dc;Pe.PureComponent=dx;Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fj;Pe.cloneElement=function(t,e,n){if(t==null)throw Error(qf(267,t));var r=ux({},t.props),o=t.key,s=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,i=px.current),e.key!==void 0&&(o=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)FP.call(e,l)&&!BP.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Mc,type:t.type,key:o,ref:s,props:r,_owner:i}};Pe.createContext=function(t,e){return e===void 0&&(e=null),t={$$typeof:OP,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider={$$typeof:PP,_context:t},t.Consumer=t};Pe.createElement=zP;Pe.createFactory=function(t){var e=zP.bind(null,t);return e.type=t,e};Pe.createRef=function(){return{current:null}};Pe.forwardRef=function(t){return{$$typeof:IP,render:t}};Pe.isValidElement=hx;Pe.lazy=function(t){return{$$typeof:MP,_payload:{_status:-1,_result:t},_init:jj}};Pe.memo=function(t,e){return{$$typeof:RP,type:t,compare:e===void 0?null:e}};Pe.useCallback=function(t,e){return ps().useCallback(t,e)};Pe.useContext=function(t,e){return ps().useContext(t,e)};Pe.useDebugValue=function(){};Pe.useEffect=function(t,e){return ps().useEffect(t,e)};Pe.useImperativeHandle=function(t,e,n){return ps().useImperativeHandle(t,e,n)};Pe.useLayoutEffect=function(t,e){return ps().useLayoutEffect(t,e)};Pe.useMemo=function(t,e){return ps().useMemo(t,e)};Pe.useReducer=function(t,e,n){return ps().useReducer(t,e,n)};Pe.useRef=function(t){return ps().useRef(t)};Pe.useState=function(t){return ps().useState(t)};Pe.version="17.0.2";TP.exports=Pe;var v=TP.exports;const P=fs(v),Bj=Cj({__proto__:null,default:P},[v]);var WP={exports:{}},$r={},VP={exports:{}},UP={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){var e,n,r,o;if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var i=Date,a=i.now();t.unstable_now=function(){return i.now()-a}}if(typeof window=="undefined"||typeof MessageChannel!="function"){var l=null,c=null,u=function(){if(l!==null)try{var z=t.unstable_now();l(!0,z),l=null}catch(F){throw setTimeout(u,0),F}};e=function(z){l!==null?setTimeout(e,0,z):(l=z,setTimeout(u,0))},n=function(z,F){c=setTimeout(z,F)},r=function(){clearTimeout(c)},t.unstable_shouldYield=function(){return!1},o=t.unstable_forceFrameRate=function(){}}else{var d=window.setTimeout,f=window.clearTimeout;if(typeof console!="undefined"){var p=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof p!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var h=!1,y=null,g=-1,b=5,w=0;t.unstable_shouldYield=function(){return t.unstable_now()>=w},o=function(){},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<z?Math.floor(1e3/z):5};var x=new MessageChannel,k=x.port2;x.port1.onmessage=function(){if(y!==null){var z=t.unstable_now();w=z+b;try{y(!0,z)?k.postMessage(null):(h=!1,y=null)}catch(F){throw k.postMessage(null),F}}else h=!1},e=function(z){y=z,h||(h=!0,k.postMessage(null))},n=function(z,F){g=d(function(){z(t.unstable_now())},F)},r=function(){f(g),g=-1}}function S(z,F){var B=z.length;z.push(F);e:for(;;){var W=B-1>>>1,K=z[W];if(K!==void 0&&0<$(K,F))z[W]=F,z[B]=K,B=W;else break e}}function _(z){return z=z[0],z===void 0?null:z}function C(z){var F=z[0];if(F!==void 0){var B=z.pop();if(B!==F){z[0]=B;e:for(var W=0,K=z.length;W<K;){var Ce=2*(W+1)-1,Te=z[Ce],Se=Ce+1,gt=z[Se];if(Te!==void 0&&0>$(Te,B))gt!==void 0&&0>$(gt,Te)?(z[W]=gt,z[Se]=B,W=Se):(z[W]=Te,z[Ce]=B,W=Ce);else if(gt!==void 0&&0>$(gt,B))z[W]=gt,z[Se]=B,W=Se;else break e}}return F}return null}function $(z,F){var B=z.sortIndex-F.sortIndex;return B!==0?B:z.id-F.id}var T=[],A=[],N=1,q=null,O=3,E=!1,D=!1,R=!1;function j(z){for(var F=_(A);F!==null;){if(F.callback===null)C(A);else if(F.startTime<=z)C(A),F.sortIndex=F.expirationTime,S(T,F);else break;F=_(A)}}function we(z){if(R=!1,j(z),!D)if(_(T)!==null)D=!0,e(Oe);else{var F=_(A);F!==null&&n(we,F.startTime-z)}}function Oe(z,F){D=!1,R&&(R=!1,r()),E=!0;var B=O;try{for(j(F),q=_(T);q!==null&&(!(q.expirationTime>F)||z&&!t.unstable_shouldYield());){var W=q.callback;if(typeof W=="function"){q.callback=null,O=q.priorityLevel;var K=W(q.expirationTime<=F);F=t.unstable_now(),typeof K=="function"?q.callback=K:q===_(T)&&C(T),j(F)}else C(T);q=_(T)}if(q!==null)var Ce=!0;else{var Te=_(A);Te!==null&&n(we,Te.startTime-F),Ce=!1}return Ce}finally{q=null,O=B,E=!1}}var ee=o;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){D||E||(D=!0,e(Oe))},t.unstable_getCurrentPriorityLevel=function(){return O},t.unstable_getFirstCallbackNode=function(){return _(T)},t.unstable_next=function(z){switch(O){case 1:case 2:case 3:var F=3;break;default:F=O}var B=O;O=F;try{return z()}finally{O=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=ee,t.unstable_runWithPriority=function(z,F){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var B=O;O=z;try{return F()}finally{O=B}},t.unstable_scheduleCallback=function(z,F,B){var W=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?W+B:W):B=W,z){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=B+K,z={id:N++,callback:F,priorityLevel:z,startTime:B,expirationTime:K,sortIndex:-1},B>W?(z.sortIndex=B,S(A,z),_(T)===null&&z===_(A)&&(R?r():R=!0,n(we,B-W))):(z.sortIndex=K,S(T,z),D||E||(D=!0,e(Oe))),z},t.unstable_wrapCallback=function(z){var F=O;return function(){var B=O;O=F;try{return z.apply(this,arguments)}finally{O=B}}}})(UP);VP.exports=UP;var zj=VP.exports;/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zg=v,ot=AP,Ct=zj;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!zg)throw Error(U(227));var HP=new Set,Nd={};function Ha(t,e){oc(t,e),oc(t+"Capture",e)}function oc(t,e){for(Nd[t]=e,t=0;t<e.length;t++)HP.add(e[t])}var ts=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),qj=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,RE=Object.prototype.hasOwnProperty,ME={},DE={};function Wj(t){return RE.call(DE,t)?!0:RE.call(ME,t)?!1:qj.test(t)?DE[t]=!0:(ME[t]=!0,!1)}function Vj(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Uj(t,e,n,r){if(e===null||typeof e=="undefined"||Vj(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function yn(t,e,n,r,o,s,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=i}var Ft={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ft[t]=new yn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ft[e]=new yn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ft[t]=new yn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ft[t]=new yn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ft[t]=new yn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ft[t]=new yn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ft[t]=new yn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ft[t]=new yn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ft[t]=new yn(t,5,!1,t.toLowerCase(),null,!1,!1)});var mx=/[\-:]([a-z])/g;function gx(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(mx,gx);Ft[e]=new yn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(mx,gx);Ft[e]=new yn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(mx,gx);Ft[e]=new yn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ft[t]=new yn(t,1,!1,t.toLowerCase(),null,!1,!1)});Ft.xlinkHref=new yn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ft[t]=new yn(t,1,!1,t.toLowerCase(),null,!0,!0)});function yx(t,e,n,r){var o=Ft.hasOwnProperty(e)?Ft[e]:null,s=o!==null?o.type===0:r?!1:!(!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N");s||(Uj(e,n,o,r)&&(n=null),r||o===null?Wj(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):o.mustUseProperty?t[o.propertyName]=n===null?o.type===3?!1:"":n:(e=o.attributeName,r=o.attributeNamespace,n===null?t.removeAttribute(e):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ka=zg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Lu=60103,Yi=60106,Rs=60107,bx=60108,Xu=60114,vx=60109,wx=60110,qg=60112,Qu=60113,Zh=60120,Wg=60115,xx=60116,kx=60121,_x=60128,KP=60129,$x=60130,Wv=60131;if(typeof Symbol=="function"&&Symbol.for){var kt=Symbol.for;Lu=kt("react.element"),Yi=kt("react.portal"),Rs=kt("react.fragment"),bx=kt("react.strict_mode"),Xu=kt("react.profiler"),vx=kt("react.provider"),wx=kt("react.context"),qg=kt("react.forward_ref"),Qu=kt("react.suspense"),Zh=kt("react.suspense_list"),Wg=kt("react.memo"),xx=kt("react.lazy"),kx=kt("react.block"),kt("react.scope"),_x=kt("react.opaque.id"),KP=kt("react.debug_trace_mode"),$x=kt("react.offscreen"),Wv=kt("react.legacy_hidden")}var LE=typeof Symbol=="function"&&Symbol.iterator;function fu(t){return t===null||typeof t!="object"?null:(t=LE&&t[LE]||t["@@iterator"],typeof t=="function"?t:null)}var Fy;function ju(t){if(Fy===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Fy=e&&e[1]||""}return`
`+Fy+t}var By=!1;function Mp(t,e){if(!t||By)return"";By=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var o=l.stack.split(`
`),s=r.stack.split(`
`),i=o.length-1,a=s.length-1;1<=i&&0<=a&&o[i]!==s[a];)a--;for(;1<=i&&0<=a;i--,a--)if(o[i]!==s[a]){if(i!==1||a!==1)do if(i--,a--,0>a||o[i]!==s[a])return`
`+o[i].replace(" at new "," at ");while(1<=i&&0<=a);break}}}finally{By=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ju(t):""}function Hj(t){switch(t.tag){case 5:return ju(t.type);case 16:return ju("Lazy");case 13:return ju("Suspense");case 19:return ju("SuspenseList");case 0:case 2:case 15:return t=Mp(t.type,!1),t;case 11:return t=Mp(t.type.render,!1),t;case 22:return t=Mp(t.type._render,!1),t;case 1:return t=Mp(t.type,!0),t;default:return""}}function Dl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Rs:return"Fragment";case Yi:return"Portal";case Xu:return"Profiler";case bx:return"StrictMode";case Qu:return"Suspense";case Zh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case wx:return(t.displayName||"Context")+".Consumer";case vx:return(t._context.displayName||"Context")+".Provider";case qg:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case Wg:return Dl(t.type);case kx:return Dl(t._render);case xx:e=t._payload,t=t._init;try{return Dl(t(e))}catch(n){}}return null}function fi(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function GP(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Kj(t){var e=GP(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n!="undefined"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(i){r=""+i,s.call(this,i)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Dp(t){t._valueTracker||(t._valueTracker=Kj(t))}function ZP(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=GP(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Jh(t){if(t=t||(typeof document!="undefined"?document:void 0),typeof t=="undefined")return null;try{return t.activeElement||t.body}catch(e){return t.body}}function Vv(t,e){var n=e.checked;return ot({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:t._wrapperState.initialChecked})}function jE(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=fi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function JP(t,e){e=e.checked,e!=null&&yx(t,"checked",e,!1)}function Uv(t,e){JP(t,e);var n=fi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Hv(t,e.type,n):e.hasOwnProperty("defaultValue")&&Hv(t,e.type,fi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function FE(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Hv(t,e,n){(e!=="number"||Jh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}function Gj(t){var e="";return zg.Children.forEach(t,function(n){n!=null&&(e+=n)}),e}function Kv(t,e){return t=ot({children:void 0},e),(e=Gj(e.children))&&(t.children=e),t}function Ll(t,e,n,r){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&r&&(t[n].defaultSelected=!0)}else{for(n=""+fi(n),e=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,r&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function Gv(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return ot({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function BE(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:fi(n)}}function YP(t,e){var n=fi(e.value),r=fi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function zE(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}var Zv={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function XP(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Jv(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?XP(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Lp,QP=function(t){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(e,n,r,o){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,o)})}:t}(function(t,e){if(t.namespaceURI!==Zv.svg||"innerHTML"in t)t.innerHTML=e;else{for(Lp=Lp||document.createElement("div"),Lp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Lp.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Pd(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ed={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Zj=["Webkit","ms","Moz","O"];Object.keys(ed).forEach(function(t){Zj.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ed[e]=ed[t]})});function eO(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ed.hasOwnProperty(t)&&ed[t]?(""+e).trim():e+"px"}function tO(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=eO(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,o):t[n]=o}}var Jj=ot({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Yv(t,e){if(e){if(Jj[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(!(typeof e.dangerouslySetInnerHTML=="object"&&"__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function Xv(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Ex(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Qv=null,jl=null,Fl=null;function qE(t){if(t=Vf(t)){if(typeof Qv!="function")throw Error(U(280));var e=t.stateNode;e&&(e=Zg(e),Qv(t.stateNode,t.type,e))}}function nO(t){jl?Fl?Fl.push(t):Fl=[t]:jl=t}function rO(){if(jl){var t=jl,e=Fl;if(Fl=jl=null,qE(t),e)for(t=0;t<e.length;t++)qE(e[t])}}function Sx(t,e){return t(e)}function oO(t,e,n,r,o){return t(e,n,r,o)}function Cx(){}var sO=Sx,Xi=!1,zy=!1;function Tx(){(jl!==null||Fl!==null)&&(Cx(),rO())}function Yj(t,e,n){if(zy)return t(e,n);zy=!0;try{return sO(t,e,n)}finally{zy=!1,Tx()}}function Od(t,e){var n=t.stateNode;if(n===null)return null;var r=Zg(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var e0=!1;if(ts)try{var pu={};Object.defineProperty(pu,"passive",{get:function(){e0=!0}}),window.addEventListener("test",pu,pu),window.removeEventListener("test",pu,pu)}catch(t){e0=!1}function Xj(t,e,n,r,o,s,i,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var td=!1,Yh=null,Xh=!1,t0=null,Qj={onError:function(t){td=!0,Yh=t}};function eF(t,e,n,r,o,s,i,a,l){td=!1,Yh=null,Xj.apply(Qj,arguments)}function tF(t,e,n,r,o,s,i,a,l){if(eF.apply(this,arguments),td){if(td){var c=Yh;td=!1,Yh=null}else throw Error(U(198));Xh||(Xh=!0,t0=c)}}function Ga(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&1026&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function iO(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function WE(t){if(Ga(t)!==t)throw Error(U(188))}function nF(t){var e=t.alternate;if(!e){if(e=Ga(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return WE(o),t;if(s===r)return WE(o),e;s=s.sibling}throw Error(U(188))}if(n.return!==r.return)n=o,r=s;else{for(var i=!1,a=o.child;a;){if(a===n){i=!0,n=o,r=s;break}if(a===r){i=!0,r=o,n=s;break}a=a.sibling}if(!i){for(a=s.child;a;){if(a===n){i=!0,n=s,r=o;break}if(a===r){i=!0,r=s,n=o;break}a=a.sibling}if(!i)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function aO(t){if(t=nF(t),!t)return null;for(var e=t;;){if(e.tag===5||e.tag===6)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function VE(t,e){for(var n=t.alternate;e!==null;){if(e===t||e===n)return!0;e=e.return}return!1}var lO,Ax,cO,uO,n0=!1,io=[],Zs=null,Js=null,Ys=null,Id=new Map,Rd=new Map,hu=[],UE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function r0(t,e,n,r,o){return{blockedOn:t,domEventName:e,eventSystemFlags:n|16,nativeEvent:o,targetContainers:[r]}}function HE(t,e){switch(t){case"focusin":case"focusout":Zs=null;break;case"dragenter":case"dragleave":Js=null;break;case"mouseover":case"mouseout":Ys=null;break;case"pointerover":case"pointerout":Id.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rd.delete(e.pointerId)}}function mu(t,e,n,r,o,s){return t===null||t.nativeEvent!==s?(t=r0(e,n,r,o,s),e!==null&&(e=Vf(e),e!==null&&Ax(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function rF(t,e,n,r,o){switch(e){case"focusin":return Zs=mu(Zs,t,e,n,r,o),!0;case"dragenter":return Js=mu(Js,t,e,n,r,o),!0;case"mouseover":return Ys=mu(Ys,t,e,n,r,o),!0;case"pointerover":var s=o.pointerId;return Id.set(s,mu(Id.get(s)||null,t,e,n,r,o)),!0;case"gotpointercapture":return s=o.pointerId,Rd.set(s,mu(Rd.get(s)||null,t,e,n,r,o)),!0}return!1}function oF(t){var e=Qi(t.target);if(e!==null){var n=Ga(e);if(n!==null){if(e=n.tag,e===13){if(e=iO(n),e!==null){t.blockedOn=e,uO(t.lanePriority,function(){Ct.unstable_runWithPriority(t.priority,function(){cO(n)})});return}}else if(e===3&&n.stateNode.hydrate){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function $h(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ix(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n!==null)return e=Vf(n),e!==null&&Ax(e),t.blockedOn=n,!1;e.shift()}return!0}function KE(t,e,n){$h(t)&&n.delete(e)}function sF(){for(n0=!1;0<io.length;){var t=io[0];if(t.blockedOn!==null){t=Vf(t.blockedOn),t!==null&&lO(t);break}for(var e=t.targetContainers;0<e.length;){var n=Ix(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n!==null){t.blockedOn=n;break}e.shift()}t.blockedOn===null&&io.shift()}Zs!==null&&$h(Zs)&&(Zs=null),Js!==null&&$h(Js)&&(Js=null),Ys!==null&&$h(Ys)&&(Ys=null),Id.forEach(KE),Rd.forEach(KE)}function gu(t,e){t.blockedOn===e&&(t.blockedOn=null,n0||(n0=!0,Ct.unstable_scheduleCallback(Ct.unstable_NormalPriority,sF)))}function dO(t){function e(o){return gu(o,t)}if(0<io.length){gu(io[0],t);for(var n=1;n<io.length;n++){var r=io[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Zs!==null&&gu(Zs,t),Js!==null&&gu(Js,t),Ys!==null&&gu(Ys,t),Id.forEach(e),Rd.forEach(e),n=0;n<hu.length;n++)r=hu[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<hu.length&&(n=hu[0],n.blockedOn===null);)oF(n),n.blockedOn===null&&hu.shift()}function jp(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Sl={animationend:jp("Animation","AnimationEnd"),animationiteration:jp("Animation","AnimationIteration"),animationstart:jp("Animation","AnimationStart"),transitionend:jp("Transition","TransitionEnd")},qy={},fO={};ts&&(fO=document.createElement("div").style,"AnimationEvent"in window||(delete Sl.animationend.animation,delete Sl.animationiteration.animation,delete Sl.animationstart.animation),"TransitionEvent"in window||delete Sl.transitionend.transition);function Vg(t){if(qy[t])return qy[t];if(!Sl[t])return t;var e=Sl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in fO)return qy[t]=e[n];return t}var pO=Vg("animationend"),hO=Vg("animationiteration"),mO=Vg("animationstart"),gO=Vg("transitionend"),yO=new Map,Nx=new Map,iF=["abort","abort",pO,"animationEnd",hO,"animationIteration",mO,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",gO,"transitionEnd","waiting","waiting"];function Px(t,e){for(var n=0;n<t.length;n+=2){var r=t[n],o=t[n+1];o="on"+(o[0].toUpperCase()+o.slice(1)),Nx.set(r,e),yO.set(r,o),Ha(o,[r])}}var aF=Ct.unstable_now;aF();var Ge=8;function ml(t){if(1&t)return Ge=15,1;if(2&t)return Ge=14,2;if(4&t)return Ge=13,4;var e=24&t;return e!==0?(Ge=12,e):t&32?(Ge=11,32):(e=192&t,e!==0?(Ge=10,e):t&256?(Ge=9,256):(e=3584&t,e!==0?(Ge=8,e):t&4096?(Ge=7,4096):(e=4186112&t,e!==0?(Ge=6,e):(e=62914560&t,e!==0?(Ge=5,e):t&67108864?(Ge=4,67108864):t&134217728?(Ge=3,134217728):(e=805306368&t,e!==0?(Ge=2,e):1073741824&t?(Ge=1,1073741824):(Ge=8,t))))))}function lF(t){switch(t){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function cF(t){switch(t){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(U(358,t))}}function Md(t,e){var n=t.pendingLanes;if(n===0)return Ge=0;var r=0,o=0,s=t.expiredLanes,i=t.suspendedLanes,a=t.pingedLanes;if(s!==0)r=s,o=Ge=15;else if(s=n&134217727,s!==0){var l=s&~i;l!==0?(r=ml(l),o=Ge):(a&=s,a!==0&&(r=ml(a),o=Ge))}else s=n&~i,s!==0?(r=ml(s),o=Ge):a!==0&&(r=ml(a),o=Ge);if(r===0)return 0;if(r=31-pi(r),r=n&((0>r?0:1<<r)<<1)-1,e!==0&&e!==r&&!(e&i)){if(ml(e),o<=Ge)return e;Ge=o}if(e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-pi(e),o=1<<n,r|=t[n],e&=~o;return r}function bO(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Qh(t,e){switch(t){case 15:return 1;case 14:return 2;case 12:return t=gl(24&~e),t===0?Qh(10,e):t;case 10:return t=gl(192&~e),t===0?Qh(8,e):t;case 8:return t=gl(3584&~e),t===0&&(t=gl(4186112&~e),t===0&&(t=512)),t;case 2:return e=gl(805306368&~e),e===0&&(e=268435456),e}throw Error(U(358,t))}function gl(t){return t&-t}function Wy(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ug(t,e,n){t.pendingLanes|=e;var r=e-1;t.suspendedLanes&=r,t.pingedLanes&=r,t=t.eventTimes,e=31-pi(e),t[e]=n}var pi=Math.clz32?Math.clz32:fF,uF=Math.log,dF=Math.LN2;function fF(t){return t===0?32:31-(uF(t)/dF|0)|0}var pF=Ct.unstable_UserBlockingPriority,hF=Ct.unstable_runWithPriority,Eh=!0;function mF(t,e,n,r){Xi||Cx();var o=Ox,s=Xi;Xi=!0;try{oO(o,t,e,n,r)}finally{(Xi=s)||Tx()}}function gF(t,e,n,r){hF(pF,Ox.bind(null,t,e,n,r))}function Ox(t,e,n,r){if(Eh){var o;if((o=(e&4)===0)&&0<io.length&&-1<UE.indexOf(t))t=r0(null,t,e,n,r),io.push(t);else{var s=Ix(t,e,n,r);if(s===null)o&&HE(t,r);else{if(o){if(-1<UE.indexOf(t)){t=r0(s,t,e,n,r),io.push(t);return}if(rF(s,t,e,n,r))return;HE(t,r)}PO(t,e,r,null,n)}}}}function Ix(t,e,n,r){var o=Ex(r);if(o=Qi(o),o!==null){var s=Ga(o);if(s===null)o=null;else{var i=s.tag;if(i===13){if(o=iO(s),o!==null)return o;o=null}else if(i===3){if(s.stateNode.hydrate)return s.tag===3?s.stateNode.containerInfo:null;o=null}else s!==o&&(o=null)}}return PO(t,e,r,o,n),null}var js=null,Rx=null,Sh=null;function vO(){if(Sh)return Sh;var t,e=Rx,n=e.length,r,o="value"in js?js.value:js.textContent,s=o.length;for(t=0;t<n&&e[t]===o[t];t++);var i=n-t;for(r=1;r<=i&&e[n-r]===o[s-r];r++);return Sh=o.slice(t,1<r?1-r:void 0)}function Ch(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Fp(){return!0}function GE(){return!1}function Gn(t){function e(n,r,o,s,i){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=s,this.target=i,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Fp:GE,this.isPropagationStopped=GE,this}return ot(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Fp)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Fp)},persist:function(){},isPersistent:Fp}),e}var Lc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mx=Gn(Lc),Wf=ot({},Lc,{view:0,detail:0}),yF=Gn(Wf),Vy,Uy,yu,Hg=ot({},Wf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dx,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==yu&&(yu&&t.type==="mousemove"?(Vy=t.screenX-yu.screenX,Uy=t.screenY-yu.screenY):Uy=Vy=0,yu=t),Vy)},movementY:function(t){return"movementY"in t?t.movementY:Uy}}),ZE=Gn(Hg),bF=ot({},Hg,{dataTransfer:0}),vF=Gn(bF),wF=ot({},Wf,{relatedTarget:0}),Hy=Gn(wF),xF=ot({},Lc,{animationName:0,elapsedTime:0,pseudoElement:0}),kF=Gn(xF),_F=ot({},Lc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$F=Gn(_F),EF=ot({},Lc,{data:0}),JE=Gn(EF),SF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},CF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},TF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function AF(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=TF[t])?!!e[t]:!1}function Dx(){return AF}var NF=ot({},Wf,{key:function(t){if(t.key){var e=SF[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ch(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?CF[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dx,charCode:function(t){return t.type==="keypress"?Ch(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ch(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),PF=Gn(NF),OF=ot({},Hg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),YE=Gn(OF),IF=ot({},Wf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dx}),RF=Gn(IF),MF=ot({},Lc,{propertyName:0,elapsedTime:0,pseudoElement:0}),DF=Gn(MF),LF=ot({},Hg,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),jF=Gn(LF),FF=[9,13,27,32],Lx=ts&&"CompositionEvent"in window,nd=null;ts&&"documentMode"in document&&(nd=document.documentMode);var BF=ts&&"TextEvent"in window&&!nd,wO=ts&&(!Lx||nd&&8<nd&&11>=nd),XE=String.fromCharCode(32),QE=!1;function xO(t,e){switch(t){case"keyup":return FF.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kO(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Cl=!1;function zF(t,e){switch(t){case"compositionend":return kO(e);case"keypress":return e.which!==32?null:(QE=!0,XE);case"textInput":return t=e.data,t===XE&&QE?null:t;default:return null}}function qF(t,e){if(Cl)return t==="compositionend"||!Lx&&xO(t,e)?(t=vO(),Sh=Rx=js=null,Cl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return wO&&e.locale!=="ko"?null:e.data;default:return null}}var WF={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function eS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!WF[t.type]:e==="textarea"}function _O(t,e,n,r){nO(r),e=em(e,"onChange"),0<e.length&&(n=new Mx("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var rd=null,Dd=null;function VF(t){TO(t,0)}function Kg(t){var e=Al(t);if(ZP(e))return t}function UF(t,e){if(t==="change")return e}var $O=!1;if(ts){var Ky;if(ts){var Gy="oninput"in document;if(!Gy){var tS=document.createElement("div");tS.setAttribute("oninput","return;"),Gy=typeof tS.oninput=="function"}Ky=Gy}else Ky=!1;$O=Ky&&(!document.documentMode||9<document.documentMode)}function nS(){rd&&(rd.detachEvent("onpropertychange",EO),Dd=rd=null)}function EO(t){if(t.propertyName==="value"&&Kg(Dd)){var e=[];if(_O(e,Dd,t,Ex(t)),t=VF,Xi)t(e);else{Xi=!0;try{Sx(t,e)}finally{Xi=!1,Tx()}}}}function HF(t,e,n){t==="focusin"?(nS(),rd=e,Dd=n,rd.attachEvent("onpropertychange",EO)):t==="focusout"&&nS()}function KF(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Kg(Dd)}function GF(t,e){if(t==="click")return Kg(e)}function ZF(t,e){if(t==="input"||t==="change")return Kg(e)}function JF(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Qn=typeof Object.is=="function"?Object.is:JF,YF=Object.prototype.hasOwnProperty;function Ld(t,e){if(Qn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!YF.call(e,n[r])||!Qn(t[n[r]],e[n[r]]))return!1;return!0}function rS(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function oS(t,e){var n=rS(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=rS(n)}}function SO(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?SO(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function sS(){for(var t=window,e=Jh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch(r){n=!1}if(n)t=e.contentWindow;else break;e=Jh(t.document)}return e}function o0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var XF=ts&&"documentMode"in document&&11>=document.documentMode,Tl=null,s0=null,od=null,i0=!1;function iS(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;i0||Tl==null||Tl!==Jh(r)||(r=Tl,"selectionStart"in r&&o0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),od&&Ld(od,r)||(od=r,r=em(s0,"onSelect"),0<r.length&&(e=new Mx("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Tl)))}Px("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);Px("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Px(iF,2);for(var aS="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Zy=0;Zy<aS.length;Zy++)Nx.set(aS[Zy],0);oc("onMouseEnter",["mouseout","mouseover"]);oc("onMouseLeave",["mouseout","mouseover"]);oc("onPointerEnter",["pointerout","pointerover"]);oc("onPointerLeave",["pointerout","pointerover"]);Ha("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ha("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ha("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ha("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ha("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ha("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CO=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fu));function lS(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,tF(r,e,void 0,t),t.currentTarget=null}function TO(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],o=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var i=r.length-1;0<=i;i--){var a=r[i],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&o.isPropagationStopped())break e;lS(o,a,c),s=l}else for(i=0;i<r.length;i++){if(a=r[i],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&o.isPropagationStopped())break e;lS(o,a,c),s=l}}}if(Xh)throw t=t0,Xh=!1,t0=null,t}function Ye(t,e){var n=IO(e),r=t+"__bubble";n.has(r)||(NO(e,t,2,!1),n.add(r))}var cS="_reactListening"+Math.random().toString(36).slice(2);function AO(t){t[cS]||(t[cS]=!0,HP.forEach(function(e){CO.has(e)||uS(e,!1,t,null),uS(e,!0,t,null)}))}function uS(t,e,n,r){var o=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,s=n;if(t==="selectionchange"&&n.nodeType!==9&&(s=n.ownerDocument),r!==null&&!e&&CO.has(t)){if(t!=="scroll")return;o|=2,s=r}var i=IO(s),a=t+"__"+(e?"capture":"bubble");i.has(a)||(e&&(o|=4),NO(s,t,o,e),i.add(a))}function NO(t,e,n,r){var o=Nx.get(e);switch(o===void 0?2:o){case 0:o=mF;break;case 1:o=gF;break;default:o=Ox}n=o.bind(null,e,n,t),o=void 0,!e0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),r?o!==void 0?t.addEventListener(e,n,{capture:!0,passive:o}):t.addEventListener(e,n,!0):o!==void 0?t.addEventListener(e,n,{passive:o}):t.addEventListener(e,n,!1)}function PO(t,e,n,r,o){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var a=r.stateNode.containerInfo;if(a===o||a.nodeType===8&&a.parentNode===o)break;if(i===4)for(i=r.return;i!==null;){var l=i.tag;if((l===3||l===4)&&(l=i.stateNode.containerInfo,l===o||l.nodeType===8&&l.parentNode===o))return;i=i.return}for(;a!==null;){if(i=Qi(a),i===null)return;if(l=i.tag,l===5||l===6){r=s=i;continue e}a=a.parentNode}}r=r.return}Yj(function(){var c=s,u=Ex(n),d=[];e:{var f=yO.get(t);if(f!==void 0){var p=Mx,h=t;switch(t){case"keypress":if(Ch(n)===0)break e;case"keydown":case"keyup":p=PF;break;case"focusin":h="focus",p=Hy;break;case"focusout":h="blur",p=Hy;break;case"beforeblur":case"afterblur":p=Hy;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=ZE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=vF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=RF;break;case pO:case hO:case mO:p=kF;break;case gO:p=DF;break;case"scroll":p=yF;break;case"wheel":p=jF;break;case"copy":case"cut":case"paste":p=$F;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=YE}var y=(e&4)!==0,g=!y&&t==="scroll",b=y?f!==null?f+"Capture":null:f;y=[];for(var w=c,x;w!==null;){x=w;var k=x.stateNode;if(x.tag===5&&k!==null&&(x=k,b!==null&&(k=Od(w,b),k!=null&&y.push(jd(w,k,x)))),g)break;w=w.return}0<y.length&&(f=new p(f,h,null,n,u),d.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&!(e&16)&&(h=n.relatedTarget||n.fromElement)&&(Qi(h)||h[jc]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(h=n.relatedTarget||n.toElement,p=c,h=h?Qi(h):null,h!==null&&(g=Ga(h),h!==g||h.tag!==5&&h.tag!==6)&&(h=null)):(p=null,h=c),p!==h)){if(y=ZE,k="onMouseLeave",b="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(y=YE,k="onPointerLeave",b="onPointerEnter",w="pointer"),g=p==null?f:Al(p),x=h==null?f:Al(h),f=new y(k,w+"leave",p,n,u),f.target=g,f.relatedTarget=x,k=null,Qi(u)===c&&(y=new y(b,w+"enter",h,n,u),y.target=x,y.relatedTarget=g,k=y),g=k,p&&h)t:{for(y=p,b=h,w=0,x=y;x;x=sl(x))w++;for(x=0,k=b;k;k=sl(k))x++;for(;0<w-x;)y=sl(y),w--;for(;0<x-w;)b=sl(b),x--;for(;w--;){if(y===b||b!==null&&y===b.alternate)break t;y=sl(y),b=sl(b)}y=null}else y=null;p!==null&&dS(d,f,p,y,!1),h!==null&&g!==null&&dS(d,g,h,y,!0)}}e:{if(f=c?Al(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var S=UF;else if(eS(f))if($O)S=ZF;else{S=KF;var _=HF}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=GF);if(S&&(S=S(t,c))){_O(d,S,n,u);break e}_&&_(t,f,c),t==="focusout"&&(_=f._wrapperState)&&_.controlled&&f.type==="number"&&Hv(f,"number",f.value)}switch(_=c?Al(c):window,t){case"focusin":(eS(_)||_.contentEditable==="true")&&(Tl=_,s0=c,od=null);break;case"focusout":od=s0=Tl=null;break;case"mousedown":i0=!0;break;case"contextmenu":case"mouseup":case"dragend":i0=!1,iS(d,n,u);break;case"selectionchange":if(XF)break;case"keydown":case"keyup":iS(d,n,u)}var C;if(Lx)e:{switch(t){case"compositionstart":var $="onCompositionStart";break e;case"compositionend":$="onCompositionEnd";break e;case"compositionupdate":$="onCompositionUpdate";break e}$=void 0}else Cl?xO(t,n)&&($="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&($="onCompositionStart");$&&(wO&&n.locale!=="ko"&&(Cl||$!=="onCompositionStart"?$==="onCompositionEnd"&&Cl&&(C=vO()):(js=u,Rx="value"in js?js.value:js.textContent,Cl=!0)),_=em(c,$),0<_.length&&($=new JE($,t,null,n,u),d.push({event:$,listeners:_}),C?$.data=C:(C=kO(n),C!==null&&($.data=C)))),(C=BF?zF(t,n):qF(t,n))&&(c=em(c,"onBeforeInput"),0<c.length&&(u=new JE("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=C))}TO(d,e)})}function jd(t,e,n){return{instance:t,listener:e,currentTarget:n}}function em(t,e){for(var n=e+"Capture",r=[];t!==null;){var o=t,s=o.stateNode;o.tag===5&&s!==null&&(o=s,s=Od(t,n),s!=null&&r.unshift(jd(t,s,o)),s=Od(t,e),s!=null&&r.push(jd(t,s,o))),t=t.return}return r}function sl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function dS(t,e,n,r,o){for(var s=e._reactName,i=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,o?(l=Od(n,s),l!=null&&i.unshift(jd(n,l,a))):o||(l=Od(n,s),l!=null&&i.push(jd(n,l,a)))),n=n.return}i.length!==0&&t.push({event:e,listeners:i})}function tm(){}var Jy=null,Yy=null;function OO(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function a0(t,e){return t==="textarea"||t==="option"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var fS=typeof setTimeout=="function"?setTimeout:void 0,QF=typeof clearTimeout=="function"?clearTimeout:void 0;function jx(t){t.nodeType===1?t.textContent="":t.nodeType===9&&(t=t.body,t!=null&&(t.textContent=""))}function Bl(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break}return t}function pS(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Xy=0;function eB(t){return{$$typeof:_x,toString:t,valueOf:t}}var Gg=Math.random().toString(36).slice(2),Fs="__reactFiber$"+Gg,nm="__reactProps$"+Gg,jc="__reactContainer$"+Gg,hS="__reactEvents$"+Gg;function Qi(t){var e=t[Fs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[jc]||n[Fs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=pS(t);t!==null;){if(n=t[Fs])return n;t=pS(t)}return e}t=n,n=t.parentNode}return null}function Vf(t){return t=t[Fs]||t[jc],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Al(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function Zg(t){return t[nm]||null}function IO(t){var e=t[hS];return e===void 0&&(e=t[hS]=new Set),e}var l0=[],Nl=-1;function Ni(t){return{current:t}}function Qe(t){0>Nl||(t.current=l0[Nl],l0[Nl]=null,Nl--)}function ut(t,e){Nl++,l0[Nl]=t.current,t.current=e}var hi={},Xt=Ni(hi),En=Ni(!1),$a=hi;function sc(t,e){var n=t.type.contextTypes;if(!n)return hi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var o={},s;for(s in n)o[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function Sn(t){return t=t.childContextTypes,t!=null}function rm(){Qe(En),Qe(Xt)}function mS(t,e,n){if(Xt.current!==hi)throw Error(U(168));ut(Xt,e),ut(En,n)}function RO(t,e,n){var r=t.stateNode;if(t=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(U(108,Dl(e)||"Unknown",o));return ot({},n,r)}function Th(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||hi,$a=Xt.current,ut(Xt,t),ut(En,En.current),!0}function gS(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=RO(t,e,$a),r.__reactInternalMemoizedMergedChildContext=t,Qe(En),Qe(Xt),ut(Xt,t)):Qe(En),ut(En,n)}var Fx=null,fa=null,tB=Ct.unstable_runWithPriority,Bx=Ct.unstable_scheduleCallback,c0=Ct.unstable_cancelCallback,nB=Ct.unstable_shouldYield,yS=Ct.unstable_requestPaint,u0=Ct.unstable_now,rB=Ct.unstable_getCurrentPriorityLevel,Jg=Ct.unstable_ImmediatePriority,MO=Ct.unstable_UserBlockingPriority,DO=Ct.unstable_NormalPriority,LO=Ct.unstable_LowPriority,jO=Ct.unstable_IdlePriority,Qy={},oB=yS!==void 0?yS:function(){},Fo=null,Ah=null,eb=!1,bS=u0(),Zt=1e4>bS?u0:function(){return u0()-bS};function ic(){switch(rB()){case Jg:return 99;case MO:return 98;case DO:return 97;case LO:return 96;case jO:return 95;default:throw Error(U(332))}}function FO(t){switch(t){case 99:return Jg;case 98:return MO;case 97:return DO;case 96:return LO;case 95:return jO;default:throw Error(U(332))}}function Ea(t,e){return t=FO(t),tB(t,e)}function Fd(t,e,n){return t=FO(t),Bx(t,e,n)}function So(){if(Ah!==null){var t=Ah;Ah=null,c0(t)}BO()}function BO(){if(!eb&&Fo!==null){eb=!0;var t=0;try{var e=Fo;Ea(99,function(){for(;t<e.length;t++){var n=e[t];do n=n(!0);while(n!==null)}}),Fo=null}catch(n){throw Fo!==null&&(Fo=Fo.slice(t+1)),Bx(Jg,So),n}finally{eb=!1}}}var sB=Ka.ReactCurrentBatchConfig;function Sr(t,e){if(t&&t.defaultProps){e=ot({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var om=Ni(null),sm=null,Pl=null,im=null;function zx(){im=Pl=sm=null}function qx(t){var e=om.current;Qe(om),t.type._context._currentValue=e}function zO(t,e){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)===e){if(n===null||(n.childLanes&e)===e)break;n.childLanes|=e}else t.childLanes|=e,n!==null&&(n.childLanes|=e);t=t.return}}function zl(t,e){sm=t,im=Pl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Or=!0),t.firstContext=null)}function fr(t,e){if(im!==t&&e!==!1&&e!==0)if((typeof e!="number"||e===1073741823)&&(im=t,e=1073741823),e={context:t,observedBits:e,next:null},Pl===null){if(sm===null)throw Error(U(308));Pl=e,sm.dependencies={lanes:0,firstContext:e,responders:null}}else Pl=Pl.next=e;return t._currentValue}var As=!1;function Wx(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function qO(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Xs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Qs(t,e){if(t=t.updateQueue,t!==null){t=t.shared;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}}function vS(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?o=s=i:s=s.next=i,n=n.next}while(n!==null);s===null?o=s=e:s=s.next=e}else o=s=e;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Bd(t,e,n,r){var o=t.updateQueue;As=!1;var s=o.firstBaseUpdate,i=o.lastBaseUpdate,a=o.shared.pending;if(a!==null){o.shared.pending=null;var l=a,c=l.next;l.next=null,i===null?s=c:i.next=c,i=l;var u=t.alternate;if(u!==null){u=u.updateQueue;var d=u.lastBaseUpdate;d!==i&&(d===null?u.firstBaseUpdate=c:d.next=c,u.lastBaseUpdate=l)}}if(s!==null){d=o.baseState,i=0,u=c=l=null;do{a=s.lane;var f=s.eventTime;if((r&a)===a){u!==null&&(u=u.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=t,h=s;switch(a=e,f=n,h.tag){case 1:if(p=h.payload,typeof p=="function"){d=p.call(f,d,a);break e}d=p;break e;case 3:p.flags=p.flags&-4097|64;case 0:if(p=h.payload,a=typeof p=="function"?p.call(f,d,a):p,a==null)break e;d=ot({},d,a);break e;case 2:As=!0}}s.callback!==null&&(t.flags|=32,a=o.effects,a===null?o.effects=[s]:a.push(s))}else f={eventTime:f,lane:a,tag:s.tag,payload:s.payload,callback:s.callback,next:null},u===null?(c=u=f,l=d):u=u.next=f,i|=a;if(s=s.next,s===null){if(a=o.shared.pending,a===null)break;s=a.next,a.next=null,o.lastBaseUpdate=a,o.shared.pending=null}}while(1);u===null&&(l=d),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=u,Hf|=i,t.lanes=i,t.memoizedState=d}}function wS(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(U(191,o));o.call(r)}}}var WO=new zg.Component().refs;function am(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ot({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Yg={isMounted:function(t){return(t=t._reactInternals)?Ga(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Fn(),o=ei(t),s=Xs(r,o);s.payload=e,n!=null&&(s.callback=n),Qs(t,s),ti(t,o,r)},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Fn(),o=ei(t),s=Xs(r,o);s.tag=1,s.payload=e,n!=null&&(s.callback=n),Qs(t,s),ti(t,o,r)},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Fn(),r=ei(t),o=Xs(n,r);o.tag=2,e!=null&&(o.callback=e),Qs(t,o),ti(t,r,n)}};function xS(t,e,n,r,o,s,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,i):e.prototype&&e.prototype.isPureReactComponent?!Ld(n,r)||!Ld(o,s):!0}function VO(t,e,n){var r=!1,o=hi,s=e.contextType;return typeof s=="object"&&s!==null?s=fr(s):(o=Sn(e)?$a:Xt.current,r=e.contextTypes,s=(r=r!=null)?sc(t,o):hi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Yg,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=s),e}function kS(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Yg.enqueueReplaceState(e,e.state,null)}function d0(t,e,n,r){var o=t.stateNode;o.props=n,o.state=t.memoizedState,o.refs=WO,Wx(t);var s=e.contextType;typeof s=="object"&&s!==null?o.context=fr(s):(s=Sn(e)?$a:Xt.current,o.context=sc(t,s)),Bd(t,n,o,r),o.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(am(t,e,s,n),o.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&Yg.enqueueReplaceState(o,o.state,null),Bd(t,n,o,r),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4)}var Bp=Array.isArray;function bu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var i=r.refs;i===WO&&(i=r.refs={}),s===null?delete i[o]:i[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function zp(t,e){if(t.type!=="textarea")throw Error(U(31,Object.prototype.toString.call(e)==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function UO(t){function e(g,b){if(t){var w=g.lastEffect;w!==null?(w.nextEffect=b,g.lastEffect=b):g.firstEffect=g.lastEffect=b,b.nextEffect=null,b.flags=8}}function n(g,b){if(!t)return null;for(;b!==null;)e(g,b),b=b.sibling;return null}function r(g,b){for(g=new Map;b!==null;)b.key!==null?g.set(b.key,b):g.set(b.index,b),b=b.sibling;return g}function o(g,b){return g=gi(g,b),g.index=0,g.sibling=null,g}function s(g,b,w){return g.index=w,t?(w=g.alternate,w!==null?(w=w.index,w<b?(g.flags=2,b):w):(g.flags=2,b)):b}function i(g){return t&&g.alternate===null&&(g.flags=2),g}function a(g,b,w,x){return b===null||b.tag!==6?(b=sb(w,g.mode,x),b.return=g,b):(b=o(b,w),b.return=g,b)}function l(g,b,w,x){return b!==null&&b.elementType===w.type?(x=o(b,w.props),x.ref=bu(g,b,w),x.return=g,x):(x=Ih(w.type,w.key,w.props,null,g.mode,x),x.ref=bu(g,b,w),x.return=g,x)}function c(g,b,w,x){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=ib(w,g.mode,x),b.return=g,b):(b=o(b,w.children||[]),b.return=g,b)}function u(g,b,w,x,k){return b===null||b.tag!==7?(b=Ul(w,g.mode,x,k),b.return=g,b):(b=o(b,w),b.return=g,b)}function d(g,b,w){if(typeof b=="string"||typeof b=="number")return b=sb(""+b,g.mode,w),b.return=g,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Lu:return w=Ih(b.type,b.key,b.props,null,g.mode,w),w.ref=bu(g,null,b),w.return=g,w;case Yi:return b=ib(b,g.mode,w),b.return=g,b}if(Bp(b)||fu(b))return b=Ul(b,g.mode,w,null),b.return=g,b;zp(g,b)}return null}function f(g,b,w,x){var k=b!==null?b.key:null;if(typeof w=="string"||typeof w=="number")return k!==null?null:a(g,b,""+w,x);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Lu:return w.key===k?w.type===Rs?u(g,b,w.props.children,x,k):l(g,b,w,x):null;case Yi:return w.key===k?c(g,b,w,x):null}if(Bp(w)||fu(w))return k!==null?null:u(g,b,w,x,null);zp(g,w)}return null}function p(g,b,w,x,k){if(typeof x=="string"||typeof x=="number")return g=g.get(w)||null,a(b,g,""+x,k);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Lu:return g=g.get(x.key===null?w:x.key)||null,x.type===Rs?u(b,g,x.props.children,k,x.key):l(b,g,x,k);case Yi:return g=g.get(x.key===null?w:x.key)||null,c(b,g,x,k)}if(Bp(x)||fu(x))return g=g.get(w)||null,u(b,g,x,k,null);zp(b,x)}return null}function h(g,b,w,x){for(var k=null,S=null,_=b,C=b=0,$=null;_!==null&&C<w.length;C++){_.index>C?($=_,_=null):$=_.sibling;var T=f(g,_,w[C],x);if(T===null){_===null&&(_=$);break}t&&_&&T.alternate===null&&e(g,_),b=s(T,b,C),S===null?k=T:S.sibling=T,S=T,_=$}if(C===w.length)return n(g,_),k;if(_===null){for(;C<w.length;C++)_=d(g,w[C],x),_!==null&&(b=s(_,b,C),S===null?k=_:S.sibling=_,S=_);return k}for(_=r(g,_);C<w.length;C++)$=p(_,g,C,w[C],x),$!==null&&(t&&$.alternate!==null&&_.delete($.key===null?C:$.key),b=s($,b,C),S===null?k=$:S.sibling=$,S=$);return t&&_.forEach(function(A){return e(g,A)}),k}function y(g,b,w,x){var k=fu(w);if(typeof k!="function")throw Error(U(150));if(w=k.call(w),w==null)throw Error(U(151));for(var S=k=null,_=b,C=b=0,$=null,T=w.next();_!==null&&!T.done;C++,T=w.next()){_.index>C?($=_,_=null):$=_.sibling;var A=f(g,_,T.value,x);if(A===null){_===null&&(_=$);break}t&&_&&A.alternate===null&&e(g,_),b=s(A,b,C),S===null?k=A:S.sibling=A,S=A,_=$}if(T.done)return n(g,_),k;if(_===null){for(;!T.done;C++,T=w.next())T=d(g,T.value,x),T!==null&&(b=s(T,b,C),S===null?k=T:S.sibling=T,S=T);return k}for(_=r(g,_);!T.done;C++,T=w.next())T=p(_,g,C,T.value,x),T!==null&&(t&&T.alternate!==null&&_.delete(T.key===null?C:T.key),b=s(T,b,C),S===null?k=T:S.sibling=T,S=T);return t&&_.forEach(function(N){return e(g,N)}),k}return function(g,b,w,x){var k=typeof w=="object"&&w!==null&&w.type===Rs&&w.key===null;k&&(w=w.props.children);var S=typeof w=="object"&&w!==null;if(S)switch(w.$$typeof){case Lu:e:{for(S=w.key,k=b;k!==null;){if(k.key===S){switch(k.tag){case 7:if(w.type===Rs){n(g,k.sibling),b=o(k,w.props.children),b.return=g,g=b;break e}break;default:if(k.elementType===w.type){n(g,k.sibling),b=o(k,w.props),b.ref=bu(g,k,w),b.return=g,g=b;break e}}n(g,k);break}else e(g,k);k=k.sibling}w.type===Rs?(b=Ul(w.props.children,g.mode,x,w.key),b.return=g,g=b):(x=Ih(w.type,w.key,w.props,null,g.mode,x),x.ref=bu(g,b,w),x.return=g,g=x)}return i(g);case Yi:e:{for(k=w.key;b!==null;){if(b.key===k)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){n(g,b.sibling),b=o(b,w.children||[]),b.return=g,g=b;break e}else{n(g,b);break}else e(g,b);b=b.sibling}b=ib(w,g.mode,x),b.return=g,g=b}return i(g)}if(typeof w=="string"||typeof w=="number")return w=""+w,b!==null&&b.tag===6?(n(g,b.sibling),b=o(b,w),b.return=g,g=b):(n(g,b),b=sb(w,g.mode,x),b.return=g,g=b),i(g);if(Bp(w))return h(g,b,w,x);if(fu(w))return y(g,b,w,x);if(S&&zp(g,w),typeof w=="undefined"&&!k)switch(g.tag){case 1:case 22:case 0:case 11:case 15:throw Error(U(152,Dl(g.type)||"Component"))}return n(g,b)}}var lm=UO(!0),HO=UO(!1),Uf={},ho=Ni(Uf),zd=Ni(Uf),qd=Ni(Uf);function ea(t){if(t===Uf)throw Error(U(174));return t}function f0(t,e){switch(ut(qd,e),ut(zd,t),ut(ho,Uf),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Jv(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Jv(e,t)}Qe(ho),ut(ho,e)}function ac(){Qe(ho),Qe(zd),Qe(qd)}function _S(t){ea(qd.current);var e=ea(ho.current),n=Jv(e,t.type);e!==n&&(ut(zd,t),ut(ho,n))}function Vx(t){zd.current===t&&(Qe(ho),Qe(zd))}var lt=Ni(0);function cm(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&64)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Uo=null,Bs=null,mo=!1;function KO(t,e){var n=er(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.flags=8,t.lastEffect!==null?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function $S(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,!0):!1;case 13:return!1;default:return!1}}function p0(t){if(mo){var e=Bs;if(e){var n=e;if(!$S(t,e)){if(e=Bl(n.nextSibling),!e||!$S(t,e)){t.flags=t.flags&-1025|2,mo=!1,Uo=t;return}KO(Uo,n)}Uo=t,Bs=Bl(e.firstChild)}else t.flags=t.flags&-1025|2,mo=!1,Uo=t}}function ES(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Uo=t}function qp(t){if(t!==Uo)return!1;if(!mo)return ES(t),mo=!0,!1;var e=t.type;if(t.tag!==5||e!=="head"&&e!=="body"&&!a0(e,t.memoizedProps))for(e=Bs;e;)KO(t,e),e=Bl(e.nextSibling);if(ES(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Bs=Bl(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Bs=null}}else Bs=Uo?Bl(t.stateNode.nextSibling):null;return!0}function tb(){Bs=Uo=null,mo=!1}var ql=[];function Ux(){for(var t=0;t<ql.length;t++)ql[t]._workInProgressVersionPrimary=null;ql.length=0}var sd=Ka.ReactCurrentDispatcher,or=Ka.ReactCurrentBatchConfig,Wd=0,ht=null,Ht=null,It=null,um=!1,id=!1;function wn(){throw Error(U(321))}function Hx(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Qn(t[n],e[n]))return!1;return!0}function Kx(t,e,n,r,o,s){if(Wd=s,ht=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,sd.current=t===null||t.memoizedState===null?aB:lB,t=n(r,o),id){s=0;do{if(id=!1,!(25>s))throw Error(U(301));s+=1,It=Ht=null,e.updateQueue=null,sd.current=cB,t=n(r,o)}while(id)}if(sd.current=hm,e=Ht!==null&&Ht.next!==null,Wd=0,It=Ht=ht=null,um=!1,e)throw Error(U(300));return t}function ta(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?ht.memoizedState=It=t:It=It.next=t,It}function Za(){if(Ht===null){var t=ht.alternate;t=t!==null?t.memoizedState:null}else t=Ht.next;var e=It===null?ht.memoizedState:It.next;if(e!==null)It=e,Ht=t;else{if(t===null)throw Error(U(310));Ht=t,t={memoizedState:Ht.memoizedState,baseState:Ht.baseState,baseQueue:Ht.baseQueue,queue:Ht.queue,next:null},It===null?ht.memoizedState=It=t:It=It.next=t}return It}function ao(t,e){return typeof e=="function"?e(t):e}function vu(t){var e=Za(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=Ht,o=r.baseQueue,s=n.pending;if(s!==null){if(o!==null){var i=o.next;o.next=s.next,s.next=i}r.baseQueue=o=s,n.pending=null}if(o!==null){o=o.next,r=r.baseState;var a=i=s=null,l=o;do{var c=l.lane;if((Wd&c)===c)a!==null&&(a=a.next={lane:0,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),r=l.eagerReducer===t?l.eagerState:t(r,l.action);else{var u={lane:c,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};a===null?(i=a=u,s=r):a=a.next=u,ht.lanes|=c,Hf|=c}l=l.next}while(l!==null&&l!==o);a===null?s=r:a.next=i,Qn(r,e.memoizedState)||(Or=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=a,n.lastRenderedState=r}return[e.memoizedState,n.dispatch]}function wu(t){var e=Za(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,o=n.pending,s=e.memoizedState;if(o!==null){n.pending=null;var i=o=o.next;do s=t(s,i.action),i=i.next;while(i!==o);Qn(s,e.memoizedState)||(Or=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function SS(t,e,n){var r=e._getVersion;r=r(e._source);var o=e._workInProgressVersionPrimary;if(o!==null?t=o===r:(t=t.mutableReadLanes,(t=(Wd&t)===t)&&(e._workInProgressVersionPrimary=r,ql.push(e))),t)return n(e._source);throw ql.push(e),Error(U(350))}function GO(t,e,n,r){var o=cn;if(o===null)throw Error(U(349));var s=e._getVersion,i=s(e._source),a=sd.current,l=a.useState(function(){return SS(o,e,n)}),c=l[1],u=l[0];l=It;var d=t.memoizedState,f=d.refs,p=f.getSnapshot,h=d.source;d=d.subscribe;var y=ht;return t.memoizedState={refs:f,source:e,subscribe:r},a.useEffect(function(){f.getSnapshot=n,f.setSnapshot=c;var g=s(e._source);if(!Qn(i,g)){g=n(e._source),Qn(u,g)||(c(g),g=ei(y),o.mutableReadLanes|=g&o.pendingLanes),g=o.mutableReadLanes,o.entangledLanes|=g;for(var b=o.entanglements,w=g;0<w;){var x=31-pi(w),k=1<<x;b[x]|=g,w&=~k}}},[n,e,r]),a.useEffect(function(){return r(e._source,function(){var g=f.getSnapshot,b=f.setSnapshot;try{b(g(e._source));var w=ei(y);o.mutableReadLanes|=w&o.pendingLanes}catch(x){b(function(){throw x})}})},[e,r]),Qn(p,n)&&Qn(h,e)&&Qn(d,r)||(t={pending:null,dispatch:null,lastRenderedReducer:ao,lastRenderedState:u},t.dispatch=c=Jx.bind(null,ht,t),l.queue=t,l.baseQueue=null,u=SS(o,e,n),l.memoizedState=l.baseState=u),u}function ZO(t,e,n){var r=Za();return GO(r,t,e,n)}function xu(t){var e=ta();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t=e.queue={pending:null,dispatch:null,lastRenderedReducer:ao,lastRenderedState:t},t=t.dispatch=Jx.bind(null,ht,t),[e.memoizedState,t]}function dm(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ht.updateQueue,e===null?(e={lastEffect:null},ht.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function CS(t){var e=ta();return t={current:t},e.memoizedState=t}function fm(){return Za().memoizedState}function h0(t,e,n,r){var o=ta();ht.flags|=t,o.memoizedState=dm(1|e,n,void 0,r===void 0?null:r)}function Gx(t,e,n,r){var o=Za();r=r===void 0?null:r;var s=void 0;if(Ht!==null){var i=Ht.memoizedState;if(s=i.destroy,r!==null&&Hx(r,i.deps)){dm(e,n,s,r);return}}ht.flags|=t,o.memoizedState=dm(1|e,n,s,r)}function TS(t,e){return h0(516,4,t,e)}function pm(t,e){return Gx(516,4,t,e)}function JO(t,e){return Gx(4,2,t,e)}function YO(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function XO(t,e,n){return n=n!=null?n.concat([t]):null,Gx(4,2,YO.bind(null,e,t),n)}function Zx(){}function QO(t,e){var n=Za();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Hx(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function eI(t,e){var n=Za();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Hx(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function iB(t,e){var n=ic();Ea(98>n?98:n,function(){t(!0)}),Ea(97<n?97:n,function(){var r=or.transition;or.transition=1;try{t(!1),e()}finally{or.transition=r}})}function Jx(t,e,n){var r=Fn(),o=ei(t),s={lane:o,action:n,eagerReducer:null,eagerState:null,next:null},i=e.pending;if(i===null?s.next=s:(s.next=i.next,i.next=s),e.pending=s,i=t.alternate,t===ht||i!==null&&i===ht)id=um=!0;else{if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,n);if(s.eagerReducer=i,s.eagerState=l,Qn(l,a))return}catch(c){}finally{}ti(t,o,r)}}var hm={readContext:fr,useCallback:wn,useContext:wn,useEffect:wn,useImperativeHandle:wn,useLayoutEffect:wn,useMemo:wn,useReducer:wn,useRef:wn,useState:wn,useDebugValue:wn,useDeferredValue:wn,useTransition:wn,useMutableSource:wn,useOpaqueIdentifier:wn,unstable_isNewReconciler:!1},aB={readContext:fr,useCallback:function(t,e){return ta().memoizedState=[t,e===void 0?null:e],t},useContext:fr,useEffect:TS,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,h0(4,2,YO.bind(null,e,t),n)},useLayoutEffect:function(t,e){return h0(4,2,t,e)},useMemo:function(t,e){var n=ta();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ta();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t=r.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},t=t.dispatch=Jx.bind(null,ht,t),[r.memoizedState,t]},useRef:CS,useState:xu,useDebugValue:Zx,useDeferredValue:function(t){var e=xu(t),n=e[0],r=e[1];return TS(function(){var o=or.transition;or.transition=1;try{r(t)}finally{or.transition=o}},[t]),n},useTransition:function(){var t=xu(!1),e=t[0];return t=iB.bind(null,t[1]),CS(t),[t,e]},useMutableSource:function(t,e,n){var r=ta();return r.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:t,subscribe:n},GO(r,t,e,n)},useOpaqueIdentifier:function(){if(mo){var t=!1,e=eB(function(){throw t||(t=!0,n("r:"+(Xy++).toString(36))),Error(U(355))}),n=xu(e)[1];return!(ht.mode&2)&&(ht.flags|=516,dm(5,function(){n("r:"+(Xy++).toString(36))},void 0,null)),e}return e="r:"+(Xy++).toString(36),xu(e),e},unstable_isNewReconciler:!1},lB={readContext:fr,useCallback:QO,useContext:fr,useEffect:pm,useImperativeHandle:XO,useLayoutEffect:JO,useMemo:eI,useReducer:vu,useRef:fm,useState:function(){return vu(ao)},useDebugValue:Zx,useDeferredValue:function(t){var e=vu(ao),n=e[0],r=e[1];return pm(function(){var o=or.transition;or.transition=1;try{r(t)}finally{or.transition=o}},[t]),n},useTransition:function(){var t=vu(ao)[0];return[fm().current,t]},useMutableSource:ZO,useOpaqueIdentifier:function(){return vu(ao)[0]},unstable_isNewReconciler:!1},cB={readContext:fr,useCallback:QO,useContext:fr,useEffect:pm,useImperativeHandle:XO,useLayoutEffect:JO,useMemo:eI,useReducer:wu,useRef:fm,useState:function(){return wu(ao)},useDebugValue:Zx,useDeferredValue:function(t){var e=wu(ao),n=e[0],r=e[1];return pm(function(){var o=or.transition;or.transition=1;try{r(t)}finally{or.transition=o}},[t]),n},useTransition:function(){var t=wu(ao)[0];return[fm().current,t]},useMutableSource:ZO,useOpaqueIdentifier:function(){return wu(ao)[0]},unstable_isNewReconciler:!1},uB=Ka.ReactCurrentOwner,Or=!1;function xn(t,e,n,r){e.child=t===null?HO(e,null,n,r):lm(e,t.child,n,r)}function AS(t,e,n,r,o){n=n.render;var s=e.ref;return zl(e,o),r=Kx(t,e,n,r,s,o),t!==null&&!Or?(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~o,Ho(t,e,o)):(e.flags|=1,xn(t,e,r,o),e.child)}function NS(t,e,n,r,o,s){if(t===null){var i=n.type;return typeof i=="function"&&!nk(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,tI(t,e,i,r,o,s)):(t=Ih(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}return i=t.child,!(o&s)&&(o=i.memoizedProps,n=n.compare,n=n!==null?n:Ld,n(o,r)&&t.ref===e.ref)?Ho(t,e,s):(e.flags|=1,t=gi(i,r),t.ref=e.ref,t.return=e,e.child=t)}function tI(t,e,n,r,o,s){if(t!==null&&Ld(t.memoizedProps,r)&&t.ref===e.ref)if(Or=!1,(s&o)!==0)t.flags&16384&&(Or=!0);else return e.lanes=t.lanes,Ho(t,e,s);return m0(t,e,n,r,s)}function nb(t,e,n){var r=e.pendingProps,o=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden"||r.mode==="unstable-defer-without-hiding")if(!(e.mode&4))e.memoizedState={baseLanes:0},Vp(e,n);else if(n&1073741824)e.memoizedState={baseLanes:0},Vp(e,s!==null?s.baseLanes:n);else return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t},Vp(e,t),null;else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Vp(e,r);return xn(t,e,o,n),e.child}function nI(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=128)}function m0(t,e,n,r,o){var s=Sn(n)?$a:Xt.current;return s=sc(e,s),zl(e,o),n=Kx(t,e,n,r,s,o),t!==null&&!Or?(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~o,Ho(t,e,o)):(e.flags|=1,xn(t,e,n,o),e.child)}function PS(t,e,n,r,o){if(Sn(n)){var s=!0;Th(e)}else s=!1;if(zl(e,o),e.stateNode===null)t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),VO(e,n,r),d0(e,n,r,o),r=!0;else if(t===null){var i=e.stateNode,a=e.memoizedProps;i.props=a;var l=i.context,c=n.contextType;typeof c=="object"&&c!==null?c=fr(c):(c=Sn(n)?$a:Xt.current,c=sc(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof i.getSnapshotBeforeUpdate=="function";d||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==r||l!==c)&&kS(e,i,r,c),As=!1;var f=e.memoizedState;i.state=f,Bd(e,r,i,o),l=e.memoizedState,a!==r||f!==l||En.current||As?(typeof u=="function"&&(am(e,n,u,r),l=e.memoizedState),(a=As||xS(e,n,a,r,f,l,c))?(d||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4)):(typeof i.componentDidMount=="function"&&(e.flags|=4),e.memoizedProps=r,e.memoizedState=l),i.props=r,i.state=l,i.context=c,r=a):(typeof i.componentDidMount=="function"&&(e.flags|=4),r=!1)}else{i=e.stateNode,qO(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Sr(e.type,a),i.props=c,d=e.pendingProps,f=i.context,l=n.contextType,typeof l=="object"&&l!==null?l=fr(l):(l=Sn(n)?$a:Xt.current,l=sc(e,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==d||f!==l)&&kS(e,i,r,l),As=!1,f=e.memoizedState,i.state=f,Bd(e,r,i,o);var h=e.memoizedState;a!==d||f!==h||En.current||As?(typeof p=="function"&&(am(e,n,p,r),h=e.memoizedState),(c=As||xS(e,n,c,r,f,h,l))?(u||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,h,l),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,h,l)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=256)):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=256),e.memoizedProps=r,e.memoizedState=h),i.props=r,i.state=h,i.context=l,r=c):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=256),r=!1)}return g0(t,e,n,r,s,o)}function g0(t,e,n,r,o,s){nI(t,e);var i=(e.flags&64)!==0;if(!r&&!i)return o&&gS(e,n,!1),Ho(t,e,s);r=e.stateNode,uB.current=e;var a=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&i?(e.child=lm(e,t.child,null,s),e.child=lm(e,null,a,s)):xn(t,e,a,s),e.memoizedState=r.state,o&&gS(e,n,!0),e.child}function OS(t){var e=t.stateNode;e.pendingContext?mS(t,e.pendingContext,e.pendingContext!==e.context):e.context&&mS(t,e.context,!1),f0(t,e.containerInfo)}var Wp={dehydrated:null,retryLane:0};function IS(t,e,n){var r=e.pendingProps,o=lt.current,s=!1,i;return(i=(e.flags&64)!==0)||(i=t!==null&&t.memoizedState===null?!1:(o&2)!==0),i?(s=!0,e.flags&=-65):t!==null&&t.memoizedState===null||r.fallback===void 0||r.unstable_avoidThisFallback===!0||(o|=1),ut(lt,o&1),t===null?(r.fallback!==void 0&&p0(e),t=r.children,o=r.fallback,s?(t=RS(e,t,o,n),e.child.memoizedState={baseLanes:n},e.memoizedState=Wp,t):typeof r.unstable_expectedLoadTime=="number"?(t=RS(e,t,o,n),e.child.memoizedState={baseLanes:n},e.memoizedState=Wp,e.lanes=33554432,t):(n=rk({mode:"visible",children:t},e.mode,n,null),n.return=e,e.child=n)):t.memoizedState!==null?s?(r=DS(t,e,r.children,r.fallback,n),s=e.child,o=t.child.memoizedState,s.memoizedState=o===null?{baseLanes:n}:{baseLanes:o.baseLanes|n},s.childLanes=t.childLanes&~n,e.memoizedState=Wp,r):(n=MS(t,e,r.children,n),e.memoizedState=null,n):s?(r=DS(t,e,r.children,r.fallback,n),s=e.child,o=t.child.memoizedState,s.memoizedState=o===null?{baseLanes:n}:{baseLanes:o.baseLanes|n},s.childLanes=t.childLanes&~n,e.memoizedState=Wp,r):(n=MS(t,e,r.children,n),e.memoizedState=null,n)}function RS(t,e,n,r){var o=t.mode,s=t.child;return e={mode:"hidden",children:e},!(o&2)&&s!==null?(s.childLanes=0,s.pendingProps=e):s=rk(e,o,0,null),n=Ul(n,o,r,null),s.return=t,n.return=t,s.sibling=n,t.child=s,n}function MS(t,e,n,r){var o=t.child;return t=o.sibling,n=gi(o,{mode:"visible",children:n}),!(e.mode&2)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(t.nextEffect=null,t.flags=8,e.firstEffect=e.lastEffect=t),e.child=n}function DS(t,e,n,r,o){var s=e.mode,i=t.child;t=i.sibling;var a={mode:"hidden",children:n};return!(s&2)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=a,i=n.lastEffect,i!==null?(e.firstEffect=n.firstEffect,e.lastEffect=i,i.nextEffect=null):e.firstEffect=e.lastEffect=null):n=gi(i,a),t!==null?r=gi(t,r):(r=Ul(r,s,o,null),r.flags|=2),r.return=e,n.return=e,n.sibling=r,e.child=n,r}function LS(t,e){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),zO(t.return,e)}function rb(t,e,n,r,o,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o,lastEffect:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o,i.lastEffect=s)}function jS(t,e,n){var r=e.pendingProps,o=r.revealOrder,s=r.tail;if(xn(t,e,r.children,n),r=lt.current,r&2)r=r&1|2,e.flags|=64;else{if(t!==null&&t.flags&64)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&LS(t,n);else if(t.tag===19)LS(t,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ut(lt,r),!(e.mode&2))e.memoizedState=null;else switch(o){case"forwards":for(n=e.child,o=null;n!==null;)t=n.alternate,t!==null&&cm(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=e.child,e.child=null):(o=n.sibling,n.sibling=null),rb(e,!1,o,n,s,e.lastEffect);break;case"backwards":for(n=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&cm(t)===null){e.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}rb(e,!0,n,null,s,e.lastEffect);break;case"together":rb(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function Ho(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Hf|=e.lanes,n&e.childLanes){if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=gi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=gi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}return null}var rI,y0,oI,sI;rI=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};y0=function(){};oI=function(t,e,n,r){var o=t.memoizedProps;if(o!==r){t=e.stateNode,ea(ho.current);var s=null;switch(n){case"input":o=Vv(t,o),r=Vv(t,r),s=[];break;case"option":o=Kv(t,o),r=Kv(t,r),s=[];break;case"select":o=ot({},o,{value:void 0}),r=ot({},r,{value:void 0}),s=[];break;case"textarea":o=Gv(t,o),r=Gv(t,r),s=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=tm)}Yv(n,r);var i;n=null;for(c in o)if(!r.hasOwnProperty(c)&&o.hasOwnProperty(c)&&o[c]!=null)if(c==="style"){var a=o[c];for(i in a)a.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Nd.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=o!=null?o[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(i in a)!a.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in l)l.hasOwnProperty(i)&&a[i]!==l[i]&&(n||(n={}),n[i]=l[i])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Nd.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ye("scroll",t),s||a===l||(s=[])):typeof l=="object"&&l!==null&&l.$$typeof===_x?l.toString():(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};sI=function(t,e,n,r){n!==r&&(e.flags|=4)};function ku(t,e){if(!mo)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function dB(t,e,n){var r=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Sn(e.type)&&rm(),null;case 3:return ac(),Qe(En),Qe(Xt),Ux(),r=e.stateNode,r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(qp(e)?e.flags|=4:r.hydrate||(e.flags|=256)),y0(e),null;case 5:Vx(e);var o=ea(qd.current);if(n=e.type,t!==null&&e.stateNode!=null)oI(t,e,n,r,o),t.ref!==e.ref&&(e.flags|=128);else{if(!r){if(e.stateNode===null)throw Error(U(166));return null}if(t=ea(ho.current),qp(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Fs]=e,r[nm]=s,n){case"dialog":Ye("cancel",r),Ye("close",r);break;case"iframe":case"object":case"embed":Ye("load",r);break;case"video":case"audio":for(t=0;t<Fu.length;t++)Ye(Fu[t],r);break;case"source":Ye("error",r);break;case"img":case"image":case"link":Ye("error",r),Ye("load",r);break;case"details":Ye("toggle",r);break;case"input":jE(r,s),Ye("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ye("invalid",r);break;case"textarea":BE(r,s),Ye("invalid",r)}Yv(n,s),t=null;for(var i in s)s.hasOwnProperty(i)&&(o=s[i],i==="children"?typeof o=="string"?r.textContent!==o&&(t=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(t=["children",""+o]):Nd.hasOwnProperty(i)&&o!=null&&i==="onScroll"&&Ye("scroll",r));switch(n){case"input":Dp(r),FE(r,s,!0);break;case"textarea":Dp(r),zE(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=tm)}r=t,e.updateQueue=r,r!==null&&(e.flags|=4)}else{switch(i=o.nodeType===9?o:o.ownerDocument,t===Zv.html&&(t=XP(n)),t===Zv.html?n==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=i.createElement(n,{is:r.is}):(t=i.createElement(n),n==="select"&&(i=t,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):t=i.createElementNS(t,n),t[Fs]=e,t[nm]=r,rI(t,e,!1,!1),e.stateNode=t,i=Xv(n,r),n){case"dialog":Ye("cancel",t),Ye("close",t),o=r;break;case"iframe":case"object":case"embed":Ye("load",t),o=r;break;case"video":case"audio":for(o=0;o<Fu.length;o++)Ye(Fu[o],t);o=r;break;case"source":Ye("error",t),o=r;break;case"img":case"image":case"link":Ye("error",t),Ye("load",t),o=r;break;case"details":Ye("toggle",t),o=r;break;case"input":jE(t,r),o=Vv(t,r),Ye("invalid",t);break;case"option":o=Kv(t,r);break;case"select":t._wrapperState={wasMultiple:!!r.multiple},o=ot({},r,{value:void 0}),Ye("invalid",t);break;case"textarea":BE(t,r),o=Gv(t,r),Ye("invalid",t);break;default:o=r}Yv(n,o);var a=o;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?tO(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&QP(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Pd(t,l):typeof l=="number"&&Pd(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Nd.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ye("scroll",t):l!=null&&yx(t,s,l,i))}switch(n){case"input":Dp(t),FE(t,r,!1);break;case"textarea":Dp(t),zE(t);break;case"option":r.value!=null&&t.setAttribute("value",""+fi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Ll(t,!!r.multiple,s,!1):r.defaultValue!=null&&Ll(t,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=tm)}OO(n,r)&&(e.flags|=4)}e.ref!==null&&(e.flags|=128)}return null;case 6:if(t&&e.stateNode!=null)sI(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));n=ea(qd.current),ea(ho.current),qp(e)?(r=e.stateNode,n=e.memoizedProps,r[Fs]=e,r.nodeValue!==n&&(e.flags|=4)):(r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Fs]=e,e.stateNode=r)}return null;case 13:return Qe(lt),r=e.memoizedState,e.flags&64?(e.lanes=n,e):(r=r!==null,n=!1,t===null?e.memoizedProps.fallback!==void 0&&qp(e):n=t.memoizedState!==null,r&&!n&&e.mode&2&&(t===null&&e.memoizedProps.unstable_avoidThisFallback!==!0||lt.current&1?Rt===0&&(Rt=3):((Rt===0||Rt===3)&&(Rt=4),cn===null||!(Hf&134217727)&&!(Bc&134217727)||Wl(cn,Yt))),(r||n)&&(e.flags|=4),null);case 4:return ac(),y0(e),t===null&&AO(e.stateNode.containerInfo),null;case 10:return qx(e),null;case 17:return Sn(e.type)&&rm(),null;case 19:if(Qe(lt),r=e.memoizedState,r===null)return null;if(s=(e.flags&64)!==0,i=r.rendering,i===null)if(s)ku(r,!1);else{if(Rt!==0||t!==null&&t.flags&64)for(t=e.child;t!==null;){if(i=cm(t),i!==null){for(e.flags|=64,ku(r,!1),s=i.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),r.lastEffect===null&&(e.firstEffect=null),e.lastEffect=r.lastEffect,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,i=s.alternate,i===null?(s.childLanes=0,s.lanes=t,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,t=i.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ut(lt,lt.current&1|2),e.child}t=t.sibling}r.tail!==null&&Zt()>_0&&(e.flags|=64,s=!0,ku(r,!1),e.lanes=33554432)}else{if(!s)if(t=cm(i),t!==null){if(e.flags|=64,s=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ku(r,!0),r.tail===null&&r.tailMode==="hidden"&&!i.alternate&&!mo)return e=e.lastEffect=r.lastEffect,e!==null&&(e.nextEffect=null),null}else 2*Zt()-r.renderingStartTime>_0&&n!==1073741824&&(e.flags|=64,s=!0,ku(r,!1),e.lanes=33554432);r.isBackwards?(i.sibling=e.child,e.child=i):(n=r.last,n!==null?n.sibling=i:e.child=i,r.last=i)}return r.tail!==null?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=e.lastEffect,r.renderingStartTime=Zt(),n.sibling=null,e=lt.current,ut(lt,s?e&1|2:e&1),n):null;case 23:case 24:return tk(),t!==null&&t.memoizedState!==null!=(e.memoizedState!==null)&&r.mode!=="unstable-defer-without-hiding"&&(e.flags|=4),null}throw Error(U(156,e.tag))}function fB(t){switch(t.tag){case 1:Sn(t.type)&&rm();var e=t.flags;return e&4096?(t.flags=e&-4097|64,t):null;case 3:if(ac(),Qe(En),Qe(Xt),Ux(),e=t.flags,e&64)throw Error(U(285));return t.flags=e&-4097|64,t;case 5:return Vx(t),null;case 13:return Qe(lt),e=t.flags,e&4096?(t.flags=e&-4097|64,t):null;case 19:return Qe(lt),null;case 4:return ac(),null;case 10:return qx(t),null;case 23:case 24:return tk(),null;default:return null}}function Yx(t,e){try{var n="",r=e;do n+=Hj(r),r=r.return;while(r);var o=n}catch(s){o=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:o}}function b0(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var pB=typeof WeakMap=="function"?WeakMap:Map;function iI(t,e,n){n=Xs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){gm||(gm=!0,$0=r),b0(t,e)},n}function aI(t,e,n){n=Xs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var o=e.value;n.payload=function(){return b0(t,e),r(o)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){typeof r!="function"&&(lo===null?lo=new Set([this]):lo.add(this),b0(t,e));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),n}var hB=typeof WeakSet=="function"?WeakSet:Set;function FS(t){var e=t.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(n){ni(t,n)}else e.current=null}function mB(t,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(e.flags&256&&t!==null){var n=t.memoizedProps,r=t.memoizedState;t=e.stateNode,e=t.getSnapshotBeforeUpdate(e.elementType===e.type?n:Sr(e.type,n),r),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:e.flags&256&&jx(e.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(U(163))}function gB(t,e,n){switch(n.tag){case 0:case 11:case 15:case 22:if(e=n.updateQueue,e=e!==null?e.lastEffect:null,e!==null){t=e=e.next;do{if((t.tag&3)===3){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}if(e=n.updateQueue,e=e!==null?e.lastEffect:null,e!==null){t=e=e.next;do{var o=t;r=o.next,o=o.tag,o&4&&o&1&&(gI(n,t),$B(n,t)),t=r}while(t!==e)}return;case 1:t=n.stateNode,n.flags&4&&(e===null?t.componentDidMount():(r=n.elementType===n.type?e.memoizedProps:Sr(n.type,e.memoizedProps),t.componentDidUpdate(r,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate))),e=n.updateQueue,e!==null&&wS(n,e,t);return;case 3:if(e=n.updateQueue,e!==null){if(t=null,n.child!==null)switch(n.child.tag){case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}wS(n,e,t)}return;case 5:t=n.stateNode,e===null&&n.flags&4&&OO(n.type,n.memoizedProps)&&t.focus();return;case 6:return;case 4:return;case 12:return;case 13:n.memoizedState===null&&(n=n.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&dO(n))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(U(163))}function BS(t,e){for(var n=t;;){if(n.tag===5){var r=n.stateNode;if(e)r=r.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var o=n.memoizedProps.style;o=o!=null&&o.hasOwnProperty("display")?o.display:null,r.style.display=eO("display",o)}}else if(n.tag===6)n.stateNode.nodeValue=e?"":n.memoizedProps;else if((n.tag!==23&&n.tag!==24||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function zS(t,e){if(fa&&typeof fa.onCommitFiberUnmount=="function")try{fa.onCommitFiberUnmount(Fx,e)}catch(s){}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(t=e.updateQueue,t!==null&&(t=t.lastEffect,t!==null)){var n=t=t.next;do{var r=n,o=r.destroy;if(r=r.tag,o!==void 0)if(r&4)gI(e,n);else{r=e;try{o()}catch(s){ni(r,s)}}n=n.next}while(n!==t)}break;case 1:if(FS(e),t=e.stateNode,typeof t.componentWillUnmount=="function")try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(s){ni(e,s)}break;case 5:FS(e);break;case 4:lI(t,e)}}function qS(t){t.alternate=null,t.child=null,t.dependencies=null,t.firstEffect=null,t.lastEffect=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.return=null,t.updateQueue=null}function WS(t){return t.tag===5||t.tag===3||t.tag===4}function VS(t){e:{for(var e=t.return;e!==null;){if(WS(e))break e;e=e.return}throw Error(U(160))}var n=e;switch(e=n.stateNode,n.tag){case 5:var r=!1;break;case 3:e=e.containerInfo,r=!0;break;case 4:e=e.containerInfo,r=!0;break;default:throw Error(U(161))}n.flags&16&&(Pd(e,""),n.flags&=-17);e:t:for(n=t;;){for(;n.sibling===null;){if(n.return===null||WS(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2)){n=n.stateNode;break e}}r?v0(t,n,e):w0(t,n,e)}function v0(t,e,n){var r=t.tag,o=r===5||r===6;if(o)t=o?t.stateNode:t.stateNode.instance,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=tm));else if(r!==4&&(t=t.child,t!==null))for(v0(t,e,n),t=t.sibling;t!==null;)v0(t,e,n),t=t.sibling}function w0(t,e,n){var r=t.tag,o=r===5||r===6;if(o)t=o?t.stateNode:t.stateNode.instance,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(w0(t,e,n),t=t.sibling;t!==null;)w0(t,e,n),t=t.sibling}function lI(t,e){for(var n=e,r=!1,o,s;;){if(!r){r=n.return;e:for(;;){if(r===null)throw Error(U(160));switch(o=r.stateNode,r.tag){case 5:s=!1;break e;case 3:o=o.containerInfo,s=!0;break e;case 4:o=o.containerInfo,s=!0;break e}r=r.return}r=!0}if(n.tag===5||n.tag===6){e:for(var i=t,a=n,l=a;;)if(zS(i,l),l.child!==null&&l.tag!==4)l.child.return=l,l=l.child;else{if(l===a)break e;for(;l.sibling===null;){if(l.return===null||l.return===a)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}s?(i=o,a=n.stateNode,i.nodeType===8?i.parentNode.removeChild(a):i.removeChild(a)):o.removeChild(n.stateNode)}else if(n.tag===4){if(n.child!==null){o=n.stateNode.containerInfo,s=!0,n.child.return=n,n=n.child;continue}}else if(zS(t,n),n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return,n.tag===4&&(r=!1)}n.sibling.return=n.return,n=n.sibling}}function ob(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do(r.tag&3)===3&&(t=r.destroy,r.destroy=void 0,t!==void 0&&t()),r=r.next;while(r!==n)}return;case 1:return;case 5:if(n=e.stateNode,n!=null){r=e.memoizedProps;var o=t!==null?t.memoizedProps:r;t=e.type;var s=e.updateQueue;if(e.updateQueue=null,s!==null){for(n[nm]=r,t==="input"&&r.type==="radio"&&r.name!=null&&JP(n,r),Xv(t,o),e=Xv(t,r),o=0;o<s.length;o+=2){var i=s[o],a=s[o+1];i==="style"?tO(n,a):i==="dangerouslySetInnerHTML"?QP(n,a):i==="children"?Pd(n,a):yx(n,i,a,e)}switch(t){case"input":Uv(n,r);break;case"textarea":YP(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,s=r.value,s!=null?Ll(n,!!r.multiple,s,!1):t!==!!r.multiple&&(r.defaultValue!=null?Ll(n,!!r.multiple,r.defaultValue,!0):Ll(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(e.stateNode===null)throw Error(U(162));e.stateNode.nodeValue=e.memoizedProps;return;case 3:n=e.stateNode,n.hydrate&&(n.hydrate=!1,dO(n.containerInfo));return;case 12:return;case 13:e.memoizedState!==null&&(ek=Zt(),BS(e.child,!0)),US(e);return;case 19:US(e);return;case 17:return;case 23:case 24:BS(e,e.memoizedState!==null);return}throw Error(U(163))}function US(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new hB),e.forEach(function(r){var o=CB.bind(null,t,r);n.has(r)||(n.add(r),r.then(o,o))})}}function yB(t,e){return t!==null&&(t=t.memoizedState,t===null||t.dehydrated!==null)?(e=e.memoizedState,e!==null&&e.dehydrated===null):!1}var bB=Math.ceil,mm=Ka.ReactCurrentDispatcher,Xx=Ka.ReactCurrentOwner,de=0,cn=null,bt=null,Yt=0,Sa=0,x0=Ni(0),Rt=0,Xg=null,Fc=0,Hf=0,Bc=0,Qx=0,k0=null,ek=0,_0=1/0;function zc(){_0=Zt()+500}var X=null,gm=!1,$0=null,lo=null,mi=!1,ad=null,Bu=90,E0=[],S0=[],Xo=null,ld=0,C0=null,Nh=-1,zo=0,Ph=0,cd=null,Oh=!1;function Fn(){return de&48?Zt():Nh!==-1?Nh:Nh=Zt()}function ei(t){if(t=t.mode,!(t&2))return 1;if(!(t&4))return ic()===99?1:2;if(zo===0&&(zo=Fc),sB.transition!==0){Ph!==0&&(Ph=k0!==null?k0.pendingLanes:0),t=zo;var e=4186112&~Ph;return e&=-e,e===0&&(t=4186112&~t,e=t&-t,e===0&&(e=8192)),e}return t=ic(),de&4&&t===98?t=Qh(12,zo):(t=lF(t),t=Qh(t,zo)),t}function ti(t,e,n){if(50<ld)throw ld=0,C0=null,Error(U(185));if(t=Qg(t,e),t===null)return null;Ug(t,e,n),t===cn&&(Bc|=e,Rt===4&&Wl(t,Yt));var r=ic();e===1?de&8&&!(de&48)?T0(t):(pr(t,n),de===0&&(zc(),So())):(!(de&4)||r!==98&&r!==99||(Xo===null?Xo=new Set([t]):Xo.add(t)),pr(t,n)),k0=t}function Qg(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}function pr(t,e){for(var n=t.callbackNode,r=t.suspendedLanes,o=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-pi(i),l=1<<a,c=s[a];if(c===-1){if(!(l&r)||l&o){c=e,ml(l);var u=Ge;s[a]=10<=u?c+250:6<=u?c+5e3:-1}}else c<=e&&(t.expiredLanes|=l);i&=~l}if(r=Md(t,t===cn?Yt:0),e=Ge,r===0)n!==null&&(n!==Qy&&c0(n),t.callbackNode=null,t.callbackPriority=0);else{if(n!==null){if(t.callbackPriority===e)return;n!==Qy&&c0(n)}e===15?(n=T0.bind(null,t),Fo===null?(Fo=[n],Ah=Bx(Jg,BO)):Fo.push(n),n=Qy):e===14?n=Fd(99,T0.bind(null,t)):(n=cF(e),n=Fd(n,cI.bind(null,t))),t.callbackPriority=e,t.callbackNode=n}}function cI(t){if(Nh=-1,Ph=zo=0,de&48)throw Error(U(327));var e=t.callbackNode;if(Pi()&&t.callbackNode!==e)return null;var n=Md(t,t===cn?Yt:0);if(n===0)return null;var r=n,o=de;de|=16;var s=pI();(cn!==t||Yt!==r)&&(zc(),Vl(t,r));do try{xB();break}catch(a){fI(t,a)}while(1);if(zx(),mm.current=s,de=o,bt!==null?r=0:(cn=null,Yt=0,r=Rt),Fc&Bc)Vl(t,0);else if(r!==0){if(r===2&&(de|=64,t.hydrate&&(t.hydrate=!1,jx(t.containerInfo)),n=bO(t),n!==0&&(r=zu(t,n))),r===1)throw e=Xg,Vl(t,0),Wl(t,n),pr(t,Zt()),e;switch(t.finishedWork=t.current.alternate,t.finishedLanes=n,r){case 0:case 1:throw Error(U(345));case 2:Wi(t);break;case 3:if(Wl(t,n),(n&62914560)===n&&(r=ek+500-Zt(),10<r)){if(Md(t,0)!==0)break;if(o=t.suspendedLanes,(o&n)!==n){Fn(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=fS(Wi.bind(null,t),r);break}Wi(t);break;case 4:if(Wl(t,n),(n&4186112)===n)break;for(r=t.eventTimes,o=-1;0<n;){var i=31-pi(n);s=1<<i,i=r[i],i>o&&(o=i),n&=~s}if(n=o,n=Zt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*bB(n/1960))-n,10<n){t.timeoutHandle=fS(Wi.bind(null,t),n);break}Wi(t);break;case 5:Wi(t);break;default:throw Error(U(329))}}return pr(t,Zt()),t.callbackNode===e?cI.bind(null,t):null}function Wl(t,e){for(e&=~Qx,e&=~Bc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-pi(e),r=1<<n;t[n]=-1,e&=~r}}function T0(t){if(de&48)throw Error(U(327));if(Pi(),t===cn&&t.expiredLanes&Yt){var e=Yt,n=zu(t,e);Fc&Bc&&(e=Md(t,e),n=zu(t,e))}else e=Md(t,0),n=zu(t,e);if(t.tag!==0&&n===2&&(de|=64,t.hydrate&&(t.hydrate=!1,jx(t.containerInfo)),e=bO(t),e!==0&&(n=zu(t,e))),n===1)throw n=Xg,Vl(t,0),Wl(t,e),pr(t,Zt()),n;return t.finishedWork=t.current.alternate,t.finishedLanes=e,Wi(t),pr(t,Zt()),null}function vB(){if(Xo!==null){var t=Xo;Xo=null,t.forEach(function(e){e.expiredLanes|=24&e.pendingLanes,pr(e,Zt())})}So()}function uI(t,e){var n=de;de|=1;try{return t(e)}finally{de=n,de===0&&(zc(),So())}}function dI(t,e){var n=de;de&=-2,de|=8;try{return t(e)}finally{de=n,de===0&&(zc(),So())}}function Vp(t,e){ut(x0,Sa),Sa|=e,Fc|=e}function tk(){Sa=x0.current,Qe(x0)}function Vl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,QF(n)),bt!==null)for(n=bt.return;n!==null;){var r=n;switch(r.tag){case 1:r=r.type.childContextTypes,r!=null&&rm();break;case 3:ac(),Qe(En),Qe(Xt),Ux();break;case 5:Vx(r);break;case 4:ac();break;case 13:Qe(lt);break;case 19:Qe(lt);break;case 10:qx(r);break;case 23:case 24:tk()}n=n.return}cn=t,bt=gi(t.current,null),Yt=Sa=Fc=e,Rt=0,Xg=null,Qx=Bc=Hf=0}function fI(t,e){do{var n=bt;try{if(zx(),sd.current=hm,um){for(var r=ht.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}um=!1}if(Wd=0,It=Ht=ht=null,id=!1,Xx.current=null,n===null||n.return===null){Rt=1,Xg=e,bt=null;break}e:{var s=t,i=n.return,a=n,l=e;if(e=Yt,a.flags|=2048,a.firstEffect=a.lastEffect=null,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l;if(!(a.mode&2)){var u=a.alternate;u?(a.updateQueue=u.updateQueue,a.memoizedState=u.memoizedState,a.lanes=u.lanes):(a.updateQueue=null,a.memoizedState=null)}var d=(lt.current&1)!==0,f=i;do{var p;if(p=f.tag===13){var h=f.memoizedState;if(h!==null)p=h.dehydrated!==null;else{var y=f.memoizedProps;p=y.fallback===void 0?!1:y.unstable_avoidThisFallback!==!0?!0:!d}}if(p){var g=f.updateQueue;if(g===null){var b=new Set;b.add(c),f.updateQueue=b}else g.add(c);if(!(f.mode&2)){if(f.flags|=64,a.flags|=16384,a.flags&=-2981,a.tag===1)if(a.alternate===null)a.tag=17;else{var w=Xs(-1,1);w.tag=2,Qs(a,w)}a.lanes|=1;break e}l=void 0,a=e;var x=s.pingCache;if(x===null?(x=s.pingCache=new pB,l=new Set,x.set(c,l)):(l=x.get(c),l===void 0&&(l=new Set,x.set(c,l))),!l.has(a)){l.add(a);var k=SB.bind(null,s,c,a);c.then(k,k)}f.flags|=4096,f.lanes=e;break e}f=f.return}while(f!==null);l=Error((Dl(a.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}Rt!==5&&(Rt=2),l=Yx(l,a),f=i;do{switch(f.tag){case 3:s=l,f.flags|=4096,e&=-e,f.lanes|=e;var S=iI(f,s,e);vS(f,S);break e;case 1:s=l;var _=f.type,C=f.stateNode;if(!(f.flags&64)&&(typeof _.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(lo===null||!lo.has(C)))){f.flags|=4096,e&=-e,f.lanes|=e;var $=aI(f,s,e);vS(f,$);break e}}f=f.return}while(f!==null)}mI(n)}catch(T){e=T,bt===n&&n!==null&&(bt=n=n.return);continue}break}while(1)}function pI(){var t=mm.current;return mm.current=hm,t===null?hm:t}function zu(t,e){var n=de;de|=16;var r=pI();cn===t&&Yt===e||Vl(t,e);do try{wB();break}catch(o){fI(t,o)}while(1);if(zx(),de=n,mm.current=r,bt!==null)throw Error(U(261));return cn=null,Yt=0,Rt}function wB(){for(;bt!==null;)hI(bt)}function xB(){for(;bt!==null&&!nB();)hI(bt)}function hI(t){var e=yI(t.alternate,t,Sa);t.memoizedProps=t.pendingProps,e===null?mI(t):bt=e,Xx.current=null}function mI(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&2048){if(n=fB(e),n!==null){n.flags&=2047,bt=n;return}t!==null&&(t.firstEffect=t.lastEffect=null,t.flags|=2048)}else{if(n=dB(n,e,Sa),n!==null){bt=n;return}if(n=e,n.tag!==24&&n.tag!==23||n.memoizedState===null||Sa&1073741824||!(n.mode&4)){for(var r=0,o=n.child;o!==null;)r|=o.lanes|o.childLanes,o=o.sibling;n.childLanes=r}t!==null&&!(t.flags&2048)&&(t.firstEffect===null&&(t.firstEffect=e.firstEffect),e.lastEffect!==null&&(t.lastEffect!==null&&(t.lastEffect.nextEffect=e.firstEffect),t.lastEffect=e.lastEffect),1<e.flags&&(t.lastEffect!==null?t.lastEffect.nextEffect=e:t.firstEffect=e,t.lastEffect=e))}if(e=e.sibling,e!==null){bt=e;return}bt=e=t}while(e!==null);Rt===0&&(Rt=5)}function Wi(t){var e=ic();return Ea(99,kB.bind(null,t,e)),null}function kB(t,e){do Pi();while(ad!==null);if(de&48)throw Error(U(327));var n=t.finishedWork;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null;var r=n.lanes|n.childLanes,o=r,s=t.pendingLanes&~o;t.pendingLanes=o,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=o,t.mutableReadLanes&=o,t.entangledLanes&=o,o=t.entanglements;for(var i=t.eventTimes,a=t.expirationTimes;0<s;){var l=31-pi(s),c=1<<l;o[l]=0,i[l]=-1,a[l]=-1,s&=~c}if(Xo!==null&&!(r&24)&&Xo.has(t)&&Xo.delete(t),t===cn&&(bt=cn=null,Yt=0),1<n.flags?n.lastEffect!==null?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,r!==null){if(o=de,de|=32,Xx.current=null,Jy=Eh,i=sS(),o0(i)){if("selectionStart"in i)a={start:i.selectionStart,end:i.selectionEnd};else e:if(a=(a=i.ownerDocument)&&a.defaultView||window,(c=a.getSelection&&a.getSelection())&&c.rangeCount!==0){a=c.anchorNode,s=c.anchorOffset,l=c.focusNode,c=c.focusOffset;try{a.nodeType,l.nodeType}catch(T){a=null;break e}var u=0,d=-1,f=-1,p=0,h=0,y=i,g=null;t:for(;;){for(var b;y!==a||s!==0&&y.nodeType!==3||(d=u+s),y!==l||c!==0&&y.nodeType!==3||(f=u+c),y.nodeType===3&&(u+=y.nodeValue.length),(b=y.firstChild)!==null;)g=y,y=b;for(;;){if(y===i)break t;if(g===a&&++p===s&&(d=u),g===l&&++h===c&&(f=u),(b=y.nextSibling)!==null)break;y=g,g=y.parentNode}y=b}a=d===-1||f===-1?null:{start:d,end:f}}else a=null;a=a||{start:0,end:0}}else a=null;Yy={focusedElem:i,selectionRange:a},Eh=!1,cd=null,Oh=!1,X=r;do try{_B()}catch(T){if(X===null)throw Error(U(330));ni(X,T),X=X.nextEffect}while(X!==null);cd=null,X=r;do try{for(i=t;X!==null;){var w=X.flags;if(w&16&&Pd(X.stateNode,""),w&128){var x=X.alternate;if(x!==null){var k=x.ref;k!==null&&(typeof k=="function"?k(null):k.current=null)}}switch(w&1038){case 2:VS(X),X.flags&=-3;break;case 6:VS(X),X.flags&=-3,ob(X.alternate,X);break;case 1024:X.flags&=-1025;break;case 1028:X.flags&=-1025,ob(X.alternate,X);break;case 4:ob(X.alternate,X);break;case 8:a=X,lI(i,a);var S=a.alternate;qS(a),S!==null&&qS(S)}X=X.nextEffect}}catch(T){if(X===null)throw Error(U(330));ni(X,T),X=X.nextEffect}while(X!==null);if(k=Yy,x=sS(),w=k.focusedElem,i=k.selectionRange,x!==w&&w&&w.ownerDocument&&SO(w.ownerDocument.documentElement,w)){for(i!==null&&o0(w)&&(x=i.start,k=i.end,k===void 0&&(k=x),"selectionStart"in w?(w.selectionStart=x,w.selectionEnd=Math.min(k,w.value.length)):(k=(x=w.ownerDocument||document)&&x.defaultView||window,k.getSelection&&(k=k.getSelection(),a=w.textContent.length,S=Math.min(i.start,a),i=i.end===void 0?S:Math.min(i.end,a),!k.extend&&S>i&&(a=i,i=S,S=a),a=oS(w,S),s=oS(w,i),a&&s&&(k.rangeCount!==1||k.anchorNode!==a.node||k.anchorOffset!==a.offset||k.focusNode!==s.node||k.focusOffset!==s.offset)&&(x=x.createRange(),x.setStart(a.node,a.offset),k.removeAllRanges(),S>i?(k.addRange(x),k.extend(s.node,s.offset)):(x.setEnd(s.node,s.offset),k.addRange(x)))))),x=[],k=w;k=k.parentNode;)k.nodeType===1&&x.push({element:k,left:k.scrollLeft,top:k.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<x.length;w++)k=x[w],k.element.scrollLeft=k.left,k.element.scrollTop=k.top}Eh=!!Jy,Yy=Jy=null,t.current=n,X=r;do try{for(w=t;X!==null;){var _=X.flags;if(_&36&&gB(w,X.alternate,X),_&128){x=void 0;var C=X.ref;if(C!==null){var $=X.stateNode;switch(X.tag){case 5:x=$;break;default:x=$}typeof C=="function"?C(x):C.current=x}}X=X.nextEffect}}catch(T){if(X===null)throw Error(U(330));ni(X,T),X=X.nextEffect}while(X!==null);X=null,oB(),de=o}else t.current=n;if(mi)mi=!1,ad=t,Bu=e;else for(X=r;X!==null;)e=X.nextEffect,X.nextEffect=null,X.flags&8&&(_=X,_.sibling=null,_.stateNode=null),X=e;if(r=t.pendingLanes,r===0&&(lo=null),r===1?t===C0?ld++:(ld=0,C0=t):ld=0,n=n.stateNode,fa&&typeof fa.onCommitFiberRoot=="function")try{fa.onCommitFiberRoot(Fx,n,void 0,(n.current.flags&64)===64)}catch(T){}if(pr(t,Zt()),gm)throw gm=!1,t=$0,$0=null,t;return de&8||So(),null}function _B(){for(;X!==null;){var t=X.alternate;Oh||cd===null||(X.flags&8?VE(X,cd)&&(Oh=!0):X.tag===13&&yB(t,X)&&VE(X,cd)&&(Oh=!0));var e=X.flags;e&256&&mB(t,X),!(e&512)||mi||(mi=!0,Fd(97,function(){return Pi(),null})),X=X.nextEffect}}function Pi(){if(Bu!==90){var t=97<Bu?97:Bu;return Bu=90,Ea(t,EB)}return!1}function $B(t,e){E0.push(e,t),mi||(mi=!0,Fd(97,function(){return Pi(),null}))}function gI(t,e){S0.push(e,t),mi||(mi=!0,Fd(97,function(){return Pi(),null}))}function EB(){if(ad===null)return!1;var t=ad;if(ad=null,de&48)throw Error(U(331));var e=de;de|=32;var n=S0;S0=[];for(var r=0;r<n.length;r+=2){var o=n[r],s=n[r+1],i=o.destroy;if(o.destroy=void 0,typeof i=="function")try{i()}catch(l){if(s===null)throw Error(U(330));ni(s,l)}}for(n=E0,E0=[],r=0;r<n.length;r+=2){o=n[r],s=n[r+1];try{var a=o.create;o.destroy=a()}catch(l){if(s===null)throw Error(U(330));ni(s,l)}}for(a=t.current.firstEffect;a!==null;)t=a.nextEffect,a.nextEffect=null,a.flags&8&&(a.sibling=null,a.stateNode=null),a=t;return de=e,So(),!0}function HS(t,e,n){e=Yx(n,e),e=iI(t,e,1),Qs(t,e),e=Fn(),t=Qg(t,1),t!==null&&(Ug(t,1,e),pr(t,e))}function ni(t,e){if(t.tag===3)HS(t,t,e);else for(var n=t.return;n!==null;){if(n.tag===3){HS(n,t,e);break}else if(n.tag===1){var r=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(lo===null||!lo.has(r))){t=Yx(e,t);var o=aI(n,t,1);if(Qs(n,o),o=Fn(),n=Qg(n,1),n!==null)Ug(n,1,o),pr(n,o);else if(typeof r.componentDidCatch=="function"&&(lo===null||!lo.has(r)))try{r.componentDidCatch(e,t)}catch(s){}break}}n=n.return}}function SB(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Fn(),t.pingedLanes|=t.suspendedLanes&n,cn===t&&(Yt&n)===n&&(Rt===4||Rt===3&&(Yt&62914560)===Yt&&500>Zt()-ek?Vl(t,0):Qx|=n),pr(t,e)}function CB(t,e){var n=t.stateNode;n!==null&&n.delete(e),e=0,e===0&&(e=t.mode,e&2?e&4?(zo===0&&(zo=Fc),e=gl(62914560&~zo),e===0&&(e=4194304)):e=ic()===99?1:2:e=1),n=Fn(),t=Qg(t,e),t!==null&&(Ug(t,e,n),pr(t,n))}var yI;yI=function(t,e,n){var r=e.lanes;if(t!==null)if(t.memoizedProps!==e.pendingProps||En.current)Or=!0;else if(n&r)Or=!!(t.flags&16384);else{switch(Or=!1,e.tag){case 3:OS(e),tb();break;case 5:_S(e);break;case 1:Sn(e.type)&&Th(e);break;case 4:f0(e,e.stateNode.containerInfo);break;case 10:r=e.memoizedProps.value;var o=e.type._context;ut(om,o._currentValue),o._currentValue=r;break;case 13:if(e.memoizedState!==null)return n&e.child.childLanes?IS(t,e,n):(ut(lt,lt.current&1),e=Ho(t,e,n),e!==null?e.sibling:null);ut(lt,lt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&64){if(r)return jS(t,e,n);e.flags|=64}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),ut(lt,lt.current),r)break;return null;case 23:case 24:return e.lanes=0,nb(t,e,n)}return Ho(t,e,n)}else Or=!1;switch(e.lanes=0,e.tag){case 2:if(r=e.type,t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,o=sc(e,Xt.current),zl(e,n),o=Kx(null,e,r,t,o,n),e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,Sn(r)){var s=!0;Th(e)}else s=!1;e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Wx(e);var i=r.getDerivedStateFromProps;typeof i=="function"&&am(e,r,i,t),o.updater=Yg,e.stateNode=o,o._reactInternals=e,d0(e,r,t,n),e=g0(null,e,r,!0,s,n)}else e.tag=0,xn(null,e,o,n),e=e.child;return e;case 16:o=e.elementType;e:{switch(t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,s=o._init,o=s(o._payload),e.type=o,s=e.tag=AB(o),t=Sr(o,t),s){case 0:e=m0(null,e,o,t,n);break e;case 1:e=PS(null,e,o,t,n);break e;case 11:e=AS(null,e,o,t,n);break e;case 14:e=NS(null,e,o,Sr(o.type,t),r,n);break e}throw Error(U(306,o,""))}return e;case 0:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Sr(r,o),m0(t,e,r,o,n);case 1:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Sr(r,o),PS(t,e,r,o,n);case 3:if(OS(e),r=e.updateQueue,t===null||r===null)throw Error(U(282));if(r=e.pendingProps,o=e.memoizedState,o=o!==null?o.element:null,qO(t,e),Bd(e,r,null,n),r=e.memoizedState.element,r===o)tb(),e=Ho(t,e,n);else{if(o=e.stateNode,(s=o.hydrate)&&(Bs=Bl(e.stateNode.containerInfo.firstChild),Uo=e,s=mo=!0),s){if(t=o.mutableSourceEagerHydrationData,t!=null)for(o=0;o<t.length;o+=2)s=t[o],s._workInProgressVersionPrimary=t[o+1],ql.push(s);for(n=HO(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|1024,n=n.sibling}else xn(t,e,r,n),tb();e=e.child}return e;case 5:return _S(e),t===null&&p0(e),r=e.type,o=e.pendingProps,s=t!==null?t.memoizedProps:null,i=o.children,a0(r,o)?i=null:s!==null&&a0(r,s)&&(e.flags|=16),nI(t,e),xn(t,e,i,n),e.child;case 6:return t===null&&p0(e),null;case 13:return IS(t,e,n);case 4:return f0(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=lm(e,null,r,n):xn(t,e,r,n),e.child;case 11:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Sr(r,o),AS(t,e,r,o,n);case 7:return xn(t,e,e.pendingProps,n),e.child;case 8:return xn(t,e,e.pendingProps.children,n),e.child;case 12:return xn(t,e,e.pendingProps.children,n),e.child;case 10:e:{r=e.type._context,o=e.pendingProps,i=e.memoizedProps,s=o.value;var a=e.type._context;if(ut(om,a._currentValue),a._currentValue=s,i!==null)if(a=i.value,s=Qn(a,s)?0:(typeof r._calculateChangedBits=="function"?r._calculateChangedBits(a,s):1073741823)|0,s===0){if(i.children===o.children&&!En.current){e=Ho(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){i=a.child;for(var c=l.firstContext;c!==null;){if(c.context===r&&c.observedBits&s){a.tag===1&&(c=Xs(-1,n&-n),c.tag=2,Qs(a,c)),a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),zO(a.return,n),l.lanes|=n;break}c=c.next}}else i=a.tag===10&&a.type===e.type?null:a.child;if(i!==null)i.return=a;else for(i=a;i!==null;){if(i===e){i=null;break}if(a=i.sibling,a!==null){a.return=i.return,i=a;break}i=i.return}a=i}xn(t,e,o.children,n),e=e.child}return e;case 9:return o=e.type,s=e.pendingProps,r=s.children,zl(e,n),o=fr(o,s.unstable_observedBits),r=r(o),e.flags|=1,xn(t,e,r,n),e.child;case 14:return o=e.type,s=Sr(o,e.pendingProps),s=Sr(o.type,s),NS(t,e,o,s,r,n);case 15:return tI(t,e,e.type,e.pendingProps,r,n);case 17:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Sr(r,o),t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,Sn(r)?(t=!0,Th(e)):t=!1,zl(e,n),VO(e,r,o),d0(e,r,o,n),g0(null,e,r,!0,t,n);case 19:return jS(t,e,n);case 23:return nb(t,e,n);case 24:return nb(t,e,n)}throw Error(U(156,e.tag))};function TB(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function er(t,e,n,r){return new TB(t,e,n,r)}function nk(t){return t=t.prototype,!(!t||!t.isReactComponent)}function AB(t){if(typeof t=="function")return nk(t)?1:0;if(t!=null){if(t=t.$$typeof,t===qg)return 11;if(t===Wg)return 14}return 2}function gi(t,e){var n=t.alternate;return n===null?(n=er(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ih(t,e,n,r,o,s){var i=2;if(r=t,typeof t=="function")nk(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case Rs:return Ul(n.children,o,s,e);case KP:i=8,o|=16;break;case bx:i=8,o|=1;break;case Xu:return t=er(12,n,e,o|8),t.elementType=Xu,t.type=Xu,t.lanes=s,t;case Qu:return t=er(13,n,e,o),t.type=Qu,t.elementType=Qu,t.lanes=s,t;case Zh:return t=er(19,n,e,o),t.elementType=Zh,t.lanes=s,t;case $x:return rk(n,o,s,e);case Wv:return t=er(24,n,e,o),t.elementType=Wv,t.lanes=s,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case vx:i=10;break e;case wx:i=9;break e;case qg:i=11;break e;case Wg:i=14;break e;case xx:i=16,r=null;break e;case kx:i=22;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=er(i,n,e,o),e.elementType=t,e.type=r,e.lanes=s,e}function Ul(t,e,n,r){return t=er(7,t,r,e),t.lanes=n,t}function rk(t,e,n,r){return t=er(23,t,r,e),t.elementType=$x,t.lanes=n,t}function sb(t,e,n){return t=er(6,t,null,e),t.lanes=n,t}function ib(t,e,n){return e=er(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function NB(t,e,n){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Wy(0),this.expirationTimes=Wy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wy(0),this.mutableSourceEagerHydrationData=null}function PB(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function ym(t,e,n,r){var o=e.current,s=Fn(),i=ei(o);e:if(n){n=n._reactInternals;t:{if(Ga(n)!==n||n.tag!==1)throw Error(U(170));var a=n;do{switch(a.tag){case 3:a=a.stateNode.context;break t;case 1:if(Sn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break t}}a=a.return}while(a!==null);throw Error(U(171))}if(n.tag===1){var l=n.type;if(Sn(l)){n=RO(n,l,a);break e}}n=a}else n=hi;return e.context===null?e.context=n:e.pendingContext=n,e=Xs(s,i),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),Qs(o,e),ti(o,i,s),i}function ab(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function KS(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ok(t,e){KS(t,e),(t=t.alternate)&&KS(t,e)}function OB(){return null}function sk(t,e,n){var r=n!=null&&n.hydrationOptions!=null&&n.hydrationOptions.mutableSources||null;if(n=new NB(t,e,n!=null&&n.hydrate===!0),e=er(3,null,null,e===2?7:e===1?3:0),n.current=e,e.stateNode=n,Wx(e),t[jc]=n.current,AO(t.nodeType===8?t.parentNode:t),r)for(t=0;t<r.length;t++){e=r[t];var o=e._getVersion;o=o(e._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[e,o]:n.mutableSourceEagerHydrationData.push(e,o)}this._internalRoot=n}sk.prototype.render=function(t){ym(t,this._internalRoot,null,null)};sk.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;ym(null,t,null,function(){e[jc]=null})};function Kf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function IB(t,e){if(e||(e=t?t.nodeType===9?t.documentElement:t.firstChild:null,e=!(!e||e.nodeType!==1||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new sk(t,0,e?{hydrate:!0}:void 0)}function e1(t,e,n,r,o){var s=n._reactRootContainer;if(s){var i=s._internalRoot;if(typeof o=="function"){var a=o;o=function(){var c=ab(i);a.call(c)}}ym(e,i,t,o)}else{if(s=n._reactRootContainer=IB(n,r),i=s._internalRoot,typeof o=="function"){var l=o;o=function(){var c=ab(i);l.call(c)}}dI(function(){ym(e,i,t,o)})}return ab(i)}lO=function(t){if(t.tag===13){var e=Fn();ti(t,4,e),ok(t,4)}};Ax=function(t){if(t.tag===13){var e=Fn();ti(t,67108864,e),ok(t,67108864)}};cO=function(t){if(t.tag===13){var e=Fn(),n=ei(t);ti(t,n,e),ok(t,n)}};uO=function(t,e){return e()};Qv=function(t,e,n){switch(e){case"input":if(Uv(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var o=Zg(r);if(!o)throw Error(U(90));ZP(r),Uv(r,o)}}}break;case"textarea":YP(t,n);break;case"select":e=n.value,e!=null&&Ll(t,!!n.multiple,e,!1)}};Sx=uI;oO=function(t,e,n,r,o){var s=de;de|=4;try{return Ea(98,t.bind(null,e,n,r,o))}finally{de=s,de===0&&(zc(),So())}};Cx=function(){!(de&49)&&(vB(),Pi())};sO=function(t,e){var n=de;de|=2;try{return t(e)}finally{de=n,de===0&&(zc(),So())}};function bI(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Kf(e))throw Error(U(200));return PB(t,e,null,n)}var RB={Events:[Vf,Al,Zg,nO,rO,Pi,{current:!1}]},_u={findFiberByHostInstance:Qi,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},MB={bundleType:_u.bundleType,version:_u.version,rendererPackageName:_u.rendererPackageName,rendererConfig:_u.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ka.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=aO(t),t===null?null:t.stateNode},findFiberByHostInstance:_u.findFiberByHostInstance||OB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var Up=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Up.isDisabled&&Up.supportsFiber)try{Fx=Up.inject(MB),fa=Up}catch(t){}}$r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RB;$r.createPortal=bI;$r.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):Error(U(268,Object.keys(t)));return t=aO(e),t=t===null?null:t.stateNode,t};$r.flushSync=function(t,e){var n=de;if(n&48)return t(e);de|=1;try{if(t)return Ea(99,t.bind(null,e))}finally{de=n,So()}};$r.hydrate=function(t,e,n){if(!Kf(e))throw Error(U(200));return e1(null,t,e,!0,n)};$r.render=function(t,e,n){if(!Kf(e))throw Error(U(200));return e1(null,t,e,!1,n)};$r.unmountComponentAtNode=function(t){if(!Kf(t))throw Error(U(40));return t._reactRootContainer?(dI(function(){e1(null,null,t,!1,function(){t._reactRootContainer=null,t[jc]=null})}),!0):!1};$r.unstable_batchedUpdates=uI;$r.unstable_createPortal=function(t,e){return bI(t,e,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};$r.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Kf(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return e1(t,e,n,!1,r)};$r.version="17.0.2";function vI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vI)}catch(t){console.error(t)}}vI(),WP.exports=$r;var ik=WP.exports;const Co=fs(ik);let A0;function DB(){if(!A0)throw new Error("InternalAPI: Eternal vars not set");return A0}function LB(t){A0=t}var jB=function(){function t(){this.keyToValue=new Map,this.valueToKey=new Map}return t.prototype.set=function(e,n){this.keyToValue.set(e,n),this.valueToKey.set(n,e)},t.prototype.getByKey=function(e){return this.keyToValue.get(e)},t.prototype.getByValue=function(e){return this.valueToKey.get(e)},t.prototype.clear=function(){this.keyToValue.clear(),this.valueToKey.clear()},t}(),wI=function(){function t(e){this.generateIdentifier=e,this.kv=new jB}return t.prototype.register=function(e,n){this.kv.getByValue(e)||(n||(n=this.generateIdentifier(e)),this.kv.set(n,e))},t.prototype.clear=function(){this.kv.clear()},t.prototype.getIdentifier=function(e){return this.kv.getByValue(e)},t.prototype.getValue=function(e){return this.kv.getByKey(e)},t}(),FB=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),BB=function(t){FB(e,t);function e(){var n=t.call(this,function(r){return r.name})||this;return n.classToAllowedProps=new Map,n}return e.prototype.register=function(n,r){typeof r=="object"?(r.allowProps&&this.classToAllowedProps.set(n,r.allowProps),t.prototype.register.call(this,n,r.identifier)):t.prototype.register.call(this,n,r)},e.prototype.getAllowedProps=function(n){return this.classToAllowedProps.get(n)},e}(wI),zB=globalThis&&globalThis.__read||function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),o,s=[],i;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){i={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return s};function qB(t){if("values"in Object)return Object.values(t);var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(t[n]);return e}function WB(t,e){var n=qB(t);if("find"in n)return n.find(e);for(var r=n,o=0;o<r.length;o++){var s=r[o];if(e(s))return s}}function lc(t,e){Object.entries(t).forEach(function(n){var r=zB(n,2),o=r[0],s=r[1];return e(s,o)})}function Rh(t,e){return t.indexOf(e)!==-1}function GS(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(e(r))return r}}var VB=function(){function t(){this.transfomers={}}return t.prototype.register=function(e){this.transfomers[e.name]=e},t.prototype.findApplicable=function(e){return WB(this.transfomers,function(n){return n.isApplicable(e)})},t.prototype.findByName=function(e){return this.transfomers[e]},t}(),UB=function(t){return Object.prototype.toString.call(t).slice(8,-1)},xI=function(t){return typeof t=="undefined"},HB=function(t){return t===null},Vd=function(t){return typeof t!="object"||t===null||t===Object.prototype?!1:Object.getPrototypeOf(t)===null?!0:Object.getPrototypeOf(t)===Object.prototype},N0=function(t){return Vd(t)&&Object.keys(t).length===0},yi=function(t){return Array.isArray(t)},KB=function(t){return typeof t=="string"},GB=function(t){return typeof t=="number"&&!isNaN(t)},ZB=function(t){return typeof t=="boolean"},JB=function(t){return t instanceof RegExp},Ud=function(t){return t instanceof Map},Hd=function(t){return t instanceof Set},kI=function(t){return UB(t)==="Symbol"},YB=function(t){return t instanceof Date&&!isNaN(t.valueOf())},XB=function(t){return t instanceof Error},ZS=function(t){return typeof t=="number"&&isNaN(t)},QB=function(t){return ZB(t)||HB(t)||xI(t)||GB(t)||KB(t)||kI(t)},ez=function(t){return typeof t=="bigint"},tz=function(t){return t===1/0||t===-1/0},nz=function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},rz=function(t){return t instanceof URL},_I=function(t){return t.replace(/\./g,"\\.")},lb=function(t){return t.map(String).map(_I).join(".")},ud=function(t){for(var e=[],n="",r=0;r<t.length;r++){var o=t.charAt(r),s=o==="\\"&&t.charAt(r+1)===".";if(s){n+=".",r++;continue}var i=o===".";if(i){e.push(n),n="";continue}n+=o}var a=n;return e.push(a),e},P0=globalThis&&globalThis.__assign||function(){return P0=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},P0.apply(this,arguments)},O0=globalThis&&globalThis.__read||function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),o,s=[],i;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){i={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return s},I0=globalThis&&globalThis.__spreadArray||function(t,e){for(var n=0,r=e.length,o=t.length;n<r;n++,o++)t[o]=e[n];return t};function Yr(t,e,n,r){return{isApplicable:t,annotation:e,transform:n,untransform:r}}var $I=[Yr(xI,"undefined",function(){return null},function(){}),Yr(ez,"bigint",function(t){return t.toString()},function(t){return typeof BigInt!="undefined"?BigInt(t):(console.error("Please add a BigInt polyfill."),t)}),Yr(YB,"Date",function(t){return t.toISOString()},function(t){return new Date(t)}),Yr(XB,"Error",function(t,e){var n={name:t.name,message:t.message};return e.allowedErrorProps.forEach(function(r){n[r]=t[r]}),n},function(t,e){var n=new Error(t.message);return n.name=t.name,n.stack=t.stack,e.allowedErrorProps.forEach(function(r){n[r]=t[r]}),n}),Yr(JB,"regexp",function(t){return""+t},function(t){var e=t.slice(1,t.lastIndexOf("/")),n=t.slice(t.lastIndexOf("/")+1);return new RegExp(e,n)}),Yr(Hd,"set",function(t){return I0([],O0(t.values()))},function(t){return new Set(t)}),Yr(Ud,"map",function(t){return I0([],O0(t.entries()))},function(t){return new Map(t)}),Yr(function(t){return ZS(t)||tz(t)},"number",function(t){return ZS(t)?"NaN":t>0?"Infinity":"-Infinity"},Number),Yr(function(t){return t===0&&1/t===-1/0},"number",function(){return"-0"},Number),Yr(rz,"URL",function(t){return t.toString()},function(t){return new URL(t)})];function t1(t,e,n,r){return{isApplicable:t,annotation:e,transform:n,untransform:r}}var EI=t1(function(t,e){if(kI(t)){var n=!!e.symbolRegistry.getIdentifier(t);return n}return!1},function(t,e){var n=e.symbolRegistry.getIdentifier(t);return["symbol",n]},function(t){return t.description},function(t,e,n){var r=n.symbolRegistry.getValue(e[1]);if(!r)throw new Error("Trying to deserialize unknown symbol");return r}),oz=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,Uint8ClampedArray].reduce(function(t,e){return t[e.name]=e,t},{}),SI=t1(nz,function(t){return["typed-array",t.constructor.name]},function(t){return I0([],O0(t))},function(t,e){var n=oz[e[1]];if(!n)throw new Error("Trying to deserialize unknown typed array");return new n(t)});function CI(t,e){if(t!=null&&t.constructor){var n=!!e.classRegistry.getIdentifier(t.constructor);return n}return!1}var TI=t1(CI,function(t,e){var n=e.classRegistry.getIdentifier(t.constructor);return["class",n]},function(t,e){var n=e.classRegistry.getAllowedProps(t.constructor);if(!n)return P0({},t);var r={};return n.forEach(function(o){r[o]=t[o]}),r},function(t,e,n){var r=n.classRegistry.getValue(e[1]);if(!r)throw new Error("Trying to deserialize unknown class - check https://github.com/blitz-js/superjson/issues/116#issuecomment-773996564");return Object.assign(Object.create(r.prototype),t)}),AI=t1(function(t,e){return!!e.customTransformerRegistry.findApplicable(t)},function(t,e){var n=e.customTransformerRegistry.findApplicable(t);return["custom",n.name]},function(t,e){var n=e.customTransformerRegistry.findApplicable(t);return n.serialize(t)},function(t,e,n){var r=n.customTransformerRegistry.findByName(e[1]);if(!r)throw new Error("Trying to deserialize unknown custom value");return r.deserialize(t)}),sz=[TI,EI,AI,SI],JS=function(t,e){var n=GS(sz,function(o){return o.isApplicable(t,e)});if(n)return{value:n.transform(t,e),type:n.annotation(t,e)};var r=GS($I,function(o){return o.isApplicable(t,e)});if(r)return{value:r.transform(t,e),type:r.annotation}},NI={};$I.forEach(function(t){NI[t.annotation]=t});var iz=function(t,e,n){if(yi(e))switch(e[0]){case"symbol":return EI.untransform(t,e,n);case"class":return TI.untransform(t,e,n);case"custom":return AI.untransform(t,e,n);case"typed-array":return SI.untransform(t,e,n);default:throw new Error("Unknown transformation: "+e)}else{var r=NI[e];if(!r)throw new Error("Unknown transformation: "+e);return r.untransform(t,n)}},Ol=function(t,e){for(var n=t.keys();e>0;)n.next(),e--;return n.next().value};function PI(t){if(Rh(t,"__proto__"))throw new Error("__proto__ is not allowed as a property");if(Rh(t,"prototype"))throw new Error("prototype is not allowed as a property");if(Rh(t,"constructor"))throw new Error("constructor is not allowed as a property")}var az=function(t,e){PI(e);for(var n=0;n<e.length;n++){var r=e[n];if(Hd(t))t=Ol(t,+r);else if(Ud(t)){var o=+r,s=+e[++n]==0?"key":"value",i=Ol(t,o);switch(s){case"key":t=i;break;case"value":t=t.get(i);break}}else t=t[r]}return t},R0=function(t,e,n){if(PI(e),e.length===0)return n(t);for(var r=t,o=0;o<e.length-1;o++){var s=e[o];if(yi(r)){var i=+s;r=r[i]}else if(Vd(r))r=r[s];else if(Hd(r)){var a=+s;r=Ol(r,a)}else if(Ud(r)){var l=o===e.length-2;if(l)break;var a=+s,c=+e[++o]==0?"key":"value",u=Ol(r,a);switch(c){case"key":r=u;break;case"value":r=r.get(u);break}}}var d=e[e.length-1];if(yi(r)?r[+d]=n(r[+d]):Vd(r)&&(r[d]=n(r[d])),Hd(r)){var f=Ol(r,+d),p=n(f);f!==p&&(r.delete(f),r.add(p))}if(Ud(r)){var a=+e[e.length-2],h=Ol(r,a),c=+d==0?"key":"value";switch(c){case"key":{var y=n(h);r.set(y,r.get(h)),y!==h&&r.delete(h);break}case"value":{r.set(h,n(r.get(h)));break}}}return t},qo=globalThis&&globalThis.__read||function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),o,s=[],i;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){i={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return s},zs=globalThis&&globalThis.__spreadArray||function(t,e){for(var n=0,r=e.length,o=t.length;n<r;n++,o++)t[o]=e[n];return t};function M0(t,e,n){if(n===void 0&&(n=[]),!!t){if(!yi(t)){lc(t,function(i,a){return M0(i,e,zs(zs([],qo(n)),qo(ud(a))))});return}var r=qo(t,2),o=r[0],s=r[1];s&&lc(s,function(i,a){M0(i,e,zs(zs([],qo(n)),qo(ud(a))))}),e(o,n)}}function lz(t,e,n){return M0(e,function(r,o){t=R0(t,o,function(s){return iz(s,r,n)})}),t}function cz(t,e){function n(i,a){var l=az(t,ud(a));i.map(ud).forEach(function(c){t=R0(t,c,function(){return l})})}if(yi(e)){var r=qo(e,2),o=r[0],s=r[1];o.forEach(function(i){t=R0(t,ud(i),function(){return t})}),s&&lc(s,n)}else lc(e,n);return t}var uz=function(t,e){return Vd(t)||yi(t)||Ud(t)||Hd(t)||CI(t,e)};function dz(t,e,n){var r=n.get(t);r?r.push(e):n.set(t,[e])}function fz(t,e){var n={},r=void 0;return t.forEach(function(o){if(!(o.length<=1)){e||(o=o.map(function(l){return l.map(String)}).sort(function(l,c){return l.length-c.length}));var s=qo(o),i=s[0],a=s.slice(1);i.length===0?r=a.map(lb):n[lb(i)]=a.map(lb)}}),r?N0(n)?[r]:[r,n]:N0(n)?void 0:n}var OI=function(t,e,n,r,o,s,i){var a;o===void 0&&(o=[]),s===void 0&&(s=[]),i===void 0&&(i=new Map);var l=QB(t);if(!l){dz(t,o,e);var c=i.get(t);if(c)return r?{transformedValue:null}:c}if(!uz(t,n)){var u=JS(t,n),d=u?{transformedValue:u.value,annotations:[u.type]}:{transformedValue:t};return l||i.set(t,d),d}if(Rh(s,t))return{transformedValue:null};var f=JS(t,n),p=(a=f==null?void 0:f.value)!==null&&a!==void 0?a:t,h=yi(p)?[]:{},y={};lc(p,function(b,w){var x=OI(b,e,n,r,zs(zs([],qo(o)),[w]),zs(zs([],qo(s)),[t]),i);h[w]=x.transformedValue,yi(x.annotations)?y[w]=x.annotations:Vd(x.annotations)&&lc(x.annotations,function(k,S){y[_I(w)+"."+S]=k})});var g=N0(y)?{transformedValue:h,annotations:f?[f.type]:void 0}:{transformedValue:h,annotations:f?[f.type,y]:y};return l||i.set(t,g),g};function II(t){return Object.prototype.toString.call(t).slice(8,-1)}function pz(t){if(II(t)!=="Object")return!1;const e=Object.getPrototypeOf(t);return!!e&&e.constructor===Object&&e===Object.prototype}function YS(t){return II(t)==="Array"}function hz(t,e,n,r,o){const s={}.propertyIsEnumerable.call(r,e)?"enumerable":"nonenumerable";s==="enumerable"&&(t[e]=n),o&&s==="nonenumerable"&&Object.defineProperty(t,e,{value:n,enumerable:!1,writable:!0,configurable:!0})}function D0(t,e={}){if(YS(t))return t.map(o=>D0(o,e));if(!pz(t))return t;const n=Object.getOwnPropertyNames(t),r=Object.getOwnPropertySymbols(t);return[...n,...r].reduce((o,s)=>{if(YS(e.props)&&!e.props.includes(s))return o;const i=t[s],a=D0(i,e);return hz(o,s,a,t,e.nonenumerable),o},{})}var Hi=globalThis&&globalThis.__assign||function(){return Hi=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},Hi.apply(this,arguments)},mz=globalThis&&globalThis.__read||function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),o,s=[],i;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){i={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return s},gz=globalThis&&globalThis.__spreadArray||function(t,e){for(var n=0,r=e.length,o=t.length;n<r;n++,o++)t[o]=e[n];return t},RI=function(){function t(e){var n=e===void 0?{}:e,r=n.dedupe,o=r===void 0?!1:r;this.classRegistry=new BB,this.symbolRegistry=new wI(function(s){var i;return(i=s.description)!==null&&i!==void 0?i:""}),this.customTransformerRegistry=new VB,this.allowedErrorProps=[],this.dedupe=o}return t.prototype.serialize=function(e){var n=new Map,r=OI(e,n,this,this.dedupe),o={json:r.transformedValue};r.annotations&&(o.meta=Hi(Hi({},o.meta),{values:r.annotations}));var s=fz(n,this.dedupe);return s&&(o.meta=Hi(Hi({},o.meta),{referentialEqualities:s})),o},t.prototype.deserialize=function(e){var n=e.json,r=e.meta,o=D0(n);return r!=null&&r.values&&(o=lz(o,r.values,this)),r!=null&&r.referentialEqualities&&(o=cz(o,r.referentialEqualities)),o},t.prototype.stringify=function(e){return JSON.stringify(this.serialize(e))},t.prototype.parse=function(e){return this.deserialize(JSON.parse(e))},t.prototype.registerClass=function(e,n){this.classRegistry.register(e,n)},t.prototype.registerSymbol=function(e,n){this.symbolRegistry.register(e,n)},t.prototype.registerCustom=function(e,n){this.customTransformerRegistry.register(Hi({name:n},e))},t.prototype.allowErrorProps=function(){for(var e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];(e=this.allowedErrorProps).push.apply(e,gz([],mz(n)))},t.defaultInstance=new t,t.serialize=t.defaultInstance.serialize.bind(t.defaultInstance),t.deserialize=t.defaultInstance.deserialize.bind(t.defaultInstance),t.stringify=t.defaultInstance.stringify.bind(t.defaultInstance),t.parse=t.defaultInstance.parse.bind(t.defaultInstance),t.registerClass=t.defaultInstance.registerClass.bind(t.defaultInstance),t.registerSymbol=t.defaultInstance.registerSymbol.bind(t.defaultInstance),t.registerCustom=t.defaultInstance.registerCustom.bind(t.defaultInstance),t.allowErrorProps=t.defaultInstance.allowErrorProps.bind(t.defaultInstance),t}(),yz=RI.serialize,bz=RI.deserialize;function bm(t){let e=vz(t);if(e.length>0)throw new Error(`assertSafeZodSchema: schema contains unsafe types: ${e.join(", ")}`);return t}const vz=t=>{let e=[];const n=r=>{const{typeName:o}=r._def;switch(o){case"ZodString":break;case"ZodNumber":break;case"ZodBoolean":break;case"ZodUndefined":break;case"ZodNull":break;case"ZodLiteral":break;case"ZodObject":{Object.values(r._def.shape()).forEach(i=>{n(i)});break}case"ZodArray":{n(r._def.type);break}case"ZodUnion":{r._def.options.map(i=>n(i));break}case"ZodOptional":{n(r._def.innerType);break}case"ZodNullable":{n(r._def.innerType);break}case"ZodTuple":{r._def.items.forEach(s=>n(s));break}case"ZodRecord":{n(r._def.keyType),n(r._def.valueType);break}case"ZodMap":{n(r._def.valueType),n(r._def.keyType);break}case"ZodSet":{n(r._def.valueType);break}case"ZodNativeEnum":{for(const[s,i]of Object.entries(r._def.values))typeof i!="number"&&typeof i!="string"&&e.push(`ZodNativeEnum: for ${s} only supports string, number and boolean`);break}case"ZodIntersection":{n(r._def.left),n(r._def.right);break}default:{e.push(o);break}}};return n(t),e};function MI(t,{dbKey:e,schema:n,serialize:r,deserialize:o}){return bm(n),{populate:(s,i)=>{const a=r(s);if(i[e]!==void 0)throw new Error(`DB key "${e}" already exists, it must be unique`);i[e]=yz(a)},retrieve:s=>{const i=s[e];if(i===void 0)return t.initialState;const a=bz(i);if(typeof a.version!="number")return console.error("Version number is not a number"),t.initialState;const l=n.safeParse(a.data);return l.success?o({version:a.version,data:l.data}):(console.error(l.error),t.initialState)}}}var DI={exports:{}},LI={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cc=v;function wz(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var xz=typeof Object.is=="function"?Object.is:wz,kz=cc.useState,_z=cc.useEffect,$z=cc.useLayoutEffect,Ez=cc.useDebugValue;function Sz(t,e){var n=e(),r=kz({inst:{value:n,getSnapshot:e}}),o=r[0].inst,s=r[1];return $z(function(){o.value=n,o.getSnapshot=e,cb(o)&&s({inst:o})},[t,n,e]),_z(function(){return cb(o)&&s({inst:o}),t(function(){cb(o)&&s({inst:o})})},[t]),Ez(n),n}function cb(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!xz(t,n)}catch(r){return!0}}function Cz(t,e){return e()}var Tz=typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"?Cz:Sz;LI.useSyncExternalStore=cc.useSyncExternalStore!==void 0?cc.useSyncExternalStore:Tz;DI.exports=LI;var jI=DI.exports;const Az=fs(jI),{useSyncExternalStore:Nz}=Az;function FI(t){function e(n){const r=v.useRef(),[o]=v.useState(()=>({subscribe:a=>{const l=t.effect(c=>{const u=n.track(c);r.current=u,a(),queueMicrotask(()=>{var d;((d=c._runInstance)==null?void 0:d._addTrackedCount)===0&&console.warn(`You forgot to destructure/access the tracked field from ${n.name}. This will not track any changes!.`)})});return()=>{t.unregisterEffect(l)}},getSnapshot:()=>{var a;return(a=r.current)!=null?a:n.get(t.state)}})),s=Nz(o.subscribe,o.getSnapshot);return v.useDebugValue(s),s}return e}class BI{constructor(e,n){M(this,"lastStateBeforeDestroy");M(this,"dispatch",(e,n)=>{this._rootStore?this._rootStore.dispatch(e,{...n,debugInfo:this.name+(n!=null&&n.debugInfo?` (${n.debugInfo})`:"")}):console.error(`Cannot dispatch on a stale effect "${this.name}" run. This is likely a bug in your code.`)});M(this,"_destroyed",!1);M(this,"_rootStore");this.name=n,this._rootStore=e}get destroyed(){return this._destroyed}get state(){return this._rootStore?this._rootStore.state:(console.warn(`Trying to access store state of a destroyed store "${this.name}", this will give stale data and cause memory leaks.`),this.lastStateBeforeDestroy)}_destroy(){var e;this._destroyed||(this.lastStateBeforeDestroy=(e=this._rootStore)==null?void 0:e.state,this._rootStore=void 0,this._destroyed=!0)}}const ub=new WeakMap;function ak(t){if(ub.has(t))return ub.get(t);const e={};for(const r of t)for(const o of r.dependencies){let s=e[o.sliceId];s||(s=new Set,e[o.sliceId]=s),s.add(r.sliceId)}const n=Pz(e);return ub.set(t,n),n}function Pz(t){const e={},n=r=>{let o=e[r];if(o)return o;o=new Set,e[r]=o;const s=t[r];if(s)for(const i of s){o.add(i);for(const a of n(i))o.add(a)}return o};for(const r of Object.keys(t))n(r);return e}const Oz=()=>({txCounter:0,actionIdCounters:Object.create(null),sliceIdCounters:Object.create(null)});let Fi=Oz();class Iz{createActionId(e,n=""){let r=`a_${n}[${e}]`;return e in Fi.actionIdCounters?`${r}${Fi.actionIdCounters[e]++}`:(Fi.actionIdCounters[e]=0,r)}createSliceId(e){return e in Fi.sliceIdCounters?`sl_${e}$${++Fi.sliceIdCounters[e]}`:(Fi.sliceIdCounters[e]=0,`sl_${e}$`)}createTransactionId(){return`tx_${Fi.txCounter++}`}}const lk=new Iz;class zI{constructor(e){M(this,"name");M(this,"initialState");M(this,"dependencies");M(this,"sliceId");this.name=e.name,this.initialState=e.state,this.dependencies=e.dependencies,this.sliceId=e.sliceId||lk.createSliceId(e.name)}get(e){return e.resolve(this.sliceId)}query(e){return(n,...r)=>e(...r)(n)}update(e,n,r={}){const o=e.getSliceStateManager(this.sliceId).sliceState,s=typeof n=="function"?n(o):n;let i;return r.replace||s===o?i=s:i={...o,...s},{name:this.name,[j0]:i}}}const ck="DEBUG__DISPATCHER",uk="store-name";let qI=class L0{constructor(e,n){M(this,"metadata",new n1);M(this,"txId",lk.createTransactionId());M(this,"destroyed",!1);this.steps=e,this.opts=n}static create(e){const n={params:e.params,actionId:e.actionId,sourceSliceName:e.sourceSliceName,sourceSliceId:e.sourceSliceId,targetSliceName:e.name,targetSliceId:e.sourceSliceId};return new L0([n],{})}get isDestroyed(){return this.destroyed}append(e){return e.destroyed=!0,this.destroyed=!0,new L0([...this.steps,...e.steps],this.opts)}};class n1{constructor(){M(this,"_metadata",Object.create(null))}appendMetadata(e,n){let r=this.getMetadata(e);this.setMetadata(e,r?r+","+n:n)}fork(){const e=new n1;return e._metadata={...this._metadata},e}getMetadata(e){return this._metadata[e]}setMetadata(e,n){this._metadata[e]=n}}const db=new Map;class WI{constructor(e){M(this,"actionId");this.opts=e;const n=e.debugName||e.userCallback.name;if(this.actionId=lk.createActionId(e.slice.sliceId,n),db.has(this.actionId))throw new Error(`ActionId "${this.actionId}" can not already exist`);db.set(this.actionId,this)}getTransactionBuilder(){return(...e)=>this.opts.userCallback(...e).makeTxn({params:e,actionId:this.actionId,sliceId:this.opts.slice.sliceId,sliceName:this.opts.slice.name})}static _applyStep(e,n){const{actionId:r,targetSliceId:o,params:s}=n,i=db.get(r);if(!i)throw new Error(`ActionId "${r}" for Slice "${o}" does not exist`);const l=i.opts.userCallback(...s).opts.calcUserSliceState(e);return l!=null&&typeof l=="object"&&j0 in l?l[j0]:l}}class Rz{constructor(e){this.opts=e}makeTxn(e){return qI.create({name:this.opts.name,params:e.params,actionId:e.actionId,sourceSliceId:e.sliceId,sourceSliceName:e.sliceName})}}let dk=class VI extends zI{constructor(e){super(e),this.opts=e}static create(e){return new VI(e)}simpleAction(e,n){return this.action(r=>this.tx(o=>this.update(o,s=>{if(!n)return r===s[e]?s:{...s,[e]:r};const i=n(r,o);return i===s[e]?s:i})),{name:`simpleAction(${e.toString()})`})}action(e,n){return new WI({slice:this,userCallback:e,debugName:n==null?void 0:n.name}).getTransactionBuilder()}track(e){return new Proxy(this.get(e.state),{get:(n,r)=>{const o=n[r];return e._addTrackedField(this,r,o),o}})}tx(e){return new Rz({name:this.name,calcUserSliceState:e})}};function hs(t,e){return dk.create({...e,dependencies:t})}class fk extends zI{constructor(e){super(e),this.opts=e}static create(e){return new fk(e)}get(e){return e.resolve(this.sliceId,{skipDerivedData:!0})}selector(e,n={}){const r=new WeakMap,o=new WeakMap,s=n.equal;return typeof s=="function"?i=>Dz(i,e,r,o,s):i=>Mz(i,e,r)}slice(e){const n=Object.entries(e.derivedState),r=new WeakMap;return dk.create({...this.opts,sliceId:this.sliceId,calcDerivedState:s=>Lz(s,n,r)})}}function pk(t,e){return fk.create({...e,dependencies:t})}function Mz(t,e,n){if(n.has(t))return n.get(t);const r=e(t);return n.set(t,r),r}function Dz(t,e,n,r,o){if(n.has(t))return n.get(t);const s=e(t);if(!r.has(t._storeStateKey))return r.set(t._storeStateKey,s),n.set(t,s),s;const i=r.get(t._storeStateKey);return o(s,i)?(n.set(t,i),i):(r.set(t._storeStateKey,s),n.set(t,s),s)}function Lz(t,e,n){const r=Object.fromEntries(e.map(([s,i])=>[s,i(t)])),o=n.get(t._storeStateKey);return o&&Fz(o,r)?o:(n.set(t._storeStateKey,r),r)}function jz(t){return t instanceof dk}function Fz(t,e){if(Object.is(t,e))return!0;const n=Object.keys(t),r=Object.keys(e);return n.length!==r.length?!1:n.every(o=>Object.prototype.hasOwnProperty.call(e,o)&&Object.is(t[o],e[o]))}function Bz(t){zz(t),qz(t),Hz(t),Uz(t)}function zz(t){for(const e of t){const n=e.dependencies;if(new Set(n.map(r=>r.sliceId)).size!==n.length)throw new Error(`Slice "${e.sliceId}" has duplicate dependencies: ${n.map(r=>r.sliceId).join(", ")}`)}}function qz(t){const e=Wz(t.map(n=>n.sliceId));if(e)throw new Error("Duplicate slice ids "+e.join(", "))}function Wz(t){const e=new Set(t);if(t.length!==e.size)return Vz(t)}function Vz(t){const e=new Set,n=new Set;for(const r of t)e.has(r)?n.add(r):e.add(r);return[...n]}function Uz(t){const e=new Set,n=new Set,r=o=>{const s=o.sliceId;if(e.has(s))return!0;if(n.has(s))return!1;n.add(s),e.add(s);for(const i of o.dependencies)if(r(i))return!0;return e.delete(s),!1};for(const o of t)if(r(o)){const i=[...e];throw i.push(o.sliceId),new Error(`Circular dependency detected in slice "${o.sliceId}" with path ${i.join(" ->")}`)}}function Hz(t){let e=new Set;for(const n of t){const r=n.dependencies;if(r!==void 0){const o=r.map(s=>s.sliceId);for(const s of o)if(!e.has(s))throw new Error(`Slice "${n.sliceId}" has a dependency on Slice "${s}" which is either not registered or is registered after this slice.`)}e.add(n.sliceId)}}const j0=Symbol("Updater"),UI=typeof window!="undefined"&&"requestIdleCallback"in window,Kz="OPERATION_NAME",Gz=15;class HI extends BI{constructor(n,r,o){super(n,r);M(this,"cleanupRan",!1);M(this,"_cleanupCallbacks",new Set);this.opts=o}_addCleanup(n){if(this.cleanupRan){console.warn(`Adding a new cleanup to ${this.name} as cleanups have already run`),n();return}this._cleanupCallbacks.add(n)}_runCleanup(){if(!this.cleanupRan){for(const n of this._cleanupCallbacks)try{n()}catch(r){console.error(r)}this.cleanupRan=!0}}}function ms(t){return e=>{const n=new WeakMap,r=e.name||"anonymous-operation";return Zz(n,e,r,t)}}function Zz(t,e,n,r){return(...o)=>{const s=a=>{let l=t.get(a);l||(l=new Jz(e,r,n),t.set(a,l)),l.run(a,o)},i=new n1;return i.appendMetadata(Kz,n),{name:n,run:s,metadata:i}}}class Jz{constructor(e,n={},r){M(this,"opStore");this.operationCallback=e,this.opts=n,this.name=r}deferExecution(e,n){UI?window.requestIdleCallback(e,{timeout:n}):setTimeout(e,n)}run(e,n){this.scheduler(()=>{var o;(o=this.opStore)==null||o._runCleanup();const r=new HI(e,this.name,this.opts);this.opStore=r,this._run(r,n)})}scheduler(e){const n=typeof this.opts.maxWait=="number"?this.opts.maxWait:Gz;this.opts.deferred?this.deferExecution(e,n):queueMicrotask(e)}async _run(e,n){var o,s;if(e.destroyed||(s=(o=this.opStore)==null?void 0:o._rootStore)!=null&&s.destroyed){console.warn(`Operation ${this.name} can not run after the store was destroyed`);return}const r=this.operationCallback(...n)(e);r instanceof Promise&&await r}}function bn(t,e){var n;t instanceof HI?t._addCleanup(e):(n=t._runInstance)==null||n.addCleanup(e)}class Yz extends BI{constructor(e,n,r){super(n,r),this._runInstance=e}_addTrackedField(e,n,r){var o;(o=this._runInstance)==null||o.addTrackedField(e,n,r)}_destroy(){this.destroyed||(this._runInstance=void 0,super._destroy())}}class hk{constructor(e,n){M(this,"effectStore");M(this,"_cleanups",new Set);M(this,"_dependencies",new Map);M(this,"_addTrackedCount",0);this.rootStore=e,this.name=n,this.effectStore=new Yz(this,e,this.name)}get dependencies(){return this._dependencies}addCleanup(e){this._cleanups.add(e)}addTrackedField(e,n,r){this._addTrackedCount++;const o=this._dependencies.get(e);if(o===void 0){this._dependencies.set(e,[{field:n,value:r}]);return}o.push({field:n,value:r})}newRun(){return this.effectStore.destroyed||this._cleanups.forEach(e=>{e()}),this.effectStore._destroy(),new hk(this.rootStore,this.name)}whatDependenciesStateChange(){for(const[e,n]of this._dependencies){const r=e.get(this.rootStore.state);for(const o of n)if(!Object.is(o.value,r[o.field]))return o.field}return!1}}const Xz=15,Qz=(t,e)=>{e.deferred?UI?window.requestIdleCallback(t,{timeout:e.maxWait}):setTimeout(t,e.maxWait):queueMicrotask(t)};class eq{constructor(e,n,r){M(this,"runInstance");M(this,"debug");M(this,"destroyed",!1);M(this,"pendingRun",!1);M(this,"runCount",0);M(this,"scheduler");M(this,"name");this.callback=e,this.rootStore=n,this.opts=r,this.name=r.name||e.name||"anonymous",this.runInstance=new hk(n,this.name),this.debug=n.opts.debug,this.scheduler=n.opts.overrideEffectScheduler||r.scheduler}destroy(){this.destroyed||(this.runInstance=this.runInstance.newRun(),this.destroyed=!0)}run(e){return this.pendingRun||!this.shouldQueueRun(e)?!1:(this.pendingRun=!0,this.scheduler(()=>{this._run(),this.pendingRun=!1},this.opts),!0)}shouldQueueRun(e){if(this.destroyed)return!1;if(e===void 0)return!0;for(const n of this.runInstance.dependencies.keys())if(e.has(n))return!0;return this.runCount===0}_run(){var r;if(this.destroyed)return;let e="";if(this.runCount>0){const o=this.runInstance.whatDependenciesStateChange();if(o===!1)return;e=o}const n=this.runInstance;this.runInstance=n.newRun(),this.callback(this.runInstance.effectStore),(r=this.debug)==null||r.call(this,{type:this.opts.deferred?"UPDATE_EFFECT":"SYNC_UPDATE_EFFECT",name:this.name,changed:e}),this.runCount++}}function ye(t,{deferred:e=!0,maxWait:n=Xz,scheduler:r=Qz}={}){return o=>new eq(t,o,{deferred:e,maxWait:n,scheduler:r})}class tq{constructor(e,n){M(this,"slicesLookup");M(this,"reverseDependencies",{});M(this,"_effects",new Set);this._slices=e,this._opts=n,this.slicesLookup=Object.fromEntries(e.map(r=>[r.sliceId,r])),this.reverseDependencies=Object.fromEntries(Object.entries(ak(e)).map(([r,o])=>[r,new Set([...o].map(s=>this.slicesLookup[s]))]))}destroy(){for(const e of this._effects)e.destroy()}getAllSlicesChanged(e){var r;if(e===void 0)return;const n=new Set([...e]);for(const o of e)(r=this.reverseDependencies[o.sliceId])==null||r.forEach(s=>{n.add(s)});return n}registerEffect(e){if(this._effects.has(e))throw new Error(`Effect already registered ${e.name}`);this._effects.add(e),queueMicrotask(()=>{e.run()})}run(e){const n=this.getAllSlicesChanged(e);for(const r of this._effects)r.run(n)}unregisterEffect(e){e.destroy(),this._effects.delete(e)}}function nq(t){return{type:"OPERATION",operationId:t.name,dispatcher:t.metadata.getMetadata(ck),store:t.metadata.getMetadata(uk)}}function rq(t){let e={type:"TRANSACTION",sourceSlices:t.steps.length===1?t.steps[0].sourceSliceId:t.steps.map(n=>n.sourceSliceId),targetSlices:t.steps.length===1?t.steps[0].targetSliceId:t.steps.map(n=>n.targetSliceId),actionId:t.steps.length===1?t.steps[0].actionId:t.steps.map(n=>n.actionId),dispatcher:t.metadata.getMetadata(ck),store:t.metadata.getMetadata(uk),txId:t.txId,params:t.steps.length===1?t.steps[0].params:t.steps.map(n=>n.params)};return Object.fromEntries(Object.entries(e).filter(n=>n[1]!==void 0))}class oq{constructor(){M(this,"_storeStateKey","StoreStateKey")}}function sq(t){const e=Object.fromEntries(t.slices.map(r=>[r.sliceId,r])),n=new oq;return{...t,slicesLookup:e,storeStateKey:n,reverseSliceDependencies:ak(t.slices)}}class vm{constructor(e,n){this.slice=e,this.sliceState=n}applyStep(e,n){const r=WI._applyStep(e,n);return this.sliceState===r?e:e._updateSliceStateManager(new vm(this.slice,r))}}class wm{constructor(e,n){M(this,"resolveCache",{});this.sliceStateMap=e,this.config=n}static create(e){Bz(e.slices);const n=Object.fromEntries(e.slices.map(o=>[o.sliceId,new vm(o,o.initialState)])),r=sq(e);if(e.stateOverride)for(const[o,s]of Object.entries(e.stateOverride)){const i=o;if(!n[i])throw new Error(`StoreState.create: slice with id "${i}" does not exist`);n[i]=new vm(r.slicesLookup[i],s)}return new wm(n,r)}applyTransaction(e){if(e.isDestroyed)throw new Error("StoreState.applyTransaction: cannot apply a destroyed transaction");return e.steps.reduce((n,r)=>n.getSliceStateManager(r.targetSliceId).applyStep(n,r),this)}getSliceState(e){return this.getSliceStateManager(e).sliceState}getSliceStateManager(e){const n=this.sliceStateMap[e];if(!n)throw new Error(`StoreState.resolveSliceState: slice with id "${e}" does not exist`);return n}resolve(e,{skipDerivedData:n}={}){const r=this.getSliceStateManager(e);if(!r.slice.opts.calcDerivedState||n)return r.sliceState;const o=this.resolveCache[e];if(o!==void 0)return o;const s=r.slice.opts.calcDerivedState(this),i={...r.sliceState,...s};return this.resolveCache[e]=i,i}_getChangedSlices(e){const n=[];return Object.values(this.sliceStateMap).forEach(r=>{var a;const o=r.slice,s=r.sliceState,i=(a=e.sliceStateMap[o.sliceId])==null?void 0:a.sliceState;s!==i&&n.push(r.slice)}),n}get _storeStateKey(){return this.config.storeStateKey}_updateSliceStateManager(e){return new wm({...this.sliceStateMap,[e.slice.sliceId]:e},this.config)}}const iq=(t,e,n)=>{const r=t.state.applyTransaction(n);e(r)},aq=(t,e)=>{e.run(t)};function KI(t){return r1.create(t)}class r1{constructor(e,n){M(this,"updateState",e=>{const n=this._state;this._state=e,this.opts.manualEffectsTrigger||this._effectsManager.run(this._state._getChangedSlices(n))});M(this,"dispatch",(e,n)=>{var r,o,s,i;if(!this._destroyed)if(e.metadata.setMetadata(uk,this.opts.storeName),n!=null&&n.debugInfo&&e.metadata.setMetadata(ck,n.debugInfo),e instanceof qI)(o=(r=this.opts).debug)==null||o.call(r,rq(e)),this._dispatchTxn(this,this.updateState,e);else{const a=e;(i=(s=this.opts).debug)==null||i.call(s,nq(e)),this._dispatchOperation(this,a)}});M(this,"_abortController",new AbortController);M(this,"_destroyed",!1);M(this,"_dispatchOperation");M(this,"_dispatchTxn");M(this,"_effectsManager");M(this,"_state");this.opts=e,this.config=n,this._state=wm.create(e),this._dispatchTxn=e.dispatchTransaction||iq,this._dispatchOperation=e.dispatchOperation||aq,this._effectsManager=new tq(this.opts.slices,{debug:this.opts.debug})}static create(e){const r={slicesLookup:Object.fromEntries(e.slices.map(o=>[o.sliceId,o])),reverseSliceDependencies:ak(e.slices)};return new r1(e,r)}get destroyed(){return this._destroyed}get destroySignal(){return this._abortController.signal}get name(){return this.opts.storeName}get state(){return this._state}destroy(){this._destroyed=!0,this._effectsManager.destroy(),this._abortController.abort()}effect(e,n={}){const r=ye(e,n)(this);return this._effectsManager.registerEffect(r),r}operation(e,n){return ms(n)(e)}registerEffect(e){const n=e(this);return this._effectsManager.registerEffect(n),n}unregisterEffect(e){this._effectsManager.unregisterEffect(e)}runEffects(){this._effectsManager.run()}}function o1(t){const e=new WeakMap;return n=>{const r=n instanceof r1?n:n._rootStore;if(!r)throw new Error("Trying to access ref in a destroyed store "+n.name);let o=e.get(r);return o||(o={current:t()},e.set(r,o)),o}}var De;(function(t){t.assertEqual=o=>o;function e(o){}t.assertIs=e;function n(o){throw new Error}t.assertNever=n,t.arrayToEnum=o=>{const s={};for(const i of o)s[i]=i;return s},t.getValidEnumValues=o=>{const s=t.objectKeys(o).filter(a=>typeof o[o[a]]!="number"),i={};for(const a of s)i[a]=o[a];return t.objectValues(i)},t.objectValues=o=>t.objectKeys(o).map(function(s){return o[s]}),t.objectKeys=typeof Object.keys=="function"?o=>Object.keys(o):o=>{const s=[];for(const i in o)Object.prototype.hasOwnProperty.call(o,i)&&s.push(i);return s},t.find=(o,s)=>{for(const i of o)if(s(i))return i},t.isInteger=typeof Number.isInteger=="function"?o=>Number.isInteger(o):o=>typeof o=="number"&&isFinite(o)&&Math.floor(o)===o;function r(o,s=" | "){return o.map(i=>typeof i=="string"?`'${i}'`:i).join(s)}t.joinValues=r,t.jsonStringifyReplacer=(o,s)=>typeof s=="bigint"?s.toString():s})(De||(De={}));var F0;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(F0||(F0={}));const Z=De.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ms=t=>{switch(typeof t){case"undefined":return Z.undefined;case"string":return Z.string;case"number":return isNaN(t)?Z.nan:Z.number;case"boolean":return Z.boolean;case"function":return Z.function;case"bigint":return Z.bigint;case"symbol":return Z.symbol;case"object":return Array.isArray(t)?Z.array:t===null?Z.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Z.promise:typeof Map!="undefined"&&t instanceof Map?Z.map:typeof Set!="undefined"&&t instanceof Set?Z.set:typeof Date!="undefined"&&t instanceof Date?Z.date:Z.object;default:return Z.unknown}},V=De.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),lq=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Dr extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(s){return s.message},r={_errors:[]},o=s=>{for(const i of s.issues)if(i.code==="invalid_union")i.unionErrors.map(o);else if(i.code==="invalid_return_type")o(i.returnTypeError);else if(i.code==="invalid_arguments")o(i.argumentsError);else if(i.path.length===0)r._errors.push(n(i));else{let a=r,l=0;for(;l<i.path.length;){const c=i.path[l];l===i.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(n(i))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return o(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,De.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const o of this.issues)o.path.length>0?(n[o.path[0]]=n[o.path[0]]||[],n[o.path[0]].push(e(o))):r.push(e(o));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Dr.create=t=>new Dr(t);const Kd=(t,e)=>{let n;switch(t.code){case V.invalid_type:t.received===Z.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case V.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,De.jsonStringifyReplacer)}`;break;case V.unrecognized_keys:n=`Unrecognized key(s) in object: ${De.joinValues(t.keys,", ")}`;break;case V.invalid_union:n="Invalid input";break;case V.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${De.joinValues(t.options)}`;break;case V.invalid_enum_value:n=`Invalid enum value. Expected ${De.joinValues(t.options)}, received '${t.received}'`;break;case V.invalid_arguments:n="Invalid function arguments";break;case V.invalid_return_type:n="Invalid function return type";break;case V.invalid_date:n="Invalid date";break;case V.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:De.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case V.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case V.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case V.custom:n="Invalid input";break;case V.invalid_intersection_types:n="Intersection results could not be merged";break;case V.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case V.not_finite:n="Number must be finite";break;default:n=e.defaultError,De.assertNever(t)}return{message:n}};let GI=Kd;function cq(t){GI=t}function xm(){return GI}const km=t=>{const{data:e,path:n,errorMaps:r,issueData:o}=t,s=[...n,...o.path||[]],i={...o,path:s};let a="";const l=r.filter(c=>!!c).slice().reverse();for(const c of l)a=c(i,{data:e,defaultError:a}).message;return{...o,path:s,message:o.message||a}},uq=[];function Y(t,e){const n=km({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,xm(),Kd].filter(r=>!!r)});t.common.issues.push(n)}class Qt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const o of n){if(o.status==="aborted")return pe;o.status==="dirty"&&e.dirty(),r.push(o.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const o of n)r.push({key:await o.key,value:await o.value});return Qt.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const o of n){const{key:s,value:i}=o;if(s.status==="aborted"||i.status==="aborted")return pe;s.status==="dirty"&&e.dirty(),i.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof i.value!="undefined"||o.alwaysSet)&&(r[s.value]=i.value)}return{status:e.value,value:r}}}const pe=Object.freeze({status:"aborted"}),ZI=t=>({status:"dirty",value:t}),dn=t=>({status:"valid",value:t}),B0=t=>t.status==="aborted",z0=t=>t.status==="dirty",Gd=t=>t.status==="valid",_m=t=>typeof Promise!="undefined"&&t instanceof Promise;var ie;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ie||(ie={}));class vo{constructor(e,n,r,o){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=o}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const XS=(t,e)=>{if(Gd(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Dr(t.common.issues);return this._error=n,this._error}}};function me(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:o}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:o}:{errorMap:(i,a)=>i.code!=="invalid_type"?{message:a.defaultError}:typeof a.data=="undefined"?{message:r!=null?r:a.defaultError}:{message:n!=null?n:a.defaultError},description:o}}class ve{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Ms(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Ms(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Qt,ctx:{common:e.parent.common,data:e.data,parsedType:Ms(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(_m(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const o={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ms(e)},s=this._parseSync({data:e,path:o.path,parent:o});return XS(o,s)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ms(e)},o=this._parse({data:e,path:r.path,parent:r}),s=await(_m(o)?o:Promise.resolve(o));return XS(r,s)}refine(e,n){const r=o=>typeof n=="string"||typeof n=="undefined"?{message:n}:typeof n=="function"?n(o):n;return this._refinement((o,s)=>{const i=e(o),a=()=>s.addIssue({code:V.custom,...r(o)});return typeof Promise!="undefined"&&i instanceof Promise?i.then(l=>l?!0:(a(),!1)):i?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,o)=>e(r)?!0:(o.addIssue(typeof n=="function"?n(r,o):n),!1))}_refinement(e){return new Fr({schema:this,typeName:le.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Qo.create(this,this._def)}nullable(){return Aa.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Lr.create(this,this._def)}promise(){return dc.create(this,this._def)}or(e){return Xd.create([this,e],this._def)}and(e){return Qd.create(this,e,this._def)}transform(e){return new Fr({...me(this._def),schema:this,typeName:le.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new of({...me(this._def),innerType:this,defaultValue:n,typeName:le.ZodDefault})}brand(){return new YI({typeName:le.ZodBranded,type:this,...me(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Cm({...me(this._def),innerType:this,catchValue:n,typeName:le.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Gf.create(this,e)}readonly(){return Am.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const dq=/^c[^\s-]{8,}$/i,fq=/^[a-z][a-z0-9]*$/,pq=/^[0-9A-HJKMNP-TV-Z]{26}$/,hq=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,mq=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,gq="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let fb;const yq=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,bq=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,vq=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function wq(t,e){return!!((e==="v4"||!e)&&yq.test(t)||(e==="v6"||!e)&&bq.test(t))}class Ir extends ve{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Z.string){const s=this._getOrReturnCtx(e);return Y(s,{code:V.invalid_type,expected:Z.string,received:s.parsedType}),pe}const r=new Qt;let o;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(o=this._getOrReturnCtx(e,o),Y(o,{code:V.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(o=this._getOrReturnCtx(e,o),Y(o,{code:V.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const i=e.data.length>s.value,a=e.data.length<s.value;(i||a)&&(o=this._getOrReturnCtx(e,o),i?Y(o,{code:V.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&Y(o,{code:V.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")mq.test(e.data)||(o=this._getOrReturnCtx(e,o),Y(o,{validation:"email",code:V.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")fb||(fb=new RegExp(gq,"u")),fb.test(e.data)||(o=this._getOrReturnCtx(e,o),Y(o,{validation:"emoji",code:V.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")hq.test(e.data)||(o=this._getOrReturnCtx(e,o),Y(o,{validation:"uuid",code:V.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")dq.test(e.data)||(o=this._getOrReturnCtx(e,o),Y(o,{validation:"cuid",code:V.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")fq.test(e.data)||(o=this._getOrReturnCtx(e,o),Y(o,{validation:"cuid2",code:V.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")pq.test(e.data)||(o=this._getOrReturnCtx(e,o),Y(o,{validation:"ulid",code:V.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch(i){o=this._getOrReturnCtx(e,o),Y(o,{validation:"url",code:V.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(o=this._getOrReturnCtx(e,o),Y(o,{validation:"regex",code:V.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(o=this._getOrReturnCtx(e,o),Y(o,{code:V.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(o=this._getOrReturnCtx(e,o),Y(o,{code:V.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(o=this._getOrReturnCtx(e,o),Y(o,{code:V.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?vq(s).test(e.data)||(o=this._getOrReturnCtx(e,o),Y(o,{code:V.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="ip"?wq(e.data,s.version)||(o=this._getOrReturnCtx(e,o),Y(o,{validation:"ip",code:V.invalid_string,message:s.message}),r.dirty()):De.assertNever(s);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(o=>e.test(o),{validation:n,code:V.invalid_string,...ie.errToObj(r)})}_addCheck(e){return new Ir({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ie.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ie.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ie.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ie.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ie.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ie.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ie.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ie.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)=="undefined"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...ie.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...ie.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...ie.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...ie.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...ie.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...ie.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...ie.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...ie.errToObj(n)})}nonempty(e){return this.min(1,ie.errToObj(e))}trim(){return new Ir({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ir({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ir({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Ir.create=t=>{var e;return new Ir({checks:[],typeName:le.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...me(t)})};function xq(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,o=n>r?n:r,s=parseInt(t.toFixed(o).replace(".","")),i=parseInt(e.toFixed(o).replace(".",""));return s%i/Math.pow(10,o)}class bi extends ve{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Z.number){const s=this._getOrReturnCtx(e);return Y(s,{code:V.invalid_type,expected:Z.number,received:s.parsedType}),pe}let r;const o=new Qt;for(const s of this._def.checks)s.kind==="int"?De.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Y(r,{code:V.invalid_type,expected:"integer",received:"float",message:s.message}),o.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),Y(r,{code:V.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),o.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),Y(r,{code:V.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),o.dirty()):s.kind==="multipleOf"?xq(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),Y(r,{code:V.not_multiple_of,multipleOf:s.value,message:s.message}),o.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Y(r,{code:V.not_finite,message:s.message}),o.dirty()):De.assertNever(s);return{status:o.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,ie.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ie.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ie.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ie.toString(n))}setLimit(e,n,r,o){return new bi({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:ie.toString(o)}]})}_addCheck(e){return new bi({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ie.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ie.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ie.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ie.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ie.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ie.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:ie.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ie.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ie.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&De.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}bi.create=t=>new bi({checks:[],typeName:le.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...me(t)});class vi extends ve{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==Z.bigint){const s=this._getOrReturnCtx(e);return Y(s,{code:V.invalid_type,expected:Z.bigint,received:s.parsedType}),pe}let r;const o=new Qt;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),Y(r,{code:V.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),o.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),Y(r,{code:V.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),o.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Y(r,{code:V.not_multiple_of,multipleOf:s.value,message:s.message}),o.dirty()):De.assertNever(s);return{status:o.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,ie.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ie.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ie.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ie.toString(n))}setLimit(e,n,r,o){return new vi({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:ie.toString(o)}]})}_addCheck(e){return new vi({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ie.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ie.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ie.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ie.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ie.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}vi.create=t=>{var e;return new vi({checks:[],typeName:le.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...me(t)})};class Zd extends ve{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Z.boolean){const r=this._getOrReturnCtx(e);return Y(r,{code:V.invalid_type,expected:Z.boolean,received:r.parsedType}),pe}return dn(e.data)}}Zd.create=t=>new Zd({typeName:le.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...me(t)});class Ca extends ve{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Z.date){const s=this._getOrReturnCtx(e);return Y(s,{code:V.invalid_type,expected:Z.date,received:s.parsedType}),pe}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return Y(s,{code:V.invalid_date}),pe}const r=new Qt;let o;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(o=this._getOrReturnCtx(e,o),Y(o,{code:V.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(o=this._getOrReturnCtx(e,o),Y(o,{code:V.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):De.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Ca({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:ie.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:ie.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Ca.create=t=>new Ca({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:le.ZodDate,...me(t)});class $m extends ve{_parse(e){if(this._getType(e)!==Z.symbol){const r=this._getOrReturnCtx(e);return Y(r,{code:V.invalid_type,expected:Z.symbol,received:r.parsedType}),pe}return dn(e.data)}}$m.create=t=>new $m({typeName:le.ZodSymbol,...me(t)});class Jd extends ve{_parse(e){if(this._getType(e)!==Z.undefined){const r=this._getOrReturnCtx(e);return Y(r,{code:V.invalid_type,expected:Z.undefined,received:r.parsedType}),pe}return dn(e.data)}}Jd.create=t=>new Jd({typeName:le.ZodUndefined,...me(t)});class Yd extends ve{_parse(e){if(this._getType(e)!==Z.null){const r=this._getOrReturnCtx(e);return Y(r,{code:V.invalid_type,expected:Z.null,received:r.parsedType}),pe}return dn(e.data)}}Yd.create=t=>new Yd({typeName:le.ZodNull,...me(t)});class uc extends ve{constructor(){super(...arguments),this._any=!0}_parse(e){return dn(e.data)}}uc.create=t=>new uc({typeName:le.ZodAny,...me(t)});class pa extends ve{constructor(){super(...arguments),this._unknown=!0}_parse(e){return dn(e.data)}}pa.create=t=>new pa({typeName:le.ZodUnknown,...me(t)});class ns extends ve{_parse(e){const n=this._getOrReturnCtx(e);return Y(n,{code:V.invalid_type,expected:Z.never,received:n.parsedType}),pe}}ns.create=t=>new ns({typeName:le.ZodNever,...me(t)});class Em extends ve{_parse(e){if(this._getType(e)!==Z.undefined){const r=this._getOrReturnCtx(e);return Y(r,{code:V.invalid_type,expected:Z.void,received:r.parsedType}),pe}return dn(e.data)}}Em.create=t=>new Em({typeName:le.ZodVoid,...me(t)});class Lr extends ve{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),o=this._def;if(n.parsedType!==Z.array)return Y(n,{code:V.invalid_type,expected:Z.array,received:n.parsedType}),pe;if(o.exactLength!==null){const i=n.data.length>o.exactLength.value,a=n.data.length<o.exactLength.value;(i||a)&&(Y(n,{code:i?V.too_big:V.too_small,minimum:a?o.exactLength.value:void 0,maximum:i?o.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:o.exactLength.message}),r.dirty())}if(o.minLength!==null&&n.data.length<o.minLength.value&&(Y(n,{code:V.too_small,minimum:o.minLength.value,type:"array",inclusive:!0,exact:!1,message:o.minLength.message}),r.dirty()),o.maxLength!==null&&n.data.length>o.maxLength.value&&(Y(n,{code:V.too_big,maximum:o.maxLength.value,type:"array",inclusive:!0,exact:!1,message:o.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((i,a)=>o.type._parseAsync(new vo(n,i,n.path,a)))).then(i=>Qt.mergeArray(r,i));const s=[...n.data].map((i,a)=>o.type._parseSync(new vo(n,i,n.path,a)));return Qt.mergeArray(r,s)}get element(){return this._def.type}min(e,n){return new Lr({...this._def,minLength:{value:e,message:ie.toString(n)}})}max(e,n){return new Lr({...this._def,maxLength:{value:e,message:ie.toString(n)}})}length(e,n){return new Lr({...this._def,exactLength:{value:e,message:ie.toString(n)}})}nonempty(e){return this.min(1,e)}}Lr.create=(t,e)=>new Lr({type:t,minLength:null,maxLength:null,exactLength:null,typeName:le.ZodArray,...me(e)});function yl(t){if(t instanceof it){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Qo.create(yl(r))}return new it({...t._def,shape:()=>e})}else return t instanceof Lr?new Lr({...t._def,type:yl(t.element)}):t instanceof Qo?Qo.create(yl(t.unwrap())):t instanceof Aa?Aa.create(yl(t.unwrap())):t instanceof wo?wo.create(t.items.map(e=>yl(e))):t}class it extends ve{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=De.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==Z.object){const c=this._getOrReturnCtx(e);return Y(c,{code:V.invalid_type,expected:Z.object,received:c.parsedType}),pe}const{status:r,ctx:o}=this._processInputParams(e),{shape:s,keys:i}=this._getCached(),a=[];if(!(this._def.catchall instanceof ns&&this._def.unknownKeys==="strip"))for(const c in o.data)i.includes(c)||a.push(c);const l=[];for(const c of i){const u=s[c],d=o.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new vo(o,d,o.path,c)),alwaysSet:c in o.data})}if(this._def.catchall instanceof ns){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of a)l.push({key:{status:"valid",value:u},value:{status:"valid",value:o.data[u]}});else if(c==="strict")a.length>0&&(Y(o,{code:V.unrecognized_keys,keys:a}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of a){const d=o.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new vo(o,d,o.path,u)),alwaysSet:u in o.data})}}return o.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const d=await u.key;c.push({key:d,value:await u.value,alwaysSet:u.alwaysSet})}return c}).then(c=>Qt.mergeObjectSync(r,c)):Qt.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return ie.errToObj,new it({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var o,s,i,a;const l=(i=(s=(o=this._def).errorMap)===null||s===void 0?void 0:s.call(o,n,r).message)!==null&&i!==void 0?i:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=ie.errToObj(e).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new it({...this._def,unknownKeys:"strip"})}passthrough(){return new it({...this._def,unknownKeys:"passthrough"})}extend(e){return new it({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new it({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:le.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new it({...this._def,catchall:e})}pick(e){const n={};return De.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new it({...this._def,shape:()=>n})}omit(e){const n={};return De.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new it({...this._def,shape:()=>n})}deepPartial(){return yl(this)}partial(e){const n={};return De.objectKeys(this.shape).forEach(r=>{const o=this.shape[r];e&&!e[r]?n[r]=o:n[r]=o.optional()}),new it({...this._def,shape:()=>n})}required(e){const n={};return De.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof Qo;)s=s._def.innerType;n[r]=s}}),new it({...this._def,shape:()=>n})}keyof(){return JI(De.objectKeys(this.shape))}}it.create=(t,e)=>new it({shape:()=>t,unknownKeys:"strip",catchall:ns.create(),typeName:le.ZodObject,...me(e)});it.strictCreate=(t,e)=>new it({shape:()=>t,unknownKeys:"strict",catchall:ns.create(),typeName:le.ZodObject,...me(e)});it.lazycreate=(t,e)=>new it({shape:t,unknownKeys:"strip",catchall:ns.create(),typeName:le.ZodObject,...me(e)});class Xd extends ve{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function o(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const i=s.map(a=>new Dr(a.ctx.common.issues));return Y(n,{code:V.invalid_union,unionErrors:i}),pe}if(n.common.async)return Promise.all(r.map(async s=>{const i={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:i}),ctx:i}})).then(o);{let s;const i=[];for(const l of r){const c={...n,common:{...n.common,issues:[]},parent:null},u=l._parseSync({data:n.data,path:n.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!s&&(s={result:u,ctx:c}),c.common.issues.length&&i.push(c.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=i.map(l=>new Dr(l));return Y(n,{code:V.invalid_union,unionErrors:a}),pe}}get options(){return this._def.options}}Xd.create=(t,e)=>new Xd({options:t,typeName:le.ZodUnion,...me(e)});const Mh=t=>t instanceof tf?Mh(t.schema):t instanceof Fr?Mh(t.innerType()):t instanceof nf?[t.value]:t instanceof wi?t.options:t instanceof rf?Object.keys(t.enum):t instanceof of?Mh(t._def.innerType):t instanceof Jd?[void 0]:t instanceof Yd?[null]:null;class s1 extends ve{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Z.object)return Y(n,{code:V.invalid_type,expected:Z.object,received:n.parsedType}),pe;const r=this.discriminator,o=n.data[r],s=this.optionsMap.get(o);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(Y(n,{code:V.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),pe)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const o=new Map;for(const s of n){const i=Mh(s.shape[e]);if(!i)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of i){if(o.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);o.set(a,s)}}return new s1({typeName:le.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:o,...me(r)})}}function q0(t,e){const n=Ms(t),r=Ms(e);if(t===e)return{valid:!0,data:t};if(n===Z.object&&r===Z.object){const o=De.objectKeys(e),s=De.objectKeys(t).filter(a=>o.indexOf(a)!==-1),i={...t,...e};for(const a of s){const l=q0(t[a],e[a]);if(!l.valid)return{valid:!1};i[a]=l.data}return{valid:!0,data:i}}else if(n===Z.array&&r===Z.array){if(t.length!==e.length)return{valid:!1};const o=[];for(let s=0;s<t.length;s++){const i=t[s],a=e[s],l=q0(i,a);if(!l.valid)return{valid:!1};o.push(l.data)}return{valid:!0,data:o}}else return n===Z.date&&r===Z.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Qd extends ve{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),o=(s,i)=>{if(B0(s)||B0(i))return pe;const a=q0(s.value,i.value);return a.valid?((z0(s)||z0(i))&&n.dirty(),{status:n.value,value:a.data}):(Y(r,{code:V.invalid_intersection_types}),pe)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,i])=>o(s,i)):o(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Qd.create=(t,e,n)=>new Qd({left:t,right:e,typeName:le.ZodIntersection,...me(n)});class wo extends ve{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Z.array)return Y(r,{code:V.invalid_type,expected:Z.array,received:r.parsedType}),pe;if(r.data.length<this._def.items.length)return Y(r,{code:V.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),pe;!this._def.rest&&r.data.length>this._def.items.length&&(Y(r,{code:V.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...r.data].map((i,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new vo(r,i,r.path,a)):null}).filter(i=>!!i);return r.common.async?Promise.all(s).then(i=>Qt.mergeArray(n,i)):Qt.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new wo({...this._def,rest:e})}}wo.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new wo({items:t,typeName:le.ZodTuple,rest:null,...me(e)})};class ef extends ve{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Z.object)return Y(r,{code:V.invalid_type,expected:Z.object,received:r.parsedType}),pe;const o=[],s=this._def.keyType,i=this._def.valueType;for(const a in r.data)o.push({key:s._parse(new vo(r,a,r.path,a)),value:i._parse(new vo(r,r.data[a],r.path,a))});return r.common.async?Qt.mergeObjectAsync(n,o):Qt.mergeObjectSync(n,o)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof ve?new ef({keyType:e,valueType:n,typeName:le.ZodRecord,...me(r)}):new ef({keyType:Ir.create(),valueType:e,typeName:le.ZodRecord,...me(n)})}}class Sm extends ve{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Z.map)return Y(r,{code:V.invalid_type,expected:Z.map,received:r.parsedType}),pe;const o=this._def.keyType,s=this._def.valueType,i=[...r.data.entries()].map(([a,l],c)=>({key:o._parse(new vo(r,a,r.path,[c,"key"])),value:s._parse(new vo(r,l,r.path,[c,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of i){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return pe;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of i){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return pe;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}}}}Sm.create=(t,e,n)=>new Sm({valueType:e,keyType:t,typeName:le.ZodMap,...me(n)});class Ta extends ve{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Z.set)return Y(r,{code:V.invalid_type,expected:Z.set,received:r.parsedType}),pe;const o=this._def;o.minSize!==null&&r.data.size<o.minSize.value&&(Y(r,{code:V.too_small,minimum:o.minSize.value,type:"set",inclusive:!0,exact:!1,message:o.minSize.message}),n.dirty()),o.maxSize!==null&&r.data.size>o.maxSize.value&&(Y(r,{code:V.too_big,maximum:o.maxSize.value,type:"set",inclusive:!0,exact:!1,message:o.maxSize.message}),n.dirty());const s=this._def.valueType;function i(l){const c=new Set;for(const u of l){if(u.status==="aborted")return pe;u.status==="dirty"&&n.dirty(),c.add(u.value)}return{status:n.value,value:c}}const a=[...r.data.values()].map((l,c)=>s._parse(new vo(r,l,r.path,c)));return r.common.async?Promise.all(a).then(l=>i(l)):i(a)}min(e,n){return new Ta({...this._def,minSize:{value:e,message:ie.toString(n)}})}max(e,n){return new Ta({...this._def,maxSize:{value:e,message:ie.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Ta.create=(t,e)=>new Ta({valueType:t,minSize:null,maxSize:null,typeName:le.ZodSet,...me(e)});class Hl extends ve{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Z.function)return Y(n,{code:V.invalid_type,expected:Z.function,received:n.parsedType}),pe;function r(a,l){return km({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,xm(),Kd].filter(c=>!!c),issueData:{code:V.invalid_arguments,argumentsError:l}})}function o(a,l){return km({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,xm(),Kd].filter(c=>!!c),issueData:{code:V.invalid_return_type,returnTypeError:l}})}const s={errorMap:n.common.contextualErrorMap},i=n.data;if(this._def.returns instanceof dc){const a=this;return dn(async function(...l){const c=new Dr([]),u=await a._def.args.parseAsync(l,s).catch(p=>{throw c.addIssue(r(l,p)),c}),d=await Reflect.apply(i,this,u);return await a._def.returns._def.type.parseAsync(d,s).catch(p=>{throw c.addIssue(o(d,p)),c})})}else{const a=this;return dn(function(...l){const c=a._def.args.safeParse(l,s);if(!c.success)throw new Dr([r(l,c.error)]);const u=Reflect.apply(i,this,c.data),d=a._def.returns.safeParse(u,s);if(!d.success)throw new Dr([o(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Hl({...this._def,args:wo.create(e).rest(pa.create())})}returns(e){return new Hl({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new Hl({args:e||wo.create([]).rest(pa.create()),returns:n||pa.create(),typeName:le.ZodFunction,...me(r)})}}class tf extends ve{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}tf.create=(t,e)=>new tf({getter:t,typeName:le.ZodLazy,...me(e)});class nf extends ve{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Y(n,{received:n.data,code:V.invalid_literal,expected:this._def.value}),pe}return{status:"valid",value:e.data}}get value(){return this._def.value}}nf.create=(t,e)=>new nf({value:t,typeName:le.ZodLiteral,...me(e)});function JI(t,e){return new wi({values:t,typeName:le.ZodEnum,...me(e)})}class wi extends ve{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Y(n,{expected:De.joinValues(r),received:n.parsedType,code:V.invalid_type}),pe}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return Y(n,{received:n.data,code:V.invalid_enum_value,options:r}),pe}return dn(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return wi.create(e)}exclude(e){return wi.create(this.options.filter(n=>!e.includes(n)))}}wi.create=JI;class rf extends ve{_parse(e){const n=De.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Z.string&&r.parsedType!==Z.number){const o=De.objectValues(n);return Y(r,{expected:De.joinValues(o),received:r.parsedType,code:V.invalid_type}),pe}if(n.indexOf(e.data)===-1){const o=De.objectValues(n);return Y(r,{received:r.data,code:V.invalid_enum_value,options:o}),pe}return dn(e.data)}get enum(){return this._def.values}}rf.create=(t,e)=>new rf({values:t,typeName:le.ZodNativeEnum,...me(e)});class dc extends ve{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Z.promise&&n.common.async===!1)return Y(n,{code:V.invalid_type,expected:Z.promise,received:n.parsedType}),pe;const r=n.parsedType===Z.promise?n.data:Promise.resolve(n.data);return dn(r.then(o=>this._def.type.parseAsync(o,{path:n.path,errorMap:n.common.contextualErrorMap})))}}dc.create=(t,e)=>new dc({type:t,typeName:le.ZodPromise,...me(e)});class Fr extends ve{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===le.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),o=this._def.effect||null,s={addIssue:i=>{Y(r,i),i.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),o.type==="preprocess"){const i=o.transform(r.data,s);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(i).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:i,path:r.path,parent:r})}if(o.type==="refinement"){const i=a=>{const l=o.refinement(a,s);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?pe:(a.status==="dirty"&&n.dirty(),i(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?pe:(a.status==="dirty"&&n.dirty(),i(a.value).then(()=>({status:n.value,value:a.value}))))}if(o.type==="transform")if(r.common.async===!1){const i=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Gd(i))return i;const a=o.transform(i.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(i=>Gd(i)?Promise.resolve(o.transform(i.value,s)).then(a=>({status:n.value,value:a})):i);De.assertNever(o)}}Fr.create=(t,e,n)=>new Fr({schema:t,typeName:le.ZodEffects,effect:e,...me(n)});Fr.createWithPreprocess=(t,e,n)=>new Fr({schema:e,effect:{type:"preprocess",transform:t},typeName:le.ZodEffects,...me(n)});class Qo extends ve{_parse(e){return this._getType(e)===Z.undefined?dn(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Qo.create=(t,e)=>new Qo({innerType:t,typeName:le.ZodOptional,...me(e)});class Aa extends ve{_parse(e){return this._getType(e)===Z.null?dn(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Aa.create=(t,e)=>new Aa({innerType:t,typeName:le.ZodNullable,...me(e)});class of extends ve{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Z.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}of.create=(t,e)=>new of({innerType:t,typeName:le.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...me(e)});class Cm extends ve{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},o=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return _m(o)?o.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Dr(r.common.issues)},input:r.data})})):{status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Dr(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Cm.create=(t,e)=>new Cm({innerType:t,typeName:le.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...me(e)});class Tm extends ve{_parse(e){if(this._getType(e)!==Z.nan){const r=this._getOrReturnCtx(e);return Y(r,{code:V.invalid_type,expected:Z.nan,received:r.parsedType}),pe}return{status:"valid",value:e.data}}}Tm.create=t=>new Tm({typeName:le.ZodNaN,...me(t)});const kq=Symbol("zod_brand");class YI extends ve{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Gf extends ve{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?pe:s.status==="dirty"?(n.dirty(),ZI(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const o=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?pe:o.status==="dirty"?(n.dirty(),{status:"dirty",value:o.value}):this._def.out._parseSync({data:o.value,path:r.path,parent:r})}}static create(e,n){return new Gf({in:e,out:n,typeName:le.ZodPipeline})}}class Am extends ve{_parse(e){const n=this._def.innerType._parse(e);return Gd(n)&&(n.value=Object.freeze(n.value)),n}}Am.create=(t,e)=>new Am({innerType:t,typeName:le.ZodReadonly,...me(e)});const XI=(t,e={},n)=>t?uc.create().superRefine((r,o)=>{var s,i;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,l=(i=(s=a.fatal)!==null&&s!==void 0?s:n)!==null&&i!==void 0?i:!0,c=typeof a=="string"?{message:a}:a;o.addIssue({code:"custom",...c,fatal:l})}}):uc.create(),_q={object:it.lazycreate};var le;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(le||(le={}));const $q=(t,e={message:`Input not instance of ${t.name}`})=>XI(n=>n instanceof t,e),QI=Ir.create,eR=bi.create,Eq=Tm.create,Sq=vi.create,tR=Zd.create,Cq=Ca.create,Tq=$m.create,Aq=Jd.create,Nq=Yd.create,Pq=uc.create,Oq=pa.create,Iq=ns.create,Rq=Em.create,Mq=Lr.create,Dq=it.create,Lq=it.strictCreate,jq=Xd.create,Fq=s1.create,Bq=Qd.create,zq=wo.create,qq=ef.create,Wq=Sm.create,Vq=Ta.create,Uq=Hl.create,Hq=tf.create,Kq=nf.create,Gq=wi.create,Zq=rf.create,Jq=dc.create,QS=Fr.create,Yq=Qo.create,Xq=Aa.create,Qq=Fr.createWithPreprocess,eW=Gf.create,tW=()=>QI().optional(),nW=()=>eR().optional(),rW=()=>tR().optional(),oW={string:t=>Ir.create({...t,coerce:!0}),number:t=>bi.create({...t,coerce:!0}),boolean:t=>Zd.create({...t,coerce:!0}),bigint:t=>vi.create({...t,coerce:!0}),date:t=>Ca.create({...t,coerce:!0})},sW=pe;var te=Object.freeze({__proto__:null,defaultErrorMap:Kd,setErrorMap:cq,getErrorMap:xm,makeIssue:km,EMPTY_PATH:uq,addIssueToContext:Y,ParseStatus:Qt,INVALID:pe,DIRTY:ZI,OK:dn,isAborted:B0,isDirty:z0,isValid:Gd,isAsync:_m,get util(){return De},get objectUtil(){return F0},ZodParsedType:Z,getParsedType:Ms,ZodType:ve,ZodString:Ir,ZodNumber:bi,ZodBigInt:vi,ZodBoolean:Zd,ZodDate:Ca,ZodSymbol:$m,ZodUndefined:Jd,ZodNull:Yd,ZodAny:uc,ZodUnknown:pa,ZodNever:ns,ZodVoid:Em,ZodArray:Lr,ZodObject:it,ZodUnion:Xd,ZodDiscriminatedUnion:s1,ZodIntersection:Qd,ZodTuple:wo,ZodRecord:ef,ZodMap:Sm,ZodSet:Ta,ZodFunction:Hl,ZodLazy:tf,ZodLiteral:nf,ZodEnum:wi,ZodNativeEnum:rf,ZodPromise:dc,ZodEffects:Fr,ZodTransformer:Fr,ZodOptional:Qo,ZodNullable:Aa,ZodDefault:of,ZodCatch:Cm,ZodNaN:Tm,BRAND:kq,ZodBranded:YI,ZodPipeline:Gf,ZodReadonly:Am,custom:XI,Schema:ve,ZodSchema:ve,late:_q,get ZodFirstPartyTypeKind(){return le},coerce:oW,any:Pq,array:Mq,bigint:Sq,boolean:tR,date:Cq,discriminatedUnion:Fq,effect:QS,enum:Gq,function:Uq,instanceof:$q,intersection:Bq,lazy:Hq,literal:Kq,map:Wq,nan:Eq,nativeEnum:Zq,never:Iq,null:Nq,nullable:Xq,number:eR,object:Dq,oboolean:rW,onumber:nW,optional:Yq,ostring:tW,pipeline:eW,preprocess:Qq,promise:Jq,record:qq,set:Vq,strictObject:Lq,string:QI,symbol:Tq,transformer:QS,tuple:zq,undefined:Aq,union:jq,unknown:Oq,void:Rq,NEVER:sW,ZodIssueCode:V,quotelessJson:lq,ZodError:Dr});const iW=KI({storeName:"nsm-store-main",slices:[]}),qc=P.createContext(iW);function et(t){const e=v.useContext(qc);return FI(e)(t)}function sr(t){return v.useContext(qc).dispatch}function Pn(t){const e=v.useContext(qc);return[FI(e)(t),e.dispatch]}function i1(t){return v.useContext(qc)}function mk(){return v.useContext(qc)}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nR=Symbol("Comlink.proxy"),aW=Symbol("Comlink.endpoint"),lW=Symbol("Comlink.releaseProxy"),pb=Symbol("Comlink.finalizer"),Dh=Symbol("Comlink.thrown"),rR=t=>typeof t=="object"&&t!==null||typeof t=="function",cW={canHandle:t=>rR(t)&&t[nR],serialize(t){const{port1:e,port2:n}=new MessageChannel;return oR(t,e),[n,[n]]},deserialize(t){return t.start(),pW(t)}},uW={canHandle:t=>rR(t)&&Dh in t,serialize({value:t}){let e;return t instanceof Error?e={isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:e={isError:!1,value:t},[e,[]]},deserialize(t){throw t.isError?Object.assign(new Error(t.value.message),t.value):t.value}},gk=new Map([["proxy",cW],["throw",uW]]);function dW(t,e){for(const n of t)if(e===n||n==="*"||n instanceof RegExp&&n.test(e))return!0;return!1}function oR(t,e=globalThis,n=["*"]){e.addEventListener("message",function r(o){if(!o||!o.data)return;if(!dW(n,o.origin)){console.warn(`Invalid origin '${o.origin}' for comlink proxy`);return}const{id:s,type:i,path:a}=Object.assign({path:[]},o.data),l=(o.data.argumentList||[]).map(Ki);let c;try{const u=a.slice(0,-1).reduce((f,p)=>f[p],t),d=a.reduce((f,p)=>f[p],t);switch(i){case"GET":c=d;break;case"SET":u[a.slice(-1)[0]]=Ki(o.data.value),c=!0;break;case"APPLY":c=d.apply(u,l);break;case"CONSTRUCT":{const f=new d(...l);c=cR(f)}break;case"ENDPOINT":{const{port1:f,port2:p}=new MessageChannel;oR(t,p),c=lR(f,[f])}break;case"RELEASE":c=void 0;break;default:return}}catch(u){c={value:u,[Dh]:0}}Promise.resolve(c).catch(u=>({value:u,[Dh]:0})).then(u=>{const[d,f]=Om(u);e.postMessage(Object.assign(Object.assign({},d),{id:s}),f),i==="RELEASE"&&(e.removeEventListener("message",r),sR(e),pb in t&&typeof t[pb]=="function"&&t[pb]())}).catch(u=>{const[d,f]=Om({value:new TypeError("Unserializable return value"),[Dh]:0});e.postMessage(Object.assign(Object.assign({},d),{id:s}),f)})}),e.start&&e.start()}function fW(t){return t.constructor.name==="MessagePort"}function sR(t){fW(t)&&t.close()}function pW(t,e){return W0(t,[],e)}function Hp(t){if(t)throw new Error("Proxy has been released and is not useable")}function iR(t){return bl(t,{type:"RELEASE"}).then(()=>{sR(t)})}const Nm=new WeakMap,Pm="FinalizationRegistry"in globalThis&&new FinalizationRegistry(t=>{const e=(Nm.get(t)||0)-1;Nm.set(t,e),e===0&&iR(t)});function hW(t,e){const n=(Nm.get(e)||0)+1;Nm.set(e,n),Pm&&Pm.register(t,e,t)}function mW(t){Pm&&Pm.unregister(t)}function W0(t,e=[],n=function(){}){let r=!1;const o=new Proxy(n,{get(s,i){if(Hp(r),i===lW)return()=>{mW(o),iR(t),r=!0};if(i==="then"){if(e.length===0)return{then:()=>o};const a=bl(t,{type:"GET",path:e.map(l=>l.toString())}).then(Ki);return a.then.bind(a)}return W0(t,[...e,i])},set(s,i,a){Hp(r);const[l,c]=Om(a);return bl(t,{type:"SET",path:[...e,i].map(u=>u.toString()),value:l},c).then(Ki)},apply(s,i,a){Hp(r);const l=e[e.length-1];if(l===aW)return bl(t,{type:"ENDPOINT"}).then(Ki);if(l==="bind")return W0(t,e.slice(0,-1));const[c,u]=eC(a);return bl(t,{type:"APPLY",path:e.map(d=>d.toString()),argumentList:c},u).then(Ki)},construct(s,i){Hp(r);const[a,l]=eC(i);return bl(t,{type:"CONSTRUCT",path:e.map(c=>c.toString()),argumentList:a},l).then(Ki)}});return hW(o,t),o}function gW(t){return Array.prototype.concat.apply([],t)}function eC(t){const e=t.map(Om);return[e.map(n=>n[0]),gW(e.map(n=>n[1]))]}const aR=new WeakMap;function lR(t,e){return aR.set(t,e),t}function cR(t){return Object.assign(t,{[nR]:!0})}function Om(t){for(const[e,n]of gk)if(n.canHandle(t)){const[r,o]=n.serialize(t);return[{type:"HANDLER",name:e,value:r},o]}return[{type:"RAW",value:t},aR.get(t)||[]]}function Ki(t){switch(t.type){case"HANDLER":return gk.get(t.name).deserialize(t.value);case"RAW":return t.value}}function bl(t,e,n){return new Promise(r=>{const o=yW();t.addEventListener("message",function s(i){!i.data||!i.data.id||i.data.id!==o||(t.removeEventListener("message",s),r(i.data))}),t.start&&t.start(),t.postMessage(Object.assign({id:o},e),n)})}function yW(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}const sf="dialog::@bangle.io/core-extension:new-note-modal",Im="dialog::@bangle.io/core-extension:rename-note-modal",af="dialog::@bangle.io/core-extension:changelog-modal",V0="dialog::@bangle.io/core-extension:new-workspace-dialog",yk="dialog::@bangle.io/core-extension:NEW_NATIVE_FS_DIALOG_NAME",bk="dialog::@bangle.io/core-extension:NEW_PRIVATE_FS_WORKSPACE_DIALOG_NAME",vk="dialog::@bangle.io/core-extension:NEW_BROWSER_WORKSPACE_DIALOG_NAME",Rm="dialog::@bangle.io/core-extension:reload-application-dialog",a1="dialog::@bangle.io/core-extension:generic_error_modal_name",lf="operation::@bangle.io/core-extension:CREATE_NATIVE_FS_WORKSPACE",cf="operation::@bangle.io/core-extension:CREATE_BROWSER_WORKSPACE",uf="operation::@bangle.io/core-extension:CREATE_PRIVATE_FS_WORKSPACE",dd="operation::@bangle.io/core-extension:SERVICE_WORKER_RELOAD",wk="operation::@bangle.io/core-extension:SERVICE_WORKER_DISMISS_UPDATE",fc="operation::@bangle.io/core-extension:CORE_OPERATIONS_OPEN_GITHUB_ISSUE",Mm="operation::@bangle.io/core-extension:REMOVE_ACTIVE_WORKSPACE",pc="operation::@bangle.io/core-extension:NEW_NOTE",Na="operation::@bangle.io/core-extension:NEW_WORKSPACE",Dm="operation::@bangle.io/core-extension:TOGGLE_EDITOR_SPLIT",U0="operation::@bangle.io/core-extension:OPEN_IN_MINI_EDITOR",H0="operation::@bangle.io/core-extension:CLOSE_MINI_EDITOR",Lm="operation::@bangle.io/core-extension:CLOSE_EDITOR",jm="operation::@bangle.io/core-palettes:TOGGLE_OPERATION_PALETTE",Fm="operation::@bangle.io/core-palettes:TOGGLE_WORKSPACE_PALETTE",Bm="operation::@bangle.io/core-palettes:TOGGLE_NOTES_PALETTE";var Lt=(t=>(t.Heading="bangle-io-core-palettes/heading",t.Workspace="bangle-io-core-palettes/workspace",t.Question="bangle-io-core-palettes/question",t.Operation="bangle-io-core-palettes/operation",t.Notes="bangle-io-core-palettes/notes",t))(Lt||{});const Rr=4,jn=0,ri=1,fd=2,pd=3;var xi=(t=>(t.Page="PAGE",t.Floating="Floating",t))(xi||{});const Br="bangle-help",uR="getting started.md",Gi=`${Br}:${uR}`,dR=`/ws/${Br}`,K0=bm(te.object({wsPath:te.string(),pendingWrite:te.boolean(),sha:te.union([te.string(),te.undefined()]),currentDiskSha:te.union([te.string(),te.undefined()]),lastKnownDiskSha:te.union([te.string(),te.undefined()]),currentDiskShaTimestamp:te.union([te.number(),te.undefined()])})),bW={state:bm(te.object({wsName:te.string().optional(),openedFilesSha:te.record(K0)})),updateFileShaEntry:bm(te.object({wsPath:te.string(),info:K0.partial()}))},hd="operation::@bangle.io/search-notes:execute-search",vW="main-store",wW="worker-naukar-store",Ue={CAUTION:"caution",CRITICAL:"critical",NEUTRAL:"neutral",SECONDARY:"secondary",POSITIVE:"positive",PROMOTE:"promote"},J={INFO:"info",WARNING:"warning",ERROR:"error",SUCCESS:"success"},go={LIGHT:"light",DARK:"dark"},fR=te.nativeEnum(go),pR={EMPTY_WORKSPACE_NEEDED:"EMPTY_WORKSPACE_NEEDED",EMPTY_WORKSPACE:"EMPTY_WORKSPACE"};var Je=(t=>(t.Help="helpfs",t.NativeFS="nativefs",t.Browser="browser",t.PrivateFS="privatefs",t.Github="github-storage",t))(Je||{});const Lh="storage-on-change-emitter",hR=2e3,xW=Object.freeze(Object.defineProperty({__proto__:null,BANGLE_HOME_PATH:dR,CHANGELOG_MODAL_NAME:af,COLOR_SCHEMA:go,CORE_OPERATIONS_CLOSE_EDITOR:Lm,CORE_OPERATIONS_CLOSE_MINI_EDITOR:H0,CORE_OPERATIONS_CREATE_BROWSER_WORKSPACE:cf,CORE_OPERATIONS_CREATE_NATIVE_FS_WORKSPACE:lf,CORE_OPERATIONS_CREATE_PRIVATE_FS_WORKSPACE:uf,CORE_OPERATIONS_NEW_NOTE:pc,CORE_OPERATIONS_NEW_WORKSPACE:Na,CORE_OPERATIONS_OPEN_GITHUB_ISSUE:fc,CORE_OPERATIONS_OPEN_IN_MINI_EDITOR:U0,CORE_OPERATIONS_REMOVE_ACTIVE_WORKSPACE:Mm,CORE_OPERATIONS_SERVICE_WORKER_DISMISS_UPDATE:wk,CORE_OPERATIONS_SERVICE_WORKER_RELOAD:dd,CORE_OPERATIONS_TOGGLE_EDITOR_SPLIT:Dm,CORE_PALETTES_TOGGLE_NOTES_PALETTE:Bm,CORE_PALETTES_TOGGLE_OPERATION_PALETTE:jm,CORE_PALETTES_TOGGLE_WORKSPACE_PALETTE:Fm,CorePalette:Lt,DISK_SHA_CHECK_INTERVAL:hR,EXECUTE_SEARCH_OPERATION:hd,EditorDisplayType:xi,GENERIC_ERROR_MODAL_NAME:a1,HELP_FS_INDEX_FILE_NAME:uR,HELP_FS_INDEX_WS_PATH:Gi,HELP_FS_WORKSPACE_NAME:Br,MAIN_STORE_NAME:vW,MAX_OPEN_EDITORS:Rr,MINI_EDITOR_INDEX:fd,NEW_BROWSER_WORKSPACE_DIALOG_NAME:vk,NEW_NATIVE_FS_WORKSPACE_DIALOG_NAME:yk,NEW_NOTE_DIALOG_NAME:sf,NEW_PRIVATE_FS_WORKSPACE_DIALOG_NAME:bk,NEW_WORKSPACE_DIALOG_NAME:V0,POPUP_EDITOR_INDEX:pd,PRIMARY_EDITOR_INDEX:jn,RELOAD_APPLICATION_DIALOG_NAME:Rm,RENAME_NOTE_DIALOG_NAME:Im,SECONDARY_EDITOR_INDEX:ri,SEVERITY:J,STORAGE_ON_CHANGE_EMITTER_KEY:Lh,TONE:Ue,WORKER_STORE_NAME:wW,WorkerErrorCode:pR,WorkspaceType:Je,colorSchema:fR,naukarReplicaWorkspaceSchema:bW,openedFileSchema:K0},Symbol.toStringTag,{value:"Module"}));function Pt(t){this.content=t}Pt.prototype={constructor:Pt,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,o=r.find(t),s=r.content.slice();return o==-1?s.push(n||t,e):(s[o+1]=e,n&&(s[o]=n)),new Pt(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Pt(n)},addToStart:function(t,e){return new Pt([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Pt(n)},addBefore:function(t,e,n){var r=this.remove(e),o=r.content.slice(),s=r.find(t);return o.splice(s==-1?o.length:s,0,e,n),new Pt(o)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Pt.from(t),t.size?new Pt(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Pt.from(t),t.size?new Pt(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Pt.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Pt.from=function(t){if(t instanceof Pt)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Pt(e)};function mR(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let o=t.child(r),s=e.child(r);if(o==s){n+=o.nodeSize;continue}if(!o.sameMarkup(s))return n;if(o.isText&&o.text!=s.text){for(let i=0;o.text[i]==s.text[i];i++)n++;return n}if(o.content.size||s.content.size){let i=mR(o.content,s.content,n+1);if(i!=null)return i}n+=o.nodeSize}}function gR(t,e,n,r){for(let o=t.childCount,s=e.childCount;;){if(o==0||s==0)return o==s?null:{a:n,b:r};let i=t.child(--o),a=e.child(--s),l=i.nodeSize;if(i==a){n-=l,r-=l;continue}if(!i.sameMarkup(a))return{a:n,b:r};if(i.isText&&i.text!=a.text){let c=0,u=Math.min(i.text.length,a.text.length);for(;c<u&&i.text[i.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(i.content.size||a.content.size){let c=gR(i.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class L{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,o=0,s){for(let i=0,a=0;a<n;i++){let l=this.content[i],c=a+l.nodeSize;if(c>e&&r(l,o+a,s||null,i)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,n-u),r,o+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,o){let s="",i=!0;return this.nodesBetween(e,n,(a,l)=>{a.isText?(s+=a.text.slice(Math.max(e,l)-l,n-l),i=!r):a.isLeaf?(o?s+=typeof o=="function"?o(a):o:a.type.spec.leafText&&(s+=a.type.spec.leafText(a)),i=!r):!i&&a.isBlock&&(s+=r,i=!0)},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,o=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(o[o.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)o.push(e.content[s]);return new L(o,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],o=0;if(n>e)for(let s=0,i=0;i<n;s++){let a=this.content[s],l=i+a.nodeSize;l>e&&((i<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-i),Math.min(a.text.length,n-i)):a=a.cut(Math.max(0,e-i-1),Math.min(a.content.size,n-i-1))),r.push(a),o+=a.nodeSize),i=l}return new L(r,o)}cutByIndex(e,n){return e==n?L.empty:e==0&&n==this.content.length?this:new L(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let o=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return o[e]=n,new L(o,s)}addToStart(e){return new L([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new L(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let o=this.content[n];e(o,r,n),r+=o.nodeSize}}findDiffStart(e,n=0){return mR(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return gR(this,e,n,r)}findIndex(e,n=-1){if(e==0)return Kp(0,e);if(e==this.size)return Kp(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,o=0;;r++){let s=this.child(r),i=o+s.nodeSize;if(i>=e)return i==e||n>0?Kp(r+1,i):Kp(r,o);o=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return L.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new L(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return L.empty;let n,r=0;for(let o=0;o<e.length;o++){let s=e[o];r+=s.nodeSize,o&&s.isText&&e[o-1].sameMarkup(s)?(n||(n=e.slice(0,o)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new L(n||e,r)}static from(e){if(!e)return L.empty;if(e instanceof L)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new L([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}L.empty=new L([],0);const hb={index:0,offset:0};function Kp(t,e){return hb.index=t,hb.offset=e,hb}function zm(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!zm(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!zm(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}class Ne{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let o=0;o<e.length;o++){let s=e[o];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,o));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,o)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&zm(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);return r.create(n.attrs)}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Ne.none;if(e instanceof Ne)return[e];let n=e.slice();return n.sort((r,o)=>r.type.rank-o.type.rank),n}}Ne.none=[];class qm extends Error{}let H=class vl{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=bR(this.content,e+this.openStart,n);return r&&new vl(r,this.openStart,this.openEnd)}removeBetween(e,n){return new vl(yR(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return vl.empty;let r=n.openStart||0,o=n.openEnd||0;if(typeof r!="number"||typeof o!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new vl(L.fromJSON(e,n.content),r,o)}static maxOpen(e,n=!0){let r=0,o=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)o++;return new vl(e,r,o)}};H.empty=new H(L.empty,0,0);function yR(t,e,n){let{index:r,offset:o}=t.findIndex(e),s=t.maybeChild(r),{index:i,offset:a}=t.findIndex(n);if(o==e||s.isText){if(a!=n&&!t.child(i).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=i)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(yR(s.content,e-o-1,n-o-1)))}function bR(t,e,n,r){let{index:o,offset:s}=t.findIndex(e),i=t.maybeChild(o);if(s==e||i.isText)return r&&!r.canReplace(o,o,n)?null:t.cut(0,e).append(n).append(t.cut(e));let a=bR(i.content,e-s-1,n);return a&&t.replaceChild(o,i.copy(a))}function kW(t,e,n){if(n.openStart>t.depth)throw new qm("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new qm("Inconsistent open depths");return vR(t,e,n,0)}function vR(t,e,n,r){let o=t.index(r),s=t.node(r);if(o==e.index(r)&&r<t.depth-n.openStart){let i=vR(t,e,n,r+1);return s.copy(s.content.replaceChild(o,i))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let i=t.parent,a=i.content;return ma(i,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:i,end:a}=_W(n,t);return ma(s,xR(t,i,a,e,r))}else return ma(s,Wm(t,e,r))}function wR(t,e){if(!e.type.compatibleContent(t.type))throw new qm("Cannot join "+e.type.name+" onto "+t.type.name)}function G0(t,e,n){let r=t.node(n);return wR(r,e.node(n)),r}function ha(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function md(t,e,n,r){let o=(e||t).node(n),s=0,i=e?e.index(n):o.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(ha(t.nodeAfter,r),s++));for(let a=s;a<i;a++)ha(o.child(a),r);e&&e.depth==n&&e.textOffset&&ha(e.nodeBefore,r)}function ma(t,e){return t.type.checkContent(e),t.copy(e)}function xR(t,e,n,r,o){let s=t.depth>o&&G0(t,e,o+1),i=r.depth>o&&G0(n,r,o+1),a=[];return md(null,t,o,a),s&&i&&e.index(o)==n.index(o)?(wR(s,i),ha(ma(s,xR(t,e,n,r,o+1)),a)):(s&&ha(ma(s,Wm(t,e,o+1)),a),md(e,n,o,a),i&&ha(ma(i,Wm(n,r,o+1)),a)),md(r,null,o,a),new L(a)}function Wm(t,e,n){let r=[];if(md(null,t,n,r),t.depth>n){let o=G0(t,e,n+1);ha(ma(o,Wm(t,e,n+1)),r)}return md(e,null,n,r),new L(r)}function _W(t,e){let n=e.depth-t.openStart,o=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)o=e.node(s).copy(L.from(o));return{start:o.resolveNoCache(t.openStart+n),end:o.resolveNoCache(o.content.size-t.openEnd-n)}}class df{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],o=e.child(n);return r?e.child(n).cut(r):o}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],o=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)o+=r.child(s).nodeSize;return o}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return Ne.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),o=e.maybeChild(n);if(!r){let a=r;r=o,o=a}let s=r.marks;for(var i=0;i<s.length;i++)s[i].type.spec.inclusive===!1&&(!o||!s[i].isInSet(o.marks))&&(s=s[i--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,o=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!o||!r[s].isInSet(o.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new ff(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],o=0,s=n;for(let i=e;;){let{index:a,offset:l}=i.content.findIndex(s),c=s-l;if(r.push(i,a,o+l),!c||(i=i.child(a),i.isText))break;s=c-1,o+=l+1}return new df(n,r,s)}static resolveCached(e,n){for(let o=0;o<mb.length;o++){let s=mb[o];if(s.pos==n&&s.doc==e)return s}let r=mb[gb]=df.resolve(e,n);return gb=(gb+1)%$W,r}}let mb=[],gb=0,$W=12;class ff{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const EW=Object.create(null);let Cn=class Z0{constructor(e,n,r,o=Ne.none){this.type=e,this.attrs=n,this.marks=o,this.content=r||L.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,o=0){this.content.nodesBetween(e,n,r,o,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,o){return this.content.textBetween(e,n,r,o)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&zm(this.attrs,n||e.defaultAttrs||EW)&&Ne.sameSet(this.marks,r||Ne.none)}copy(e=null){return e==this.content?this:new Z0(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Z0(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return H.empty;let o=this.resolve(e),s=this.resolve(n),i=r?0:o.sharedDepth(n),a=o.start(i),c=o.node(i).content.cut(o.pos-a,s.pos-a);return new H(c,o.depth-i,s.depth-i)}replace(e,n,r){return kW(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:o}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(o==e||n.isText)return n;e-=o+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}}resolve(e){return df.resolveCached(this,e)}resolveNoCache(e){return df.resolve(this,e)}rangeHasMark(e,n,r){let o=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(o=!0),!o)),o}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),kR(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=L.empty,o=0,s=r.childCount){let i=this.contentMatchAt(e).matchFragment(r,o,s),a=i&&i.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=o;l<s;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,o){if(o&&!this.type.allowsMarks(o))return!1;let s=this.contentMatchAt(e).matchType(r),i=s&&s.matchFragment(this.content,n);return i?i.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content);let e=Ne.none;for(let n=0;n<this.marks.length;n++)e=this.marks[n].addToSet(e);if(!Ne.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r=null;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let o=L.fromJSON(e,n.content);return e.nodeType(n.type).create(n.attrs,o,r)}};Cn.prototype.text=void 0;class Vm extends Cn{constructor(e,n,r,o){if(super(e,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):kR(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Vm(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Vm(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function kR(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class Pa{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new SW(e,n);if(r.next==null)return Pa.empty;let o=_R(r);r.next&&r.err("Unexpected trailing text");let s=IW(OW(o));return RW(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let o=this;for(let s=n;o&&s<r;s++)o=o.matchType(e.child(s).type);return o}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let o=[this];function s(i,a){let l=i.matchFragment(e,r);if(l&&(!n||l.validEnd))return L.from(a.map(c=>c.createAndFill()));for(let c=0;c<i.next.length;c++){let{type:u,next:d}=i.next[c];if(!(u.isText||u.hasRequiredAttrs())&&o.indexOf(d)==-1){o.push(d);let f=s(d,a.concat(u));if(f)return f}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let o=r.shift(),s=o.match;if(s.matchType(e)){let i=[];for(let a=o;a.type;a=a.via)i.push(a.type);return i.reverse()}for(let i=0;i<s.next.length;i++){let{type:a,next:l}=s.next[i];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!o.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:o}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let o=0;o<r.next.length;o++)e.indexOf(r.next[o].next)==-1&&n(r.next[o].next)}return n(this),e.map((r,o)=>{let s=o+(r.validEnd?"*":" ")+" ";for(let i=0;i<r.next.length;i++)s+=(i?", ":"")+r.next[i].type.name+"->"+e.indexOf(r.next[i].next);return s}).join(`
`)}}Pa.empty=new Pa(!0);class SW{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function _R(t){let e=[];do e.push(CW(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function CW(t){let e=[];do e.push(TW(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function TW(t){let e=PW(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=AW(t,e);else break;return e}function tC(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function AW(t,e){let n=tC(t),r=n;return t.eat(",")&&(t.next!="}"?r=tC(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function NW(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let o=[];for(let s in n){let i=n[s];i.groups.indexOf(e)>-1&&o.push(i)}return o.length==0&&t.err("No node type or group '"+e+"' found"),o}function PW(t){if(t.eat("(")){let e=_R(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=NW(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function OW(t){let e=[[]];return o(s(t,0),n()),e;function n(){return e.push([])-1}function r(i,a,l){let c={term:l,to:a};return e[i].push(c),c}function o(i,a){i.forEach(l=>l.to=a)}function s(i,a){if(i.type=="choice")return i.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(i.type=="seq")for(let l=0;;l++){let c=s(i.exprs[l],a);if(l==i.exprs.length-1)return c;o(c,a=n())}else if(i.type=="star"){let l=n();return r(a,l),o(s(i.expr,l),l),[r(l)]}else if(i.type=="plus"){let l=n();return o(s(i.expr,a),l),o(s(i.expr,l),l),[r(l)]}else{if(i.type=="opt")return[r(a)].concat(s(i.expr,a));if(i.type=="range"){let l=a;for(let c=0;c<i.min;c++){let u=n();o(s(i.expr,l),u),l=u}if(i.max==-1)o(s(i.expr,l),l);else for(let c=i.min;c<i.max;c++){let u=n();r(l,u),o(s(i.expr,l),u),l=u}return[r(l)]}else{if(i.type=="name")return[r(a,void 0,i.value)];throw new Error("Unknown expr type")}}}}function $R(t,e){return e-t}function nC(t,e){let n=[];return r(e),n.sort($R);function r(o){let s=t[o];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(o);for(let i=0;i<s.length;i++){let{term:a,to:l}=s[i];!a&&n.indexOf(l)==-1&&r(l)}}}function IW(t){let e=Object.create(null);return n(nC(t,0));function n(r){let o=[];r.forEach(i=>{t[i].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<o.length;u++)o[u][0]==a&&(c=o[u][1]);nC(t,l).forEach(u=>{c||o.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let s=e[r.join(",")]=new Pa(r.indexOf(t.length-1)>-1);for(let i=0;i<o.length;i++){let a=o[i][1].sort($R);s.next.push({type:o[i][0],next:e[a.join(",")]||n(a)})}return s}}function RW(t,e){for(let n=0,r=[t];n<r.length;n++){let o=r[n],s=!o.validEnd,i=[];for(let a=0;a<o.next.length;a++){let{type:l,next:c}=o.next[a];i.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),r.indexOf(c)==-1&&r.push(c)}s&&e.err("Only non-generatable nodes ("+i.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function ER(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function SR(t,e){let n=Object.create(null);for(let r in t){let o=e&&e[r];if(o===void 0){let s=t[r];if(s.hasDefault)o=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=o}return n}function CR(t){let e=Object.create(null);if(t)for(let n in t)e[n]=new MW(t[n]);return e}let rC=class TR{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=CR(r.attrs),this.defaultAttrs=ER(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Pa.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:SR(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Cn(this,this.computeAttrs(e),L.from(n),Ne.setFrom(r))}createChecked(e=null,n,r){return n=L.from(n),this.checkContent(n),new Cn(this,this.computeAttrs(e),n,Ne.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=L.from(n),n.size){let i=this.contentMatch.fillBefore(n);if(!i)return null;n=i.append(n)}let o=this.contentMatch.matchFragment(n),s=o&&o.fillBefore(L.empty,!0);return s?new Cn(this,e,n.append(s),Ne.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:Ne.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,i)=>r[s]=new TR(s,n,i));let o=n.spec.topNode||"doc";if(!r[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};class MW{constructor(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}get isRequired(){return!this.hasDefault}}class l1{constructor(e,n,r,o){this.name=e,this.rank=n,this.schema=r,this.spec=o,this.attrs=CR(o.attrs),this.excluded=null;let s=ER(this.attrs);this.instance=s?new Ne(this,s):null}create(e=null){return!e&&this.instance?this.instance:new Ne(this,SR(this.attrs,e))}static compile(e,n){let r=Object.create(null),o=0;return e.forEach((s,i)=>r[s]=new l1(s,o++,n,i)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}excludes(e){return this.excluded.indexOf(e)>-1}}class AR{constructor(e){this.cached=Object.create(null);let n=this.spec={};for(let o in e)n[o]=e[o];n.nodes=Pt.from(e.nodes),n.marks=Pt.from(e.marks||{}),this.nodes=rC.compile(this.spec.nodes,this),this.marks=l1.compile(this.spec.marks,this);let r=Object.create(null);for(let o in this.nodes){if(o in this.marks)throw new RangeError(o+" can not be both a node and a mark");let s=this.nodes[o],i=s.spec.content||"",a=s.spec.marks;s.contentMatch=r[i]||(r[i]=Pa.parse(i,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.markSet=a=="_"?null:a?oC(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let o in this.marks){let s=this.marks[o],i=s.spec.excludes;s.excluded=i==null?[s]:i==""?[]:oC(this,i.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,o){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof rC){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,o)}text(e,n){let r=this.nodes.text;return new Vm(r,r.defaultAttrs,e,Ne.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return Cn.fromJSON(this,e)}markFromJSON(e){return Ne.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function oC(t,e){let n=[];for(let r=0;r<e.length;r++){let o=e[r],s=t.marks[o],i=s;if(s)n.push(s);else for(let a in t.marks){let l=t.marks[a];(o=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(o)>-1)&&n.push(i=l)}if(!i)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}class hc{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[],n.forEach(r=>{r.tag?this.tags.push(r):r.style&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let o=e.nodes[r.node];return o.contentMatch.matchType(o)})}parse(e,n={}){let r=new iC(this,n,!1);return r.addAll(e,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new iC(this,n,!0);return r.addAll(e,n.from,n.to),H.maxOpen(r.finish())}matchTag(e,n,r){for(let o=r?this.tags.indexOf(r)+1:0;o<this.tags.length;o++){let s=this.tags[o];if(jW(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let i=s.getAttrs(e);if(i===!1)continue;s.attrs=i||void 0}return s}}}matchStyle(e,n,r,o){for(let s=o?this.styles.indexOf(o)+1:0;s<this.styles.length;s++){let i=this.styles[s],a=i.style;if(!(a.indexOf(e)!=0||i.context&&!r.matchesContext(i.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(i.getAttrs){let l=i.getAttrs(n);if(l===!1)continue;i.attrs=l||void 0}return i}}}static schemaRules(e){let n=[];function r(o){let s=o.priority==null?50:o.priority,i=0;for(;i<n.length;i++){let a=n[i];if((a.priority==null?50:a.priority)<s)break}n.splice(i,0,o)}for(let o in e.marks){let s=e.marks[o].spec.parseDOM;s&&s.forEach(i=>{r(i=aC(i)),i.mark||i.ignore||i.clearMark||(i.mark=o)})}for(let o in e.nodes){let s=e.nodes[o].spec.parseDOM;s&&s.forEach(i=>{r(i=aC(i)),i.node||i.ignore||i.mark||(i.node=o)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new hc(e,hc.schemaRules(e)))}}const NR={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},DW={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},PR={ol:!0,ul:!0},Um=1,Hm=2,gd=4;function sC(t,e,n){return e!=null?(e?Um:0)|(e==="full"?Hm:0):t&&t.whitespace=="pre"?Um|Hm:n&~gd}class Gp{constructor(e,n,r,o,s,i,a){this.type=e,this.attrs=n,this.marks=r,this.pendingMarks=o,this.solid=s,this.options=a,this.content=[],this.activeMarks=Ne.none,this.stashMarks=[],this.match=i||(a&gd?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(L.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,o;return(o=r.findWrapping(e.type))?(this.match=r,o):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Um)){let r=this.content[this.content.length-1],o;if(r&&r.isText&&(o=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==o[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-o[0].length))}}let n=L.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(L.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}popFromStashMark(e){for(let n=this.stashMarks.length-1;n>=0;n--)if(e.eq(this.stashMarks[n]))return this.stashMarks.splice(n,1)[0]}applyPending(e){for(let n=0,r=this.pendingMarks;n<r.length;n++){let o=r[n];(this.type?this.type.allowsMarkType(o.type):BW(o.type,e))&&!o.isInSet(this.activeMarks)&&(this.activeMarks=o.addToSet(this.activeMarks),this.pendingMarks=o.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!NR.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class iC{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0;let o=n.topNode,s,i=sC(null,n.preserveWhitespace,0)|(r?gd:0);o?s=new Gp(o.type,o.attrs,Ne.none,Ne.none,!0,n.topMatch||o.type.contentMatch,i):r?s=new Gp(null,null,Ne.none,Ne.none,!0,null,i):s=new Gp(e.schema.topNodeType,null,Ne.none,Ne.none,!0,null,i),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,n){let r=e.getAttribute("style");if(!r)return n();let o=this.readStyles(FW(r));if(!o)return;let[s,i]=o,a=this.top;for(let l=0;l<i.length;l++)this.removePendingMark(i[l],a);for(let l=0;l<s.length;l++)this.addPendingMark(s[l]);n();for(let l=0;l<s.length;l++)this.removePendingMark(s[l],a);for(let l=0;l<i.length;l++)this.addPendingMark(i[l])}addTextNode(e){let n=e.nodeValue,r=this.top;if(r.options&Hm||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(r.options&Um)r.options&Hm?n=n.replace(/\r\n?/g,`
`):n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let o=r.content[r.content.length-1],s=e.previousSibling;(!o||s&&s.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n)),this.findInText(e)}else this.findInside(e)}addElement(e,n){let r=e.nodeName.toLowerCase(),o;PR.hasOwnProperty(r)&&this.parser.normalizeLists&&LW(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(o=this.parser.matchTag(e,this,n));if(s?s.ignore:DW.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let i,a=this.top,l=this.needsBlock;if(NR.hasOwnProperty(r))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),i=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}s&&s.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),i&&this.sync(a),this.needsBlock=l}else this.withStyleRules(e,()=>{this.addElementByRule(e,s,s.consuming===!1?o:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let n=Ne.none,r=Ne.none;for(let o=0;o<e.length;o+=2)for(let s=void 0;;){let i=this.parser.matchStyle(e[o],e[o+1],this,s);if(!i)break;if(i.ignore)return null;if(i.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(a=>{i.clearMark(a)&&(r=a.addToSet(r))}):n=this.parser.schema.marks[i.mark].create(i.attrs).addToSet(n),i.consuming===!1)s=i;else break}return[n,r]}addElementByRule(e,n,r){let o,s,i;n.node?(s=this.parser.schema.nodes[n.node],s.isLeaf?this.insertNode(s.create(n.attrs))||this.leafFallback(e):o=this.enter(s,n.attrs||null,n.preserveWhitespace)):(i=this.parser.schema.marks[n.mark].create(n.attrs),this.addPendingMark(i));let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l)}o&&this.sync(a)&&this.open--,i&&this.removePendingMark(i,a)}addAll(e,n,r){let o=n||0;for(let s=n?e.childNodes[n]:e.firstChild,i=r==null?null:e.childNodes[r];s!=i;s=s.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(s);this.findAtPoint(e,o)}findPlace(e){let n,r;for(let o=this.open;o>=0;o--){let s=this.nodes[o],i=s.findWrapping(e);if(i&&(!n||n.length>i.length)&&(n=i,r=s,!i.length)||s.solid)break}if(!n)return!1;this.sync(r);for(let o=0;o<n.length;o++)this.enterInner(n[o],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let n=this.textblockFromContext();n&&this.enterInner(n)}if(this.findPlace(e)){this.closeExtra();let n=this.top;n.applyPending(e.type),n.match&&(n.match=n.match.matchType(e.type));let r=n.activeMarks;for(let o=0;o<e.marks.length;o++)(!n.type||n.type.allowsMarkType(e.marks[o].type))&&(r=e.marks[o].addToSet(r));return n.content.push(e.mark(r)),!0}return!1}enter(e,n,r){let o=this.findPlace(e.create(n));return o&&this.enterInner(e,n,!0,r),o}enterInner(e,n=null,r=!1,o){this.closeExtra();let s=this.top;s.applyPending(e),s.match=s.match&&s.match.matchType(e);let i=sC(e,o,s.options);s.options&gd&&s.content.length==0&&(i|=gd),this.nodes.push(new Gp(e,n,s.activeMarks,s.pendingMarks,r,null,i)),this.open++}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let n=this.open;n>=0;n--)if(this.nodes[n]==e)return this.open=n,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let o=r.length-1;o>=0;o--)e+=r[o].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let o=0;o<this.find.length;o++)this.find[o].pos==null&&e.nodeType==1&&e.contains(this.find[o].node)&&n.compareDocumentPosition(this.find[o].node)&(r?2:4)&&(this.find[o].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(o?0:1),i=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=s;l--)if(i(a-1,l))return!0;return!1}else{let u=l>0||l==0&&o?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!u||u.name!=c&&u.groups.indexOf(c)==-1)return!1;l--}}return!0};return i(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let n=zW(e,this.top.pendingMarks);n&&this.top.stashMarks.push(n),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,n){for(let r=this.open;r>=0;r--){let o=this.nodes[r];if(o.pendingMarks.lastIndexOf(e)>-1)o.pendingMarks=e.removeFromSet(o.pendingMarks);else{o.activeMarks=e.removeFromSet(o.activeMarks);let i=o.popFromStashMark(e);i&&o.type&&o.type.allowsMarkType(i.type)&&(o.activeMarks=i.addToSet(o.activeMarks))}if(o==n)break}}}function LW(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&PR.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function jW(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function FW(t){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,n,r=[];for(;n=e.exec(t);)r.push(n[1],n[2].trim());return r}function aC(t){let e={};for(let n in t)e[n]=t[n];return e}function BW(t,e){let n=e.schema.nodes;for(let r in n){let o=n[r];if(!o.allowsMarkType(t))continue;let s=[],i=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&i(u))return!0}};if(i(o.contentMatch))return!0}}function zW(t,e){for(let n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}class $n{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=yb(n).createDocumentFragment());let o=r,s=[];return e.forEach(i=>{if(s.length||i.marks.length){let a=0,l=0;for(;a<s.length&&l<i.marks.length;){let c=i.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)o=s.pop()[1];for(;l<i.marks.length;){let c=i.marks[l++],u=this.serializeMark(c,i.isInline,n);u&&(s.push([c,o]),o.appendChild(u.dom),o=u.contentDOM||u.dom)}}o.appendChild(this.serializeNodeInner(i,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:o}=$n.renderSpec(yb(n),this.nodes[e.type.name](e));if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,o)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let o=e.marks.length-1;o>=0;o--){let s=this.serializeMark(e.marks[o],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let o=this.marks[e.type.name];return o&&$n.renderSpec(yb(r),o(e,n))}static renderSpec(e,n,r=null){if(typeof n=="string")return{dom:e.createTextNode(n)};if(n.nodeType!=null)return{dom:n};if(n.dom&&n.dom.nodeType!=null)return n;let o=n[0],s=o.indexOf(" ");s>0&&(r=o.slice(0,s),o=o.slice(s+1));let i,a=r?e.createElementNS(r,o):e.createElement(o),l=n[1],c=1;if(l&&typeof l=="object"&&l.nodeType==null&&!Array.isArray(l)){c=2;for(let u in l)if(l[u]!=null){let d=u.indexOf(" ");d>0?a.setAttributeNS(u.slice(0,d),u.slice(d+1),l[u]):a.setAttribute(u,l[u])}}for(let u=c;u<n.length;u++){let d=n[u];if(d===0){if(u<n.length-1||u>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:f,contentDOM:p}=$n.renderSpec(e,d,r);if(a.appendChild(f),p){if(i)throw new RangeError("Multiple content holes");i=p}}}return{dom:a,contentDOM:i}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new $n(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=lC(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return lC(e.marks)}}function lC(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function yb(t){return t.document||window.document}const OR=65535,IR=Math.pow(2,16);function qW(t,e){return t+e*IR}function cC(t){return t&OR}function WW(t){return(t-(t&OR))/IR}const RR=1,MR=2,jh=4,DR=8;class J0{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&DR)>0}get deletedBefore(){return(this.delInfo&(RR|jh))>0}get deletedAfter(){return(this.delInfo&(MR|jh))>0}get deletedAcross(){return(this.delInfo&jh)>0}}class Dn{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&Dn.empty)return Dn.empty}recover(e){let n=0,r=cC(e);if(!this.inverted)for(let o=0;o<r;o++)n+=this.ranges[o*3+2]-this.ranges[o*3+1];return this.ranges[r*3]+n+WW(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let o=0,s=this.inverted?2:1,i=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?o:0);if(l>e)break;let c=this.ranges[a+s],u=this.ranges[a+i],d=l+c;if(e<=d){let f=c?e==l?-1:e==d?1:n:n,p=l+o+(f<0?0:u);if(r)return p;let h=e==(n<0?l:d)?null:qW(a/3,e-l),y=e==l?MR:e==d?RR:jh;return(n<0?e!=l:e!=d)&&(y|=DR),new J0(p,y,h)}o+=u-c}return r?e+o:new J0(e+o,0,null)}touches(e,n){let r=0,o=cC(n),s=this.inverted?2:1,i=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+s],u=l+c;if(e<=u&&a==o*3)return!0;r+=this.ranges[a+i]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let o=0,s=0;o<this.ranges.length;o+=3){let i=this.ranges[o],a=i-(this.inverted?s:0),l=i+(this.inverted?0:s),c=this.ranges[o+n],u=this.ranges[o+r];e(a,a+c,l,l+u),s+=u-c}}invert(){return new Dn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Dn.empty:new Dn(e<0?[0,-e,0]:[0,0,e])}}Dn.empty=new Dn([]);class Kl{constructor(e=[],n,r=0,o=e.length){this.maps=e,this.mirror=n,this.from=r,this.to=o}slice(e=0,n=this.maps.length){return new Kl(this.maps,this.mirror,e,n)}copy(){return new Kl(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,n){this.to=this.maps.push(e),n!=null&&this.setMirror(this.maps.length-1,n)}appendMapping(e){for(let n=0,r=this.maps.length;n<e.maps.length;n++){let o=e.getMirror(n);this.appendMap(e.maps[n],o!=null&&o<n?r+o:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this.maps.length+e.maps.length;n>=0;n--){let o=e.getMirror(n);this.appendMap(e.maps[n].invert(),o!=null&&o>n?r-o-1:void 0)}}invert(){let e=new Kl;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let o=0;for(let s=this.from;s<this.to;s++){let i=this.maps[s],a=i.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this.maps[l].recover(a.recover);continue}}o|=a.delInfo,e=a.pos}return r?e:new J0(e,o,null)}}const bb=Object.create(null);class Bt{getMap(){return Dn.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=bb[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in bb)throw new RangeError("Duplicate use of step JSON ID "+e);return bb[e]=n,n.prototype.jsonID=e,n}}class yt{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new yt(e,null)}static fail(e){return new yt(null,e)}static fromReplace(e,n,r,o){try{return yt.ok(e.replace(n,r,o))}catch(s){if(s instanceof qm)return yt.fail(s.message);throw s}}}function xk(t,e,n){let r=[];for(let o=0;o<t.childCount;o++){let s=t.child(o);s.content.size&&(s=s.copy(xk(s.content,e,s))),s.isInline&&(s=e(s,n,o)),r.push(s)}return L.fromArray(r)}class qs extends Bt{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),o=r.node(r.sharedDepth(this.to)),s=new H(xk(n.content,(i,a)=>!i.isAtom||!a.type.allowsMarkType(this.mark.type)?i:i.mark(this.mark.addToSet(i.marks)),o),n.openStart,n.openEnd);return yt.fromReplace(e,this.from,this.to,s)}invert(){return new co(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new qs(n.pos,r.pos,this.mark)}merge(e){return e instanceof qs&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new qs(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new qs(n.from,n.to,e.markFromJSON(n.mark))}}Bt.jsonID("addMark",qs);class co extends Bt{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new H(xk(n.content,o=>o.mark(this.mark.removeFromSet(o.marks)),e),n.openStart,n.openEnd);return yt.fromReplace(e,this.from,this.to,r)}invert(){return new qs(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new co(n.pos,r.pos,this.mark)}merge(e){return e instanceof co&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new co(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new co(n.from,n.to,e.markFromJSON(n.mark))}}Bt.jsonID("removeMark",co);class Ws extends Bt{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return yt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return yt.fromReplace(e,this.pos,this.pos+1,new H(L.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let o=0;o<n.marks.length;o++)if(!n.marks[o].isInSet(r))return new Ws(this.pos,n.marks[o]);return new Ws(this.pos,this.mark)}}return new mc(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Ws(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Ws(n.pos,e.markFromJSON(n.mark))}}Bt.jsonID("addNodeMark",Ws);class mc extends Bt{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return yt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return yt.fromReplace(e,this.pos,this.pos+1,new H(L.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Ws(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new mc(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new mc(n.pos,e.markFromJSON(n.mark))}}Bt.jsonID("removeNodeMark",mc);class Mt extends Bt{constructor(e,n,r,o=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=o}apply(e){return this.structure&&Y0(e,this.from,this.to)?yt.fail("Structure replace would overwrite content"):yt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Dn([this.from,this.to-this.from,this.slice.size])}invert(e){return new Mt(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Mt(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(e){if(!(e instanceof Mt)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?H.empty:new H(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Mt(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?H.empty:new H(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Mt(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Mt(n.from,n.to,H.fromJSON(e,n.slice),!!n.structure)}}Bt.jsonID("replace",Mt);class vt extends Bt{constructor(e,n,r,o,s,i,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=s,this.insert=i,this.structure=a}apply(e){if(this.structure&&(Y0(e,this.from,this.gapFrom)||Y0(e,this.gapTo,this.to)))return yt.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return yt.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?yt.fromReplace(e,this.from,this.to,r):yt.fail("Content does not fit in gap")}getMap(){return new Dn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new vt(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),o=e.map(this.gapFrom,-1),s=e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||o<n.pos||s>r.pos?null:new vt(n.pos,r.pos,o,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new vt(n.from,n.to,n.gapFrom,n.gapTo,H.fromJSON(e,n.slice),n.insert,!!n.structure)}}Bt.jsonID("replaceAround",vt);function Y0(t,e,n){let r=t.resolve(e),o=n-e,s=r.depth;for(;o>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,o--;if(o>0){let i=r.node(s).maybeChild(r.indexAfter(s));for(;o>0;){if(!i||i.isLeaf)return!0;i=i.firstChild,o--}}return!1}function VW(t,e,n,r){let o=[],s=[],i,a;t.doc.nodesBetween(e,n,(l,c,u)=>{if(!l.isInline)return;let d=l.marks;if(!r.isInSet(d)&&u.type.allowsMarkType(r.type)){let f=Math.max(c,e),p=Math.min(c+l.nodeSize,n),h=r.addToSet(d);for(let y=0;y<d.length;y++)d[y].isInSet(h)||(i&&i.to==f&&i.mark.eq(d[y])?i.to=p:o.push(i=new co(f,p,d[y])));a&&a.to==f?a.to=p:s.push(a=new qs(f,p,r))}}),o.forEach(l=>t.step(l)),s.forEach(l=>t.step(l))}function UW(t,e,n,r){let o=[],s=0;t.doc.nodesBetween(e,n,(i,a)=>{if(!i.isInline)return;s++;let l=null;if(r instanceof l1){let c=i.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(i.marks)&&(l=[r]):l=i.marks;if(l&&l.length){let c=Math.min(a+i.nodeSize,n);for(let u=0;u<l.length;u++){let d=l[u],f;for(let p=0;p<o.length;p++){let h=o[p];h.step==s-1&&d.eq(o[p].style)&&(f=h)}f?(f.to=c,f.step=s):o.push({style:d,from:Math.max(a,e),to:c,step:s})}}}),o.forEach(i=>t.step(new co(i.from,i.to,i.style)))}function HW(t,e,n,r=n.contentMatch){let o=t.doc.nodeAt(e),s=[],i=e+1;for(let a=0;a<o.childCount;a++){let l=o.child(a),c=i+l.nodeSize,u=r.matchType(l.type);if(!u)s.push(new Mt(i,c,H.empty));else{r=u;for(let d=0;d<l.marks.length;d++)n.allowsMarkType(l.marks[d].type)||t.step(new co(i,c,l.marks[d]));if(l.isText&&!n.spec.code){let d,f=/\r?\n|\r/g,p;for(;d=f.exec(l.text);)p||(p=new H(L.from(n.schema.text(" ",n.allowedMarks(l.marks))),0,0)),s.push(new Mt(i+d.index,i+d.index+d[0].length,p))}}i=c}if(!r.validEnd){let a=r.fillBefore(L.empty,!0);t.replace(i,i,new H(a,0,0))}for(let a=s.length-1;a>=0;a--)t.step(s[a])}function KW(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Wc(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let o=t.$from.node(r),s=t.$from.index(r),i=t.$to.indexAfter(r);if(r<t.depth&&o.canReplace(s,i,n))return r;if(r==0||o.type.spec.isolating||!KW(o,s,i))break}return null}function GW(t,e,n){let{$from:r,$to:o,depth:s}=e,i=r.before(s+1),a=o.after(s+1),l=i,c=a,u=L.empty,d=0;for(let h=s,y=!1;h>n;h--)y||r.index(h)>0?(y=!0,u=L.from(r.node(h).copy(u)),d++):l--;let f=L.empty,p=0;for(let h=s,y=!1;h>n;h--)y||o.after(h+1)<o.end(h)?(y=!0,f=L.from(o.node(h).copy(f)),p++):c++;t.step(new vt(l,c,i,a,new H(u.append(f),d,p),u.size-d,!0))}function c1(t,e,n=null,r=t){let o=ZW(t,e),s=o&&JW(r,e);return s?o.map(uC).concat({type:e,attrs:n}).concat(s.map(uC)):null}function uC(t){return{type:t,attrs:null}}function ZW(t,e){let{parent:n,startIndex:r,endIndex:o}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let i=s.length?s[0]:e;return n.canReplaceWith(r,o,i)?s:null}function JW(t,e){let{parent:n,startIndex:r,endIndex:o}=t,s=n.child(r),i=e.contentMatch.findWrapping(s.type);if(!i)return null;let l=(i.length?i[i.length-1]:e).contentMatch;for(let c=r;l&&c<o;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:i}function YW(t,e,n){let r=L.empty;for(let i=n.length-1;i>=0;i--){if(r.size){let a=n[i].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=L.from(n[i].type.create(n[i].attrs,r))}let o=e.start,s=e.end;t.step(new vt(o,s,o,s,new H(r,0,0),n.length,!0))}function XW(t,e,n,r,o){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(i,a)=>{if(i.isTextblock&&!i.hasMarkup(r,o)&&QW(t.doc,t.mapping.slice(s).map(a),r)){t.clearIncompatible(t.mapping.slice(s).map(a,1),r);let l=t.mapping.slice(s),c=l.map(a,1),u=l.map(a+i.nodeSize,1);return t.step(new vt(c,u,c+1,u-1,new H(L.from(r.create(o,null,i.marks)),0,0),1,!0)),!1}})}function QW(t,e,n){let r=t.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}function eV(t,e,n,r,o){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let i=n.create(r,null,o||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,i);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new vt(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new H(L.from(i),0,0),1,!0))}function yd(t,e,n=1,r){let o=t.resolve(e),s=o.depth-n,i=r&&r[r.length-1]||o.parent;if(s<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!i.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let c=o.depth-1,u=n-2;c>s;c--,u--){let d=o.node(c),f=o.index(c);if(d.type.spec.isolating)return!1;let p=d.content.cutByIndex(f,d.childCount),h=r&&r[u+1];h&&(p=p.replaceChild(0,h.type.create(h.attrs)));let y=r&&r[u]||d;if(!d.canReplace(f+1,d.childCount)||!y.type.validContent(p))return!1}let a=o.indexAfter(s),l=r&&r[0];return o.node(s).canReplaceWith(a,a,l?l.type:o.node(s+1).type)}function tV(t,e,n=1,r){let o=t.doc.resolve(e),s=L.empty,i=L.empty;for(let a=o.depth,l=o.depth-n,c=n-1;a>l;a--,c--){s=L.from(o.node(a).copy(s));let u=r&&r[c];i=L.from(u?u.type.create(u.attrs,i):o.node(a).copy(i))}t.step(new Mt(e,e,new H(s.append(i),n,n),!0))}function Vc(t,e){let n=t.resolve(e),r=n.index();return nV(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function nV(t,e){return!!(t&&e&&!t.isLeaf&&t.canAppend(e))}function rV(t,e,n){let r=new Mt(e-n,e+n,H.empty,!0);t.step(r)}function oV(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let o=r.depth-1;o>=0;o--){let s=r.index(o);if(r.node(o).canReplaceWith(s,s,n))return r.before(o+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let o=r.depth-1;o>=0;o--){let s=r.indexAfter(o);if(r.node(o).canReplaceWith(s,s,n))return r.after(o+1);if(s<r.node(o).childCount)return null}return null}function LR(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let o=n.content;for(let s=0;s<n.openStart;s++)o=o.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let i=r.depth;i>=0;i--){let a=i==r.depth?0:r.pos<=(r.start(i+1)+r.end(i+1))/2?-1:1,l=r.index(i)+(a>0?1:0),c=r.node(i),u=!1;if(s==1)u=c.canReplace(l,l,o);else{let d=c.contentMatchAt(l).findWrapping(o.firstChild.type);u=d&&c.canReplaceWith(l,l,d[0])}if(u)return a==0?r.pos:a<0?r.before(i+1):r.after(i+1)}return null}function kk(t,e,n=e,r=H.empty){if(e==n&&!r.size)return null;let o=t.resolve(e),s=t.resolve(n);return jR(o,s,r)?new Mt(e,n,r):new sV(o,s,r).fit()}function jR(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class sV{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=L.empty;for(let o=0;o<=e.depth;o++){let s=e.node(o);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(o))})}for(let o=e.depth;o>0;o--)this.placed=L.from(e.node(o).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(e<0?this.$to:r.doc.resolve(e));if(!o)return null;let s=this.placed,i=r.depth,a=o.depth;for(;i&&a&&s.childCount==1;)s=s.firstChild.content,i--,a--;let l=new H(s,i,a);return e>-1?new vt(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new Mt(r.pos,o.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,o=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(o=0),s.type.spec.isolating&&o<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let o,s=null;r?(s=vb(this.unplaced.content,r-1).firstChild,o=s.content):o=this.unplaced.content;let i=o.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,d=null;if(n==1&&(i?c.matchType(i.type)||(d=c.fillBefore(L.from(i),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:a,parent:s,inject:d};if(n==2&&i&&(u=c.findWrapping(i.type)))return{sliceDepth:r,frontierDepth:a,parent:s,wrap:u};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,o=vb(e,n);return!o.childCount||o.firstChild.isLeaf?!1:(this.unplaced=new H(e,n+1,Math.max(r,o.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,o=vb(e,n);if(o.childCount<=1&&n>0){let s=e.size-n<=n+o.size;this.unplaced=new H(qu(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new H(qu(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:o,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let y=0;y<s.length;y++)this.openFrontierNode(s[y]);let i=this.unplaced,a=r?r.content:i.content,l=i.openStart-e,c=0,u=[],{match:d,type:f}=this.frontier[n];if(o){for(let y=0;y<o.childCount;y++)u.push(o.child(y));d=d.matchFragment(o)}let p=a.size+e-(i.content.size-i.openEnd);for(;c<a.childCount;){let y=a.child(c),g=d.matchType(y.type);if(!g)break;c++,(c>1||l==0||y.content.size)&&(d=g,u.push(FR(y.mark(f.allowedMarks(y.marks)),c==1?l:0,c==a.childCount?p:-1)))}let h=c==a.childCount;h||(p=-1),this.placed=Wu(this.placed,n,L.from(u)),this.frontier[n].match=d,h&&p<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let y=0,g=a;y<p;y++){let b=g.lastChild;this.frontier.push({type:b.type,match:b.contentMatchAt(b.childCount)}),g=b.content}this.unplaced=h?e==0?H.empty:new H(qu(i.content,e-1,1),e-1,p<0?i.openEnd:e-1):new H(qu(i.content,e,c),i.openStart,i.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!wb(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,o=this.$to.after(r);for(;r>1&&o==this.$to.end(--r);)++o;return o}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:o}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),i=wb(e,n,o,r,s);if(i){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=wb(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:n,fit:i,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Wu(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let o=e.node(r),s=o.type.contentMatch.fillBefore(o.content,!0,e.index(r));this.openFrontierNode(o.type,o.attrs,s)}return e}openFrontierNode(e,n=null,r){let o=this.frontier[this.depth];o.match=o.match.matchType(e),this.placed=Wu(this.placed,this.depth,L.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(L.empty,!0);n.childCount&&(this.placed=Wu(this.placed,this.frontier.length,n))}}function qu(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(qu(t.firstChild.content,e-1,n)))}function Wu(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Wu(t.lastChild.content,e-1,n)))}function vb(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function FR(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,FR(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(L.empty,!0)))),t.copy(r)}function wb(t,e,n,r,o){let s=t.node(e),i=o?t.indexAfter(e):t.index(e);if(i==s.childCount&&!n.compatibleContent(s.type))return null;let a=r.fillBefore(s.content,!0,i);return a&&!iV(n,s.content,i)?a:null}function iV(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function aV(t){return t.spec.defining||t.spec.definingForContent}function lV(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let o=t.doc.resolve(e),s=t.doc.resolve(n);if(jR(o,s,r))return t.step(new Mt(e,n,r));let i=zR(o,t.doc.resolve(n));i[i.length-1]==0&&i.pop();let a=-(o.depth+1);i.unshift(a);for(let f=o.depth,p=o.pos-1;f>0;f--,p--){let h=o.node(f).type.spec;if(h.defining||h.definingAsContext||h.isolating)break;i.indexOf(f)>-1?a=f:o.before(f)==p&&i.splice(1,0,-f)}let l=i.indexOf(a),c=[],u=r.openStart;for(let f=r.content,p=0;;p++){let h=f.firstChild;if(c.push(h),p==r.openStart)break;f=h.content}for(let f=u-1;f>=0;f--){let p=c[f],h=aV(p.type);if(h&&!p.sameMarkup(o.node(Math.abs(a)-1)))u=f;else if(h||!p.type.isTextblock)break}for(let f=r.openStart;f>=0;f--){let p=(f+u+1)%(r.openStart+1),h=c[p];if(h)for(let y=0;y<i.length;y++){let g=i[(y+l)%i.length],b=!0;g<0&&(b=!1,g=-g);let w=o.node(g-1),x=o.index(g-1);if(w.canReplaceWith(x,x,h.type,h.marks))return t.replace(o.before(g),b?s.after(g):n,new H(BR(r.content,0,r.openStart,p),p,r.openEnd))}}let d=t.steps.length;for(let f=i.length-1;f>=0&&(t.replace(e,n,r),!(t.steps.length>d));f--){let p=i[f];p<0||(e=o.before(p),n=s.after(p))}}function BR(t,e,n,r,o){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(BR(s.content,e+1,n,r,s)))}if(e>r){let s=o.contentMatchAt(0),i=s.fillBefore(t).append(t);t=i.append(s.matchFragment(i).fillBefore(L.empty,!0))}return t}function cV(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let o=oV(t.doc,e,r.type);o!=null&&(e=n=o)}t.replaceRange(e,n,new H(L.from(r),0,0))}function uV(t,e,n){let r=t.doc.resolve(e),o=t.doc.resolve(n),s=zR(r,o);for(let i=0;i<s.length;i++){let a=s[i],l=i==s.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),o.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),o.indexAfter(a-1))))return t.delete(r.before(a),o.after(a))}for(let i=1;i<=r.depth&&i<=o.depth;i++)if(e-r.start(i)==r.depth-i&&n>r.end(i)&&o.end(i)-n!=o.depth-i)return t.delete(r.before(i),n);t.delete(e,n)}function zR(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let o=r;o>=0;o--){let s=t.start(o);if(s<t.pos-(t.depth-o)||e.end(o)>e.pos+(e.depth-o)||t.node(o).type.spec.isolating||e.node(o).type.spec.isolating)break;(s==e.start(o)||o==t.depth&&o==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&o&&e.start(o-1)==s-1)&&n.push(o)}return n}class Gl extends Bt{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return yt.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let o=n.type.create(r,null,n.marks);return yt.fromReplace(e,this.pos,this.pos+1,new H(L.from(o),0,n.isLeaf?0:1))}getMap(){return Dn.empty}invert(e){return new Gl(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Gl(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Gl(n.pos,n.attr,n.value)}}Bt.jsonID("attr",Gl);class pf extends Bt{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let o in e.attrs)n[o]=e.attrs[o];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return yt.ok(r)}getMap(){return Dn.empty}invert(e){return new pf(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new pf(n.attr,n.value)}}Bt.jsonID("docAttr",pf);let gc=class extends Error{};gc=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};gc.prototype=Object.create(Error.prototype);gc.prototype.constructor=gc;gc.prototype.name="TransformError";class qR{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Kl}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new gc(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=H.empty){let o=kk(this.doc,e,n,r);return o&&this.step(o),this}replaceWith(e,n,r){return this.replace(e,n,new H(L.from(r),0,0))}delete(e,n){return this.replace(e,n,H.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return lV(this,e,n,r),this}replaceRangeWith(e,n,r){return cV(this,e,n,r),this}deleteRange(e,n){return uV(this,e,n),this}lift(e,n){return GW(this,e,n),this}join(e,n=1){return rV(this,e,n),this}wrap(e,n){return YW(this,e,n),this}setBlockType(e,n=e,r,o=null){return XW(this,e,n,r,o),this}setNodeMarkup(e,n,r=null,o){return eV(this,e,n,r,o),this}setNodeAttribute(e,n,r){return this.step(new Gl(e,n,r)),this}setDocAttribute(e,n){return this.step(new pf(e,n)),this}addNodeMark(e,n){return this.step(new Ws(e,n)),this}removeNodeMark(e,n){if(!(n instanceof Ne)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n=n.isInSet(r.marks),!n)return this}return this.step(new mc(e,n)),this}split(e,n=1,r){return tV(this,e,n,r),this}addMark(e,n,r){return VW(this,e,n,r),this}removeMark(e,n,r){return UW(this,e,n,r),this}clearIncompatible(e,n,r){return HW(this,e,n,r),this}}const xb=Object.create(null);class Q{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new WR(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=H.empty){let r=n.content.lastChild,o=null;for(let a=0;a<n.openEnd;a++)o=r,r=r.lastChild;let s=e.steps.length,i=this.ranges;for(let a=0;a<i.length;a++){let{$from:l,$to:c}=i[a],u=e.mapping.slice(s);e.replaceRange(u.map(l.pos),u.map(c.pos),a?H.empty:n),a==0&&pC(e,s,(r?r.isInline:o&&o.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,o=this.ranges;for(let s=0;s<o.length;s++){let{$from:i,$to:a}=o[s],l=e.mapping.slice(r),c=l.map(i.pos),u=l.map(a.pos);s?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),pC(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let o=e.parent.inlineContent?new ae(e):wl(e.node(0),e.parent,e.pos,e.index(),n,r);if(o)return o;for(let s=e.depth-1;s>=0;s--){let i=n<0?wl(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):wl(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(i)return i}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Bn(e.node(0))}static atStart(e){return wl(e,e,0,0,1)||new Bn(e)}static atEnd(e){return wl(e,e,e.content.size,e.childCount,-1)||new Bn(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=xb[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in xb)throw new RangeError("Duplicate use of selection JSON ID "+e);return xb[e]=n,n.prototype.jsonID=e,n}getBookmark(){return ae.between(this.$anchor,this.$head).getBookmark()}}Q.prototype.visible=!0;class WR{constructor(e,n){this.$from=e,this.$to=n}}let dC=!1;function fC(t){!dC&&!t.parent.inlineContent&&(dC=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class ae extends Q{constructor(e,n=e){fC(e),fC(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return Q.near(r);let o=e.resolve(n.map(this.anchor));return new ae(o.parent.inlineContent?o:r,r)}replace(e,n=H.empty){if(super.replace(e,n),n==H.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof ae&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new u1(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new ae(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let o=e.resolve(n);return new this(o,r==n?o:e.resolve(r))}static between(e,n,r){let o=e.pos-n.pos;if((!r||o)&&(r=o>=0?1:-1),!n.parent.inlineContent){let s=Q.findFrom(n,r,!0)||Q.findFrom(n,-r,!0);if(s)n=s.$head;else return Q.near(n,r)}return e.parent.inlineContent||(o==0?e=n:(e=(Q.findFrom(e,-r,!0)||Q.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=o<0&&(e=n))),new ae(e,n)}}Q.jsonID("text",ae);class u1{constructor(e,n){this.anchor=e,this.head=n}map(e){return new u1(e.map(this.anchor),e.map(this.head))}resolve(e){return ae.between(e.resolve(this.anchor),e.resolve(this.head))}}class ne extends Q{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:o}=n.mapResult(this.anchor),s=e.resolve(o);return r?Q.near(s):new ne(s)}content(){return new H(L.from(this.node),0,0)}eq(e){return e instanceof ne&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new _k(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new ne(e.resolve(n.anchor))}static create(e,n){return new ne(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}ne.prototype.visible=!1;Q.jsonID("node",ne);class _k{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new u1(r,r):new _k(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&ne.isSelectable(r)?new ne(n):Q.near(n)}}class Bn extends Q{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=H.empty){if(n==H.empty){e.delete(0,e.doc.content.size);let r=Q.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new Bn(e)}map(e){return new Bn(e)}eq(e){return e instanceof Bn}getBookmark(){return dV}}Q.jsonID("all",Bn);const dV={map(){return this},resolve(t){return new Bn(t)}};function wl(t,e,n,r,o,s=!1){if(e.inlineContent)return ae.create(t,n);for(let i=r-(o>0?0:1);o>0?i<e.childCount:i>=0;i+=o){let a=e.child(i);if(a.isAtom){if(!s&&ne.isSelectable(a))return ne.create(t,n-(o<0?a.nodeSize:0))}else{let l=wl(t,a,n+o,o<0?a.childCount:0,o,s);if(l)return l}n+=a.nodeSize*o}return null}function pC(t,e,n){let r=t.steps.length-1;if(r<e)return;let o=t.steps[r];if(!(o instanceof Mt||o instanceof vt))return;let s=t.mapping.maps[r],i;s.forEach((a,l,c,u)=>{i==null&&(i=u)}),t.setSelection(Q.near(t.doc.resolve(i),n))}const hC=1,Zp=2,mC=4;class fV extends qR{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|hC)&~Zp,this.storedMarks=null,this}get selectionSet(){return(this.updated&hC)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Zp,this}ensureMarks(e){return Ne.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Zp)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~Zp,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Ne.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let o=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(o.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r==null?n:r,!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let i=this.doc.resolve(n);s=r==n?i.marks():i.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,o.text(e,s)),this.selection.empty||this.setSelection(Q.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=mC,this}get scrolledIntoView(){return(this.updated&mC)>0}}function gC(t,e){return!e||!t?t:t.bind(e)}class Vu{constructor(e,n,r){this.name=e,this.init=gC(n.init,r),this.apply=gC(n.apply,r)}}const pV=[new Vu("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Vu("selection",{init(t,e){return t.selection||Q.atStart(e.doc)},apply(t){return t.selection}}),new Vu("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Vu("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class kb{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=pV.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Vu(r.key,r.spec.state,r))})}}class Vs{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let o=this.config.plugins[r];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),o=null;for(;;){let s=!1;for(let i=0;i<this.config.plugins.length;i++){let a=this.config.plugins[i];if(a.spec.appendTransaction){let l=o?o[i].n:0,c=o?o[i].state:this,u=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(u&&r.filterTransaction(u,i)){if(u.setMeta("appendedTransaction",e),!o){o=[];for(let d=0;d<this.config.plugins.length;d++)o.push(d<i?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),s=!0}o&&(o[i]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Vs(this.config),r=this.config.fields;for(let o=0;o<r.length;o++){let s=r[o];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new fV(this)}static create(e){let n=new kb(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Vs(n);for(let o=0;o<n.fields.length;o++)r[n.fields[o].name]=n.fields[o].init(e,r);return r}reconfigure(e){let n=new kb(this.schema,e.plugins),r=n.fields,o=new Vs(n);for(let s=0;s<r.length;s++){let i=r[s].name;o[i]=this.hasOwnProperty(i)?this[i]:r[s].init(e,o)}return o}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let o=e[r],s=o.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(o,this[o.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let o=new kb(e.schema,e.plugins),s=new Vs(o);return o.fields.forEach(i=>{if(i.name=="doc")s.doc=Cn.fromJSON(e.schema,n.doc);else if(i.name=="selection")s.selection=Q.fromJSON(s.doc,n.selection);else if(i.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==i.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){s[i.name]=c.fromJSON.call(l,e,n[a],s);return}}s[i.name]=i.init(e,s)}}),s}}function VR(t,e,n){for(let r in t){let o=t[r];o instanceof Function?o=o.bind(e):r=="handleDOMEvents"&&(o=VR(o,e,{})),n[r]=o}return n}class xe{constructor(e){this.spec=e,this.props={},e.props&&VR(e.props,this,this.props),this.key=e.key?e.key.key:UR("plugin")}getState(e){return e[this.key]}}const _b=Object.create(null);function UR(t){return t in _b?t+"$"+ ++_b[t]:(_b[t]=0,t+"$")}class Ee{constructor(e="key"){this.key=UR(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const HR=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function hV(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const mV=(t,e,n)=>{let r=hV(t,n);if(!r)return!1;let o=KR(r);if(!o){let i=r.blockRange(),a=i&&Wc(i);return a==null?!1:(e&&e(t.tr.lift(i,a).scrollIntoView()),!0)}let s=o.nodeBefore;if(!s.type.spec.isolating&&JR(t,o,e))return!0;if(r.parent.content.size==0&&(yc(s,"end")||ne.isSelectable(s))){let i=kk(t.doc,r.before(),r.after(),H.empty);if(i&&i.slice.size<i.to-i.from){if(e){let a=t.tr.step(i);a.setSelection(yc(s,"end")?Q.findFrom(a.doc.resolve(a.mapping.map(o.pos,-1)),-1):ne.create(a.doc,o.pos-s.nodeSize)),e(a.scrollIntoView())}return!0}}return s.isAtom&&o.depth==r.depth-1?(e&&e(t.tr.delete(o.pos-s.nodeSize,o.pos).scrollIntoView()),!0):!1};function yc(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const gV=(t,e,n)=>{let{$head:r,empty:o}=t.selection,s=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=KR(r)}let i=s&&s.nodeBefore;return!i||!ne.isSelectable(i)?!1:(e&&e(t.tr.setSelection(ne.create(t.doc,s.pos-i.nodeSize)).scrollIntoView()),!0)};function KR(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function yV(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const bV=(t,e,n)=>{let r=yV(t,n);if(!r)return!1;let o=GR(r);if(!o)return!1;let s=o.nodeAfter;if(JR(t,o,e))return!0;if(r.parent.content.size==0&&(yc(s,"start")||ne.isSelectable(s))){let i=kk(t.doc,r.before(),r.after(),H.empty);if(i&&i.slice.size<i.to-i.from){if(e){let a=t.tr.step(i);a.setSelection(yc(s,"start")?Q.findFrom(a.doc.resolve(a.mapping.map(o.pos)),1):ne.create(a.doc,a.mapping.map(o.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&o.depth==r.depth-1?(e&&e(t.tr.delete(o.pos,o.pos+s.nodeSize).scrollIntoView()),!0):!1},vV=(t,e,n)=>{let{$head:r,empty:o}=t.selection,s=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=GR(r)}let i=s&&s.nodeAfter;return!i||!ne.isSelectable(i)?!1:(e&&e(t.tr.setSelection(ne.create(t.doc,s.pos)).scrollIntoView()),!0)};function GR(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const wV=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function $k(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const ZR=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let o=n.node(-1),s=n.indexAfter(-1),i=$k(o.contentMatchAt(s));if(!i||!o.canReplaceWith(s,s,i))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,i.createAndFill());l.setSelection(Q.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},xV=(t,e)=>{let n=t.selection,{$from:r,$to:o}=n;if(n instanceof Bn||r.parent.inlineContent||o.parent.inlineContent)return!1;let s=$k(o.parent.contentMatchAt(o.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let i=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,a=t.tr.insert(i,s.createAndFill());a.setSelection(ae.create(a.doc,i+1)),e(a.scrollIntoView())}return!0},kV=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(yd(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),o=r&&Wc(r);return o==null?!1:(e&&e(t.tr.lift(r,o).scrollIntoView()),!0)};function _V(t){return(e,n)=>{let{$from:r,$to:o}=e.selection;if(e.selection instanceof ne&&e.selection.node.isBlock)return!r.parentOffset||!yd(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.parent.isBlock)return!1;if(n){let s=o.parentOffset==o.parent.content.size,i=e.tr;(e.selection instanceof ae||e.selection instanceof Bn)&&i.deleteSelection();let a=r.depth==0?null:$k(r.node(-1).contentMatchAt(r.indexAfter(-1))),l=t&&t(o.parent,s),c=l?[l]:s&&a?[{type:a}]:void 0,u=yd(i.doc,i.mapping.map(r.pos),1,c);if(!c&&!u&&yd(i.doc,i.mapping.map(r.pos),1,a?[{type:a}]:void 0)&&(a&&(c=[{type:a}]),u=!0),u&&(i.split(i.mapping.map(r.pos),1,c),!s&&!r.parentOffset&&r.parent.type!=a)){let d=i.mapping.map(r.before()),f=i.doc.resolve(d);a&&r.node(-1).canReplaceWith(f.index(),f.index()+1,a)&&i.setNodeMarkup(i.mapping.map(r.before()),a)}n(i.scrollIntoView())}return!0}}const $V=_V(),EV=(t,e)=>(e&&e(t.tr.setSelection(new Bn(t.doc))),!0);function SV(t,e,n){let r=e.nodeBefore,o=e.nodeAfter,s=e.index();return!r||!o||!r.type.compatibleContent(o.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(o.isTextblock||Vc(t.doc,e.pos))?!1:(n&&n(t.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0)}function JR(t,e,n){let r=e.nodeBefore,o=e.nodeAfter,s,i;if(r.type.spec.isolating||o.type.spec.isolating)return!1;if(SV(t,e,n))return!0;let a=e.parent.canReplace(e.index(),e.index()+1);if(a&&(s=(i=r.contentMatchAt(r.childCount)).findWrapping(o.type))&&i.matchType(s[0]||o.type).validEnd){if(n){let d=e.pos+o.nodeSize,f=L.empty;for(let y=s.length-1;y>=0;y--)f=L.from(s[y].create(null,f));f=L.from(r.copy(f));let p=t.tr.step(new vt(e.pos-1,d,e.pos,d,new H(f,1,0),s.length,!0)),h=d+2*s.length;Vc(p.doc,h)&&p.join(h),n(p.scrollIntoView())}return!0}let l=Q.findFrom(e,1),c=l&&l.$from.blockRange(l.$to),u=c&&Wc(c);if(u!=null&&u>=e.depth)return n&&n(t.tr.lift(c,u).scrollIntoView()),!0;if(a&&yc(o,"start",!0)&&yc(r,"end")){let d=r,f=[];for(;f.push(d),!d.isTextblock;)d=d.lastChild;let p=o,h=1;for(;!p.isTextblock;p=p.firstChild)h++;if(d.canReplace(d.childCount,d.childCount,p.content)){if(n){let y=L.empty;for(let b=f.length-1;b>=0;b--)y=L.from(f[b].copy(y));let g=t.tr.step(new vt(e.pos-f.length,e.pos+o.nodeSize,e.pos+h,e.pos+o.nodeSize-h,new H(y,f.length,0),0,!0));n(g.scrollIntoView())}return!0}}return!1}function YR(t){return function(e,n){let r=e.selection,o=t<0?r.$from:r.$to,s=o.depth;for(;o.node(s).isInline;){if(!s)return!1;s--}return o.node(s).isTextblock?(n&&n(e.tr.setSelection(ae.create(e.doc,t<0?o.start(s):o.end(s)))),!0):!1}}const CV=YR(-1),TV=YR(1);function AV(t,e=null){return function(n,r){let{$from:o,$to:s}=n.selection,i=o.blockRange(s),a=i&&c1(i,t,e);return a?(r&&r(n.tr.wrap(i,a).scrollIntoView()),!0):!1}}function bc(t,e=null){return function(n,r){let o=!1;for(let s=0;s<n.selection.ranges.length&&!o;s++){let{$from:{pos:i},$to:{pos:a}}=n.selection.ranges[s];n.doc.nodesBetween(i,a,(l,c)=>{if(o)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)o=!0;else{let u=n.doc.resolve(c),d=u.index();o=u.parent.canReplaceWith(d,d+1,t)}})}if(!o)return!1;if(r){let s=n.tr;for(let i=0;i<n.selection.ranges.length;i++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[i];s.setBlockType(a,l,t,e)}r(s.scrollIntoView())}return!0}}function NV(t,e,n){for(let r=0;r<e.length;r++){let{$from:o,$to:s}=e[r],i=o.depth==0?t.inlineContent&&t.type.allowsMarkType(n):!1;if(t.nodesBetween(o.pos,s.pos,a=>{if(i)return!1;i=a.inlineContent&&a.type.allowsMarkType(n)}),i)return!0}return!1}function gs(t,e=null){return function(n,r){let{empty:o,$cursor:s,ranges:i}=n.selection;if(o&&!s||!NV(n.doc,i,t))return!1;if(r)if(s)t.isInSet(n.storedMarks||s.marks())?r(n.tr.removeStoredMark(t)):r(n.tr.addStoredMark(t.create(e)));else{let a=!1,l=n.tr;for(let c=0;!a&&c<i.length;c++){let{$from:u,$to:d}=i[c];a=n.doc.rangeHasMark(u.pos,d.pos,t)}for(let c=0;c<i.length;c++){let{$from:u,$to:d}=i[c];if(a)l.removeMark(u.pos,d.pos,t);else{let f=u.pos,p=d.pos,h=u.nodeAfter,y=d.nodeBefore,g=h&&h.isText?/^\s*/.exec(h.text)[0].length:0,b=y&&y.isText?/\s*$/.exec(y.text)[0].length:0;f+g<p&&(f+=g,p-=b),l.addMark(f,p,t.create(e))}}r(l.scrollIntoView())}return!0}}function PV(t,e){return n=>{if(!n.isGeneric)return t(n);let r=[];for(let s=0;s<n.mapping.maps.length;s++){let i=n.mapping.maps[s];for(let a=0;a<r.length;a++)r[a]=i.map(r[a]);i.forEach((a,l,c,u)=>r.push(c,u))}let o=[];for(let s=0;s<r.length;s+=2){let i=r[s],a=r[s+1],l=n.doc.resolve(i),c=l.sharedDepth(a),u=l.node(c);for(let d=l.indexAfter(c),f=l.after(c+1);f<=a;++d){let p=u.maybeChild(d);if(!p)break;if(d&&o.indexOf(f)==-1){let h=u.child(d-1);h.type==p.type&&e(h,p)&&o.push(f)}f+=p.nodeSize}}o.sort((s,i)=>s-i);for(let s=o.length-1;s>=0;s--)Vc(n.doc,o[s])&&n.join(o[s]);t(n)}}function OV(t,e){let n=Array.isArray(e)?r=>e.indexOf(r.type.name)>-1:e;return(r,o,s)=>t(r,o&&PV(o,n),s)}function Vn(...t){return function(e,n,r){for(let o=0;o<t.length;o++)if(t[o](e,n,r))return!0;return!1}}let $b=Vn(HR,mV,gV),yC=Vn(HR,bV,vV);const Bo={Enter:Vn(wV,xV,kV,$V),"Mod-Enter":ZR,Backspace:$b,"Mod-Backspace":$b,"Shift-Backspace":$b,Delete:yC,"Mod-Delete":yC,"Mod-a":EV},XR={"Ctrl-h":Bo.Backspace,"Alt-Backspace":Bo["Mod-Backspace"],"Ctrl-d":Bo.Delete,"Ctrl-Alt-Backspace":Bo["Mod-Delete"],"Alt-Delete":Bo["Mod-Delete"],"Alt-d":Bo["Mod-Delete"],"Ctrl-a":CV,"Ctrl-e":TV};for(let t in Bo)XR[t]=Bo[t];const IV=typeof navigator!="undefined"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os!="undefined"&&os.platform?os.platform()=="darwin":!1,RV=IV?XR:Bo;function MV(t={}){return new xe({view(e){return new DV(e,t)}})}class DV{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(o=>{let s=i=>{this[o](i)};return e.dom.addEventListener(o,s),{name:o,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r;if(n){let a=e.nodeBefore,l=e.nodeAfter;if(a||l){let c=this.editorView.nodeDOM(this.cursorPos-(a?a.nodeSize:0));if(c){let u=c.getBoundingClientRect(),d=a?u.bottom:u.top;a&&l&&(d=(d+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:u.left,right:u.right,top:d-this.width/2,bottom:d+this.width/2}}}}if(!r){let a=this.editorView.coordsAtPos(this.cursorPos);r={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}let o=this.editorView.dom.offsetParent;this.element||(this.element=o.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let s,i;if(!o||o==document.body&&getComputedStyle(o).position=="static")s=-pageXOffset,i=-pageYOffset;else{let a=o.getBoundingClientRect();s=a.left-o.scrollLeft,i=a.top-o.scrollTop}this.element.style.left=r.left-s+"px",this.element.style.top=r.top-i+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),o=r&&r.type.spec.disableDropCursor,s=typeof o=="function"?o(this.editorView,n,e):o;if(n&&!s){let i=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=LR(this.editorView.state.doc,i,this.editorView.dragging.slice);a!=null&&(i=a)}this.setCursor(i),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}var ki={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Km={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},LV=typeof navigator!="undefined"&&/Mac/.test(navigator.platform),jV=typeof navigator!="undefined"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Dt=0;Dt<10;Dt++)ki[48+Dt]=ki[96+Dt]=String(Dt);for(var Dt=1;Dt<=24;Dt++)ki[Dt+111]="F"+Dt;for(var Dt=65;Dt<=90;Dt++)ki[Dt]=String.fromCharCode(Dt+32),Km[Dt]=String.fromCharCode(Dt);for(var Eb in ki)Km.hasOwnProperty(Eb)||(Km[Eb]=ki[Eb]);function QR(t){var e=LV&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||jV&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Km:ki)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const FV=typeof navigator!="undefined"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function BV(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,o,s,i;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))i=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))FV?i=!0:o=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),o&&(n="Ctrl-"+n),i&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function zV(t){let e=Object.create(null);for(let n in t)e[BV(n)]=t[n];return e}function Sb(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function st(t){return new xe({props:{handleKeyDown:Ek(t)}})}function Ek(t){let e=zV(t);return function(n,r){let o=QR(r),s,i=e[Sb(o,r)];if(i&&i(n.state,n.dispatch,n))return!0;if(o.length==1&&o!=" "){if(r.shiftKey){let a=e[Sb(o,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.shiftKey||r.altKey||r.metaKey||o.charCodeAt(0)>127)&&(s=ki[r.keyCode])&&s!=o){let a=e[Sb(s,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}const sn=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},hf=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let bC=null;const jo=function(t,e,n){let r=bC||(bC=document.createRange());return r.setEnd(t,n==null?t.nodeValue.length:n),r.setStart(t,e||0),r},Oa=function(t,e,n,r){return n&&(vC(t,e,n,r,-1)||vC(t,e,n,r,1))},qV=/^(img|br|input|textarea|hr)$/i;function vC(t,e,n,r,o){for(;;){if(t==n&&e==r)return!0;if(e==(o<0?0:oo(t))){let s=t.parentNode;if(!s||s.nodeType!=1||Sk(t)||qV.test(t.nodeName)||t.contentEditable=="false")return!1;e=sn(t)+(o<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(o<0?-1:0)],t.contentEditable=="false")return!1;e=o<0?oo(t):0}else return!1}}function oo(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function WV(t,e,n){for(let r=e==0,o=e==oo(t);r||o;){if(t==n)return!0;let s=sn(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,o=o&&s==oo(t)}}function Sk(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const d1=function(t){return t.focusNode&&Oa(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Zi(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function VV(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function UV(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:r.offset}}catch(r){}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:r.startOffset}}}const xo=typeof navigator!="undefined"?navigator:null,wC=typeof document!="undefined"?document:null,Oi=xo&&xo.userAgent||"",X0=/Edge\/(\d+)/.exec(Oi),e3=/MSIE \d/.exec(Oi),Q0=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Oi),Tn=!!(e3||Q0||X0),oi=e3?document.documentMode:Q0?+Q0[1]:X0?+X0[1]:0,zr=!Tn&&/gecko\/(\d+)/i.test(Oi);zr&&+(/Firefox\/(\d+)/.exec(Oi)||[0,0])[1];const ew=!Tn&&/Chrome\/(\d+)/.exec(Oi),Kt=!!ew,HV=ew?+ew[1]:0,fn=!Tn&&!!xo&&/Apple Computer/.test(xo.vendor),vc=fn&&(/Mobile\/\w+/.test(Oi)||!!xo&&xo.maxTouchPoints>2),Xn=vc||(xo?/Mac/.test(xo.platform):!1),KV=xo?/Win/.test(xo.platform):!1,Tr=/Android \d/.test(Oi),Zf=!!wC&&"webkitFontSmoothing"in wC.documentElement.style,GV=Zf?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function ZV(t){return{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Ro(t,e){return typeof t=="number"?t:t[e]}function JV(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function xC(t,e,n){let r=t.someProp("scrollThreshold")||0,o=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let i=n||t.dom;i;i=hf(i)){if(i.nodeType!=1)continue;let a=i,l=a==s.body,c=l?ZV(s):JV(a),u=0,d=0;if(e.top<c.top+Ro(r,"top")?d=-(c.top-e.top+Ro(o,"top")):e.bottom>c.bottom-Ro(r,"bottom")&&(d=e.bottom-e.top>c.bottom-c.top?e.top+Ro(o,"top")-c.top:e.bottom-c.bottom+Ro(o,"bottom")),e.left<c.left+Ro(r,"left")?u=-(c.left-e.left+Ro(o,"left")):e.right>c.right-Ro(r,"right")&&(u=e.right-c.right+Ro(o,"right")),u||d)if(l)s.defaultView.scrollBy(u,d);else{let f=a.scrollLeft,p=a.scrollTop;d&&(a.scrollTop+=d),u&&(a.scrollLeft+=u);let h=a.scrollLeft-f,y=a.scrollTop-p;e={left:e.left-h,top:e.top-y,right:e.right-h,bottom:e.bottom-y}}if(l||/^(fixed|sticky)$/.test(getComputedStyle(i).position))break}}function YV(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,o;for(let s=(e.left+e.right)/2,i=n+1;i<Math.min(innerHeight,e.bottom);i+=5){let a=t.root.elementFromPoint(s,i);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,o=l.top;break}}return{refDOM:r,refTop:o,stack:t3(t.dom)}}function t3(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=hf(r));return e}function XV({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;n3(n,r==0?0:r-e)}function n3(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:o,left:s}=t[n];r.scrollTop!=o+e&&(r.scrollTop=o+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let il=null;function QV(t){if(t.setActive)return t.setActive();if(il)return t.focus(il);let e=t3(t);t.focus(il==null?{get preventScroll(){return il={preventScroll:!0},!0}}:void 0),il||(il=!1,n3(e,0))}function r3(t,e){let n,r=2e8,o,s=0,i=e.top,a=e.top,l,c;for(let u=t.firstChild,d=0;u;u=u.nextSibling,d++){let f;if(u.nodeType==1)f=u.getClientRects();else if(u.nodeType==3)f=jo(u).getClientRects();else continue;for(let p=0;p<f.length;p++){let h=f[p];if(h.top<=i&&h.bottom>=a){i=Math.max(h.bottom,i),a=Math.min(h.top,a);let y=h.left>e.left?h.left-e.left:h.right<e.left?e.left-h.right:0;if(y<r){n=u,r=y,o=y&&n.nodeType==3?{left:h.right<e.left?h.right:h.left,top:e.top}:e,u.nodeType==1&&y&&(s=d+(e.left>=(h.left+h.right)/2?1:0));continue}}else h.top>e.top&&!l&&h.left<=e.left&&h.right>=e.left&&(l=u,c={left:Math.max(h.left,Math.min(h.right,e.left)),top:h.top});!n&&(e.left>=h.right&&e.top>=h.top||e.left>=h.left&&e.top>=h.bottom)&&(s=d+1)}}return!n&&l&&(n=l,o=c,r=0),n&&n.nodeType==3?eU(n,o):!n||r&&n.nodeType==1?{node:t,offset:s}:r3(n,o)}function eU(t,e){let n=t.nodeValue.length,r=document.createRange();for(let o=0;o<n;o++){r.setEnd(t,o+1),r.setStart(t,o);let s=Es(r,1);if(s.top!=s.bottom&&Ck(e,s))return{node:t,offset:o+(e.left>=(s.left+s.right)/2?1:0)}}return{node:t,offset:0}}function Ck(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function tU(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function nU(t,e,n){let{node:r,offset:o}=r3(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let i=r.getBoundingClientRect();s=i.left!=i.right&&n.left>(i.left+i.right)/2?1:-1}return t.docView.posFromDOM(r,o,s)}function rU(t,e,n,r){let o=-1;for(let s=e,i=!1;s!=t.dom;){let a=t.docView.nearestDesc(s,!0);if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent&&!i||!a.contentDOM)){let l=a.dom.getBoundingClientRect();if(a.node.isBlock&&a.parent&&!i&&(i=!0,l.left>r.left||l.top>r.top?o=a.posBefore:(l.right<r.left||l.bottom<r.top)&&(o=a.posAfter)),!a.contentDOM&&o<0&&!a.node.isText)return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter}s=a.dom.parentNode}return o>-1?o:t.docView.posFromDOM(e,n,-1)}function o3(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let o=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=o;;){let i=t.childNodes[s];if(i.nodeType==1){let a=i.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(Ck(e,c))return o3(i,e,c)}}if((s=(s+1)%r)==o)break}return t}function oU(t,e){let n=t.dom.ownerDocument,r,o=0,s=UV(n,e.left,e.top);s&&({node:r,offset:o}=s);let i=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!i||!t.dom.contains(i.nodeType!=1?i.parentNode:i)){let c=t.dom.getBoundingClientRect();if(!Ck(e,c)||(i=o3(t.dom,e,c),!i))return null}if(fn)for(let c=i;r&&c;c=hf(c))c.draggable&&(r=void 0);if(i=tU(i,e),r){if(zr&&r.nodeType==1&&(o=Math.min(o,r.childNodes.length),o<r.childNodes.length)){let u=r.childNodes[o],d;u.nodeName=="IMG"&&(d=u.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&o++}let c;Zf&&o&&r.nodeType==1&&(c=r.childNodes[o-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&o--,r==t.dom&&o==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(o==0||r.nodeType!=1||r.childNodes[o-1].nodeName!="BR")&&(a=rU(t,r,o,e))}a==null&&(a=nU(t,i,e));let l=t.docView.nearestDesc(i,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function kC(t){return t.top<t.bottom||t.left<t.right}function Es(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(kC(r))return r}return Array.prototype.find.call(n,kC)||t.getBoundingClientRect()}const sU=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function s3(t,e,n){let{node:r,offset:o,atom:s}=t.docView.domFromPos(e,n<0?-1:1),i=Zf||zr;if(r.nodeType==3)if(i&&(sU.test(r.nodeValue)||(n<0?!o:o==r.nodeValue.length))){let l=Es(jo(r,o,o),n);if(zr&&o&&/\s/.test(r.nodeValue[o-1])&&o<r.nodeValue.length){let c=Es(jo(r,o-1,o-1),-1);if(c.top==l.top){let u=Es(jo(r,o,o+1),-1);if(u.top!=l.top)return $u(u,u.left<c.left)}}return l}else{let l=o,c=o,u=n<0?1:-1;return n<0&&!o?(c++,u=-1):n>=0&&o==r.nodeValue.length?(l--,u=1):n<0?l--:c++,$u(Es(jo(r,l,c),u),u<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&o&&(n<0||o==oo(r))){let l=r.childNodes[o-1];if(l.nodeType==1)return Cb(l.getBoundingClientRect(),!1)}if(s==null&&o<oo(r)){let l=r.childNodes[o];if(l.nodeType==1)return Cb(l.getBoundingClientRect(),!0)}return Cb(r.getBoundingClientRect(),n>=0)}if(s==null&&o&&(n<0||o==oo(r))){let l=r.childNodes[o-1],c=l.nodeType==3?jo(l,oo(l)-(i?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return $u(Es(c,1),!1)}if(s==null&&o<oo(r)){let l=r.childNodes[o];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?jo(l,0,i?0:1):l.nodeType==1?l:null:null;if(c)return $u(Es(c,-1),!0)}return $u(Es(r.nodeType==3?jo(r):r,-n),n>=0)}function $u(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function Cb(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function i3(t,e,n){let r=t.state,o=t.root.activeElement;r!=e&&t.updateState(e),o!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),o!=t.dom&&o&&o.focus()}}function iU(t,e,n){let r=e.selection,o=n=="up"?r.$from:r.$to;return i3(t,e,()=>{let{node:s}=t.docView.domFromPos(o.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let i=s3(t,o.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=jo(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(n=="up"?i.top-u.top>(u.bottom-i.top)*2:u.bottom-i.bottom>(i.bottom-u.top)*2))return!1}}return!0})}const aU=/[\u0590-\u08ac]/;function lU(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let o=r.parentOffset,s=!o,i=o==r.parent.content.size,a=t.domSelection();return!aU.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?s:i:i3(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:d}=t.domSelectionRange(),f=a.caretBidiLevel;a.modify("move",n,"character");let p=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:h,focusOffset:y}=t.domSelectionRange(),g=h&&!p.contains(h.nodeType==1?h:h.parentNode)||l==h&&c==y;try{a.collapse(u,d),l&&(l!=u||c!=d)&&a.extend&&a.extend(l,c)}catch(b){}return f!=null&&(a.caretBidiLevel=f),g})}let _C=null,$C=null,EC=!1;function cU(t,e,n){return _C==e&&$C==n?EC:(_C=e,$C=n,EC=n=="up"||n=="down"?iU(t,e,n):lU(t,e,n))}const ir=0,SC=1,na=2,ko=3;class Jf{constructor(e,n,r,o){this.parent=e,this.children=n,this.dom=r,this.contentDOM=o,this.dirty=ir,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let o=this.children[n];if(o==e)return r;r+=o.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,i;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((i=s.pmViewDesc)&&i.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(i)+i.size:this.posAtStart}else{let s,i;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((i=s.pmViewDesc)&&i.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(i):this.posAtEnd}let o;if(e==this.dom&&this.contentDOM)o=n>sn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))o=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){o=!1;break}if(s.previousSibling)break}if(o==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){o=!0;break}if(s.nextSibling)break}}return(o==null?r>0:o)?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,o=e;o;o=o.parentNode){let s=this.getDesc(o),i;if(s&&(!n||s.node))if(r&&(i=s.nodeDOM)&&!(i.nodeType==1?i.contains(e.nodeType==1?e:e.parentNode):i==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let o=e;o;o=o.parentNode){let s=this.getDesc(o);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let o=this.children[n],s=r+o.size;if(r==e&&s!=r){for(;!o.border&&o.children.length;)o=o.children[0];return o}if(e<s)return o.descAt(e-r-o.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,o=0;for(let s=0;r<this.children.length;r++){let i=this.children[r],a=s+i.size;if(a>e||i instanceof l3){o=e-s;break}s=a}if(o)return this.children[r].domFromPos(o-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof a3&&s.side>=0;r--);if(n<=0){let s,i=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,i=!1);return s&&n&&i&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?sn(s.dom)+1:0}}else{let s,i=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,i=!1);return s&&i&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?sn(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let o=-1,s=-1;for(let i=r,a=0;;a++){let l=this.children[a],c=i+l.size;if(o==-1&&e<=c){let u=i+l.border;if(e>=u&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,u);e=i;for(let d=a;d>0;d--){let f=this.children[d-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){o=sn(f.dom)+1;break}e-=f.size}o==-1&&(o=0)}if(o>-1&&(c>n||a==this.children.length-1)){n=c;for(let u=a+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){s=sn(d.dom);break}n+=d.size}s==-1&&(s=this.contentDOM.childNodes.length);break}i=c}return{node:this.contentDOM,from:e,to:n,fromOffset:o,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,o=!1){let s=Math.min(e,n),i=Math.max(e,n);for(let f=0,p=0;f<this.children.length;f++){let h=this.children[f],y=p+h.size;if(s>p&&i<y)return h.setSelection(e-p-h.border,n-p-h.border,r,o);p=y}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),c=r.getSelection(),u=!1;if((zr||fn)&&e==n){let{node:f,offset:p}=a;if(f.nodeType==3){if(u=!!(p&&f.nodeValue[p-1]==`
`),u&&p==f.nodeValue.length)for(let h=f,y;h;h=h.parentNode){if(y=h.nextSibling){y.nodeName=="BR"&&(a=l={node:y.parentNode,offset:sn(y)+1});break}let g=h.pmViewDesc;if(g&&g.node&&g.node.isBlock)break}}else{let h=f.childNodes[p-1];u=h&&(h.nodeName=="BR"||h.contentEditable=="false")}}if(zr&&c.focusNode&&c.focusNode!=l.node&&c.focusNode.nodeType==1){let f=c.focusNode.childNodes[c.focusOffset];f&&f.contentEditable=="false"&&(o=!0)}if(!(o||u&&fn)&&Oa(a.node,a.offset,c.anchorNode,c.anchorOffset)&&Oa(l.node,l.offset,c.focusNode,c.focusOffset))return;let d=!1;if((c.extend||e==n)&&!u){c.collapse(a.node,a.offset);try{e!=n&&c.extend(l.node,l.offset),d=!0}catch(f){}}if(!d){if(e>n){let p=a;a=l,l=p}let f=document.createRange();f.setEnd(l.node,l.offset),f.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(f)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,o=0;o<this.children.length;o++){let s=this.children[o],i=r+s.size;if(r==i?e<=i&&n>=r:e<i&&n>r){let a=r+s.border,l=i-s.border;if(e>=a&&n<=l){this.dirty=e==r||n==i?na:SC,e==a&&n==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=ko:s.markDirty(e-a,n-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?na:ko}r=i}this.dirty=na}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?na:SC;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class a3 extends Jf{constructor(e,n,r,o){let s,i=n.type.toDOM;if(typeof i=="function"&&(i=i(r,()=>{if(!s)return o;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(i.nodeType!=1){let a=document.createElement("span");a.appendChild(i),i=a}i.contentEditable="false",i.classList.add("ProseMirror-widget")}super(e,[],i,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==ir&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class uU extends Jf{constructor(e,n,r,o){super(e,[],n,null),this.textDOM=r,this.text=o}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Ia extends Jf{constructor(e,n,r,o){super(e,[],r,o),this.mark=n}static create(e,n,r,o){let s=o.nodeViews[n.type.name],i=s&&s(n,o,r);return(!i||!i.dom)&&(i=$n.renderSpec(document,n.type.spec.toDOM(n,r))),new Ia(e,n,i.dom,i.contentDOM||i.dom)}parseRule(){return this.dirty&ko||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=ko&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=ir){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=ir}}slice(e,n,r){let o=Ia.create(this.parent,this.mark,!0,r),s=this.children,i=this.size;n<i&&(s=rw(s,n,i,r)),e>0&&(s=rw(s,0,e,r));for(let a=0;a<s.length;a++)s[a].parent=o;return o.children=s,o}}class si extends Jf{constructor(e,n,r,o,s,i,a,l,c){super(e,[],s,i),this.node=n,this.outerDeco=r,this.innerDeco=o,this.nodeDOM=a}static create(e,n,r,o,s,i){let a=s.nodeViews[n.type.name],l,c=a&&a(n,s,()=>{if(!l)return i;if(l.parent)return l.parent.posBeforeChild(l)},r,o),u=c&&c.dom,d=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:d}=$n.renderSpec(document,n.type.spec.toDOM(n)));!d&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let f=u;return u=d3(u,r,n),c?l=new dU(e,n,r,o,u,d||null,f,c,s,i+1):n.isText?new f1(e,n,r,o,u,f,s):new si(e,n,r,o,u,d||null,f,s,i+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>L.empty)}return e}matchesNode(e,n,r){return this.dirty==ir&&e.eq(this.node)&&nw(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,o=n,s=e.composing?this.localCompositionInfo(e,n):null,i=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new pU(this,i&&i.node,e);gU(this.node,this.innerDeco,(c,u,d)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!d&&l.syncToMarks(u==this.node.childCount?Ne.none:this.node.child(u).marks,r,e),l.placeWidget(c,e,o)},(c,u,d,f)=>{l.syncToMarks(c.marks,r,e);let p;l.findNodeMatch(c,u,d,f)||a&&e.state.selection.from>o&&e.state.selection.to<o+c.nodeSize&&(p=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,u,d,p,e)||l.updateNextNode(c,u,d,e,f,o)||l.addNode(c,u,d,e,o),o+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==na)&&(i&&this.protectLocalComposition(e,i),c3(this.contentDOM,this.children,e),vc&&yU(this.dom))}localCompositionInfo(e,n){let{from:r,to:o}=e.state.selection;if(!(e.state.selection instanceof ae)||r<n||o>n+this.node.content.size)return null;let s=e.domSelectionRange(),i=bU(s.focusNode,s.focusOffset);if(!i||!this.dom.contains(i.parentNode))return null;if(this.node.inlineContent){let a=i.nodeValue,l=vU(this.node.content,a,r-n,o-n);return l<0?null:{node:i,pos:l,text:a}}else return{node:i,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:o}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let i=new uU(this,s,n,o);e.input.compositionNodes.push(i),this.children=rw(this.children,r,r+o.length,e,i)}update(e,n,r,o){return this.dirty==ko||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,o),!0)}updateInner(e,n,r,o){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(o,this.posAtStart),this.dirty=ir}updateOuterDeco(e){if(nw(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=u3(this.dom,this.nodeDOM,tw(this.outerDeco,this.node,n),tw(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function CC(t,e,n,r,o){d3(r,e,t);let s=new si(void 0,t,e,n,r,r,r,o,0);return s.contentDOM&&s.updateChildren(o,0),s}class f1 extends si{constructor(e,n,r,o,s,i,a){super(e,n,r,o,s,null,i,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,o){return this.dirty==ko||this.dirty!=ir&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=ir||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,o.trackWrites==this.nodeDOM&&(o.trackWrites=null)),this.node=e,this.dirty=ir,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let o=this.node.cut(e,n),s=document.createTextNode(o.text);return new f1(this.parent,o,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=ko)}get domAtom(){return!1}}class l3 extends Jf{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==ir&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class dU extends si{constructor(e,n,r,o,s,i,a,l,c,u){super(e,n,r,o,s,i,a,c,u),this.spec=l}update(e,n,r,o){if(this.dirty==ko)return!1;if(this.spec.update){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,o),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,o)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,o){this.spec.setSelection?this.spec.setSelection(e,n,r):super.setSelection(e,n,r,o)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function c3(t,e,n){let r=t.firstChild,o=!1;for(let s=0;s<e.length;s++){let i=e[s],a=i.dom;if(a.parentNode==t){for(;a!=r;)r=TC(r),o=!0;r=r.nextSibling}else o=!0,t.insertBefore(a,r);if(i instanceof Ia){let l=r?r.previousSibling:t.lastChild;c3(i.contentDOM,i.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=TC(r),o=!0;o&&n.trackWrites==t&&(n.trackWrites=null)}const bd=function(t){t&&(this.nodeName=t)};bd.prototype=Object.create(null);const ra=[new bd];function tw(t,e,n){if(t.length==0)return ra;let r=n?ra[0]:new bd,o=[r];for(let s=0;s<t.length;s++){let i=t[s].type.attrs;if(i){i.nodeName&&o.push(r=new bd(i.nodeName));for(let a in i){let l=i[a];l!=null&&(n&&o.length==1&&o.push(r=new bd(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return o}function u3(t,e,n,r){if(n==ra&&r==ra)return e;let o=e;for(let s=0;s<r.length;s++){let i=r[s],a=n[s];if(s){let l;a&&a.nodeName==i.nodeName&&o!=t&&(l=o.parentNode)&&l.nodeName.toLowerCase()==i.nodeName||(l=document.createElement(i.nodeName),l.pmIsDeco=!0,l.appendChild(o),a=ra[0]),o=l}fU(o,a||ra[0],i)}return o}function fU(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],o=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)o.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<o.length;s++)r.indexOf(o[s])==-1&&t.classList.add(o[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,o;for(;o=r.exec(e.style);)t.style.removeProperty(o[1])}n.style&&(t.style.cssText+=n.style)}}function d3(t,e,n){return u3(t,t,ra,tw(e,n,t.nodeType!=1))}function nw(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function TC(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class pU{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=hU(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let o=0,s=this.stack.length>>1,i=Math.min(s,e.length);for(;o<i&&(o==s-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&e[o].type.spec.spanning!==!1;)o++;for(;o<s;)this.destroyRest(),this.top.dirty=ir,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=Ia.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,o){let s=-1,i;if(o>=this.preMatch.index&&(i=this.preMatch.matches[o-this.preMatch.index]).parent==this.top&&i.matchesNode(e,n,r))s=this.top.children.indexOf(i,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,o,s){let i=this.top.children[o];return i.dirty==ko&&i.dom==i.contentDOM&&(i.dirty=na),i.update(e,n,r,s)?(this.destroyBetween(this.index,o),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let o=this.index;o<this.top.children.length;o++)if(this.top.children[o]==r)return o}return-1}e=n}}updateNextNode(e,n,r,o,s,i){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof si){let c=this.preMatch.matched.get(l);if(c!=null&&c!=s)return!1;let u=l.dom,d,f=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=ko&&nw(n,l.outerDeco));if(!f&&l.update(e,n,r,o))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!f&&(d=this.recreateWrapper(l,e,n,r,o,i)))return this.top.children[this.index]=d,d.contentDOM&&(d.dirty=na,d.updateChildren(o,i+1),d.dirty=ir),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,o,s,i){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content))return null;let a=si.create(this.top,n,r,o,s,i);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,n,r,o,s){let i=si.create(this.top,e,n,r,o,s);i.contentDOM&&i.updateChildren(o,s+1),this.top.children.splice(this.index++,0,i),this.changed=!0}placeWidget(e,n,r){let o=this.index<this.top.children.length?this.top.children[this.index]:null;if(o&&o.matchesWidget(e)&&(e==o.widget||!o.widget.type.toDOM.parentNode))this.index++;else{let s=new a3(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof Ia;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof f1)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((fn||Kt)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let o=new l3(this.top,[],r,null);n!=this.top?n.children.push(o):n.children.splice(this.index++,0,o),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function hU(t,e){let n=e,r=n.children.length,o=t.childCount,s=new Map,i=[];e:for(;o>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof Ia)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(o-1))break;--o,s.set(a,o),i.push(a)}}return{index:o,matched:s,matches:i.reverse()}}function mU(t,e){return t.type.side-e.type.side}function gU(t,e,n,r){let o=e.locals(t),s=0;if(o.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,o,e.forChild(s,u),c),s+=u.nodeSize}return}let i=0,a=[],l=null;for(let c=0;;){let u,d;for(;i<o.length&&o[i].to==s;){let g=o[i++];g.widget&&(u?(d||(d=[u])).push(g):u=g)}if(u)if(d){d.sort(mU);for(let g=0;g<d.length;g++)n(d[g],c,!!l)}else n(u,c,!!l);let f,p;if(l)p=-1,f=l,l=null;else if(c<t.childCount)p=c,f=t.child(c++);else break;for(let g=0;g<a.length;g++)a[g].to<=s&&a.splice(g--,1);for(;i<o.length&&o[i].from<=s&&o[i].to>s;)a.push(o[i++]);let h=s+f.nodeSize;if(f.isText){let g=h;i<o.length&&o[i].from<g&&(g=o[i].from);for(let b=0;b<a.length;b++)a[b].to<g&&(g=a[b].to);g<h&&(l=f.cut(g-s),f=f.cut(0,g-s),h=g,p=-1)}let y=f.isInline&&!f.isLeaf?a.filter(g=>!g.inline):a.slice();r(f,y,e.forChild(s,f),p),s=h}}function yU(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function bU(t,e){for(;;){if(t.nodeType==3)return t;if(t.nodeType==1&&e>0){if(t.childNodes.length>e&&t.childNodes[e].nodeType==3)return t.childNodes[e];t=t.childNodes[e-1],e=oo(t)}else if(t.nodeType==1&&e<t.childNodes.length)t=t.childNodes[e],e=0;else return null}}function vU(t,e,n,r){for(let o=0,s=0;o<t.childCount&&s<=r;){let i=t.child(o++),a=s;if(s+=i.nodeSize,!i.isText)continue;let l=i.text;for(;o<t.childCount;){let c=t.child(o++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=n){if(s>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=n)return a+c;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function rw(t,e,n,r,o){let s=[];for(let i=0,a=0;i<t.length;i++){let l=t[i],c=a,u=a+=l.size;c>=n||u<=e?s.push(l):(c<e&&s.push(l.slice(0,e-c,r)),o&&(s.push(o),o=void 0),u>n&&s.push(l.slice(n-c,l.size,r)))}return s}function Tk(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let o=t.docView.nearestDesc(n.focusNode),s=o&&o.size==0,i=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(i<0)return null;let a=r.resolve(i),l,c;if(d1(n)){for(l=a;o&&!o.node;)o=o.parent;let u=o.node;if(o&&u.isAtom&&ne.isSelectable(u)&&o.parent&&!(u.isInline&&WV(n.focusNode,n.focusOffset,o.dom))){let d=o.posBefore;c=new ne(i==d?a:r.resolve(d))}}else{let u=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(u<0)return null;l=r.resolve(u)}if(!c){let u=e=="pointer"||t.state.selection.head<a.pos&&!s?1:-1;c=Ak(t,l,a,u)}return c}function f3(t){return t.editable?t.hasFocus():h3(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function es(t,e=!1){let n=t.state.selection;if(p3(t,n),!!f3(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Kt){let r=t.domSelectionRange(),o=t.domObserver.currentSelection;if(r.anchorNode&&o.anchorNode&&Oa(r.anchorNode,r.anchorOffset,o.anchorNode,o.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)xU(t);else{let{anchor:r,head:o}=n,s,i;AC&&!(n instanceof ae)&&(n.$from.parent.inlineContent||(s=NC(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(i=NC(t,n.to))),t.docView.setSelection(r,o,t.root,e),AC&&(s&&PC(s),i&&PC(i)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&wU(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const AC=fn||Kt&&HV<63;function NC(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),o=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(fn&&o&&o.contentEditable=="false")return Tb(o);if((!o||o.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(o)return Tb(o);if(s)return Tb(s)}}function Tb(t){return t.contentEditable="true",fn&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function PC(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function wU(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,o=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=o)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!f3(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function xU(t){let e=t.domSelection(),n=document.createRange(),r=t.cursorWrapper.dom,o=r.nodeName=="IMG";o?n.setEnd(r.parentNode,sn(r)+1):n.setEnd(r,0),n.collapse(!1),e.removeAllRanges(),e.addRange(n),!o&&!t.state.selection.visible&&Tn&&oi<=11&&(r.disabled=!0,r.disabled=!1)}function p3(t,e){if(e instanceof ne){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(OC(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else OC(t)}function OC(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function Ak(t,e,n,r){return t.someProp("createSelectionBetween",o=>o(t,e,n))||ae.between(e,n,r)}function IC(t){return t.editable&&!t.hasFocus()?!1:h3(t)}function h3(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch(n){return!1}}function kU(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return Oa(e.node,e.offset,n.anchorNode,n.anchorOffset)}function ow(t,e){let{$anchor:n,$head:r}=t.selection,o=e>0?n.max(r):n.min(r),s=o.parent.inlineContent?o.depth?t.doc.resolve(e>0?o.after():o.before()):null:o;return s&&Q.findFrom(s,e)}function Ns(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function RC(t,e,n){let r=t.state.selection;if(r instanceof ae)if(n.indexOf("s")>-1){let{$head:o}=r,s=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let i=t.state.doc.resolve(o.pos+s.nodeSize*(e<0?-1:1));return Ns(t,new ae(r.$anchor,i))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let o=ow(t.state,e);return o&&o instanceof ne?Ns(t,o):!1}else if(!(Xn&&n.indexOf("m")>-1)){let o=r.$head,s=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter,i;if(!s||s.isText)return!1;let a=e<0?o.pos-s.nodeSize:o.pos;return s.isAtom||(i=t.docView.descAt(a))&&!i.contentDOM?ne.isSelectable(s)?Ns(t,new ne(e<0?t.state.doc.resolve(o.pos-s.nodeSize):o)):Zf?Ns(t,new ae(t.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof ne&&r.node.isInline)return Ns(t,new ae(e>0?r.$to:r.$from));{let o=ow(t.state,e);return o?Ns(t,o):!1}}}function Gm(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function vd(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function al(t,e){return e<0?_U(t):$U(t)}function _U(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let o,s,i=!1;for(zr&&n.nodeType==1&&r<Gm(n)&&vd(n.childNodes[r],-1)&&(i=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(vd(a,-1))o=n,s=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(m3(n))break;{let a=n.previousSibling;for(;a&&vd(a,-1);)o=n.parentNode,s=sn(a),a=a.previousSibling;if(a)n=a,r=Gm(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}i?sw(t,n,r):o&&sw(t,o,s)}function $U(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let o=Gm(n),s,i;for(;;)if(r<o){if(n.nodeType!=1)break;let a=n.childNodes[r];if(vd(a,1))s=n,i=++r;else break}else{if(m3(n))break;{let a=n.nextSibling;for(;a&&vd(a,1);)s=a.parentNode,i=sn(a)+1,a=a.nextSibling;if(a)n=a,r=0,o=Gm(n);else{if(n=n.parentNode,n==t.dom)break;r=o=0}}}s&&sw(t,s,i)}function m3(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function EU(t,e){for(;t&&e==t.childNodes.length&&!Sk(t);)e=sn(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function SU(t,e){for(;t&&!e&&!Sk(t);)e=sn(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function sw(t,e,n){if(e.nodeType!=3){let s,i;(i=EU(e,n))?(e=i,n=0):(s=SU(e,n))&&(e=s,n=s.nodeValue.length)}let r=t.domSelection();if(d1(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:o}=t;setTimeout(()=>{t.state==o&&es(t)},50)}function MC(t,e){let n=t.state.doc.resolve(e);if(!(Kt||KV)&&n.parent.inlineContent){let o=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),i=(s.top+s.bottom)/2;if(i>o.top&&i<o.bottom&&Math.abs(s.left-o.left)>1)return s.left<o.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),i=(s.top+s.bottom)/2;if(i>o.top&&i<o.bottom&&Math.abs(s.left-o.left)>1)return s.left>o.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function DC(t,e,n){let r=t.state.selection;if(r instanceof ae&&!r.empty||n.indexOf("s")>-1||Xn&&n.indexOf("m")>-1)return!1;let{$from:o,$to:s}=r;if(!o.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let i=ow(t.state,e);if(i&&i instanceof ne)return Ns(t,i)}if(!o.parent.inlineContent){let i=e<0?o:s,a=r instanceof Bn?Q.near(i,e):Q.findFrom(i,e);return a?Ns(t,a):!1}return!1}function LC(t,e){if(!(t.state.selection instanceof ae))return!0;let{$head:n,$anchor:r,empty:o}=t.state.selection;if(!n.sameParent(r))return!0;if(!o)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let i=t.state.tr;return e<0?i.delete(n.pos-s.nodeSize,n.pos):i.delete(n.pos,n.pos+s.nodeSize),t.dispatch(i),!0}return!1}function jC(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function CU(t){if(!fn||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;jC(t,r,"true"),setTimeout(()=>jC(t,r,"false"),20)}return!1}function TU(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function AU(t,e){let n=e.keyCode,r=TU(e);if(n==8||Xn&&n==72&&r=="c")return LC(t,-1)||al(t,-1);if(n==46&&!e.shiftKey||Xn&&n==68&&r=="c")return LC(t,1)||al(t,1);if(n==13||n==27)return!0;if(n==37||Xn&&n==66&&r=="c"){let o=n==37?MC(t,t.state.selection.from)=="ltr"?-1:1:-1;return RC(t,o,r)||al(t,o)}else if(n==39||Xn&&n==70&&r=="c"){let o=n==39?MC(t,t.state.selection.from)=="ltr"?1:-1:1;return RC(t,o,r)||al(t,o)}else{if(n==38||Xn&&n==80&&r=="c")return DC(t,-1,r)||al(t,-1);if(n==40||Xn&&n==78&&r=="c")return CU(t)||DC(t,1,r)||al(t,1);if(r==(Xn?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function Nk(t,e){t.someProp("transformCopied",p=>{e=p(e,t)});let n=[],{content:r,openStart:o,openEnd:s}=e;for(;o>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){o--,s--;let p=r.firstChild;n.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),r=p.content}let i=t.someProp("clipboardSerializer")||$n.fromSchema(t.state.schema),a=w3(),l=a.createElement("div");l.appendChild(i.serializeFragment(r,{document:a}));let c=l.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=v3[c.nodeName.toLowerCase()]);){for(let p=u.length-1;p>=0;p--){let h=a.createElement(u[p]);for(;l.firstChild;)h.appendChild(l.firstChild);l.appendChild(h),d++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${o} ${s}${d?` -${d}`:""} ${JSON.stringify(n)}`);let f=t.someProp("clipboardTextSerializer",p=>p(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:f}}function Pk(t,e,n,r,o){let s=o.parent.type.spec.code,i,a;if(!n&&!e)return null;let l=e&&(r||s||!n);if(l){if(t.someProp("transformPastedText",f=>{e=f(e,s||r,t)}),s)return e?new H(L.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):H.empty;let d=t.someProp("clipboardTextParser",f=>f(e,o,r,t));if(d)a=d;else{let f=o.marks(),{schema:p}=t.state,h=$n.fromSchema(p);i=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(y=>{let g=i.appendChild(document.createElement("p"));y&&g.appendChild(h.serializeNode(p.text(y,f)))})}}else t.someProp("transformPastedHTML",d=>{n=d(n,t)}),i=OU(n),Zf&&IU(i);let c=i&&i.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let f=i.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;i=f}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||hc.fromSchema(t.state.schema)).parseSlice(i,{preserveWhitespace:!!(l||u),context:o,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!NU.test(f.parentNode.nodeName)?{ignore:!0}:null}})),u)a=RU(FC(a,+u[1],+u[2]),u[4]);else if(a=H.maxOpen(PU(a.content,o),!0),a.openStart||a.openEnd){let d=0,f=0;for(let p=a.content.firstChild;d<a.openStart&&!p.type.spec.isolating;d++,p=p.firstChild);for(let p=a.content.lastChild;f<a.openEnd&&!p.type.spec.isolating;f++,p=p.lastChild);a=FC(a,d,f)}return t.someProp("transformPasted",d=>{a=d(a,t)}),a}const NU=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function PU(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let o=e.node(n).contentMatchAt(e.index(n)),s,i=[];if(t.forEach(a=>{if(!i)return;let l=o.findWrapping(a.type),c;if(!l)return i=null;if(c=i.length&&s.length&&y3(l,s,a,i[i.length-1],0))i[i.length-1]=c;else{i.length&&(i[i.length-1]=b3(i[i.length-1],s.length));let u=g3(a,l);i.push(u),o=o.matchType(u.type),s=l}}),i)return L.from(i)}return t}function g3(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,L.from(t));return t}function y3(t,e,n,r,o){if(o<t.length&&o<e.length&&t[o]==e[o]){let s=y3(t,e,n,r.lastChild,o+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(o==t.length-1?n.type:t[o+1]))return r.copy(r.content.append(L.from(g3(n,t,o+1))))}}function b3(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,b3(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(L.empty,!0);return t.copy(n.append(r))}function iw(t,e,n,r,o,s){let i=e<0?t.firstChild:t.lastChild,a=i.content;return t.childCount>1&&(s=0),o<r-1&&(a=iw(a,e,n,r,o+1,s)),o>=n&&(a=e<0?i.contentMatchAt(0).fillBefore(a,s<=o).append(a):a.append(i.contentMatchAt(i.childCount).fillBefore(L.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,i.copy(a))}function FC(t,e,n){return e<t.openStart&&(t=new H(iw(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new H(iw(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const v3={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let BC=null;function w3(){return BC||(BC=document.implementation.createHTMLDocument("title"))}function OU(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=w3().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),o;if((o=r&&v3[r[1].toLowerCase()])&&(t=o.map(s=>"<"+s+">").join("")+t+o.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=t,o)for(let s=0;s<o.length;s++)n=n.querySelector(o[s])||n;return n}function IU(t){let e=t.querySelectorAll(Kt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function RU(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch(a){return t}let{content:o,openStart:s,openEnd:i}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;o=L.from(l.create(r[a+1],o)),s++,i++}return new H(o,s,i)}const pn={},hn={},MU={touchstart:!0,touchmove:!0};class DU{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function LU(t){for(let e in pn){let n=pn[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{FU(t,r)&&!Ok(t,r)&&(t.editable||!(r.type in hn))&&n(t,r)},MU[e]?{passive:!0}:void 0)}fn&&t.dom.addEventListener("input",()=>null),aw(t)}function Us(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function jU(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function aw(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>Ok(t,r))})}function Ok(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function FU(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function BU(t,e){!Ok(t,e)&&pn[e.type]&&(t.editable||!(e.type in hn))&&pn[e.type](t,e)}hn.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!k3(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Tr&&Kt&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),vc&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",o=>o(t,Zi(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||AU(t,n)?n.preventDefault():Us(t,"key")};hn.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};hn.keypress=(t,e)=>{let n=e;if(k3(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Xn&&n.metaKey)return;if(t.someProp("handleKeyPress",o=>o(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof ae)||!r.$from.sameParent(r.$to)){let o=String.fromCharCode(n.charCode);!/[\r\n]/.test(o)&&!t.someProp("handleTextInput",s=>s(t,r.$from.pos,r.$to.pos,o))&&t.dispatch(t.state.tr.insertText(o).scrollIntoView()),n.preventDefault()}};function p1(t){return{left:t.clientX,top:t.clientY}}function zU(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function Ik(t,e,n,r,o){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let i=s.depth+1;i>0;i--)if(t.someProp(e,a=>i>s.depth?a(t,n,s.nodeAfter,s.before(i),o,!0):a(t,n,s.node(i),s.before(i),o,!1)))return!0;return!1}function Zl(t,e,n){t.focused||t.focus();let r=t.state.tr.setSelection(e);n=="pointer"&&r.setMeta("pointer",!0),t.dispatch(r)}function qU(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&ne.isSelectable(r)?(Zl(t,new ne(n),"pointer"),!0):!1}function WU(t,e){if(e==-1)return!1;let n=t.state.selection,r,o;n instanceof ne&&(r=n.node);let s=t.state.doc.resolve(e);for(let i=s.depth+1;i>0;i--){let a=i>s.depth?s.nodeAfter:s.node(i);if(ne.isSelectable(a)){r&&n.$from.depth>0&&i>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?o=s.before(n.$from.depth):o=s.before(i);break}}return o!=null?(Zl(t,ne.create(t.state.doc,o),"pointer"),!0):!1}function VU(t,e,n,r,o){return Ik(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(o?WU(t,n):qU(t,n))}function UU(t,e,n,r){return Ik(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",o=>o(t,e,r))}function HU(t,e,n,r){return Ik(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",o=>o(t,e,r))||KU(t,n,r)}function KU(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Zl(t,ae.create(r,0,r.content.size),"pointer"),!0):!1;let o=r.resolve(e);for(let s=o.depth+1;s>0;s--){let i=s>o.depth?o.nodeAfter:o.node(s),a=o.before(s);if(i.inlineContent)Zl(t,ae.create(r,a+1,a+1+i.content.size),"pointer");else if(ne.isSelectable(i))Zl(t,ne.create(r,a),"pointer");else continue;return!0}}function Rk(t){return Zm(t)}const x3=Xn?"metaKey":"ctrlKey";pn.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=Rk(t),o=Date.now(),s="singleClick";o-t.input.lastClick.time<500&&zU(n,t.input.lastClick)&&!n[x3]&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:o,x:n.clientX,y:n.clientY,type:s};let i=t.posAtCoords(p1(n));i&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new GU(t,i,n,!!r)):(s=="doubleClick"?UU:HU)(t,i.pos,i.inside,n)?n.preventDefault():Us(t,"pointer"))};class GU{constructor(e,n,r,o){this.view=e,this.pos=n,this.event=r,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[x3],this.allowDefault=r.shiftKey;let s,i;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),i=n.inside;else{let u=e.state.doc.resolve(n.pos);s=u.parent,i=u.depth?u.before():0}const a=o?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l?l.dom:null;let{selection:c}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof ne&&c.from<=i&&c.to>i)&&(this.mightDrag={node:s,pos:i,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&zr&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Us(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>es(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(p1(e))),this.updateAllowDefault(e),this.allowDefault||!n?Us(this.view,"pointer"):VU(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||fn&&this.mightDrag&&!this.mightDrag.node.isAtom||Kt&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Zl(this.view,Q.near(this.view.state.doc.resolve(n.pos)),"pointer"),e.preventDefault()):Us(this.view,"pointer")}move(e){this.updateAllowDefault(e),Us(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}pn.touchstart=t=>{t.input.lastTouch=Date.now(),Rk(t),Us(t,"pointer")};pn.touchmove=t=>{t.input.lastTouch=Date.now(),Us(t,"pointer")};pn.contextmenu=t=>Rk(t);function k3(t,e){return t.composing?!0:fn&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const ZU=Tr?5e3:-1;hn.compositionstart=hn.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),Zm(t,!0),t.markCursor=null;else if(Zm(t),zr&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let o=r.focusNode,s=r.focusOffset;o&&o.nodeType==1&&s!=0;){let i=s<0?o.lastChild:o.childNodes[s-1];if(!i)break;if(i.nodeType==3){t.domSelection().collapse(i,i.nodeValue.length);break}else o=i,s=-1}}t.input.composing=!0}_3(t,ZU)};hn.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,_3(t,20))};function _3(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Zm(t),e))}function $3(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=JU());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function JU(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Zm(t,e=!1){if(!(Tr&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),$3(t),e||t.docView&&t.docView.dirty){let n=Tk(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):t.updateState(t.state),!0}return!1}}function YU(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),o=document.createRange();o.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const wc=Tn&&oi<15||vc&&GV<604;pn.copy=hn.cut=(t,e)=>{let n=e,r=t.state.selection,o=n.type=="cut";if(r.empty)return;let s=wc?null:n.clipboardData,i=r.content(),{dom:a,text:l}=Nk(t,i);s?(n.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):YU(t,a),o&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function XU(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function QU(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let o=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?mf(t,r.value,null,o,e):mf(t,r.textContent,r.innerHTML,o,e)},50)}function mf(t,e,n,r,o){let s=Pk(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,o,s||H.empty)))return!0;if(!s)return!1;let i=XU(s),a=i?t.state.tr.replaceSelectionWith(i,r):t.state.tr.replaceSelection(s);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}hn.paste=(t,e)=>{let n=e;if(t.composing&&!Tr)return;let r=wc?null:n.clipboardData,o=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&mf(t,r.getData("text/plain"),r.getData("text/html"),o,n)?n.preventDefault():QU(t,n)};class eH{constructor(e,n){this.slice=e,this.move=n}}const E3=Xn?"altKey":"ctrlKey";pn.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let o=t.state.selection,s=o.empty?null:t.posAtCoords(p1(n));if(!(s&&s.pos>=o.from&&s.pos<=(o instanceof ne?o.to-1:o.to))){if(r&&r.mightDrag)t.dispatch(t.state.tr.setSelection(ne.create(t.state.doc,r.mightDrag.pos)));else if(n.target&&n.target.nodeType==1){let c=t.docView.nearestDesc(n.target,!0);c&&c.node.type.spec.draggable&&c!=t.docView&&t.dispatch(t.state.tr.setSelection(ne.create(t.state.doc,c.posBefore)))}}let i=t.state.selection.content(),{dom:a,text:l}=Nk(t,i);n.dataTransfer.clearData(),n.dataTransfer.setData(wc?"Text":"text/html",a.innerHTML),n.dataTransfer.effectAllowed="copyMove",wc||n.dataTransfer.setData("text/plain",l),t.dragging=new eH(i,!n[E3])};pn.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};hn.dragover=hn.dragenter=(t,e)=>e.preventDefault();hn.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let o=t.posAtCoords(p1(n));if(!o)return;let s=t.state.doc.resolve(o.pos),i=r&&r.slice;i?t.someProp("transformPasted",h=>{i=h(i,t)}):i=Pk(t,n.dataTransfer.getData(wc?"Text":"text/plain"),wc?null:n.dataTransfer.getData("text/html"),!1,s);let a=!!(r&&!n[E3]);if(t.someProp("handleDrop",h=>h(t,n,i||H.empty,a))){n.preventDefault();return}if(!i)return;n.preventDefault();let l=i?LR(t.state.doc,s.pos,i):s.pos;l==null&&(l=s.pos);let c=t.state.tr;a&&c.deleteSelection();let u=c.mapping.map(l),d=i.openStart==0&&i.openEnd==0&&i.content.childCount==1,f=c.doc;if(d?c.replaceRangeWith(u,u,i.content.firstChild):c.replaceRange(u,u,i),c.doc.eq(f))return;let p=c.doc.resolve(u);if(d&&ne.isSelectable(i.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(i.content.firstChild))c.setSelection(new ne(p));else{let h=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((y,g,b,w)=>h=w),c.setSelection(Ak(t,p,c.doc.resolve(h)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};pn.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&es(t)},20))};pn.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};pn.beforeinput=(t,e)=>{if(Kt&&Tr&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,Zi(8,"Backspace")))))return;let{$cursor:o}=t.state.selection;o&&o.pos>0&&t.dispatch(t.state.tr.delete(o.pos-1,o.pos).scrollIntoView())},50)}};for(let t in hn)pn[t]=hn[t];function gf(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Jm{constructor(e,n){this.toDOM=e,this.spec=n||ga,this.side=this.spec.side||0}map(e,n,r,o){let{pos:s,deleted:i}=e.mapResult(n.from+o,this.side<0?-1:1);return i?null:new Jt(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Jm&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&gf(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class ii{constructor(e,n){this.attrs=e,this.spec=n||ga}map(e,n,r,o){let s=e.map(n.from+o,this.spec.inclusiveStart?-1:1)-r,i=e.map(n.to+o,this.spec.inclusiveEnd?1:-1)-r;return s>=i?null:new Jt(s,i,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof ii&&gf(this.attrs,e.attrs)&&gf(this.spec,e.spec)}static is(e){return e.type instanceof ii}destroy(){}}class Mk{constructor(e,n){this.attrs=e,this.spec=n||ga}map(e,n,r,o){let s=e.mapResult(n.from+o,1);if(s.deleted)return null;let i=e.mapResult(n.to+o,-1);return i.deleted||i.pos<=s.pos?null:new Jt(s.pos-r,i.pos-r,this)}valid(e,n){let{index:r,offset:o}=e.content.findIndex(n.from),s;return o==n.from&&!(s=e.child(r)).isText&&o+s.nodeSize==n.to}eq(e){return this==e||e instanceof Mk&&gf(this.attrs,e.attrs)&&gf(this.spec,e.spec)}destroy(){}}class Jt{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new Jt(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new Jt(e,e,new Jm(n,r))}static inline(e,n,r,o){return new Jt(e,n,new ii(r,o))}static node(e,n,r,o){return new Jt(e,n,new Mk(r,o))}get spec(){return this.type.spec}get inline(){return this.type instanceof ii}get widget(){return this.type instanceof Jm}}const xl=[],ga={};class rt{constructor(e,n){this.local=e.length?e:xl,this.children=n.length?n:xl}static create(e,n){return n.length?Ym(n,e,0,ga):Wt}find(e,n,r){let o=[];return this.findInner(e==null?0:e,n==null?1e9:n,o,0,r),o}findInner(e,n,r,o,s){for(let i=0;i<this.local.length;i++){let a=this.local[i];a.from<=n&&a.to>=e&&(!s||s(a.spec))&&r.push(a.copy(a.from+o,a.to+o))}for(let i=0;i<this.children.length;i+=3)if(this.children[i]<n&&this.children[i+1]>e){let a=this.children[i]+1;this.children[i+2].findInner(e-a,n-a,r,o+a,s)}}map(e,n,r){return this==Wt||e.maps.length==0?this:this.mapInner(e,n,0,0,r||ga)}mapInner(e,n,r,o,s){let i;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,o);l&&l.type.valid(n,l)?(i||(i=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?tH(this.children,i||[],e,n,r,o,s):i?new rt(i.sort(ya),xl):Wt}add(e,n){return n.length?this==Wt?rt.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let o,s=0;e.forEach((a,l)=>{let c=l+r,u;if(u=C3(n,a,c)){for(o||(o=this.children.slice());s<o.length&&o[s]<l;)s+=3;o[s]==l?o[s+2]=o[s+2].addInner(a,u,c+1):o.splice(s,0,l,l+a.nodeSize,Ym(u,a,c+1,ga)),s+=3}});let i=S3(s?T3(n):n,-r);for(let a=0;a<i.length;a++)i[a].type.valid(e,i[a])||i.splice(a--,1);return new rt(i.length?this.local.concat(i).sort(ya):this.local,o||this.children)}remove(e){return e.length==0||this==Wt?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,o=this.local;for(let s=0;s<r.length;s+=3){let i,a=r[s]+n,l=r[s+1]+n;for(let u=0,d;u<e.length;u++)(d=e[u])&&d.from>a&&d.to<l&&(e[u]=null,(i||(i=[])).push(d));if(!i)continue;r==this.children&&(r=this.children.slice());let c=r[s+2].removeInner(i,a+1);c!=Wt?r[s+2]=c:(r.splice(s,3),s-=3)}if(o.length){for(let s=0,i;s<e.length;s++)if(i=e[s])for(let a=0;a<o.length;a++)o[a].eq(i,n)&&(o==this.local&&(o=this.local.slice()),o.splice(a--,1))}return r==this.children&&o==this.local?this:o.length||r.length?new rt(o,r):Wt}forChild(e,n){if(this==Wt)return this;if(n.isLeaf)return rt.empty;let r,o;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let s=e+1,i=s+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<i&&l.to>s&&l.type instanceof ii){let c=Math.max(s,l.from)-s,u=Math.min(i,l.to)-s;c<u&&(o||(o=[])).push(l.copy(c,u))}}if(o){let a=new rt(o.sort(ya),xl);return r?new Ds([a,r]):a}return r||Wt}eq(e){if(this==e)return!0;if(!(e instanceof rt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return Dk(this.localsInner(e))}localsInner(e){if(this==Wt)return xl;if(e.inlineContent||!this.local.some(ii.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof ii||n.push(this.local[r]);return n}}rt.empty=new rt([],[]);rt.removeOverlap=Dk;const Wt=rt.empty;class Ds{constructor(e){this.members=e}map(e,n){const r=this.members.map(o=>o.map(e,n,ga));return Ds.from(r)}forChild(e,n){if(n.isLeaf)return rt.empty;let r=[];for(let o=0;o<this.members.length;o++){let s=this.members[o].forChild(e,n);s!=Wt&&(s instanceof Ds?r=r.concat(s.members):r.push(s))}return Ds.from(r)}eq(e){if(!(e instanceof Ds)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let o=0;o<this.members.length;o++){let s=this.members[o].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let i=0;i<s.length;i++)n.push(s[i])}}return n?Dk(r?n:n.sort(ya)):xl}static from(e){switch(e.length){case 0:return Wt;case 1:return e[0];default:return new Ds(e.every(n=>n instanceof rt)?e:e.reduce((n,r)=>n.concat(r instanceof rt?r:r.members),[]))}}}function tH(t,e,n,r,o,s,i){let a=t.slice();for(let c=0,u=s;c<n.maps.length;c++){let d=0;n.maps[c].forEach((f,p,h,y)=>{let g=y-h-(p-f);for(let b=0;b<a.length;b+=3){let w=a[b+1];if(w<0||f>w+u-d)continue;let x=a[b]+u-d;p>=x?a[b+1]=f<=x?-2:-1:h>=o&&g&&(a[b]+=g,a[b+1]+=g)}d+=g}),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=n.map(t[c]+s),d=u-o;if(d<0||d>=r.content.size){l=!0;continue}let f=n.map(t[c+1]+s,-1),p=f-o,{index:h,offset:y}=r.content.findIndex(d),g=r.maybeChild(h);if(g&&y==d&&y+g.nodeSize==p){let b=a[c+2].mapInner(n,g,u+1,t[c]+s+1,i);b!=Wt?(a[c]=d,a[c+1]=p,a[c+2]=b):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=nH(a,t,e,n,o,s,i),u=Ym(c,r,0,i);e=u.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,f=0;d<u.children.length;d+=3){let p=u.children[d];for(;f<a.length&&a[f]<p;)f+=3;a.splice(f,0,u.children[d],u.children[d+1],u.children[d+2])}}return new rt(e.sort(ya),a)}function S3(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let o=t[r];n.push(new Jt(o.from+e,o.to+e,o.type))}return n}function nH(t,e,n,r,o,s,i){function a(l,c){for(let u=0;u<l.local.length;u++){let d=l.local[u].map(r,o,c);d?n.push(d):i.onRemove&&i.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+s+1);return n}function C3(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,o=null;for(let s=0,i;s<t.length;s++)(i=t[s])&&i.from>n&&i.to<r&&((o||(o=[])).push(i),t[s]=null);return o}function T3(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Ym(t,e,n,r){let o=[],s=!1;e.forEach((a,l)=>{let c=C3(t,a,l+n);if(c){s=!0;let u=Ym(c,a,n+l+1,r);u!=Wt&&o.push(l,l+a.nodeSize,u)}});let i=S3(s?T3(t):t,-n).sort(ya);for(let a=0;a<i.length;a++)i[a].type.valid(e,i[a])||(r.onRemove&&r.onRemove(i[a].spec),i.splice(a--,1));return i.length||o.length?new rt(i,o):Wt}function ya(t,e){return t.from-e.from||t.to-e.to}function Dk(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let o=n+1;o<e.length;o++){let s=e[o];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[o]=s.copy(s.from,r.to),zC(e,o+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),zC(e,o,r.copy(s.from,r.to)));break}}}return e}function zC(t,e,n){for(;e<t.length&&ya(n,t[e])>0;)e++;t.splice(e,0,n)}function Ab(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=Wt&&e.push(r)}),t.cursorWrapper&&e.push(rt.create(t.state.doc,[t.cursorWrapper.deco])),Ds.from(e)}const rH={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},oH=Tn&&oi<=11;class sH{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class iH{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new sH,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let o=0;o<r.length;o++)this.queue.push(r[o]);Tn&&oi<=11&&r.some(o=>o.type=="childList"&&o.removedNodes.length||o.type=="characterData"&&o.oldValue.length>o.target.nodeValue.length)?this.flushSoon():this.flush()}),oH&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,rH)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(IC(this.view)){if(this.suppressingSelectionUpdates)return es(this.view);if(Tn&&oi<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Oa(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=hf(s))n.add(s);for(let s=e.anchorNode;s;s=hf(s))if(n.has(s)){r=s;break}let o=r&&this.view.docView.nearestDesc(r);if(o&&o.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),o=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&IC(e)&&!this.ignoreSelectionChange(r),s=-1,i=-1,a=!1,l=[];if(e.editable)for(let u=0;u<n.length;u++){let d=this.registerMutation(n[u],l);d&&(s=s<0?d.from:Math.min(d.from,s),i=i<0?d.to:Math.max(d.to,i),d.typeOver&&(a=!0))}if(zr&&l.length>1){let u=l.filter(d=>d.nodeName=="BR");if(u.length==2){let d=u[0],f=u[1];d.parentNode&&d.parentNode.parentNode==f.parentNode?f.remove():d.remove()}}let c=null;s<0&&o&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&d1(r)&&(c=Tk(e))&&c.eq(Q.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,es(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||o)&&(s>-1&&(e.docView.markDirty(s,i),aH(e)),this.handleDOMChange(s,i,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||es(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++)n.push(e.addedNodes[u]);if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let o=e.previousSibling,s=e.nextSibling;if(Tn&&oi<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:d,nextSibling:f}=e.addedNodes[u];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(o=d),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(s=f)}let i=o&&o.parentNode==e.target?sn(o)+1:0,a=r.localPosFromDOM(e.target,i,-1),l=s&&s.parentNode==e.target?sn(s):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}}let qC=new WeakMap,WC=!1;function aH(t){if(!qC.has(t)&&(qC.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=zr,WC)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),WC=!0}}function lH(t){let e;function n(l){l.preventDefault(),l.stopImmediatePropagation(),e=l.getTargetRanges()[0]}t.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",n,!0);let r=e.startContainer,o=e.startOffset,s=e.endContainer,i=e.endOffset,a=t.domAtPos(t.state.selection.anchor);return Oa(a.node,a.offset,s,i)&&([r,o,s,i]=[s,i,r,o]),{anchorNode:r,anchorOffset:o,focusNode:s,focusOffset:i}}function cH(t,e,n){let{node:r,fromOffset:o,toOffset:s,from:i,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),c,u=l.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],d1(l)||c.push({node:l.focusNode,offset:l.focusOffset})),Kt&&t.input.lastKeyCode===8)for(let g=s;g>o;g--){let b=r.childNodes[g-1],w=b.pmViewDesc;if(b.nodeName=="BR"&&!w){s=g;break}if(!w||w.size)break}let d=t.state.doc,f=t.someProp("domParser")||hc.fromSchema(t.state.schema),p=d.resolve(i),h=null,y=f.parse(r,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:o,to:s,preserveWhitespace:p.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:uH,context:p});if(c&&c[0].pos!=null){let g=c[0].pos,b=c[1]&&c[1].pos;b==null&&(b=g),h={anchor:g+i,head:b+i}}return{doc:y,sel:h,from:i,to:a}}function uH(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(fn&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||fn&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const dH=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function fH(t,e,n,r,o){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let T=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,A=Tk(t,T);if(A&&!t.state.selection.eq(A)){if(Kt&&Tr&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",q=>q(t,Zi(13,"Enter"))))return;let N=t.state.tr.setSelection(A);T=="pointer"?N.setMeta("pointer",!0):T=="key"&&N.scrollIntoView(),s&&N.setMeta("composition",s),t.dispatch(N)}return}let i=t.state.doc.resolve(e),a=i.sharedDepth(n);e=i.before(a+1),n=t.state.doc.resolve(n).after(a+1);let l=t.state.selection,c=cH(t,e,n),u=t.state.doc,d=u.slice(c.from,c.to),f,p;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(f=t.state.selection.to,p="end"):(f=t.state.selection.from,p="start"),t.input.lastKeyCode=null;let h=mH(d.content,c.doc.content,c.from,f,p);if((vc&&t.input.lastIOSEnter>Date.now()-225||Tr)&&o.some(T=>T.nodeType==1&&!dH.test(T.nodeName))&&(!h||h.endA>=h.endB)&&t.someProp("handleKeyDown",T=>T(t,Zi(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!h)if(r&&l instanceof ae&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))h={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let T=VC(t,t.state.doc,c.sel);if(T&&!T.eq(t.state.selection)){let A=t.state.tr.setSelection(T);s&&A.setMeta("composition",s),t.dispatch(A)}}return}if(Kt&&t.cursorWrapper&&c.sel&&c.sel.anchor==t.cursorWrapper.deco.from&&c.sel.head==c.sel.anchor){let T=h.endB-h.start;c.sel={anchor:c.sel.anchor+T,head:c.sel.anchor+T}}t.input.domChangeCount++,t.state.selection.from<t.state.selection.to&&h.start==h.endB&&t.state.selection instanceof ae&&(h.start>t.state.selection.from&&h.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?h.start=t.state.selection.from:h.endA<t.state.selection.to&&h.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(h.endB+=t.state.selection.to-h.endA,h.endA=t.state.selection.to)),Tn&&oi<=11&&h.endB==h.start+1&&h.endA==h.start&&h.start>c.from&&c.doc.textBetween(h.start-c.from-1,h.start-c.from+1)==" "&&(h.start--,h.endA--,h.endB--);let y=c.doc.resolveNoCache(h.start-c.from),g=c.doc.resolveNoCache(h.endB-c.from),b=u.resolve(h.start),w=y.sameParent(g)&&y.parent.inlineContent&&b.end()>=h.endA,x;if((vc&&t.input.lastIOSEnter>Date.now()-225&&(!w||o.some(T=>T.nodeName=="DIV"||T.nodeName=="P"))||!w&&y.pos<c.doc.content.size&&!y.sameParent(g)&&(x=Q.findFrom(c.doc.resolve(y.pos+1),1,!0))&&x.head==g.pos)&&t.someProp("handleKeyDown",T=>T(t,Zi(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>h.start&&hH(u,h.start,h.endA,y,g)&&t.someProp("handleKeyDown",T=>T(t,Zi(8,"Backspace")))){Tr&&Kt&&t.domObserver.suppressSelectionUpdates();return}Kt&&Tr&&h.endB==h.start&&(t.input.lastAndroidDelete=Date.now()),Tr&&!w&&y.start()!=g.start()&&g.parentOffset==0&&y.depth==g.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==h.endA&&(h.endB-=2,g=c.doc.resolveNoCache(h.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(T){return T(t,Zi(13,"Enter"))})},20));let k=h.start,S=h.endA,_,C,$;if(w){if(y.pos==g.pos)Tn&&oi<=11&&y.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>es(t),20)),_=t.state.tr.delete(k,S),C=u.resolve(h.start).marksAcross(u.resolve(h.endA));else if(h.endA==h.endB&&($=pH(y.parent.content.cut(y.parentOffset,g.parentOffset),b.parent.content.cut(b.parentOffset,h.endA-b.start()))))_=t.state.tr,$.type=="add"?_.addMark(k,S,$.mark):_.removeMark(k,S,$.mark);else if(y.parent.child(y.index()).isText&&y.index()==g.index()-(g.textOffset?0:1)){let T=y.parent.textBetween(y.parentOffset,g.parentOffset);if(t.someProp("handleTextInput",A=>A(t,k,S,T)))return;_=t.state.tr.insertText(T,k,S)}}if(_||(_=t.state.tr.replace(k,S,c.doc.slice(h.start-c.from,h.endB-c.from))),c.sel){let T=VC(t,_.doc,c.sel);T&&!(Kt&&Tr&&t.composing&&T.empty&&(h.start!=h.endB||t.input.lastAndroidDelete<Date.now()-100)&&(T.head==k||T.head==_.mapping.map(S)-1)||Tn&&T.empty&&T.head==k)&&_.setSelection(T)}C&&_.ensureMarks(C),s&&_.setMeta("composition",s),t.dispatch(_.scrollIntoView())}function VC(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:Ak(t,e.resolve(n.anchor),e.resolve(n.head))}function pH(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,o=n,s=r,i,a,l;for(let u=0;u<r.length;u++)o=r[u].removeFromSet(o);for(let u=0;u<n.length;u++)s=n[u].removeFromSet(s);if(o.length==1&&s.length==0)a=o[0],i="add",l=u=>u.mark(a.addToSet(u.marks));else if(o.length==0&&s.length==1)a=s[0],i="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(L.from(c).eq(t))return{mark:a,type:i}}function hH(t,e,n,r,o){if(!r.parent.isTextblock||n-e<=o.pos-r.pos||Nb(r,!0,!1)<o.pos)return!1;let s=t.resolve(e);if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let i=t.resolve(Nb(s,!0,!0));return!i.parent.isTextblock||i.pos>n||Nb(i,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(i.parent.content)}function Nb(t,e,n){let r=t.depth,o=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,o++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,o++}return o}function mH(t,e,n,r,o){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:i,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(o=="end"){let l=Math.max(0,s-Math.min(i,a));r-=i+l-s}if(i<s&&t.size<e.size){let l=r<=s&&r>=i?s-r:0;s-=l,a=s+(a-i),i=s}else if(a<s){let l=r<=s&&r>=a?s-r:0;s-=l,i=s+(i-a),a=s}return{start:s,endA:i,endB:a}}const gH=Nk,yH=Pk;class A3{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new DU,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(ZC),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=KC(this),HC(this),this.nodeViews=GC(this),this.docView=CC(this.state.doc,UC(this),Ab(this),this.dom,this),this.domObserver=new iH(this,(r,o,s,i)=>fH(this,r,o,s,i)),this.domObserver.start(),LU(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&aw(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(ZC),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){let r=this.state,o=!1,s=!1;e.storedMarks&&this.composing&&($3(this),s=!0),this.state=e;let i=r.plugins!=e.plugins||this._props.plugins!=n.plugins;if(i||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let f=GC(this);vH(f,this.nodeViews)&&(this.nodeViews=f,o=!0)}(i||n.handleDOMEvents!=this._props.handleDOMEvents)&&aw(this),this.editable=KC(this),HC(this);let a=Ab(this),l=UC(this),c=r.plugins!=e.plugins&&!r.doc.eq(e.doc)?"reset":e.scrollToSelection>r.scrollToSelection?"to selection":"preserve",u=o||!this.docView.matchesNode(e.doc,l,a);(u||!e.selection.eq(r.selection))&&(s=!0);let d=c=="preserve"&&s&&this.dom.style.overflowAnchor==null&&YV(this);if(s){this.domObserver.stop();let f=u&&(Tn||Kt)&&!this.composing&&!r.selection.empty&&!e.selection.empty&&bH(r.selection,e.selection);if(u){let p=Kt?this.trackWrites=this.domSelectionRange().focusNode:null;(o||!this.docView.update(e.doc,l,a,this))&&(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=CC(e.doc,l,a,this.dom,this)),p&&!this.trackWrites&&(f=!0)}f||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&kU(this))?es(this,f):(p3(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(r),c=="reset"?this.dom.scrollTop=0:c=="to selection"?this.scrollToSelection():d&&XV(d)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof ne){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&xC(this,n.getBoundingClientRect(),e)}else xC(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}someProp(e,n){let r=this._props&&this._props[e],o;if(r!=null&&(o=n?n(r):r))return o;for(let i=0;i<this.directPlugins.length;i++){let a=this.directPlugins[i].props[e];if(a!=null&&(o=n?n(a):a))return o}let s=this.state.plugins;if(s)for(let i=0;i<s.length;i++){let a=s[i].props[e];if(a!=null&&(o=n?n(a):a))return o}}hasFocus(){if(Tn){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&QV(this.dom),es(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return oU(this,e)}coordsAtPos(e,n=1){return s3(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let o=this.docView.posFromDOM(e,n,r);if(o==null)throw new RangeError("DOM position not inside the editor");return o}endOfTextblock(e,n){return cU(this,n||this.state,e)}pasteHTML(e,n){return mf(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return mf(this,e,null,!0,n||new ClipboardEvent("paste"))}destroy(){this.docView&&(jU(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Ab(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return this.docView==null}dispatchEvent(e){return BU(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){return fn&&this.root.nodeType===11&&VV(this.dom.ownerDocument)==this.dom?lH(this):this.domSelection()}domSelection(){return this.root.getSelection()}}function UC(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[Jt.node(0,t.state.doc.content.size,e)]}function HC(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Jt.widget(t.state.selection.head,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function KC(t){return!t.someProp("editable",e=>e(t.state)===!1)}function bH(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function GC(t){let e=Object.create(null);function n(r){for(let o in r)Object.prototype.hasOwnProperty.call(e,o)||(e[o]=r[o])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function vH(t,e){let n=0,r=0;for(let o in t){if(t[o]!=e[o])return!0;n++}for(let o in e)r++;return n!=r}function ZC(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}class ct extends Q{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return ct.valid(r)?new ct(r):Q.near(r)}content(){return H.empty}eq(e){return e instanceof ct&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new ct(e.resolve(n.pos))}getBookmark(){return new Lk(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!wH(e)||!xH(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let o=n.contentMatchAt(e.index()).defaultType;return o&&o.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&ct.valid(e))return e;let o=e.pos,s=null;for(let i=e.depth;;i--){let a=e.node(i);if(n>0?e.indexAfter(i)<a.childCount:e.index(i)>0){s=a.child(n>0?e.indexAfter(i):e.index(i)-1);break}else if(i==0)return null;o+=n;let l=e.doc.resolve(o);if(ct.valid(l))return l}for(;;){let i=n>0?s.firstChild:s.lastChild;if(!i){if(s.isAtom&&!s.isText&&!ne.isSelectable(s)){e=e.doc.resolve(o+s.nodeSize*n),r=!1;continue e}break}s=i,o+=n;let a=e.doc.resolve(o);if(ct.valid(a))return a}return null}}}ct.prototype.visible=!1;ct.findFrom=ct.findGapCursorFrom;Q.jsonID("gapcursor",ct);class Lk{constructor(e){this.pos=e}map(e){return new Lk(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return ct.valid(n)?new ct(n):Q.near(n)}}function wH(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n-1);;o=o.lastChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function xH(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n);;o=o.firstChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function kH(){return new xe({props:{decorations:SH,createSelectionBetween(t,e,n){return e.pos==n.pos&&ct.valid(n)?new ct(n):null},handleClick:$H,handleKeyDown:_H,handleDOMEvents:{beforeinput:EH}}})}const _H=Ek({ArrowLeft:Jp("horiz",-1),ArrowRight:Jp("horiz",1),ArrowUp:Jp("vert",-1),ArrowDown:Jp("vert",1)});function Jp(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,o,s){let i=r.selection,a=e>0?i.$to:i.$from,l=i.empty;if(i instanceof ae){if(!s.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=ct.findGapCursorFrom(a,e,l);return c?(o&&o(r.tr.setSelection(new ct(c))),!0):!1}}function $H(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!ct.valid(r))return!1;let o=t.posAtCoords({left:n.clientX,top:n.clientY});return o&&o.inside>-1&&ne.isSelectable(t.state.doc.nodeAt(o.inside))?!1:(t.dispatch(t.state.tr.setSelection(new ct(r))),!0)}function EH(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof ct))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let o=L.empty;for(let i=r.length-1;i>=0;i--)o=L.from(r[i].createAndFill(null,o));let s=t.state.tr.replace(n.pos,n.pos,new H(o,0,0));return s.setSelection(ae.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function SH(t){if(!(t.selection instanceof ct))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",rt.create(t.doc,[Jt.widget(t.selection.head,e,{key:"gapcursor"})])}var Xm=200,Et=function(){};Et.prototype.append=function(e){return e.length?(e=Et.from(e),!this.length&&e||e.length<Xm&&this.leafAppend(e)||this.length<Xm&&e.leafPrepend(this)||this.appendInner(e)):this};Et.prototype.prepend=function(e){return e.length?Et.from(e).append(this):this};Et.prototype.appendInner=function(e){return new CH(this,e)};Et.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?Et.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};Et.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Et.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};Et.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var o=[];return this.forEach(function(s,i){return o.push(e(s,i))},n,r),o};Et.from=function(e){return e instanceof Et?e:e&&e.length?new N3(e):Et.empty};var N3=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(o,s){return o==0&&s==this.length?this:new e(this.values.slice(o,s))},e.prototype.getInner=function(o){return this.values[o]},e.prototype.forEachInner=function(o,s,i,a){for(var l=s;l<i;l++)if(o(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(o,s,i,a){for(var l=s-1;l>=i;l--)if(o(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(o){if(this.length+o.length<=Xm)return new e(this.values.concat(o.flatten()))},e.prototype.leafPrepend=function(o){if(this.length+o.length<=Xm)return new e(o.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(Et);Et.empty=new N3([]);var CH=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,o,s,i){var a=this.left.length;if(o<a&&this.left.forEachInner(r,o,Math.min(s,a),i)===!1||s>a&&this.right.forEachInner(r,Math.max(o-a,0),Math.min(this.length,s)-a,i+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,o,s,i){var a=this.left.length;if(o>a&&this.right.forEachInvertedInner(r,o-a,Math.max(s,a)-a,i+a)===!1||s<a&&this.left.forEachInvertedInner(r,Math.min(o,a),s,i)===!1)return!1},e.prototype.sliceInner=function(r,o){if(r==0&&o==this.length)return this;var s=this.left.length;return o<=s?this.left.slice(r,o):r>=s?this.right.slice(r-s,o-s):this.left.slice(r,s).append(this.right.slice(0,o-s))},e.prototype.leafAppend=function(r){var o=this.right.leafAppend(r);if(o)return new e(this.left,o)},e.prototype.leafPrepend=function(r){var o=this.left.leafPrepend(r);if(o)return new e(o,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(Et);const TH=500;class Nr{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let o,s;n&&(o=this.remapping(r,this.items.length),s=o.maps.length);let i=e.tr,a,l,c=[],u=[];return this.items.forEach((d,f)=>{if(!d.step){o||(o=this.remapping(r,f+1),s=o.maps.length),s--,u.push(d);return}if(o){u.push(new eo(d.map));let p=d.step.map(o.slice(s)),h;p&&i.maybeStep(p).doc&&(h=i.mapping.maps[i.mapping.maps.length-1],c.push(new eo(h,void 0,void 0,c.length+u.length))),s--,h&&o.appendMap(h,s)}else i.maybeStep(d.step);if(d.selection)return a=o?d.selection.map(o.slice(s)):d.selection,l=new Nr(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:i,selection:a}}addTransform(e,n,r,o){let s=[],i=this.eventCount,a=this.items,l=!o&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let d=e.steps[u].invert(e.docs[u]),f=new eo(e.mapping.maps[u],d,n),p;(p=l&&l.merge(f))&&(f=p,u?s.pop():a=a.slice(0,a.length-1)),s.push(f),n&&(i++,n=void 0),o||(l=f)}let c=i-r.depth;return c>NH&&(a=AH(a,c),i-=c),new Nr(a.append(s),i)}remapping(e,n){let r=new Kl;return this.items.forEach((o,s)=>{let i=o.mirrorOffset!=null&&s-o.mirrorOffset>=e?r.maps.length-o.mirrorOffset:void 0;r.appendMap(o.map,i)},e,n),r}addMaps(e){return this.eventCount==0?this:new Nr(this.items.append(e.map(n=>new eo(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],o=Math.max(0,this.items.length-n),s=e.mapping,i=e.steps.length,a=this.eventCount;this.items.forEach(f=>{f.selection&&a--},o);let l=n;this.items.forEach(f=>{let p=s.getMirror(--l);if(p==null)return;i=Math.min(i,p);let h=s.maps[p];if(f.step){let y=e.steps[p].invert(e.docs[p]),g=f.selection&&f.selection.map(s.slice(l+1,p));g&&a++,r.push(new eo(h,y,g))}else r.push(new eo(h))},o);let c=[];for(let f=n;f<i;f++)c.push(new eo(s.maps[f]));let u=this.items.slice(0,o).append(c).append(r),d=new Nr(u,a);return d.emptyItemCount()>TH&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,o=[],s=0;return this.items.forEach((i,a)=>{if(a>=e)o.push(i),i.selection&&s++;else if(i.step){let l=i.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let u=i.selection&&i.selection.map(n.slice(r));u&&s++;let d=new eo(c.invert(),l,u),f,p=o.length-1;(f=o.length&&o[p].merge(d))?o[p]=f:o.push(d)}}else i.map&&r--},this.items.length,0),new Nr(Et.from(o.reverse()),s)}}Nr.empty=new Nr(Et.empty,0);function AH(t,e){let n;return t.forEach((r,o)=>{if(r.selection&&e--==0)return n=o,!1}),t.slice(n)}class eo{constructor(e,n,r,o){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=o}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new eo(n.getMap().invert(),n,this.selection)}}}class Ps{constructor(e,n,r,o,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=o,this.prevComposition=s}}const NH=20;function PH(t,e,n,r){let o=n.getMeta(ai),s;if(o)return o.historyState;n.getMeta(IH)&&(t=new Ps(t.done,t.undone,null,0,-1));let i=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(i&&i.getMeta(ai))return i.getMeta(ai).redo?new Ps(t.done.addTransform(n,void 0,r,Fh(e)),t.undone,JC(n.mapping.maps[n.steps.length-1]),t.prevTime,t.prevComposition):new Ps(t.done,t.undone.addTransform(n,void 0,r,Fh(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(i&&i.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!i&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!OH(n,t.prevRanges)),c=i?Pb(t.prevRanges,n.mapping):JC(n.mapping.maps[n.steps.length-1]);return new Ps(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,Fh(e)),Nr.empty,c,n.time,a==null?t.prevComposition:a)}else return(s=n.getMeta("rebased"))?new Ps(t.done.rebased(n,s),t.undone.rebased(n,s),Pb(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new Ps(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),Pb(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function OH(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,o)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&o>=e[s]&&(n=!0)}),n}function JC(t){let e=[];return t.forEach((n,r,o,s)=>e.push(o,s)),e}function Pb(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let o=e.map(t[r],1),s=e.map(t[r+1],-1);o<=s&&n.push(o,s)}return n}function P3(t,e,n,r){let o=Fh(e),s=ai.get(e).spec.config,i=(r?t.undone:t.done).popEvent(e,o);if(!i)return;let a=i.selection.resolve(i.transform.doc),l=(r?t.done:t.undone).addTransform(i.transform,e.selection.getBookmark(),s,o),c=new Ps(r?l:i.remaining,r?i.remaining:l,null,0,-1);n(i.transform.setSelection(a).setMeta(ai,{redo:r,historyState:c}).scrollIntoView())}let Ob=!1,YC=null;function Fh(t){let e=t.plugins;if(YC!=e){Ob=!1,YC=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){Ob=!0;break}}return Ob}const ai=new Ee("history"),IH=new Ee("closeHistory");function RH(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new xe({key:ai,state:{init(){return new Ps(Nr.empty,Nr.empty,null,0,-1)},apply(e,n,r){return PH(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,o=r=="historyUndo"?O3:r=="historyRedo"?I3:null;return o?(n.preventDefault(),o(e.state,e.dispatch)):!1}}}})}const O3=(t,e)=>{let n=ai.getState(t);return!n||n.done.eventCount==0?!1:(e&&P3(n,t,e,!1),!0)},I3=(t,e)=>{let n=ai.getState(t);return!n||n.undone.eventCount==0?!1:(e&&P3(n,t,e,!0),!0)};class ys{constructor(e,n){this.match=e,this.match=e,this.handler=typeof n=="string"?MH(n):n}}function MH(t){return function(e,n,r,o){let s=t;if(n[1]){let i=n[0].lastIndexOf(n[1]);s+=n[0].slice(i+n[1].length),r+=i;let a=r-o;a>0&&(s=n[0].slice(i-a,i)+s,r=o)}return e.tr.insertText(s,r,o)}}const DH=500;function LH({rules:t}){let e=new xe({state:{init(){return null},apply(n,r){let o=n.getMeta(this);return o||(n.selectionSet||n.docChanged?null:r)}},props:{handleTextInput(n,r,o,s){return XC(n,r,o,s,t,e)},handleDOMEvents:{compositionend:n=>{setTimeout(()=>{let{$cursor:r}=n.state.selection;r&&XC(n,r.pos,r.pos,"",t,e)})}}},isInputRules:!0});return e}function XC(t,e,n,r,o,s){if(t.composing)return!1;let i=t.state,a=i.doc.resolve(e);if(a.parent.type.spec.code)return!1;let l=a.parent.textBetween(Math.max(0,a.parentOffset-DH),a.parentOffset,null,"")+r;for(let c=0;c<o.length;c++){let u=o[c].match.exec(l),d=u&&o[c].handler(i,u,e-(u[0].length-r.length),n);if(d)return t.dispatch(d.setMeta(s,{transform:d,from:e,to:n,text:r})),!0}return!1}const jH=(t,e)=>{let n=t.plugins;for(let r=0;r<n.length;r++){let o=n[r],s;if(o.spec.isInputRules&&(s=o.getState(t))){if(e){let i=t.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l--)i.step(a.steps[l].invert(a.docs[l]));if(s.text){let l=i.doc.resolve(s.from).marks();i.replaceWith(s.from,s.to,t.schema.text(s.text,l))}else i.delete(s.from,s.to);e(i)}return!0}}return!1};function jk(t,e,n=null,r){return new ys(t,(o,s,i,a)=>{let l=n instanceof Function?n(s):n,c=o.tr.delete(i,a),u=c.doc.resolve(i),d=u.blockRange(),f=d&&c1(d,e,l);if(!f)return null;c.wrap(d,f);let p=c.doc.resolve(i-1).nodeBefore;return p&&p.type==e&&Vc(c.doc,i-1)&&(!r||r(s,p))&&c.join(i-1),c})}function R3(t,e,n=null){return new ys(t,(r,o,s,i)=>{let a=r.doc.resolve(s),l=n instanceof Function?n(o):n;return a.node(-1).canReplaceWith(a.index(-1),a.indexAfter(-1),e)?r.tr.delete(s,i).setBlockType(s,s,e,l):null})}function FH(t,e=null){return function(n,r){let{$from:o,$to:s}=n.selection,i=o.blockRange(s),a=!1,l=i;if(!i)return!1;if(i.depth>=2&&o.node(i.depth-1).type.compatibleContent(t)&&i.startIndex==0){if(o.index(i.depth-1)==0)return!1;let u=n.doc.resolve(i.start-2);l=new ff(u,u,i.depth),i.endIndex<i.parent.childCount&&(i=new ff(o,n.doc.resolve(s.end(i.depth)),i.depth)),a=!0}let c=c1(l,t,e,i);return c?(r&&r(BH(n.tr,i,c,a,t).scrollIntoView()),!0):!1}}function BH(t,e,n,r,o){let s=L.empty;for(let u=n.length-1;u>=0;u--)s=L.from(n[u].type.create(n[u].attrs,s));t.step(new vt(e.start-(r?2:0),e.end,e.start,e.end,new H(s,0,0),n.length,!0));let i=0;for(let u=0;u<n.length;u++)n[u].type==o&&(i=u+1);let a=n.length-i,l=e.start+n.length-(r?2:0),c=e.parent;for(let u=e.startIndex,d=e.endIndex,f=!0;u<d;u++,f=!1)!f&&yd(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return t}function zH(t){return function(e,n){let{$from:r,$to:o}=e.selection,s=r.blockRange(o,i=>i.childCount>0&&i.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?qH(e,n,t,s):WH(e,n,s):!0:!1}}function qH(t,e,n,r){let o=t.tr,s=r.end,i=r.$to.end(r.depth);s<i&&(o.step(new vt(s-1,i,s,i,new H(L.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new ff(o.doc.resolve(r.$from.pos),o.doc.resolve(i),r.depth));const a=Wc(r);if(a==null)return!1;o.lift(r,a);let l=o.mapping.map(s,-1)-1;return Vc(o.doc,l)&&o.join(l),e(o.scrollIntoView()),!0}function WH(t,e,n){let r=t.tr,o=n.parent;for(let p=n.end,h=n.endIndex-1,y=n.startIndex;h>y;h--)p-=o.child(h).nodeSize,r.delete(p-1,p+1);let s=r.doc.resolve(n.start),i=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==o.childCount,c=s.node(-1),u=s.index(-1);if(!c.canReplace(u+(a?0:1),u+1,i.content.append(l?L.empty:L.from(o))))return!1;let d=s.pos,f=d+i.nodeSize;return r.step(new vt(d-(a?1:0),f+(l?1:0),d+1,f-1,new H((a?L.empty:L.from(o.copy(L.empty))).append(l?L.empty:L.from(o.copy(L.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function VH(t){return function(e,n){let{$from:r,$to:o}=e.selection,s=r.blockRange(o,c=>c.childCount>0&&c.firstChild.type==t);if(!s)return!1;let i=s.startIndex;if(i==0)return!1;let a=s.parent,l=a.child(i-1);if(l.type!=t)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,u=L.from(c?t.create():null),d=new H(L.from(t.create(null,L.from(a.type.create(null,u)))),c?3:1,0),f=s.start,p=s.end;n(e.tr.step(new vt(f-(c?3:1),p,f,p,d,1,!0)).scrollIntoView())}return!0}}var lw,cw;if(typeof WeakMap!="undefined"){let t=new WeakMap;lw=e=>t.get(e),cw=(e,n)=>(t.set(e,n),n)}else{const t=[];let n=0;lw=r=>{for(let o=0;o<t.length;o+=2)if(t[o]==r)return t[o+1]},cw=(r,o)=>(n==10&&(n=0),t[n++]=r,t[n++]=o)}var an=class{constructor(t,e,n,r){this.width=t,this.height=e,this.map=n,this.problems=r}findCell(t){for(let e=0;e<this.map.length;e++){const n=this.map[e];if(n!=t)continue;const r=e%this.width,o=e/this.width|0;let s=r+1,i=o+1;for(let a=1;s<this.width&&this.map[e+a]==n;a++)s++;for(let a=1;i<this.height&&this.map[e+this.width*a]==n;a++)i++;return{left:r,top:o,right:s,bottom:i}}throw new RangeError(`No cell with offset ${t} found`)}colCount(t){for(let e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError(`No cell with offset ${t} found`)}nextCell(t,e,n){const{left:r,right:o,top:s,bottom:i}=this.findCell(t);return e=="horiz"?(n<0?r==0:o==this.width)?null:this.map[s*this.width+(n<0?r-1:o)]:(n<0?s==0:i==this.height)?null:this.map[r+this.width*(n<0?s-1:i)]}rectBetween(t,e){const{left:n,right:r,top:o,bottom:s}=this.findCell(t),{left:i,right:a,top:l,bottom:c}=this.findCell(e);return{left:Math.min(n,i),top:Math.min(o,l),right:Math.max(r,a),bottom:Math.max(s,c)}}cellsInRect(t){const e=[],n={};for(let r=t.top;r<t.bottom;r++)for(let o=t.left;o<t.right;o++){const s=r*this.width+o,i=this.map[s];n[i]||(n[i]=!0,!(o==t.left&&o&&this.map[s-1]==i||r==t.top&&r&&this.map[s-this.width]==i)&&e.push(i))}return e}positionAt(t,e,n){for(let r=0,o=0;;r++){const s=o+n.child(r).nodeSize;if(r==t){let i=e+t*this.width;const a=(t+1)*this.width;for(;i<a&&this.map[i]<o;)i++;return i==a?s-1:this.map[i]}o=s}}static get(t){return lw(t)||cw(t,UH(t))}};function UH(t){if(t.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+t.type.name);const e=HH(t),n=t.childCount,r=[];let o=0,s=null;const i=[];for(let c=0,u=e*n;c<u;c++)r[c]=0;for(let c=0,u=0;c<n;c++){const d=t.child(c);u++;for(let h=0;;h++){for(;o<r.length&&r[o]!=0;)o++;if(h==d.childCount)break;const y=d.child(h),{colspan:g,rowspan:b,colwidth:w}=y.attrs;for(let x=0;x<b;x++){if(x+c>=n){(s||(s=[])).push({type:"overlong_rowspan",pos:u,n:b-x});break}const k=o+x*e;for(let S=0;S<g;S++){r[k+S]==0?r[k+S]=u:(s||(s=[])).push({type:"collision",row:c,pos:u,n:g-S});const _=w&&w[S];if(_){const C=(k+S)%e*2,$=i[C];$==null||$!=_&&i[C+1]==1?(i[C]=_,i[C+1]=1):$==_&&i[C+1]++}}}o+=g,u+=y.nodeSize}const f=(c+1)*e;let p=0;for(;o<f;)r[o++]==0&&p++;p&&(s||(s=[])).push({type:"missing",row:c,n:p}),u++}const a=new an(e,n,r,s);let l=!1;for(let c=0;!l&&c<i.length;c+=2)i[c]!=null&&i[c+1]<n&&(l=!0);return l&&KH(a,i,t),a}function HH(t){let e=-1,n=!1;for(let r=0;r<t.childCount;r++){const o=t.child(r);let s=0;if(n)for(let i=0;i<r;i++){const a=t.child(i);for(let l=0;l<a.childCount;l++){const c=a.child(l);i+c.attrs.rowspan>r&&(s+=c.attrs.colspan)}}for(let i=0;i<o.childCount;i++){const a=o.child(i);s+=a.attrs.colspan,a.attrs.rowspan>1&&(n=!0)}e==-1?e=s:e!=s&&(e=Math.max(e,s))}return e}function KH(t,e,n){t.problems||(t.problems=[]);const r={};for(let o=0;o<t.map.length;o++){const s=t.map[o];if(r[s])continue;r[s]=!0;const i=n.nodeAt(s);if(!i)throw new RangeError(`No cell with offset ${s} found`);let a=null;const l=i.attrs;for(let c=0;c<l.colspan;c++){const u=(o+c)%t.width,d=e[u*2];d!=null&&(!l.colwidth||l.colwidth[c]!=d)&&((a||(a=GH(l)))[c]=d)}a&&t.problems.unshift({type:"colwidth mismatch",pos:s,colwidth:a})}}function GH(t){if(t.colwidth)return t.colwidth.slice();const e=[];for(let n=0;n<t.colspan;n++)e.push(0);return e}function QC(t,e){if(typeof t=="string")return{};const n=t.getAttribute("data-colwidth"),r=n&&/^\d+(,\d+)*$/.test(n)?n.split(",").map(i=>Number(i)):null,o=Number(t.getAttribute("colspan")||1),s={colspan:o,rowspan:Number(t.getAttribute("rowspan")||1),colwidth:r&&r.length==o?r:null};for(const i in e){const a=e[i].getFromDOM,l=a&&a(t);l!=null&&(s[i]=l)}return s}function e2(t,e){const n={};t.attrs.colspan!=1&&(n.colspan=t.attrs.colspan),t.attrs.rowspan!=1&&(n.rowspan=t.attrs.rowspan),t.attrs.colwidth&&(n["data-colwidth"]=t.attrs.colwidth.join(","));for(const r in e){const o=e[r].setDOMAttr;o&&o(t.attrs[r],n)}return n}function ZH(t){const e=t.cellAttributes||{},n={colspan:{default:1},rowspan:{default:1},colwidth:{default:null}};for(const r in e)n[r]={default:e[r].default};return{table:{content:"table_row+",tableRole:"table",isolating:!0,group:t.tableGroup,parseDOM:[{tag:"table"}],toDOM(){return["table",["tbody",0]]}},table_row:{content:"(table_cell | table_header)*",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM(){return["tr",0]}},table_cell:{content:t.cellContent,attrs:n,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:r=>QC(r,e)}],toDOM(r){return["td",e2(r,e),0]}},table_header:{content:t.cellContent,attrs:n,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:r=>QC(r,e)}],toDOM(r){return["th",e2(r,e),0]}}}}function rs(t){let e=t.cached.tableNodeTypes;if(!e){e=t.cached.tableNodeTypes={};for(const n in t.nodes){const r=t.nodes[n],o=r.spec.tableRole;o&&(e[o]=r)}}return e}var Ls=new Ee("selectingCells");function h1(t){for(let e=t.depth-1;e>0;e--)if(t.node(e).type.spec.tableRole=="row")return t.node(0).resolve(t.before(e+1));return null}function m1(t){const e=t.selection.$head;for(let n=e.depth;n>0;n--)if(e.node(n).type.spec.tableRole=="row")return!0;return!1}function Fk(t){const e=t.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const n=h1(e.$head)||JH(e.$head);if(n)return n;throw new RangeError(`No cell found around position ${e.head}`)}function JH(t){for(let e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n)}for(let e=t.nodeBefore,n=t.pos;e;e=e.lastChild,n--){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n-e.nodeSize)}}function t2(t){return t.parent.type.spec.tableRole=="row"&&!!t.nodeAfter}function YH(t){return t.node(0).resolve(t.pos+t.nodeAfter.nodeSize)}function Bk(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function M3(t,e,n){const r=t.node(-1),o=an.get(r),s=t.start(-1),i=o.nextCell(t.pos-s,e,n);return i==null?null:t.node(0).resolve(s+i)}function xc(t,e,n=1){const r={...t,colspan:t.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,n),r.colwidth.some(o=>o>0)||(r.colwidth=null)),r}var Ze=class extends Q{constructor(t,e=t){const n=t.node(-1),r=an.get(n),o=t.start(-1),s=r.rectBetween(t.pos-o,e.pos-o),i=t.node(0),a=r.cellsInRect(s).filter(c=>c!=e.pos-o);a.unshift(e.pos-o);const l=a.map(c=>{const u=n.nodeAt(c);if(!u)throw RangeError(`No cell with offset ${c} found`);const d=o+c+1;return new WR(i.resolve(d),i.resolve(d+u.content.size))});super(l[0].$from,l[0].$to,l),this.$anchorCell=t,this.$headCell=e}map(t,e){const n=t.resolve(e.map(this.$anchorCell.pos)),r=t.resolve(e.map(this.$headCell.pos));if(t2(n)&&t2(r)&&Bk(n,r)){const o=this.$anchorCell.node(-1)!=n.node(-1);return o&&this.isRowSelection()?Ze.rowSelection(n,r):o&&this.isColSelection()?Ze.colSelection(n,r):new Ze(n,r)}return ae.between(n,r)}content(){const t=this.$anchorCell.node(-1),e=an.get(t),n=this.$anchorCell.start(-1),r=e.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),o={},s=[];for(let a=r.top;a<r.bottom;a++){const l=[];for(let c=a*e.width+r.left,u=r.left;u<r.right;u++,c++){const d=e.map[c];if(o[d])continue;o[d]=!0;const f=e.findCell(d);let p=t.nodeAt(d);if(!p)throw RangeError(`No cell with offset ${d} found`);const h=r.left-f.left,y=f.right-r.right;if(h>0||y>0){let g=p.attrs;if(h>0&&(g=xc(g,0,h)),y>0&&(g=xc(g,g.colspan-y,y)),f.left<r.left){if(p=p.type.createAndFill(g),!p)throw RangeError(`Could not create cell with attrs ${JSON.stringify(g)}`)}else p=p.type.create(g,p.content)}if(f.top<r.top||f.bottom>r.bottom){const g={...p.attrs,rowspan:Math.min(f.bottom,r.bottom)-Math.max(f.top,r.top)};f.top<r.top?p=p.type.createAndFill(g):p=p.type.create(g,p.content)}l.push(p)}s.push(t.child(a).copy(L.from(l)))}const i=this.isColSelection()&&this.isRowSelection()?t:s;return new H(L.from(i),1,1)}replace(t,e=H.empty){const n=t.steps.length,r=this.ranges;for(let s=0;s<r.length;s++){const{$from:i,$to:a}=r[s],l=t.mapping.slice(n);t.replace(l.map(i.pos),l.map(a.pos),s?H.empty:e)}const o=Q.findFrom(t.doc.resolve(t.mapping.slice(n).map(this.to)),-1);o&&t.setSelection(o)}replaceWith(t,e){this.replace(t,new H(L.from(e),0,0))}forEachCell(t){const e=this.$anchorCell.node(-1),n=an.get(e),r=this.$anchorCell.start(-1),o=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r));for(let s=0;s<o.length;s++)t(e.nodeAt(o[s]),r+o[s])}isColSelection(){const t=this.$anchorCell.index(-1),e=this.$headCell.index(-1);if(Math.min(t,e)>0)return!1;const n=t+this.$anchorCell.nodeAfter.attrs.rowspan,r=e+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(n,r)==this.$headCell.node(-1).childCount}static colSelection(t,e=t){const n=t.node(-1),r=an.get(n),o=t.start(-1),s=r.findCell(t.pos-o),i=r.findCell(e.pos-o),a=t.node(0);return s.top<=i.top?(s.top>0&&(t=a.resolve(o+r.map[s.left])),i.bottom<r.height&&(e=a.resolve(o+r.map[r.width*(r.height-1)+i.right-1]))):(i.top>0&&(e=a.resolve(o+r.map[i.left])),s.bottom<r.height&&(t=a.resolve(o+r.map[r.width*(r.height-1)+s.right-1]))),new Ze(t,e)}isRowSelection(){const t=this.$anchorCell.node(-1),e=an.get(t),n=this.$anchorCell.start(-1),r=e.colCount(this.$anchorCell.pos-n),o=e.colCount(this.$headCell.pos-n);if(Math.min(r,o)>0)return!1;const s=r+this.$anchorCell.nodeAfter.attrs.colspan,i=o+this.$headCell.nodeAfter.attrs.colspan;return Math.max(s,i)==e.width}eq(t){return t instanceof Ze&&t.$anchorCell.pos==this.$anchorCell.pos&&t.$headCell.pos==this.$headCell.pos}static rowSelection(t,e=t){const n=t.node(-1),r=an.get(n),o=t.start(-1),s=r.findCell(t.pos-o),i=r.findCell(e.pos-o),a=t.node(0);return s.left<=i.left?(s.left>0&&(t=a.resolve(o+r.map[s.top*r.width])),i.right<r.width&&(e=a.resolve(o+r.map[r.width*(i.top+1)-1]))):(i.left>0&&(e=a.resolve(o+r.map[i.top*r.width])),s.right<r.width&&(t=a.resolve(o+r.map[r.width*(s.top+1)-1]))),new Ze(t,e)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(t,e){return new Ze(t.resolve(e.anchor),t.resolve(e.head))}static create(t,e,n=e){return new Ze(t.resolve(e),t.resolve(n))}getBookmark(){return new D3(this.$anchorCell.pos,this.$headCell.pos)}};Ze.prototype.visible=!1;Q.jsonID("cell",Ze);var D3=class{constructor(t,e){this.anchor=t,this.head=e}map(t){return new D3(t.map(this.anchor),t.map(this.head))}resolve(t){const e=t.resolve(this.anchor),n=t.resolve(this.head);return e.parent.type.spec.tableRole=="row"&&n.parent.type.spec.tableRole=="row"&&e.index()<e.parent.childCount&&n.index()<n.parent.childCount&&Bk(e,n)?new Ze(e,n):Q.near(n,1)}};function XH(t){if(!(t.selection instanceof Ze))return null;const e=[];return t.selection.forEachCell((n,r)=>{e.push(Jt.node(r,r+n.nodeSize,{class:"selectedCell"}))}),rt.create(t.doc,e)}function QH({$from:t,$to:e}){if(t.pos==e.pos||t.pos<t.pos-6)return!1;let n=t.pos,r=e.pos,o=t.depth;for(;o>=0&&!(t.after(o+1)<t.end(o));o--,n++);for(let s=e.depth;s>=0&&!(e.before(s+1)>e.start(s));s--,r--);return n==r&&/row|table/.test(t.node(o).type.spec.tableRole)}function eK({$from:t,$to:e}){let n,r;for(let o=t.depth;o>0;o--){const s=t.node(o);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){n=s;break}}for(let o=e.depth;o>0;o--){const s=e.node(o);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){r=s;break}}return n!==r&&e.parentOffset===0}function tK(t,e,n){const r=(e||t).selection,o=(e||t).doc;let s,i;if(r instanceof ne&&(i=r.node.type.spec.tableRole)){if(i=="cell"||i=="header_cell")s=Ze.create(o,r.from);else if(i=="row"){const a=o.resolve(r.from+1);s=Ze.rowSelection(a,a)}else if(!n){const a=an.get(r.node),l=r.from+1,c=l+a.map[a.width*a.height-1];s=Ze.create(o,l+1,c)}}else r instanceof ae&&QH(r)?s=ae.create(o,r.from):r instanceof ae&&eK(r)&&(s=ae.create(o,r.$from.start(),r.$from.end()));return s&&(e||(e=t.tr)).setSelection(s),e}var nK=new Ee("fix-tables");function L3(t,e,n,r){const o=t.childCount,s=e.childCount;e:for(let i=0,a=0;i<s;i++){const l=e.child(i);for(let c=a,u=Math.min(o,i+3);c<u;c++)if(t.child(c)==l){a=c+1,n+=l.nodeSize;continue e}r(l,n),a<o&&t.child(a).sameMarkup(l)?L3(t.child(a),l,n+1,r):l.nodesBetween(0,l.content.size,r,n+1),n+=l.nodeSize}}function rK(t,e){let n;const r=(o,s)=>{o.type.spec.tableRole=="table"&&(n=oK(t,o,s,n))};return e?e.doc!=t.doc&&L3(e.doc,t.doc,0,r):t.doc.descendants(r),n}function oK(t,e,n,r){const o=an.get(e);if(!o.problems)return r;r||(r=t.tr);const s=[];for(let l=0;l<o.height;l++)s.push(0);for(let l=0;l<o.problems.length;l++){const c=o.problems[l];if(c.type=="collision"){const u=e.nodeAt(c.pos);if(!u)continue;const d=u.attrs;for(let f=0;f<d.rowspan;f++)s[c.row+f]+=c.n;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,xc(d,d.colspan-c.n,c.n))}else if(c.type=="missing")s[c.row]+=c.n;else if(c.type=="overlong_rowspan"){const u=e.nodeAt(c.pos);if(!u)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,{...u.attrs,rowspan:u.attrs.rowspan-c.n})}else if(c.type=="colwidth mismatch"){const u=e.nodeAt(c.pos);if(!u)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,{...u.attrs,colwidth:c.colwidth})}}let i,a;for(let l=0;l<s.length;l++)s[l]&&(i==null&&(i=l),a=l);for(let l=0,c=n+1;l<o.height;l++){const u=e.child(l),d=c+u.nodeSize,f=s[l];if(f>0){let p="cell";u.firstChild&&(p=u.firstChild.type.spec.tableRole);const h=[];for(let g=0;g<f;g++){const b=rs(t.schema)[p].createAndFill();b&&h.push(b)}const y=(l==0||i==l-1)&&a==l?c+1:d-1;r.insert(r.mapping.map(y),h)}c=d}return r.setMeta(nK,{fixTables:!0})}function sK(t){if(!t.size)return null;let{content:e,openStart:n,openEnd:r}=t;for(;e.childCount==1&&(n>0&&r>0||e.child(0).type.spec.tableRole=="table");)n--,r--,e=e.child(0).content;const o=e.child(0),s=o.type.spec.tableRole,i=o.type.schema,a=[];if(s=="row")for(let l=0;l<e.childCount;l++){let c=e.child(l).content;const u=l?0:Math.max(0,n-1),d=l<e.childCount-1?0:Math.max(0,r-1);(u||d)&&(c=uw(rs(i).row,new H(c,u,d)).content),a.push(c)}else if(s=="cell"||s=="header_cell")a.push(n||r?uw(rs(i).row,new H(e,n,r)).content:e);else return null;return iK(i,a)}function iK(t,e){const n=[];for(let o=0;o<e.length;o++){const s=e[o];for(let i=s.childCount-1;i>=0;i--){const{rowspan:a,colspan:l}=s.child(i).attrs;for(let c=o;c<o+a;c++)n[c]=(n[c]||0)+l}}let r=0;for(let o=0;o<n.length;o++)r=Math.max(r,n[o]);for(let o=0;o<n.length;o++)if(o>=e.length&&e.push(L.empty),n[o]<r){const s=rs(t).cell.createAndFill(),i=[];for(let a=n[o];a<r;a++)i.push(s);e[o]=e[o].append(L.from(i))}return{height:e.length,width:r,rows:e}}function uw(t,e){const n=t.createAndFill();return new qR(n).replace(0,n.content.size,e).doc}function aK({width:t,height:e,rows:n},r,o){if(t!=r){const s=[],i=[];for(let a=0;a<n.length;a++){const l=n[a],c=[];for(let u=s[a]||0,d=0;u<r;d++){let f=l.child(d%l.childCount);u+f.attrs.colspan>r&&(f=f.type.createChecked(xc(f.attrs,f.attrs.colspan,u+f.attrs.colspan-r),f.content)),c.push(f),u+=f.attrs.colspan;for(let p=1;p<f.attrs.rowspan;p++)s[a+p]=(s[a+p]||0)+f.attrs.colspan}i.push(L.from(c))}n=i,t=r}if(e!=o){const s=[];for(let i=0,a=0;i<o;i++,a++){const l=[],c=n[a%e];for(let u=0;u<c.childCount;u++){let d=c.child(u);i+d.attrs.rowspan>o&&(d=d.type.create({...d.attrs,rowspan:Math.max(1,o-d.attrs.rowspan)},d.content)),l.push(d)}s.push(L.from(l))}n=s,e=o}return{width:t,height:e,rows:n}}function lK(t,e,n,r,o,s,i){const a=t.doc.type.schema,l=rs(a);let c,u;if(o>e.width)for(let d=0,f=0;d<e.height;d++){const p=n.child(d);f+=p.nodeSize;const h=[];let y;p.lastChild==null||p.lastChild.type==l.cell?y=c||(c=l.cell.createAndFill()):y=u||(u=l.header_cell.createAndFill());for(let g=e.width;g<o;g++)h.push(y);t.insert(t.mapping.slice(i).map(f-1+r),h)}if(s>e.height){const d=[];for(let h=0,y=(e.height-1)*e.width;h<Math.max(e.width,o);h++){const g=h>=e.width?!1:n.nodeAt(e.map[y+h]).type==l.header_cell;d.push(g?u||(u=l.header_cell.createAndFill()):c||(c=l.cell.createAndFill()))}const f=l.row.create(null,L.from(d)),p=[];for(let h=e.height;h<s;h++)p.push(f);t.insert(t.mapping.slice(i).map(r+n.nodeSize-2),p)}return!!(c||u)}function n2(t,e,n,r,o,s,i,a){if(i==0||i==e.height)return!1;let l=!1;for(let c=o;c<s;c++){const u=i*e.width+c,d=e.map[u];if(e.map[u-e.width]==d){l=!0;const f=n.nodeAt(d),{top:p,left:h}=e.findCell(d);t.setNodeMarkup(t.mapping.slice(a).map(d+r),null,{...f.attrs,rowspan:i-p}),t.insert(t.mapping.slice(a).map(e.positionAt(i,h,n)),f.type.createAndFill({...f.attrs,rowspan:p+f.attrs.rowspan-i})),c+=f.attrs.colspan-1}}return l}function r2(t,e,n,r,o,s,i,a){if(i==0||i==e.width)return!1;let l=!1;for(let c=o;c<s;c++){const u=c*e.width+i,d=e.map[u];if(e.map[u-1]==d){l=!0;const f=n.nodeAt(d),p=e.colCount(d),h=t.mapping.slice(a).map(d+r);t.setNodeMarkup(h,null,xc(f.attrs,i-p,f.attrs.colspan-(i-p))),t.insert(h+f.nodeSize,f.type.createAndFill(xc(f.attrs,0,i-p))),c+=f.attrs.rowspan-1}}return l}function o2(t,e,n,r,o){let s=n?t.doc.nodeAt(n-1):t.doc;if(!s)throw new Error("No table found");let i=an.get(s);const{top:a,left:l}=r,c=l+o.width,u=a+o.height,d=t.tr;let f=0;function p(){if(s=n?d.doc.nodeAt(n-1):d.doc,!s)throw new Error("No table found");i=an.get(s),f=d.mapping.maps.length}lK(d,i,s,n,c,u,f)&&p(),n2(d,i,s,n,l,c,a,f)&&p(),n2(d,i,s,n,l,c,u,f)&&p(),r2(d,i,s,n,a,u,l,f)&&p(),r2(d,i,s,n,a,u,c,f)&&p();for(let h=a;h<u;h++){const y=i.positionAt(h,l,s),g=i.positionAt(h,c,s);d.replace(d.mapping.slice(f).map(y+n),d.mapping.slice(f).map(g+n),new H(o.rows[h-a],0,0))}p(),d.setSelection(new Ze(d.doc.resolve(n+i.positionAt(a,l,s)),d.doc.resolve(n+i.positionAt(u-1,c-1,s)))),e(d)}var cK=Ek({ArrowLeft:Yp("horiz",-1),ArrowRight:Yp("horiz",1),ArrowUp:Yp("vert",-1),ArrowDown:Yp("vert",1),"Shift-ArrowLeft":Xp("horiz",-1),"Shift-ArrowRight":Xp("horiz",1),"Shift-ArrowUp":Xp("vert",-1),"Shift-ArrowDown":Xp("vert",1),Backspace:Qp,"Mod-Backspace":Qp,Delete:Qp,"Mod-Delete":Qp});function Bh(t,e,n){return n.eq(t.selection)?!1:(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function Yp(t,e){return(n,r,o)=>{if(!o)return!1;const s=n.selection;if(s instanceof Ze)return Bh(n,r,Q.near(s.$headCell,e));if(t!="horiz"&&!s.empty)return!1;const i=j3(o,t,e);if(i==null)return!1;if(t=="horiz")return Bh(n,r,Q.near(n.doc.resolve(s.head+e),e));{const a=n.doc.resolve(i),l=M3(a,t,e);let c;return l?c=Q.near(l,1):e<0?c=Q.near(n.doc.resolve(a.before(-1)),-1):c=Q.near(n.doc.resolve(a.after(-1)),1),Bh(n,r,c)}}}function Xp(t,e){return(n,r,o)=>{if(!o)return!1;const s=n.selection;let i;if(s instanceof Ze)i=s;else{const l=j3(o,t,e);if(l==null)return!1;i=new Ze(n.doc.resolve(l))}const a=M3(i.$headCell,t,e);return a?Bh(n,r,new Ze(i.$anchorCell,a)):!1}}function Qp(t,e){const n=t.selection;if(!(n instanceof Ze))return!1;if(e){const r=t.tr,o=rs(t.schema).cell.createAndFill().content;n.forEachCell((s,i)=>{s.content.eq(o)||r.replace(r.mapping.map(i+1),r.mapping.map(i+s.nodeSize-1),new H(o,0,0))}),r.docChanged&&e(r)}return!0}function uK(t,e){const n=t.state.doc,r=h1(n.resolve(e));return r?(t.dispatch(t.state.tr.setSelection(new Ze(r))),!0):!1}function dK(t,e,n){if(!m1(t.state))return!1;let r=sK(n);const o=t.state.selection;if(o instanceof Ze){r||(r={width:1,height:1,rows:[L.from(uw(rs(t.state.schema).cell,n))]});const s=o.$anchorCell.node(-1),i=o.$anchorCell.start(-1),a=an.get(s).rectBetween(o.$anchorCell.pos-i,o.$headCell.pos-i);return r=aK(r,a.right-a.left,a.bottom-a.top),o2(t.state,t.dispatch,i,a,r),!0}else if(r){const s=Fk(t.state),i=s.start(-1);return o2(t.state,t.dispatch,i,an.get(s.node(-1)).findCell(s.pos-i),r),!0}else return!1}function fK(t,e){var n;if(e.ctrlKey||e.metaKey)return;const r=s2(t,e.target);let o;if(e.shiftKey&&t.state.selection instanceof Ze)s(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&(o=h1(t.state.selection.$anchor))!=null&&((n=Ib(t,e))==null?void 0:n.pos)!=o.pos)s(o,e),e.preventDefault();else if(!r)return;function s(l,c){let u=Ib(t,c);const d=Ls.getState(t.state)==null;if(!u||!Bk(l,u))if(d)u=l;else return;const f=new Ze(l,u);if(d||!t.state.selection.eq(f)){const p=t.state.tr.setSelection(f);d&&p.setMeta(Ls,l.pos),t.dispatch(p)}}function i(){t.root.removeEventListener("mouseup",i),t.root.removeEventListener("dragstart",i),t.root.removeEventListener("mousemove",a),Ls.getState(t.state)!=null&&t.dispatch(t.state.tr.setMeta(Ls,-1))}function a(l){const c=l,u=Ls.getState(t.state);let d;if(u!=null)d=t.state.doc.resolve(u);else if(s2(t,c.target)!=r&&(d=Ib(t,e),!d))return i();d&&s(d,c)}t.root.addEventListener("mouseup",i),t.root.addEventListener("dragstart",i),t.root.addEventListener("mousemove",a)}function j3(t,e,n){if(!(t.state.selection instanceof ae))return null;const{$head:r}=t.state.selection;for(let o=r.depth-1;o>=0;o--){const s=r.node(o);if((n<0?r.index(o):r.indexAfter(o))!=(n<0?0:s.childCount))return null;if(s.type.spec.tableRole=="cell"||s.type.spec.tableRole=="header_cell"){const a=r.before(o),l=e=="vert"?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(l)?a:null}}return null}function s2(t,e){for(;e&&e!=t.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e;return null}function Ib(t,e){const n=t.posAtCoords({left:e.clientX,top:e.clientY});return n&&n?h1(t.state.doc.resolve(n.pos)):null}new Ee("tableColumnResizing");function F3(t){const e=t.selection,n=Fk(t),r=n.node(-1),o=n.start(-1),s=an.get(r);return{...e instanceof Ze?s.rectBetween(e.$anchorCell.pos-o,e.$headCell.pos-o):s.findCell(n.pos-o),tableStart:o,map:s,table:r}}function pK(t){return function(e,n){if(!m1(e))return!1;if(n){const r=rs(e.schema),o=F3(e),s=e.tr,i=o.map.cellsInRect(t=="column"?{left:o.left,top:0,right:o.right,bottom:o.map.height}:t=="row"?{left:0,top:o.top,right:o.map.width,bottom:o.bottom}:o),a=i.map(l=>o.table.nodeAt(l));for(let l=0;l<i.length;l++)a[l].type==r.header_cell&&s.setNodeMarkup(o.tableStart+i[l],r.cell,a[l].attrs);if(s.steps.length==0)for(let l=0;l<i.length;l++)s.setNodeMarkup(o.tableStart+i[l],r.header_cell,a[l].attrs);n(s)}return!0}}function i2(t,e,n){const r=e.map.cellsInRect({left:0,top:0,right:t=="row"?e.map.width:1,bottom:t=="column"?e.map.height:1});for(let o=0;o<r.length;o++){const s=e.table.nodeAt(r[o]);if(s&&s.type!==n.header_cell)return!1}return!0}function zk(t,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?pK(t):function(n,r){if(!m1(n))return!1;if(r){const o=rs(n.schema),s=F3(n),i=n.tr,a=i2("row",s,o),l=i2("column",s,o),u=(t==="column"?a:t==="row"?l:!1)?1:0,d=t=="column"?{left:0,top:u,right:1,bottom:s.map.height}:t=="row"?{left:u,top:0,right:s.map.width,bottom:1}:s,f=t=="column"?l?o.cell:o.header_cell:t=="row"?a?o.cell:o.header_cell:o.cell;s.map.cellsInRect(d).forEach(p=>{const h=p+s.tableStart,y=i.doc.nodeAt(h);y&&i.setNodeMarkup(h,f,y.attrs)}),r(i)}return!0}}zk("row",{useDeprecatedLogic:!0});zk("column",{useDeprecatedLogic:!0});zk("cell",{useDeprecatedLogic:!0});function hK(t,e){if(e<0){const n=t.nodeBefore;if(n)return t.pos-n.nodeSize;for(let r=t.index(-1)-1,o=t.before();r>=0;r--){const s=t.node(-1).child(r),i=s.lastChild;if(i)return o-1-i.nodeSize;o-=s.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;const n=t.node(-1);for(let r=t.indexAfter(-1),o=t.after();r<n.childCount;r++){const s=n.child(r);if(s.childCount)return o+1;o+=s.nodeSize}}return null}function a2(t){return function(e,n){if(!m1(e))return!1;const r=hK(Fk(e),t);if(r==null)return!1;if(n){const o=e.doc.resolve(r);n(e.tr.setSelection(ae.between(o,YH(o))).scrollIntoView())}return!0}}function mK({allowTableNodeSelection:t=!1}={}){return new xe({key:Ls,state:{init(){return null},apply(e,n){const r=e.getMeta(Ls);if(r!=null)return r==-1?null:r;if(n==null||!e.docChanged)return n;const{deleted:o,pos:s}=e.mapping.mapResult(n);return o?null:s}},props:{decorations:XH,handleDOMEvents:{mousedown:fK},createSelectionBetween(e){return Ls.getState(e.state)!=null?e.state.selection:null},handleTripleClick:uK,handleKeyDown:cK,handlePaste:dK},appendTransaction(e,n,r){return tK(r,rK(r,n),t)}})}function gK(t,e,n,r,o){return yH(t,e,n,r,o)}function yK(t,e){return gH(t,e)}const g1=new Ee("core-editor_intersectionObserverPlugin"),B3=new Ee("EditorPluginMetadataKey"),z3=new Ee("menuKey"),y1=new Ee("searchPluginKey");function ss(t){const e=B3.getState(t);if(!e)throw new Error("EditorPluginMetadata cannot be undefined");return e}function q3(t,e,n){const r=t.getState(e),o=t.getState(n);return r!==o}const bK=(t,e)=>n=>{Array.isArray(t)||(t=[t]);for(let r=0,o=t.length;r<o;r++){const s=xt(t[r])(n.selection);if(s){const i=xK(s.pos,e)(n);if(i!==n)return i}}return n},vK=t=>e=>{if(pw(e.selection)){const{$from:n,$to:r}=e.selection;if(t instanceof L&&n.parent.canReplace(n.index(),n.indexAfter(),t)||n.parent.canReplaceWith(n.index(),n.indexAfter(),t.type))return Qm(e.replaceWith(n.pos,r.pos,t).setSelection(new ne(e.doc.resolve(n.pos))))}return e},dw=(t,e=1)=>n=>{const r=Q.findFrom(n.doc.resolve(t),e,!0);return r?n.setSelection(r):n},fw=t=>t.type&&t.type.spec.selectable,wK=t=>fw(t)&&t.type.isLeaf,Rb=(t,e,n)=>wK(t)?n.setSelection(new ne(n.doc.resolve(e))):dw(e)(n),Yf=(t,e,n)=>r=>{const o=typeof e=="number",{$from:s}=r.selection,i=o?r.doc.resolve(e):pw(r.selection)?r.doc.resolve(s.pos+1):s,{parent:a}=i;if(pw(r.selection)&&n){const l=r;if(r=vK(t)(r),l!==r)return r}if(_K(a)){const l=r;if(r=bK(a.type,t)(r),l!==r){const c=fw(t)?i.before(i.depth):i.pos;return Rb(t,c,r)}}if(l2(i,t)){r.insert(i.pos,t);const l=o?i.pos:fw(t)?r.selection.$anchor.pos-1:r.selection.$anchor.pos;return Qm(Rb(t,l,r))}for(let l=i.depth;l>0;l--){const c=i.after(l),u=r.doc.resolve(c);if(l2(u,t))return r.insert(c,t),Qm(Rb(t,c,r))}return r},pw=t=>t instanceof ne,W3=(t,e)=>Array.isArray(t)&&t.indexOf(e.type)>-1||e.type===t,Qm=t=>Object.assign(Object.create(t),t).setTime(Date.now()),xK=(t,e)=>n=>{const r=n.doc.nodeAt(t),o=n.doc.resolve(t);if(kK(o,e)){n=n.replaceWith(t,t+r.nodeSize,e);const s=n.selection.$from.pos-1;return n=dw(Math.max(s,0),-1)(n),n=dw(n.selection.$from.start())(n),Qm(n)}return n},kK=(t,e)=>{const n=t.node(t.depth);return n&&n.type.validContent(e instanceof L?e:L.from(e))},l2=(t,e)=>{const n=t.index();return e instanceof L?t.parent.canReplace(n,n,e):e instanceof Cn?t.parent.canReplaceWith(n,n,e.type):!1},_K=t=>!t||t.type.name==="paragraph"&&t.nodeSize===2,qk=t=>({$from:e})=>$K(e,t),$K=(t,e)=>{for(let n=t.depth;n>0;n--){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}},EK=t=>e=>!!qk(t)(e),xt=t=>e=>qk(n=>W3(t,n))(e),Wk=t=>e=>EK(n=>W3(t,n))(e),SK=t=>{const{nodeBefore:e}=t.$from,n=Q.findFrom(t.$from,-1);if(n&&e){const r=xt(e.type)(n);return r?r.pos:n.$from.pos}},V3=(t,e=!0)=>{if(!t)throw new Error('Invalid "node" parameter');const n=[];return t.descendants((r,o)=>{if(n.push({node:r,pos:o}),!e)return!1}),n},b1=(t,e,n)=>{if(t){if(!e)throw new Error('Invalid "predicate" parameter')}else throw new Error('Invalid "node" parameter');return V3(t,n).filter(r=>e(r.node))},CK=(t,e,n)=>b1(t,r=>r.type===e,n),Ot={mac:!1,ie:!1,ie_version:0,gecko:!1,chrome:!1,chrome_version:0,android:!1,ios:!1,webkit:!1};if(typeof navigator!="undefined"&&typeof document!="undefined"){const t=/Edge\/(\d+)/.exec(navigator.userAgent),e=/MSIE \d/.test(navigator.userAgent),n=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);Ot.mac=/Mac/.test(navigator.platform);let r=Ot.ie=!!(e||n||t);Ot.ie_version=e?document.documentMode||6:n?+n[1]:t?+t[1]:null,Ot.gecko=!r&&/gecko\/\d/i.test(navigator.userAgent),Ot.chrome=!r&&/Chrome\//.test(navigator.userAgent),Ot.chrome_version=parseInt((navigator.userAgent.match(/Chrome\/(\d{2})/)||[])[1]||"0",10),Ot.android=/Android \d/.test(navigator.userAgent),Ot.ios=!r&&/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),Ot.webkit=!r&&!!document.documentElement&&"WebkitAppearance"in document.documentElement.style}const TK=Ot.chrome&&!Ot.android&&Ot.chrome_version>=58;let Vk;try{Vk="production"}catch(t){}const AK=Vk==="production",Uk=Vk==="test";function Ve(t,e){if(t===void 0)throw new Error(`assertion failed: ${e}`)}function NK(t,...e){const n=[t,...e];return function(o){return n.reduceRight((s,i)=>i(s),o)}}class eh{constructor(e,n,r,o){this.start=e,this.end=n,this.match=r,this._sourceString=o}get subString(){return this._sourceString.slice(this.start,this.end)}}function v1(t,e){const n=[];let r=0,o;for(;o=t.exec(e);){const i=o.index,a=i+o[0].length;r!==i&&n.push(new eh(r,i,!1,e)),n.push(new eh(i,a,!0,e)),r=a}if(n.length===0)return[new eh(0,e.length,!1,e)];const s=n[n.length-1]&&n[n.length-1].end;return s&&s!==e.length&&n.push(new eh(s,e.length,!1,e)),n}function Hk(t=10){return Math.random().toString(36).substring(2,15).slice(0,t)}function th(t,e,n){const r=setTimeout(t,n);e.addEventListener("abort",()=>{clearTimeout(r)},{once:!0})}function PK(t=20){return new Promise(e=>setTimeout(e,t))}function U3(t,e){return Object.fromEntries(Object.entries(t).filter(([n,r])=>e(r,n)))}function nn(t){return Object.fromEntries(t.filter(e=>e[0]!=null))}function OK(){let t=Promise.resolve();return{add(e){return new Promise((n,r)=>{const o=async()=>{try{return{rejected:!1,value:await e()}}catch(s){return{rejected:!0,value:s}}};t=t.then(()=>o().then(({value:s,rejected:i})=>{i?r(s):n(s)}))})}}}function IK(t){let e=[],n=null;const r=(...o)=>{e=o,!n&&(n=requestAnimationFrame(()=>{n=null,t(...e)}))};return r.cancel=()=>{n&&(cancelAnimationFrame(n),n=null)},r}const ar=Uk||AK?()=>{}:console.warn.bind(console,"Warning in bangle.js:");function RK(t,{tag:e="div",content:n,ignoreAttrs:r=[],parsingPriority:o=51}={}){const s=i=>JSON.stringify(U3(i.attrs||{},(a,l)=>!r.includes(l)));return{toDOM:i=>{const a=[e,{"data-bangle-name":t,"data-bangle-attrs":s(i)}];return n!==void 0&&(typeof n=="function"?a.push(n(i)):a.push(n)),a},parseDOM:[{priority:o,tag:`${e}[data-bangle-name="${t}"]`,getAttrs:i=>{const a=i.getAttribute("data-bangle-attrs");return a?JSON.parse(a):{}}}]}}function MK(t){const{dom:e,contentDOM:n}=$n.renderSpec(window.document,t);if(n)throw new Error("createElement does not support creating contentDOM");return e}class rn{static flatMap(e,n){if(rn.isLeft(e))return rn.left(e.left);if(rn.isRight(e))return n(e.right,{left:rn.left});throw new Error("Either.flatMap: unknown type")}static fold(e,n,r){if(rn.isLeft(e))return rn.left(n(e.left));if(rn.isRight(e))return rn.right(r(e.right));throw new Error("Either.fold: unknown type")}static isLeft(e){return e.type==="left"}static isRight(e){return e.type==="right"}static left(e){return{left:e,right:void 0,type:"left"}}static map(e,n){return rn.fold(e,r=>r,n)}static mapLeft(e,n){return rn.fold(e,n,r=>r)}static right(e){return{left:void 0,right:e,type:"right"}}static unwrap(e){if(rn.isLeft(e))return[e.left,void 0];if(rn.isRight(e))return[void 0,e.right];throw new Error("Either.unwrap: unknown type")}static value(e){if(rn.isLeft(e))return e.left;if(rn.isRight(e))return e.right;throw new Error("Either.value: unknown type")}}class DK{constructor(){this._callbacks={}}destroy(){this._callbacks={}}emit(e,n){const r=this._callbacks[e];return r&&r.forEach(o=>o(n)),this}off(e,n){if(!arguments.length)this._callbacks={};else{const r=this._callbacks?this._callbacks[e]:null;r&&(n?this._callbacks[e]=r.filter(o=>o!==n):this._callbacks[e]=[])}return this}on(e,n){return this._callbacks[e]||(this._callbacks[e]=[]),this._callbacks[e].push(n),this}}function LK(t,e,n){let r=[];return n.doc.nodesBetween(t,e,(o,s)=>{r=[...r,...o.marks.map(i=>({start:s,end:s+o.nodeSize,mark:i}))]}),r}function Ra(t,e){return new ys(t,(n,r,o,s)=>{const{tr:i}=n,a=r.length-1;let l=s,c=o;const u=r[a],d=r[0],f=r[a-1];if(u!=null&&d!=null&&f!=null){const p=o+d.indexOf(f),h=p+f.length-1,y=p+f.lastIndexOf(u),g=y+u.length;if(LK(o,s,n).filter(w=>w.mark.type.excludes(e)).filter(w=>w.end>p).length)return null;g<h&&i.delete(g,h),y>p&&i.delete(p,y),c=p,l=c+u.length}return i.addMark(c,l,e.create()),i.removeStoredMark(e),i})}function Ma(t,e,n){const r=(o,s)=>{const i=[];return o.forEach(a=>{if(a.isText){const{text:l,marks:c}=a;let u=0,d;const f=!!c.filter(p=>p.type.name==="link")[0];for(;!f&&(d=t.exec(l))!==null;)if(s&&s.type.allowsMarkType(e)&&d[1]){const p=d.index,h=p+d[0].length,y=p+d[0].indexOf(d[1]),g=y+d[1].length,b=n instanceof Function?n(d):n;p>0&&i.push(a.cut(u,p)),i.push(a.cut(y,g).mark(e.create(b).addToSet(a.marks))),u=h}u<l.length&&i.push(a.cut(u))}else i.push(a.copy(r(a.content,a)))}),L.fromArray(i)};return new xe({props:{transformPasted:o=>new H(r(o.content),o.openStart,o.openEnd)}})}let jK=0,FK=Math.random(),BK=class extends WeakMap{get(e){let n=super.get(e);return n||(n=(jK++).toString()+"-"+FK,this.set(e,n),n)}};const Jl=new BK;class Uc extends Q{}function Mn(t,e){requestAnimationFrame(()=>{e(t.state,t.dispatch,t)})}function _e(t,e){return(n,r,o)=>e==null||(Array.isArray(t)||(t=[t]),t.some(s=>!s(n,o)))?!1:e(n,r,o)||!1}function Xf(t){return e=>{const{from:n,$from:r,to:o,empty:s}=e.selection;return s?!!t.isInSet(e.tr.storedMarks||r.marks()):!!e.doc.rangeHasMark(n,o,t)}}const zK=(t,e)=>Number.isInteger(t)&&t>=0&&t<e.content.size,qK=(t,e)=>{const{bulletList:n,orderedList:r}=e;return[n,r].includes(t)};function WK(t,e){const{from:n,to:r}=t.selection;let o=[];t.doc.nodesBetween(n,r,i=>{o=[...o,...i.marks]});const s=o.find(i=>i.type.name===e.name);return s?s.attrs:{}}function H3(t){const e=n=>n.isText?!!n.textContent.trim():n.type.name!=="hardBreak";if(t.isInline)return e(t);if(t.isBlock&&(t.isLeaf||t.isAtom))return!0;if(!t.childCount)return!1;for(let n=0;n<t.childCount;n++){const r=t.child(n);if(H3(r))return!0}return!1}function VK(t){if(t&&t.textContent)return!1;if(!t||!t.childCount||t.childCount===1&&c2(t.firstChild))return!0;const e=[],n=[];return t.forEach(r=>{r.isInline?n.push(r):e.push(r)}),!n.length&&!e.filter(r=>!!r.childCount&&!(r.childCount===1&&c2(r.firstChild))||r.isAtom).length}function c2(t){return!t||t.type.name==="paragraph"&&!t.textContent&&!t.childCount}function K3(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function UK(t,e,n,r){return HK(t,e,n).filter(o=>o.type!==r).length===0}function HK(t,e,n){const r=[],o=KK(t,e).depth;let s=t.resolve(e.start(o));for(;s.pos<=n.start(n.depth);){const i=Math.min(s.depth,o),a=s.node(i);if(a&&r.push(a),i===0)break;let l=t.resolve(s.after(i));if(l.start(i)>=t.nodeSize-2)break;l.depth!==s.depth&&(l=t.resolve(l.pos+2)),l.depth?s=t.resolve(l.start(l.depth)):s=t.resolve(l.end(l.depth))}return r}function KK(t,e){const n=["blockquote","bulletList","orderedList"];if(e.depth===1)return e;let r=e.node(e.depth),o=e;for(;e.depth>=1;)e=t.resolve(e.before(e.depth)),r=e.node(e.depth),r&&n.indexOf(r.type.name)!==-1&&(o=e);return o}const u2=t=>{const{empty:e,$from:n}=t.selection;return e&&(n.parentOffset===0||t.selection instanceof Uc)},GK=(t,e)=>{let n=null,{from:r,to:o}=t.tr.selection;return t.doc.nodesBetween(r,o,(s,i,a)=>{if(s.isText||i<r||i>o||!a)return!0;s.marks.forEach(l=>{if(!a.type.allowsMarkType(l.type)||e&&!e.allowsMarkType(l.type)){const c=s.marks.filter(f=>f.type!==l.type),u=i>0?i-1:0;let d=t.doc.nodeAt(u);if(!d||d.isText)return;n=(n||t.tr).setNodeMarkup(u,void 0,s.attrs,c)}})},r),n},ZK=(t,e,n)=>{let r=n.depth;const{bulletList:o,orderedList:s}=e.nodes;let i=t;i||({listItem:i}=e.nodes);for(let a=n.depth;a>0;a--){const l=n.node(a);if((l.type===o||l.type===s)&&(r=a),l.type!==o&&l.type!==s&&l.type!==i)break}return r-1};function JK(t,e){const n=[];for(let r=0;r<t.childCount;r++)n.push(e(t.child(r),r,t instanceof L?t:t.content));return n}const YK=t=>{const{$from:e}=t.selection;return e.depth>1?t.selection instanceof Uc&&e.parentOffset===0||e.index(e.depth-1)===0:!0};function XK(t,e){const n=G3(t.content,e);return new H(n,t.openStart,t.openEnd)}function G3(t,e,n){const r=[];for(let o=0,s=t.childCount;o<s;o++){const i=t.child(o),a=i.isLeaf?e(i,n,o):e(i.copy(G3(i.content,e,i)),n,o);a&&(a instanceof L?r.push(...QK(a)):Array.isArray(a)?r.push(...a):r.push(a))}return L.fromArray(r)}function QK(t){return t.content}function hr(t,e="above",n=!1,r){const o=e==="above",s=n?-1:void 0;return(i,a)=>{const l=o?i.selection.$from.before(s):i.selection.$from.after(s),c=t.createAndFill(r),u=i.tr;let d=Yf(c,l)(i.tr);return u===d?!1:(a&&a(d.scrollIntoView()),!0)}}function Kk(t,e,n,r){let o={start:-1,end:-1};return e.nodesBetween(n,r,(s,i)=>{if(o.start>-1)return!1;o.start===-1&&t.isInSet(s.marks)&&(o={start:i,end:i+Math.max(s.textContent.length,1)})}),o}function Gk(t,e){return new xe({key:t,state:{init(){return e},apply(n,r){return r}}})}function eG(t){const e=document.createElement("div"),n=$n.fromSchema(t.schema).serializeFragment(t.doc.content);return e.appendChild(n),e.innerHTML}function Z3(t,e){return t&&(n=>{n.isGeneric&&e(n),t(n)})}function G(t,e){const n=t instanceof Vs?t.schema.nodes[e]:t.nodes[e];return Ve(n,`nodeType ${e} not found`),n}function en(t){const e=t instanceof Vs?t.schema.nodes.paragraph:t.nodes.paragraph;return Ve(e,"nodeType paragraph not found"),e}function tG(t,e){const{$from:n}=t.selection;let o=n.start(e),s=n.end(e);return ae.create(t.doc,o,s)}function w1(t){return(e,n,r)=>{if(!e.selection.empty)return!1;const o=xt(t)(e.selection);if(!o)return!1;const s=e.selection;let i=e.tr;i=i.setSelection(tG(e,o.depth)),n&&n(i),document.execCommand("copy");const a=r.state.tr;return n&&n(a.setSelection(Q.near(a.doc.resolve(s.$from.pos)))),!0}}function x1(t){return(e,n)=>{if(!e.selection.empty)return!1;const r=xt(t)(e.selection);if(!r||!r.node)return!1;let o=e.tr;return o=o.setSelection(ne.create(o.doc,r.pos)),n&&n(o),document.execCommand("cut"),!0}}function bs(t,e){return e=Array.isArray(e)?e:[e],n=>{const r=xt(t)(n.selection);if(!r)return!1;const o=r.depth-1;if(o<0)return!1;const s=n.selection.$from.node(o);return e.includes(s.type)}}function is(t,e="UP"){const n=e==="DOWN";return(r,o)=>{if(!r.selection.empty)return!1;const{$from:s}=r.selection,i=xt(t)(r.selection);if(!i)return!1;const{node:a}=i,l=i.depth-1,c=s.node(l),u=s.start(l);if(a.type!==t)return!1;const d=JK(c,x=>x);let f=d.indexOf(a),p=n?f+1:f-1;if(p>=d.length||p<0)return!1;const h=d[p].nodeSize;[d[f],d[p]]=[d[p],d[f]];let y=r.tr,g=u,b=s.end(l);const w=new H(L.fromArray(d),0,0);return y=y.step(new Mt(g,b,w,!1)),y=y.setSelection(Q.near(y.doc.resolve(n?s.pos+h:s.pos-h))),o&&o(y.scrollIntoView()),!0}}function Zk(t){return(e,n)=>{const r=xt(t)(e.selection);if(!r)return!1;if(n){const{start:o}=r;n(e.tr.setSelection(ae.create(e.doc,o)))}return!0}}function Jk(t){return(e,n)=>{const r=xt(t)(e.selection);if(!r)return!1;if(n){const{node:o,start:s}=r;n(e.tr.setSelection(ae.create(e.doc,s+o.content.size)))}return!0}}const J3=rG,nG="doc";function rG({content:t="block+"}={}){return{type:"node",topNode:!0,name:nG,schema:{content:t}}}var Y3=Object.freeze({__proto__:null,spec:J3});class Yk{constructor(e,n){this.name=e,this.plugins=n}}const Xk="editorStateCounter",oG=aG,sG=new Ee(Xk),iG=new Ee(Xk);function aG(){return()=>new Yk(Xk,[new xe({key:sG,state:{init(t,e){return 0},apply(t,e,n,r){return t.docChanged?e+1:e}}}),new xe({key:iG,state:{init(t,e){return 0},apply(t,e,n,r){return r.selection.eq(n&&n.selection)?e:e+1}}})])}const X3=uG,lG={undo:Qk,redo:eg},Q3={undo:"Mod-z",redo:"Mod-y",redoAlt:"Shift-Mod-z"},cG="history";function uG({historyOpts:t={},keybindings:e=Q3}={}){return()=>new Yk(cG,[RH(t),e&&st(nn([[e.undo,Qk()],[e.redo,eg()],[e.redoAlt,eg()]]))])}function Qk(){return O3}function eg(){return I3}var dG=Object.freeze({__proto__:null,plugins:X3,commands:lG,defaultKeys:Q3,undo:Qk,redo:eg});const e4=mG,fG=gG,pG={convertToParagraph:e_,jumpToStartOfParagraph:i4,jumpToEndOfParagraph:a4,queryIsParagraph:r4,queryIsTopLevelParagraph:n4,insertEmptyParagraphAbove:o4,insertEmptyParagraphBelow:s4},t4={jumpToEndOfParagraph:Ot.mac?"Ctrl-e":"Ctrl-End",jumpToStartOfParagraph:Ot.mac?"Ctrl-a":"Ctrl-Home",moveDown:"Alt-ArrowDown",moveUp:"Alt-ArrowUp",emptyCopy:"Mod-c",emptyCut:"Mod-x",insertEmptyParaAbove:"Mod-Shift-Enter",insertEmptyParaBelow:"Mod-Enter",convertToParagraph:"Ctrl-Shift-0"},hG="paragraph";function mG(){return{type:"node",name:hG,schema:{content:"inline*",group:"block",draggable:!1,parseDOM:[{tag:"p"}],toDOM:()=>["p",0]},markdown:{toMarkdown(t,e){t.renderInline(e),t.closeBlock(e)},parseMarkdown:{paragraph:{block:"paragraph"}}}}}function gG({keybindings:t=t4}={}){return({schema:e})=>{const n=en(e),r=bs(n,G(e,"doc"));return[t&&st(nn([[t.convertToParagraph,e_()],[t.moveUp,_e(r,is(n,"UP"))],[t.moveDown,_e(r,is(n,"DOWN"))],[t.jumpToStartOfParagraph,Zk(n)],[t.jumpToEndOfParagraph,Jk(n)],[t.emptyCopy,_e(r,w1(n))],[t.emptyCut,_e(r,x1(n))],[t.insertEmptyParaAbove,_e(r,hr(n,"above"))],[t.insertEmptyParaBelow,_e(r,hr(n,"below"))]]))]}}function e_(){return(t,e)=>bc(en(t))(t,e)}function n4(){return t=>{const e=en(t);return bs(e,G(t,"doc"))(t)}}function r4(){return t=>{const e=en(t);return!!xt(e)(t.selection)}}function o4(){return(t,e,n)=>{const r=en(t);return _e(bs(r,G(t,"doc")),hr(r,"above"))(t,e,n)}}function s4(){return(t,e,n)=>{const r=en(t);return _e(bs(r,G(t,"doc")),hr(r,"below"))(t,e,n)}}function i4(){return(t,e)=>{const n=en(t);return Zk(n)(t,e)}}function a4(){return(t,e)=>{const n=en(t);return Jk(n)(t,e)}}var Qf=Object.freeze({__proto__:null,spec:e4,plugins:fG,commands:pG,defaultKeys:t4,convertToParagraph:e_,queryIsTopLevelParagraph:n4,queryIsParagraph:r4,insertEmptyParagraphAbove:o4,insertEmptyParagraphBelow:s4,jumpToStartOfParagraph:i4,jumpToEndOfParagraph:a4});const l4=bG,yG="text";function bG(){return{type:"node",name:yG,schema:{group:"inline"},markdown:{toMarkdown(t,e){t.text(e.text)}}}}var c4=Object.freeze({__proto__:null,spec:l4});function vG(t,e,{metadata:n,editorProps:r,defaultPlugins:o=!0,dropCursorOpts:s,transformPlugins:i=a=>a}={}){const l={schema:t.schema,specRegistry:t,metadata:n};let[c,u]=d2(e,l);if(o){let d=[];u.has("history")||d.push(X3()),u.has("editorStateCounter")||d.push(oG()),c=c.concat(d2(d,l)[0]),c=wG(c),c.push(st(RV),MV(s),kH())}if(r&&c.push(new xe({props:r})),c=c.filter(Boolean),c=i(c),c.some(d=>!(d instanceof xe)))throw ar("You are either using multiple versions of the library or not returning a Plugin class in your plugins. Investigate :",c.find(d=>!(d instanceof xe))),new Error("Invalid plugin");return xG(c,t),c}function wG(t,{inputRules:e=!0,undoInputRule:n=!0}={}){let r=[],o=[];return t.forEach(s=>{if(s instanceof ys){o.push(s);return}r.push(s)}),e&&(t=[...r,LH({rules:o})]),n&&t.push(st({Backspace:jH})),t}function xG(t,e){const n=t.filter(o=>o.props&&o.props.nodeViews),r=new Map;for(const o of n)for(const s of Object.keys(o.props.nodeViews)){if(!e.schema.nodes[s])throw ar(`When loading your plugins, we found nodeView implementation for the node '${s}' did not have a corresponding spec. Check the plugin:`,o,"and your specRegistry",e),new Error(`NodeView validation failed. Spec for '${s}' not found.`);if(r.has(s))throw ar(`When loading your plugins, we found more than one nodeView implementation for the node '${s}'. Bangle can only have a single nodeView implementation, please check the following two plugins`,o,r.get(s)),new Error(`NodeView validation failed. Duplicate nodeViews for '${s}' found.`);r.set(s,o)}}function d2(t,e){const n=new Set,r=o=>{if(Array.isArray(o))return o.flatMap(s=>r(s)).filter(Boolean);if(o instanceof Yk){if(n.has(o.name))throw new Error(`Duplicate names of pluginGroups ${o.name} not allowed.`);return n.add(o.name),r(o.plugins)}if(typeof o=="function"){if(!e)throw new Error("Found a function but no payload");return r(o(e))}return o};return[r(t),n]}class ep{constructor(e=[],{defaultSpecs:n=!0}={}){let r=$G(e);r.forEach(_G);const o=new Set(r.map(s=>s.name));if(r.length!==o.size)throw ar("The specRegistry has one or more specs with the same name",r),new Error("Duplicate spec error, please check your specRegistry");if(n){const s=[];o.has("paragraph")||s.unshift(e4()),o.has("text")||s.unshift(l4()),o.has("doc")||s.unshift(J3()),r=[...s,...r]}this._spec=r,this._schema=kG(this._spec),this._options=Object.fromEntries(this._spec.filter(s=>s.options).map(s=>[s.name,s.options]))}get options(){return this._options}get schema(){return this._schema}get spec(){return this._spec}}function kG(t){let e=[],n=[],r;for(const o of t)if(o.type==="node")e.push([o.name,o.schema]),o.topNode===!0&&(r=o.name);else if(o.type==="mark")n.push([o.name,o.schema]);else{let s=o;throw new Error("Unknown type: "+s.type)}return new AR({topNode:r,nodes:Object.fromEntries(e),marks:Object.fromEntries(n)})}function _G(t){if(!t.name)throw ar("The spec didn't have a name field",t),new Error("Invalid spec. Spec must have a name");if(!["node","mark"].includes(t.type))throw ar("The spec must be of type node, mark or component ",t),new Error("Invalid spec type");if(["node","mark"].includes(t.type)&&!t.schema)throw ar("The spec of type 'mark' or 'node' must have a schema field",t),new Error("Invalid spec schema")}function $G(t){const e=n=>Array.isArray(n)?n.flatMap(r=>e(r)).filter(r=>!!r):n==null||n===!1?[]:[n];return e(t)}class t_{constructor({specRegistry:e,specs:n,plugins:r=()=>[],initialValue:o,editorProps:s,pmStateOpts:i,pluginMetadata:a,dropCursorOpts:l}={}){if(n&&e)throw new Error("Cannot have both specs and specRegistry defined");e||(e=new ep(n)),Array.isArray(r)&&console.warn("The use plugins as an array is deprecated, please pass a function which returns an array of plugins. Refer: https://bangle.dev/docs/api/core#bangleeditorstate"),this.specRegistry=e;const c=this.specRegistry.schema,u=vG(e,r,{editorProps:s,metadata:a,dropCursorOpts:l});this.pmState=Vs.create({schema:c,doc:EG({schema:c,content:o}),plugins:u,...i})}}const EG=({schema:t,content:e,parseOptions:n})=>{const r={type:"doc",content:[{type:"paragraph"}]};if(e==null)return t.nodeFromJSON(r);if(e instanceof Cn)return e;if(typeof e=="object")return t.nodeFromJSON(e);if(typeof e=="string"){const o=document.createElement("div");return o.innerHTML=e.trim(),hc.fromSchema(t).parse(o,n)}};let u4=class{constructor(e,{focusOnInit:n=!0,state:r,pmViewOpts:o={}}){if(this.destroyed=!1,!(r instanceof t_))throw new Error("state is required and must be an instance of BangleEditorState");this.view=new A3(e,{state:r.pmState,dispatchTransaction:s=>{const i=this.view.state.apply(s);this.view.updateState(i)},attributes:{class:"bangle-editor"},...o}),n&&this.focusView()}destroy(){if(!this.destroyed){if(this.view.isDestroyed){this.destroyed=!0;return}this.destroyed=!0,this.view.destroy()}}focusView(){Uk||this.view.hasFocus()||this.view.focus()}toHTMLString(){return eG(this.view.state)}};function f2(t){const{dom:e,contentDOM:n}=$n.renderSpec(window.document,t);if(n)throw new Error("createElement does not support creating contentDOM");return e}function k1(t,{tag:e="div",content:n,ignoreAttrs:r=[],parsingPriority:o=51}={}){const s=i=>JSON.stringify(U3(i.attrs||{},(a,l)=>!r.includes(l)));return{toDOM:i=>{const a=[e,{"data-bangle-name":t,"data-bangle-attrs":s(i)}];return n!==void 0&&(typeof n=="function"?a.push(n(i)):a.push(n)),a},parseDOM:[{priority:o,tag:`${e}[data-bangle-name="${t}"]`,getAttrs:i=>{const a=i.getAttribute("data-bangle-attrs");return a?JSON.parse(a):{}}}]}}const hw=new WeakMap;class SG{constructor({node:e,view:n,getPos:r,decorations:o,containerDOM:s,contentDOM:i,renderHandlers:a=TG(n)},{selectionSensitive:l=!0}={}){if(this._node=e,this._view=n,this._getPos=r,this._decorations=o,this._selected=!1,!a)throw ar("It appears the view =",n," was not associated with renderHandlers. You are either using nodeViews accidentally or have incorrectly setup nodeViews"),new Error("You either did not pass the renderHandlers correct or it cannot find render handlers associated with the view.");if(this.renderHandlers=a,this.containerDOM=s,this.contentDOM=i,this.contentDOM&&this.contentDOM.classList.add("bangle-nv-content"),this.containerDOM&&this.containerDOM.classList.add("bangle-nv-container"),this._node.type.isAtom&&this.contentDOM)throw new Error("An atom node cannot have a contentDOM");this.opts={selectionSensitive:l},this.renderHandlers.create(this,this.getNodeViewProps())}get dom(){return this.containerDOM}getAttrs(){return this._node.attrs}getNodeViewProps(){return{node:this._node,view:this._view,getPos:this._getPos,decorations:this._decorations,selected:this._selected,attrs:this._node.attrs,updateAttrs:e=>{this._view.dispatch(AG(this._getPos(),this._node,e,this._view.state.tr))}}}}class Hc extends SG{static createPlugin({name:e,containerDOM:n,contentDOM:r,renderHandlers:o}){return new xe({key:new Ee(e+"NodeView"),props:{nodeViews:{[e]:(s,i,a,l)=>{const c=f2(n);let u;return r&&(u=f2(r)),new Hc({node:s,view:i,getPos:a,decorations:l,containerDOM:c,contentDOM:u,renderHandlers:o})}}}})}deselectNode(){this.containerDOM.classList.remove("ProseMirror-selectednode"),this._selected=!1,this.renderHandlers.update(this,this.getNodeViewProps())}destroy(){this.renderHandlers.destroy(this,this.getNodeViewProps()),this.containerDOM=void 0,this.contentDOM=void 0}ignoreMutation(e){return this._node.type.isAtom?!0:!(e.type==="selection"||this.containerDOM.contains(e.target)||e.target===this.contentDOM)}selectNode(){this.containerDOM.classList.add("ProseMirror-selectednode"),this._selected=!0,this.renderHandlers.update(this,this.getNodeViewProps())}update(e,n){return this._node.type!==e.type?!1:(this._node===e&&this._decorations===n||(this._node=e,this._decorations=n,this.renderHandlers.update(this,this.getNodeViewProps())),!0)}}function CG(t,e){if(hw.has(t))throw new Error("It looks like renderHandlers were already set by someone else.");hw.set(t,e)}function TG(t){let e=t.dom.parentNode;return hw.get(e)}function AG(t,e,n,r){return t===void 0?r:r.setNodeMarkup(t,void 0,{...e.attrs,...n})}const NG=PG,Mb="markdownFrontMatter";function PG(){const t={type:"node",name:Mb,schema:{group:"frontMatter",atom:!0,isolating:!0,attrs:{data:{default:""}}},markdown:{toMarkdown(e,n){e.write(`---
`),e.text(n.attrs.data,!1),e.write(`
---`),e.closeBlock(n)},parseMarkdown:{front_matter:{block:Mb,getAttrs:e=>typeof e.meta=="string"?{data:e.meta}:null,noCloseToken:!0}}}};return t.schema={...t.schema,...k1(Mb,{tag:"div",content:e=>e.attrs.data,parsingPriority:52})},t}var OG=Object.freeze({__proto__:null,spec:NG});function IG(t,e=n=>{}){var n=3,r="-",o=r.charCodeAt(0),s=r.length;function i(a,l,c,u){var d,f,p,h,y,g,b,w=!1,x=a.bMarks[l]+a.tShift[l],k=a.eMarks[l];if(l!==0||o!==a.src.charCodeAt(0))return!1;for(d=x+1;d<=k;d++)if(r[(d-x)%s]!==a.src[d]){b=d+1;break}if(p=Math.floor((d-x)/s),p<n)return!1;if(d-=(d-x)%s,u)return!0;for(f=l;f++,!(f>=c||a.src.slice(x,k)==="..."||(x=a.bMarks[f]+a.tShift[f],k=a.eMarks[f],x<k&&a.sCount[f]<a.blkIndent));)if(o===a.src.charCodeAt(x)&&!(a.sCount[f]-a.blkIndent>=4)){for(d=x+1;d<=k&&r[(d-x)%s]===a.src[d];d++);if(!(Math.floor((d-x)/s)<p)&&(d-=(d-x)%s,d=a.skipSpaces(d),!(d<k))){w=!0;break}}return y=a.parentType,g=a.lineMax,a.parentType="container",a.lineMax=f,h=a.push("front_matter",null,0),h.hidden=!0,h.markup=a.src.slice(l,d),h.block=!0,h.map=[l,d],h.meta=a.src.slice(b,x-1),a.parentType=y,a.lineMax=g,a.line=f+(w?1:0),e(h.meta),!0}t.block.ruler.before("fence","front_matter",i,{alt:["paragraph","reference","blockquote","list"]})}const RG=[IG],MG=jG,DG=FG,LG={queryIsBlockquoteActive:tp,wrapInBlockquote:n_},d4={wrapIn:"Ctrl-ArrowRight",moveDown:"Alt-ArrowDown",moveUp:"Alt-ArrowUp",emptyCopy:"Mod-c",emptyCut:"Mod-x",insertEmptyParaAbove:"Mod-Shift-Enter",insertEmptyParaBelow:"Mod-Enter"},yf="blockquote";function jG(){return{type:"node",name:yf,schema:{content:"block*",group:"block",defining:!0,draggable:!1,parseDOM:[{tag:"blockquote"}],toDOM:()=>["blockquote",0]},markdown:{toMarkdown:(t,e)=>{t.wrapBlock("> ",null,e,()=>t.renderContent(e))},parseMarkdown:{blockquote:{block:yf}}}}}function FG({markdownShortcut:t=!0,keybindings:e=d4}={}){return({schema:n})=>{const r=G(n,yf);return[t&&jk(/^\s*>\s$/,r),e&&st(nn([[e.wrapIn,n_()],[e.moveUp,is(r,"UP")],[e.moveDown,is(r,"DOWN")],[e.emptyCopy,w1(r)],[e.emptyCut,x1(r)],[e.insertEmptyParaAbove,f4()],[e.insertEmptyParaBelow,p4()]]))]}}function tp(){return t=>{const e=G(t,yf);return!!xt(e)(t.selection)}}function n_(){return _e(t=>!tp()(t),(t,e,n)=>{const r=G(t,yf);return AV(r)(t,e)})}function f4(){const t=tp();return(e,n,r)=>{const o=en(e);return _e(t,hr(o,"above",!0))(e,n,r)}}function p4(){const t=tp();return(e,n,r)=>{const o=en(e);return _e(t,hr(o,"below",!0))(e,n,r)}}var _1=Object.freeze({__proto__:null,spec:MG,plugins:DG,commands:LG,defaultKeys:d4,queryIsBlockquoteActive:tp,wrapInBlockquote:n_,insertEmptyParaAbove:f4,insertEmptyParaBelow:p4});const BG=VG,zG=UG,qG={toggleBold:r_,queryIsBoldActive:m4},h4={toggleBold:"Mod-b"},_i="bold",WG=t=>{const e=t.marks[_i];return Ve(e,`markType ${_i} not found`),e};function VG(){return{type:"mark",name:_i,schema:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}],toDOM:()=>["strong",0]},markdown:{toMarkdown:{open:"**",close:"**",mixable:!0,expelEnclosingWhitespace:!0},parseMarkdown:{strong:{mark:_i}}}}}function UG({markdownShortcut:t=!0,keybindings:e=h4}={}){return({schema:n})=>{const r=WG(n);return[t&&Ma(/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,r),t&&Ma(/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,r),t&&Ra(/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,r),t&&Ra(/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,r),e&&st(nn([[e.toggleBold,r_()]]))]}}function r_(){return(t,e,n)=>{const r=t.schema.marks[_i];return Ve(r,`markType ${_i} not found`),gs(r)(t,e)}}function m4(){return t=>{const e=t.schema.marks[_i];return Ve(e,`markType ${_i} not found`),Xf(e)(t)}}var $1=Object.freeze({__proto__:null,spec:BG,plugins:zG,commands:qG,defaultKeys:h4,toggleBold:r_,queryIsBoldActive:m4});const zn=(t,e)=>t.type===G(e,"listItem")&&typeof t.attrs.todoChecked=="boolean",o_=(t,e,n,r)=>(zn(n,e)&&(t=t.setNodeMarkup(r,void 0,Object.assign({},n.attrs,{todoChecked:null}))),t),np=(t,e,n,r)=>(n.type===G(e,"listItem")&&!zn(n,e)&&(t=t.setNodeMarkup(r,void 0,Object.assign({},n.attrs,{todoChecked:!1}))),t),HG=_e([g4,t=>y4(t).todos!==0],(t,e)=>{const{schema:n}=t;let r=t.tr;return s_(t,(o,s)=>{r=o_(r,n,o,s)}),e&&e(r),!0}),KG=_e([g4,t=>{const{todos:e,lists:n}=y4(t);return e!==n}],(t,e)=>{let{tr:n,schema:r}=t;return s_(t,(o,s)=>{n=np(n,r,o,s)}),e&&e(n),!0});function GG(t,e){return new ys(t,function(n,r,o,s){const i=G(n,"listItem");var a=e instanceof Function?e(r):e,l=n.tr.delete(o,s),c=l.doc.resolve(o),u=c.blockRange(),d=u&&c1(u,i,a);if(!d)return null;l.wrap(u,d);var f=l.doc.resolve(o-1).nodeBefore;return f&&f.type===G(n,"bulletList")&&Vc(l.doc,o-1)&&f.lastChild&&zn(f.lastChild,n.schema)&&l.join(o-1),l})}function s_(t,e){const{schema:n,selection:{$from:r,$to:o}}=t,s=r.blockRange(o,u=>u.childCount>0&&u.firstChild.type===G(n,"listItem"));if(!s)return;const{parent:i,startIndex:a,endIndex:l}=s;let c=s.$from.start(s.depth);for(let u=0;u<i.childCount;u++){const d=i.child(u);e(d,c),u>=a&&u<l-1&&d.nodesBetween(0,d.content.size,e,c+1),c+=d.nodeSize}}function g4(t){const{selection:e}=t,n=e.$from.node(-2),r=e.$to.node(-2);return n&&n.type===G(t,"bulletList")&&r&&r.type===G(t,"bulletList")}function y4(t){let e=0,n=0;const{schema:r}=t;return s_(t,(o,s)=>{o.type===G(r,"listItem")&&e++,zn(o,r)&&n++}),{lists:e,todos:n}}function ZG(t,e,n,r){let{$from:o,$to:s}=n,i=t;i||(i=G(e,"listItem"));let a=o.blockRange(s,u=>!!u.childCount&&!!u.firstChild&&u.firstChild.type===i);if(!a||a.depth<2||o.node(a.depth-1).type!==i)return r;let l=a.end,c=s.end(a.depth);return l<c&&(r.step(new vt(l-1,c,l,c,new H(L.from(i.create(void 0,a.parent.copy())),1,0),1,!0)),a=new ff(r.doc.resolve(o.pos),r.doc.resolve(c),a.depth)),r.lift(a,Wc(a)).scrollIntoView()}function JG(t,e,n,r,o,s){let i=t;i||(i=G(e,"listItem"));let a=!1;return s.doc.nodesBetween(n,r,(l,c)=>{if(!a&&l.type===i&&c>n){a=!0;let u=o+3;for(;u>o+2;){const d=s.doc.resolve(s.mapping.map(c));u=d.depth;const f=s.doc.resolve(s.mapping.map(c+l.content.size)),p=new ae(d,f);s=ZG(i,e,p,s)}}}),s}function YG(t,e,n){const{from:r,to:o}=e.selection,{paragraph:s}=e.schema.nodes,i=[];n.doc.nodesBetween(r,o,(a,l)=>{a.type===s&&i.push({node:a,pos:l})});for(let a=i.length-1;a>=0;a--){const l=i[a],c=n.doc.resolve(n.mapping.map(l.pos));if(c.depth>0){let u;l.node.textContent&&l.node.textContent.length>0?u=n.doc.resolve(n.mapping.map(l.pos+l.node.textContent.length)):u=n.doc.resolve(n.mapping.map(l.pos+1));const d=c.blockRange(u);d&&n.lift(d,ZK(t,e.schema,c))}}return n}const XG=4,b4=(t,e)=>{const{bulletList:n,orderedList:r}=e;let o=0;for(let s=t.depth-1;s>0;s--){const i=t.node(s);(i.type===n||i.type===r)&&(o+=1)}return o},QG=(t,e)=>{const{$from:n}=t.selection,r=n.node(-2),o=n.node(-3);return r&&r.type===e||o&&o.type===e},eZ=t=>e=>{const{parent:n}=e.selection.$from;let r=t;r||({listItem:r}=e.schema.nodes);const{paragraph:o}=e.schema.nodes;return e.selection instanceof Uc?n.type===r:n.type===o&&Wk(r)(e.selection)};function tZ(t,e){let n,r=e.tr.selection.$to.pos;do{const o=e.doc.resolve(r);if(n=b4(o,e.schema.nodes),n>XG)return!1;r++}while(n>=t);return!0}const i_=t=>e=>{const{$from:n}=e.selection;let r=t;r||(r=G(e,"listItem"));const{paragraph:o}=e.schema.nodes;return e.selection instanceof Uc?n.parent.type===r:Wk(r)(e.selection)&&n.parent.type===o},nZ=(t,e,n)=>{let r=t;const{bulletList:o,orderedList:s}=n;let i;for(let a=e.depth-1;a>0;a--){const l=e.node(a);if((l.type===o||l.type===s)&&(i=a),l.type!==o&&l.type!==s&&l.type!==r)break}return i};function rZ(t){const{$from:e}=t.selection,{bulletList:n,orderedList:r}=t.schema.nodes,o=t.doc.resolve(e.pos-1);let s=o?o.nodeBefore:null;return t.selection instanceof Uc&&(s=e.nodeBefore),!!s&&[n,r].indexOf(s.type)>-1}function E1(t,e,n){return(r,o,s)=>{const{selection:i}=r,a=i.$from.node(i.$from.depth-2),l=i.$to.node(i.$to.depth-2);if(!a||a.type.name!==t.name||!l||l.type.name!==t.name)return oZ(t,n)(r,o,s);{const c=e||G(r,"listItem"),u=nZ(c,i.$to,r.schema.nodes);let d=i.$to.pos;i instanceof ne&&i.node.type===c&&(d=i.$from.pos+i.node.firstChild.content.size);let f=r.tr,p=JG(c,r,d,i.$to.end(u),u||0,f);return p=YG(c,r,p),o&&o(p),!0}}}function oZ(t,e=!1){const n=r=>o=>{if(!o.isGeneric)return o;let s=[];for(let a=0;a<o.mapping.maps.length;a++){let l=o.mapping.maps[a];for(let c=0;c<s.length;c++)s[c]=l.map(s[c]);l.forEach((c,u,d,f)=>{s.push(d,f)})}const i=(a,l)=>a.type===G(r,"listItem")&&(l==null?void 0:l.type)===G(r,"bulletList");for(let a=0;a<s.length;a+=2){let l=s[a],c=s[a+1];o.doc.nodesBetween(l,c,(u,d,f)=>{d>=l&&d<c&&i(u,f)&&np(o,r,u,d)})}return o};return function(r,o,s){if(o&&o(r.tr.setSelection(iZ(r.doc,r.selection))),!s)return!1;r=s.state;const{$from:i,$to:a}=r.selection,l=UK(r.doc,i,a,t);if(QG(r,t)&&l)return p2()(r,o);{l||(p2()(r,o),r=s.state);const c=GK(r,t);return c&&o&&(o(c),r=s.state),sZ(t)(r,e?Z3(o,n(r.schema)):o)}}}function sZ(t,e){return OV(FH(t,e),(n,r)=>n.type===r.type&&n.type===t)}function p2(){return function(t,e){const{tr:n}=t,{$from:r,$to:o}=t.selection;return n.doc.nodesBetween(r.pos,o.pos,(s,i)=>{if(s.isTextblock){const a=new ne(n.doc.resolve(n.mapping.map(i))),l=a.$from.blockRange(a.$to);if(!l||![G(t,"listItem")].includes(a.$from.parent.type))return!1;const c=l&&Wc(l);if(c==null)return!1;n.lift(l,c)}}),e&&e(n),!0}}function iZ(t,e){let{$from:n,$to:r}=e;const o=n.pos===r.pos;let s=n.pos,i=r.pos;if(o&&s===t.nodeSize-3)return e;if(n.nodeBefore&&!o){s++;let a=t.nodeAt(s);for(;!a||a&&!a.isText;)s++,a=t.nodeAt(s)}return i===s?new ae(t.resolve(s)):new ae(t.resolve(s),t.resolve(i))}function aZ(t){const e=n=>r=>{if(!r.isGeneric)return r;const o=r.selection.$from.blockRange(r.selection.$to,u=>u.childCount>0&&u.firstChild.type===G(n,"listItem"));if(!o||o.startIndex===0)return r;const s=zn(o.parent.child(o.startIndex-1),n),{parent:i,startIndex:a,endIndex:l}=o;let c=0;for(let u=a;u<l;u++){const d=i.child(u),f=o.start+c;r=s?np(r,n,d,f):o_(r,n,d,f),c+=d.nodeSize}return r};return function(r,o){let s=t;if(s||(s=G(r,"listItem")),i_(s)(r)){const i=b4(r.selection.$from,r.schema.nodes);return tZ(i,r)&&VH(s)(r,Z3(o,e(r.schema))),!0}return!1}}function bf(t){return function(e,n,r){let o=t;o||(o=G(e,"listItem"));const{$from:s,$to:i}=e.selection;if(!i_(o)(e))return!1;let a=s.blockRange(i,u=>u.childCount>0&&u.firstChild.type===o);if(!a)return!1;const l=zn(e.selection.$from.node(-3),e.schema);if(n&&r){const u=e.selection.$from.node(-2),d=e.selection.$from.start(-2);let f=e.tr;for(const{node:p,pos:h}of V3(u,!1)){const y=h+d;y>=e.selection.$from.before(-1)&&y<e.selection.$to.after(-1)&&(l?np(f,e.schema,p,y):o_(f,e.schema,p,y))}n(f),e=r.state}return NK(lZ(o,a),zH)(o)(e,n,r)}}function lZ(t,e){return n=>(r,o,s)=>n(r,a=>{const l=r.doc.resolve(e.start),c=r.doc.resolve(e.end),u=a.doc.resolve(a.mapping.map(e.end-1));u.nodeBefore&&u.nodeAfter&&u.nodeBefore.type===u.nodeAfter.type&&c.nodeAfter&&c.nodeAfter.type===t&&c.parent.type===l.parent.type&&a.join(u.pos),o&&o(a.scrollIntoView())},s)}const cZ=t=>(e,n,r)=>Vn(_e([i_(t),u2,YK,eZ(t)],Vn(pZ(t),bf(t))),_e([u2,rZ],fZ(t)))(e,n,r);function uZ(t){return(e,n,r)=>{const{selection:o}=e;if(o.empty){const{$from:s}=o;let i=t;i||(i=G(e,"listItem"));const{codeBlock:a}=e.schema.nodes,l=s.node(s.depth),c=s.node(s.depth-1);if(c&&c.type===i){const u=H3(c);if(VK(l)&&!u){const d=s.node(s.depth-3);return zn(d,e.schema)&&!zn(c,e.schema)?bf(G(e,"listItem"))(e,n,r):bf(i)(e,n,r)}else if(!a||!Wk(a)(o))return dZ(i,d=>zn(d,e.schema)?{...d.attrs,todoChecked:!1}:d.attrs)(e,n)}}return!1}}function dZ(t,e){return function(n,r){const o=n.selection,s=o.$from,i=o.$to,a=o.node;if(a&&a.isBlock||s.depth<2||!s.sameParent(i))return!1;const l=s.node(-1);if(l.type!==t)return!1;if(l.content.content.length<=1&&s.parent.content.size===0&&l.content.size!==0){if(s.depth===2||s.node(-3).type!==t||s.index(-2)!==s.node(-2).childCount-1)return!1;if(r){let f=L.empty;const p=s.index(-1)>0;for(let y=s.depth-(p?1:2);y>=s.depth-3;y--)f=L.from(s.node(y).copy(f));f=f.append(L.from(t.createAndFill()));const h=n.tr.replace(s.before(p?void 0:-1),s.after(-3),new H(f,p?3:2,2));h.setSelection(Q.near(h.doc.resolve(s.pos+(p?3:2)))),r(h.scrollIntoView())}return!0}const c=i.pos===s.end()?l.contentMatchAt(0).defaultType:void 0,u=n.tr.delete(s.pos,i.pos),d=[e?{type:t,attrs:e(l)}:void 0,c&&{type:c}];return r&&r(u.split(s.pos,2,d).scrollIntoView()),!0}}function fZ(t){return(e,n)=>{let r=t;r||({listItem:r}=e.schema.nodes);const{$from:o}=e.selection,{paragraph:s,codeBlock:i,heading:a,bulletList:l,orderedList:c}=e.schema.nodes,u=e.selection instanceof Uc,d=u?e.doc.resolve(o.pos+1):o;let f=K3(d);if(!f)return!1;if(f.nodeBefore&&[l,c].indexOf(f.nodeBefore.type)>-1&&f.nodeAfter&&[s,i,a].indexOf(f.nodeAfter.type)>-1){let p=f.doc.resolve(f.pos-1);for(;p.parent.type!==s;)p=e.doc.resolve(p.pos-1);let{tr:h}=e;if(u){const g=SK(h.selection);if(typeof g!="number")return!1;const b=f.nodeBefore.copy(f.nodeBefore.content.append(L.from(r.createChecked({},f.nodeAfter))));h.replaceWith(g,o.pos+f.nodeAfter.nodeSize,b)}else h=h.step(new vt(p.pos,f.pos+f.nodeAfter.nodeSize,f.pos+1,f.pos+f.nodeAfter.nodeSize-1,e.tr.doc.slice(p.pos,f.pos),0,!0));let y=h.doc.resolve(h.mapping.map(f.pos+f.nodeAfter.nodeSize));return y.nodeBefore&&y.nodeAfter&&y.nodeBefore.type===y.nodeAfter.type&&[l,c].indexOf(y.nodeBefore.type)>-1&&(h=h.join(y.pos)),n&&n(h.scrollIntoView()),!0}return!1}}function pZ(t){return(e,n)=>{const{$from:r}=e.selection;let o=t;o||(o=G(e,"listItem"));const s=K3(r);if(!s||!s.nodeBefore||s.nodeBefore.type!==o)return!1;if(s.nodeBefore.childCount===1&&s.nodeBefore.firstChild.nodeSize<=2){const{tr:a}=e;return n&&n(a.delete(s.pos-s.nodeBefore.nodeSize,r.pos).scrollIntoView()),!0}return!1}}function hZ(t,e="UP"){const n=e==="DOWN";return _e([s=>{const i=xt(t)(s.selection);if(!i)return!1;const a=i.node,{$from:l}=s.selection,c=l.node(i.depth-1),u=c&&c[n?"lastChild":"firstChild"];return!!(a&&u===a)}],(s,i,a)=>{let l=t;if(l||(l=G(s,"listItem")),!s.selection.empty)return!1;const c=qk(g=>qK(g.type,s.schema.nodes))(s.selection),u=xt(l)(s.selection);if(!(c&&c.node)||!(u&&u.node))return!1;if(s.selection.$from.depth===3)return bf(l)(s,i,a);let d=c.node.childCount===1?c:u,f=s.tr.delete(d.pos,d.pos+d.node.nodeSize),p=s.selection.$from.before(-3);if(n){let g=s.selection.$from.after(-3);p=g-d.node.nodeSize;let b=zK(g,s.doc)&&s.doc.nodeAt(g);b&&b.type===l&&(p+=b.nodeSize)}let h=u.node;const y=Yf(h,p)(f);return y===f?!1:(i&&i(y),!0)})}function mZ(t,e){return(n,r)=>{const{$from:o}=n.selection,s=o.node(-1);if(s&&s.type===t){const{tr:i}=n,a=o.before(-1);if(e(s.attrs)!==s.attrs)return i.setNodeMarkup(a,void 0,e(s.attrs)),r&&r(i),!0}return!1}}function v4(t,e){for(;++e<t.length;){let n=t[e];if(n&&n.type!=="list_item_open")return n.hidden}return!1}const gZ=vZ,yZ=wZ,bZ={toggleBulletList:a_,queryIsBulletListActive:k4},w4={toggle:"Shift-Ctrl-8",toggleTodo:"Shift-Ctrl-7"},mw="bulletList";function vZ(){return{type:"node",name:mw,schema:{content:"listItem+",group:"block",parseDOM:[{tag:"ul"}],toDOM:()=>["ul",0],attrs:{tight:{default:!1}}},markdown:{toMarkdown(t,e){t.renderList(e,"  ",()=>"- ")},parseMarkdown:{bullet_list:{block:mw,getAttrs:(t,e,n)=>({tight:v4(e,n)})}}}}}function wZ({markdownShortcut:t=!0,todoMarkdownShortcut:e=!0,keybindings:n=w4}={}){return({schema:r})=>{const o=G(r,mw);return[n&&st(nn([[n.toggle,a_()],[n.toggleTodo,x4()]])),t&&jk(/^\s*([-+*])\s$/,o,void 0,(s,i)=>!(i.lastChild&&zn(i.lastChild,r))),e&&GG(/^\s*(\[ \])\s$/,{todoChecked:!1})]}}function a_(){return Vn(HG,(e,n,r)=>E1(G(e,"bulletList"),G(e,"listItem"))(e,n,r))}function x4(){return Vn(KG,(e,n,r)=>E1(G(e,"bulletList"),G(e,"listItem"),!0)(e,n,r))}function k4(){return t=>bs(G(t,"listItem"),[G(t,"bulletList")])(t)}function xZ(){return t=>{const{schema:e}=t;return bs(G(t,"listItem"),[G(t,"bulletList")])(t)&&zn(t.selection.$from.node(-1),e)}}var Kc=Object.freeze({__proto__:null,spec:gZ,plugins:yZ,commands:bZ,defaultKeys:w4,toggleBulletList:a_,toggleTodoList:x4,queryIsBulletListActive:k4,queryIsTodoListActive:xZ});const kZ=SZ,_Z=CZ,$Z={toggleCode:E4,queryIsCodeActive:S4},_4={toggleCode:"Mod-`"},tr="code",EZ=t=>{const e=t.marks[tr];return Ve(e,`markType ${tr} not found`),e},l_=t=>{const e=t.schema.marks[tr];return Ve(e,`markType ${tr} not found`),e};function SZ(){return{type:"mark",name:tr,schema:{excludes:"_",parseDOM:[{tag:tr}],toDOM:()=>[tr,0]},markdown:{toMarkdown:{open(t,e,n,r){return h2(n.child(r),-1)},close(t,e,n,r){return h2(n.child(r-1),1)},escape:!1},parseMarkdown:{code_inline:{mark:tr,noCloseToken:!0}}}}}function CZ({markdownShortcut:t=!0,escapeAtEdge:e=!0,keybindings:n=_4}={}){return({schema:r})=>{const o=EZ(r),s=[i=>i.selection.empty&&i.selection.$cursor];return[t&&Ma(/(?:`)([^`]+)(?:`)/g,o),t&&Ra(/(?:`)([^`]+)(?:`)$/,o),n&&st(nn([[n.toggleCode,gs(o)]])),e&&st({ArrowRight:_e(s,TZ),ArrowLeft:_e(s,AZ)})]}}const Db=(t,e)=>{if(e<0||e>t.doc.content.size)return!1;const n=l_(t),r=t.doc.nodeAt(e);return r?r.marks.some(o=>o.type===n):!1};var TZ=(t,e)=>{const n=l_(t),r=t.selection.$cursor;let o=t.tr.storedMarks;const s=$4(t,n),i=t.doc.rangeHasMark(r.pos,r.pos,n),a=t.doc.rangeHasMark(r.pos,r.pos+1,n),l=!i&&a&&!(o&&o.length>0);if(!s&&l)return e&&e(t.tr.addStoredMark(n.create())),!0;const c=!i&&!a&&!(o&&o.length===0);return s&&c?(e&&e(t.tr.removeStoredMark(n)),!0):!1},AZ=(t,e)=>{const n=l_(t),r=$4(t,n),o=t.selection.$cursor,{storedMarks:s}=t.tr,i=Db(t,o.pos),a=Db(t,o.pos-1),l=Db(t,o.pos-2),c=i&&!a&&Array.isArray(s),u=a&&!l&&(s===null||Array.isArray(s)&&!!s.length),d=(c&&Array.isArray(s)&&!s.length||!c&&s===null)&&!a&&l,f=!i&&a&&Array.isArray(s)&&!s.length;if(!r&&d){const h=t.tr.setSelection(Q.near(t.doc.resolve(o.pos-1)));return e&&e(h.removeStoredMark(n)),!0}if(!r&&f)return e&&e(t.tr.addStoredMark(n.create())),!0;if(r&&u){const h=t.tr.setSelection(Q.near(t.doc.resolve(o.pos-1)));return e&&e(h.addStoredMark(n.create())),!0}const p=o.index(o.depth-1)===0;return r&&(c||!o.nodeBefore&&p)?(e&&e(t.tr.removeStoredMark(n)),!0):!1};function h2(t,e){let n=/`+/g,r,o=0;if(t.isText)for(;r=n.exec(t.text);){let i=r[0];typeof i=="string"&&(o=Math.max(o,i.length))}let s=o>0&&e>0?" `":"`";for(let i=0;i<o;i++)s+="`";return o>0&&e<0&&(s+=" "),s}function $4(t,e){const{from:n,to:r,empty:o}=t.selection;if(o)return!!e.isInSet(t.tr.storedMarks||t.selection.$from.marks());let s=!1;return t.doc.nodesBetween(n,r,i=>{s=s||!!e.isInSet(i.marks)}),s}function E4(){return(t,e)=>{const n=t.schema.marks[tr];return Ve(n,`markType ${tr} not found`),gs(n)(t,e)}}function S4(){return t=>{const e=t.schema.marks[tr];return Ve(e,`markType ${tr} not found`),Xf(e)(t)}}var S1=Object.freeze({__proto__:null,spec:kZ,plugins:_Z,commands:$Z,defaultKeys:_4,toggleCode:E4,queryIsCodeActive:S4});const NZ=IZ,PZ=RZ,OZ={queryIsCodeActiveBlock:tg},C4={toCodeBlock:"Shift-Ctrl-\\",moveDown:"Alt-ArrowDown",moveUp:"Alt-ArrowUp",insertEmptyParaAbove:"Mod-Shift-Enter",insertEmptyParaBelow:"Mod-Enter"},wd="codeBlock";function IZ(){return{type:"node",name:wd,schema:{attrs:{language:{default:""}},content:"text*",marks:"",group:"block",code:!0,defining:!0,draggable:!1,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:()=>["pre",["code",0]]},markdown:{toMarkdown(t,e){t.write("```"+(e.attrs.language||"")+`
`),t.text(e.textContent,!1),t.ensureNewLine(),t.write("```"),t.closeBlock(e)},parseMarkdown:{code_block:{block:wd,noCloseToken:!0},fence:{block:wd,getAttrs:t=>({language:t.info||""}),noCloseToken:!0}}}}}function RZ({markdownShortcut:t=!0,keybindings:e=C4}={}){return({schema:n})=>{const r=G(n,wd);return[t&&R3(/^```$/,r),e&&st(nn([[e.toCodeBlock,bc(r)],[e.moveUp,is(r,"UP")],[e.moveDown,is(r,"DOWN")],[e.insertEmptyParaAbove,_e(tg(),hr(en(n),"above",!1))],[e.insertEmptyParaBelow,_e(tg(),hr(en(n),"below",!1))]]))]}}function tg(){return t=>{const e=G(t,wd);return!!xt(e)(t.selection)}}var c_=Object.freeze({__proto__:null,spec:NZ,plugins:PZ,commands:OZ,defaultKeys:C4,queryIsCodeActiveBlock:tg});const MZ=LZ,DZ=jZ,T4={insert:"Shift-Enter"},A4="hardBreak";function LZ(){return{type:"node",name:A4,schema:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:()=>["br"]},markdown:{toMarkdown(t,e,n,r){for(let o=r+1;o<n.childCount;o++)if(n.child(o).type!==e.type){t.write(`\\
`);return}},parseMarkdown:{hardbreak:{node:"hardBreak"}}}}}function jZ({keybindings:t=T4}={}){return({schema:e})=>{const n=G(e,A4),r=Vn(ZR,(o,s)=>(s&&s(o.tr.replaceSelectionWith(n.create()).scrollIntoView()),!0));return[t&&st(nn([[t.insert,r]]))]}}var u_=Object.freeze({__proto__:null,spec:MZ,plugins:DZ,defaultKeys:T4});const FZ=WZ,BZ=VZ,zZ={toggleHeading:O4,queryIsHeadingActive:d_},N4={toH1:"Shift-Ctrl-1",toH2:"Shift-Ctrl-2",toH3:"Shift-Ctrl-3",toH4:"Shift-Ctrl-4",toH5:"Shift-Ctrl-5",toH6:"Shift-Ctrl-6",moveDown:"Alt-ArrowDown",moveUp:"Alt-ArrowUp",emptyCopy:"Mod-c",emptyCut:"Mod-x",insertEmptyParaAbove:"Mod-Shift-Enter",jumpToStartOfHeading:Ot.mac?"Ctrl-a":"Ctrl-Home",jumpToEndOfHeading:Ot.mac?"Ctrl-e":"Ctrl-End",insertEmptyParaBelow:"Mod-Enter",toggleCollapse:void 0},tn="heading",qZ=[1,2,3,4,5,6],P4=t=>{const e=G(t,tn);return xt(e)(t.selection)},m2=t=>{const e=parseInt(t,10);return Number.isNaN(e)?void 0:e};function WZ({levels:t=qZ}={}){if(t.some(n=>typeof n!="number"))throw new Error("levels must be number");const e={levels:t};return{type:"node",name:tn,schema:{attrs:{level:{default:1},collapseContent:{default:null}},content:"inline*",group:"block",defining:!0,draggable:!1,parseDOM:t.map(n=>({tag:`h${n}`,getAttrs:r=>{const o={level:m2(n)},s=r.getAttribute("data-bangle-attrs");if(!s)return o;const i=JSON.parse(s);return Object.assign({},o,i)}})),toDOM:n=>{const r=[`h${n.attrs.level}`,{},0];return n.attrs.collapseContent&&(r[1]["data-bangle-attrs"]=JSON.stringify({collapseContent:n.attrs.collapseContent}),r[1].class="bangle-heading-collapsed"),r}},markdown:{toMarkdown(n,r){n.write(n.repeat("#",r.attrs.level)+" "),n.renderInline(r),n.closeBlock(r)},parseMarkdown:{heading:{block:tn,getAttrs:n=>({level:m2(n.tag.slice(1))})}}},options:e}}function VZ({markdownShortcut:t=!0,keybindings:e=N4}={}){return({schema:n,specRegistry:r})=>{const{levels:o}=r.options[tn],s=G(n,tn),i=Object.fromEntries(o.map(a=>[e[`toH${a}`],bc(s,{level:a})]));return[e&&st({...i,...nn([[e.moveUp,is(s,"UP")],[e.moveDown,is(s,"DOWN")],[e.jumpToStartOfHeading,Zk(s)],[e.jumpToEndOfHeading,Jk(s)],[e.emptyCopy,w1(s)],[e.emptyCut,x1(s)],[e.insertEmptyParaAbove,M4()],[e.insertEmptyParaBelow,D4()],[e.toggleCollapse,L4()]])}),...(t?o:[]).map(a=>R3(new RegExp(`^(#{1,${a}})\\s$`),s,()=>({level:a})))]}}function O4(t=3){return(e,n)=>{if(d_(t)(e)){const r=en(e);return bc(r)(e,n)}return bc(G(e,tn),{level:t})(e,n)}}function d_(t){return e=>{const n=xt(G(e,tn))(e.selection);if(!n)return!1;const{node:r}=n;return t==null?!0:r.attrs.level===t}}function C1(){return t=>{const e=xt(G(t,tn))(t.selection);return!e||!p_(e)?!1:!!e.node.attrs.collapseContent}}function I4(){return(t,e)=>{const n=xt(G(t,tn))(t.selection);if(!n||!p_(n)||C1()(t))return!1;const o=KZ(n.node,t.doc);if(!o)return!1;const{fragment:s,start:i,end:a}=o;let l=t.tr.replaceWith(i,a,G(t,tn).createChecked({...n.node.attrs,collapseContent:s.toJSON()},n.node.content));return t.selection instanceof ae&&(l=l.setSelection(ae.create(l.doc,t.selection.from))),e&&e(l),!0}}function R4(){return(t,e)=>{const n=xt(G(t,tn))(t.selection);if(!n||!p_(n)||!C1()(t))return!1;const o=L.fromJSON(t.schema,n.node.attrs.collapseContent);let s=t.tr.replaceWith(n.pos,n.pos+n.node.nodeSize,L.fromArray([G(t,tn).createChecked({...n.node.attrs,collapseContent:null},n.node.content)]).append(o));return t.selection instanceof ae&&(s=s.setSelection(ae.create(s.doc,t.selection.from))),e&&e(s),!0}}function M4(){return _e(P4,(t,e,n)=>{const r=en(t);return hr(r,"above",!1)(t,e,n)})}function D4(){return _e(P4,(t,e,n)=>{const r=en(t);return hr(r,"below",!1)(t,e,n)})}function L4(){return(t,e)=>{const n=xt(G(t,tn))(t.selection);return!n||n.depth!==1?!1:C1()(t)?R4()(t,e):I4()(t,e)}}function UZ(){return(t,e)=>{const n=j4(t);let r=t.tr,o=0;for(const{node:s,pos:i}of n){let a=L.fromJSON(t.schema,f_(s.attrs.collapseContent));r=r.replaceWith(o+i,o+i+s.nodeSize,L.fromArray([G(t,tn).createChecked({...s.attrs,collapseContent:null},s.content)]).append(a)),o+=a.size}return t.selection instanceof ae&&(r=r.setSelection(ae.create(r.doc,t.selection.from))),e&&e(r),!0}}function j4(t){return b1(t.doc,e=>e.type===G(t,tn)&&!!e.attrs.collapseContent,!1)}function HZ(t){return b1(t.doc,e=>e.type===G(t,tn),!1)}const f_=t=>{let e=[];return t.forEach(n=>{if(n.type==="heading"&&n.attrs.collapseContent){const r=n.attrs.collapseContent;e.push({...n,attrs:{...n.attrs,collapseContent:null}}),e.push(...f_(r))}else e.push(n)}),e};function p_(t){return t.depth===1}function KZ(t,e){let n,r,o=!1;const s=a=>a.type!==t.type?!1:a.attrs.level<=t.attrs.level;return e.forEach((a,l,c)=>{if(!o){if(a===t){n={index:c,offset:l,node:a};return}if(n){if(s(a)){o=!0;return}a.content.size!==0&&(r={index:c,offset:l,node:a})}}}),r?{fragment:e.slice(n.offset+n.node.nodeSize,r.offset+r.node.nodeSize).content,start:n.offset,end:r.offset+r.node.nodeSize}:null}var nr=Object.freeze({__proto__:null,spec:FZ,plugins:BZ,commands:zZ,defaultKeys:N4,toggleHeading:O4,queryIsHeadingActive:d_,queryIsCollapseActive:C1,collapseHeading:I4,uncollapseHeading:R4,insertEmptyParaAbove:M4,insertEmptyParaBelow:D4,toggleHeadingCollapse:L4,uncollapseAllHeadings:UZ,listCollapsedHeading:j4,listCollapsibleHeading:HZ,flattenFragmentJSON:f_});const GZ=JZ,ZZ=YZ,gw="horizontalRule";function JZ(){return{type:"node",name:gw,schema:{group:"block",parseDOM:[{tag:"hr"}],toDOM:()=>["hr"]},markdown:{toMarkdown(t,e){t.write(e.attrs.markup||"---"),t.closeBlock(e)},parseMarkdown:{hr:{node:gw}}}}}function YZ({markdownShortcut:t=!0}={}){return({schema:e})=>{const n=G(e,gw);return[t&&new ys(/^(?:---|___\s|\*\*\*\s)$/,(r,o,s,i)=>{if(!o[0])return null;let a=r.tr.replaceWith(s-1,i,n.createChecked());const l=r.doc.resolve(s);let c=!1;return l.end()!=i?c=!1:l.after()==l.end(-1)?c=!0:c=r.doc.resolve(l.after()).nodeAfter.type===n,c?Yf(en(r).createChecked(),a.mapping.map(l.after()))(a):a})]}}var h_=Object.freeze({__proto__:null,spec:GZ,plugins:ZZ});function F4(t){var e=t.indexOf('"')===-1?'""':t.indexOf("'")===-1?"''":"()";return e[0]+t+e[1]}const XZ=tJ,QZ=nJ,eJ={},oa="image";function tJ(){return{type:"node",name:oa,schema:{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:t=>({src:t.getAttribute("src"),title:t.getAttribute("title"),alt:t.getAttribute("alt")})}],toDOM:t=>["img",t.attrs]},markdown:{toMarkdown(t,e){const n=t.esc(e.attrs.alt||""),r=t.esc(e.attrs.src)+(e.attrs.title?" "+F4(e.attrs.title):"");t.write(`![${n}](${r})`)},parseMarkdown:{image:{node:oa,getAttrs:t=>({src:t.attrGet("src"),title:t.attrGet("title")||null,alt:t.children[0]&&t.children[0].content||null})}}}}}function nJ({handleDragAndDrop:t=!0,acceptFileType:e="image/*",createImageNodes:n=rJ}={}){return({schema:r})=>{const o=G(r,oa);return[new ys(/!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\)/,(s,i,a,l)=>{let[,c,u,d]=i;return u?(d||(d=c),s.tr.replaceWith(a,l,o.create({src:u,alt:c,title:d}))):null}),t&&new xe({key:new Ee(oa+"-drop-paste"),props:{handleDOMEvents:{drop(s,i){const a=i;if(a.dataTransfer==null)return!1;const l=y2(a.dataTransfer,e,!0);if(!l||l.length===0)return!1;a.preventDefault();const c=s.posAtCoords({left:a.clientX,top:a.clientY});return n(l,G(s.state,oa),s).then(u=>{g2(s,c==null?void 0:c.pos,u)}),!0}},handlePaste:(s,i)=>{const a=i;if(!a.clipboardData)return!1;const l=y2(a.clipboardData,e,!0);return!l||l.length===0?!1:(n(l,G(s.state,oa),s).then(c=>{g2(s,s.state.selection.from,c)}),!0)}}})]}}async function rJ(t,e,n){return(await Promise.all(t.map(o=>oJ(o)))).map(o=>e.create({src:o}))}function g2(t,e,n){for(const r of n){const{tr:o}=t.state;let s=Yf(r,e)(o);s!==o&&t.dispatch(s)}}function oJ(t){return new Promise((e,n)=>{const r=new FileReader,o=i=>{const a=btoa(i.target.result);e(`data:${t.type};base64,${a}`)},s=i=>{e(i.target.result)};r.onerror=()=>{n(new Error("Error reading file"+t.name))},"readAsDataURL"in r?(r.onload=s,r.readAsDataURL(t)):(r.onload=o,r.readAsBinaryString(t))})}function y2(t,e,n){const r=sJ(t.items,e,n),o=[];return r.forEach(s=>{const i=s&&s.getAsFile();i!=null&&o.push(i)}),o}function sJ(t,e,n){const r=Array.from(t);let o;if(e==="")return o=r.filter(a=>a.kind==="file"),n?o:[o[0]];const s=e.toLowerCase().split(",").map(a=>a.split("/").map(l=>l.trim())).filter(a=>a.length===2),i=a=>{if(a.kind!=="file")return!1;const[l,c]=a.type.toLowerCase().split("/").map(u=>u.trim());for(const[u,d]of s)if(l===u&&(d==="*"||c===d))return!0;return!1};return o=o=r.filter(i),n===!1&&(o=[o[0]]),o}const iJ=(t={})=>(e,n)=>{if(!(e.selection instanceof ne)||!e.selection.node)return!1;const{node:r}=e.selection;return r.type!==G(e,oa)?!1:(n&&n(e.tr.setNodeMarkup(e.selection.$from.pos,void 0,{...r.attrs,...t})),!0)};var yw=Object.freeze({__proto__:null,spec:XZ,plugins:QZ,commands:eJ,updateImageNodeAttribute:iJ});const aJ=dJ,lJ=fJ,cJ={toggleItalic:z4,queryIsItalicActive:q4},B4={toggleItalic:"Mod-i"},$i="italic",uJ=t=>{const e=t.marks[$i];return Ve(e,`markType ${$i} not found`),e};function dJ(){return{type:"mark",name:$i,schema:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:()=>["em",0]},markdown:{toMarkdown:{open:"_",close:"_",mixable:!0,expelEnclosingWhitespace:!0},parseMarkdown:{em:{mark:$i}}}}}function fJ({keybindings:t=B4}={}){return({schema:e})=>{const n=uJ(e);return[Ma(/_([^_]+)_/g,n),Ma(/\*([^*]+)\*/g,n),Ra(/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,n),Ra(/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,n),t&&st(nn([[t.toggleItalic,gs(n)]]))]}}function z4(){return(t,e,n)=>{const r=t.schema.marks[$i];return Ve(r,`markType ${$i} not found`),gs(r)(t,e)}}function q4(){return t=>{const e=t.schema.marks[$i];return Ve(e,`markType ${$i} not found`),Xf(e)(t)}}var T1=Object.freeze({__proto__:null,spec:aJ,plugins:lJ,commands:cJ,defaultKeys:B4,toggleItalic:z4,queryIsItalicActive:q4});const pJ=gJ,hJ=yJ,mJ={createLink:m_,updateLink:V4,queryLinkAttrs:U4,queryIsLinkAllowedInRange:g_,queryIsLinkActive:H4,queryIsSelectionAroundLink:K4},ng="link",_o=t=>{const e=t.marks[ng];return Ve(e,`markType ${ng} not found`),e};function gJ({openOnClick:t=!1}={}){return{type:"mark",name:ng,schema:{attrs:{href:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:e=>({href:e.getAttribute("href")})}],toDOM:e=>["a",{...e.attrs,rel:"noopener noreferrer nofollow"},0]},markdown:{toMarkdown:{open(e,n,r,o){return b2(n,r,o,1)?"<":"["},close(e,n,r,o){return b2(n,r,o,-1)?">":"]("+e.esc(n.attrs.href)+(n.attrs.title?" "+F4(n.attrs.title):"")+")"}},parseMarkdown:{link:{mark:"link",getAttrs:e=>({href:e.attrGet("href"),title:e.attrGet("title")||null})}}},options:{openOnClick:t}}}function yJ(){return({schema:t,specRegistry:e})=>{const{openOnClick:n}=e.options[ng],r=_o(t);return[bJ(r),vJ(/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-zA-Z]{2,}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/g),wJ(/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-zA-Z]{2,}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/g,r,o=>({href:o})),n&&new xe({props:{handleClick:(o,s,i)=>{const{schema:a}=o.state,l=WK(o.state,_o(a));return l.href&&i.target instanceof HTMLAnchorElement&&(i.stopPropagation(),window.open(l.href)),!1}}})]}}const W4=/(^|\s)(((http|https|ftp):\/\/)?(?:[^\s.:\/]+\.)+(?:aaa|aarp|abarth|abb|abbott|abbvie|abc|able|abogado|abudhabi|ac|academy|accenture|accountant|accountants|aco|actor|ad|adac|ads|adult|ae|aeg|aero|aetna|af|afamilycompany|afl|africa|ag|agakhan|agency|ai|aig|airbus|airforce|airtel|akdn|al|alfaromeo|alibaba|alipay|allfinanz|allstate|ally|alsace|alstom|am|amazon|americanexpress|americanfamily|amex|amfam|amica|amsterdam|analytics|android|anquan|anz|ao|aol|apartments|app|apple|aq|aquarelle|ar|arab|aramco|archi|army|arpa|art|arte|as|asda|asia|associates|at|athleta|attorney|au|auction|audi|audible|audio|auspost|author|auto|autos|avianca|aw|aws|ax|axa|az|azure|ba|baby|baidu|banamex|bananarepublic|band|bank|bar|barcelona|barclaycard|barclays|barefoot|bargains|baseball|basketball|bauhaus|bayern|bb|bbc|bbt|bbva|bcg|bcn|bd|be|beats|beauty|beer|bentley|berlin|best|bestbuy|bet|bf|bg|bh|bharti|bi|bible|bid|bike|bing|bingo|bio|biz|bj|black|blackfriday|blockbuster|blog|bloomberg|blue|bm|bms|bmw|bn|bnpparibas|bo|boats|boehringer|bofa|bom|bond|boo|book|booking|bosch|bostik|boston|bot|boutique|box|br|bradesco|bridgestone|broadway|broker|brother|brussels|bs|bt|budapest|bugatti|build|builders|business|buy|buzz|bv|bw|by|bz|bzh|ca|cab|cafe|cal|call|calvinklein|cam|camera|camp|cancerresearch|canon|capetown|capital|capitalone|car|caravan|cards|care|career|careers|cars|casa|case|cash|casino|cat|catering|catholic|cba|cbn|cbre|cbs|cc|cd|center|ceo|cern|cf|cfa|cfd|cg|ch|chanel|channel|charity|chase|chat|cheap|chintai|christmas|chrome|church|ci|cipriani|circle|cisco|citadel|citi|citic|city|cityeats|ck|cl|claims|cleaning|click|clinic|clinique|clothing|cloud|club|clubmed|cm|cn|co|coach|codes|coffee|college|cologne|com|comcast|commbank|community|company|compare|computer|comsec|condos|construction|consulting|contact|contractors|cooking|cookingchannel|cool|coop|corsica|country|coupon|coupons|courses|cpa|cr|credit|creditcard|creditunion|cricket|crown|crs|cruise|cruises|csc|cu|cuisinella|cv|cw|cx|cy|cymru|cyou|cz|dabur|dad|dance|data|date|dating|datsun|day|dclk|dds|de|deal|dealer|deals|degree|delivery|dell|deloitte|delta|democrat|dental|dentist|desi|design|dev|dhl|diamonds|diet|digital|direct|directory|discount|discover|dish|diy|dj|dk|dm|dnp|do|docs|doctor|dog|domains|dot|download|drive|dtv|dubai|duck|dunlop|dupont|durban|dvag|dvr|dz|earth|eat|ec|eco|edeka|edu|education|ee|eg|email|emerck|energy|engineer|engineering|enterprises|epson|equipment|er|ericsson|erni|es|esq|estate|et|etisalat|eu|eurovision|eus|events|exchange|expert|exposed|express|extraspace|fage|fail|fairwinds|faith|family|fan|fans|farm|farmers|fashion|fast|fedex|feedback|ferrari|ferrero|fi|fiat|fidelity|fido|film|final|finance|financial|fire|firestone|firmdale|fish|fishing|fit|fitness|fj|fk|flickr|flights|flir|florist|flowers|fly|fm|fo|foo|food|foodnetwork|football|ford|forex|forsale|forum|foundation|fox|fr|free|fresenius|frl|frogans|frontdoor|frontier|ftr|fujitsu|fun|fund|furniture|futbol|fyi|ga|gal|gallery|gallo|gallup|game|games|gap|garden|gay|gb|gbiz|gd|gdn|ge|gea|gent|genting|george|gf|gg|ggee|gh|gi|gift|gifts|gives|giving|gl|glade|glass|gle|global|globo|gm|gmail|gmbh|gmo|gmx|gn|godaddy|gold|goldpoint|golf|goo|goodyear|goog|google|gop|got|gov|gp|gq|gr|grainger|graphics|gratis|green|gripe|grocery|group|gs|gt|gu|guardian|gucci|guge|guide|guitars|guru|gw|gy|hair|hamburg|hangout|haus|hbo|hdfc|hdfcbank|health|healthcare|help|helsinki|here|hermes|hgtv|hiphop|hisamitsu|hitachi|hiv|hk|hkt|hm|hn|hockey|holdings|holiday|homedepot|homegoods|homes|homesense|honda|horse|hospital|host|hosting|hot|hoteles|hotels|hotmail|house|how|hr|hsbc|ht|hu|hughes|hyatt|hyundai|ibm|icbc|ice|icu|id|ie|ieee|ifm|ikano|il|im|imamat|imdb|immo|immobilien|in|inc|industries|infiniti|info|ing|ink|institute|insurance|insure|int|international|intuit|investments|io|ipiranga|iq|ir|irish|is|ismaili|ist|istanbul|it|itau|itv|jaguar|java|jcb|je|jeep|jetzt|jewelry|jio|jll|jm|jmp|jnj|jo|jobs|joburg|jot|joy|jp|jpmorgan|jprs|juegos|juniper|kaufen|kddi|ke|kerryhotels|kerrylogistics|kerryproperties|kfh|kg|kh|ki|kia|kim|kinder|kindle|kitchen|kiwi|km|kn|koeln|komatsu|kosher|kp|kpmg|kpn|kr|krd|kred|kuokgroup|kw|ky|kyoto|kz|la|lacaixa|lamborghini|lamer|lancaster|lancia|land|landrover|lanxess|lasalle|lat|latino|latrobe|law|lawyer|lb|lc|lds|lease|leclerc|lefrak|legal|lego|lexus|lgbt|li|lidl|life|lifeinsurance|lifestyle|lighting|like|lilly|limited|limo|lincoln|linde|link|lipsy|live|living|lixil|lk|llc|llp|loan|loans|locker|locus|loft|lol|london|lotte|lotto|love|lpl|lplfinancial|lr|ls|lt|ltd|ltda|lu|lundbeck|luxe|luxury|lv|ly|ma|macys|madrid|maif|maison|makeup|man|management|mango|map|market|marketing|markets|marriott|marshalls|maserati|mattel|mba|mc|mckinsey|md|me|med|media|meet|melbourne|meme|memorial|men|menu|merckmsd|mg|mh|miami|microsoft|mil|mini|mint|mit|mitsubishi|mk|ml|mlb|mls|mm|mma|mn|mo|mobi|mobile|moda|moe|moi|mom|monash|money|monster|mormon|mortgage|moscow|moto|motorcycles|mov|movie|mp|mq|mr|ms|msd|mt|mtn|mtr|mu|museum|mutual|mv|mw|mx|my|mz|na|nab|nagoya|name|natura|navy|nba|nc|ne|nec|net|netbank|netflix|network|neustar|new|news|next|nextdirect|nexus|nf|nfl|ng|ngo|nhk|ni|nico|nike|nikon|ninja|nissan|nissay|nl|no|nokia|northwesternmutual|norton|now|nowruz|nowtv|np|nr|nra|nrw|ntt|nu|nyc|nz|obi|observer|off|office|okinawa|olayan|olayangroup|oldnavy|ollo|om|omega|one|ong|onl|online|ooo|open|oracle|orange|org|organic|origins|osaka|otsuka|ott|ovh|pa|page|panasonic|paris|pars|partners|parts|party|passagens|pay|pccw|pe|pet|pf|pfizer|pg|ph|pharmacy|phd|philips|phone|photo|photography|photos|physio|pics|pictet|pictures|pid|pin|ping|pink|pioneer|pizza|pk|pl|place|play|playstation|plumbing|plus|pm|pn|pnc|pohl|poker|politie|porn|post|pr|pramerica|praxi|press|prime|pro|prod|productions|prof|progressive|promo|properties|property|protection|pru|prudential|ps|pt|pub|pw|pwc|py|qa|qpon|quebec|quest|qvc|racing|radio|raid|re|read|realestate|realtor|realty|recipes|red|redstone|redumbrella|rehab|reise|reisen|reit|reliance|ren|rent|rentals|repair|report|republican|rest|restaurant|review|reviews|rexroth|rich|richardli|ricoh|ril|rio|rip|rmit|ro|rocher|rocks|rodeo|rogers|room|rs|rsvp|ru|rugby|ruhr|run|rw|rwe|ryukyu|sa|saarland|safe|safety|sakura|sale|salon|samsclub|samsung|sandvik|sandvikcoromant|sanofi|sap|sarl|sas|save|saxo|sb|sbi|sbs|sc|sca|scb|schaeffler|schmidt|scholarships|school|schule|schwarz|science|scjohnson|scot|sd|se|search|seat|secure|security|seek|select|sener|services|ses|seven|sew|sex|sexy|sfr|sg|sh|shangrila|sharp|shaw|shell|shia|shiksha|shoes|shop|shopping|shouji|show|showtime|si|silk|sina|singles|site|sj|sk|ski|skin|sky|skype|sl|sling|sm|smart|smile|sn|sncf|so|soccer|social|softbank|software|sohu|solar|solutions|song|sony|soy|spa|space|sport|spot|sr|srl|ss|st|stada|staples|star|statebank|statefarm|stc|stcgroup|stockholm|storage|store|stream|studio|study|style|su|sucks|supplies|supply|support|surf|surgery|suzuki|sv|swatch|swiftcover|swiss|sx|sy|sydney|systems|sz|tab|taipei|talk|taobao|target|tatamotors|tatar|tattoo|tax|taxi|tc|tci|td|tdk|team|tech|technology|tel|temasek|tennis|teva|tf|tg|th|thd|theater|theatre|tiaa|tickets|tienda|tiffany|tips|tires|tirol|tj|tjmaxx|tjx|tk|tkmaxx|tl|tm|tmall|tn|to|today|tokyo|tools|top|toray|toshiba|total|tours|town|toyota|toys|tr|trade|trading|training|travel|travelchannel|travelers|travelersinsurance|trust|trv|tt|tube|tui|tunes|tushu|tv|tvs|tw|tz|ua|ubank|ubs|ug|uk|unicom|university|uno|uol|ups|us|uy|uz|va|vacations|vana|vanguard|vc|ve|vegas|ventures|verisign|versicherung|vet|vg|vi|viajes|video|vig|viking|villas|vin|vip|virgin|visa|vision|viva|vivo|vlaanderen|vn|vodka|volkswagen|volvo|vote|voting|voto|voyage|vu|vuelos|wales|walmart|walter|wang|wanggou|watch|watches|weather|weatherchannel|webcam|weber|website|wed|wedding|weibo|weir|wf|whoswho|wien|wiki|williamhill|win|windows|wine|winners|wme|wolterskluwer|woodside|work|works|world|wow|ws|wtc|wtf|xbox|xerox|xfinity|xihuan|xin|xn--11b4c3d|xn--1ck2e1b|xn--1qqw23a|xn--2scrj9c|xn--30rr7y|xn--3bst00m|xn--3ds443g|xn--3e0b707e|xn--3hcrj9c|xn--3oq18vl8pn36a|xn--3pxu8k|xn--42c2d9a|xn--45br5cyl|xn--45brj9c|xn--45q11c|xn--4dbrk0ce|xn--4gbrim|xn--54b7fta0cc|xn--55qw42g|xn--55qx5d|xn--5su34j936bgsg|xn--5tzm5g|xn--6frz82g|xn--6qq986b3xl|xn--80adxhks|xn--80ao21a|xn--80aqecdr1a|xn--80asehdb|xn--80aswg|xn--8y0a063a|xn--90a3ac|xn--90ae|xn--90ais|xn--9dbq2a|xn--9et52u|xn--9krt00a|xn--b4w605ferd|xn--bck1b9a5dre4c|xn--c1avg|xn--c2br7g|xn--cck2b3b|xn--cckwcxetd|xn--cg4bki|xn--clchc0ea0b2g2a9gcd|xn--czr694b|xn--czrs0t|xn--czru2d|xn--d1acj3b|xn--d1alf|xn--e1a4c|xn--eckvdtc9d|xn--efvy88h|xn--fct429k|xn--fhbei|xn--fiq228c5hs|xn--fiq64b|xn--fiqs8s|xn--fiqz9s|xn--fjq720a|xn--flw351e|xn--fpcrj9c3d|xn--fzc2c9e2c|xn--fzys8d69uvgm|xn--g2xx48c|xn--gckr3f0f|xn--gecrj9c|xn--gk3at1e|xn--h2breg3eve|xn--h2brj9c|xn--h2brj9c8c|xn--hxt814e|xn--i1b6b1a6a2e|xn--imr513n|xn--io0a7i|xn--j1aef|xn--j1amh|xn--j6w193g|xn--jlq480n2rg|xn--jlq61u9w7b|xn--jvr189m|xn--kcrx77d1x4a|xn--kprw13d|xn--kpry57d|xn--kput3i|xn--l1acc|xn--lgbbat1ad8j|xn--mgb9awbf|xn--mgba3a3ejt|xn--mgba3a4f16a|xn--mgba7c0bbn0a|xn--mgbaakc7dvf|xn--mgbaam7a8h|xn--mgbab2bd|xn--mgbah1a3hjkrd|xn--mgbai9azgqp6j|xn--mgbayh7gpa|xn--mgbbh1a|xn--mgbbh1a71e|xn--mgbc0a9azcg|xn--mgbca7dzdo|xn--mgbcpq6gpa1a|xn--mgberp4a5d4ar|xn--mgbgu82a|xn--mgbi4ecexp|xn--mgbpl2fh|xn--mgbt3dhd|xn--mgbtx2b|xn--mgbx4cd0ab|xn--mix891f|xn--mk1bu44c|xn--mxtq1m|xn--ngbc5azd|xn--ngbe9e0a|xn--ngbrx|xn--node|xn--nqv7f|xn--nqv7fs00ema|xn--nyqy26a|xn--o3cw4h|xn--ogbpf8fl|xn--otu796d|xn--p1acf|xn--p1ai|xn--pgbs0dh|xn--pssy2u|xn--q7ce6a|xn--q9jyb4c|xn--qcka1pmc|xn--qxa6a|xn--qxam|xn--rhqv96g|xn--rovu88b|xn--rvc1e0am3e|xn--s9brj9c|xn--ses554g|xn--t60b56a|xn--tckwe|xn--tiq49xqyj|xn--unup4y|xn--vermgensberater-ctb|xn--vermgensberatung-pwb|xn--vhquv|xn--vuq861b|xn--w4r85el8fhu5dnra|xn--w4rs40l|xn--wgbh1c|xn--wgbl6a|xn--xhq521b|xn--xkc2al3hye2a|xn--xkc2dl3a5ee0h|xn--y9a3aq|xn--yfro4i67o|xn--ygbi2ammx|xn--zfr164b|xxx|xyz|yachts|yahoo|yamaxun|yandex|ye|yodobashi|yoga|yokohama|you|youtube|yt|yun|za|zappos|zara|zero|zip|zm|zone|zuerich|zw))\s$/;function bJ(t){return new ys(W4,(e,n,r,o)=>{if(!n[0])return null;const[s,i,a,l]=n;if(!i){let d=!1;if(e.doc.nodesBetween(r,o,f=>d?!1:t.isInSet(f.marks)?(d=!0,!1):!0),d)return null}const c=l?a:`http://${a}`,u=e.tr;return u.addMark(i&&i.length>0?r+1:r,o,t.create({href:c})),u.insertText(" ",o),u})}function vJ(t){return new xe({props:{handlePaste:function(n,r){const o=r;if(!o.clipboardData)return!1;let s=o.clipboardData.getData("text/plain");const i=o.clipboardData.getData("text/html");if(!(s&&!i)||n.state.selection.empty)return!1;const{state:l,dispatch:c}=n,u=v1(t,s);return u.length===1&&u.every(f=>f.match)?m_(s)(l,c):!1}}})}function wJ(t,e,n){return new xe({props:{transformPasted:function(o){return XK(o,s=>{if(!s.isText)return s;const i=s.text;return v1(t,i).map(({start:l,end:c,match:u,subString:d})=>{let f=s.cut(l,c);if(u){var p=n instanceof Function?n(d):n;f=f.mark(e.create(p).addToSet(s.marks))}return f})})}}})}function b2(t,e,n,r){if(t.attrs.title||!/^\w+:/.test(t.attrs.href))return!1;let o=e.child(n+(r<0?-1:0));if(!o.isText||o.text!==t.attrs.href||o.marks[o.marks.length-1]!==t)return!1;if(n===(r<0?1:e.childCount-1))return!0;let s=e.child(n+(r<0?-2:1));return!t.isInSet(s.marks)}function xJ(t){return e=>{const n=e.doc.nodeAt(t);return!!n&&n.isText}}function v2(t,e,n){return n=n&&n.trim(),_e(r=>xJ(t)(r),(r,o)=>{const s=_o(r.schema);let i=r.tr.removeMark(t,e,s);if(n){const a=_o(r.schema).create({href:n});i.addMark(t,e,a)}return o&&o(i),!0})}function m_(t){return _e(e=>g_(e.selection.$from.pos,e.selection.$to.pos)(e),(e,n)=>{const[r,o]=[e.selection.$from.pos,e.selection.$to.pos],s=_o(e.schema);let i=e.tr.removeMark(r,o,s);if(t.trim()){const a=_o(e.schema).create({href:t});i.addMark(r,o,a)}return n&&n(i),!0})}function V4(t){return(e,n)=>{if(!e.selection.empty)return v2(e.selection.$from.pos,e.selection.$to.pos,t)(e,n);const{$from:r}=e.selection,o=r.pos-r.textOffset,s=e.doc.nodeAt(o);let i=o;return s&&(i+=s.nodeSize),v2(o,i,t)(e,n)}}function U4(){return t=>{const{$from:e}=t.selection,n=e.pos-e.textOffset,r=t.doc.resolve(n),o=t.doc.nodeAt(n),{nodeAfter:s}=r;if(!s)return;const a=_o(t.schema).isInSet(s.marks||[]);if(a)return{href:a.attrs.href,text:o.textContent}}}function g_(t,e){return n=>{const r=n.doc.resolve(t),o=n.doc.resolve(e),s=_o(n.schema);if(r.parent===o.parent&&r.parent.isTextblock)return r.parent.type.allowsMarkType(s)}}function H4(){return t=>!!_o(t.schema).isInSet(t.selection.$from.marks())}function K4(){return t=>{const{$from:e,$to:n}=t.selection,r=e.nodeAfter;return!!r&&e.textOffset===0&&n.pos-e.pos===r.nodeSize&&!!_o(t.schema).isInSet(r.marks)}}var $o=Object.freeze({__proto__:null,spec:pJ,plugins:hJ,commands:mJ,URL_REGEX:W4,createLink:m_,updateLink:V4,queryLinkAttrs:U4,queryIsLinkAllowedInRange:g_,queryIsLinkActive:H4,queryIsSelectionAroundLink:K4});let kJ=()=>{};function _J(t){const e=(s,i)=>i===void 0?!1:s.doc.resolve(i).parent.type.name==="bulletList",n=s=>{s.containerDOM.hasAttribute("data-bangle-is-todo")&&(s.containerDOM.removeAttribute("data-bangle-is-todo"),s.containerDOM.removeChild(s.containerDOM.firstChild))},r=(s,i,a)=>{if(a.containerDOM.hasAttribute("data-bangle-is-todo"))return;const l=o(s.todoChecked,c=>{i({todoChecked:c})});a.containerDOM.setAttribute("data-bangle-is-todo",""),a.containerDOM.prepend(l)},o=(s,i)=>{const a=MK(["span",{contentEditable:!1},["input",{type:"checkbox"}]]),l=a.querySelector("input");return s&&l.setAttribute("checked",""),l.addEventListener("input",c=>{kJ("change event",l.checked),i(l.checked)}),a};return Hc.createPlugin({name:t,containerDOM:["li",{"data-bangle-name":t}],contentDOM:["span",{}],renderHandlers:{create:(s,{attrs:i,updateAttrs:a,getPos:l,view:c})=>{i.todoChecked!=null&&e(c.state,l())&&r(i,a,s),s.containerDOM.appendChild(s.contentDOM)},update:(s,{attrs:i,view:a,getPos:l,updateAttrs:c})=>{const{todoChecked:u}=i;if(u==null){n(s);return}if(!e(a.state,l()))return;r(i,c,s);const d=s.containerDOM.firstChild.firstChild;d.checked=u},destroy:()=>{}}})}const $J=CJ,EJ=TJ,SJ={indentListItem:y_,outdentListItem:b_,moveListItemUp:v_,moveListItemDown:w_},G4={toggleDone:Ot.mac?"Ctrl-Enter":"Ctrl-I",indent:"Tab",outdent:"Shift-Tab",moveDown:"Alt-ArrowDown",moveUp:"Alt-ArrowUp",emptyCopy:"Mod-c",emptyCut:"Mod-x",insertEmptyListAbove:"Mod-Shift-Enter",insertEmptyListBelow:"Mod-Enter"},yo="listItem",zh=t=>{const e=G(t,yo);return bs(e,[G(t,"bulletList"),G(t,"orderedList")])};function CJ(){const{toDOM:t,parseDOM:e}=RK(yo,{tag:"li",content:0});return{type:"node",name:yo,schema:{content:"(paragraph) (paragraph | bulletList | orderedList)*",defining:!0,draggable:!0,attrs:{todoChecked:{default:null}},toDOM:t,parseDOM:e},markdown:{toMarkdown(n,r){r.attrs.todoChecked!=null&&n.write(r.attrs.todoChecked?"[x] ":"[ ] "),n.renderContent(r)},parseMarkdown:{list_item:{block:yo,getAttrs:n=>{let r=null;const o=n.attrGet("isDone");return o==="yes"?r=!0:o==="no"&&(r=!1),{todoChecked:r}}}}}}}function TJ({keybindings:t=G4,nodeView:e=!0}={}){return({schema:n})=>{const r=G(n,yo);return[t&&st({[t.toggleDone]:_e(zh,mZ(G(n,"listItem"),o=>({...o,todoChecked:o.todoChecked==null?!1:!o.todoChecked}))),Backspace:cZ(r),Enter:uZ(r),...nn([[t.indent,y_()],[t.outdent,b_()],[t.moveUp,v_()],[t.moveDown,w_()],[t.emptyCut,_e(zh,x1(r))],[t.emptyCopy,_e(zh,w1(r))],[t.insertEmptyListAbove,J4()],[t.insertEmptyListBelow,Y4()]])}),e&&_J(yo)]}}function y_(){return(t,e)=>{const n=G(t,yo);return aZ(n)(t,e)}}function b_(){return(t,e,n)=>{const r=G(t,yo);return bf(r)(t,e,n)}}const AJ=t=>zn(t.selection.$from.node(-1),t.schema);function Z4(t){return(e,n,r)=>{const o=G(e,yo),s=bs(o,[G(e,"bulletList"),G(e,"orderedList")]);return _e(s,(a=>Vn(is(o,a),(l,c,u)=>{const d=l.selection.$from.node(-3),f=zn(d,l.schema);if(!hZ(o,a)(l,c,u))return!1;if(f&&c){const h=u.state;let{tr:y,schema:g}=h;y=np(y,g,h.selection.$from.node(-1),h.selection.$from.before(-1)),c(y)}return!0}))(t))(e,n,r)}}function v_(){return Z4("UP")}function w_(){return Z4("DOWN")}function x_(t=!0){return(e,n,r)=>{const o=G(e,yo);return Vn(_e(AJ,hr(o,t?"above":"below",!0,{todoChecked:!1})),_e(zh,hr(o,t?"above":"below",!0)))(e,n,r)}}function J4(){return x_(!0)}function Y4(){return x_(!1)}var rp=Object.freeze({__proto__:null,spec:$J,plugins:EJ,commands:SJ,defaultKeys:G4,indentListItem:y_,outdentListItem:b_,moveListItemUp:v_,moveListItemDown:w_,insertEmptySiblingList:x_,insertEmptySiblingListAbove:J4,insertEmptySiblingListBelow:Y4});const NJ=IJ,PJ=RJ,OJ={toggleOrderedList:Q4,queryIsOrderedListActive:eM},X4={toggle:"Shift-Ctrl-9"},vf="orderedList";function IJ(){return{type:"node",name:vf,schema:{attrs:{order:{default:1},tight:{default:!1}},content:"listItem+",group:"block",parseDOM:[{tag:"ol",getAttrs:t=>({order:t.hasAttribute("start")?+t.getAttribute("start"):1})}],toDOM:t=>t.attrs.order===1?["ol",0]:["ol",{start:t.attrs.order},0]},markdown:{toMarkdown(t,e){let n=e.attrs.order||1,r=String(n+e.childCount-1).length,o=t.repeat(" ",r+2);t.renderList(e,o,s=>{let i=String(n+s);return t.repeat(" ",r-i.length)+i+". "})},parseMarkdown:{ordered_list:{block:vf,getAttrs:(t,e,n)=>{var r;return{tight:v4(e,n),order:+((r=t.attrGet("start"))!==null&&r!==void 0?r:1)}}}}}}}function RJ({keybindings:t=X4}={}){return({schema:e})=>{const n=G(e,vf);return[jk(/^(1)[.)]\s$/,n,r=>({order:+r[1]}),(r,o)=>o.childCount+o.attrs.order===+r[1]),t&&st(nn([[t.toggle,E1(n)]]))]}}function Q4(){return(t,e,n)=>E1(G(t,vf),G(t,"listItem"))(t,e,n)}function eM(){return t=>bs(G(t,"listItem"),[G(t,vf)])(t)}var Gc=Object.freeze({__proto__:null,spec:NJ,plugins:PJ,commands:OJ,defaultKeys:X4,toggleOrderedList:Q4,queryIsOrderedListActive:eM});const MJ=FJ,DJ=BJ,LJ={toggleStrike:nM,queryIsStrikeActive:rM},tM={toggleStrike:"Mod-d"},Da="strike",jJ=t=>{const e=t.marks[Da];return Ve(e,`markType ${Da} not found`),e};function FJ(){return{type:"mark",name:Da,schema:{parseDOM:[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",getAttrs:t=>t==="line-through"&&null}],toDOM:()=>["s",0]},markdown:{toMarkdown:{open:"~~",close:"~~",mixable:!0,expelEnclosingWhitespace:!0},parseMarkdown:{s:{mark:"strike"}}}}}function BJ({keybindings:t=tM}={}){return({schema:e})=>{const n=jJ(e);return[Ma(/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,n),Ra(/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,n),t&&st(nn([[t.toggleStrike,gs(n)]]))]}}function nM(){return(t,e,n)=>{const r=t.schema.marks[Da];return Ve(r,`markType ${Da} not found`),gs(r)(t,e)}}function rM(){return t=>{const e=t.schema.marks[Da];return Ve(e,`markType ${Da} not found`),Xf(e)(t)}}var k_=Object.freeze({__proto__:null,spec:MJ,plugins:DJ,commands:LJ,defaultKeys:tM,toggleStrike:nM,queryIsStrikeActive:rM});const zJ=UJ,qJ=HJ,WJ={toggleUnderline:sM,queryIsUnderlineActive:iM},oM={toggleUnderline:"Mod-u"},Ei="underline",VJ=t=>{const e=t.marks[Ei];return Ve(e,`markType ${Ei} not found`),e};function UJ(){return{type:"mark",name:Ei,schema:{parseDOM:[{tag:"u"},{style:"text-decoration",getAttrs:t=>t===Ei&&null}],toDOM:()=>["u",0]},markdown:{toMarkdown:{open:"_",close:"_",mixable:!0,expelEnclosingWhitespace:!0}}}}function HJ({keybindings:t=oM}={}){return({schema:e})=>{const n=VJ(e);return[Ra(/~([^~]+)~$/,n),Ma(/~([^~]+)~/g,n),t?st(nn([[t.toggleUnderline,gs(n)]])):void 0]}}function sM(){return(t,e,n)=>{const r=t.schema.marks[Ei];return Ve(r,`markType ${Ei} not found`),gs(r)(t,e)}}function iM(){return t=>{const e=t.schema.marks[Ei];return Ve(e,`markType ${Ei} not found`),Xf(e)(t)}}var __=Object.freeze({__proto__:null,spec:zJ,plugins:qJ,commands:WJ,defaultKeys:oM,toggleUnderline:sM,queryIsUnderlineActive:iM});function KJ(t){const e=new Map;let n=0;return t.forEach(r=>{r.forEach((o,s,i)=>{if(i>n&&(n=i),!o)return;const a=o.textContent.length+2;e.has(i)||e.set(i,a),a>e.get(i)&&e.set(i,a)})}),Array.from({length:n+1},(r,o)=>e.get(o)||1)}const A1=ZH({tableGroup:"block",cellContent:"block+",cellAttributes:{align:{default:null,setDOMAttr(t,e){t!=null&&(e.style=(e.style||"")+`text-align: ${t};`)}},background:{default:null,getFromDOM(t){return t.style.backgroundColor||null},setDOMAttr(t,e){t&&(e.style=(e.style||"")+`background-color: ${t};`)}}}}),aM="table_header",lM=(t,e)=>{e.forEach(function(n,r,o){const s=t.esc;t.esc=(i,...a)=>(i=s.call(t,i,...a),i=i.replace(/\|/gi,"\\$&"),i),t.renderInline(n),t.esc=s})},GJ={name:"table",type:"node",schema:A1.table,markdown:{toMarkdown:(t,e)=>{t.flushClose(1),t.ensureNewLine(),t.write(`
`),t.renderContent(e)},parseMarkdown:{table:{block:"table"}}}},ZJ={name:"table_cell",type:"node",schema:A1.table_cell,markdown:{toMarkdown:lM,parseMarkdown:{td:{block:"table_cell",getAttrs:t=>({align:t.align})}}}},JJ={name:aM,type:"node",schema:A1.table_header,markdown:{toMarkdown:lM,parseMarkdown:{th:{block:"table_header",getAttrs:t=>({align:t.align})}}}},YJ={name:"table_row",type:"node",schema:A1.table_row,markdown:{toMarkdown:(t,e,n)=>{var r;t.ensureNewLine();const o=KJ(n);e.forEach(function(s,i,a){a===0&&t.write("| "),t.render(s,e,a);const l=o[a]-2-s.textContent.length;t.write(" ".repeat(Math.max(0,l))),t.write(" |"),s!==e.lastChild&&t.write(" ")}),t.ensureNewLine(),((r=e.firstChild)===null||r===void 0?void 0:r.type.name)===aM&&e.forEach(function(s,i,a){a===0&&t.write("|");const{align:l}=s.attrs;switch(l){case"left":{t.write(":");const c=o[a]-1;t.write("-".repeat(Math.max(0,c)));break}case"center":{t.write(":");const c=o[a]-2;t.write("-".repeat(Math.max(0,c))),t.write(":");break}case"right":{const c=o[a]-1;t.write("-".repeat(Math.max(0,c))),t.write(":");break}default:{const c=o[a];t.write("-".repeat(Math.max(0,c)));break}}t.write("|")})},parseMarkdown:{tr:{block:"table_row"}}}},XJ=()=>[mK(),st({Tab:a2(1),"Shift-Tab":a2(-1)})],QJ=(()=>{const t=nr.spec();return t&&{...t,schema:{...t.schema||{},draggable:!0}}})(),eY=[Y3.spec({content:"frontMatter? block+"}),c4.spec(),Qf.spec(),_1.spec(),Kc.spec(),c_.spec(),u_.spec(),QJ,h_.spec(),rp.spec(),Gc.spec(),GJ,ZJ,JJ,YJ,$1.spec(),S1.spec(),T1.spec(),k_.spec(),$o.spec(),__.spec(),OG.spec()];var jr;(function(t){t.PING="PING",t.PONG="PONG",t.BROADCAST="BROADCAST"})(jr||(jr={}));class op{constructor(e={}){this._opts=e,this._destroyed=!1,this._listeners=new Map,this._seenMessages=new WeakSet}destroy(e){e==null?this._listeners.clear():this._listeners.delete(e),this._destroyed=!0}receiveMessages(e,n){if(this._destroyed)return()=>{};let r=this._listeners.get(e);return r||(r=new Set,this._listeners.set(e,r)),r.add(n),()=>{const o=this._listeners.get(e);o==null||o.delete(n),(o==null?void 0:o.size)===0&&this._listeners.delete(e)}}transmit(e){var n,r;if(this._seenMessages.has(e)||((r=(n=this._opts).debugFilterMessage)===null||r===void 0?void 0:r.call(n,e))===!1)return;if(this._seenMessages.add(e),e.type===jr.BROADCAST&&e.to!=null)throw new Error("Broadcast message must not have a `to` field");if(typeof e.to!="string"&&(e.type===jr.PING||e.type===jr.PONG))throw new Error("PING/PONG message must have a `to` field");const o=()=>{var s;let i=e.to?this._listeners.get(e.to)||new Set:new Set([...this._listeners.values()].flatMap(l=>[...l])),a=this._listeners.get(op.WILD_CARD)||new Set;(s=new Set([...a,...i]))===null||s===void 0||s.forEach(l=>{l(e)})};this._opts.debugSlowdown==null?o():setTimeout(o,this._opts.debugSlowdown)}}op.WILD_CARD=Symbol("WILD_CARD");const tY="@bangle.dev/collab-manager/MANAGER";var rg;(function(t){t.Timeout="NetworkingError.Timeout"})(rg||(rg={}));var og;(function(t){t.NewVersion="CollabManagerBroadCastType.NewVersion",t.ResetClient="CollabManagerBroadCastType.ResetClient"})(og||(og={}));var Yn;(function(t){t.ApplyFailed="CollabFail.ApplyFailed",t.DocumentNotFound="CollabFail.DocumentNotFound",t.HistoryNotAvailable="CollabFail.HistoryNotAvailable",t.IncorrectManager="CollabFail.IncorrectManager",t.InvalidVersion="CollabFail.InvalidVersion",t.ManagerDestroyed="CollabFail.ManagerDestroyed",t.OutdatedVersion="CollabFail.OutdatedVersion",t.ManagerUnresponsive="CollabFail.ManagerUnresponsive"})(Yn||(Yn={}));var Ar;(function(t){t.GetDocument="CollabClientRequestType.GetDocument",t.PullEvents="CollabClientRequestType.PullEvents",t.PushEvents="CollabClientRequestType.PushEvents"})(Ar||(Ar={}));const nY=1e3;function rY(t,{emitter:e,to:n,from:r,requestTimeout:o=nY}){return new Promise((s,i)=>{const a=cM(),l=e.receiveMessages(r,u=>{if(!(u.type!==jr.PONG||u.id!==a))return clearTimeout(c),l(),s(u.messageBody)}),c=setTimeout(()=>{l(),i(new Error(rg.Timeout))},o);e.transmit({to:n,from:r,id:a,messageBody:t,type:jr.PING})})}function cM(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)+"-"+Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)+"-"+Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)}class oY{constructor(e){var n;this._opts=e,this.getDocument=o=>{let s={type:Ar.GetDocument,body:o};return this._wrapRequest(Ar.GetDocument,s)},this.pullEvents=o=>{const s={type:Ar.PullEvents,body:o};return this._wrapRequest(Ar.PullEvents,s)},this.pushEvents=o=>{const s={type:Ar.PushEvents,body:o};return this._wrapRequest(Ar.PushEvents,s)},this.managerId=this._opts.managerId;const r=(n=this._opts.messageBus)===null||n===void 0?void 0:n.receiveMessages(this._opts.clientId,o=>{if(o.type!==jr.BROADCAST&&o.from!==this.managerId)return;const s=o.messageBody,{type:i}=s;if(s.body.docName===this._opts.docName)switch(i){case og.NewVersion:{this._opts.onNewVersion(s.body);return}case og.ResetClient:{this._opts.onResetClient(s.body);return}default:throw new Error(`Unknown message type: ${i}`)}});this._opts.signal.addEventListener("abort",()=>{r()},{once:!0})}async _wrapRequest(e,n){try{return await rY(n,{from:this._opts.clientId,to:this.managerId,emitter:this._opts.messageBus,requestTimeout:this._opts.requestTimeout})}catch(r){if(r instanceof Error)switch(r.message){case rg.Timeout:return{body:Yn.ManagerUnresponsive,type:e,ok:!1};default:throw r}throw r}}}class cRt{constructor(e,n,r,o){this.managerId=e,this._collabMessageBus=n;const s=this._collabMessageBus.receiveMessages(e,async i=>{if(i.type!==jr.PING)return;const{id:a,messageBody:l}=i;let c=l||{};switch(c.type){case Ar.GetDocument:case Ar.PullEvents:case Ar.PushEvents:{let u=await r(c,a);this._collabMessageBus.transmit({from:e,to:i.from,type:jr.PONG,id:a,messageBody:u});break}}});o.addEventListener("abort",()=>{s()},{once:!0})}broadcast(e){this._collabMessageBus.transmit({from:this.managerId,to:void 0,type:jr.BROADCAST,id:cM(),messageBody:e})}}const w2=new WeakSet;function sY(t,e,n){const r=e.receiveMessages(op.WILD_CARD,o=>{w2.has(o)||t.postMessage(o)});return n.addEventListener("abort",()=>{t.close(),r(),e.destroy()},{once:!0}),t.onmessage=({data:o})=>{w2.add(o),e.transmit(o)},e}var Ko=(t=>(t.FileRenameNotAllowed="WorkspaceInfoError.RenameNotAllowed",t.WorkspaceCreateNotAllowed="WorkspaceInfoError.WorkspaceCreateNotAllowed",t.WorkspaceDeleteNotAllowed="WorkspaceInfoError.WorkspaceDeleteNotAllowed",t.WorkspaceNotFound="WorkspaceInfoError.WorkspaceNotFound",t))(Ko||{});class ge extends Error{constructor({message:n,code:r,thrower:o}){super(n);M(this,"code");M(this,"thrower");if(Error.captureStackTrace)Error.captureStackTrace(this,ge);else{const i=new Error().stack;i&&(this.stack=i)}const s=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,s):this.__proto__=s,this.name=this.constructor.name,r&&(this.code=r),this.thrower=o}static fromJsonValue(n){const r=new ge({message:n.message,code:n.code||void 0,thrower:n.thrower||void 0});return r.name=n.name,n.stack&&(r.stack=n.stack),r}toJsonValue(){let n=this.message;return{name:this.name,message:n,thrower:this.thrower,code:this.code||null,stack:this.stack}}}class bw{constructor({mtimeMs:e=new Date().getTime()}={}){M(this,"mtimeMs");this.mtimeMs=e}}class uM{constructor(e){this.opts=e}async copy(){}async mkdirp(e){}async move(e,n){}async rmdir(){}_verifyFilePath(e){if(e.startsWith("/"))throw Error("BabyFs: filePath must not start with /")}_verifyFileType(e){if(!(e instanceof File))throw Error("BabyFs: Provided data is not of File type")}}class qr extends ge{}const dM="BABY_FS_FILE_ALREADY_EXISTS_ERROR",as="BABY_FS_FILE_NOT_FOUND_ERROR",fM="BABY_FS_UPSTREAM_ERROR",sp="BABY_FS_NATIVE_BROWSER_PERMISSION_ERROR",N1="BABY_FS_NATIVE_BROWSER_USER_ABORTED_ERROR",iY=(t,e)=>e.some(n=>t instanceof n);let x2,k2;function aY(){return x2||(x2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lY(){return k2||(k2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const pM=new WeakMap,vw=new WeakMap,hM=new WeakMap,Lb=new WeakMap,$_=new WeakMap;function cY(t){const e=new Promise((n,r)=>{const o=()=>{t.removeEventListener("success",s),t.removeEventListener("error",i)},s=()=>{n(li(t.result)),o()},i=()=>{r(t.error),o()};t.addEventListener("success",s),t.addEventListener("error",i)});return e.then(n=>{n instanceof IDBCursor&&pM.set(n,t)}).catch(()=>{}),$_.set(e,t),e}function uY(t){if(vw.has(t))return;const e=new Promise((n,r)=>{const o=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",i),t.removeEventListener("abort",i)},s=()=>{n(),o()},i=()=>{r(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",s),t.addEventListener("error",i),t.addEventListener("abort",i)});vw.set(t,e)}let ww={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return vw.get(t);if(e==="objectStoreNames")return t.objectStoreNames||hM.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return li(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function dY(t){ww=t(ww)}function fY(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(jb(this),e,...n);return hM.set(r,e.sort?e.sort():[e]),li(r)}:lY().includes(t)?function(...e){return t.apply(jb(this),e),li(pM.get(this))}:function(...e){return li(t.apply(jb(this),e))}}function pY(t){return typeof t=="function"?fY(t):(t instanceof IDBTransaction&&uY(t),iY(t,aY())?new Proxy(t,ww):t)}function li(t){if(t instanceof IDBRequest)return cY(t);if(Lb.has(t))return Lb.get(t);const e=pY(t);return e!==t&&(Lb.set(t,e),$_.set(e,t)),e}const jb=t=>$_.get(t);function ip(t,e,{blocked:n,upgrade:r,blocking:o,terminated:s}={}){const i=indexedDB.open(t,e),a=li(i);return r&&i.addEventListener("upgradeneeded",l=>{r(li(i.result),l.oldVersion,l.newVersion,li(i.transaction),l)}),n&&i.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),o&&l.addEventListener("versionchange",c=>o(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const hY=["get","getKey","getAll","getAllKeys","count"],mY=["put","add","delete","clear"],Fb=new Map;function _2(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Fb.get(e))return Fb.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=mY.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||hY.includes(n)))return;const s=async function(i,...a){const l=this.transaction(i,o?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),o&&l.done]))[0]};return Fb.set(e,s),s}dY(t=>({...t,get:(e,n,r)=>_2(e,n)||t.get(e,n,r),has:(e,n)=>!!_2(e,n)||t.has(e,n)}));async function gY(t,e){typeof e=="string"&&(e=e.split("/"));const n=async(r,o)=>{const[s,...i]=r;if(!s)throw new Error("parentName cannot be empty");if(r.length===1)return o.getFileHandle(s,{create:!0});const a=await o.getDirectoryHandle(s,{create:!0});return n(i,a)};if(e[0]!==t.name)throw new Error(`getFile Error: root parent ${e[0]} must be the rootDirHandle ${t.name}`);return n(e.slice(1),t)}function E_(t){return t.text?t.text():yY(t)}function yY(t){return new Promise(e=>{const n=new FileReader;n.addEventListener("loadend",r=>{var s;const o=(s=r.srcElement)==null?void 0:s.result;e(o)}),n.readAsText(t)})}async function bY(t){const e={};return e.writable=!0,e.mode="readwrite",t.queryPermission?await t.queryPermission(e)==="granted":(console.debug("queryPermission not available, assuming permission"),!0)}async function mM(t,{allowedFile:e=r=>!0,allowedDir:n=r=>!0}={}){return(async o=>{let s=[];for await(const i of o.values())if(i.kind==="file"&&e(i)&&s.push([o,i]),i.kind==="directory"&&n(i)){let a=await mM(i,{allowedDir:n,allowedFile:e});a=a.map(l=>[o,...l]),s=s.concat(a)}return s.filter(i=>i.length>0)})(t)}function sa(t,e){return t.catch(n=>Promise.reject(new sg({message:e,code:fM})))}const vY="baby-idb-meta-3",nh="baby-idb-meta-store3";class wY{constructor(){M(this,"_db",()=>ip(vY,1,{upgrade(e,n){switch(n){case 0:e.createObjectStore(nh)}}}))}async del(e){await sa(this._db().then(n=>n.delete(nh,e)),"Error deleting metadata")}async get(e,n){const r=await sa(this._db().then(o=>o.get(nh,e)),"Error reading metadata");return r==null?(await this.set(e,n),n):r}async set(e,n){await sa(this._db().then(r=>r.put(nh,n,e)),"Error writing metadata")}async update(e,n,r){const o=await this.get(e,n),s=r(o);await this.set(e,s)}}const xY="baby-idb-db-3",ll="baby-idb-db-store-3";class kY extends uM{constructor(n={}){super({allowedFile:n.allowedFile,allowedDir:()=>!0});M(this,"_allowedFile",n=>!0);M(this,"_db",()=>ip(xY,1,{upgrade(n,r){n.objectStoreNames.contains(ll)||n.createObjectStore(ll)}}));M(this,"_fileMetadata");n.allowedFile&&(this._allowedFile=n.allowedFile),this._fileMetadata=new wY}async opendirRecursive(n){if(!n)throw new Error("dirPath must be defined");let r=await sa(this._db().then(s=>s.getAllKeys(ll)),"Error listing files");if(r==null&&(r=[]),!_Y(r))throw new Error("Keys in opendirRecursive must be array");return n&&!n.endsWith("/")&&(n+="/"),n?r.filter(s=>s.startsWith(n)):r}async readFile(n){this._verifyFilePath(n);let r=await sa(this._db().then(o=>o.get(ll,n)),"Error reading data");if(r==null)throw new sg({message:`File "${n}" not found`,code:as});return r}async readFileAsText(n){this._verifyFilePath(n);const r=await this.readFile(n);return await E_(r)}async rename(n,r){this._verifyFilePath(n),this._verifyFilePath(r);const o=await this.readFile(n);let s;try{s=await this.readFile(r)}catch(i){if(!(i instanceof qr)||i.code!==as)throw i}if(s)throw new sg({message:`Cannot rename; File "${n}" already exists`,code:dM});await this.writeFile(r,o),await this.unlink(n)}async stat(n){return this._verifyFilePath(n),await this.readFile(n),await this._fileMetadata.get(n,new bw)}async unlink(n){this._verifyFilePath(n),await sa(this._db().then(r=>r.delete(ll,n)),"Error deleting file"),await this._fileMetadata.del(n)}async writeFile(n,r){this._verifyFilePath(n),this._verifyFileType(r);const o=this._db().then(s=>s.put(ll,r,n));await sa(o,"Error writing data"),await this._fileMetadata.set(n,new bw)}}class sg extends qr{}function _Y(t){return!(!Array.isArray(t)||!t.every(e=>typeof e=="string"))}const $Y="The user aborted a request.",EY="The operation was aborted. ",SY="Fetch is aborted";function Ja(t){return!!(t instanceof DOMException&&t.name==="AbortError"||t instanceof Error&&t.name==="AbortError"&&[$Y,EY,SY].includes(t.message))}const CY=["node_modules",".git"];async function TY(t,e){return AY(`((postMessage) => {
      let work = ${t.toString()};

      return ({ data }) => {
        work(data)
          .then((result) => {
            postMessage({ done: true, result: result });
          })
          .catch((error) => {
            console.error(error);
            postMessage({ done: false, errorMessage: error.message });
          });
      };
    })`,e)}async function AY(t,e,n=[]){let r=new Blob([`onmessage=${t}(postMessage)`],{type:"text/javascript"}),o=new Worker(URL.createObjectURL(r));const s=new Promise((a,l)=>{o.postMessage(e,n),o.onmessage=({data:c})=>{o.terminate(),c.done?a(c):l(new Error(c.errorMessage||"Invalid error message returned by worker"))},o.onerror=c=>{l(c),o.terminate()}});let i=null;return s.then(()=>{i&&clearTimeout(i)}),Promise.race([s,new Promise((a,l)=>{i=setTimeout(()=>{console.warn("sendToWorkerForWrite worker timed out"),l(new Error("sendToWorkerForWrite worker timed out")),o.terminate()},5e3)})])}const NY=typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope;async function PY(t,e,n){if(!(e instanceof File||e instanceof Blob))throw new Error("Not correct type of content");if(t.createWriter){const r=await t.createWriter();await r.write(0,e),await r.close();return}if(t.createWritable){const r=await t.createWritable();await r.write(e),await r.close();return}if(navigator&&navigator.storage&&"getDirectory"in navigator.storage&&OY()){let r=n.map(o=>o.name);r.push(t.name),NY?await $2({path:r,content:e}):await TY($2,{path:r,content:e});return}throw new Error("No write method available")}async function $2({path:t,content:e}){let r=await navigator.storage.getDirectory();for(const a of t.slice(0,t.length-1))if(r=await r.getDirectoryHandle(a,{create:!1}),!r)throw new Error(`Dir handle ${a} not found`);let o=await r.getFileHandle(t[t.length-1],{create:!1});if(!o)throw new Error(`File handle ${t.join("/")} not found`);const s=await o.createSyncAccessHandle();let i=await new Response(e).arrayBuffer();await s.write(i,{at:0}),await s.truncate(e.size),await s.flush(),await s.close()}function OY(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}const E2=new WeakMap,gM=t=>t.name==="NotFoundError"&&t instanceof DOMException;function Eu(t,e){return t.catch(n=>{if(n instanceof lr)throw n;if(gM(n))throw new lr({message:"The requested file was not found",code:as});return Promise.reject(new lr({message:e,code:fM}))})}class yM extends uM{constructor(n){super({allowedFile:n.allowedFile,allowedDir:n.allowedDir});M(this,"_allowedDir");M(this,"_allowedFile");M(this,"_resolveFileHandle");M(this,"_rootDirHandle");const{rootDirHandle:r,allowedFile:o=()=>!0,allowedDir:s=d=>!CY.includes(d.name)}=n;if(this._rootDirHandle=r,!this._rootDirHandle)throw new Error("rootDirHandle must be provided");this._allowedFile=o,this._allowedDir=s,this._resolveFileHandle=IY({allowedDir:s,allowedFile:o});const i=this.readFileAsText.bind(this),a=this.writeFile.bind(this),l=this.unlink.bind(this),c=this.rename.bind(this),u=this.opendirRecursive.bind(this);this.readFileAsText=(...d)=>Eu(i(...d),"Unable to read file"),this.writeFile=(...d)=>Eu(a(...d),"Unable to write file"),this.unlink=(...d)=>Eu(l(...d),"Unable to unlink file"),this.rename=(...d)=>Eu(c(...d),"Unable to rename file"),this.opendirRecursive=(...d)=>Eu(u(...d),"Unable to open dir")}async opendirRecursive(n){if(!n)throw new Error("dirPath must be defined");await Su(this._rootDirHandle);const r=await mM(this._rootDirHandle,{allowedFile:this._allowedFile,allowedDir:this._allowedDir});n.endsWith("/")||(n+="/");let o=r.map(s=>s.map(i=>i.name).join("/"));return o=n?o.filter(s=>s.startsWith(n)):o,o}async readFile(n){this._verifyFilePath(n),await Su(this._rootDirHandle,n);const{fileHandle:r}=await this._resolveFileHandle(this._rootDirHandle,n);return r.getFile()}async readFileAsText(n){this._verifyFilePath(n);const r=await this.readFile(n);return await E_(r)}async rename(n,r){this._verifyFilePath(n),this._verifyFilePath(r);const o=await this.readFile(n);let s;try{s=await this.readFile(r)}catch(i){if(!(i instanceof qr)||i.code!==as)throw i}if(s)throw new lr({message:"Cannot rename as a file with the same name already exists",code:dM});await this.writeFile(r,o),await this.unlink(n)}async stat(n){await Su(this._rootDirHandle,n);const{fileHandle:r}=await this._resolveFileHandle(this._rootDirHandle,n),o=await r.getFile();return new bw({mtimeMs:o.lastModified})}async unlink(n){this._verifyFilePath(n),await Su(this._rootDirHandle,n);const{fileHandle:r,parentHandles:o}=await this._resolveFileHandle(this._rootDirHandle,n),s=o[o.length-1];await(s==null?void 0:s.removeEntry(r.name))}async writeFile(n,r){this._verifyFilePath(n),this._verifyFileType(r),await Su(this._rootDirHandle,n);let o,s=!1,i=[];try{({fileHandle:o,parentHandles:i}=await this._resolveFileHandle(this._rootDirHandle,n))}catch(a){if(a instanceof lr&&a.code===as)s=!0;else throw a}if(s&&(await gY(this._rootDirHandle,n),{fileHandle:o,parentHandles:i}=await this._resolveFileHandle(this._rootDirHandle,n)),!o)throw new Error("fileHandle must be defined");await PY(o,r,i)}}class lr extends qr{}async function Su(t,e=""){if(!await bY(t))throw new lr({message:`Permission rejected to read ${t.name}`,code:sp})}function IY({allowedDir:t=n=>!0,allowedFile:e=n=>!0}){const n=async(o,s)=>{const i=async()=>{let c=await MY(s.values());c=c.filter(u=>{if(u.kind==="directory")return t(u);if(u.kind==="file")return e(u);throw new Error("Unknown kind of entry: "+u.kind)}),E2.set(s,c)},a=()=>{const c=E2.get(s);return c?c.find(d=>d.name===o):void 0};let l=a();return l||(await i(),a())},r=async(o,s,i,a)=>{if(s.kind!=="directory")throw new Error(`Cannot get Path "${o.join("/")}" as "${s.name}" is not a directory`);a.push(s);const[l,...c]=o;if(!l)throw new Error("Parent name must be defined");if(o.length===1)return s.getFileHandle(l,{create:!1}).catch(RY(i));const u=await n(l,s);if(!u)throw new lr({message:`File at "${i.join("/")}" not found`,code:as});return r(c,u,i,a)};return async(o,s)=>{if(typeof s=="string"&&(s=s.split("/")),s[0]!==o.name)throw new Error(`getFile Error: root parent ${s[0]} must be the rootDirHandle ${o.name}`);let i=[];return{fileHandle:await r(s.slice(1),o,s,i),parentHandles:i}}}function RY(t){return e=>{throw gM(e)?new lr({message:`File at "${t.join("/")}" not found`,code:as}):e}}async function MY(t){const e=[];for await(const n of t)e.push(n);return e}async function DY(){try{let t=await window.showDirectoryPicker();if(!await bM(t))throw new lr({message:"The permission to edit directory was denied",code:sp});return t}catch(t){throw t instanceof Error?Ja(t)?new lr({message:"The user aborted.",code:N1}):new Error(t.message):t}}async function bM(t){const e={};return e.writable=!0,e.mode="readwrite",await t.requestPermission(e)==="granted"}function LY(){return typeof window!="undefined"&&"showOpenFilePicker"in window}var jY=Object.defineProperty,FY=(t,e,n)=>e in t?jY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Bb=(t,e,n)=>(FY(t,typeof e!="symbol"?e+"":e,n),n);const BY=["appEnv","buildTime","commitHash","deployBranch","hot","netlifyBuildContext","nodeEnv","releaseId","releaseVersion","storybook"],zY=["helpDocsVersion","changelogText"],qY=["writeSlowDown"];function zb(t,e,n){if(Object.keys(t).length!==e.length){const r=e.find(o=>!(o in t));throw console.log(Object.keys(t),e),new Error(`${n} has a missing key ${r}`)}for(const[r,o]of Object.entries(t)){if(!e.includes(r))throw new Error(`Unknown ${n} field: ${r}`);if(o===void 0)throw new Error(`${n} field ${r} is undefined`)}}let qb=class xw{constructor(e={}){Bb(this,"build"),Bb(this,"app"),Bb(this,"debug"),this.build=e.build||{},this.app=e.app||{},this.debug=e.debug||{}}static fromJSONString(e){const{build:n,app:r,debug:o}=JSON.parse(e);return new xw({app:r,build:n,debug:o})}serialize(){const e={build:this.build,app:this.app,debug:this.debug};return JSON.stringify(e)}finalize(){return zb(this.build,BY,"build"),zb(this.app,zY,"app"),Object.keys(this.debug).length>0&&zb(this.debug,qY,"debug"),{app:this.app,build:this.build,debug:Object.keys(this.debug).length>0?this.debug:void 0}}merge(e){const n={...this.build,...e.build},r={...this.app,...e.app},o={...this.debug,...e.debug};return new xw({build:n,app:r,debug:o})}print(e="config"){const n=s=>JSON.parse(JSON.stringify(s,(i,a)=>typeof a=="string"&&a.length>20?a.substring(0,20)+"...":a)),r=console.group?console.group:console.log,o=console.groupEnd?console.groupEnd:console.log;r(e),console.table(n(this.app)),console.table(n(this.build)),console.table(n(this.debug)),o()}};const WY=()=>{let t;try{let e=qb.fromJSONString('{"build":{"appEnv":"local","buildTime":"2024-09-09T16:29:23.856Z","commitHash":"ab7de7d","deployBranch":"local","hot":false,"netlifyBuildContext":"","nodeEnv":"production","releaseId":"0.1.22#undefined","releaseVersion":"0.1.22","storybook":false},"app":{"changelogText":"### 6 , 2024 \\n\\n- **Feature:**   .     .\\n\\n### 5 , 2024 \\n\\n-   Flent.ru\\n\\n","helpDocsVersion":"1.15.0"},"debug":{}}');const n=e.build.nodeEnv==="test";try{let r=globalThis.__BANGLE_INJECTED_CONFIG__||null;if(r){console.warn("injecting config!");const o=qb.fromJSONString(r);!n&&o.print("injected-config"),e=e.merge(qb.fromJSONString(r))}}catch(r){console.error(r)}!n&&e.print(),t=e.finalize()}catch(e){console.error(e)}if(!t)throw new Error("FinalConfig is not defined");return t.debug&&console.warn("FinalConfig: is using debug fields!"),t},VY=()=>{if(typeof navigator=="undefined")return"unknown";const t=navigator.userAgent;let e,n,r,o,s;return(o=t.indexOf("OPR/"))!==-1?(e="Opera",n=t.substring(o+4)):(o=t.indexOf("Opera"))!==-1?(e="Opera",(o=t.indexOf("Version"))!==-1?n=t.substring(o+8):n=t.substring(o+6)):(o=t.indexOf("MSIE"))!==-1?(e="Microsoft Internet Explorer",n=t.substring(o+5)):(o=t.indexOf("Chrome"))!==-1?(e="Chrome",n=t.substring(o+7)):(o=t.indexOf("Safari"))!==-1?(e="Safari",(o=t.indexOf("Version"))!==-1?n=t.substring(o+8):n=t.substring(o+7)):(o=t.indexOf("Firefox"))!==-1?(e="Firefox",n=t.substring(o+8)):(r=t.lastIndexOf(" ")+1)<(o=t.lastIndexOf("/"))?(e=t.substring(r,o),n=t.substring(o+1),e.toLowerCase()===e.toUpperCase()&&(e=navigator.appName)):(e=navigator.appName,n=""+parseFloat(navigator.appVersion)),(s=n.indexOf(";"))!==-1&&(n=n.substring(0,s)),(s=n.indexOf(" "))!==-1&&(n=n.substring(0,s)),`${e} ${n}`.toLocaleLowerCase()},P1=VY(),vM=P1.includes("firefox"),wM=P1.includes("safari");P1.includes("chrome");function S_(t){var n;let e=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:{};if(e.navigator!=null){const r=((n=e.navigator.userAgentData)==null?void 0:n.platform)||e.navigator.platform;return t.test(r)}return!1}const UY=typeof navigator!="undefined"?/Android \d/.test(navigator.userAgent):!1,O1=S_(/^Mac/i),HY=S_(/^iPhone/i),KY=S_(/^iPad/i)||O1&&navigator.maxTouchPoints>1,GY=HY||KY,C_=UY||GY,mr=WY(),Yl=mr.build.appEnv,xM=Yl==="production";mr.build.releaseVersion;const I1=mr.build.releaseId,kw=mr.app.helpDocsVersion,T_="tab_"+tX(4),ZY=mr.build.hot,JY=mr.app.changelogText,YY=mr.build.storybook;var SP;const Hs=(SP=mr.debug)==null?void 0:SP.writeSlowDown,uRt=mr.build.nodeEnv==="test",XY={environment:Yl,dsn:"https://f1a3d53e530e465e8f74f847370b594b@o573373.ingest.sentry.io/5723848",integrations:[],release:I1,tracesSampleRate:Yl==="production"?.8:Yl==="staging"?1:0};mr.build.nodeEnv!=="test"&&(console.log(mr.build.appEnv+": using "+I1),console.table({tabId:T_,isWorkerContext:typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope}));if(!/^\d+\.\d+\.\d+/.test(kw||""))throw new Error("Invalid HELP_DOCS_VERSION: "+kw);const QY=759,eX=xM?10*60*1e3:20*1e3;function tX(t=10){return Math.random().toString(36).substring(2,15).slice(0,t)}function nX(){return(t,e)=>{if(!t.selection.empty)return!1;const n=t.selection.$from.nodeBefore;if(t.selection.$from.nodeAfter)return!1;const o=n==null?void 0:n.text;if(o&&n.type.name==="text"){const s=o.length-o.trimEnd().length;if(s>0)return e==null||e(t.tr.delete(t.selection.from-s,t.selection.from)),!0}return!1}}function R1(t){let e=t;if(e instanceof ge)return{errorType:"BASE_ERROR",value:e.toJsonValue()};if(e instanceof Error)return{errorType:"ERROR",value:{message:e.message,name:e.name,stack:e.stack,thrower:e.thrower,code:e.code}};throw new Error("Unknown error type")}function M1(t){if(t.errorType==="ERROR")return Object.assign(new Error(t.value.message),t.value);if(t.errorType==="BASE_ERROR")return ge.fromJsonValue(t.value);throw new Error("Unknown error type")}const rX=(t,e,n,r)=>{if(n==="length"||n==="prototype"||n==="arguments"||n==="caller")return;const o=Object.getOwnPropertyDescriptor(t,n),s=Object.getOwnPropertyDescriptor(e,n);!oX(o,s)&&r||Object.defineProperty(t,n,s)},oX=function(t,e){return t===void 0||t.configurable||t.writable===e.writable&&t.enumerable===e.enumerable&&t.configurable===e.configurable&&(t.writable||t.value===e.value)},sX=(t,e)=>{const n=Object.getPrototypeOf(e);n!==Object.getPrototypeOf(t)&&Object.setPrototypeOf(t,n)},iX=(t,e)=>`/* Wrapped ${t}*/
${e}`,aX=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),lX=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),cX=(t,e,n)=>{const r=n===""?"":`with ${n.trim()}() `,o=iX.bind(null,r,e.toString());Object.defineProperty(o,"name",lX),Object.defineProperty(t,"toString",{...aX,value:o})};function uX(t,e,{ignoreNonConfigurable:n=!1}={}){const{name:r}=t;for(const o of Reflect.ownKeys(e))rX(t,e,o,n);return sX(t,e),cX(t,e,r),t}const kM=(t,e={})=>{if(typeof t!="function")throw new TypeError(`Expected the first argument to be a function, got \`${typeof t}\``);const{wait:n=0,maxWait:r=Number.POSITIVE_INFINITY,before:o=!1,after:s=!0}=e;if(!o&&!s)throw new Error("Both `before` and `after` are false, function wouldn't be called.");let i,a,l;const c=function(...u){const d=this,f=()=>{i=void 0,a&&(clearTimeout(a),a=void 0),s&&(l=t.apply(d,u))},p=()=>{a=void 0,i&&(clearTimeout(i),i=void 0),s&&(l=t.apply(d,u))},h=o&&!i;return clearTimeout(i),i=setTimeout(f,n),r>0&&r!==Number.POSITIVE_INFINITY&&!a&&(a=setTimeout(p,r)),h&&(l=t.apply(d,u)),l};return uX(c,t),c.cancel=()=>{i&&(clearTimeout(i),i=void 0),a&&(clearTimeout(a),a=void 0)},c};function dX(t){return t[t.length-1]}function _M(t){let e=n(t);function n(s){let i=Object.create(null);for(let a in s)i[o(a)]=s[a];return i}function r(s,i,a){return i.altKey&&(s="Alt-"+s),i.ctrlKey&&(s="Ctrl-"+s),i.metaKey&&(s="Meta-"+s),a&&i.shiftKey&&(s="Shift-"+s),s}function o(s){let i=s.split(/-(?!$)/),a=i[i.length-1];a==="Space"&&(a=" ");let l,c,u,d;for(let f=0;f<i.length-1;f++){let p=i[f];if(typeof p=="string"&&/^(cmd|meta|m)$/i.test(p))d=!0;else if(typeof p=="string"&&/^a(lt)?$/i.test(p))l=!0;else if(typeof p=="string"&&/^(c|ctrl|control)$/i.test(p))c=!0;else if(typeof p=="string"&&/^s(hift)?$/i.test(p))u=!0;else if(typeof p=="string"&&/^mod$/i.test(p))O1?d=!0:c=!0;else throw new Error("Unrecognized modifier name: "+p)}return l&&(a="Alt-"+a),c&&(a="Ctrl-"+a),d&&(a="Meta-"+a),u&&(a="Shift-"+a),a}return function(s){let i=QR(s),a=i.length===1&&i!==" ";const l=e[r(i,s,!a)];if(l&&l()){s.preventDefault();return}}}function oe(...t){let e="";for(const n of t)n&&(e+=n+" ");return e}function ap(t=20){return new Promise(e=>setTimeout(e,t))}function fX(){if(typeof navigator=="undefined"||typeof window=="undefined")return!1;var t=!1;if("maxTouchPoints"in navigator)t=navigator.maxTouchPoints>0;else if("msMaxTouchPoints"in navigator)t=navigator.msMaxTouchPoints>0;else{var e=typeof window!="undefined"&&window.matchMedia&&window.matchMedia("(pointer:coarse)");if(e&&e.media==="(pointer:coarse)")t=!!e.matches;else if("orientation"in window)t=!0;else{var n=navigator.userAgent;t=/\b(BlackBerry|webOS|iPhone|IEMobile)\b/i.test(n)||/\b(Android|Windows Phone|iPad|iPod)\b/i.test(n)}}return t}const lp=fX();function pX(t,e){if(t.length!==e.length)return!1;const n=new Set(e);return t.every(r=>n.has(r))}const A_=kM;function hX(t,e,n){return[...t.slice(0,e),n,...t.slice(e)]}function mX(t){for(let e=t.parentNode;e;e=e.parentNode)if(e instanceof Element&&e.scrollHeight>e.clientHeight)return e}function $M(t=10){return Math.random().toString(36).substring(2,15).slice(0,t)}function cp(t){if(t.aborted)throw new DOMException("AbortError","AbortError")}function up(t,e){if(t===void 0)throw new Error(`assertion failed: ${e}`)}function gX(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(!Object.prototype.hasOwnProperty.call(e,n[o])||!Object.is(t[n[o]],e[n[o]]))return!1;return!0}function D1(t){return t.replace(/[^a-z0-9]/g,function(e){let n=e.charCodeAt(0);return n===32?"-":n>=65&&n<=90?"_"+e.toLowerCase():"__"})}var wf=(t=>(t.NewTab="NewTab",t.ShiftClick="ShiftClick",t.Click="Click",t))(wf||{});function EM(t){return t.ctrlKey||t.metaKey||t.button&&t.button===1?"NewTab":t.shiftKey?"ShiftClick":"Click"}const yX="useLocalStorage/1/";function La(t,e){t=yX+t;const[n,r]=v.useState(()=>S2(t,e)),o=v.useRef(e);v.useEffect(()=>{o.current=e},[e]),v.useEffect(()=>{const i=S2(t,o.current);r(i)},[t]);const s=v.useCallback(i=>{r(a=>{const l=i instanceof Function?i(a):i;try{SM(t,l)}catch(c){console.log(c)}return l})},[t]);return[n,s]}function S2(t,e){const n=()=>e instanceof Function?e():e;try{const r=vX(t);if(r==null){const o=n();return SM(t,o),o}return r}catch(r){return console.log(r),bX(t),n()}}function SM(t,e){window.localStorage.setItem(t,JSON.stringify({payload:e,time:Date.now()}))}function bX(t){window.localStorage.removeItem(t)}function vX(t){const e=window.localStorage.getItem(t);if(e==null)return;const n=JSON.parse(e);if(n!=null)return n.payload}const wX=[];function xX({uid:t,maxTimestampsPerEntry:e=3,maxEntries:n=25}){const[r,o]=La("utils/useRecencyMonitor-1/"+t,wX);return{records:r,updateRecord:v.useCallback(s=>{o(i=>{let a=_X(i,s,e);return a=$X(a,n),a})},[o,e,n])}}function kX(t,e){return[Date.now(),...t].filter(o=>typeof o=="number").sort((o,s)=>s-o).slice(0,e)}function _X(t,e,n){var i;const r=((i=t.find(a=>a.key===e))==null?void 0:i.timestamps)||[],o=t.filter(a=>a.key!==e),s=kX(r,n);return[{key:e,timestamps:s},...o]}function $X(t,e){return t.sort((n,r)=>{const o=n.timestamps[0]||0;return(r.timestamps[0]||0)-o}).slice(0,e)}function CM(t,e){const n=v.useCallback(t,e);v.useEffect(()=>{const r=_M(n());return document.addEventListener("keydown",r),()=>{document.removeEventListener("keydown",r)}},[n])}function TM(t,e,n){v.useEffect(()=>{const r=o=>{if(!t.current)return;if(typeof o.composedPath=="function"?o.composedPath().includes(t.current):t.current.contains(o.target)){n==null||n();return}e==null||e()};return document.addEventListener("click",r),()=>{document.removeEventListener("click",r)}},[t,e,n])}function Zc(){const t=v.useRef(!1);return v.useEffect(()=>()=>{t.current=!0},[]),t}const EX=12,SX=50;function AM(t){const e=v.useRef(0),n=v.useRef(),r=v.useRef(!1),[o,s]=v.useState(),[i]=v.useState(()=>{if(t==null)throw new Error("channelName must be provided");if(typeof window!="undefined"&&window.BroadcastChannel)return new BroadcastChannel(t)});v.useEffect(()=>{i&&(i.onmessage=l=>{s(l.data)})},[i]),v.useEffect(()=>()=>{r.current=!0,i==null||i.close()},[i]);const a=v.useCallback(l=>{if(!r.current){const c=n.current;if(c&&Date.now()-c<SX?e.current++:e.current=0,e.current<EX)i==null||i.postMessage(l),n.current=Date.now();else throw new Error("Avoiding possible infinite recursion")}},[i]);return[o,a]}function L1(t,e){const[n,r]=v.useState(t),o=v.useRef(e),s=v.useRef(t);s.current=t;const i=v.useMemo(()=>kM(()=>{r(s.current)},o.current),[]);return v.useEffect(()=>{i()},[t,i]),v.useEffect(()=>()=>{i.cancel()},[i]),n}function NM(t){const e=v.useRef();return v.useEffect(()=>{e.current=t},[t]),e.current}function PM(t,e,n){const r=v.useCallback(t,e);v.useEffect(()=>{let o=setInterval(r,n);return()=>{clearInterval(o)}},[r,n])}function Jc(t){return t.includes("Mod")&&(t=t.split("Mod").join(O1?"":"Ctrl")),t=t.split("-").map(e=>/^[A-Z]$/.test(e)?`Shift-${e.toLocaleLowerCase()}`:e).join("-"),t.includes("Shift")&&(t=t.split("Shift").join("")),t}class rh{constructor({key:e}){M(this,"key");this.key=e}get displayValue(){return Jc(this.key)}}const CX={toggleSecondaryEditor:new rh({key:"Mod-\\"}),toggleInlineCommandPalette:new rh({key:"Mod-/"}),newNote:new rh({key:"Ctrl-n"}),searchNotes:new rh({key:"Mod-F"})};function C2(t,e){return Math.floor(Math.random()*(e-t))+t}const T2=["amazing","ambitious","ample","amused","amusing","anchored","ancient","angelic","angry","anguished","animated","annual","another","antique","anxious","any","apprehensive","appropriate","apt","arctic","arid","aromatic","artistic","ashamed","assured","astonishing","athletic","attached","attentive","attractive","bewitched","big","big-hearted","biodegradable","bite-sized","bitter","black","black-and-white","bland","blank","blaring","bleak","blind","blissful","blond","blue","blushing","bogus","boiling","bold","bony","boring","bossy","both","bouncy","bountiful","bowed","brave","breakable","brief","bright","brilliant","brisk","broken","bronze","brown","bruised","bubbly","bulky","bumpy","buoyant","burdensome","burly","bustling","busy","buttery","buzzing","calculating","calm","candid","canine","capital","carefree","careful","careless","caring","cautious","cavernous","celebrated","charming","cheap","cheerful","cheery","chief","chilly","chubby","circular","classic","clean","clear","clear-cut","clever","close","closed","cloudy","clueless","clumsy","cluttered","coarse","cold","colorful","colorless","colossal","comfortable","common","compassionate","competent","complete","complex","complicated","composed","concerned","concrete","confused","conscious","considerate","constant","content","conventional","cooked","cool","cooperative","coordinated","corny","corrupt","costly","courageous","courteous","crafty","crazy","creamy","creative","creepy","criminal","crisp","critical","crooked","crowded","cruel","crushing","cuddly","cultivated","cultured","cumbersome","curly","curvy","cute","cylindrical","damaged","damp","dangerous","dapper","daring","darling","dark","dazzling","dead","deadly","deafening","dear","dearest","decent","decimal","decisive","deep","defenseless","defensive","defiant","deficient","definite","definitive","delayed","delectable","delicious","delightful","delirious","demanding","dense","dental","dependable","dependent","descriptive","deserted","detailed","determined","devoted","different","difficult","digital","diligent","dim","dimpled","dimwitted","direct","disastrous","discrete","disfigured","disgusting","disloyal","dismal","distant","downright","dreary","dirty","disguised","dishonest","dismal","distant","distinct","distorted","dizzy","early","easy","easy-going","ecstatic","edible","educated","elaborate","elastic","elated","elderly","electric","elegant","elementary","elliptical","embarrassed","embellished","eminent","emotional","empty","enchanted","enchanting","energetic","enlightened","enormous","enraged","entire","envious","equal","equatorial","essential","esteemed","ethical","euphoric","even","evergreen","everlasting","every","evil","exalted","excellent","exemplary","exhausted","excitable","excited","exciting","exotic","expensive","experienced","expert","extraneous","extroverted","extra-large","extra-small","fabulous","failing","faint","fair","faithful","fake","false","familiar","famous","fancy","fantastic","far","faraway","far-flung","far-off","fast","fat","fatal","fatherly","favorable","favorite","fearful","fearless","feisty","feline","female","feminine","few","fickle","filthy","fine","finished","firm","first","firsthand","fitting","fixed","flaky","flamboyant","flashy","flat","flawed","flawless","flickering","flimsy","flippant","flowery","fluffy","fluid","flustered","focused","fond","foolhardy","foolish","forceful","forked","formal","forsaken","forthright","fortunate","fragrant","frail","frank","frayed","free","French","fresh","frequent","friendly","frightened","frightening","frigid","frilly","frizzy","frivolous","front","frosty","frozen","frugal","fruitful","full","fumbling","functional","funny","fussy","fuzzy","gargantuan","gaseous","general","generous","gentle","genuine","giant","giddy","gigantic","gifted","giving","glamorous","glaring","glass","gleaming","gleeful","glistening","glittering","gloomy","glorious","glossy","glum","golden","good","good-natured","gorgeous","graceful","gracious","grand","grandiose","granular","grateful","grave","gray","great","greedy","green","gregarious","grim","grimy","gripping","grizzled","gross","grotesque","grouchy","grounded","growing","growling","grown","grubby","gruesome","grumpy","guilty","gullible","gummy","hairy","half","handmade","handsome","handy","happy","happy-go-lucky","hard","hard-to-find","harmful","harmless","harmonious","harsh","hasty","hateful","haunting","healthy","heartfelt","hearty","heavenly","heavy","hefty","helpful","helpless","hidden","hideous","high","high-level","hilarious","hoarse","hollow","homely","honest","honorable","honored","hopeful","horrible","hospitable","hot","huge","humble","humiliating","humming","humongous","hungry","hurtful","husky","icky","icy","ideal","idealistic","identical","idle","idiotic","idolized","ignorant","ill","illegal","ill-fated","ill-informed","illiterate","illustrious","imaginary","imaginative","immaculate","immaterial","immediate","immense","impassioned","impeccable","impartial","imperfect","imperturbable","impish","impolite","important","impossible","impractical","impressionable","impressive","improbable","impure","inborn","incomparable","incompatible","incomplete","inconsequential","incredible","indelible","inexperienced","indolent","infamous","infantile","infatuated","inferior","infinite","informal","innocent","insecure","insidious","insignificant","insistent","instructive","insubstantial","intelligent","intent","intentional","interesting","internal","international","intrepid","ironclad","irresponsible","irritating","itchy","jaded","jagged","jam-packed","jaunty","jealous","jittery","joint","jolly","jovial","joyful","joyous","jubilant","judicious","juicy","jumbo","junior","jumpy","juvenile","kaleidoscopic","keen","key","kind","kindhearted","kindly","klutzy","knobby","knotty","knowledgeable","knowing","known","kooky","kosher","lame","lanky","large","last","lasting","late","lavish","lawful","lazy","leading","lean","leafy","left","legal","legitimate","light","lighthearted","likable","likely","limited","limp","limping","linear","lined","liquid","little","live","lively","livid","loathsome","lone","lonely","long","long-term","loose","lopsided","lost","loud","lovable","lovely","loving","low","loyal","lucky","lumbering","luminous","lumpy","lustrous","luxurious","mad","made-up","magnificent","majestic","major","male","mammoth","married","marvelous","masculine","massive","mature","meager","mealy","mean","measly","meaty","medical","mediocre","medium","meek","mellow","melodic","memorable","menacing","merry","messy","metallic","mild","milky","mindless","miniature","minor","minty","miserable","miserly","misguided","misty","mixed","motionless","mountainous","muddy","muffled","multicolored","mundane","murky","mushy","musty","muted","mysterious","naive","narrow","nasty","natural","naughty","nautical","near","neat","necessary","needy","negative","neglected","negligible","neighboring","nervous","new","next","nice","nifty","nimble","nippy","nocturnal","noisy","nonstop","normal","notable","noted","noteworthy","novel","noxious","numb","nutritious","nutty","obedient","obese","oblong","oily","oblong","obvious","occasional","odd","oddball","offbeat","offensive","official","old","old-fashioned","only","open","optimal","optimistic","opulent","orange","orderly","organic","ornate","ornery","ordinary","original","other","our","outlying","outgoing","outlandish","outrageous","outstanding","oval","overcooked","overdue","overjoyed","overlooked","palatable","pale","paltry","parallel","parched","partial","passionate","past","pastel","peaceful","peppery","perfect","perfumed","periodic","perky","personal","pertinent","pesky","pessimistic","petty","phony","physical","piercing","pink","pitiful","plain","plaintive","plastic","playful","pleasant","pleased","pleasing","plump","plush","polished","polite","political","pointed","pointless","poised","poor","popular","portly","posh","positive","possible","potable","powerful","powerless","practical","precious","present","prestigious","pretty","precious","previous","pricey","prickly","primary","prime","pristine","private","prize","probable","productive","profitable","profuse","proper","proud","prudent","punctual","pungent","puny","pure","purple","pushy","putrid","puzzled","puzzling","quaint","qualified","quarrelsome","quarterly","queasy","querulous","questionable","quick","quick-witted","quiet","quintessential","quirky","quixotic","quizzical","radiant","ragged","rapid","rare","rash","raw","recent","reckless","rectangular","ready","real","realistic","reasonable","red","reflecting","regal","regular","reliable","relieved","remarkable","remorseful","remote","repentant","required","respectful","responsible","repulsive","revolving","rewarding","rich","rigid","short-term","showy","shrill","shy","sick","silent","silky","silly","silver","similar","simple","simplistic","sinful","single","sizzling","skeletal","skinny","sleepy","slight","slim","slimy","slippery","slow","slushy","small","smart","smoggy","smooth","smug","snappy","snarling","sneaky","sniveling","snoopy","sociable","soft","soggy","solid","somber","some","spherical","sophisticated","sore","sorrowful","soulful","splendid","spotless","spotted","spry","square","squeaky","squiggly","stable","staid","stained","stale","standard","starchy","stark","starry","steep","sticky","stiff","stimulating","stingy","stormy","straight","strange","steel","strict","strident","striking","striped","strong","studious","stunning","stupendous","stupid","sturdy","stylish","subdued","submissive","substantial","subtle","suburban","sudden","sugary","sunny","super","superb","superficial","superior","supportive","sure-footed","surprised","svelte","sweaty","sweet","sweltering","swift","sympathetic","tall","talkative","tame","tan","tangible","tart","tasty","tattered","taut","tedious","teeming","tempting","tender","tense","tepid","terrible","terrific","testy","thankful","that","these","thick","thin","third","thirsty","this","thorough","thorny","those","thoughtful","threadbare","thrifty","thunderous","tidy","tight","timely","tinted","tiny","tired","torn","total","tough","traumatic","treasured","tremendous","tragic","trained","tremendous","triangular","tricky","trifling","trim","trivial","troubled","true","trusting","trustworthy","trusty","truthful","tubby","turbulent","twin","ugly","ultimate","unacceptable","unaware","uncomfortable","uncommon","unconscious","understated","wet","which","whimsical","whirlwind","whispered","white","whole","whopping","wicked","wide","wide-eyed","wiggly","wild","willing","wilted","winding","windy","winged","wiry","wise","witty","wobbly","woeful","wonderful","wooden","woozy","wordy","worldly","worn","worried","worrisome","worse","worst","worthless","worthwhile","worthy","wrathful","wretched","writhing","wrong","yellow","yellowish","young","youthful","yummy","zany","zealous","zesty","zigzag","rocky"],A2=["people","history","way","art","world","information","map","family","government","health","system","computer","meat","year","thanks","music","person","reading","method","data","food","understanding","theory","law","bird","literature","problem","software","control","knowledge","power","ability","economics","love","internet","television","science","library","nature","fact","product","idea","temperature","investment","area","society","activity","story","industry","media","thing","oven","community","definition","safety","quality","development","language","management","player","variety","video","movie","organization","equipment","physics","analysis","policy","series","thought","basis","boyfriend","direction","strategy","technology","army","camera","freedom","paper","environment","child","instance","month","truth","marketing","university","writing","article","department","difference","goal","news","audience","fishing","growth","income","marriage","user","combination","failure","meaning","medicine","philosophy","teacher","communication","night","chemistry","disease","disk","energy","nation","road","role","soup","advertising","location","success","addition","apartment","education","math","moment","painting","politics","attention","decision","event","property","shopping","student","wood","competition","distribution","entertainment","office","population","president","unit","category","cigarette","context","introduction","opportunity","performance","driver","flight","length","magazine","newspaper","relationship","teaching","respect","sample","transportation","boring","charity","cousin","disaster","editor","efficiency","excitement","extent","feedback","guitar","homework","leader","mom","outcome","permission","presentation","promotion","reflection","refrigerator","resolution","revenue","session","singer","tennis","church","clothes","coffee","dinner","drawing","hair","hearing","initiative","judgment","lab","measurement","mode","mud","orange","poetry","police","possibility","procedure","queen","ratio","relation","restaurant","satisfaction","sector","signature","significance","song","tooth","town","vehicle","volume","wife","accident","airport","appointment","arrival","assumption","baseball","chapter","committee","conversation","database","enthusiasm","day","place","number","part","field","fish","back","process","heat","hand","experience","job","book","end","point","type","home","economy","value","body","market","guide","interest","state","radio","course","company","price","size","card","list","mind","trade","line","care","group","risk","word","fat","force","key","light","training","name","school","top","amount","level","order","practice","research","sense","service","piece","web","boss","sport","fun","house","page","term","test","answer","sound","focus","matter","kind","soil","board","craft","half","inside","outside","standard","bus","exchange","eye","fire","position","pressure","stress","advantage","benefit","box","frame","issue","step","cycle","face","item","metal","paint","review","room","screen","structure","view","account","ball","discipline","medium","share","balance","bit","black","bottom","choice","gift","impact","machine","shape","tool","wind","address","average","career","culture","morning","pot","sign","table","task","condition","contact","credit","egg","hope","ice","network","north","square","attempt","date","effect","link","post","star","red","strength","traffic","trip","vegetable","appeal","chart","gear","ideal","kitchen","land","log","mother","net","party","principle","relative","sale","season","signal","spirit","street","tree","wave","belt","bench","commission","copy","drop","minimum","path","progress","project","sea","south","status","stuff","ticket","tour","angle","blue","breakfast","confidence","daughter","degree","doctor","dot","dream","duty","essay","father","fee","finance","hour","juice","luck","milk","mouth","peace","pipe","stable","storm","substance","team","trick","afternoon","bat","beach","blank","catch","chain","consideration","tackle"];function OM(){return T2[C2(0,T2.length+1)]+"-"+A2[C2(0,A2.length+1)]}const j1=(t,e)=>typeof window!="undefined"?"scrollIntoViewIfNeeded"in document.body?t.scrollIntoViewIfNeeded(e):NX(t,e):()=>{};let N2=0;const Yc=typeof window!="undefined"&&window.requestAnimationFrame?window.requestAnimationFrame:function(t){var e=new Date().getTime(),n=Math.max(0,16-(e-N2)),r=window.setTimeout(function(){t(e+n)},n);return N2=e+n,r},TX=typeof window!="undefined"&&window.cancelAnimationFrame?window.cancelAnimationFrame:function(t){clearTimeout(t)},F1=typeof window!="undefined"&&window.requestIdleCallback?window.requestIdleCallback:function(t){var e=Date.now();return setTimeout(function(){t({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-e))}})},1)},ig=typeof window!="undefined"&&window.cancelIdleCallback?window.cancelIdleCallback:function(t){clearTimeout(t)};function AX(t){let e=[],n=null;const r=(...o)=>{e=o,!n&&(n=Yc(()=>{n=null,t(...e)}))};return r.cancel=()=>{if(n)TX(n),n=null;else return},r}function NX(t,e){e=arguments.length===0?!0:!!e;var n=t.parentNode,r=window.getComputedStyle(n,null),o=parseInt(r.getPropertyValue("border-top-width")),s=parseInt(r.getPropertyValue("border-left-width")),i=t.offsetTop-n.offsetTop<n.scrollTop,a=t.offsetTop-n.offsetTop+t.clientHeight-o>n.scrollTop+n.clientHeight,l=t.offsetLeft-n.offsetLeft<n.scrollLeft,c=t.offsetLeft-n.offsetLeft+t.clientWidth-s>n.scrollLeft+n.clientWidth,u=i&&!a;(i||a)&&e&&(n.scrollTop=t.offsetTop-n.offsetTop-n.clientHeight/2-o+t.clientHeight/2),(l||c)&&e&&(n.scrollLeft=t.offsetLeft-n.offsetLeft-n.clientWidth/2-s+t.clientWidth/2),(i||a||l||c)&&!e&&t.scrollIntoView(u)}async function PX(t){if(typeof navigator=="undefined"||!navigator.locks)return async()=>{};let e;const n=await new Promise((o,s)=>{e=navigator.locks.request(t,{ifAvailable:!0},async i=>{if(i===null){o(null);return}await new Promise(a=>{o(a)})}).catch(i=>{s(i)})});if(!n)return;const r=setTimeout(()=>{throw new Error(`Lock "${t}" held for too long! This is likely a bug.`)},60*1e3);return async()=>{n(),await e,clearTimeout(r)}}async function IM(){if(!(typeof navigator=="undefined"||!navigator.storage))return navigator.storage.getDirectory()}function OX(t=B1()){if(typeof document=="undefined")return;const e=document.getElementById("root"),n=document.body;t?(e==null||e.classList.add("BU_widescreen"),n.classList.add("BU_widescreen"),e==null||e.classList.remove("BU_smallscreen"),n.classList.remove("BU_smallscreen")):(e==null||e.classList.remove("BU_widescreen"),n.classList.remove("BU_widescreen"),e==null||e.classList.add("BU_smallscreen"),n.classList.add("BU_smallscreen"))}function B1(t=typeof window!="undefined"?window.innerWidth:void 0){return C_?!1:t?QY<=t:!1}function IX(t,e){if(typeof window=="undefined")return;const n=AX(()=>{t({width:window.innerWidth,height:window.innerHeight})});window.addEventListener("resize",n),e.addEventListener("abort",()=>{n.cancel(),window.removeEventListener("resize",n)},{once:!0})}function RX(t){if(typeof document=="undefined"){console.debug("applyTheme: document is undefined");return}if(YY){console.warn("changeColorScheme: Cannot apply change color scheme in storybook. Please use the switcher in the toolbar.");return}if(!t){console.debug("changeColorScheme: colorScheme is undefined");return}console.debug("changeColorScheme:",t),t===go.DARK?(document.body.classList.remove("light-scheme"),document.body.classList.add("dark-scheme")):t===go.LIGHT?(document.body.classList.remove("dark-scheme"),document.body.classList.add("light-scheme")):console.warn("changeColorSchemes: unknown theme",t)}function dRt(){return typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope}function fRt(){return typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope?"worker":"window"}function Xc(){if(typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope)throw new Error("Script cannot run in worker environment")}function ag(t){return Array.from({length:t},()=>{})}class MX{constructor(){M(this,"rootMap",new WeakMap)}get([e,n]){var r;return(r=this.rootMap.get(e))==null?void 0:r.get(n)}has([e,n]){let r=this.rootMap.get(e);return r===void 0?!1:r.has(n)}set([e,n],r){let o=this.rootMap.get(e);o===void 0&&(o=new WeakMap,this.rootMap.set(e,o)),o.set(n,r)}}function DX(t){return t[t.length-1]}function LX(t){const e=new MX;return(r,o)=>{let s=e.get([r,o]);return s!==void 0||(s=t(r,o),e.set([r,o],s)),s}}function Qc(t,e){const n=new WeakMap;return o=>{if(n.has(o))return e&&console.debug(e,"cache hit"),n.get(o);e&&console.debug(e,"cache miss");let s=t(o);return n.set(o,s),s}}function jX(t){try{return{success:!0,value:JSON.parse(t)}}catch(e){return{success:!1}}}function FX(t){try{return{success:!0,value:JSON.stringify(t)}}catch(e){return{success:!1}}}const RM=".md",N_=[RM];function BX(t){return N_.some(e=>t.endsWith(e))}function gr(t){return MM(t),t}function He(t,e=!0){return e&&dp(t),t}function lg(t){t.includes("/")&&(t=t.slice(t.lastIndexOf("/")+1));const e=t.lastIndexOf(".");return e===-1?void 0:t.slice(e)}function zX(t,e){return t.endsWith(e)?t:t+e}function P_(t){return zX(t,RM)}function $t(t){const e=t.lastIndexOf(".");return e===-1?t:t.slice(0,e)}function he(t,e=!1){e||(dp(t),LM(t));const[n,r]=jM(t),o=r.split("/"),s=DX(o);if(typeof s!="string")throw new Error("fileName undefined");const i=o.slice(0,o.length-1).filter(Boolean).join("/");return{wsPath:t,wsName:n,filePath:r,dirPath:i,fileName:s,fileNameWithoutExt:$t(s)}}function tt(t){const{wsName:e,fileName:n,filePath:r,dirPath:o,fileNameWithoutExt:s}=he(t,!0);return{wsName:gr(e),fileName:n,filePath:r,dirPath:o,fileNameWithoutExt:s}}class cr extends ge{}function qX(t){return!(!t||t.includes(":"))}function MM(t){if(t==="")throw new cr({message:'Invalid wsName "'+t+'" .'});if(t.includes(":"))throw new cr({message:'Invalid characters in  "'+t+'" .'})}function DM(t){if(!t||typeof t!="string"||t.split("/").some(o=>o.length===0))return!1;const[e,n,...r]=t.split(":");return!(r.length>0||!e||!n)}function O_(t){var n;if(!DM(t))return!1;const e=t.split("/");return!!((n=e[e.length-1])!=null&&n.includes("."))}function dp(t){if(t.split("/").some(o=>o.length===0))throw new cr({message:"Invalid path "+t});const[e,n,...r]=t.split(":");if(r.length>0)throw new cr({message:"Semicolon not allowed file path"});if(!DM(t))throw new cr({message:"Invalid wsPath "+t})}function LM(t){if(!O_(t))throw new cr({message:"Invalid wsPath "+t});dp(t)}function P2(t){if(LM(t),!Wr(t))throw new cr({message:`Bangle.io support the following file extensions for notes: ${N_.join(", ")}`})}function Wr(t){return t?BX(t):!1}function WX(t){return t.replace(/[^\w\s-\.]/g,"")}function I_(t,e){if(t.includes(":"))throw new cr({message:'Invalid character ":" in  "'+t+'" .'});t.startsWith("./")&&(t=t.slice(2));const{wsName:n,dirPath:r}=tt(e);let o="https://bangle.io";r&&(o+="/"+r+"/");let s=new URL(t,o).pathname;return s.startsWith("/")&&(s=s.slice(1)),fp(n,decodeURIComponent(s))}function VX(t,e){return He(I_(t,e))}const on=t=>{const{wsName:e,filePath:n}=he(t);return[e,n].join("/")};function R_(t){const[e,...n]=t.split("/");if(!(!e||e.includes(":")))return xf(e,n.join("/"))}function jM(t){const[e,n]=t.split(":");if(!e)throw new cr({message:"Invalid wsName"});if(!n)throw new cr({message:"Invalid filePath"});return[e,n]}function UX(t,e){const{wsName:n,dirPath:r}=tt(t);return fp(n,`${r}/${e}`)}function xf(t,e){return e.startsWith("/")&&(e=e.slice(1)),t+":"+e}function fp(t,e){return e.startsWith("/")&&(e=e.slice(1)),He(t+":"+e)}function HX(t,e){return t.length===e.length&&t.every((n,r)=>n==null&&e[r]==null?!0:n===e[r])}class ia{constructor(e){if(this._wsPaths=e,e.length!==Rr)throw new Error(`Only support ${Rr} editors opened at a time`);for(const n of e)typeof n=="string"&&dp(n)}static createEmpty(){const e=ag(Rr);return new ia(e)}static createFromArray(e){let n=Array.from({length:Rr},(r,o)=>e[o]||void 0);return new ia(n)}get miniEditorWsPath(){var e;return(e=this._wsPaths[fd])!=null?e:void 0}get miniEditorWsPath2(){var n;let e=(n=this._wsPaths[fd])!=null?n:void 0;return e?He(e,!1):void 0}get openCount(){let e=0;return this.forEachWsPath(n=>{n&&e++}),e}get popupEditorWsPath(){var e;return(e=this._wsPaths[pd])!=null?e:void 0}get popupEditorWsPath2(){var n;let e=(n=this._wsPaths[pd])!=null?n:void 0;return e?He(e,!1):void 0}get primaryWsPath(){var e;return(e=this._wsPaths[jn])!=null?e:void 0}get primaryWsPath2(){var n;let e=(n=this._wsPaths[jn])!=null?n:void 0;return e?He(e,!1):void 0}get secondaryWsPath(){var e;return(e=this._wsPaths[ri])!=null?e:void 0}get secondaryWsPath2(){var n;let e=(n=this._wsPaths[ri])!=null?n:void 0;return e?He(e,!1):void 0}allBelongToSameWsName(e){if(!this.hasSomeOpenedWsPaths())return!0;const n=this.getWsNames();return e==null?n.length===1:n.length===1&&e===n[0]}closeAll(){let e=ia.createEmpty();return e.equal(this)?this:e}closeIfFound(e){return this.updateIfFound(e,void 0)}equal(e){return!!HX(this._wsPaths,e._wsPaths)}find(e){let n=[];if(this.forEachWsPath((r,o)=>{r&&r===e&&n.push(o)}),n.length!==0)return n}forEachWsPath(e){this._wsPaths.forEach((n,r)=>{n&&e(n,r)})}getByIndex(e){if(e>=this._wsPaths.length)throw new Error("getByIndex: Out of bound operation");return this._wsPaths[e]}getByIndex2(e){let n=this.getByIndex(e);return n!=null?He(n):void 0}getOneWsName(){const e=this.getWsNames()[0];return e==null?e:gr(e)}getWsNames(){let e=new Set;return this.forEachWsPath(n=>{n&&e.add(he(n).wsName)}),[...e]}getWsPaths(){return Array.from(new Set(this.toArray().filter(e=>typeof e=="string")))}getWsPaths2(){return this.getWsPaths().map(e=>He(e,!1))}has(e){return e==null?!1:this._wsPaths.includes(e)}hasSomeOpenedWsPaths(){return this._wsPaths.some(e=>e!=null)}optimizeSpace(){return this.tryUpgradeSecondary()}toArray(){return Array.from(this._wsPaths).map(e=>e||null)}tryUpgradeSecondary(){const{secondaryWsPath:e,primaryWsPath:n}=this;return e!=null&&n==null?this.updatePrimaryWsPath(e).updateSecondaryWsPath(void 0):this}update(e){const n=e;return n.equal(this)?this:n}updateAllWsPaths(e){const n=ia.createFromArray(e);return n.equal(this)?this:n}updateByIndex(e,n){if(e>=this._wsPaths.length)throw new Error("updateByIndex: Out of bound operation");const r=this._wsPaths.slice(0);return r[e]=n,this.updateAllWsPaths(r)}updateIfFound(e,n){let r=this;return this.forEachWsPath((o,s)=>{e===o&&(r=r.updateByIndex(s,n))}),r}updateMiniEditorWsPath(e){return this.updateByIndex(fd,e)}updatePopupEditorWsPath(e){return this.updateByIndex(pd,e)}updatePrimaryWsPath(e){return this.updateByIndex(jn,e)}updateSecondaryWsPath(e){return this.updateByIndex(ri,e)}}var Be={};const KX="",GX="",ZX="",JX="",YX="",XX="",QX="",eQ="",tQ="",nQ="",rQ="",oQ="",sQ="",iQ="",aQ="",lQ="",cQ="",uQ="",dQ="",fQ="",pQ="",hQ="",mQ="",gQ="",yQ="",bQ="",vQ="&",wQ="&",xQ="",kQ="",_Q="",$Q="",EQ="",SQ="",CQ="",TQ="",AQ="",NQ="",PQ="",OQ="",IQ="",RQ="",MQ="",DQ="",LQ="",jQ="",FQ="",BQ="",zQ="",qQ="",WQ="",VQ="",UQ="",HQ="",KQ="",GQ="",ZQ="",JQ="",YQ="",XQ="",QQ="",eee="'",tee="",nee="",ree="",oee="",see="",iee="",aee="",lee="",cee="*",uee="",dee="",fee="",pee="",hee="",mee="",gee="",yee="",bee="",vee="",wee="",xee="",kee="",_ee="",$ee="",Eee="",See="",Cee="",Tee="",Aee="",Nee="",Pee="",Oee="",Iee="",Ree="",Mee="",Dee="",Lee="",jee="",Fee="",Bee="",zee="",qee="",Wee="",Vee="",Uee="",Hee="",Kee="",Gee="",Zee="",Jee="",Yee="",Xee="",Qee="",ete="",tte="",nte="",rte="",ote="",ste="",ite="",ate="",lte="",cte="",ute="",dte="",fte="",pte="",hte="",mte="",gte="",yte="",bte="",vte="=",wte="",xte="",kte="",_te="",$te="",Ete="",Ste="",Cte="",Tte="",Ate="",Nte="",Pte="",Ote="",Ite="",Rte="",Mte="",Dte="",Lte="",jte="",Fte="",Bte="",zte="",qte="",Wte="",Vte="",Ute="",Hte="",Kte="",Gte="",Zte="",Jte="",Yte="",Xte="",Qte="",ene="",tne="",nne="",rne="",one="",sne="",ine="",ane="",lne="",cne="",une="",dne="",fne="",pne="",hne="",mne="",gne="",yne="",bne="",vne="",wne="",xne="",kne="",_ne="",$ne="",Ene="",Sne="",Cne="",Tne="\\",Ane="",Nne="",Pne="",One="",Ine="",Rne="",Mne="",Dne="",Lne="",jne="",Fne="",Bne="",zne="",qne="",Wne="",Vne="",Une="",Hne="",Kne="",Gne="",Zne="",Jne="",Yne="",Xne="",Qne="",ere="",tre="",nre="",rre="",ore="",sre="",ire="",are="",lre="",cre="",ure="",dre="",fre="",pre="",hre="",mre="",gre="",yre="",bre="",vre="",wre="",xre="",kre="",_re="",$re="",Ere="",Sre="",Cre="",Tre="",Are="",Nre="",Pre="",Ore="",Ire="",Rre="",Mre="",Dre="",Lre="",jre="",Fre="",Bre="",zre="",qre="",Wre="",Vre="",Ure="",Hre="",Kre=":",Gre="",Zre="",Jre="",Yre="",Xre=",",Qre="@",eoe="",toe="",noe="",roe="",ooe="",soe="",ioe="",aoe="",loe="",coe="",uoe="",doe="",foe="",poe="",hoe="",moe="",goe="",yoe="",boe="",voe="",woe="",xoe="",koe="",_oe="",$oe="",Eoe="",Soe="",Coe="",Toe="",Aoe="",Noe="",Poe="",Ooe="",Ioe="",Roe="",Moe="",Doe="",Loe="",joe="",Foe="",Boe="",zoe="",qoe="",Woe="",Voe="",Uoe="",Hoe="",Koe="",Goe="",Zoe="",Joe="",Yoe="",Xoe="",Qoe="",ese="",tse="",nse="",rse="",ose="",sse="",ise="",ase="",lse="",cse="",use="",dse="",fse="",pse="",hse="",mse="",gse="",yse="",bse="",vse="",wse="",xse="",kse="",_se="",$se="",Ese="",Sse="",Cse="",Tse="",Ase="",Nse="",Pse="",Ose="",Ise="",Rse="",Mse="",Dse="",Lse="",jse="`",Fse="",Bse="",zse="",qse="",Wse="",Vse="",Use="",Hse="",Kse="",Gse="",Zse="",Jse="",Yse="",Xse="",Qse="",eie="",tie="",nie="",rie="$",oie="",sie="",iie="",aie="",lie="",cie="",uie="",die="",fie="",pie="",hie="",mie="",gie="",yie="",bie="",vie="",wie="",xie="",kie="",_ie="",$ie="",Eie="",Sie="",Cie="",Tie="",Aie="",Nie="",Pie="",Oie="",Iie="",Rie="",Mie="",Die="",Lie="",jie="",Fie="",Bie="",zie="",qie="",Wie="",Vie="",Uie="",Hie="",Kie="",Gie="",Zie="",Jie="",Yie="",Xie="",Qie="",eae="",tae="",nae="",rae="",oae="",sae="",iae="",aae="",lae="",cae="",uae="",dae="",fae="",pae="",hae="",mae="",gae="",yae="",bae="",vae="",wae="",xae="",kae="",_ae="",$ae="",Eae="",Sae="",Cae="",Tae="",Aae="",Nae="",Pae="",Oae="",Iae="",Rae="",Mae="",Dae="",Lae="",jae="",Fae="",Bae="",zae="",qae="",Wae="",Vae="",Uae="",Hae="",Kae="",Gae="",Zae="",Jae="",Yae="",Xae="",Qae="",ele="",tle="",nle="",rle="",ole="",sle="",ile="",ale="",lle="",cle="",ule="",dle="",fle="",ple="",hle="",mle="",gle="",yle="",ble="",vle="=",wle="",xle="",kle="",_le="",$le="",Ele="",Sle="",Cle="",Tle="",Ale="",Nle="",Ple="",Ole="",Ile="",Rle="",Mle="",Dle="",Lle="",jle="",Fle="",Ble="!",zle="",qle="",Wle="",Vle="",Ule="",Hle="",Kle="",Gle="",Zle="",Jle="",Yle="",Xle="",Qle="",ece="",tce="",nce="",rce="",oce="fj",sce="",ice="",ace="",lce="",cce="",uce="",dce="",fce="",pce="",hce="",mce="",gce="",yce="",bce="",vce="",wce="",xce="",kce="",_ce="",$ce="",Ece="",Sce="",Cce="",Tce="",Ace="",Nce="",Pce="",Oce="",Ice="",Rce="",Mce="",Dce="",Lce="",jce="",Fce="",Bce="",zce="",qce="",Wce="",Vce="",Uce="",Hce="",Kce="",Gce="",Zce="",Jce="",Yce="",Xce="",Qce="",eue="",tue="",nue="",rue="",oue="",sue="",iue="",aue="",lue="",cue="",uue="",due="",fue="",pue="",hue="",mue="",gue="",yue="",bue="",vue="",wue="",xue="",kue="",_ue="",$ue="",Eue="",Sue="",Cue="",Tue="",Aue="",Nue="",Pue="",Oue="`",Iue="",Rue="",Mue="",Due="",Lue="",jue="",Fue="",Bue="",zue="",que="",Wue="",Vue="",Uue="",Hue="",Kue=">",Gue=">",Zue="",Jue="",Yue="",Xue="",Que="",ede="",tde="",nde="",rde="",ode="",sde="",ide="",ade="",lde="",cde="",ude="",dde="",fde="",pde="",hde="",mde="",gde="",yde="",bde="^",vde="",wde="",xde="",kde="",_de="",$de="",Ede="",Sde="",Cde="",Tde="",Ade="",Nde="",Pde="",Ode="",Ide="",Rde="",Mde="",Dde="",Lde="",jde="",Fde="",Bde="",zde="",qde="",Wde="",Vde="",Ude="",Hde="",Kde="",Gde="",Zde="",Jde="",Yde="",Xde="",Qde="",efe="",tfe="",nfe="",rfe="",ofe="",sfe="",ife="",afe="",lfe="",cfe="",ufe="",dfe="",ffe="",pfe="",hfe="",mfe="",gfe="",yfe="",bfe="",vfe="",wfe="",xfe="",kfe="",_fe="",$fe="",Efe="",Sfe="",Cfe="",Tfe="",Afe="",Nfe="",Pfe="",Ofe="",Ife="",Rfe="",Mfe="",Dfe="",Lfe="",jfe="",Ffe="",Bfe="",zfe="",qfe="",Wfe="",Vfe="",Ufe="",Hfe="",Kfe="",Gfe="",Zfe="",Jfe="",Yfe="",Xfe="",Qfe="",epe="",tpe="",npe="",rpe="",ope="",spe="",ipe="",ape="",lpe="",cpe="",upe="",dpe="",fpe="",ppe="",hpe="",mpe="",gpe="",ype="",bpe="",vpe="",wpe="",xpe="",kpe="",_pe="",$pe="",Epe="",Spe="",Cpe="",Tpe="",Ape="",Npe="",Ppe="",Ope="",Ipe="",Rpe="",Mpe="",Dpe="",Lpe="",jpe="",Fpe="",Bpe="",zpe="",qpe="",Wpe="",Vpe="",Upe="",Hpe="",Kpe="",Gpe="",Zpe="",Jpe="",Ype="",Xpe="",Qpe="",ehe="",the="",nhe="",rhe="",ohe="",she="",ihe="",ahe="",lhe="",che="",uhe="",dhe="",fhe="",phe="",hhe="",mhe="",ghe="",yhe="",bhe="",vhe="",whe="",xhe="",khe="",_he="",$he="",Ehe="",She="{",Che="[",The="",Ahe="",Nhe="",Phe="",Ohe="",Ihe="",Rhe="",Mhe="",Dhe="{",Lhe="",jhe="",Fhe="",Bhe="",zhe="",qhe="",Whe="",Vhe="",Uhe="",Hhe="",Khe="",Ghe="",Zhe="",Jhe="",Yhe="",Xhe="",Qhe="",eme="",tme="",nme="",rme="",ome="",sme="",ime="",ame="",lme="",cme="",ume="",dme="",fme="",pme="",hme="",mme="",gme="",yme="",bme="",vme="",wme="",xme="",kme="",_me="",$me="",Eme="",Sme="",Cme="",Tme="",Ame="",Nme="",Pme="",Ome="",Ime="",Rme="",Mme="",Dme="",Lme="",jme="",Fme="",Bme="",zme="",qme="",Wme="",Vme="",Ume="",Hme="",Kme="",Gme="",Zme="",Jme="",Yme="",Xme="",Qme="",ege="",tge="",nge="",rge="",oge="",sge="",ige="",age="",lge="",cge="",uge="",dge="",fge="",pge="",hge="",mge="",gge="",yge="",bge="",vge="",wge="",xge="",kge="",_ge="",$ge="",Ege="",Sge="",Cge="",Tge="",Age="",Nge="",Pge="",Oge="",Ige="",Rge="",Mge="",Dge="",Lge="",jge="",Fge="",Bge="",zge="",qge="",Wge="",Vge="",Uge="",Hge="",Kge="",Gge="",Zge="",Jge="",Yge="_",Xge="",Qge="",e1e="",t1e="",n1e="",r1e="(",o1e="",s1e="",i1e="",a1e="",l1e="",c1e="",u1e="",d1e="",f1e="",p1e="",h1e="",m1e="",g1e="",y1e="",b1e="",v1e="[",w1e="",x1e="",k1e="",_1e="",$1e="",E1e="",S1e="<",C1e="<",T1e="",A1e="",N1e="",P1e="",O1e="",I1e="",R1e="",M1e="",D1e="",L1e="",j1e="",F1e="",B1e="",z1e="",q1e="",W1e="",V1e="",U1e="",H1e="",K1e="",G1e="",Z1e="",J1e="",Y1e="",X1e="",Q1e="",eye="",tye="",nye="",rye="",oye="",sye="",iye="",aye="",lye="",cye="",uye="*",dye="",fye="",pye="",hye="",mye="",gye="",yye="",bye="",vye="",wye="",xye="",kye="",_ye="",$ye="",Eye="",Sye="",Cye="",Tye="",Aye="",Nye="",Pye="",Oye="",Iye="",Rye="",Mye="",Dye="",Lye="",jye="",Fye="",Bye="",zye="",qye="",Wye="",Vye="",Uye="",Hye="",Kye="",Gye="",Zye="",Jye="",Yye="",Xye="",Qye="",ebe="",tbe="",nbe="",rbe="",obe="",sbe="",ibe="",abe="",lbe="",cbe="",ube="",dbe="",fbe="",pbe="",hbe="",mbe="",gbe="",ybe="",bbe="",vbe="",wbe=`
`,xbe="",kbe="",_be="",$be="",Ebe="",Sbe="",Cbe="",Tbe="",Abe="",Nbe="",Pbe="",Obe="",Ibe="",Rbe="",Mbe="",Dbe="",Lbe="",jbe="",Fbe="",Bbe="",zbe="",qbe="",Wbe="",Vbe="",Ube="",Hbe="",Kbe="",Gbe="",Zbe="",Jbe="",Ybe="",Xbe="",Qbe="",eve="",tve="",nve="",rve="",ove="",sve="",ive="",ave="",lve="",cve="",uve="",dve="",fve="",pve="",hve="",mve="",gve="",yve="",bve="",vve="",wve="",xve="",kve="",_ve="",$ve="",Eve="",Sve="",Cve="",Tve="",Ave="",Nve="",Pve="",Ove="",Ive="",Rve="",Mve="",Dve="",Lve="",jve="",Fve="",Bve="",zve="",qve="",Wve="",Vve="",Uve="",Hve="",Kve="",Gve="",Zve="",Jve="",Yve="",Xve="",Qve="",e0e="",t0e="",n0e="",r0e="",o0e="",s0e="",i0e="",a0e="",l0e="",c0e="",u0e="",d0e="",f0e="",p0e="",h0e="",m0e="",g0e="",y0e="",b0e="",v0e="",w0e="",x0e="",k0e="",_0e="",$0e="",E0e="",S0e="",C0e="",T0e="",A0e="",N0e="",P0e="",O0e="",I0e="",R0e="",M0e="",D0e="",L0e="",j0e="",F0e="",B0e="",z0e="",q0e="",W0e="",V0e="",U0e="",H0e="",K0e="",G0e="",Z0e="",J0e="",Y0e="",X0e="",Q0e="",ewe="",twe="",nwe="",rwe="",owe="",swe="",iwe="",awe="",lwe="",cwe="",uwe="",dwe="",fwe="",pwe="",hwe="",mwe="",gwe="",ywe="",bwe="",vwe="",wwe="",xwe="",kwe="",_we="",$we="",Ewe="",Swe="",Cwe="",Twe="",Awe="#",Nwe="",Pwe="",Owe="",Iwe="",Rwe="",Mwe="",Dwe="",Lwe="",jwe=">",Fwe="",Bwe="",zwe="",qwe="",Wwe="<",Vwe="",Uwe="",Hwe="",Kwe="",Gwe="",Zwe="",Jwe="",Ywe="",Xwe="",Qwe="",exe="",txe="",nxe="",rxe="",oxe="",sxe="",ixe="",axe="",lxe="",cxe="",uxe="",dxe="",fxe="",pxe="",hxe="",mxe="",gxe="",yxe="",bxe="",vxe="",wxe="",xxe="",kxe="",_xe="",$xe="",Exe="",Sxe="",Cxe="",Txe="",Axe="",Nxe="",Pxe="",Oxe="",Ixe="",Rxe="",Mxe="",Dxe="",Lxe="",jxe="",Fxe="",Bxe="",zxe="",qxe="",Wxe="",Vxe="",Uxe="",Hxe="",Kxe="",Gxe="",Zxe="",Jxe="",Yxe="",Xxe="",Qxe="",eke="",tke="",nke="",rke="",oke="",ske="",ike="",ake="",lke="",cke="",uke="",dke="",fke="",pke="",hke="",mke="",gke="",yke="",bke="",vke="",wke="",xke="",kke="",_ke="",$ke="",Eke="",Ske="",Cke="",Tke="",Ake="",Nke="%",Pke=".",Oke="",Ike="",Rke="",Mke="",Dke="",Lke="",jke="",Fke="",Bke="",zke="",qke="",Wke="",Vke="",Uke="",Hke="",Kke="",Gke="",Zke="",Jke="",Yke="",Xke="+",Qke="",e_e="",t_e="",n_e="",r_e="",o_e="",s_e="",i_e="",a_e="",l_e="",c_e="",u_e="",d_e="",f_e="",p_e="",h_e="",m_e="",g_e="",y_e="",b_e="",v_e="",w_e="",x_e="",k_e="",__e="",$_e="",E_e="",S_e="",C_e="",T_e="",A_e="",N_e="",P_e="",O_e="",I_e="",R_e="",M_e="",D_e="",L_e="",j_e="",F_e="",B_e="",z_e="",q_e="",W_e="",V_e="",U_e="",H_e="",K_e="",G_e="",Z_e="",J_e="",Y_e="",X_e="",Q_e="",e$e="",t$e="",n$e="",r$e="",o$e="",s$e="",i$e="",a$e="",l$e="?",c$e="",u$e='"',d$e='"',f$e="",p$e="",h$e="",m$e="",g$e="",y$e="",b$e="",v$e="",w$e="",x$e="",k$e="",_$e="",$$e="",E$e="",S$e="",C$e="",T$e="",A$e="",N$e="",P$e="",O$e="",I$e="",R$e="",M$e="",D$e="",L$e="",j$e="",F$e="",B$e="",z$e="",q$e="",W$e="",V$e="",U$e="",H$e="",K$e="}",G$e="]",Z$e="",J$e="",Y$e="",X$e="",Q$e="",eEe="",tEe="",nEe="",rEe="}",oEe="",sEe="",iEe="",aEe="",lEe="",cEe="",uEe="",dEe="",fEe="",pEe="",hEe="",mEe="",gEe="",yEe="",bEe="",vEe="",wEe="",xEe="",kEe="",_Ee="",$Ee="",EEe="",SEe="",CEe="",TEe="",AEe="",NEe="",PEe="",OEe="",IEe="",REe="",MEe="",DEe="",LEe="",jEe="",FEe="",BEe="",zEe="",qEe="",WEe="",VEe="",UEe="",HEe="",KEe="",GEe="",ZEe="",JEe="",YEe="",XEe="",QEe="",eSe="",tSe="",nSe="",rSe="",oSe="",sSe="",iSe="",aSe="",lSe="",cSe="",uSe="",dSe="",fSe="",pSe="",hSe="",mSe="",gSe="",ySe="",bSe="",vSe="",wSe="",xSe="",kSe="",_Se="",$Se="",ESe="",SSe="",CSe="",TSe=")",ASe="",NSe="",PSe="",OSe="",ISe="",RSe="",MSe="",DSe="",LSe="",jSe="]",FSe="",BSe="",zSe="",qSe="",WSe="",VSe="",USe="",HSe="",KSe="",GSe="",ZSe="",JSe="",YSe="",XSe="",QSe="",eCe="",tCe="",nCe="",rCe="",oCe="",sCe="",iCe="",aCe="",lCe="",cCe="",uCe="",dCe="",fCe="",pCe="",hCe="",mCe="",gCe="",yCe="",bCe="",vCe="",wCe="",xCe="",kCe="",_Ce="",$Ce="",ECe="",SCe=";",CCe="",TCe="",ACe="",NCe="",PCe="",OCe="",ICe="",RCe="",MCe="",DCe="",LCe="",jCe="",FCe="",BCe="",zCe="",qCe="",WCe="",VCe="",UCe="",HCe="",KCe="",GCe="",ZCe="",JCe="",YCe="",XCe="",QCe="",e2e="",t2e="",n2e="",r2e="",o2e="",s2e="",i2e="",a2e="",l2e="",c2e="",u2e="",d2e="",f2e="",p2e="",h2e="",m2e="",g2e="",y2e="",b2e="",v2e="",w2e="",x2e="/",k2e="",_2e="",$2e="",E2e="",S2e="",C2e="",T2e="",A2e="",N2e="",P2e="",O2e="",I2e="",R2e="",M2e="",D2e="",L2e="",j2e="",F2e="",B2e="",z2e="",q2e="",W2e="",V2e="",U2e="",H2e="",K2e="",G2e="",Z2e="",J2e="",Y2e="",X2e="",Q2e="",eTe="",tTe="",nTe="",rTe="",oTe="",sTe="",iTe="",aTe="",lTe="",cTe="",uTe="",dTe="",fTe="",pTe="",hTe="",mTe="",gTe="",yTe="",bTe="",vTe="",wTe="",xTe="",kTe="",_Te="",$Te="",ETe="",STe="",CTe="",TTe="",ATe="",NTe="",PTe="",OTe="",ITe="",RTe="",MTe="",DTe="",LTe="",jTe="",FTe="",BTe="",zTe="",qTe="",WTe="",VTe="",UTe="",HTe="",KTe="",GTe="",ZTe="",JTe="",YTe="",XTe="",QTe="",eAe="",tAe="",nAe="",rAe="",oAe="",sAe="",iAe="",aAe="",lAe="",cAe="",uAe="",dAe="",fAe="",pAe="",hAe="",mAe="",gAe="",yAe="",bAe="",vAe="",wAe="",xAe="",kAe="",_Ae="",$Ae="",EAe="",SAe="	",CAe="",TAe="",AAe="",NAe="",PAe="",OAe="",IAe="",RAe="",MAe="",DAe="",LAe="",jAe="",FAe="",BAe="",zAe="",qAe="",WAe="",VAe="",UAe="",HAe="",KAe="",GAe="",ZAe="",JAe="",YAe="",XAe="",QAe="",eNe="",tNe="",nNe="",rNe="",oNe="",sNe="",iNe="",aNe="",lNe="",cNe="",uNe="",dNe="",fNe="",pNe="",hNe="",mNe="",gNe="",yNe="",bNe="",vNe="",wNe="",xNe="",kNe="",_Ne="",$Ne="",ENe="",SNe="",CNe="",TNe="",ANe="",NNe="",PNe="",ONe="",INe="",RNe="",MNe="",DNe="",LNe="",jNe="",FNe="",BNe="",zNe="",qNe="",WNe="",VNe="",UNe="",HNe="",KNe="",GNe="",ZNe="",JNe="",YNe="",XNe="",QNe="",ePe="",tPe="",nPe="",rPe="",oPe="",sPe="",iPe="",aPe="",lPe="",cPe="",uPe="",dPe="",fPe="",pPe="",hPe="",mPe="",gPe="",yPe="",bPe="",vPe="",wPe="",xPe="",kPe="",_Pe="",$Pe="",EPe="",SPe="",CPe="",TPe="",APe="",NPe="_",PPe="",OPe="",IPe="",RPe="",MPe="",DPe="",LPe="",jPe="",FPe="",BPe="",zPe="",qPe="",WPe="",VPe="",UPe="",HPe="",KPe="",GPe="",ZPe="",JPe="",YPe="",XPe="",QPe="",eOe="",tOe="",nOe="",rOe="",oOe="",sOe="",iOe="",aOe="",lOe="",cOe="",uOe="",dOe="",fOe="",pOe="",hOe="",mOe="",gOe="",yOe="",bOe="",vOe="",wOe="",xOe="",kOe="",_Oe="",$Oe="",EOe="",SOe="",COe="",TOe="",AOe="",NOe="",POe="",OOe="",IOe="",ROe="",MOe="",DOe="",LOe="",jOe="",FOe="",BOe="",zOe="",qOe="",WOe="",VOe="",UOe="",HOe="",KOe="",GOe="",ZOe="",JOe="",YOe="",XOe="",QOe="",eIe="",tIe="",nIe="",rIe="",oIe="|",sIe="",iIe="|",aIe="",lIe="",cIe="|",uIe="",dIe="",fIe="",pIe="",hIe="",mIe="",gIe="",yIe="",bIe="",vIe="",wIe="",xIe="",kIe="",_Ie="",$Ie="",EIe="",SIe="",CIe="",TIe="",AIe="",NIe="",PIe="",OIe="",IIe="",RIe="",MIe="",DIe="",LIe="",jIe="",FIe="",BIe="",zIe="",qIe="",WIe="",VIe="",UIe="",HIe="",KIe="",GIe="",ZIe="",JIe="",YIe="",XIe="",QIe="",eRe="",tRe="",nRe="",rRe="",oRe="",sRe="",iRe="",aRe="",lRe="",cRe="",uRe="",dRe="",fRe="",pRe="",hRe="",mRe="",gRe="",yRe="",bRe="",vRe="",wRe="",xRe="",kRe="",_Re="",$Re="",ERe="",SRe="",CRe="",TRe="",ARe="",NRe="",PRe="",ORe="",IRe="",RRe="",MRe="",DRe="",LRe="",jRe="",FRe="",BRe="",zRe="",qRe="",WRe="",VRe="",URe="",HRe="",KRe="",GRe="",ZRe="",JRe="",YRe="",XRe="",QRe="",e3e="",t3e="",n3e="",r3e="",o3e="",s3e="",i3e="",a3e="",l3e="",c3e="",u3e={Aacute:KX,aacute:GX,Abreve:ZX,abreve:JX,ac:YX,acd:XX,acE:QX,Acirc:eQ,acirc:tQ,acute:nQ,Acy:rQ,acy:oQ,AElig:sQ,aelig:iQ,af:aQ,Afr:lQ,afr:cQ,Agrave:uQ,agrave:dQ,alefsym:fQ,aleph:pQ,Alpha:hQ,alpha:mQ,Amacr:gQ,amacr:yQ,amalg:bQ,amp:vQ,AMP:wQ,andand:xQ,And:kQ,and:_Q,andd:$Q,andslope:EQ,andv:SQ,ang:CQ,ange:TQ,angle:AQ,angmsdaa:NQ,angmsdab:PQ,angmsdac:OQ,angmsdad:IQ,angmsdae:RQ,angmsdaf:MQ,angmsdag:DQ,angmsdah:LQ,angmsd:jQ,angrt:FQ,angrtvb:BQ,angrtvbd:zQ,angsph:qQ,angst:WQ,angzarr:VQ,Aogon:UQ,aogon:HQ,Aopf:KQ,aopf:GQ,apacir:ZQ,ap:JQ,apE:YQ,ape:XQ,apid:QQ,apos:eee,ApplyFunction:tee,approx:nee,approxeq:ree,Aring:oee,aring:see,Ascr:iee,ascr:aee,Assign:lee,ast:cee,asymp:uee,asympeq:dee,Atilde:fee,atilde:pee,Auml:hee,auml:mee,awconint:gee,awint:yee,backcong:bee,backepsilon:vee,backprime:wee,backsim:xee,backsimeq:kee,Backslash:_ee,Barv:$ee,barvee:Eee,barwed:See,Barwed:Cee,barwedge:Tee,bbrk:Aee,bbrktbrk:Nee,bcong:Pee,Bcy:Oee,bcy:Iee,bdquo:Ree,becaus:Mee,because:Dee,Because:Lee,bemptyv:jee,bepsi:Fee,bernou:Bee,Bernoullis:zee,Beta:qee,beta:Wee,beth:Vee,between:Uee,Bfr:Hee,bfr:Kee,bigcap:Gee,bigcirc:Zee,bigcup:Jee,bigodot:Yee,bigoplus:Xee,bigotimes:Qee,bigsqcup:ete,bigstar:tte,bigtriangledown:nte,bigtriangleup:rte,biguplus:ote,bigvee:ste,bigwedge:ite,bkarow:ate,blacklozenge:lte,blacksquare:cte,blacktriangle:ute,blacktriangledown:dte,blacktriangleleft:fte,blacktriangleright:pte,blank:hte,blk12:mte,blk14:gte,blk34:yte,block:bte,bne:vte,bnequiv:wte,bNot:xte,bnot:kte,Bopf:_te,bopf:$te,bot:Ete,bottom:Ste,bowtie:Cte,boxbox:Tte,boxdl:Ate,boxdL:Nte,boxDl:Pte,boxDL:Ote,boxdr:Ite,boxdR:Rte,boxDr:Mte,boxDR:Dte,boxh:Lte,boxH:jte,boxhd:Fte,boxHd:Bte,boxhD:zte,boxHD:qte,boxhu:Wte,boxHu:Vte,boxhU:Ute,boxHU:Hte,boxminus:Kte,boxplus:Gte,boxtimes:Zte,boxul:Jte,boxuL:Yte,boxUl:Xte,boxUL:Qte,boxur:ene,boxuR:tne,boxUr:nne,boxUR:rne,boxv:one,boxV:sne,boxvh:ine,boxvH:ane,boxVh:lne,boxVH:cne,boxvl:une,boxvL:dne,boxVl:fne,boxVL:pne,boxvr:hne,boxvR:mne,boxVr:gne,boxVR:yne,bprime:bne,breve:vne,Breve:wne,brvbar:xne,bscr:kne,Bscr:_ne,bsemi:$ne,bsim:Ene,bsime:Sne,bsolb:Cne,bsol:Tne,bsolhsub:Ane,bull:Nne,bullet:Pne,bump:One,bumpE:Ine,bumpe:Rne,Bumpeq:Mne,bumpeq:Dne,Cacute:Lne,cacute:jne,capand:Fne,capbrcup:Bne,capcap:zne,cap:qne,Cap:Wne,capcup:Vne,capdot:Une,CapitalDifferentialD:Hne,caps:Kne,caret:Gne,caron:Zne,Cayleys:Jne,ccaps:Yne,Ccaron:Xne,ccaron:Qne,Ccedil:ere,ccedil:tre,Ccirc:nre,ccirc:rre,Cconint:ore,ccups:sre,ccupssm:ire,Cdot:are,cdot:lre,cedil:cre,Cedilla:ure,cemptyv:dre,cent:fre,centerdot:pre,CenterDot:hre,cfr:mre,Cfr:gre,CHcy:yre,chcy:bre,check:vre,checkmark:wre,Chi:xre,chi:kre,circ:_re,circeq:$re,circlearrowleft:Ere,circlearrowright:Sre,circledast:Cre,circledcirc:Tre,circleddash:Are,CircleDot:Nre,circledR:Pre,circledS:Ore,CircleMinus:Ire,CirclePlus:Rre,CircleTimes:Mre,cir:Dre,cirE:Lre,cire:jre,cirfnint:Fre,cirmid:Bre,cirscir:zre,ClockwiseContourIntegral:qre,CloseCurlyDoubleQuote:Wre,CloseCurlyQuote:Vre,clubs:Ure,clubsuit:Hre,colon:Kre,Colon:Gre,Colone:Zre,colone:Jre,coloneq:Yre,comma:Xre,commat:Qre,comp:eoe,compfn:toe,complement:noe,complexes:roe,cong:ooe,congdot:soe,Congruent:ioe,conint:aoe,Conint:loe,ContourIntegral:coe,copf:uoe,Copf:doe,coprod:foe,Coproduct:poe,copy:hoe,COPY:moe,copysr:goe,CounterClockwiseContourIntegral:yoe,crarr:boe,cross:voe,Cross:woe,Cscr:xoe,cscr:koe,csub:_oe,csube:$oe,csup:Eoe,csupe:Soe,ctdot:Coe,cudarrl:Toe,cudarrr:Aoe,cuepr:Noe,cuesc:Poe,cularr:Ooe,cularrp:Ioe,cupbrcap:Roe,cupcap:Moe,CupCap:Doe,cup:Loe,Cup:joe,cupcup:Foe,cupdot:Boe,cupor:zoe,cups:qoe,curarr:Woe,curarrm:Voe,curlyeqprec:Uoe,curlyeqsucc:Hoe,curlyvee:Koe,curlywedge:Goe,curren:Zoe,curvearrowleft:Joe,curvearrowright:Yoe,cuvee:Xoe,cuwed:Qoe,cwconint:ese,cwint:tse,cylcty:nse,dagger:rse,Dagger:ose,daleth:sse,darr:ise,Darr:ase,dArr:lse,dash:cse,Dashv:use,dashv:dse,dbkarow:fse,dblac:pse,Dcaron:hse,dcaron:mse,Dcy:gse,dcy:yse,ddagger:bse,ddarr:vse,DD:wse,dd:xse,DDotrahd:kse,ddotseq:_se,deg:$se,Del:Ese,Delta:Sse,delta:Cse,demptyv:Tse,dfisht:Ase,Dfr:Nse,dfr:Pse,dHar:Ose,dharl:Ise,dharr:Rse,DiacriticalAcute:Mse,DiacriticalDot:Dse,DiacriticalDoubleAcute:Lse,DiacriticalGrave:jse,DiacriticalTilde:Fse,diam:Bse,diamond:zse,Diamond:qse,diamondsuit:Wse,diams:Vse,die:Use,DifferentialD:Hse,digamma:Kse,disin:Gse,div:Zse,divide:Jse,divideontimes:Yse,divonx:Xse,DJcy:Qse,djcy:eie,dlcorn:tie,dlcrop:nie,dollar:rie,Dopf:oie,dopf:sie,Dot:iie,dot:aie,DotDot:lie,doteq:cie,doteqdot:uie,DotEqual:die,dotminus:fie,dotplus:pie,dotsquare:hie,doublebarwedge:mie,DoubleContourIntegral:gie,DoubleDot:yie,DoubleDownArrow:bie,DoubleLeftArrow:vie,DoubleLeftRightArrow:wie,DoubleLeftTee:xie,DoubleLongLeftArrow:kie,DoubleLongLeftRightArrow:_ie,DoubleLongRightArrow:$ie,DoubleRightArrow:Eie,DoubleRightTee:Sie,DoubleUpArrow:Cie,DoubleUpDownArrow:Tie,DoubleVerticalBar:Aie,DownArrowBar:Nie,downarrow:Pie,DownArrow:Oie,Downarrow:Iie,DownArrowUpArrow:Rie,DownBreve:Mie,downdownarrows:Die,downharpoonleft:Lie,downharpoonright:jie,DownLeftRightVector:Fie,DownLeftTeeVector:Bie,DownLeftVectorBar:zie,DownLeftVector:qie,DownRightTeeVector:Wie,DownRightVectorBar:Vie,DownRightVector:Uie,DownTeeArrow:Hie,DownTee:Kie,drbkarow:Gie,drcorn:Zie,drcrop:Jie,Dscr:Yie,dscr:Xie,DScy:Qie,dscy:eae,dsol:tae,Dstrok:nae,dstrok:rae,dtdot:oae,dtri:sae,dtrif:iae,duarr:aae,duhar:lae,dwangle:cae,DZcy:uae,dzcy:dae,dzigrarr:fae,Eacute:pae,eacute:hae,easter:mae,Ecaron:gae,ecaron:yae,Ecirc:bae,ecirc:vae,ecir:wae,ecolon:xae,Ecy:kae,ecy:_ae,eDDot:$ae,Edot:Eae,edot:Sae,eDot:Cae,ee:Tae,efDot:Aae,Efr:Nae,efr:Pae,eg:Oae,Egrave:Iae,egrave:Rae,egs:Mae,egsdot:Dae,el:Lae,Element:jae,elinters:Fae,ell:Bae,els:zae,elsdot:qae,Emacr:Wae,emacr:Vae,empty:Uae,emptyset:Hae,EmptySmallSquare:Kae,emptyv:Gae,EmptyVerySmallSquare:Zae,emsp13:Jae,emsp14:Yae,emsp:Xae,ENG:Qae,eng:ele,ensp:tle,Eogon:nle,eogon:rle,Eopf:ole,eopf:sle,epar:ile,eparsl:ale,eplus:lle,epsi:cle,Epsilon:ule,epsilon:dle,epsiv:fle,eqcirc:ple,eqcolon:hle,eqsim:mle,eqslantgtr:gle,eqslantless:yle,Equal:ble,equals:vle,EqualTilde:wle,equest:xle,Equilibrium:kle,equiv:_le,equivDD:$le,eqvparsl:Ele,erarr:Sle,erDot:Cle,escr:Tle,Escr:Ale,esdot:Nle,Esim:Ple,esim:Ole,Eta:Ile,eta:Rle,ETH:Mle,eth:Dle,Euml:Lle,euml:jle,euro:Fle,excl:Ble,exist:zle,Exists:qle,expectation:Wle,exponentiale:Vle,ExponentialE:Ule,fallingdotseq:Hle,Fcy:Kle,fcy:Gle,female:Zle,ffilig:Jle,fflig:Yle,ffllig:Xle,Ffr:Qle,ffr:ece,filig:tce,FilledSmallSquare:nce,FilledVerySmallSquare:rce,fjlig:oce,flat:sce,fllig:ice,fltns:ace,fnof:lce,Fopf:cce,fopf:uce,forall:dce,ForAll:fce,fork:pce,forkv:hce,Fouriertrf:mce,fpartint:gce,frac12:yce,frac13:bce,frac14:vce,frac15:wce,frac16:xce,frac18:kce,frac23:_ce,frac25:$ce,frac34:Ece,frac35:Sce,frac38:Cce,frac45:Tce,frac56:Ace,frac58:Nce,frac78:Pce,frasl:Oce,frown:Ice,fscr:Rce,Fscr:Mce,gacute:Dce,Gamma:Lce,gamma:jce,Gammad:Fce,gammad:Bce,gap:zce,Gbreve:qce,gbreve:Wce,Gcedil:Vce,Gcirc:Uce,gcirc:Hce,Gcy:Kce,gcy:Gce,Gdot:Zce,gdot:Jce,ge:Yce,gE:Xce,gEl:Qce,gel:eue,geq:tue,geqq:nue,geqslant:rue,gescc:oue,ges:sue,gesdot:iue,gesdoto:aue,gesdotol:lue,gesl:cue,gesles:uue,Gfr:due,gfr:fue,gg:pue,Gg:hue,ggg:mue,gimel:gue,GJcy:yue,gjcy:bue,gla:vue,gl:wue,glE:xue,glj:kue,gnap:_ue,gnapprox:$ue,gne:Eue,gnE:Sue,gneq:Cue,gneqq:Tue,gnsim:Aue,Gopf:Nue,gopf:Pue,grave:Oue,GreaterEqual:Iue,GreaterEqualLess:Rue,GreaterFullEqual:Mue,GreaterGreater:Due,GreaterLess:Lue,GreaterSlantEqual:jue,GreaterTilde:Fue,Gscr:Bue,gscr:zue,gsim:que,gsime:Wue,gsiml:Vue,gtcc:Uue,gtcir:Hue,gt:Kue,GT:Gue,Gt:Zue,gtdot:Jue,gtlPar:Yue,gtquest:Xue,gtrapprox:Que,gtrarr:ede,gtrdot:tde,gtreqless:nde,gtreqqless:rde,gtrless:ode,gtrsim:sde,gvertneqq:ide,gvnE:ade,Hacek:lde,hairsp:cde,half:ude,hamilt:dde,HARDcy:fde,hardcy:pde,harrcir:hde,harr:mde,hArr:gde,harrw:yde,Hat:bde,hbar:vde,Hcirc:wde,hcirc:xde,hearts:kde,heartsuit:_de,hellip:$de,hercon:Ede,hfr:Sde,Hfr:Cde,HilbertSpace:Tde,hksearow:Ade,hkswarow:Nde,hoarr:Pde,homtht:Ode,hookleftarrow:Ide,hookrightarrow:Rde,hopf:Mde,Hopf:Dde,horbar:Lde,HorizontalLine:jde,hscr:Fde,Hscr:Bde,hslash:zde,Hstrok:qde,hstrok:Wde,HumpDownHump:Vde,HumpEqual:Ude,hybull:Hde,hyphen:Kde,Iacute:Gde,iacute:Zde,ic:Jde,Icirc:Yde,icirc:Xde,Icy:Qde,icy:efe,Idot:tfe,IEcy:nfe,iecy:rfe,iexcl:ofe,iff:sfe,ifr:ife,Ifr:afe,Igrave:lfe,igrave:cfe,ii:ufe,iiiint:dfe,iiint:ffe,iinfin:pfe,iiota:hfe,IJlig:mfe,ijlig:gfe,Imacr:yfe,imacr:bfe,image:vfe,ImaginaryI:wfe,imagline:xfe,imagpart:kfe,imath:_fe,Im:$fe,imof:Efe,imped:Sfe,Implies:Cfe,incare:Tfe,in:"",infin:Afe,infintie:Nfe,inodot:Pfe,intcal:Ofe,int:Ife,Int:Rfe,integers:Mfe,Integral:Dfe,intercal:Lfe,Intersection:jfe,intlarhk:Ffe,intprod:Bfe,InvisibleComma:zfe,InvisibleTimes:qfe,IOcy:Wfe,iocy:Vfe,Iogon:Ufe,iogon:Hfe,Iopf:Kfe,iopf:Gfe,Iota:Zfe,iota:Jfe,iprod:Yfe,iquest:Xfe,iscr:Qfe,Iscr:epe,isin:tpe,isindot:npe,isinE:rpe,isins:ope,isinsv:spe,isinv:ipe,it:ape,Itilde:lpe,itilde:cpe,Iukcy:upe,iukcy:dpe,Iuml:fpe,iuml:ppe,Jcirc:hpe,jcirc:mpe,Jcy:gpe,jcy:ype,Jfr:bpe,jfr:vpe,jmath:wpe,Jopf:xpe,jopf:kpe,Jscr:_pe,jscr:$pe,Jsercy:Epe,jsercy:Spe,Jukcy:Cpe,jukcy:Tpe,Kappa:Ape,kappa:Npe,kappav:Ppe,Kcedil:Ope,kcedil:Ipe,Kcy:Rpe,kcy:Mpe,Kfr:Dpe,kfr:Lpe,kgreen:jpe,KHcy:Fpe,khcy:Bpe,KJcy:zpe,kjcy:qpe,Kopf:Wpe,kopf:Vpe,Kscr:Upe,kscr:Hpe,lAarr:Kpe,Lacute:Gpe,lacute:Zpe,laemptyv:Jpe,lagran:Ype,Lambda:Xpe,lambda:Qpe,lang:ehe,Lang:the,langd:nhe,langle:rhe,lap:ohe,Laplacetrf:she,laquo:ihe,larrb:ahe,larrbfs:lhe,larr:che,Larr:uhe,lArr:dhe,larrfs:fhe,larrhk:phe,larrlp:hhe,larrpl:mhe,larrsim:ghe,larrtl:yhe,latail:bhe,lAtail:vhe,lat:whe,late:xhe,lates:khe,lbarr:_he,lBarr:$he,lbbrk:Ehe,lbrace:She,lbrack:Che,lbrke:The,lbrksld:Ahe,lbrkslu:Nhe,Lcaron:Phe,lcaron:Ohe,Lcedil:Ihe,lcedil:Rhe,lceil:Mhe,lcub:Dhe,Lcy:Lhe,lcy:jhe,ldca:Fhe,ldquo:Bhe,ldquor:zhe,ldrdhar:qhe,ldrushar:Whe,ldsh:Vhe,le:Uhe,lE:Hhe,LeftAngleBracket:Khe,LeftArrowBar:Ghe,leftarrow:Zhe,LeftArrow:Jhe,Leftarrow:Yhe,LeftArrowRightArrow:Xhe,leftarrowtail:Qhe,LeftCeiling:eme,LeftDoubleBracket:tme,LeftDownTeeVector:nme,LeftDownVectorBar:rme,LeftDownVector:ome,LeftFloor:sme,leftharpoondown:ime,leftharpoonup:ame,leftleftarrows:lme,leftrightarrow:cme,LeftRightArrow:ume,Leftrightarrow:dme,leftrightarrows:fme,leftrightharpoons:pme,leftrightsquigarrow:hme,LeftRightVector:mme,LeftTeeArrow:gme,LeftTee:yme,LeftTeeVector:bme,leftthreetimes:vme,LeftTriangleBar:wme,LeftTriangle:xme,LeftTriangleEqual:kme,LeftUpDownVector:_me,LeftUpTeeVector:$me,LeftUpVectorBar:Eme,LeftUpVector:Sme,LeftVectorBar:Cme,LeftVector:Tme,lEg:Ame,leg:Nme,leq:Pme,leqq:Ome,leqslant:Ime,lescc:Rme,les:Mme,lesdot:Dme,lesdoto:Lme,lesdotor:jme,lesg:Fme,lesges:Bme,lessapprox:zme,lessdot:qme,lesseqgtr:Wme,lesseqqgtr:Vme,LessEqualGreater:Ume,LessFullEqual:Hme,LessGreater:Kme,lessgtr:Gme,LessLess:Zme,lesssim:Jme,LessSlantEqual:Yme,LessTilde:Xme,lfisht:Qme,lfloor:ege,Lfr:tge,lfr:nge,lg:rge,lgE:oge,lHar:sge,lhard:ige,lharu:age,lharul:lge,lhblk:cge,LJcy:uge,ljcy:dge,llarr:fge,ll:pge,Ll:hge,llcorner:mge,Lleftarrow:gge,llhard:yge,lltri:bge,Lmidot:vge,lmidot:wge,lmoustache:xge,lmoust:kge,lnap:_ge,lnapprox:$ge,lne:Ege,lnE:Sge,lneq:Cge,lneqq:Tge,lnsim:Age,loang:Nge,loarr:Pge,lobrk:Oge,longleftarrow:Ige,LongLeftArrow:Rge,Longleftarrow:Mge,longleftrightarrow:Dge,LongLeftRightArrow:Lge,Longleftrightarrow:jge,longmapsto:Fge,longrightarrow:Bge,LongRightArrow:zge,Longrightarrow:qge,looparrowleft:Wge,looparrowright:Vge,lopar:Uge,Lopf:Hge,lopf:Kge,loplus:Gge,lotimes:Zge,lowast:Jge,lowbar:Yge,LowerLeftArrow:Xge,LowerRightArrow:Qge,loz:e1e,lozenge:t1e,lozf:n1e,lpar:r1e,lparlt:o1e,lrarr:s1e,lrcorner:i1e,lrhar:a1e,lrhard:l1e,lrm:c1e,lrtri:u1e,lsaquo:d1e,lscr:f1e,Lscr:p1e,lsh:h1e,Lsh:m1e,lsim:g1e,lsime:y1e,lsimg:b1e,lsqb:v1e,lsquo:w1e,lsquor:x1e,Lstrok:k1e,lstrok:_1e,ltcc:$1e,ltcir:E1e,lt:S1e,LT:C1e,Lt:T1e,ltdot:A1e,lthree:N1e,ltimes:P1e,ltlarr:O1e,ltquest:I1e,ltri:R1e,ltrie:M1e,ltrif:D1e,ltrPar:L1e,lurdshar:j1e,luruhar:F1e,lvertneqq:B1e,lvnE:z1e,macr:q1e,male:W1e,malt:V1e,maltese:U1e,Map:"",map:H1e,mapsto:K1e,mapstodown:G1e,mapstoleft:Z1e,mapstoup:J1e,marker:Y1e,mcomma:X1e,Mcy:Q1e,mcy:eye,mdash:tye,mDDot:nye,measuredangle:rye,MediumSpace:oye,Mellintrf:sye,Mfr:iye,mfr:aye,mho:lye,micro:cye,midast:uye,midcir:dye,mid:fye,middot:pye,minusb:hye,minus:mye,minusd:gye,minusdu:yye,MinusPlus:bye,mlcp:vye,mldr:wye,mnplus:xye,models:kye,Mopf:_ye,mopf:$ye,mp:Eye,mscr:Sye,Mscr:Cye,mstpos:Tye,Mu:Aye,mu:Nye,multimap:Pye,mumap:Oye,nabla:Iye,Nacute:Rye,nacute:Mye,nang:Dye,nap:Lye,napE:jye,napid:Fye,napos:Bye,napprox:zye,natural:qye,naturals:Wye,natur:Vye,nbsp:Uye,nbump:Hye,nbumpe:Kye,ncap:Gye,Ncaron:Zye,ncaron:Jye,Ncedil:Yye,ncedil:Xye,ncong:Qye,ncongdot:ebe,ncup:tbe,Ncy:nbe,ncy:rbe,ndash:obe,nearhk:sbe,nearr:ibe,neArr:abe,nearrow:lbe,ne:cbe,nedot:ube,NegativeMediumSpace:dbe,NegativeThickSpace:fbe,NegativeThinSpace:pbe,NegativeVeryThinSpace:hbe,nequiv:mbe,nesear:gbe,nesim:ybe,NestedGreaterGreater:bbe,NestedLessLess:vbe,NewLine:wbe,nexist:xbe,nexists:kbe,Nfr:_be,nfr:$be,ngE:Ebe,nge:Sbe,ngeq:Cbe,ngeqq:Tbe,ngeqslant:Abe,nges:Nbe,nGg:Pbe,ngsim:Obe,nGt:Ibe,ngt:Rbe,ngtr:Mbe,nGtv:Dbe,nharr:Lbe,nhArr:jbe,nhpar:Fbe,ni:Bbe,nis:zbe,nisd:qbe,niv:Wbe,NJcy:Vbe,njcy:Ube,nlarr:Hbe,nlArr:Kbe,nldr:Gbe,nlE:Zbe,nle:Jbe,nleftarrow:Ybe,nLeftarrow:Xbe,nleftrightarrow:Qbe,nLeftrightarrow:eve,nleq:tve,nleqq:nve,nleqslant:rve,nles:ove,nless:sve,nLl:ive,nlsim:ave,nLt:lve,nlt:cve,nltri:uve,nltrie:dve,nLtv:fve,nmid:pve,NoBreak:hve,NonBreakingSpace:mve,nopf:gve,Nopf:yve,Not:bve,not:vve,NotCongruent:wve,NotCupCap:xve,NotDoubleVerticalBar:kve,NotElement:_ve,NotEqual:$ve,NotEqualTilde:Eve,NotExists:Sve,NotGreater:Cve,NotGreaterEqual:Tve,NotGreaterFullEqual:Ave,NotGreaterGreater:Nve,NotGreaterLess:Pve,NotGreaterSlantEqual:Ove,NotGreaterTilde:Ive,NotHumpDownHump:Rve,NotHumpEqual:Mve,notin:Dve,notindot:Lve,notinE:jve,notinva:Fve,notinvb:Bve,notinvc:zve,NotLeftTriangleBar:qve,NotLeftTriangle:Wve,NotLeftTriangleEqual:Vve,NotLess:Uve,NotLessEqual:Hve,NotLessGreater:Kve,NotLessLess:Gve,NotLessSlantEqual:Zve,NotLessTilde:Jve,NotNestedGreaterGreater:Yve,NotNestedLessLess:Xve,notni:Qve,notniva:e0e,notnivb:t0e,notnivc:n0e,NotPrecedes:r0e,NotPrecedesEqual:o0e,NotPrecedesSlantEqual:s0e,NotReverseElement:i0e,NotRightTriangleBar:a0e,NotRightTriangle:l0e,NotRightTriangleEqual:c0e,NotSquareSubset:u0e,NotSquareSubsetEqual:d0e,NotSquareSuperset:f0e,NotSquareSupersetEqual:p0e,NotSubset:h0e,NotSubsetEqual:m0e,NotSucceeds:g0e,NotSucceedsEqual:y0e,NotSucceedsSlantEqual:b0e,NotSucceedsTilde:v0e,NotSuperset:w0e,NotSupersetEqual:x0e,NotTilde:k0e,NotTildeEqual:_0e,NotTildeFullEqual:$0e,NotTildeTilde:E0e,NotVerticalBar:S0e,nparallel:C0e,npar:T0e,nparsl:A0e,npart:N0e,npolint:P0e,npr:O0e,nprcue:I0e,nprec:R0e,npreceq:M0e,npre:D0e,nrarrc:L0e,nrarr:j0e,nrArr:F0e,nrarrw:B0e,nrightarrow:z0e,nRightarrow:q0e,nrtri:W0e,nrtrie:V0e,nsc:U0e,nsccue:H0e,nsce:K0e,Nscr:G0e,nscr:Z0e,nshortmid:J0e,nshortparallel:Y0e,nsim:X0e,nsime:Q0e,nsimeq:ewe,nsmid:twe,nspar:nwe,nsqsube:rwe,nsqsupe:owe,nsub:swe,nsubE:iwe,nsube:awe,nsubset:lwe,nsubseteq:cwe,nsubseteqq:uwe,nsucc:dwe,nsucceq:fwe,nsup:pwe,nsupE:hwe,nsupe:mwe,nsupset:gwe,nsupseteq:ywe,nsupseteqq:bwe,ntgl:vwe,Ntilde:wwe,ntilde:xwe,ntlg:kwe,ntriangleleft:_we,ntrianglelefteq:$we,ntriangleright:Ewe,ntrianglerighteq:Swe,Nu:Cwe,nu:Twe,num:Awe,numero:Nwe,numsp:Pwe,nvap:Owe,nvdash:Iwe,nvDash:Rwe,nVdash:Mwe,nVDash:Dwe,nvge:Lwe,nvgt:jwe,nvHarr:Fwe,nvinfin:Bwe,nvlArr:zwe,nvle:qwe,nvlt:Wwe,nvltrie:Vwe,nvrArr:Uwe,nvrtrie:Hwe,nvsim:Kwe,nwarhk:Gwe,nwarr:Zwe,nwArr:Jwe,nwarrow:Ywe,nwnear:Xwe,Oacute:Qwe,oacute:exe,oast:txe,Ocirc:nxe,ocirc:rxe,ocir:oxe,Ocy:sxe,ocy:ixe,odash:axe,Odblac:lxe,odblac:cxe,odiv:uxe,odot:dxe,odsold:fxe,OElig:pxe,oelig:hxe,ofcir:mxe,Ofr:gxe,ofr:yxe,ogon:bxe,Ograve:vxe,ograve:wxe,ogt:xxe,ohbar:kxe,ohm:_xe,oint:$xe,olarr:Exe,olcir:Sxe,olcross:Cxe,oline:Txe,olt:Axe,Omacr:Nxe,omacr:Pxe,Omega:Oxe,omega:Ixe,Omicron:Rxe,omicron:Mxe,omid:Dxe,ominus:Lxe,Oopf:jxe,oopf:Fxe,opar:Bxe,OpenCurlyDoubleQuote:zxe,OpenCurlyQuote:qxe,operp:Wxe,oplus:Vxe,orarr:Uxe,Or:Hxe,or:Kxe,ord:Gxe,order:Zxe,orderof:Jxe,ordf:Yxe,ordm:Xxe,origof:Qxe,oror:eke,orslope:tke,orv:nke,oS:rke,Oscr:oke,oscr:ske,Oslash:ike,oslash:ake,osol:lke,Otilde:cke,otilde:uke,otimesas:dke,Otimes:fke,otimes:pke,Ouml:hke,ouml:mke,ovbar:gke,OverBar:yke,OverBrace:bke,OverBracket:vke,OverParenthesis:wke,para:xke,parallel:kke,par:_ke,parsim:$ke,parsl:Eke,part:Ske,PartialD:Cke,Pcy:Tke,pcy:Ake,percnt:Nke,period:Pke,permil:Oke,perp:Ike,pertenk:Rke,Pfr:Mke,pfr:Dke,Phi:Lke,phi:jke,phiv:Fke,phmmat:Bke,phone:zke,Pi:qke,pi:Wke,pitchfork:Vke,piv:Uke,planck:Hke,planckh:Kke,plankv:Gke,plusacir:Zke,plusb:Jke,pluscir:Yke,plus:Xke,plusdo:Qke,plusdu:e_e,pluse:t_e,PlusMinus:n_e,plusmn:r_e,plussim:o_e,plustwo:s_e,pm:i_e,Poincareplane:a_e,pointint:l_e,popf:c_e,Popf:u_e,pound:d_e,prap:f_e,Pr:p_e,pr:h_e,prcue:m_e,precapprox:g_e,prec:y_e,preccurlyeq:b_e,Precedes:v_e,PrecedesEqual:w_e,PrecedesSlantEqual:x_e,PrecedesTilde:k_e,preceq:__e,precnapprox:$_e,precneqq:E_e,precnsim:S_e,pre:C_e,prE:T_e,precsim:A_e,prime:N_e,Prime:P_e,primes:O_e,prnap:I_e,prnE:R_e,prnsim:M_e,prod:D_e,Product:L_e,profalar:j_e,profline:F_e,profsurf:B_e,prop:z_e,Proportional:q_e,Proportion:W_e,propto:V_e,prsim:U_e,prurel:H_e,Pscr:K_e,pscr:G_e,Psi:Z_e,psi:J_e,puncsp:Y_e,Qfr:X_e,qfr:Q_e,qint:e$e,qopf:t$e,Qopf:n$e,qprime:r$e,Qscr:o$e,qscr:s$e,quaternions:i$e,quatint:a$e,quest:l$e,questeq:c$e,quot:u$e,QUOT:d$e,rAarr:f$e,race:p$e,Racute:h$e,racute:m$e,radic:g$e,raemptyv:y$e,rang:b$e,Rang:v$e,rangd:w$e,range:x$e,rangle:k$e,raquo:_$e,rarrap:$$e,rarrb:E$e,rarrbfs:S$e,rarrc:C$e,rarr:T$e,Rarr:A$e,rArr:N$e,rarrfs:P$e,rarrhk:O$e,rarrlp:I$e,rarrpl:R$e,rarrsim:M$e,Rarrtl:D$e,rarrtl:L$e,rarrw:j$e,ratail:F$e,rAtail:B$e,ratio:z$e,rationals:q$e,rbarr:W$e,rBarr:V$e,RBarr:U$e,rbbrk:H$e,rbrace:K$e,rbrack:G$e,rbrke:Z$e,rbrksld:J$e,rbrkslu:Y$e,Rcaron:X$e,rcaron:Q$e,Rcedil:eEe,rcedil:tEe,rceil:nEe,rcub:rEe,Rcy:oEe,rcy:sEe,rdca:iEe,rdldhar:aEe,rdquo:lEe,rdquor:cEe,rdsh:uEe,real:dEe,realine:fEe,realpart:pEe,reals:hEe,Re:mEe,rect:gEe,reg:yEe,REG:bEe,ReverseElement:vEe,ReverseEquilibrium:wEe,ReverseUpEquilibrium:xEe,rfisht:kEe,rfloor:_Ee,rfr:$Ee,Rfr:EEe,rHar:SEe,rhard:CEe,rharu:TEe,rharul:AEe,Rho:NEe,rho:PEe,rhov:OEe,RightAngleBracket:IEe,RightArrowBar:REe,rightarrow:MEe,RightArrow:DEe,Rightarrow:LEe,RightArrowLeftArrow:jEe,rightarrowtail:FEe,RightCeiling:BEe,RightDoubleBracket:zEe,RightDownTeeVector:qEe,RightDownVectorBar:WEe,RightDownVector:VEe,RightFloor:UEe,rightharpoondown:HEe,rightharpoonup:KEe,rightleftarrows:GEe,rightleftharpoons:ZEe,rightrightarrows:JEe,rightsquigarrow:YEe,RightTeeArrow:XEe,RightTee:QEe,RightTeeVector:eSe,rightthreetimes:tSe,RightTriangleBar:nSe,RightTriangle:rSe,RightTriangleEqual:oSe,RightUpDownVector:sSe,RightUpTeeVector:iSe,RightUpVectorBar:aSe,RightUpVector:lSe,RightVectorBar:cSe,RightVector:uSe,ring:dSe,risingdotseq:fSe,rlarr:pSe,rlhar:hSe,rlm:mSe,rmoustache:gSe,rmoust:ySe,rnmid:bSe,roang:vSe,roarr:wSe,robrk:xSe,ropar:kSe,ropf:_Se,Ropf:$Se,roplus:ESe,rotimes:SSe,RoundImplies:CSe,rpar:TSe,rpargt:ASe,rppolint:NSe,rrarr:PSe,Rrightarrow:OSe,rsaquo:ISe,rscr:RSe,Rscr:MSe,rsh:DSe,Rsh:LSe,rsqb:jSe,rsquo:FSe,rsquor:BSe,rthree:zSe,rtimes:qSe,rtri:WSe,rtrie:VSe,rtrif:USe,rtriltri:HSe,RuleDelayed:KSe,ruluhar:GSe,rx:ZSe,Sacute:JSe,sacute:YSe,sbquo:XSe,scap:QSe,Scaron:eCe,scaron:tCe,Sc:nCe,sc:rCe,sccue:oCe,sce:sCe,scE:iCe,Scedil:aCe,scedil:lCe,Scirc:cCe,scirc:uCe,scnap:dCe,scnE:fCe,scnsim:pCe,scpolint:hCe,scsim:mCe,Scy:gCe,scy:yCe,sdotb:bCe,sdot:vCe,sdote:wCe,searhk:xCe,searr:kCe,seArr:_Ce,searrow:$Ce,sect:ECe,semi:SCe,seswar:CCe,setminus:TCe,setmn:ACe,sext:NCe,Sfr:PCe,sfr:OCe,sfrown:ICe,sharp:RCe,SHCHcy:MCe,shchcy:DCe,SHcy:LCe,shcy:jCe,ShortDownArrow:FCe,ShortLeftArrow:BCe,shortmid:zCe,shortparallel:qCe,ShortRightArrow:WCe,ShortUpArrow:VCe,shy:UCe,Sigma:HCe,sigma:KCe,sigmaf:GCe,sigmav:ZCe,sim:JCe,simdot:YCe,sime:XCe,simeq:QCe,simg:e2e,simgE:t2e,siml:n2e,simlE:r2e,simne:o2e,simplus:s2e,simrarr:i2e,slarr:a2e,SmallCircle:l2e,smallsetminus:c2e,smashp:u2e,smeparsl:d2e,smid:f2e,smile:p2e,smt:h2e,smte:m2e,smtes:g2e,SOFTcy:y2e,softcy:b2e,solbar:v2e,solb:w2e,sol:x2e,Sopf:k2e,sopf:_2e,spades:$2e,spadesuit:E2e,spar:S2e,sqcap:C2e,sqcaps:T2e,sqcup:A2e,sqcups:N2e,Sqrt:P2e,sqsub:O2e,sqsube:I2e,sqsubset:R2e,sqsubseteq:M2e,sqsup:D2e,sqsupe:L2e,sqsupset:j2e,sqsupseteq:F2e,square:B2e,Square:z2e,SquareIntersection:q2e,SquareSubset:W2e,SquareSubsetEqual:V2e,SquareSuperset:U2e,SquareSupersetEqual:H2e,SquareUnion:K2e,squarf:G2e,squ:Z2e,squf:J2e,srarr:Y2e,Sscr:X2e,sscr:Q2e,ssetmn:eTe,ssmile:tTe,sstarf:nTe,Star:rTe,star:oTe,starf:sTe,straightepsilon:iTe,straightphi:aTe,strns:lTe,sub:cTe,Sub:uTe,subdot:dTe,subE:fTe,sube:pTe,subedot:hTe,submult:mTe,subnE:gTe,subne:yTe,subplus:bTe,subrarr:vTe,subset:wTe,Subset:xTe,subseteq:kTe,subseteqq:_Te,SubsetEqual:$Te,subsetneq:ETe,subsetneqq:STe,subsim:CTe,subsub:TTe,subsup:ATe,succapprox:NTe,succ:PTe,succcurlyeq:OTe,Succeeds:ITe,SucceedsEqual:RTe,SucceedsSlantEqual:MTe,SucceedsTilde:DTe,succeq:LTe,succnapprox:jTe,succneqq:FTe,succnsim:BTe,succsim:zTe,SuchThat:qTe,sum:WTe,Sum:VTe,sung:UTe,sup1:HTe,sup2:KTe,sup3:GTe,sup:ZTe,Sup:JTe,supdot:YTe,supdsub:XTe,supE:QTe,supe:eAe,supedot:tAe,Superset:nAe,SupersetEqual:rAe,suphsol:oAe,suphsub:sAe,suplarr:iAe,supmult:aAe,supnE:lAe,supne:cAe,supplus:uAe,supset:dAe,Supset:fAe,supseteq:pAe,supseteqq:hAe,supsetneq:mAe,supsetneqq:gAe,supsim:yAe,supsub:bAe,supsup:vAe,swarhk:wAe,swarr:xAe,swArr:kAe,swarrow:_Ae,swnwar:$Ae,szlig:EAe,Tab:SAe,target:CAe,Tau:TAe,tau:AAe,tbrk:NAe,Tcaron:PAe,tcaron:OAe,Tcedil:IAe,tcedil:RAe,Tcy:MAe,tcy:DAe,tdot:LAe,telrec:jAe,Tfr:FAe,tfr:BAe,there4:zAe,therefore:qAe,Therefore:WAe,Theta:VAe,theta:UAe,thetasym:HAe,thetav:KAe,thickapprox:GAe,thicksim:ZAe,ThickSpace:JAe,ThinSpace:YAe,thinsp:XAe,thkap:QAe,thksim:eNe,THORN:tNe,thorn:nNe,tilde:rNe,Tilde:oNe,TildeEqual:sNe,TildeFullEqual:iNe,TildeTilde:aNe,timesbar:lNe,timesb:cNe,times:uNe,timesd:dNe,tint:fNe,toea:pNe,topbot:hNe,topcir:mNe,top:gNe,Topf:yNe,topf:bNe,topfork:vNe,tosa:wNe,tprime:xNe,trade:kNe,TRADE:_Ne,triangle:$Ne,triangledown:ENe,triangleleft:SNe,trianglelefteq:CNe,triangleq:TNe,triangleright:ANe,trianglerighteq:NNe,tridot:PNe,trie:ONe,triminus:INe,TripleDot:RNe,triplus:MNe,trisb:DNe,tritime:LNe,trpezium:jNe,Tscr:FNe,tscr:BNe,TScy:zNe,tscy:qNe,TSHcy:WNe,tshcy:VNe,Tstrok:UNe,tstrok:HNe,twixt:KNe,twoheadleftarrow:GNe,twoheadrightarrow:ZNe,Uacute:JNe,uacute:YNe,uarr:XNe,Uarr:QNe,uArr:ePe,Uarrocir:tPe,Ubrcy:nPe,ubrcy:rPe,Ubreve:oPe,ubreve:sPe,Ucirc:iPe,ucirc:aPe,Ucy:lPe,ucy:cPe,udarr:uPe,Udblac:dPe,udblac:fPe,udhar:pPe,ufisht:hPe,Ufr:mPe,ufr:gPe,Ugrave:yPe,ugrave:bPe,uHar:vPe,uharl:wPe,uharr:xPe,uhblk:kPe,ulcorn:_Pe,ulcorner:$Pe,ulcrop:EPe,ultri:SPe,Umacr:CPe,umacr:TPe,uml:APe,UnderBar:NPe,UnderBrace:PPe,UnderBracket:OPe,UnderParenthesis:IPe,Union:RPe,UnionPlus:MPe,Uogon:DPe,uogon:LPe,Uopf:jPe,uopf:FPe,UpArrowBar:BPe,uparrow:zPe,UpArrow:qPe,Uparrow:WPe,UpArrowDownArrow:VPe,updownarrow:UPe,UpDownArrow:HPe,Updownarrow:KPe,UpEquilibrium:GPe,upharpoonleft:ZPe,upharpoonright:JPe,uplus:YPe,UpperLeftArrow:XPe,UpperRightArrow:QPe,upsi:eOe,Upsi:tOe,upsih:nOe,Upsilon:rOe,upsilon:oOe,UpTeeArrow:sOe,UpTee:iOe,upuparrows:aOe,urcorn:lOe,urcorner:cOe,urcrop:uOe,Uring:dOe,uring:fOe,urtri:pOe,Uscr:hOe,uscr:mOe,utdot:gOe,Utilde:yOe,utilde:bOe,utri:vOe,utrif:wOe,uuarr:xOe,Uuml:kOe,uuml:_Oe,uwangle:$Oe,vangrt:EOe,varepsilon:SOe,varkappa:COe,varnothing:TOe,varphi:AOe,varpi:NOe,varpropto:POe,varr:OOe,vArr:IOe,varrho:ROe,varsigma:MOe,varsubsetneq:DOe,varsubsetneqq:LOe,varsupsetneq:jOe,varsupsetneqq:FOe,vartheta:BOe,vartriangleleft:zOe,vartriangleright:qOe,vBar:WOe,Vbar:VOe,vBarv:UOe,Vcy:HOe,vcy:KOe,vdash:GOe,vDash:ZOe,Vdash:JOe,VDash:YOe,Vdashl:XOe,veebar:QOe,vee:eIe,Vee:tIe,veeeq:nIe,vellip:rIe,verbar:oIe,Verbar:sIe,vert:iIe,Vert:aIe,VerticalBar:lIe,VerticalLine:cIe,VerticalSeparator:uIe,VerticalTilde:dIe,VeryThinSpace:fIe,Vfr:pIe,vfr:hIe,vltri:mIe,vnsub:gIe,vnsup:yIe,Vopf:bIe,vopf:vIe,vprop:wIe,vrtri:xIe,Vscr:kIe,vscr:_Ie,vsubnE:$Ie,vsubne:EIe,vsupnE:SIe,vsupne:CIe,Vvdash:TIe,vzigzag:AIe,Wcirc:NIe,wcirc:PIe,wedbar:OIe,wedge:IIe,Wedge:RIe,wedgeq:MIe,weierp:DIe,Wfr:LIe,wfr:jIe,Wopf:FIe,wopf:BIe,wp:zIe,wr:qIe,wreath:WIe,Wscr:VIe,wscr:UIe,xcap:HIe,xcirc:KIe,xcup:GIe,xdtri:ZIe,Xfr:JIe,xfr:YIe,xharr:XIe,xhArr:QIe,Xi:eRe,xi:tRe,xlarr:nRe,xlArr:rRe,xmap:oRe,xnis:sRe,xodot:iRe,Xopf:aRe,xopf:lRe,xoplus:cRe,xotime:uRe,xrarr:dRe,xrArr:fRe,Xscr:pRe,xscr:hRe,xsqcup:mRe,xuplus:gRe,xutri:yRe,xvee:bRe,xwedge:vRe,Yacute:wRe,yacute:xRe,YAcy:kRe,yacy:_Re,Ycirc:$Re,ycirc:ERe,Ycy:SRe,ycy:CRe,yen:TRe,Yfr:ARe,yfr:NRe,YIcy:PRe,yicy:ORe,Yopf:IRe,yopf:RRe,Yscr:MRe,yscr:DRe,YUcy:LRe,yucy:jRe,yuml:FRe,Yuml:BRe,Zacute:zRe,zacute:qRe,Zcaron:WRe,zcaron:VRe,Zcy:URe,zcy:HRe,Zdot:KRe,zdot:GRe,zeetrf:ZRe,ZeroWidthSpace:JRe,Zeta:YRe,zeta:XRe,zfr:QRe,Zfr:e3e,ZHcy:t3e,zhcy:n3e,zigrarr:r3e,zopf:o3e,Zopf:s3e,Zscr:i3e,zscr:a3e,zwj:l3e,zwnj:c3e};var FM=u3e,pp=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,Ii={},O2={};function d3e(t){var e,n,r=O2[t];if(r)return r;for(r=O2[t]=[],e=0;e<128;e++)n=String.fromCharCode(e),/^[0-9a-z]$/i.test(n)?r.push(n):r.push("%"+("0"+e.toString(16).toUpperCase()).slice(-2));for(e=0;e<t.length;e++)r[t.charCodeAt(e)]=t[e];return r}function z1(t,e,n){var r,o,s,i,a,l="";for(typeof e!="string"&&(n=e,e=z1.defaultChars),typeof n=="undefined"&&(n=!0),a=d3e(e),r=0,o=t.length;r<o;r++){if(s=t.charCodeAt(r),n&&s===37&&r+2<o&&/^[0-9a-f]{2}$/i.test(t.slice(r+1,r+3))){l+=t.slice(r,r+3),r+=2;continue}if(s<128){l+=a[s];continue}if(s>=55296&&s<=57343){if(s>=55296&&s<=56319&&r+1<o&&(i=t.charCodeAt(r+1),i>=56320&&i<=57343)){l+=encodeURIComponent(t[r]+t[r+1]),r++;continue}l+="%EF%BF%BD";continue}l+=encodeURIComponent(t[r])}return l}z1.defaultChars=";/?:@&=+$,-_.!~*'()#";z1.componentChars="-_.!~*'()";var f3e=z1,I2={};function p3e(t){var e,n,r=I2[t];if(r)return r;for(r=I2[t]=[],e=0;e<128;e++)n=String.fromCharCode(e),r.push(n);for(e=0;e<t.length;e++)n=t.charCodeAt(e),r[n]="%"+("0"+n.toString(16).toUpperCase()).slice(-2);return r}function q1(t,e){var n;return typeof e!="string"&&(e=q1.defaultChars),n=p3e(e),t.replace(/(%[a-f0-9]{2})+/gi,function(r){var o,s,i,a,l,c,u,d="";for(o=0,s=r.length;o<s;o+=3){if(i=parseInt(r.slice(o+1,o+3),16),i<128){d+=n[i];continue}if((i&224)===192&&o+3<s&&(a=parseInt(r.slice(o+4,o+6),16),(a&192)===128)){u=i<<6&1984|a&63,u<128?d+="":d+=String.fromCharCode(u),o+=3;continue}if((i&240)===224&&o+6<s&&(a=parseInt(r.slice(o+4,o+6),16),l=parseInt(r.slice(o+7,o+9),16),(a&192)===128&&(l&192)===128)){u=i<<12&61440|a<<6&4032|l&63,u<2048||u>=55296&&u<=57343?d+="":d+=String.fromCharCode(u),o+=6;continue}if((i&248)===240&&o+9<s&&(a=parseInt(r.slice(o+4,o+6),16),l=parseInt(r.slice(o+7,o+9),16),c=parseInt(r.slice(o+10,o+12),16),(a&192)===128&&(l&192)===128&&(c&192)===128)){u=i<<18&1835008|a<<12&258048|l<<6&4032|c&63,u<65536||u>1114111?d+="":(u-=65536,d+=String.fromCharCode(55296+(u>>10),56320+(u&1023))),o+=9;continue}d+=""}return d})}q1.defaultChars=";/?:@&=+$,#";q1.componentChars="";var h3e=q1,m3e=function(e){var n="";return n+=e.protocol||"",n+=e.slashes?"//":"",n+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?n+="["+e.hostname+"]":n+=e.hostname||"",n+=e.port?":"+e.port:"",n+=e.pathname||"",n+=e.search||"",n+=e.hash||"",n};function cg(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}var g3e=/^([a-z0-9.+-]+:)/i,y3e=/:[0-9]*$/,b3e=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,v3e=["<",">",'"',"`"," ","\r",`
`,"	"],w3e=["{","}","|","\\","^","`"].concat(v3e),x3e=["'"].concat(w3e),R2=["%","/","?",";","#"].concat(x3e),M2=["/","?","#"],k3e=255,D2=/^[+a-z0-9A-Z_-]{0,63}$/,_3e=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,L2={javascript:!0,"javascript:":!0},j2={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function $3e(t,e){if(t&&t instanceof cg)return t;var n=new cg;return n.parse(t,e),n}cg.prototype.parse=function(t,e){var n,r,o,s,i,a=t;if(a=a.trim(),!e&&t.split("#").length===1){var l=b3e.exec(a);if(l)return this.pathname=l[1],l[2]&&(this.search=l[2]),this}var c=g3e.exec(a);if(c&&(c=c[0],o=c.toLowerCase(),this.protocol=c,a=a.substr(c.length)),(e||c||a.match(/^\/\/[^@\/]+@[^@\/]+/))&&(i=a.substr(0,2)==="//",i&&!(c&&L2[c])&&(a=a.substr(2),this.slashes=!0)),!L2[c]&&(i||c&&!j2[c])){var u=-1;for(n=0;n<M2.length;n++)s=a.indexOf(M2[n]),s!==-1&&(u===-1||s<u)&&(u=s);var d,f;for(u===-1?f=a.lastIndexOf("@"):f=a.lastIndexOf("@",u),f!==-1&&(d=a.slice(0,f),a=a.slice(f+1),this.auth=d),u=-1,n=0;n<R2.length;n++)s=a.indexOf(R2[n]),s!==-1&&(u===-1||s<u)&&(u=s);u===-1&&(u=a.length),a[u-1]===":"&&u--;var p=a.slice(0,u);a=a.slice(u),this.parseHost(p),this.hostname=this.hostname||"";var h=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!h){var y=this.hostname.split(/\./);for(n=0,r=y.length;n<r;n++){var g=y[n];if(g&&!g.match(D2)){for(var b="",w=0,x=g.length;w<x;w++)g.charCodeAt(w)>127?b+="x":b+=g[w];if(!b.match(D2)){var k=y.slice(0,n),S=y.slice(n+1),_=g.match(_3e);_&&(k.push(_[1]),S.unshift(_[2])),S.length&&(a=S.join(".")+a),this.hostname=k.join(".");break}}}}this.hostname.length>k3e&&(this.hostname=""),h&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}var C=a.indexOf("#");C!==-1&&(this.hash=a.substr(C),a=a.slice(0,C));var $=a.indexOf("?");return $!==-1&&(this.search=a.substr($),a=a.slice(0,$)),a&&(this.pathname=a),j2[o]&&this.hostname&&!this.pathname&&(this.pathname=""),this};cg.prototype.parseHost=function(t){var e=y3e.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};var E3e=$3e;Ii.encode=f3e;Ii.decode=h3e;Ii.format=m3e;Ii.parse=E3e;var Bi={},Wb,F2;function M_(){return F2||(F2=1,Wb=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/),Wb}var Vb,B2;function D_(){return B2||(B2=1,Vb=/[\0-\x1F\x7F-\x9F]/),Vb}var Ub,z2;function S3e(){return z2||(z2=1,Ub=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/),Ub}var Hb,q2;function L_(){return q2||(q2=1,Hb=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/),Hb}var W2;function BM(){return W2||(W2=1,Bi.Any=M_(),Bi.Cc=D_(),Bi.Cf=S3e(),Bi.P=pp,Bi.Z=L_()),Bi}(function(t){function e(E){return Object.prototype.toString.call(E)}function n(E){return e(E)==="[object String]"}var r=Object.prototype.hasOwnProperty;function o(E,D){return r.call(E,D)}function s(E){var D=Array.prototype.slice.call(arguments,1);return D.forEach(function(R){if(R){if(typeof R!="object")throw new TypeError(R+"must be object");Object.keys(R).forEach(function(j){E[j]=R[j]})}}),E}function i(E,D,R){return[].concat(E.slice(0,D),R,E.slice(D+1))}function a(E){return!(E>=55296&&E<=57343||E>=64976&&E<=65007||(E&65535)===65535||(E&65535)===65534||E>=0&&E<=8||E===11||E>=14&&E<=31||E>=127&&E<=159||E>1114111)}function l(E){if(E>65535){E-=65536;var D=55296+(E>>10),R=56320+(E&1023);return String.fromCharCode(D,R)}return String.fromCharCode(E)}var c=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,u=/&([a-z#][a-z0-9]{1,31});/gi,d=new RegExp(c.source+"|"+u.source,"gi"),f=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i,p=FM;function h(E,D){var R=0;return o(p,D)?p[D]:D.charCodeAt(0)===35&&f.test(D)&&(R=D[1].toLowerCase()==="x"?parseInt(D.slice(2),16):parseInt(D.slice(1),10),a(R))?l(R):E}function y(E){return E.indexOf("\\")<0?E:E.replace(c,"$1")}function g(E){return E.indexOf("\\")<0&&E.indexOf("&")<0?E:E.replace(d,function(D,R,j){return R||h(D,j)})}var b=/[&<>"]/,w=/[&<>"]/g,x={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function k(E){return x[E]}function S(E){return b.test(E)?E.replace(w,k):E}var _=/[.?*+^$[\]\\(){}|-]/g;function C(E){return E.replace(_,"\\$&")}function $(E){switch(E){case 9:case 32:return!0}return!1}function T(E){if(E>=8192&&E<=8202)return!0;switch(E){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}var A=pp;function N(E){return A.test(E)}function q(E){switch(E){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function O(E){return E=E.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(E=E.replace(//g,"")),E.toLowerCase().toUpperCase()}t.lib={},t.lib.mdurl=Ii,t.lib.ucmicro=BM(),t.assign=s,t.isString=n,t.has=o,t.unescapeMd=y,t.unescapeAll=g,t.isValidEntityCode=a,t.fromCodePoint=l,t.escapeHtml=S,t.arrayReplaceAt=i,t.isSpace=$,t.isWhiteSpace=T,t.isMdAsciiPunct=q,t.isPunctChar=N,t.escapeRE=C,t.normalizeReference=O})(Be);var W1={},C3e=function(e,n,r){var o,s,i,a,l=-1,c=e.posMax,u=e.pos;for(e.pos=n+1,o=1;e.pos<c;){if(i=e.src.charCodeAt(e.pos),i===93&&(o--,o===0)){s=!0;break}if(a=e.pos,e.md.inline.skipToken(e),i===91){if(a===e.pos-1)o++;else if(r)return e.pos=u,-1}}return s&&(l=e.pos),e.pos=u,l},V2=Be.unescapeAll,T3e=function(e,n,r){var o,s,i=0,a=n,l={ok:!1,pos:0,lines:0,str:""};if(e.charCodeAt(n)===60){for(n++;n<r;){if(o=e.charCodeAt(n),o===10)return l;if(o===62)return l.pos=n+1,l.str=V2(e.slice(a+1,n)),l.ok=!0,l;if(o===92&&n+1<r){n+=2;continue}n++}return l}for(s=0;n<r&&(o=e.charCodeAt(n),!(o===32||o<32||o===127));){if(o===92&&n+1<r){n+=2;continue}if(o===40&&s++,o===41){if(s===0)break;s--}n++}return a===n||s!==0||(l.str=V2(e.slice(a,n)),l.lines=i,l.pos=n,l.ok=!0),l},A3e=Be.unescapeAll,N3e=function(e,n,r){var o,s,i=0,a=n,l={ok:!1,pos:0,lines:0,str:""};if(n>=r||(s=e.charCodeAt(n),s!==34&&s!==39&&s!==40))return l;for(n++,s===40&&(s=41);n<r;){if(o=e.charCodeAt(n),o===s)return l.pos=n+1,l.lines=i,l.str=A3e(e.slice(a+1,n)),l.ok=!0,l;o===10?i++:o===92&&n+1<r&&(n++,e.charCodeAt(n)===10&&i++),n++}return l};W1.parseLinkLabel=C3e;W1.parseLinkDestination=T3e;W1.parseLinkTitle=N3e;var P3e=Be.assign,O3e=Be.unescapeAll,ja=Be.escapeHtml,To={};To.code_inline=function(t,e,n,r,o){var s=t[e];return"<code"+o.renderAttrs(s)+">"+ja(t[e].content)+"</code>"};To.code_block=function(t,e,n,r,o){var s=t[e];return"<pre"+o.renderAttrs(s)+"><code>"+ja(t[e].content)+`</code></pre>
`};To.fence=function(t,e,n,r,o){var s=t[e],i=s.info?O3e(s.info).trim():"",a="",l,c,u,d;return i&&(a=i.split(/\s+/g)[0]),n.highlight?l=n.highlight(s.content,a)||ja(s.content):l=ja(s.content),l.indexOf("<pre")===0?l+`
`:i?(c=s.attrIndex("class"),u=s.attrs?s.attrs.slice():[],c<0?u.push(["class",n.langPrefix+a]):u[c][1]+=" "+n.langPrefix+a,d={attrs:u},"<pre><code"+o.renderAttrs(d)+">"+l+`</code></pre>
`):"<pre><code"+o.renderAttrs(s)+">"+l+`</code></pre>
`};To.image=function(t,e,n,r,o){var s=t[e];return s.attrs[s.attrIndex("alt")][1]=o.renderInlineAsText(s.children,n,r),o.renderToken(t,e,n)};To.hardbreak=function(t,e,n){return n.xhtmlOut?`<br />
`:`<br>
`};To.softbreak=function(t,e,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};To.text=function(t,e){return ja(t[e].content)};To.html_block=function(t,e){return t[e].content};To.html_inline=function(t,e){return t[e].content};function eu(){this.rules=P3e({},To)}eu.prototype.renderAttrs=function(e){var n,r,o;if(!e.attrs)return"";for(o="",n=0,r=e.attrs.length;n<r;n++)o+=" "+ja(e.attrs[n][0])+'="'+ja(e.attrs[n][1])+'"';return o};eu.prototype.renderToken=function(e,n,r){var o,s="",i=!1,a=e[n];return a.hidden?"":(a.block&&a.nesting!==-1&&n&&e[n-1].hidden&&(s+=`
`),s+=(a.nesting===-1?"</":"<")+a.tag,s+=this.renderAttrs(a),a.nesting===0&&r.xhtmlOut&&(s+=" /"),a.block&&(i=!0,a.nesting===1&&n+1<e.length&&(o=e[n+1],(o.type==="inline"||o.hidden||o.nesting===-1&&o.tag===a.tag)&&(i=!1))),s+=i?`>
`:">",s)};eu.prototype.renderInline=function(t,e,n){for(var r,o="",s=this.rules,i=0,a=t.length;i<a;i++)r=t[i].type,typeof s[r]!="undefined"?o+=s[r](t,i,e,n,this):o+=this.renderToken(t,i,e);return o};eu.prototype.renderInlineAsText=function(t,e,n){for(var r="",o=0,s=t.length;o<s;o++)t[o].type==="text"?r+=t[o].content:t[o].type==="image"&&(r+=this.renderInlineAsText(t[o].children,e,n));return r};eu.prototype.render=function(t,e,n){var r,o,s,i="",a=this.rules;for(r=0,o=t.length;r<o;r++)s=t[r].type,s==="inline"?i+=this.renderInline(t[r].children,e,n):typeof a[s]!="undefined"?i+=a[t[r].type](t,r,e,n,this):i+=this.renderToken(t,r,e,n);return i};var I3e=eu;function Vr(){this.__rules__=[],this.__cache__=null}Vr.prototype.__find__=function(t){for(var e=0;e<this.__rules__.length;e++)if(this.__rules__[e].name===t)return e;return-1};Vr.prototype.__compile__=function(){var t=this,e=[""];t.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(r){e.indexOf(r)<0&&e.push(r)})}),t.__cache__={},e.forEach(function(n){t.__cache__[n]=[],t.__rules__.forEach(function(r){r.enabled&&(n&&r.alt.indexOf(n)<0||t.__cache__[n].push(r.fn))})})};Vr.prototype.at=function(t,e,n){var r=this.__find__(t),o=n||{};if(r===-1)throw new Error("Parser rule not found: "+t);this.__rules__[r].fn=e,this.__rules__[r].alt=o.alt||[],this.__cache__=null};Vr.prototype.before=function(t,e,n,r){var o=this.__find__(t),s=r||{};if(o===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(o,0,{name:e,enabled:!0,fn:n,alt:s.alt||[]}),this.__cache__=null};Vr.prototype.after=function(t,e,n,r){var o=this.__find__(t),s=r||{};if(o===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(o+1,0,{name:e,enabled:!0,fn:n,alt:s.alt||[]}),this.__cache__=null};Vr.prototype.push=function(t,e,n){var r=n||{};this.__rules__.push({name:t,enabled:!0,fn:e,alt:r.alt||[]}),this.__cache__=null};Vr.prototype.enable=function(t,e){Array.isArray(t)||(t=[t]);var n=[];return t.forEach(function(r){var o=this.__find__(r);if(o<0){if(e)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[o].enabled=!0,n.push(r)},this),this.__cache__=null,n};Vr.prototype.enableOnly=function(t,e){Array.isArray(t)||(t=[t]),this.__rules__.forEach(function(n){n.enabled=!1}),this.enable(t,e)};Vr.prototype.disable=function(t,e){Array.isArray(t)||(t=[t]);var n=[];return t.forEach(function(r){var o=this.__find__(r);if(o<0){if(e)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[o].enabled=!1,n.push(r)},this),this.__cache__=null,n};Vr.prototype.getRules=function(t){return this.__cache__===null&&this.__compile__(),this.__cache__[t]||[]};var j_=Vr,R3e=/\r\n?|\n/g,M3e=/\0/g,D3e=function(e){var n;n=e.src.replace(R3e,`
`),n=n.replace(M3e,""),e.src=n},L3e=function(e){var n;e.inlineMode?(n=new e.Token("inline","",0),n.content=e.src,n.map=[0,1],n.children=[],e.tokens.push(n)):e.md.block.parse(e.src,e.md,e.env,e.tokens)},j3e=function(e){var n=e.tokens,r,o,s;for(o=0,s=n.length;o<s;o++)r=n[o],r.type==="inline"&&e.md.inline.parse(r.content,e.md,e.env,r.children)},F3e=Be.arrayReplaceAt;function B3e(t){return/^<a[>\s]/i.test(t)}function z3e(t){return/^<\/a\s*>/i.test(t)}var q3e=function(e){var n,r,o,s,i,a,l,c,u,d,f,p,h,y,g,b,w=e.tokens,x;if(e.md.options.linkify){for(r=0,o=w.length;r<o;r++)if(!(w[r].type!=="inline"||!e.md.linkify.pretest(w[r].content)))for(s=w[r].children,h=0,n=s.length-1;n>=0;n--){if(a=s[n],a.type==="link_close"){for(n--;s[n].level!==a.level&&s[n].type!=="link_open";)n--;continue}if(a.type==="html_inline"&&(B3e(a.content)&&h>0&&h--,z3e(a.content)&&h++),!(h>0)&&a.type==="text"&&e.md.linkify.test(a.content)){for(u=a.content,x=e.md.linkify.match(u),l=[],p=a.level,f=0,c=0;c<x.length;c++)y=x[c].url,g=e.md.normalizeLink(y),e.md.validateLink(g)&&(b=x[c].text,x[c].schema?x[c].schema==="mailto:"&&!/^mailto:/i.test(b)?b=e.md.normalizeLinkText("mailto:"+b).replace(/^mailto:/,""):b=e.md.normalizeLinkText(b):b=e.md.normalizeLinkText("http://"+b).replace(/^http:\/\//,""),d=x[c].index,d>f&&(i=new e.Token("text","",0),i.content=u.slice(f,d),i.level=p,l.push(i)),i=new e.Token("link_open","a",1),i.attrs=[["href",g]],i.level=p++,i.markup="linkify",i.info="auto",l.push(i),i=new e.Token("text","",0),i.content=b,i.level=p,l.push(i),i=new e.Token("link_close","a",-1),i.level=--p,i.markup="linkify",i.info="auto",l.push(i),f=x[c].lastIndex);f<u.length&&(i=new e.Token("text","",0),i.content=u.slice(f),i.level=p,l.push(i)),w[r].children=s=F3e(s,n,l)}}}},zM=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,W3e=/\((c|tm|r|p)\)/i,V3e=/\((c|tm|r|p)\)/ig,U3e={c:"",r:"",p:"",tm:""};function H3e(t,e){return U3e[e.toLowerCase()]}function K3e(t){var e,n,r=0;for(e=t.length-1;e>=0;e--)n=t[e],n.type==="text"&&!r&&(n.content=n.content.replace(V3e,H3e)),n.type==="link_open"&&n.info==="auto"&&r--,n.type==="link_close"&&n.info==="auto"&&r++}function G3e(t){var e,n,r=0;for(e=t.length-1;e>=0;e--)n=t[e],n.type==="text"&&!r&&zM.test(n.content)&&(n.content=n.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---([^-]|$)/mg,"$1$2").replace(/(^|\s)--(\s|$)/mg,"$1$2").replace(/(^|[^-\s])--([^-\s]|$)/mg,"$1$2")),n.type==="link_open"&&n.info==="auto"&&r--,n.type==="link_close"&&n.info==="auto"&&r++}var Z3e=function(e){var n;if(e.md.options.typographer)for(n=e.tokens.length-1;n>=0;n--)e.tokens[n].type==="inline"&&(W3e.test(e.tokens[n].content)&&K3e(e.tokens[n].children),zM.test(e.tokens[n].content)&&G3e(e.tokens[n].children))},U2=Be.isWhiteSpace,H2=Be.isPunctChar,K2=Be.isMdAsciiPunct,J3e=/['"]/,G2=/['"]/g,Z2="";function oh(t,e,n){return t.substr(0,e)+n+t.substr(e+1)}function Y3e(t,e){var n,r,o,s,i,a,l,c,u,d,f,p,h,y,g,b,w,x,k,S,_;for(k=[],n=0;n<t.length;n++){for(r=t[n],l=t[n].level,w=k.length-1;w>=0&&!(k[w].level<=l);w--);if(k.length=w+1,r.type==="text"){o=r.content,i=0,a=o.length;e:for(;i<a&&(G2.lastIndex=i,s=G2.exec(o),!!s);){if(g=b=!0,i=s.index+1,x=s[0]==="'",u=32,s.index-1>=0)u=o.charCodeAt(s.index-1);else for(w=n-1;w>=0&&!(t[w].type==="softbreak"||t[w].type==="hardbreak");w--)if(t[w].type==="text"){u=t[w].content.charCodeAt(t[w].content.length-1);break}if(d=32,i<a)d=o.charCodeAt(i);else for(w=n+1;w<t.length&&!(t[w].type==="softbreak"||t[w].type==="hardbreak");w++)if(t[w].type==="text"){d=t[w].content.charCodeAt(0);break}if(f=K2(u)||H2(String.fromCharCode(u)),p=K2(d)||H2(String.fromCharCode(d)),h=U2(u),y=U2(d),y?g=!1:p&&(h||f||(g=!1)),h?b=!1:f&&(y||p||(b=!1)),d===34&&s[0]==='"'&&u>=48&&u<=57&&(b=g=!1),g&&b&&(g=!1,b=p),!g&&!b){x&&(r.content=oh(r.content,s.index,Z2));continue}if(b){for(w=k.length-1;w>=0&&(c=k[w],!(k[w].level<l));w--)if(c.single===x&&k[w].level===l){c=k[w],x?(S=e.md.options.quotes[2],_=e.md.options.quotes[3]):(S=e.md.options.quotes[0],_=e.md.options.quotes[1]),r.content=oh(r.content,s.index,_),t[c.token].content=oh(t[c.token].content,c.pos,S),i+=_.length-1,c.token===n&&(i+=S.length-1),o=r.content,a=o.length,k.length=w;continue e}}g?k.push({token:n,pos:s.index,single:x,level:l}):b&&x&&(r.content=oh(r.content,s.index,Z2))}}}}var X3e=function(e){var n;if(e.md.options.typographer)for(n=e.tokens.length-1;n>=0;n--)e.tokens[n].type!=="inline"||!J3e.test(e.tokens[n].content)||Y3e(e.tokens[n].children,e)};function tu(t,e,n){this.type=t,this.tag=e,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}tu.prototype.attrIndex=function(e){var n,r,o;if(!this.attrs)return-1;for(n=this.attrs,r=0,o=n.length;r<o;r++)if(n[r][0]===e)return r;return-1};tu.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]};tu.prototype.attrSet=function(e,n){var r=this.attrIndex(e),o=[e,n];r<0?this.attrPush(o):this.attrs[r]=o};tu.prototype.attrGet=function(e){var n=this.attrIndex(e),r=null;return n>=0&&(r=this.attrs[n][1]),r};tu.prototype.attrJoin=function(e,n){var r=this.attrIndex(e);r<0?this.attrPush([e,n]):this.attrs[r][1]=this.attrs[r][1]+" "+n};var V1=tu;const _w=fs(V1);var Q3e=V1;function qM(t,e,n){this.src=t,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=e}qM.prototype.Token=Q3e;var e4e=qM,t4e=j_,Kb=[["normalize",D3e],["block",L3e],["inline",j3e],["linkify",q3e],["replacements",Z3e],["smartquotes",X3e]];function F_(){this.ruler=new t4e;for(var t=0;t<Kb.length;t++)this.ruler.push(Kb[t][0],Kb[t][1])}F_.prototype.process=function(t){var e,n,r;for(r=this.ruler.getRules(""),e=0,n=r.length;e<n;e++)r[e](t)};F_.prototype.State=e4e;var n4e=F_,r4e=Be.isSpace;function Gb(t,e){var n=t.bMarks[e]+t.blkIndent,r=t.eMarks[e];return t.src.substr(n,r-n)}function J2(t){var e=[],n=0,r=t.length,o,s=0,i=0,a=!1,l=0;for(o=t.charCodeAt(n);n<r;)o===96?a?(a=!1,l=n):s%2===0&&(a=!0,l=n):o===124&&s%2===0&&!a&&(e.push(t.substring(i,n)),i=n+1),o===92?s++:s=0,n++,n===r&&a&&(a=!1,n=l+1),o=t.charCodeAt(n);return e.push(t.substring(i)),e}var o4e=function(e,n,r,o){var s,i,a,l,c,u,d,f,p,h,y,g;if(n+2>r||(c=n+1,e.sCount[c]<e.blkIndent)||e.sCount[c]-e.blkIndent>=4||(a=e.bMarks[c]+e.tShift[c],a>=e.eMarks[c])||(s=e.src.charCodeAt(a++),s!==124&&s!==45&&s!==58))return!1;for(;a<e.eMarks[c];){if(s=e.src.charCodeAt(a),s!==124&&s!==45&&s!==58&&!r4e(s))return!1;a++}for(i=Gb(e,n+1),u=i.split("|"),p=[],l=0;l<u.length;l++){if(h=u[l].trim(),!h){if(l===0||l===u.length-1)continue;return!1}if(!/^:?-+:?$/.test(h))return!1;h.charCodeAt(h.length-1)===58?p.push(h.charCodeAt(0)===58?"center":"right"):h.charCodeAt(0)===58?p.push("left"):p.push("")}if(i=Gb(e,n).trim(),i.indexOf("|")===-1||e.sCount[n]-e.blkIndent>=4||(u=J2(i.replace(/^\||\|$/g,"")),d=u.length,d>p.length))return!1;if(o)return!0;for(f=e.push("table_open","table",1),f.map=y=[n,0],f=e.push("thead_open","thead",1),f.map=[n,n+1],f=e.push("tr_open","tr",1),f.map=[n,n+1],l=0;l<u.length;l++)f=e.push("th_open","th",1),f.map=[n,n+1],p[l]&&(f.attrs=[["style","text-align:"+p[l]]]),f=e.push("inline","",0),f.content=u[l].trim(),f.map=[n,n+1],f.children=[],f=e.push("th_close","th",-1);for(f=e.push("tr_close","tr",-1),f=e.push("thead_close","thead",-1),f=e.push("tbody_open","tbody",1),f.map=g=[n+2,0],c=n+2;c<r&&!(e.sCount[c]<e.blkIndent||(i=Gb(e,c).trim(),i.indexOf("|")===-1)||e.sCount[c]-e.blkIndent>=4);c++){for(u=J2(i.replace(/^\||\|$/g,"")),f=e.push("tr_open","tr",1),l=0;l<d;l++)f=e.push("td_open","td",1),p[l]&&(f.attrs=[["style","text-align:"+p[l]]]),f=e.push("inline","",0),f.content=u[l]?u[l].trim():"",f.children=[],f=e.push("td_close","td",-1);f=e.push("tr_close","tr",-1)}return f=e.push("tbody_close","tbody",-1),f=e.push("table_close","table",-1),y[1]=g[1]=c,e.line=c,!0},s4e=function(e,n,r){var o,s,i;if(e.sCount[n]-e.blkIndent<4)return!1;for(s=o=n+1;o<r;){if(e.isEmpty(o)){o++;continue}if(e.sCount[o]-e.blkIndent>=4){o++,s=o;continue}break}return e.line=s,i=e.push("code_block","code",0),i.content=e.getLines(n,s,4+e.blkIndent,!0),i.map=[n,e.line],!0},i4e=function(e,n,r,o){var s,i,a,l,c,u,d,f=!1,p=e.bMarks[n]+e.tShift[n],h=e.eMarks[n];if(e.sCount[n]-e.blkIndent>=4||p+3>h||(s=e.src.charCodeAt(p),s!==126&&s!==96)||(c=p,p=e.skipChars(p,s),i=p-c,i<3)||(d=e.src.slice(c,p),a=e.src.slice(p,h),s===96&&a.indexOf(String.fromCharCode(s))>=0))return!1;if(o)return!0;for(l=n;l++,!(l>=r||(p=c=e.bMarks[l]+e.tShift[l],h=e.eMarks[l],p<h&&e.sCount[l]<e.blkIndent));)if(e.src.charCodeAt(p)===s&&!(e.sCount[l]-e.blkIndent>=4)&&(p=e.skipChars(p,s),!(p-c<i)&&(p=e.skipSpaces(p),!(p<h)))){f=!0;break}return i=e.sCount[n],e.line=l+(f?1:0),u=e.push("fence","code",0),u.info=a,u.content=e.getLines(n+1,l,i,!0),u.markup=d,u.map=[n,e.line],!0},Y2=Be.isSpace,a4e=function(e,n,r,o){var s,i,a,l,c,u,d,f,p,h,y,g,b,w,x,k,S,_,C,$,T=e.lineMax,A=e.bMarks[n]+e.tShift[n],N=e.eMarks[n];if(e.sCount[n]-e.blkIndent>=4||e.src.charCodeAt(A++)!==62)return!1;if(o)return!0;for(l=p=e.sCount[n]+A-(e.bMarks[n]+e.tShift[n]),e.src.charCodeAt(A)===32?(A++,l++,p++,s=!1,k=!0):e.src.charCodeAt(A)===9?(k=!0,(e.bsCount[n]+p)%4===3?(A++,l++,p++,s=!1):s=!0):k=!1,h=[e.bMarks[n]],e.bMarks[n]=A;A<N&&(i=e.src.charCodeAt(A),Y2(i));){i===9?p+=4-(p+e.bsCount[n]+(s?1:0))%4:p++;A++}for(y=[e.bsCount[n]],e.bsCount[n]=e.sCount[n]+1+(k?1:0),u=A>=N,w=[e.sCount[n]],e.sCount[n]=p-l,x=[e.tShift[n]],e.tShift[n]=A-e.bMarks[n],_=e.md.block.ruler.getRules("blockquote"),b=e.parentType,e.parentType="blockquote",$=!1,f=n+1;f<r&&(e.sCount[f]<e.blkIndent&&($=!0),A=e.bMarks[f]+e.tShift[f],N=e.eMarks[f],!(A>=N));f++){if(e.src.charCodeAt(A++)===62&&!$){for(l=p=e.sCount[f]+A-(e.bMarks[f]+e.tShift[f]),e.src.charCodeAt(A)===32?(A++,l++,p++,s=!1,k=!0):e.src.charCodeAt(A)===9?(k=!0,(e.bsCount[f]+p)%4===3?(A++,l++,p++,s=!1):s=!0):k=!1,h.push(e.bMarks[f]),e.bMarks[f]=A;A<N&&(i=e.src.charCodeAt(A),Y2(i));){i===9?p+=4-(p+e.bsCount[f]+(s?1:0))%4:p++;A++}u=A>=N,y.push(e.bsCount[f]),e.bsCount[f]=e.sCount[f]+1+(k?1:0),w.push(e.sCount[f]),e.sCount[f]=p-l,x.push(e.tShift[f]),e.tShift[f]=A-e.bMarks[f];continue}if(u)break;for(S=!1,a=0,c=_.length;a<c;a++)if(_[a](e,f,r,!0)){S=!0;break}if(S){e.lineMax=f,e.blkIndent!==0&&(h.push(e.bMarks[f]),y.push(e.bsCount[f]),x.push(e.tShift[f]),w.push(e.sCount[f]),e.sCount[f]-=e.blkIndent);break}h.push(e.bMarks[f]),y.push(e.bsCount[f]),x.push(e.tShift[f]),w.push(e.sCount[f]),e.sCount[f]=-1}for(g=e.blkIndent,e.blkIndent=0,C=e.push("blockquote_open","blockquote",1),C.markup=">",C.map=d=[n,0],e.md.block.tokenize(e,n,f),C=e.push("blockquote_close","blockquote",-1),C.markup=">",e.lineMax=T,e.parentType=b,d[1]=e.line,a=0;a<x.length;a++)e.bMarks[a+n]=h[a],e.tShift[a+n]=x[a],e.sCount[a+n]=w[a],e.bsCount[a+n]=y[a];return e.blkIndent=g,!0},l4e=Be.isSpace,c4e=function(e,n,r,o){var s,i,a,l,c=e.bMarks[n]+e.tShift[n],u=e.eMarks[n];if(e.sCount[n]-e.blkIndent>=4||(s=e.src.charCodeAt(c++),s!==42&&s!==45&&s!==95))return!1;for(i=1;c<u;){if(a=e.src.charCodeAt(c++),a!==s&&!l4e(a))return!1;a===s&&i++}return i<3?!1:(o||(e.line=n+1,l=e.push("hr","hr",0),l.map=[n,e.line],l.markup=Array(i+1).join(String.fromCharCode(s))),!0)},WM=Be.isSpace;function X2(t,e){var n,r,o,s;return r=t.bMarks[e]+t.tShift[e],o=t.eMarks[e],n=t.src.charCodeAt(r++),n!==42&&n!==45&&n!==43||r<o&&(s=t.src.charCodeAt(r),!WM(s))?-1:r}function Q2(t,e){var n,r=t.bMarks[e]+t.tShift[e],o=r,s=t.eMarks[e];if(o+1>=s||(n=t.src.charCodeAt(o++),n<48||n>57))return-1;for(;;){if(o>=s)return-1;if(n=t.src.charCodeAt(o++),n>=48&&n<=57){if(o-r>=10)return-1;continue}if(n===41||n===46)break;return-1}return o<s&&(n=t.src.charCodeAt(o),!WM(n))?-1:o}function u4e(t,e){var n,r,o=t.level+2;for(n=e+2,r=t.tokens.length-2;n<r;n++)t.tokens[n].level===o&&t.tokens[n].type==="paragraph_open"&&(t.tokens[n+2].hidden=!0,t.tokens[n].hidden=!0,n+=2)}var d4e=function(e,n,r,o){var s,i,a,l,c,u,d,f,p,h,y,g,b,w,x,k,S,_,C,$,T,A,N,q,O,E,D,R,j=!1,we=!0;if(e.sCount[n]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[n]-e.listIndent>=4&&e.sCount[n]<e.blkIndent)return!1;if(o&&e.parentType==="paragraph"&&e.tShift[n]>=e.blkIndent&&(j=!0),(N=Q2(e,n))>=0){if(d=!0,O=e.bMarks[n]+e.tShift[n],b=Number(e.src.substr(O,N-O-1)),j&&b!==1)return!1}else if((N=X2(e,n))>=0)d=!1;else return!1;if(j&&e.skipSpaces(N)>=e.eMarks[n])return!1;if(g=e.src.charCodeAt(N-1),o)return!0;for(y=e.tokens.length,d?(R=e.push("ordered_list_open","ol",1),b!==1&&(R.attrs=[["start",b]])):R=e.push("bullet_list_open","ul",1),R.map=h=[n,0],R.markup=String.fromCharCode(g),x=n,q=!1,D=e.md.block.ruler.getRules("list"),_=e.parentType,e.parentType="list";x<r;){for(A=N,w=e.eMarks[x],u=k=e.sCount[x]+N-(e.bMarks[n]+e.tShift[n]);A<w;){if(s=e.src.charCodeAt(A),s===9)k+=4-(k+e.bsCount[x])%4;else if(s===32)k++;else break;A++}if(i=A,i>=w?c=1:c=k-u,c>4&&(c=1),l=u+c,R=e.push("list_item_open","li",1),R.markup=String.fromCharCode(g),R.map=f=[n,0],T=e.tight,$=e.tShift[n],C=e.sCount[n],S=e.listIndent,e.listIndent=e.blkIndent,e.blkIndent=l,e.tight=!0,e.tShift[n]=i-e.bMarks[n],e.sCount[n]=k,i>=w&&e.isEmpty(n+1)?e.line=Math.min(e.line+2,r):e.md.block.tokenize(e,n,r,!0),(!e.tight||q)&&(we=!1),q=e.line-n>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=S,e.tShift[n]=$,e.sCount[n]=C,e.tight=T,R=e.push("list_item_close","li",-1),R.markup=String.fromCharCode(g),x=n=e.line,f[1]=x,i=e.bMarks[n],x>=r||e.sCount[x]<e.blkIndent||e.sCount[n]-e.blkIndent>=4)break;for(E=!1,a=0,p=D.length;a<p;a++)if(D[a](e,x,r,!0)){E=!0;break}if(E)break;if(d){if(N=Q2(e,x),N<0)break}else if(N=X2(e,x),N<0)break;if(g!==e.src.charCodeAt(N-1))break}return d?R=e.push("ordered_list_close","ol",-1):R=e.push("bullet_list_close","ul",-1),R.markup=String.fromCharCode(g),h[1]=x,e.line=x,e.parentType=_,we&&u4e(e,y),!0},f4e=Be.normalizeReference,sh=Be.isSpace,p4e=function(e,n,r,o){var s,i,a,l,c,u,d,f,p,h,y,g,b,w,x,k,S=0,_=e.bMarks[n]+e.tShift[n],C=e.eMarks[n],$=n+1;if(e.sCount[n]-e.blkIndent>=4||e.src.charCodeAt(_)!==91)return!1;for(;++_<C;)if(e.src.charCodeAt(_)===93&&e.src.charCodeAt(_-1)!==92){if(_+1===C||e.src.charCodeAt(_+1)!==58)return!1;break}for(l=e.lineMax,x=e.md.block.ruler.getRules("reference"),h=e.parentType,e.parentType="reference";$<l&&!e.isEmpty($);$++)if(!(e.sCount[$]-e.blkIndent>3)&&!(e.sCount[$]<0)){for(w=!1,u=0,d=x.length;u<d;u++)if(x[u](e,$,l,!0)){w=!0;break}if(w)break}for(b=e.getLines(n,$,e.blkIndent,!1).trim(),C=b.length,_=1;_<C;_++){if(s=b.charCodeAt(_),s===91)return!1;if(s===93){p=_;break}else s===10?S++:s===92&&(_++,_<C&&b.charCodeAt(_)===10&&S++)}if(p<0||b.charCodeAt(p+1)!==58)return!1;for(_=p+2;_<C;_++)if(s=b.charCodeAt(_),s===10)S++;else if(!sh(s))break;if(y=e.md.helpers.parseLinkDestination(b,_,C),!y.ok||(c=e.md.normalizeLink(y.str),!e.md.validateLink(c)))return!1;for(_=y.pos,S+=y.lines,i=_,a=S,g=_;_<C;_++)if(s=b.charCodeAt(_),s===10)S++;else if(!sh(s))break;for(y=e.md.helpers.parseLinkTitle(b,_,C),_<C&&g!==_&&y.ok?(k=y.str,_=y.pos,S+=y.lines):(k="",_=i,S=a);_<C&&(s=b.charCodeAt(_),!!sh(s));)_++;if(_<C&&b.charCodeAt(_)!==10&&k)for(k="",_=i,S=a;_<C&&(s=b.charCodeAt(_),!!sh(s));)_++;return _<C&&b.charCodeAt(_)!==10||(f=f4e(b.slice(1,p)),!f)?!1:(o||(typeof e.env.references=="undefined"&&(e.env.references={}),typeof e.env.references[f]=="undefined"&&(e.env.references[f]={title:k,href:c}),e.parentType=h,e.line=n+S+1),!0)},eT=Be.isSpace,h4e=function(e,n,r,o){var s,i,a,l,c=e.bMarks[n]+e.tShift[n],u=e.eMarks[n];if(e.sCount[n]-e.blkIndent>=4||(s=e.src.charCodeAt(c),s!==35||c>=u))return!1;for(i=1,s=e.src.charCodeAt(++c);s===35&&c<u&&i<=6;)i++,s=e.src.charCodeAt(++c);return i>6||c<u&&!eT(s)?!1:(o||(u=e.skipSpacesBack(u,c),a=e.skipCharsBack(u,35,c),a>c&&eT(e.src.charCodeAt(a-1))&&(u=a),e.line=n+1,l=e.push("heading_open","h"+String(i),1),l.markup="########".slice(0,i),l.map=[n,e.line],l=e.push("inline","",0),l.content=e.src.slice(c,u).trim(),l.map=[n,e.line],l.children=[],l=e.push("heading_close","h"+String(i),-1),l.markup="########".slice(0,i)),!0)},m4e=function(e,n,r){var o,s,i,a,l,c,u,d,f,p=n+1,h,y=e.md.block.ruler.getRules("paragraph");if(e.sCount[n]-e.blkIndent>=4)return!1;for(h=e.parentType,e.parentType="paragraph";p<r&&!e.isEmpty(p);p++)if(!(e.sCount[p]-e.blkIndent>3)){if(e.sCount[p]>=e.blkIndent&&(c=e.bMarks[p]+e.tShift[p],u=e.eMarks[p],c<u&&(f=e.src.charCodeAt(c),(f===45||f===61)&&(c=e.skipChars(c,f),c=e.skipSpaces(c),c>=u)))){d=f===61?1:2;break}if(!(e.sCount[p]<0)){for(s=!1,i=0,a=y.length;i<a;i++)if(y[i](e,p,r,!0)){s=!0;break}if(s)break}}return d?(o=e.getLines(n,p,e.blkIndent,!1).trim(),e.line=p+1,l=e.push("heading_open","h"+String(d),1),l.markup=String.fromCharCode(f),l.map=[n,e.line],l=e.push("inline","",0),l.content=o,l.map=[n,e.line-1],l.children=[],l=e.push("heading_close","h"+String(d),-1),l.markup=String.fromCharCode(f),e.parentType=h,!0):!1},g4e=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","meta","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],U1={},y4e="[a-zA-Z_:][a-zA-Z0-9:._-]*",b4e="[^\"'=<>`\\x00-\\x20]+",v4e="'[^']*'",w4e='"[^"]*"',x4e="(?:"+b4e+"|"+v4e+"|"+w4e+")",k4e="(?:\\s+"+y4e+"(?:\\s*=\\s*"+x4e+")?)",VM="<[A-Za-z][A-Za-z0-9\\-]*"+k4e+"*\\s*\\/?>",UM="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",_4e="<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->",$4e="<[?].*?[?]>",E4e="<![A-Z]+\\s+[^>]*>",S4e="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",C4e=new RegExp("^(?:"+VM+"|"+UM+"|"+_4e+"|"+$4e+"|"+E4e+"|"+S4e+")"),T4e=new RegExp("^(?:"+VM+"|"+UM+")");U1.HTML_TAG_RE=C4e;U1.HTML_OPEN_CLOSE_TAG_RE=T4e;var A4e=g4e,N4e=U1.HTML_OPEN_CLOSE_TAG_RE,cl=[[/^<(script|pre|style)(?=(\s|>|$))/i,/<\/(script|pre|style)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+A4e.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(N4e.source+"\\s*$"),/^$/,!1]],P4e=function(e,n,r,o){var s,i,a,l,c=e.bMarks[n]+e.tShift[n],u=e.eMarks[n];if(e.sCount[n]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(c)!==60)return!1;for(l=e.src.slice(c,u),s=0;s<cl.length&&!cl[s][0].test(l);s++);if(s===cl.length)return!1;if(o)return cl[s][2];if(i=n+1,!cl[s][1].test(l)){for(;i<r&&!(e.sCount[i]<e.blkIndent);i++)if(c=e.bMarks[i]+e.tShift[i],u=e.eMarks[i],l=e.src.slice(c,u),cl[s][1].test(l)){l.length!==0&&i++;break}}return e.line=i,a=e.push("html_block","",0),a.map=[n,i],a.content=e.getLines(n,i,e.blkIndent,!0),!0},O4e=function(e,n){var r,o,s,i,a,l,c=n+1,u=e.md.block.ruler.getRules("paragraph"),d=e.lineMax;for(l=e.parentType,e.parentType="paragraph";c<d&&!e.isEmpty(c);c++)if(!(e.sCount[c]-e.blkIndent>3)&&!(e.sCount[c]<0)){for(o=!1,s=0,i=u.length;s<i;s++)if(u[s](e,c,d,!0)){o=!0;break}if(o)break}return r=e.getLines(n,c,e.blkIndent,!1).trim(),e.line=c,a=e.push("paragraph_open","p",1),a.map=[n,e.line],a=e.push("inline","",0),a.content=r,a.map=[n,e.line],a.children=[],a=e.push("paragraph_close","p",-1),e.parentType=l,!0},HM=V1,H1=Be.isSpace;function Ao(t,e,n,r){var o,s,i,a,l,c,u,d;for(this.src=t,this.md=e,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0,this.result="",s=this.src,d=!1,i=a=c=u=0,l=s.length;a<l;a++){if(o=s.charCodeAt(a),!d)if(H1(o)){c++,o===9?u+=4-u%4:u++;continue}else d=!0;(o===10||a===l-1)&&(o!==10&&a++,this.bMarks.push(i),this.eMarks.push(a),this.tShift.push(c),this.sCount.push(u),this.bsCount.push(0),d=!1,c=0,u=0,i=a+1)}this.bMarks.push(s.length),this.eMarks.push(s.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}Ao.prototype.push=function(t,e,n){var r=new HM(t,e,n);return r.block=!0,n<0&&this.level--,r.level=this.level,n>0&&this.level++,this.tokens.push(r),r};Ao.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]};Ao.prototype.skipEmptyLines=function(e){for(var n=this.lineMax;e<n&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e};Ao.prototype.skipSpaces=function(e){for(var n,r=this.src.length;e<r&&(n=this.src.charCodeAt(e),!!H1(n));e++);return e};Ao.prototype.skipSpacesBack=function(e,n){if(e<=n)return e;for(;e>n;)if(!H1(this.src.charCodeAt(--e)))return e+1;return e};Ao.prototype.skipChars=function(e,n){for(var r=this.src.length;e<r&&this.src.charCodeAt(e)===n;e++);return e};Ao.prototype.skipCharsBack=function(e,n,r){if(e<=r)return e;for(;e>r;)if(n!==this.src.charCodeAt(--e))return e+1;return e};Ao.prototype.getLines=function(e,n,r,o){var s,i,a,l,c,u,d,f=e;if(e>=n)return"";for(u=new Array(n-e),s=0;f<n;f++,s++){for(i=0,d=l=this.bMarks[f],f+1<n||o?c=this.eMarks[f]+1:c=this.eMarks[f];l<c&&i<r;){if(a=this.src.charCodeAt(l),H1(a))a===9?i+=4-(i+this.bsCount[f])%4:i++;else if(l-d<this.tShift[f])i++;else break;l++}i>r?u[s]=new Array(i-r+1).join(" ")+this.src.slice(l,c):u[s]=this.src.slice(l,c)}return u.join("")};Ao.prototype.Token=HM;var I4e=Ao,R4e=j_,ih=[["table",o4e,["paragraph","reference"]],["code",s4e],["fence",i4e,["paragraph","reference","blockquote","list"]],["blockquote",a4e,["paragraph","reference","blockquote","list"]],["hr",c4e,["paragraph","reference","blockquote","list"]],["list",d4e,["paragraph","reference","blockquote"]],["reference",p4e],["heading",h4e,["paragraph","reference","blockquote"]],["lheading",m4e],["html_block",P4e,["paragraph","reference","blockquote"]],["paragraph",O4e]];function K1(){this.ruler=new R4e;for(var t=0;t<ih.length;t++)this.ruler.push(ih[t][0],ih[t][1],{alt:(ih[t][2]||[]).slice()})}K1.prototype.tokenize=function(t,e,n){for(var r,o,s=this.ruler.getRules(""),i=s.length,a=e,l=!1,c=t.md.options.maxNesting;a<n&&(t.line=a=t.skipEmptyLines(a),!(a>=n||t.sCount[a]<t.blkIndent));){if(t.level>=c){t.line=n;break}for(o=0;o<i&&(r=s[o](t,a,n,!1),!r);o++);t.tight=!l,t.isEmpty(t.line-1)&&(l=!0),a=t.line,a<n&&t.isEmpty(a)&&(l=!0,a++,t.line=a)}};K1.prototype.parse=function(t,e,n,r){var o;t&&(o=new this.State(t,e,n,r),this.tokenize(o,o.line,o.lineMax))};K1.prototype.State=I4e;var M4e=K1;function D4e(t){switch(t){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}var L4e=function(e,n){for(var r=e.pos;r<e.posMax&&!D4e(e.src.charCodeAt(r));)r++;return r===e.pos?!1:(n||(e.pending+=e.src.slice(e.pos,r)),e.pos=r,!0)},j4e=Be.isSpace,F4e=function(e,n){var r,o,s=e.pos;if(e.src.charCodeAt(s)!==10)return!1;for(r=e.pending.length-1,o=e.posMax,n||(r>=0&&e.pending.charCodeAt(r)===32?r>=1&&e.pending.charCodeAt(r-1)===32?(e.pending=e.pending.replace(/ +$/,""),e.push("hardbreak","br",0)):(e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0)):e.push("softbreak","br",0)),s++;s<o&&j4e(e.src.charCodeAt(s));)s++;return e.pos=s,!0},B4e=Be.isSpace,B_=[];for(var tT=0;tT<256;tT++)B_.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(t){B_[t.charCodeAt(0)]=1});var z4e=function(e,n){var r,o=e.pos,s=e.posMax;if(e.src.charCodeAt(o)!==92)return!1;if(o++,o<s){if(r=e.src.charCodeAt(o),r<256&&B_[r]!==0)return n||(e.pending+=e.src[o]),e.pos+=2,!0;if(r===10){for(n||e.push("hardbreak","br",0),o++;o<s&&(r=e.src.charCodeAt(o),!!B4e(r));)o++;return e.pos=o,!0}}return n||(e.pending+="\\"),e.pos++,!0},q4e=function(e,n){var r,o,s,i,a,l,c=e.pos,u=e.src.charCodeAt(c);if(u!==96)return!1;for(r=c,c++,o=e.posMax;c<o&&e.src.charCodeAt(c)===96;)c++;for(s=e.src.slice(r,c),i=a=c;(i=e.src.indexOf("`",a))!==-1;){for(a=i+1;a<o&&e.src.charCodeAt(a)===96;)a++;if(a-i===s.length)return n||(l=e.push("code_inline","code",0),l.markup=s,l.content=e.src.slice(c,i).replace(/\n/g," ").replace(/^ (.+) $/,"$1")),e.pos=a,!0}return n||(e.pending+=s),e.pos+=s.length,!0},G1={};G1.tokenize=function(e,n){var r,o,s,i,a,l=e.pos,c=e.src.charCodeAt(l);if(n||c!==126||(o=e.scanDelims(e.pos,!0),i=o.length,a=String.fromCharCode(c),i<2))return!1;for(i%2&&(s=e.push("text","",0),s.content=a,i--),r=0;r<i;r+=2)s=e.push("text","",0),s.content=a+a,e.delimiters.push({marker:c,length:0,jump:r,token:e.tokens.length-1,end:-1,open:o.can_open,close:o.can_close});return e.pos+=o.length,!0};function nT(t,e){var n,r,o,s,i,a=[],l=e.length;for(n=0;n<l;n++)o=e[n],o.marker===126&&o.end!==-1&&(s=e[o.end],i=t.tokens[o.token],i.type="s_open",i.tag="s",i.nesting=1,i.markup="~~",i.content="",i=t.tokens[s.token],i.type="s_close",i.tag="s",i.nesting=-1,i.markup="~~",i.content="",t.tokens[s.token-1].type==="text"&&t.tokens[s.token-1].content==="~"&&a.push(s.token-1));for(;a.length;){for(n=a.pop(),r=n+1;r<t.tokens.length&&t.tokens[r].type==="s_close";)r++;r--,n!==r&&(i=t.tokens[r],t.tokens[r]=t.tokens[n],t.tokens[n]=i)}}G1.postProcess=function(e){var n,r=e.tokens_meta,o=e.tokens_meta.length;for(nT(e,e.delimiters),n=0;n<o;n++)r[n]&&r[n].delimiters&&nT(e,r[n].delimiters)};var Z1={};Z1.tokenize=function(e,n){var r,o,s,i=e.pos,a=e.src.charCodeAt(i);if(n||a!==95&&a!==42)return!1;for(o=e.scanDelims(e.pos,a===42),r=0;r<o.length;r++)s=e.push("text","",0),s.content=String.fromCharCode(a),e.delimiters.push({marker:a,length:o.length,jump:r,token:e.tokens.length-1,end:-1,open:o.can_open,close:o.can_close});return e.pos+=o.length,!0};function rT(t,e){var n,r,o,s,i,a,l=e.length;for(n=l-1;n>=0;n--)r=e[n],!(r.marker!==95&&r.marker!==42)&&r.end!==-1&&(o=e[r.end],a=n>0&&e[n-1].end===r.end+1&&e[n-1].token===r.token-1&&e[r.end+1].token===o.token+1&&e[n-1].marker===r.marker,i=String.fromCharCode(r.marker),s=t.tokens[r.token],s.type=a?"strong_open":"em_open",s.tag=a?"strong":"em",s.nesting=1,s.markup=a?i+i:i,s.content="",s=t.tokens[o.token],s.type=a?"strong_close":"em_close",s.tag=a?"strong":"em",s.nesting=-1,s.markup=a?i+i:i,s.content="",a&&(t.tokens[e[n-1].token].content="",t.tokens[e[r.end+1].token].content="",n--))}Z1.postProcess=function(e){var n,r=e.tokens_meta,o=e.tokens_meta.length;for(rT(e,e.delimiters),n=0;n<o;n++)r[n]&&r[n].delimiters&&rT(e,r[n].delimiters)};var W4e=Be.normalizeReference,Zb=Be.isSpace,V4e=function(e,n){var r,o,s,i,a,l,c,u,d,f,p="",h=e.pos,y=e.posMax,g=e.pos,b=!0;if(e.src.charCodeAt(e.pos)!==91||(a=e.pos+1,i=e.md.helpers.parseLinkLabel(e,e.pos,!0),i<0))return!1;if(l=i+1,l<y&&e.src.charCodeAt(l)===40){for(b=!1,l++;l<y&&(o=e.src.charCodeAt(l),!(!Zb(o)&&o!==10));l++);if(l>=y)return!1;for(g=l,c=e.md.helpers.parseLinkDestination(e.src,l,e.posMax),c.ok&&(p=e.md.normalizeLink(c.str),e.md.validateLink(p)?l=c.pos:p=""),g=l;l<y&&(o=e.src.charCodeAt(l),!(!Zb(o)&&o!==10));l++);if(c=e.md.helpers.parseLinkTitle(e.src,l,e.posMax),l<y&&g!==l&&c.ok)for(d=c.str,l=c.pos;l<y&&(o=e.src.charCodeAt(l),!(!Zb(o)&&o!==10));l++);else d="";(l>=y||e.src.charCodeAt(l)!==41)&&(b=!0),l++}if(b){if(typeof e.env.references=="undefined")return!1;if(l<y&&e.src.charCodeAt(l)===91?(g=l+1,l=e.md.helpers.parseLinkLabel(e,l),l>=0?s=e.src.slice(g,l++):l=i+1):l=i+1,s||(s=e.src.slice(a,i)),u=e.env.references[W4e(s)],!u)return e.pos=h,!1;p=u.href,d=u.title}return n||(e.pos=a,e.posMax=i,f=e.push("link_open","a",1),f.attrs=r=[["href",p]],d&&r.push(["title",d]),e.md.inline.tokenize(e),f=e.push("link_close","a",-1)),e.pos=l,e.posMax=y,!0},U4e=Be.normalizeReference,Jb=Be.isSpace,H4e=function(e,n){var r,o,s,i,a,l,c,u,d,f,p,h,y,g="",b=e.pos,w=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91||(l=e.pos+2,a=e.md.helpers.parseLinkLabel(e,e.pos+1,!1),a<0))return!1;if(c=a+1,c<w&&e.src.charCodeAt(c)===40){for(c++;c<w&&(o=e.src.charCodeAt(c),!(!Jb(o)&&o!==10));c++);if(c>=w)return!1;for(y=c,d=e.md.helpers.parseLinkDestination(e.src,c,e.posMax),d.ok&&(g=e.md.normalizeLink(d.str),e.md.validateLink(g)?c=d.pos:g=""),y=c;c<w&&(o=e.src.charCodeAt(c),!(!Jb(o)&&o!==10));c++);if(d=e.md.helpers.parseLinkTitle(e.src,c,e.posMax),c<w&&y!==c&&d.ok)for(f=d.str,c=d.pos;c<w&&(o=e.src.charCodeAt(c),!(!Jb(o)&&o!==10));c++);else f="";if(c>=w||e.src.charCodeAt(c)!==41)return e.pos=b,!1;c++}else{if(typeof e.env.references=="undefined")return!1;if(c<w&&e.src.charCodeAt(c)===91?(y=c+1,c=e.md.helpers.parseLinkLabel(e,c),c>=0?i=e.src.slice(y,c++):c=a+1):c=a+1,i||(i=e.src.slice(l,a)),u=e.env.references[U4e(i)],!u)return e.pos=b,!1;g=u.href,f=u.title}return n||(s=e.src.slice(l,a),e.md.inline.parse(s,e.md,e.env,h=[]),p=e.push("image","img",0),p.attrs=r=[["src",g],["alt",""]],p.children=h,p.content=s,f&&r.push(["title",f])),e.pos=c,e.posMax=w,!0},oT=/^<([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/,sT=/^<([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)>/,K4e=function(e,n){var r,o,s,i,a,l,c=e.pos;return e.src.charCodeAt(c)!==60||(r=e.src.slice(c),r.indexOf(">")<0)?!1:sT.test(r)?(o=r.match(sT),i=o[0].slice(1,-1),a=e.md.normalizeLink(i),e.md.validateLink(a)?(n||(l=e.push("link_open","a",1),l.attrs=[["href",a]],l.markup="autolink",l.info="auto",l=e.push("text","",0),l.content=e.md.normalizeLinkText(i),l=e.push("link_close","a",-1),l.markup="autolink",l.info="auto"),e.pos+=o[0].length,!0):!1):oT.test(r)?(s=r.match(oT),i=s[0].slice(1,-1),a=e.md.normalizeLink("mailto:"+i),e.md.validateLink(a)?(n||(l=e.push("link_open","a",1),l.attrs=[["href",a]],l.markup="autolink",l.info="auto",l=e.push("text","",0),l.content=e.md.normalizeLinkText(i),l=e.push("link_close","a",-1),l.markup="autolink",l.info="auto"),e.pos+=s[0].length,!0):!1):!1},G4e=U1.HTML_TAG_RE;function Z4e(t){var e=t|32;return e>=97&&e<=122}var J4e=function(e,n){var r,o,s,i,a=e.pos;return!e.md.options.html||(s=e.posMax,e.src.charCodeAt(a)!==60||a+2>=s)||(r=e.src.charCodeAt(a+1),r!==33&&r!==63&&r!==47&&!Z4e(r))||(o=e.src.slice(a).match(G4e),!o)?!1:(n||(i=e.push("html_inline","",0),i.content=e.src.slice(a,a+o[0].length)),e.pos+=o[0].length,!0)},iT=FM,Y4e=Be.has,X4e=Be.isValidEntityCode,aT=Be.fromCodePoint,Q4e=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,eMe=/^&([a-z][a-z0-9]{1,31});/i,tMe=function(e,n){var r,o,s,i=e.pos,a=e.posMax;if(e.src.charCodeAt(i)!==38)return!1;if(i+1<a){if(r=e.src.charCodeAt(i+1),r===35){if(s=e.src.slice(i).match(Q4e),s)return n||(o=s[1][0].toLowerCase()==="x"?parseInt(s[1].slice(1),16):parseInt(s[1],10),e.pending+=X4e(o)?aT(o):aT(65533)),e.pos+=s[0].length,!0}else if(s=e.src.slice(i).match(eMe),s&&Y4e(iT,s[1]))return n||(e.pending+=iT[s[1]]),e.pos+=s[0].length,!0}return n||(e.pending+="&"),e.pos++,!0};function lT(t,e){var n,r,o,s,i,a,l,c,u={},d=e.length;for(n=0;n<d;n++)if(o=e[n],o.length=o.length||0,!!o.close){for(u.hasOwnProperty(o.marker)||(u[o.marker]=[-1,-1,-1]),i=u[o.marker][o.length%3],a=-1,r=n-o.jump-1;r>i;r-=s.jump+1)if(s=e[r],s.marker===o.marker&&(a===-1&&(a=r),s.open&&s.end<0&&s.level===o.level&&(l=!1,(s.close||o.open)&&(s.length+o.length)%3===0&&(s.length%3!==0||o.length%3!==0)&&(l=!0),!l))){c=r>0&&!e[r-1].open?e[r-1].jump+1:0,o.jump=n-r+c,o.open=!1,s.end=n,s.jump=c,s.close=!1,a=-1;break}a!==-1&&(u[o.marker][(o.length||0)%3]=a)}}var nMe=function(e){var n,r=e.tokens_meta,o=e.tokens_meta.length;for(lT(e,e.delimiters),n=0;n<o;n++)r[n]&&r[n].delimiters&&lT(e,r[n].delimiters)},rMe=function(e){var n,r,o=0,s=e.tokens,i=e.tokens.length;for(n=r=0;n<i;n++)s[n].nesting<0&&o--,s[n].level=o,s[n].nesting>0&&o++,s[n].type==="text"&&n+1<i&&s[n+1].type==="text"?s[n+1].content=s[n].content+s[n+1].content:(n!==r&&(s[r]=s[n]),r++);n!==r&&(s.length=r)},z_=V1,cT=Be.isWhiteSpace,uT=Be.isPunctChar,dT=Be.isMdAsciiPunct;function hp(t,e,n,r){this.src=t,this.env=n,this.md=e,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[]}hp.prototype.pushPending=function(){var t=new z_("text","",0);return t.content=this.pending,t.level=this.pendingLevel,this.tokens.push(t),this.pending="",t};hp.prototype.push=function(t,e,n){this.pending&&this.pushPending();var r=new z_(t,e,n),o=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],o={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(o),r};hp.prototype.scanDelims=function(t,e){var n=t,r,o,s,i,a,l,c,u,d,f=!0,p=!0,h=this.posMax,y=this.src.charCodeAt(t);for(r=t>0?this.src.charCodeAt(t-1):32;n<h&&this.src.charCodeAt(n)===y;)n++;return s=n-t,o=n<h?this.src.charCodeAt(n):32,c=dT(r)||uT(String.fromCharCode(r)),d=dT(o)||uT(String.fromCharCode(o)),l=cT(r),u=cT(o),u?f=!1:d&&(l||c||(f=!1)),l?p=!1:c&&(u||d||(p=!1)),e?(i=f,a=p):(i=f&&(!p||c),a=p&&(!f||d)),{can_open:i,can_close:a,length:s}};hp.prototype.Token=z_;var oMe=hp,fT=j_,Yb=[["text",L4e],["newline",F4e],["escape",z4e],["backticks",q4e],["strikethrough",G1.tokenize],["emphasis",Z1.tokenize],["link",V4e],["image",H4e],["autolink",K4e],["html_inline",J4e],["entity",tMe]],Xb=[["balance_pairs",nMe],["strikethrough",G1.postProcess],["emphasis",Z1.postProcess],["text_collapse",rMe]];function mp(){var t;for(this.ruler=new fT,t=0;t<Yb.length;t++)this.ruler.push(Yb[t][0],Yb[t][1]);for(this.ruler2=new fT,t=0;t<Xb.length;t++)this.ruler2.push(Xb[t][0],Xb[t][1])}mp.prototype.skipToken=function(t){var e,n,r=t.pos,o=this.ruler.getRules(""),s=o.length,i=t.md.options.maxNesting,a=t.cache;if(typeof a[r]!="undefined"){t.pos=a[r];return}if(t.level<i)for(n=0;n<s&&(t.level++,e=o[n](t,!0),t.level--,!e);n++);else t.pos=t.posMax;e||t.pos++,a[r]=t.pos};mp.prototype.tokenize=function(t){for(var e,n,r=this.ruler.getRules(""),o=r.length,s=t.posMax,i=t.md.options.maxNesting;t.pos<s;){if(t.level<i)for(n=0;n<o&&(e=r[n](t,!1),!e);n++);if(e){if(t.pos>=s)break;continue}t.pending+=t.src[t.pos++]}t.pending&&t.pushPending()};mp.prototype.parse=function(t,e,n,r){var o,s,i,a=new this.State(t,e,n,r);for(this.tokenize(a),s=this.ruler2.getRules(""),i=s.length,o=0;o<i;o++)s[o](a)};mp.prototype.State=oMe;var sMe=mp,Qb,pT;function iMe(){return pT||(pT=1,Qb=function(t){var e={};e.src_Any=M_().source,e.src_Cc=D_().source,e.src_Z=L_().source,e.src_P=pp.source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");var n="[><]";return e.src_pseudo_letter="(?:(?!"+n+"|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|"+n+"|"+e.src_ZPCc+")(?!-|_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-]).|\\[(?:(?!`+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-]).|\\.{2,4}[a-zA-Z0-9%/]|\\.(?!"+e.src_ZCc+"|[.]).|"+(t&&t["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+"\\,(?!"+e.src_ZCc+").|\\!(?!"+e.src_ZCc+"|[!]).|\\?(?!"+e.src_ZCc+"|[?]).)+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}),Qb}function $w(t){var e=Array.prototype.slice.call(arguments,1);return e.forEach(function(n){n&&Object.keys(n).forEach(function(r){t[r]=n[r]})}),t}function J1(t){return Object.prototype.toString.call(t)}function aMe(t){return J1(t)==="[object String]"}function lMe(t){return J1(t)==="[object Object]"}function cMe(t){return J1(t)==="[object RegExp]"}function hT(t){return J1(t)==="[object Function]"}function uMe(t){return t.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var KM={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function dMe(t){return Object.keys(t||{}).reduce(function(e,n){return e||KM.hasOwnProperty(n)},!1)}var fMe={"http:":{validate:function(t,e,n){var r=t.slice(e);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(t,e,n){var r=t.slice(e);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?e>=3&&t[e-3]===":"||e>=3&&t[e-3]==="/"?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(t,e,n){var r=t.slice(e);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},pMe="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",hMe="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function mMe(t){t.__index__=-1,t.__text_cache__=""}function gMe(t){return function(e,n){var r=e.slice(n);return t.test(r)?r.match(t)[0].length:0}}function mT(){return function(t,e){e.normalize(t)}}function ug(t){var e=t.re=iMe()(t.__opts__),n=t.__tlds__.slice();t.onCompile(),t.__tlds_replaced__||n.push(pMe),n.push(e.src_xn),e.src_tlds=n.join("|");function r(a){return a.replace("%TLDS%",e.src_tlds)}e.email_fuzzy=RegExp(r(e.tpl_email_fuzzy),"i"),e.link_fuzzy=RegExp(r(e.tpl_link_fuzzy),"i"),e.link_no_ip_fuzzy=RegExp(r(e.tpl_link_no_ip_fuzzy),"i"),e.host_fuzzy_test=RegExp(r(e.tpl_host_fuzzy_test),"i");var o=[];t.__compiled__={};function s(a,l){throw new Error('(LinkifyIt) Invalid schema "'+a+'": '+l)}Object.keys(t.__schemas__).forEach(function(a){var l=t.__schemas__[a];if(l!==null){var c={validate:null,link:null};if(t.__compiled__[a]=c,lMe(l)){cMe(l.validate)?c.validate=gMe(l.validate):hT(l.validate)?c.validate=l.validate:s(a,l),hT(l.normalize)?c.normalize=l.normalize:l.normalize?s(a,l):c.normalize=mT();return}if(aMe(l)){o.push(a);return}s(a,l)}}),o.forEach(function(a){t.__compiled__[t.__schemas__[a]]&&(t.__compiled__[a].validate=t.__compiled__[t.__schemas__[a]].validate,t.__compiled__[a].normalize=t.__compiled__[t.__schemas__[a]].normalize)}),t.__compiled__[""]={validate:null,normalize:mT()};var i=Object.keys(t.__compiled__).filter(function(a){return a.length>0&&t.__compiled__[a]}).map(uMe).join("|");t.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+i+")","i"),t.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+i+")","ig"),t.re.pretest=RegExp("("+t.re.schema_test.source+")|("+t.re.host_fuzzy_test.source+")|@","i"),mMe(t)}function yMe(t,e){var n=t.__index__,r=t.__last_index__,o=t.__text_cache__.slice(n,r);this.schema=t.__schema__.toLowerCase(),this.index=n+e,this.lastIndex=r+e,this.raw=o,this.text=o,this.url=o}function gT(t,e){var n=new yMe(t,e);return t.__compiled__[n.schema].normalize(n,t),n}function yr(t,e){if(!(this instanceof yr))return new yr(t,e);e||dMe(t)&&(e=t,t={}),this.__opts__=$w({},KM,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=$w({},fMe,t),this.__compiled__={},this.__tlds__=hMe,this.__tlds_replaced__=!1,this.re={},ug(this)}yr.prototype.add=function(e,n){return this.__schemas__[e]=n,ug(this),this};yr.prototype.set=function(e){return this.__opts__=$w(this.__opts__,e),this};yr.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;var n,r,o,s,i,a,l,c,u;if(this.re.schema_test.test(e)){for(l=this.re.schema_search,l.lastIndex=0;(n=l.exec(e))!==null;)if(s=this.testSchemaAt(e,n[2],l.lastIndex),s){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+s;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(c=e.search(this.re.host_fuzzy_test),c>=0&&(this.__index__<0||c<this.__index__)&&(r=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(i=r.index+r[1].length,(this.__index__<0||i<this.__index__)&&(this.__schema__="",this.__index__=i,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(u=e.indexOf("@"),u>=0&&(o=e.match(this.re.email_fuzzy))!==null&&(i=o.index+o[1].length,a=o.index+o[0].length,(this.__index__<0||i<this.__index__||i===this.__index__&&a>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=i,this.__last_index__=a))),this.__index__>=0};yr.prototype.pretest=function(e){return this.re.pretest.test(e)};yr.prototype.testSchemaAt=function(e,n,r){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(e,r,this):0};yr.prototype.match=function(e){var n=0,r=[];this.__index__>=0&&this.__text_cache__===e&&(r.push(gT(this,n)),n=this.__last_index__);for(var o=n?e.slice(n):e;this.test(o);)r.push(gT(this,n)),o=o.slice(this.__last_index__),n+=this.__last_index__;return r.length?r:null};yr.prototype.tlds=function(e,n){return e=Array.isArray(e)?e:[e],n?(this.__tlds__=this.__tlds__.concat(e).sort().filter(function(r,o,s){return r!==s[o-1]}).reverse(),ug(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,ug(this),this)};yr.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),e.schema==="mailto:"&&!/^mailto:/i.test(e.url)&&(e.url="mailto:"+e.url)};yr.prototype.onCompile=function(){};var bMe=yr;const Xl=2147483647,uo=36,q_=1,kf=26,vMe=38,wMe=700,GM=72,ZM=128,JM="-",xMe=/^xn--/,kMe=/[^\0-\x7F]/,_Me=/[\x2E\u3002\uFF0E\uFF61]/g,$Me={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},ev=uo-q_,fo=Math.floor,tv=String.fromCharCode;function Os(t){throw new RangeError($Me[t])}function EMe(t,e){const n=[];let r=t.length;for(;r--;)n[r]=e(t[r]);return n}function YM(t,e){const n=t.split("@");let r="";n.length>1&&(r=n[0]+"@",t=n[1]),t=t.replace(_Me,".");const o=t.split("."),s=EMe(o,e).join(".");return r+s}function W_(t){const e=[];let n=0;const r=t.length;for(;n<r;){const o=t.charCodeAt(n++);if(o>=55296&&o<=56319&&n<r){const s=t.charCodeAt(n++);(s&64512)==56320?e.push(((o&1023)<<10)+(s&1023)+65536):(e.push(o),n--)}else e.push(o)}return e}const XM=t=>String.fromCodePoint(...t),SMe=function(t){return t>=48&&t<58?26+(t-48):t>=65&&t<91?t-65:t>=97&&t<123?t-97:uo},yT=function(t,e){return t+22+75*(t<26)-((e!=0)<<5)},QM=function(t,e,n){let r=0;for(t=n?fo(t/wMe):t>>1,t+=fo(t/e);t>ev*kf>>1;r+=uo)t=fo(t/ev);return fo(r+(ev+1)*t/(t+vMe))},V_=function(t){const e=[],n=t.length;let r=0,o=ZM,s=GM,i=t.lastIndexOf(JM);i<0&&(i=0);for(let a=0;a<i;++a)t.charCodeAt(a)>=128&&Os("not-basic"),e.push(t.charCodeAt(a));for(let a=i>0?i+1:0;a<n;){const l=r;for(let u=1,d=uo;;d+=uo){a>=n&&Os("invalid-input");const f=SMe(t.charCodeAt(a++));f>=uo&&Os("invalid-input"),f>fo((Xl-r)/u)&&Os("overflow"),r+=f*u;const p=d<=s?q_:d>=s+kf?kf:d-s;if(f<p)break;const h=uo-p;u>fo(Xl/h)&&Os("overflow"),u*=h}const c=e.length+1;s=QM(r-l,c,l==0),fo(r/c)>Xl-o&&Os("overflow"),o+=fo(r/c),r%=c,e.splice(r++,0,o)}return String.fromCodePoint(...e)},U_=function(t){const e=[];t=W_(t);const n=t.length;let r=ZM,o=0,s=GM;for(const l of t)l<128&&e.push(tv(l));const i=e.length;let a=i;for(i&&e.push(JM);a<n;){let l=Xl;for(const u of t)u>=r&&u<l&&(l=u);const c=a+1;l-r>fo((Xl-o)/c)&&Os("overflow"),o+=(l-r)*c,r=l;for(const u of t)if(u<r&&++o>Xl&&Os("overflow"),u===r){let d=o;for(let f=uo;;f+=uo){const p=f<=s?q_:f>=s+kf?kf:f-s;if(d<p)break;const h=d-p,y=uo-p;e.push(tv(yT(p+h%y,0))),d=fo(h/y)}e.push(tv(yT(d,0))),s=QM(o,c,a===i),o=0,++a}++o,++r}return e.join("")},eD=function(t){return YM(t,function(e){return xMe.test(e)?V_(e.slice(4).toLowerCase()):e})},tD=function(t){return YM(t,function(e){return kMe.test(e)?"xn--"+U_(e):e})},CMe={version:"2.1.0",ucs2:{decode:W_,encode:XM},decode:V_,encode:U_,toASCII:tD,toUnicode:eD},TMe=Object.freeze(Object.defineProperty({__proto__:null,decode:V_,default:CMe,encode:U_,toASCII:tD,toUnicode:eD,ucs2decode:W_,ucs2encode:XM},Symbol.toStringTag,{value:"Module"})),nD=Nj(TMe);var AMe={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},NMe={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","text_collapse"]}}},PMe={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","text_collapse"]}}},xd=Be,OMe=W1,IMe=I3e,RMe=n4e,MMe=M4e,DMe=sMe,LMe=bMe,Ql=Ii,rD=nD,jMe={default:AMe,zero:NMe,commonmark:PMe},FMe=/^(vbscript|javascript|file|data):/,BMe=/^data:image\/(gif|png|jpeg|webp);/;function zMe(t){var e=t.trim().toLowerCase();return FMe.test(e)?!!BMe.test(e):!0}var oD=["http:","https:","mailto:"];function qMe(t){var e=Ql.parse(t,!0);if(e.hostname&&(!e.protocol||oD.indexOf(e.protocol)>=0))try{e.hostname=rD.toASCII(e.hostname)}catch(n){}return Ql.encode(Ql.format(e))}function WMe(t){var e=Ql.parse(t,!0);if(e.hostname&&(!e.protocol||oD.indexOf(e.protocol)>=0))try{e.hostname=rD.toUnicode(e.hostname)}catch(n){}return Ql.decode(Ql.format(e))}function br(t,e){if(!(this instanceof br))return new br(t,e);e||xd.isString(t)||(e=t||{},t="default"),this.inline=new DMe,this.block=new MMe,this.core=new RMe,this.renderer=new IMe,this.linkify=new LMe,this.validateLink=zMe,this.normalizeLink=qMe,this.normalizeLinkText=WMe,this.utils=xd,this.helpers=xd.assign({},OMe),this.options={},this.configure(t),e&&this.set(e)}br.prototype.set=function(t){return xd.assign(this.options,t),this};br.prototype.configure=function(t){var e=this,n;if(xd.isString(t)&&(n=t,t=jMe[n],!t))throw new Error('Wrong `markdown-it` preset "'+n+'", check name');if(!t)throw new Error("Wrong `markdown-it` preset, can't be empty");return t.options&&e.set(t.options),t.components&&Object.keys(t.components).forEach(function(r){t.components[r].rules&&e[r].ruler.enableOnly(t.components[r].rules),t.components[r].rules2&&e[r].ruler2.enableOnly(t.components[r].rules2)}),this};br.prototype.enable=function(t,e){var n=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(o){n=n.concat(this[o].ruler.enable(t,!0))},this),n=n.concat(this.inline.ruler2.enable(t,!0));var r=t.filter(function(o){return n.indexOf(o)<0});if(r.length&&!e)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};br.prototype.disable=function(t,e){var n=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(o){n=n.concat(this[o].ruler.disable(t,!0))},this),n=n.concat(this.inline.ruler2.disable(t,!0));var r=t.filter(function(o){return n.indexOf(o)<0});if(r.length&&!e)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};br.prototype.use=function(t){var e=[this].concat(Array.prototype.slice.call(arguments,1));return t.apply(t,e),this};br.prototype.parse=function(t,e){if(typeof t!="string")throw new Error("Input data should be a String");var n=new this.core.State(t,this,e);return this.core.process(n),n.tokens};br.prototype.render=function(t,e){return e=e||{},this.renderer.render(this.parse(t,e),this.options,e)};br.prototype.parseInline=function(t,e){var n=new this.core.State(t,this,e);return n.inlineMode=!0,this.core.process(n),n.tokens};br.prototype.renderInline=function(t,e){return e=e||{},this.renderer.render(this.parseInline(t,e),this.options,e)};var VMe=br,UMe=VMe;const HMe=fs(UMe);var ze={};const KMe="",GMe="",ZMe="",JMe="",YMe="",XMe="",QMe="",eDe="",tDe="",nDe="",rDe="",oDe="",sDe="",iDe="",aDe="",lDe="",cDe="",uDe="",dDe="",fDe="",pDe="",hDe="",mDe="",gDe="",yDe="",bDe="",vDe="&",wDe="&",xDe="",kDe="",_De="",$De="",EDe="",SDe="",CDe="",TDe="",ADe="",NDe="",PDe="",ODe="",IDe="",RDe="",MDe="",DDe="",LDe="",jDe="",FDe="",BDe="",zDe="",qDe="",WDe="",VDe="",UDe="",HDe="",KDe="",GDe="",ZDe="",JDe="",YDe="",XDe="",QDe="",e5e="'",t5e="",n5e="",r5e="",o5e="",s5e="",i5e="",a5e="",l5e="",c5e="*",u5e="",d5e="",f5e="",p5e="",h5e="",m5e="",g5e="",y5e="",b5e="",v5e="",w5e="",x5e="",k5e="",_5e="",$5e="",E5e="",S5e="",C5e="",T5e="",A5e="",N5e="",P5e="",O5e="",I5e="",R5e="",M5e="",D5e="",L5e="",j5e="",F5e="",B5e="",z5e="",q5e="",W5e="",V5e="",U5e="",H5e="",K5e="",G5e="",Z5e="",J5e="",Y5e="",X5e="",Q5e="",e7e="",t7e="",n7e="",r7e="",o7e="",s7e="",i7e="",a7e="",l7e="",c7e="",u7e="",d7e="",f7e="",p7e="",h7e="",m7e="",g7e="",y7e="",b7e="",v7e="=",w7e="",x7e="",k7e="",_7e="",$7e="",E7e="",S7e="",C7e="",T7e="",A7e="",N7e="",P7e="",O7e="",I7e="",R7e="",M7e="",D7e="",L7e="",j7e="",F7e="",B7e="",z7e="",q7e="",W7e="",V7e="",U7e="",H7e="",K7e="",G7e="",Z7e="",J7e="",Y7e="",X7e="",Q7e="",e6e="",t6e="",n6e="",r6e="",o6e="",s6e="",i6e="",a6e="",l6e="",c6e="",u6e="",d6e="",f6e="",p6e="",h6e="",m6e="",g6e="",y6e="",b6e="",v6e="",w6e="",x6e="",k6e="",_6e="",$6e="",E6e="",S6e="",C6e="",T6e="\\",A6e="",N6e="",P6e="",O6e="",I6e="",R6e="",M6e="",D6e="",L6e="",j6e="",F6e="",B6e="",z6e="",q6e="",W6e="",V6e="",U6e="",H6e="",K6e="",G6e="",Z6e="",J6e="",Y6e="",X6e="",Q6e="",eLe="",tLe="",nLe="",rLe="",oLe="",sLe="",iLe="",aLe="",lLe="",cLe="",uLe="",dLe="",fLe="",pLe="",hLe="",mLe="",gLe="",yLe="",bLe="",vLe="",wLe="",xLe="",kLe="",_Le="",$Le="",ELe="",SLe="",CLe="",TLe="",ALe="",NLe="",PLe="",OLe="",ILe="",RLe="",MLe="",DLe="",LLe="",jLe="",FLe="",BLe="",zLe="",qLe="",WLe="",VLe="",ULe="",HLe="",KLe=":",GLe="",ZLe="",JLe="",YLe="",XLe=",",QLe="@",e9e="",t9e="",n9e="",r9e="",o9e="",s9e="",i9e="",a9e="",l9e="",c9e="",u9e="",d9e="",f9e="",p9e="",h9e="",m9e="",g9e="",y9e="",b9e="",v9e="",w9e="",x9e="",k9e="",_9e="",$9e="",E9e="",S9e="",C9e="",T9e="",A9e="",N9e="",P9e="",O9e="",I9e="",R9e="",M9e="",D9e="",L9e="",j9e="",F9e="",B9e="",z9e="",q9e="",W9e="",V9e="",U9e="",H9e="",K9e="",G9e="",Z9e="",J9e="",Y9e="",X9e="",Q9e="",e8e="",t8e="",n8e="",r8e="",o8e="",s8e="",i8e="",a8e="",l8e="",c8e="",u8e="",d8e="",f8e="",p8e="",h8e="",m8e="",g8e="",y8e="",b8e="",v8e="",w8e="",x8e="",k8e="",_8e="",$8e="",E8e="",S8e="",C8e="",T8e="",A8e="",N8e="",P8e="",O8e="",I8e="",R8e="",M8e="",D8e="",L8e="",j8e="`",F8e="",B8e="",z8e="",q8e="",W8e="",V8e="",U8e="",H8e="",K8e="",G8e="",Z8e="",J8e="",Y8e="",X8e="",Q8e="",eje="",tje="",nje="",rje="$",oje="",sje="",ije="",aje="",lje="",cje="",uje="",dje="",fje="",pje="",hje="",mje="",gje="",yje="",bje="",vje="",wje="",xje="",kje="",_je="",$je="",Eje="",Sje="",Cje="",Tje="",Aje="",Nje="",Pje="",Oje="",Ije="",Rje="",Mje="",Dje="",Lje="",jje="",Fje="",Bje="",zje="",qje="",Wje="",Vje="",Uje="",Hje="",Kje="",Gje="",Zje="",Jje="",Yje="",Xje="",Qje="",eFe="",tFe="",nFe="",rFe="",oFe="",sFe="",iFe="",aFe="",lFe="",cFe="",uFe="",dFe="",fFe="",pFe="",hFe="",mFe="",gFe="",yFe="",bFe="",vFe="",wFe="",xFe="",kFe="",_Fe="",$Fe="",EFe="",SFe="",CFe="",TFe="",AFe="",NFe="",PFe="",OFe="",IFe="",RFe="",MFe="",DFe="",LFe="",jFe="",FFe="",BFe="",zFe="",qFe="",WFe="",VFe="",UFe="",HFe="",KFe="",GFe="",ZFe="",JFe="",YFe="",XFe="",QFe="",eBe="",tBe="",nBe="",rBe="",oBe="",sBe="",iBe="",aBe="",lBe="",cBe="",uBe="",dBe="",fBe="",pBe="",hBe="",mBe="",gBe="",yBe="",bBe="",vBe="=",wBe="",xBe="",kBe="",_Be="",$Be="",EBe="",SBe="",CBe="",TBe="",ABe="",NBe="",PBe="",OBe="",IBe="",RBe="",MBe="",DBe="",LBe="",jBe="",FBe="",BBe="!",zBe="",qBe="",WBe="",VBe="",UBe="",HBe="",KBe="",GBe="",ZBe="",JBe="",YBe="",XBe="",QBe="",eze="",tze="",nze="",rze="",oze="fj",sze="",ize="",aze="",lze="",cze="",uze="",dze="",fze="",pze="",hze="",mze="",gze="",yze="",bze="",vze="",wze="",xze="",kze="",_ze="",$ze="",Eze="",Sze="",Cze="",Tze="",Aze="",Nze="",Pze="",Oze="",Ize="",Rze="",Mze="",Dze="",Lze="",jze="",Fze="",Bze="",zze="",qze="",Wze="",Vze="",Uze="",Hze="",Kze="",Gze="",Zze="",Jze="",Yze="",Xze="",Qze="",eqe="",tqe="",nqe="",rqe="",oqe="",sqe="",iqe="",aqe="",lqe="",cqe="",uqe="",dqe="",fqe="",pqe="",hqe="",mqe="",gqe="",yqe="",bqe="",vqe="",wqe="",xqe="",kqe="",_qe="",$qe="",Eqe="",Sqe="",Cqe="",Tqe="",Aqe="",Nqe="",Pqe="",Oqe="`",Iqe="",Rqe="",Mqe="",Dqe="",Lqe="",jqe="",Fqe="",Bqe="",zqe="",qqe="",Wqe="",Vqe="",Uqe="",Hqe="",Kqe=">",Gqe=">",Zqe="",Jqe="",Yqe="",Xqe="",Qqe="",eWe="",tWe="",nWe="",rWe="",oWe="",sWe="",iWe="",aWe="",lWe="",cWe="",uWe="",dWe="",fWe="",pWe="",hWe="",mWe="",gWe="",yWe="",bWe="^",vWe="",wWe="",xWe="",kWe="",_We="",$We="",EWe="",SWe="",CWe="",TWe="",AWe="",NWe="",PWe="",OWe="",IWe="",RWe="",MWe="",DWe="",LWe="",jWe="",FWe="",BWe="",zWe="",qWe="",WWe="",VWe="",UWe="",HWe="",KWe="",GWe="",ZWe="",JWe="",YWe="",XWe="",QWe="",eVe="",tVe="",nVe="",rVe="",oVe="",sVe="",iVe="",aVe="",lVe="",cVe="",uVe="",dVe="",fVe="",pVe="",hVe="",mVe="",gVe="",yVe="",bVe="",vVe="",wVe="",xVe="",kVe="",_Ve="",$Ve="",EVe="",SVe="",CVe="",TVe="",AVe="",NVe="",PVe="",OVe="",IVe="",RVe="",MVe="",DVe="",LVe="",jVe="",FVe="",BVe="",zVe="",qVe="",WVe="",VVe="",UVe="",HVe="",KVe="",GVe="",ZVe="",JVe="",YVe="",XVe="",QVe="",eUe="",tUe="",nUe="",rUe="",oUe="",sUe="",iUe="",aUe="",lUe="",cUe="",uUe="",dUe="",fUe="",pUe="",hUe="",mUe="",gUe="",yUe="",bUe="",vUe="",wUe="",xUe="",kUe="",_Ue="",$Ue="",EUe="",SUe="",CUe="",TUe="",AUe="",NUe="",PUe="",OUe="",IUe="",RUe="",MUe="",DUe="",LUe="",jUe="",FUe="",BUe="",zUe="",qUe="",WUe="",VUe="",UUe="",HUe="",KUe="",GUe="",ZUe="",JUe="",YUe="",XUe="",QUe="",eHe="",tHe="",nHe="",rHe="",oHe="",sHe="",iHe="",aHe="",lHe="",cHe="",uHe="",dHe="",fHe="",pHe="",hHe="",mHe="",gHe="",yHe="",bHe="",vHe="",wHe="",xHe="",kHe="",_He="",$He="",EHe="",SHe="{",CHe="[",THe="",AHe="",NHe="",PHe="",OHe="",IHe="",RHe="",MHe="",DHe="{",LHe="",jHe="",FHe="",BHe="",zHe="",qHe="",WHe="",VHe="",UHe="",HHe="",KHe="",GHe="",ZHe="",JHe="",YHe="",XHe="",QHe="",eKe="",tKe="",nKe="",rKe="",oKe="",sKe="",iKe="",aKe="",lKe="",cKe="",uKe="",dKe="",fKe="",pKe="",hKe="",mKe="",gKe="",yKe="",bKe="",vKe="",wKe="",xKe="",kKe="",_Ke="",$Ke="",EKe="",SKe="",CKe="",TKe="",AKe="",NKe="",PKe="",OKe="",IKe="",RKe="",MKe="",DKe="",LKe="",jKe="",FKe="",BKe="",zKe="",qKe="",WKe="",VKe="",UKe="",HKe="",KKe="",GKe="",ZKe="",JKe="",YKe="",XKe="",QKe="",eGe="",tGe="",nGe="",rGe="",oGe="",sGe="",iGe="",aGe="",lGe="",cGe="",uGe="",dGe="",fGe="",pGe="",hGe="",mGe="",gGe="",yGe="",bGe="",vGe="",wGe="",xGe="",kGe="",_Ge="",$Ge="",EGe="",SGe="",CGe="",TGe="",AGe="",NGe="",PGe="",OGe="",IGe="",RGe="",MGe="",DGe="",LGe="",jGe="",FGe="",BGe="",zGe="",qGe="",WGe="",VGe="",UGe="",HGe="",KGe="",GGe="",ZGe="",JGe="",YGe="_",XGe="",QGe="",eZe="",tZe="",nZe="",rZe="(",oZe="",sZe="",iZe="",aZe="",lZe="",cZe="",uZe="",dZe="",fZe="",pZe="",hZe="",mZe="",gZe="",yZe="",bZe="",vZe="[",wZe="",xZe="",kZe="",_Ze="",$Ze="",EZe="",SZe="<",CZe="<",TZe="",AZe="",NZe="",PZe="",OZe="",IZe="",RZe="",MZe="",DZe="",LZe="",jZe="",FZe="",BZe="",zZe="",qZe="",WZe="",VZe="",UZe="",HZe="",KZe="",GZe="",ZZe="",JZe="",YZe="",XZe="",QZe="",eJe="",tJe="",nJe="",rJe="",oJe="",sJe="",iJe="",aJe="",lJe="",cJe="",uJe="*",dJe="",fJe="",pJe="",hJe="",mJe="",gJe="",yJe="",bJe="",vJe="",wJe="",xJe="",kJe="",_Je="",$Je="",EJe="",SJe="",CJe="",TJe="",AJe="",NJe="",PJe="",OJe="",IJe="",RJe="",MJe="",DJe="",LJe="",jJe="",FJe="",BJe="",zJe="",qJe="",WJe="",VJe="",UJe="",HJe="",KJe="",GJe="",ZJe="",JJe="",YJe="",XJe="",QJe="",eYe="",tYe="",nYe="",rYe="",oYe="",sYe="",iYe="",aYe="",lYe="",cYe="",uYe="",dYe="",fYe="",pYe="",hYe="",mYe="",gYe="",yYe="",bYe="",vYe="",wYe=`
`,xYe="",kYe="",_Ye="",$Ye="",EYe="",SYe="",CYe="",TYe="",AYe="",NYe="",PYe="",OYe="",IYe="",RYe="",MYe="",DYe="",LYe="",jYe="",FYe="",BYe="",zYe="",qYe="",WYe="",VYe="",UYe="",HYe="",KYe="",GYe="",ZYe="",JYe="",YYe="",XYe="",QYe="",eXe="",tXe="",nXe="",rXe="",oXe="",sXe="",iXe="",aXe="",lXe="",cXe="",uXe="",dXe="",fXe="",pXe="",hXe="",mXe="",gXe="",yXe="",bXe="",vXe="",wXe="",xXe="",kXe="",_Xe="",$Xe="",EXe="",SXe="",CXe="",TXe="",AXe="",NXe="",PXe="",OXe="",IXe="",RXe="",MXe="",DXe="",LXe="",jXe="",FXe="",BXe="",zXe="",qXe="",WXe="",VXe="",UXe="",HXe="",KXe="",GXe="",ZXe="",JXe="",YXe="",XXe="",QXe="",eQe="",tQe="",nQe="",rQe="",oQe="",sQe="",iQe="",aQe="",lQe="",cQe="",uQe="",dQe="",fQe="",pQe="",hQe="",mQe="",gQe="",yQe="",bQe="",vQe="",wQe="",xQe="",kQe="",_Qe="",$Qe="",EQe="",SQe="",CQe="",TQe="",AQe="",NQe="",PQe="",OQe="",IQe="",RQe="",MQe="",DQe="",LQe="",jQe="",FQe="",BQe="",zQe="",qQe="",WQe="",VQe="",UQe="",HQe="",KQe="",GQe="",ZQe="",JQe="",YQe="",XQe="",QQe="",eet="",tet="",net="",ret="",oet="",set="",iet="",aet="",cet="",uet="",det="",fet="",pet="",het="",met="",get="",yet="",bet="",vet="",wet="",xet="",ket="",_et="",$et="",Eet="",Cet="",Tet="",Aet="",Net="",Pet="#",Oet="",Iet="",Ret="",Met="",Det="",Let="",jet="",Fet="",Bet=">",zet="",qet="",Wet="",Vet="",Uet="<",Het="",Ket="",Get="",Zet="",Jet="",Yet="",Xet="",Qet="",ett="",ttt="",ntt="",rtt="",ott="",stt="",itt="",att="",ltt="",ctt="",utt="",dtt="",ftt="",ptt="",htt="",mtt="",gtt="",ytt="",btt="",vtt="",wtt="",xtt="",ktt="",_tt="",$tt="",Ett="",Stt="",Ctt="",Ttt="",Att="",Ntt="",Ptt="",Ott="",Itt="",Rtt="",Mtt="",Dtt="",Ltt="",jtt="",Ftt="",Btt="",ztt="",qtt="",Wtt="",Vtt="",Utt="",Htt="",Ktt="",Gtt="",Ztt="",Jtt="",Ytt="",Xtt="",Qtt="",ent="",tnt="",nnt="",rnt="",ont="",snt="",int="",ant="",lnt="",cnt="",unt="",dnt="",fnt="",pnt="",hnt="",mnt="",gnt="",ynt="",bnt="",vnt="",wnt="",xnt="",knt="",_nt="",$nt="",Ent="",Snt="",Cnt="",Tnt="",Ant="",Nnt="",Pnt="",Ont="%",Int=".",Rnt="",Mnt="",Dnt="",Lnt="",jnt="",Fnt="",Bnt="",znt="",qnt="",Wnt="",Vnt="",Unt="",Hnt="",Knt="",Gnt="",Znt="",Jnt="",Ynt="",Xnt="",Qnt="",ert="+",trt="",nrt="",rrt="",ort="",srt="",irt="",art="",lrt="",crt="",urt="",drt="",frt="",prt="",hrt="",mrt="",grt="",yrt="",brt="",vrt="",wrt="",xrt="",krt="",_rt="",$rt="",Ert="",Srt="",Crt="",Trt="",Art="",Nrt="",Prt="",Ort="",Irt="",Rrt="",Mrt="",Drt="",Lrt="",jrt="",Frt="",Brt="",zrt="",qrt="",Wrt="",Vrt="",Urt="",Hrt="",Krt="",Grt="",Zrt="",Jrt="",Yrt="",Xrt="",Qrt="",eot="",tot="",not="",rot="",oot="",sot="",iot="",aot="",lot="",cot="",uot="?",dot="",fot='"',pot='"',hot="",mot="",got="",yot="",bot="",vot="",wot="",xot="",kot="",_ot="",$ot="",Eot="",Sot="",Cot="",Tot="",Aot="",Not="",Pot="",Oot="",Iot="",Rot="",Mot="",Dot="",Lot="",jot="",Fot="",Bot="",zot="",qot="",Wot="",Vot="",Uot="",Hot="",Kot="",Got="",Zot="}",Jot="]",Yot="",Xot="",Qot="",est="",tst="",nst="",rst="",ost="",sst="}",ist="",ast="",lst="",cst="",ust="",dst="",fst="",pst="",hst="",mst="",gst="",yst="",bst="",vst="",wst="",xst="",kst="",_st="",$st="",Est="",Sst="",Cst="",Tst="",Ast="",Nst="",Pst="",Ost="",Ist="",Rst="",Mst="",Dst="",Lst="",jst="",Fst="",Bst="",zst="",qst="",Wst="",Vst="",Ust="",Hst="",Kst="",Gst="",Zst="",Jst="",Yst="",Xst="",Qst="",eit="",tit="",nit="",rit="",oit="",sit="",iit="",ait="",lit="",cit="",uit="",dit="",fit="",pit="",hit="",mit="",git="",yit="",bit="",vit="",wit="",xit="",kit="",_it="",$it="",Eit="",Sit="",Cit="",Tit="",Ait="",Nit=")",Pit="",Oit="",Iit="",Rit="",Mit="",Dit="",Lit="",jit="",Fit="",Bit="]",zit="",qit="",Wit="",Vit="",Uit="",Hit="",Kit="",Git="",Zit="",Jit="",Yit="",Xit="",Qit="",eat="",tat="",nat="",rat="",oat="",sat="",iat="",aat="",lat="",cat="",uat="",dat="",fat="",pat="",hat="",mat="",gat="",yat="",bat="",vat="",wat="",xat="",kat="",_at="",$at="",Eat="",Sat="",Cat="",Tat=";",Aat="",Nat="",Pat="",Oat="",Iat="",Rat="",Mat="",Dat="",Lat="",jat="",Fat="",Bat="",zat="",qat="",Wat="",Vat="",Uat="",Hat="",Kat="",Gat="",Zat="",Jat="",Yat="",Xat="",Qat="",elt="",tlt="",nlt="",rlt="",olt="",slt="",ilt="",alt="",llt="",clt="",ult="",dlt="",flt="",plt="",hlt="",mlt="",glt="",ylt="",blt="",vlt="",wlt="",xlt="",klt="",_lt="/",$lt="",Elt="",Slt="",Clt="",Tlt="",Alt="",Nlt="",Plt="",Olt="",Ilt="",Rlt="",Mlt="",Dlt="",Llt="",jlt="",Flt="",Blt="",zlt="",qlt="",Wlt="",Vlt="",Ult="",Hlt="",Klt="",Glt="",Zlt="",Jlt="",Ylt="",Xlt="",Qlt="",ect="",tct="",nct="",rct="",oct="",sct="",ict="",act="",lct="",cct="",uct="",dct="",fct="",pct="",hct="",mct="",gct="",yct="",bct="",vct="",wct="",xct="",kct="",_ct="",$ct="",Ect="",Sct="",Cct="",Tct="",Act="",Nct="",Pct="",Oct="",Ict="",Rct="",Mct="",Dct="",Lct="",jct="",Fct="",Bct="",zct="",qct="",Wct="",Vct="",Uct="",Hct="",Kct="",Gct="",Zct="",Jct="",Yct="",Xct="",Qct="",eut="",tut="",nut="",rut="",out="",sut="",iut="",aut="",lut="",cut="",uut="",dut="",fut="",put="",hut="",mut="",gut="",yut="",but="",vut="",wut="",xut="",kut="",_ut="",$ut="",Eut="",Sut="",Cut="",Tut="	",Aut="",Nut="",Put="",Out="",Iut="",Rut="",Mut="",Dut="",Lut="",jut="",Fut="",But="",zut="",qut="",Wut="",Vut="",Uut="",Hut="",Kut="",Gut="",Zut="",Jut="",Yut="",Xut="",Qut="",edt="",tdt="",ndt="",rdt="",odt="",sdt="",idt="",adt="",ldt="",cdt="",udt="",ddt="",fdt="",pdt="",hdt="",mdt="",gdt="",ydt="",bdt="",vdt="",wdt="",xdt="",kdt="",_dt="",$dt="",Edt="",Sdt="",Cdt="",Tdt="",Adt="",Ndt="",Pdt="",Odt="",Idt="",Rdt="",Mdt="",Ddt="",Ldt="",jdt="",Fdt="",Bdt="",zdt="",qdt="",Wdt="",Vdt="",Udt="",Hdt="",Kdt="",Gdt="",Zdt="",Jdt="",Ydt="",Xdt="",Qdt="",eft="",tft="",nft="",rft="",oft="",sft="",ift="",aft="",lft="",cft="",uft="",dft="",fft="",pft="",hft="",mft="",gft="",yft="",bft="",vft="",wft="",xft="",kft="",_ft="",$ft="",Eft="",Sft="",Cft="",Tft="",Aft="",Nft="",Pft="",Oft="_",Ift="",Rft="",Mft="",Dft="",Lft="",jft="",Fft="",Bft="",zft="",qft="",Wft="",Vft="",Uft="",Hft="",Kft="",Gft="",Zft="",Jft="",Yft="",Xft="",Qft="",ept="",tpt="",npt="",rpt="",opt="",spt="",ipt="",apt="",lpt="",cpt="",upt="",dpt="",fpt="",ppt="",hpt="",mpt="",gpt="",ypt="",bpt="",vpt="",wpt="",xpt="",kpt="",_pt="",$pt="",Ept="",Spt="",Cpt="",Tpt="",Apt="",Npt="",Ppt="",Opt="",Ipt="",Rpt="",Mpt="",Dpt="",Lpt="",jpt="",Fpt="",Bpt="",zpt="",qpt="",Wpt="",Vpt="",Upt="",Hpt="",Kpt="",Gpt="",Zpt="",Jpt="",Ypt="",Xpt="",Qpt="",eht="",tht="",nht="",rht="",oht="",sht="",iht="|",aht="",lht="|",cht="",uht="",dht="|",fht="",pht="",hht="",mht="",ght="",yht="",bht="",vht="",wht="",xht="",kht="",_ht="",$ht="",Eht="",Sht="",Cht="",Tht="",Aht="",Nht="",Pht="",Oht="",Iht="",Rht="",Mht="",Dht="",Lht="",jht="",Fht="",Bht="",zht="",qht="",Wht="",Vht="",Uht="",Hht="",Kht="",Ght="",Zht="",Jht="",Yht="",Xht="",Qht="",emt="",tmt="",nmt="",rmt="",omt="",smt="",imt="",amt="",lmt="",cmt="",umt="",dmt="",fmt="",pmt="",hmt="",mmt="",gmt="",ymt="",bmt="",vmt="",wmt="",xmt="",kmt="",_mt="",$mt="",Emt="",Smt="",Cmt="",Tmt="",Amt="",Nmt="",Pmt="",Omt="",Imt="",Rmt="",Mmt="",Dmt="",Lmt="",jmt="",Fmt="",Bmt="",zmt="",qmt="",Wmt="",Vmt="",Umt="",Hmt="",Kmt="",Gmt="",Zmt="",Jmt="",Ymt="",Xmt="",Qmt="",egt="",tgt="",ngt="",rgt="",ogt="",sgt="",igt="",agt="",lgt="",cgt="",ugt="",dgt="",fgt={Aacute:KMe,aacute:GMe,Abreve:ZMe,abreve:JMe,ac:YMe,acd:XMe,acE:QMe,Acirc:eDe,acirc:tDe,acute:nDe,Acy:rDe,acy:oDe,AElig:sDe,aelig:iDe,af:aDe,Afr:lDe,afr:cDe,Agrave:uDe,agrave:dDe,alefsym:fDe,aleph:pDe,Alpha:hDe,alpha:mDe,Amacr:gDe,amacr:yDe,amalg:bDe,amp:vDe,AMP:wDe,andand:xDe,And:kDe,and:_De,andd:$De,andslope:EDe,andv:SDe,ang:CDe,ange:TDe,angle:ADe,angmsdaa:NDe,angmsdab:PDe,angmsdac:ODe,angmsdad:IDe,angmsdae:RDe,angmsdaf:MDe,angmsdag:DDe,angmsdah:LDe,angmsd:jDe,angrt:FDe,angrtvb:BDe,angrtvbd:zDe,angsph:qDe,angst:WDe,angzarr:VDe,Aogon:UDe,aogon:HDe,Aopf:KDe,aopf:GDe,apacir:ZDe,ap:JDe,apE:YDe,ape:XDe,apid:QDe,apos:e5e,ApplyFunction:t5e,approx:n5e,approxeq:r5e,Aring:o5e,aring:s5e,Ascr:i5e,ascr:a5e,Assign:l5e,ast:c5e,asymp:u5e,asympeq:d5e,Atilde:f5e,atilde:p5e,Auml:h5e,auml:m5e,awconint:g5e,awint:y5e,backcong:b5e,backepsilon:v5e,backprime:w5e,backsim:x5e,backsimeq:k5e,Backslash:_5e,Barv:$5e,barvee:E5e,barwed:S5e,Barwed:C5e,barwedge:T5e,bbrk:A5e,bbrktbrk:N5e,bcong:P5e,Bcy:O5e,bcy:I5e,bdquo:R5e,becaus:M5e,because:D5e,Because:L5e,bemptyv:j5e,bepsi:F5e,bernou:B5e,Bernoullis:z5e,Beta:q5e,beta:W5e,beth:V5e,between:U5e,Bfr:H5e,bfr:K5e,bigcap:G5e,bigcirc:Z5e,bigcup:J5e,bigodot:Y5e,bigoplus:X5e,bigotimes:Q5e,bigsqcup:e7e,bigstar:t7e,bigtriangledown:n7e,bigtriangleup:r7e,biguplus:o7e,bigvee:s7e,bigwedge:i7e,bkarow:a7e,blacklozenge:l7e,blacksquare:c7e,blacktriangle:u7e,blacktriangledown:d7e,blacktriangleleft:f7e,blacktriangleright:p7e,blank:h7e,blk12:m7e,blk14:g7e,blk34:y7e,block:b7e,bne:v7e,bnequiv:w7e,bNot:x7e,bnot:k7e,Bopf:_7e,bopf:$7e,bot:E7e,bottom:S7e,bowtie:C7e,boxbox:T7e,boxdl:A7e,boxdL:N7e,boxDl:P7e,boxDL:O7e,boxdr:I7e,boxdR:R7e,boxDr:M7e,boxDR:D7e,boxh:L7e,boxH:j7e,boxhd:F7e,boxHd:B7e,boxhD:z7e,boxHD:q7e,boxhu:W7e,boxHu:V7e,boxhU:U7e,boxHU:H7e,boxminus:K7e,boxplus:G7e,boxtimes:Z7e,boxul:J7e,boxuL:Y7e,boxUl:X7e,boxUL:Q7e,boxur:e6e,boxuR:t6e,boxUr:n6e,boxUR:r6e,boxv:o6e,boxV:s6e,boxvh:i6e,boxvH:a6e,boxVh:l6e,boxVH:c6e,boxvl:u6e,boxvL:d6e,boxVl:f6e,boxVL:p6e,boxvr:h6e,boxvR:m6e,boxVr:g6e,boxVR:y6e,bprime:b6e,breve:v6e,Breve:w6e,brvbar:x6e,bscr:k6e,Bscr:_6e,bsemi:$6e,bsim:E6e,bsime:S6e,bsolb:C6e,bsol:T6e,bsolhsub:A6e,bull:N6e,bullet:P6e,bump:O6e,bumpE:I6e,bumpe:R6e,Bumpeq:M6e,bumpeq:D6e,Cacute:L6e,cacute:j6e,capand:F6e,capbrcup:B6e,capcap:z6e,cap:q6e,Cap:W6e,capcup:V6e,capdot:U6e,CapitalDifferentialD:H6e,caps:K6e,caret:G6e,caron:Z6e,Cayleys:J6e,ccaps:Y6e,Ccaron:X6e,ccaron:Q6e,Ccedil:eLe,ccedil:tLe,Ccirc:nLe,ccirc:rLe,Cconint:oLe,ccups:sLe,ccupssm:iLe,Cdot:aLe,cdot:lLe,cedil:cLe,Cedilla:uLe,cemptyv:dLe,cent:fLe,centerdot:pLe,CenterDot:hLe,cfr:mLe,Cfr:gLe,CHcy:yLe,chcy:bLe,check:vLe,checkmark:wLe,Chi:xLe,chi:kLe,circ:_Le,circeq:$Le,circlearrowleft:ELe,circlearrowright:SLe,circledast:CLe,circledcirc:TLe,circleddash:ALe,CircleDot:NLe,circledR:PLe,circledS:OLe,CircleMinus:ILe,CirclePlus:RLe,CircleTimes:MLe,cir:DLe,cirE:LLe,cire:jLe,cirfnint:FLe,cirmid:BLe,cirscir:zLe,ClockwiseContourIntegral:qLe,CloseCurlyDoubleQuote:WLe,CloseCurlyQuote:VLe,clubs:ULe,clubsuit:HLe,colon:KLe,Colon:GLe,Colone:ZLe,colone:JLe,coloneq:YLe,comma:XLe,commat:QLe,comp:e9e,compfn:t9e,complement:n9e,complexes:r9e,cong:o9e,congdot:s9e,Congruent:i9e,conint:a9e,Conint:l9e,ContourIntegral:c9e,copf:u9e,Copf:d9e,coprod:f9e,Coproduct:p9e,copy:h9e,COPY:m9e,copysr:g9e,CounterClockwiseContourIntegral:y9e,crarr:b9e,cross:v9e,Cross:w9e,Cscr:x9e,cscr:k9e,csub:_9e,csube:$9e,csup:E9e,csupe:S9e,ctdot:C9e,cudarrl:T9e,cudarrr:A9e,cuepr:N9e,cuesc:P9e,cularr:O9e,cularrp:I9e,cupbrcap:R9e,cupcap:M9e,CupCap:D9e,cup:L9e,Cup:j9e,cupcup:F9e,cupdot:B9e,cupor:z9e,cups:q9e,curarr:W9e,curarrm:V9e,curlyeqprec:U9e,curlyeqsucc:H9e,curlyvee:K9e,curlywedge:G9e,curren:Z9e,curvearrowleft:J9e,curvearrowright:Y9e,cuvee:X9e,cuwed:Q9e,cwconint:e8e,cwint:t8e,cylcty:n8e,dagger:r8e,Dagger:o8e,daleth:s8e,darr:i8e,Darr:a8e,dArr:l8e,dash:c8e,Dashv:u8e,dashv:d8e,dbkarow:f8e,dblac:p8e,Dcaron:h8e,dcaron:m8e,Dcy:g8e,dcy:y8e,ddagger:b8e,ddarr:v8e,DD:w8e,dd:x8e,DDotrahd:k8e,ddotseq:_8e,deg:$8e,Del:E8e,Delta:S8e,delta:C8e,demptyv:T8e,dfisht:A8e,Dfr:N8e,dfr:P8e,dHar:O8e,dharl:I8e,dharr:R8e,DiacriticalAcute:M8e,DiacriticalDot:D8e,DiacriticalDoubleAcute:L8e,DiacriticalGrave:j8e,DiacriticalTilde:F8e,diam:B8e,diamond:z8e,Diamond:q8e,diamondsuit:W8e,diams:V8e,die:U8e,DifferentialD:H8e,digamma:K8e,disin:G8e,div:Z8e,divide:J8e,divideontimes:Y8e,divonx:X8e,DJcy:Q8e,djcy:eje,dlcorn:tje,dlcrop:nje,dollar:rje,Dopf:oje,dopf:sje,Dot:ije,dot:aje,DotDot:lje,doteq:cje,doteqdot:uje,DotEqual:dje,dotminus:fje,dotplus:pje,dotsquare:hje,doublebarwedge:mje,DoubleContourIntegral:gje,DoubleDot:yje,DoubleDownArrow:bje,DoubleLeftArrow:vje,DoubleLeftRightArrow:wje,DoubleLeftTee:xje,DoubleLongLeftArrow:kje,DoubleLongLeftRightArrow:_je,DoubleLongRightArrow:$je,DoubleRightArrow:Eje,DoubleRightTee:Sje,DoubleUpArrow:Cje,DoubleUpDownArrow:Tje,DoubleVerticalBar:Aje,DownArrowBar:Nje,downarrow:Pje,DownArrow:Oje,Downarrow:Ije,DownArrowUpArrow:Rje,DownBreve:Mje,downdownarrows:Dje,downharpoonleft:Lje,downharpoonright:jje,DownLeftRightVector:Fje,DownLeftTeeVector:Bje,DownLeftVectorBar:zje,DownLeftVector:qje,DownRightTeeVector:Wje,DownRightVectorBar:Vje,DownRightVector:Uje,DownTeeArrow:Hje,DownTee:Kje,drbkarow:Gje,drcorn:Zje,drcrop:Jje,Dscr:Yje,dscr:Xje,DScy:Qje,dscy:eFe,dsol:tFe,Dstrok:nFe,dstrok:rFe,dtdot:oFe,dtri:sFe,dtrif:iFe,duarr:aFe,duhar:lFe,dwangle:cFe,DZcy:uFe,dzcy:dFe,dzigrarr:fFe,Eacute:pFe,eacute:hFe,easter:mFe,Ecaron:gFe,ecaron:yFe,Ecirc:bFe,ecirc:vFe,ecir:wFe,ecolon:xFe,Ecy:kFe,ecy:_Fe,eDDot:$Fe,Edot:EFe,edot:SFe,eDot:CFe,ee:TFe,efDot:AFe,Efr:NFe,efr:PFe,eg:OFe,Egrave:IFe,egrave:RFe,egs:MFe,egsdot:DFe,el:LFe,Element:jFe,elinters:FFe,ell:BFe,els:zFe,elsdot:qFe,Emacr:WFe,emacr:VFe,empty:UFe,emptyset:HFe,EmptySmallSquare:KFe,emptyv:GFe,EmptyVerySmallSquare:ZFe,emsp13:JFe,emsp14:YFe,emsp:XFe,ENG:QFe,eng:eBe,ensp:tBe,Eogon:nBe,eogon:rBe,Eopf:oBe,eopf:sBe,epar:iBe,eparsl:aBe,eplus:lBe,epsi:cBe,Epsilon:uBe,epsilon:dBe,epsiv:fBe,eqcirc:pBe,eqcolon:hBe,eqsim:mBe,eqslantgtr:gBe,eqslantless:yBe,Equal:bBe,equals:vBe,EqualTilde:wBe,equest:xBe,Equilibrium:kBe,equiv:_Be,equivDD:$Be,eqvparsl:EBe,erarr:SBe,erDot:CBe,escr:TBe,Escr:ABe,esdot:NBe,Esim:PBe,esim:OBe,Eta:IBe,eta:RBe,ETH:MBe,eth:DBe,Euml:LBe,euml:jBe,euro:FBe,excl:BBe,exist:zBe,Exists:qBe,expectation:WBe,exponentiale:VBe,ExponentialE:UBe,fallingdotseq:HBe,Fcy:KBe,fcy:GBe,female:ZBe,ffilig:JBe,fflig:YBe,ffllig:XBe,Ffr:QBe,ffr:eze,filig:tze,FilledSmallSquare:nze,FilledVerySmallSquare:rze,fjlig:oze,flat:sze,fllig:ize,fltns:aze,fnof:lze,Fopf:cze,fopf:uze,forall:dze,ForAll:fze,fork:pze,forkv:hze,Fouriertrf:mze,fpartint:gze,frac12:yze,frac13:bze,frac14:vze,frac15:wze,frac16:xze,frac18:kze,frac23:_ze,frac25:$ze,frac34:Eze,frac35:Sze,frac38:Cze,frac45:Tze,frac56:Aze,frac58:Nze,frac78:Pze,frasl:Oze,frown:Ize,fscr:Rze,Fscr:Mze,gacute:Dze,Gamma:Lze,gamma:jze,Gammad:Fze,gammad:Bze,gap:zze,Gbreve:qze,gbreve:Wze,Gcedil:Vze,Gcirc:Uze,gcirc:Hze,Gcy:Kze,gcy:Gze,Gdot:Zze,gdot:Jze,ge:Yze,gE:Xze,gEl:Qze,gel:eqe,geq:tqe,geqq:nqe,geqslant:rqe,gescc:oqe,ges:sqe,gesdot:iqe,gesdoto:aqe,gesdotol:lqe,gesl:cqe,gesles:uqe,Gfr:dqe,gfr:fqe,gg:pqe,Gg:hqe,ggg:mqe,gimel:gqe,GJcy:yqe,gjcy:bqe,gla:vqe,gl:wqe,glE:xqe,glj:kqe,gnap:_qe,gnapprox:$qe,gne:Eqe,gnE:Sqe,gneq:Cqe,gneqq:Tqe,gnsim:Aqe,Gopf:Nqe,gopf:Pqe,grave:Oqe,GreaterEqual:Iqe,GreaterEqualLess:Rqe,GreaterFullEqual:Mqe,GreaterGreater:Dqe,GreaterLess:Lqe,GreaterSlantEqual:jqe,GreaterTilde:Fqe,Gscr:Bqe,gscr:zqe,gsim:qqe,gsime:Wqe,gsiml:Vqe,gtcc:Uqe,gtcir:Hqe,gt:Kqe,GT:Gqe,Gt:Zqe,gtdot:Jqe,gtlPar:Yqe,gtquest:Xqe,gtrapprox:Qqe,gtrarr:eWe,gtrdot:tWe,gtreqless:nWe,gtreqqless:rWe,gtrless:oWe,gtrsim:sWe,gvertneqq:iWe,gvnE:aWe,Hacek:lWe,hairsp:cWe,half:uWe,hamilt:dWe,HARDcy:fWe,hardcy:pWe,harrcir:hWe,harr:mWe,hArr:gWe,harrw:yWe,Hat:bWe,hbar:vWe,Hcirc:wWe,hcirc:xWe,hearts:kWe,heartsuit:_We,hellip:$We,hercon:EWe,hfr:SWe,Hfr:CWe,HilbertSpace:TWe,hksearow:AWe,hkswarow:NWe,hoarr:PWe,homtht:OWe,hookleftarrow:IWe,hookrightarrow:RWe,hopf:MWe,Hopf:DWe,horbar:LWe,HorizontalLine:jWe,hscr:FWe,Hscr:BWe,hslash:zWe,Hstrok:qWe,hstrok:WWe,HumpDownHump:VWe,HumpEqual:UWe,hybull:HWe,hyphen:KWe,Iacute:GWe,iacute:ZWe,ic:JWe,Icirc:YWe,icirc:XWe,Icy:QWe,icy:eVe,Idot:tVe,IEcy:nVe,iecy:rVe,iexcl:oVe,iff:sVe,ifr:iVe,Ifr:aVe,Igrave:lVe,igrave:cVe,ii:uVe,iiiint:dVe,iiint:fVe,iinfin:pVe,iiota:hVe,IJlig:mVe,ijlig:gVe,Imacr:yVe,imacr:bVe,image:vVe,ImaginaryI:wVe,imagline:xVe,imagpart:kVe,imath:_Ve,Im:$Ve,imof:EVe,imped:SVe,Implies:CVe,incare:TVe,in:"",infin:AVe,infintie:NVe,inodot:PVe,intcal:OVe,int:IVe,Int:RVe,integers:MVe,Integral:DVe,intercal:LVe,Intersection:jVe,intlarhk:FVe,intprod:BVe,InvisibleComma:zVe,InvisibleTimes:qVe,IOcy:WVe,iocy:VVe,Iogon:UVe,iogon:HVe,Iopf:KVe,iopf:GVe,Iota:ZVe,iota:JVe,iprod:YVe,iquest:XVe,iscr:QVe,Iscr:eUe,isin:tUe,isindot:nUe,isinE:rUe,isins:oUe,isinsv:sUe,isinv:iUe,it:aUe,Itilde:lUe,itilde:cUe,Iukcy:uUe,iukcy:dUe,Iuml:fUe,iuml:pUe,Jcirc:hUe,jcirc:mUe,Jcy:gUe,jcy:yUe,Jfr:bUe,jfr:vUe,jmath:wUe,Jopf:xUe,jopf:kUe,Jscr:_Ue,jscr:$Ue,Jsercy:EUe,jsercy:SUe,Jukcy:CUe,jukcy:TUe,Kappa:AUe,kappa:NUe,kappav:PUe,Kcedil:OUe,kcedil:IUe,Kcy:RUe,kcy:MUe,Kfr:DUe,kfr:LUe,kgreen:jUe,KHcy:FUe,khcy:BUe,KJcy:zUe,kjcy:qUe,Kopf:WUe,kopf:VUe,Kscr:UUe,kscr:HUe,lAarr:KUe,Lacute:GUe,lacute:ZUe,laemptyv:JUe,lagran:YUe,Lambda:XUe,lambda:QUe,lang:eHe,Lang:tHe,langd:nHe,langle:rHe,lap:oHe,Laplacetrf:sHe,laquo:iHe,larrb:aHe,larrbfs:lHe,larr:cHe,Larr:uHe,lArr:dHe,larrfs:fHe,larrhk:pHe,larrlp:hHe,larrpl:mHe,larrsim:gHe,larrtl:yHe,latail:bHe,lAtail:vHe,lat:wHe,late:xHe,lates:kHe,lbarr:_He,lBarr:$He,lbbrk:EHe,lbrace:SHe,lbrack:CHe,lbrke:THe,lbrksld:AHe,lbrkslu:NHe,Lcaron:PHe,lcaron:OHe,Lcedil:IHe,lcedil:RHe,lceil:MHe,lcub:DHe,Lcy:LHe,lcy:jHe,ldca:FHe,ldquo:BHe,ldquor:zHe,ldrdhar:qHe,ldrushar:WHe,ldsh:VHe,le:UHe,lE:HHe,LeftAngleBracket:KHe,LeftArrowBar:GHe,leftarrow:ZHe,LeftArrow:JHe,Leftarrow:YHe,LeftArrowRightArrow:XHe,leftarrowtail:QHe,LeftCeiling:eKe,LeftDoubleBracket:tKe,LeftDownTeeVector:nKe,LeftDownVectorBar:rKe,LeftDownVector:oKe,LeftFloor:sKe,leftharpoondown:iKe,leftharpoonup:aKe,leftleftarrows:lKe,leftrightarrow:cKe,LeftRightArrow:uKe,Leftrightarrow:dKe,leftrightarrows:fKe,leftrightharpoons:pKe,leftrightsquigarrow:hKe,LeftRightVector:mKe,LeftTeeArrow:gKe,LeftTee:yKe,LeftTeeVector:bKe,leftthreetimes:vKe,LeftTriangleBar:wKe,LeftTriangle:xKe,LeftTriangleEqual:kKe,LeftUpDownVector:_Ke,LeftUpTeeVector:$Ke,LeftUpVectorBar:EKe,LeftUpVector:SKe,LeftVectorBar:CKe,LeftVector:TKe,lEg:AKe,leg:NKe,leq:PKe,leqq:OKe,leqslant:IKe,lescc:RKe,les:MKe,lesdot:DKe,lesdoto:LKe,lesdotor:jKe,lesg:FKe,lesges:BKe,lessapprox:zKe,lessdot:qKe,lesseqgtr:WKe,lesseqqgtr:VKe,LessEqualGreater:UKe,LessFullEqual:HKe,LessGreater:KKe,lessgtr:GKe,LessLess:ZKe,lesssim:JKe,LessSlantEqual:YKe,LessTilde:XKe,lfisht:QKe,lfloor:eGe,Lfr:tGe,lfr:nGe,lg:rGe,lgE:oGe,lHar:sGe,lhard:iGe,lharu:aGe,lharul:lGe,lhblk:cGe,LJcy:uGe,ljcy:dGe,llarr:fGe,ll:pGe,Ll:hGe,llcorner:mGe,Lleftarrow:gGe,llhard:yGe,lltri:bGe,Lmidot:vGe,lmidot:wGe,lmoustache:xGe,lmoust:kGe,lnap:_Ge,lnapprox:$Ge,lne:EGe,lnE:SGe,lneq:CGe,lneqq:TGe,lnsim:AGe,loang:NGe,loarr:PGe,lobrk:OGe,longleftarrow:IGe,LongLeftArrow:RGe,Longleftarrow:MGe,longleftrightarrow:DGe,LongLeftRightArrow:LGe,Longleftrightarrow:jGe,longmapsto:FGe,longrightarrow:BGe,LongRightArrow:zGe,Longrightarrow:qGe,looparrowleft:WGe,looparrowright:VGe,lopar:UGe,Lopf:HGe,lopf:KGe,loplus:GGe,lotimes:ZGe,lowast:JGe,lowbar:YGe,LowerLeftArrow:XGe,LowerRightArrow:QGe,loz:eZe,lozenge:tZe,lozf:nZe,lpar:rZe,lparlt:oZe,lrarr:sZe,lrcorner:iZe,lrhar:aZe,lrhard:lZe,lrm:cZe,lrtri:uZe,lsaquo:dZe,lscr:fZe,Lscr:pZe,lsh:hZe,Lsh:mZe,lsim:gZe,lsime:yZe,lsimg:bZe,lsqb:vZe,lsquo:wZe,lsquor:xZe,Lstrok:kZe,lstrok:_Ze,ltcc:$Ze,ltcir:EZe,lt:SZe,LT:CZe,Lt:TZe,ltdot:AZe,lthree:NZe,ltimes:PZe,ltlarr:OZe,ltquest:IZe,ltri:RZe,ltrie:MZe,ltrif:DZe,ltrPar:LZe,lurdshar:jZe,luruhar:FZe,lvertneqq:BZe,lvnE:zZe,macr:qZe,male:WZe,malt:VZe,maltese:UZe,Map:"",map:HZe,mapsto:KZe,mapstodown:GZe,mapstoleft:ZZe,mapstoup:JZe,marker:YZe,mcomma:XZe,Mcy:QZe,mcy:eJe,mdash:tJe,mDDot:nJe,measuredangle:rJe,MediumSpace:oJe,Mellintrf:sJe,Mfr:iJe,mfr:aJe,mho:lJe,micro:cJe,midast:uJe,midcir:dJe,mid:fJe,middot:pJe,minusb:hJe,minus:mJe,minusd:gJe,minusdu:yJe,MinusPlus:bJe,mlcp:vJe,mldr:wJe,mnplus:xJe,models:kJe,Mopf:_Je,mopf:$Je,mp:EJe,mscr:SJe,Mscr:CJe,mstpos:TJe,Mu:AJe,mu:NJe,multimap:PJe,mumap:OJe,nabla:IJe,Nacute:RJe,nacute:MJe,nang:DJe,nap:LJe,napE:jJe,napid:FJe,napos:BJe,napprox:zJe,natural:qJe,naturals:WJe,natur:VJe,nbsp:UJe,nbump:HJe,nbumpe:KJe,ncap:GJe,Ncaron:ZJe,ncaron:JJe,Ncedil:YJe,ncedil:XJe,ncong:QJe,ncongdot:eYe,ncup:tYe,Ncy:nYe,ncy:rYe,ndash:oYe,nearhk:sYe,nearr:iYe,neArr:aYe,nearrow:lYe,ne:cYe,nedot:uYe,NegativeMediumSpace:dYe,NegativeThickSpace:fYe,NegativeThinSpace:pYe,NegativeVeryThinSpace:hYe,nequiv:mYe,nesear:gYe,nesim:yYe,NestedGreaterGreater:bYe,NestedLessLess:vYe,NewLine:wYe,nexist:xYe,nexists:kYe,Nfr:_Ye,nfr:$Ye,ngE:EYe,nge:SYe,ngeq:CYe,ngeqq:TYe,ngeqslant:AYe,nges:NYe,nGg:PYe,ngsim:OYe,nGt:IYe,ngt:RYe,ngtr:MYe,nGtv:DYe,nharr:LYe,nhArr:jYe,nhpar:FYe,ni:BYe,nis:zYe,nisd:qYe,niv:WYe,NJcy:VYe,njcy:UYe,nlarr:HYe,nlArr:KYe,nldr:GYe,nlE:ZYe,nle:JYe,nleftarrow:YYe,nLeftarrow:XYe,nleftrightarrow:QYe,nLeftrightarrow:eXe,nleq:tXe,nleqq:nXe,nleqslant:rXe,nles:oXe,nless:sXe,nLl:iXe,nlsim:aXe,nLt:lXe,nlt:cXe,nltri:uXe,nltrie:dXe,nLtv:fXe,nmid:pXe,NoBreak:hXe,NonBreakingSpace:mXe,nopf:gXe,Nopf:yXe,Not:bXe,not:vXe,NotCongruent:wXe,NotCupCap:xXe,NotDoubleVerticalBar:kXe,NotElement:_Xe,NotEqual:$Xe,NotEqualTilde:EXe,NotExists:SXe,NotGreater:CXe,NotGreaterEqual:TXe,NotGreaterFullEqual:AXe,NotGreaterGreater:NXe,NotGreaterLess:PXe,NotGreaterSlantEqual:OXe,NotGreaterTilde:IXe,NotHumpDownHump:RXe,NotHumpEqual:MXe,notin:DXe,notindot:LXe,notinE:jXe,notinva:FXe,notinvb:BXe,notinvc:zXe,NotLeftTriangleBar:qXe,NotLeftTriangle:WXe,NotLeftTriangleEqual:VXe,NotLess:UXe,NotLessEqual:HXe,NotLessGreater:KXe,NotLessLess:GXe,NotLessSlantEqual:ZXe,NotLessTilde:JXe,NotNestedGreaterGreater:YXe,NotNestedLessLess:XXe,notni:QXe,notniva:eQe,notnivb:tQe,notnivc:nQe,NotPrecedes:rQe,NotPrecedesEqual:oQe,NotPrecedesSlantEqual:sQe,NotReverseElement:iQe,NotRightTriangleBar:aQe,NotRightTriangle:lQe,NotRightTriangleEqual:cQe,NotSquareSubset:uQe,NotSquareSubsetEqual:dQe,NotSquareSuperset:fQe,NotSquareSupersetEqual:pQe,NotSubset:hQe,NotSubsetEqual:mQe,NotSucceeds:gQe,NotSucceedsEqual:yQe,NotSucceedsSlantEqual:bQe,NotSucceedsTilde:vQe,NotSuperset:wQe,NotSupersetEqual:xQe,NotTilde:kQe,NotTildeEqual:_Qe,NotTildeFullEqual:$Qe,NotTildeTilde:EQe,NotVerticalBar:SQe,nparallel:CQe,npar:TQe,nparsl:AQe,npart:NQe,npolint:PQe,npr:OQe,nprcue:IQe,nprec:RQe,npreceq:MQe,npre:DQe,nrarrc:LQe,nrarr:jQe,nrArr:FQe,nrarrw:BQe,nrightarrow:zQe,nRightarrow:qQe,nrtri:WQe,nrtrie:VQe,nsc:UQe,nsccue:HQe,nsce:KQe,Nscr:GQe,nscr:ZQe,nshortmid:JQe,nshortparallel:YQe,nsim:XQe,nsime:QQe,nsimeq:eet,nsmid:tet,nspar:net,nsqsube:ret,nsqsupe:oet,nsub:set,nsubE:iet,nsube:aet,nsubset:cet,nsubseteq:uet,nsubseteqq:det,nsucc:fet,nsucceq:pet,nsup:het,nsupE:met,nsupe:get,nsupset:yet,nsupseteq:bet,nsupseteqq:vet,ntgl:wet,Ntilde:xet,ntilde:ket,ntlg:_et,ntriangleleft:$et,ntrianglelefteq:Eet,ntriangleright:Cet,ntrianglerighteq:Tet,Nu:Aet,nu:Net,num:Pet,numero:Oet,numsp:Iet,nvap:Ret,nvdash:Met,nvDash:Det,nVdash:Let,nVDash:jet,nvge:Fet,nvgt:Bet,nvHarr:zet,nvinfin:qet,nvlArr:Wet,nvle:Vet,nvlt:Uet,nvltrie:Het,nvrArr:Ket,nvrtrie:Get,nvsim:Zet,nwarhk:Jet,nwarr:Yet,nwArr:Xet,nwarrow:Qet,nwnear:ett,Oacute:ttt,oacute:ntt,oast:rtt,Ocirc:ott,ocirc:stt,ocir:itt,Ocy:att,ocy:ltt,odash:ctt,Odblac:utt,odblac:dtt,odiv:ftt,odot:ptt,odsold:htt,OElig:mtt,oelig:gtt,ofcir:ytt,Ofr:btt,ofr:vtt,ogon:wtt,Ograve:xtt,ograve:ktt,ogt:_tt,ohbar:$tt,ohm:Ett,oint:Stt,olarr:Ctt,olcir:Ttt,olcross:Att,oline:Ntt,olt:Ptt,Omacr:Ott,omacr:Itt,Omega:Rtt,omega:Mtt,Omicron:Dtt,omicron:Ltt,omid:jtt,ominus:Ftt,Oopf:Btt,oopf:ztt,opar:qtt,OpenCurlyDoubleQuote:Wtt,OpenCurlyQuote:Vtt,operp:Utt,oplus:Htt,orarr:Ktt,Or:Gtt,or:Ztt,ord:Jtt,order:Ytt,orderof:Xtt,ordf:Qtt,ordm:ent,origof:tnt,oror:nnt,orslope:rnt,orv:ont,oS:snt,Oscr:int,oscr:ant,Oslash:lnt,oslash:cnt,osol:unt,Otilde:dnt,otilde:fnt,otimesas:pnt,Otimes:hnt,otimes:mnt,Ouml:gnt,ouml:ynt,ovbar:bnt,OverBar:vnt,OverBrace:wnt,OverBracket:xnt,OverParenthesis:knt,para:_nt,parallel:$nt,par:Ent,parsim:Snt,parsl:Cnt,part:Tnt,PartialD:Ant,Pcy:Nnt,pcy:Pnt,percnt:Ont,period:Int,permil:Rnt,perp:Mnt,pertenk:Dnt,Pfr:Lnt,pfr:jnt,Phi:Fnt,phi:Bnt,phiv:znt,phmmat:qnt,phone:Wnt,Pi:Vnt,pi:Unt,pitchfork:Hnt,piv:Knt,planck:Gnt,planckh:Znt,plankv:Jnt,plusacir:Ynt,plusb:Xnt,pluscir:Qnt,plus:ert,plusdo:trt,plusdu:nrt,pluse:rrt,PlusMinus:ort,plusmn:srt,plussim:irt,plustwo:art,pm:lrt,Poincareplane:crt,pointint:urt,popf:drt,Popf:frt,pound:prt,prap:hrt,Pr:mrt,pr:grt,prcue:yrt,precapprox:brt,prec:vrt,preccurlyeq:wrt,Precedes:xrt,PrecedesEqual:krt,PrecedesSlantEqual:_rt,PrecedesTilde:$rt,preceq:Ert,precnapprox:Srt,precneqq:Crt,precnsim:Trt,pre:Art,prE:Nrt,precsim:Prt,prime:Ort,Prime:Irt,primes:Rrt,prnap:Mrt,prnE:Drt,prnsim:Lrt,prod:jrt,Product:Frt,profalar:Brt,profline:zrt,profsurf:qrt,prop:Wrt,Proportional:Vrt,Proportion:Urt,propto:Hrt,prsim:Krt,prurel:Grt,Pscr:Zrt,pscr:Jrt,Psi:Yrt,psi:Xrt,puncsp:Qrt,Qfr:eot,qfr:tot,qint:not,qopf:rot,Qopf:oot,qprime:sot,Qscr:iot,qscr:aot,quaternions:lot,quatint:cot,quest:uot,questeq:dot,quot:fot,QUOT:pot,rAarr:hot,race:mot,Racute:got,racute:yot,radic:bot,raemptyv:vot,rang:wot,Rang:xot,rangd:kot,range:_ot,rangle:$ot,raquo:Eot,rarrap:Sot,rarrb:Cot,rarrbfs:Tot,rarrc:Aot,rarr:Not,Rarr:Pot,rArr:Oot,rarrfs:Iot,rarrhk:Rot,rarrlp:Mot,rarrpl:Dot,rarrsim:Lot,Rarrtl:jot,rarrtl:Fot,rarrw:Bot,ratail:zot,rAtail:qot,ratio:Wot,rationals:Vot,rbarr:Uot,rBarr:Hot,RBarr:Kot,rbbrk:Got,rbrace:Zot,rbrack:Jot,rbrke:Yot,rbrksld:Xot,rbrkslu:Qot,Rcaron:est,rcaron:tst,Rcedil:nst,rcedil:rst,rceil:ost,rcub:sst,Rcy:ist,rcy:ast,rdca:lst,rdldhar:cst,rdquo:ust,rdquor:dst,rdsh:fst,real:pst,realine:hst,realpart:mst,reals:gst,Re:yst,rect:bst,reg:vst,REG:wst,ReverseElement:xst,ReverseEquilibrium:kst,ReverseUpEquilibrium:_st,rfisht:$st,rfloor:Est,rfr:Sst,Rfr:Cst,rHar:Tst,rhard:Ast,rharu:Nst,rharul:Pst,Rho:Ost,rho:Ist,rhov:Rst,RightAngleBracket:Mst,RightArrowBar:Dst,rightarrow:Lst,RightArrow:jst,Rightarrow:Fst,RightArrowLeftArrow:Bst,rightarrowtail:zst,RightCeiling:qst,RightDoubleBracket:Wst,RightDownTeeVector:Vst,RightDownVectorBar:Ust,RightDownVector:Hst,RightFloor:Kst,rightharpoondown:Gst,rightharpoonup:Zst,rightleftarrows:Jst,rightleftharpoons:Yst,rightrightarrows:Xst,rightsquigarrow:Qst,RightTeeArrow:eit,RightTee:tit,RightTeeVector:nit,rightthreetimes:rit,RightTriangleBar:oit,RightTriangle:sit,RightTriangleEqual:iit,RightUpDownVector:ait,RightUpTeeVector:lit,RightUpVectorBar:cit,RightUpVector:uit,RightVectorBar:dit,RightVector:fit,ring:pit,risingdotseq:hit,rlarr:mit,rlhar:git,rlm:yit,rmoustache:bit,rmoust:vit,rnmid:wit,roang:xit,roarr:kit,robrk:_it,ropar:$it,ropf:Eit,Ropf:Sit,roplus:Cit,rotimes:Tit,RoundImplies:Ait,rpar:Nit,rpargt:Pit,rppolint:Oit,rrarr:Iit,Rrightarrow:Rit,rsaquo:Mit,rscr:Dit,Rscr:Lit,rsh:jit,Rsh:Fit,rsqb:Bit,rsquo:zit,rsquor:qit,rthree:Wit,rtimes:Vit,rtri:Uit,rtrie:Hit,rtrif:Kit,rtriltri:Git,RuleDelayed:Zit,ruluhar:Jit,rx:Yit,Sacute:Xit,sacute:Qit,sbquo:eat,scap:tat,Scaron:nat,scaron:rat,Sc:oat,sc:sat,sccue:iat,sce:aat,scE:lat,Scedil:cat,scedil:uat,Scirc:dat,scirc:fat,scnap:pat,scnE:hat,scnsim:mat,scpolint:gat,scsim:yat,Scy:bat,scy:vat,sdotb:wat,sdot:xat,sdote:kat,searhk:_at,searr:$at,seArr:Eat,searrow:Sat,sect:Cat,semi:Tat,seswar:Aat,setminus:Nat,setmn:Pat,sext:Oat,Sfr:Iat,sfr:Rat,sfrown:Mat,sharp:Dat,SHCHcy:Lat,shchcy:jat,SHcy:Fat,shcy:Bat,ShortDownArrow:zat,ShortLeftArrow:qat,shortmid:Wat,shortparallel:Vat,ShortRightArrow:Uat,ShortUpArrow:Hat,shy:Kat,Sigma:Gat,sigma:Zat,sigmaf:Jat,sigmav:Yat,sim:Xat,simdot:Qat,sime:elt,simeq:tlt,simg:nlt,simgE:rlt,siml:olt,simlE:slt,simne:ilt,simplus:alt,simrarr:llt,slarr:clt,SmallCircle:ult,smallsetminus:dlt,smashp:flt,smeparsl:plt,smid:hlt,smile:mlt,smt:glt,smte:ylt,smtes:blt,SOFTcy:vlt,softcy:wlt,solbar:xlt,solb:klt,sol:_lt,Sopf:$lt,sopf:Elt,spades:Slt,spadesuit:Clt,spar:Tlt,sqcap:Alt,sqcaps:Nlt,sqcup:Plt,sqcups:Olt,Sqrt:Ilt,sqsub:Rlt,sqsube:Mlt,sqsubset:Dlt,sqsubseteq:Llt,sqsup:jlt,sqsupe:Flt,sqsupset:Blt,sqsupseteq:zlt,square:qlt,Square:Wlt,SquareIntersection:Vlt,SquareSubset:Ult,SquareSubsetEqual:Hlt,SquareSuperset:Klt,SquareSupersetEqual:Glt,SquareUnion:Zlt,squarf:Jlt,squ:Ylt,squf:Xlt,srarr:Qlt,Sscr:ect,sscr:tct,ssetmn:nct,ssmile:rct,sstarf:oct,Star:sct,star:ict,starf:act,straightepsilon:lct,straightphi:cct,strns:uct,sub:dct,Sub:fct,subdot:pct,subE:hct,sube:mct,subedot:gct,submult:yct,subnE:bct,subne:vct,subplus:wct,subrarr:xct,subset:kct,Subset:_ct,subseteq:$ct,subseteqq:Ect,SubsetEqual:Sct,subsetneq:Cct,subsetneqq:Tct,subsim:Act,subsub:Nct,subsup:Pct,succapprox:Oct,succ:Ict,succcurlyeq:Rct,Succeeds:Mct,SucceedsEqual:Dct,SucceedsSlantEqual:Lct,SucceedsTilde:jct,succeq:Fct,succnapprox:Bct,succneqq:zct,succnsim:qct,succsim:Wct,SuchThat:Vct,sum:Uct,Sum:Hct,sung:Kct,sup1:Gct,sup2:Zct,sup3:Jct,sup:Yct,Sup:Xct,supdot:Qct,supdsub:eut,supE:tut,supe:nut,supedot:rut,Superset:out,SupersetEqual:sut,suphsol:iut,suphsub:aut,suplarr:lut,supmult:cut,supnE:uut,supne:dut,supplus:fut,supset:put,Supset:hut,supseteq:mut,supseteqq:gut,supsetneq:yut,supsetneqq:but,supsim:vut,supsub:wut,supsup:xut,swarhk:kut,swarr:_ut,swArr:$ut,swarrow:Eut,swnwar:Sut,szlig:Cut,Tab:Tut,target:Aut,Tau:Nut,tau:Put,tbrk:Out,Tcaron:Iut,tcaron:Rut,Tcedil:Mut,tcedil:Dut,Tcy:Lut,tcy:jut,tdot:Fut,telrec:But,Tfr:zut,tfr:qut,there4:Wut,therefore:Vut,Therefore:Uut,Theta:Hut,theta:Kut,thetasym:Gut,thetav:Zut,thickapprox:Jut,thicksim:Yut,ThickSpace:Xut,ThinSpace:Qut,thinsp:edt,thkap:tdt,thksim:ndt,THORN:rdt,thorn:odt,tilde:sdt,Tilde:idt,TildeEqual:adt,TildeFullEqual:ldt,TildeTilde:cdt,timesbar:udt,timesb:ddt,times:fdt,timesd:pdt,tint:hdt,toea:mdt,topbot:gdt,topcir:ydt,top:bdt,Topf:vdt,topf:wdt,topfork:xdt,tosa:kdt,tprime:_dt,trade:$dt,TRADE:Edt,triangle:Sdt,triangledown:Cdt,triangleleft:Tdt,trianglelefteq:Adt,triangleq:Ndt,triangleright:Pdt,trianglerighteq:Odt,tridot:Idt,trie:Rdt,triminus:Mdt,TripleDot:Ddt,triplus:Ldt,trisb:jdt,tritime:Fdt,trpezium:Bdt,Tscr:zdt,tscr:qdt,TScy:Wdt,tscy:Vdt,TSHcy:Udt,tshcy:Hdt,Tstrok:Kdt,tstrok:Gdt,twixt:Zdt,twoheadleftarrow:Jdt,twoheadrightarrow:Ydt,Uacute:Xdt,uacute:Qdt,uarr:eft,Uarr:tft,uArr:nft,Uarrocir:rft,Ubrcy:oft,ubrcy:sft,Ubreve:ift,ubreve:aft,Ucirc:lft,ucirc:cft,Ucy:uft,ucy:dft,udarr:fft,Udblac:pft,udblac:hft,udhar:mft,ufisht:gft,Ufr:yft,ufr:bft,Ugrave:vft,ugrave:wft,uHar:xft,uharl:kft,uharr:_ft,uhblk:$ft,ulcorn:Eft,ulcorner:Sft,ulcrop:Cft,ultri:Tft,Umacr:Aft,umacr:Nft,uml:Pft,UnderBar:Oft,UnderBrace:Ift,UnderBracket:Rft,UnderParenthesis:Mft,Union:Dft,UnionPlus:Lft,Uogon:jft,uogon:Fft,Uopf:Bft,uopf:zft,UpArrowBar:qft,uparrow:Wft,UpArrow:Vft,Uparrow:Uft,UpArrowDownArrow:Hft,updownarrow:Kft,UpDownArrow:Gft,Updownarrow:Zft,UpEquilibrium:Jft,upharpoonleft:Yft,upharpoonright:Xft,uplus:Qft,UpperLeftArrow:ept,UpperRightArrow:tpt,upsi:npt,Upsi:rpt,upsih:opt,Upsilon:spt,upsilon:ipt,UpTeeArrow:apt,UpTee:lpt,upuparrows:cpt,urcorn:upt,urcorner:dpt,urcrop:fpt,Uring:ppt,uring:hpt,urtri:mpt,Uscr:gpt,uscr:ypt,utdot:bpt,Utilde:vpt,utilde:wpt,utri:xpt,utrif:kpt,uuarr:_pt,Uuml:$pt,uuml:Ept,uwangle:Spt,vangrt:Cpt,varepsilon:Tpt,varkappa:Apt,varnothing:Npt,varphi:Ppt,varpi:Opt,varpropto:Ipt,varr:Rpt,vArr:Mpt,varrho:Dpt,varsigma:Lpt,varsubsetneq:jpt,varsubsetneqq:Fpt,varsupsetneq:Bpt,varsupsetneqq:zpt,vartheta:qpt,vartriangleleft:Wpt,vartriangleright:Vpt,vBar:Upt,Vbar:Hpt,vBarv:Kpt,Vcy:Gpt,vcy:Zpt,vdash:Jpt,vDash:Ypt,Vdash:Xpt,VDash:Qpt,Vdashl:eht,veebar:tht,vee:nht,Vee:rht,veeeq:oht,vellip:sht,verbar:iht,Verbar:aht,vert:lht,Vert:cht,VerticalBar:uht,VerticalLine:dht,VerticalSeparator:fht,VerticalTilde:pht,VeryThinSpace:hht,Vfr:mht,vfr:ght,vltri:yht,vnsub:bht,vnsup:vht,Vopf:wht,vopf:xht,vprop:kht,vrtri:_ht,Vscr:$ht,vscr:Eht,vsubnE:Sht,vsubne:Cht,vsupnE:Tht,vsupne:Aht,Vvdash:Nht,vzigzag:Pht,Wcirc:Oht,wcirc:Iht,wedbar:Rht,wedge:Mht,Wedge:Dht,wedgeq:Lht,weierp:jht,Wfr:Fht,wfr:Bht,Wopf:zht,wopf:qht,wp:Wht,wr:Vht,wreath:Uht,Wscr:Hht,wscr:Kht,xcap:Ght,xcirc:Zht,xcup:Jht,xdtri:Yht,Xfr:Xht,xfr:Qht,xharr:emt,xhArr:tmt,Xi:nmt,xi:rmt,xlarr:omt,xlArr:smt,xmap:imt,xnis:amt,xodot:lmt,Xopf:cmt,xopf:umt,xoplus:dmt,xotime:fmt,xrarr:pmt,xrArr:hmt,Xscr:mmt,xscr:gmt,xsqcup:ymt,xuplus:bmt,xutri:vmt,xvee:wmt,xwedge:xmt,Yacute:kmt,yacute:_mt,YAcy:$mt,yacy:Emt,Ycirc:Smt,ycirc:Cmt,Ycy:Tmt,ycy:Amt,yen:Nmt,Yfr:Pmt,yfr:Omt,YIcy:Imt,yicy:Rmt,Yopf:Mmt,yopf:Dmt,Yscr:Lmt,yscr:jmt,YUcy:Fmt,yucy:Bmt,yuml:zmt,Yuml:qmt,Zacute:Wmt,zacute:Vmt,Zcaron:Umt,zcaron:Hmt,Zcy:Kmt,zcy:Gmt,Zdot:Zmt,zdot:Jmt,zeetrf:Ymt,ZeroWidthSpace:Xmt,Zeta:Qmt,zeta:egt,zfr:tgt,Zfr:ngt,ZHcy:rgt,zhcy:ogt,zigrarr:sgt,zopf:igt,Zopf:agt,Zscr:lgt,zscr:cgt,zwj:ugt,zwnj:dgt};var sD=fgt;(function(t){function e(E){return Object.prototype.toString.call(E)}function n(E){return e(E)==="[object String]"}var r=Object.prototype.hasOwnProperty;function o(E,D){return r.call(E,D)}function s(E){var D=Array.prototype.slice.call(arguments,1);return D.forEach(function(R){if(R){if(typeof R!="object")throw new TypeError(R+"must be object");Object.keys(R).forEach(function(j){E[j]=R[j]})}}),E}function i(E,D,R){return[].concat(E.slice(0,D),R,E.slice(D+1))}function a(E){return!(E>=55296&&E<=57343||E>=64976&&E<=65007||(E&65535)===65535||(E&65535)===65534||E>=0&&E<=8||E===11||E>=14&&E<=31||E>=127&&E<=159||E>1114111)}function l(E){if(E>65535){E-=65536;var D=55296+(E>>10),R=56320+(E&1023);return String.fromCharCode(D,R)}return String.fromCharCode(E)}var c=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,u=/&([a-z#][a-z0-9]{1,31});/gi,d=new RegExp(c.source+"|"+u.source,"gi"),f=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i,p=sD;function h(E,D){var R;return o(p,D)?p[D]:D.charCodeAt(0)===35&&f.test(D)&&(R=D[1].toLowerCase()==="x"?parseInt(D.slice(2),16):parseInt(D.slice(1),10),a(R))?l(R):E}function y(E){return E.indexOf("\\")<0?E:E.replace(c,"$1")}function g(E){return E.indexOf("\\")<0&&E.indexOf("&")<0?E:E.replace(d,function(D,R,j){return R||h(D,j)})}var b=/[&<>"]/,w=/[&<>"]/g,x={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function k(E){return x[E]}function S(E){return b.test(E)?E.replace(w,k):E}var _=/[.?*+^$[\]\\(){}|-]/g;function C(E){return E.replace(_,"\\$&")}function $(E){switch(E){case 9:case 32:return!0}return!1}function T(E){if(E>=8192&&E<=8202)return!0;switch(E){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}var A=pp;function N(E){return A.test(E)}function q(E){switch(E){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function O(E){return E=E.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(E=E.replace(//g,"")),E.toLowerCase().toUpperCase()}t.lib={},t.lib.mdurl=Ii,t.lib.ucmicro=BM(),t.assign=s,t.isString=n,t.has=o,t.unescapeMd=y,t.unescapeAll=g,t.isValidEntityCode=a,t.fromCodePoint=l,t.escapeHtml=S,t.arrayReplaceAt=i,t.isSpace=$,t.isWhiteSpace=T,t.isMdAsciiPunct=q,t.isPunctChar=N,t.escapeRE=C,t.normalizeReference=O})(ze);var Y1={},pgt=function(e,n,r){var o,s,i,a,l=-1,c=e.posMax,u=e.pos;for(e.pos=n+1,o=1;e.pos<c;){if(i=e.src.charCodeAt(e.pos),i===93&&(o--,o===0)){s=!0;break}if(a=e.pos,e.md.inline.skipToken(e),i===91){if(a===e.pos-1)o++;else if(r)return e.pos=u,-1}}return s&&(l=e.pos),e.pos=u,l},bT=ze.unescapeAll,hgt=function(e,n,r){var o,s,i=n,a={ok:!1,pos:0,lines:0,str:""};if(e.charCodeAt(i)===60){for(i++;i<r;){if(o=e.charCodeAt(i),o===10||o===60)return a;if(o===62)return a.pos=i+1,a.str=bT(e.slice(n+1,i)),a.ok=!0,a;if(o===92&&i+1<r){i+=2;continue}i++}return a}for(s=0;i<r&&(o=e.charCodeAt(i),!(o===32||o<32||o===127));){if(o===92&&i+1<r){if(e.charCodeAt(i+1)===32)break;i+=2;continue}if(o===40&&(s++,s>32))return a;if(o===41){if(s===0)break;s--}i++}return n===i||s!==0||(a.str=bT(e.slice(n,i)),a.pos=i,a.ok=!0),a},mgt=ze.unescapeAll,ggt=function(e,n,r){var o,s,i=0,a=n,l={ok:!1,pos:0,lines:0,str:""};if(a>=r||(s=e.charCodeAt(a),s!==34&&s!==39&&s!==40))return l;for(a++,s===40&&(s=41);a<r;){if(o=e.charCodeAt(a),o===s)return l.pos=a+1,l.lines=i,l.str=mgt(e.slice(n+1,a)),l.ok=!0,l;if(o===40&&s===41)return l;o===10?i++:o===92&&a+1<r&&(a++,e.charCodeAt(a)===10&&i++),a++}return l};Y1.parseLinkLabel=pgt;Y1.parseLinkDestination=hgt;Y1.parseLinkTitle=ggt;var ygt=ze.assign,bgt=ze.unescapeAll,Fa=ze.escapeHtml,No={};No.code_inline=function(t,e,n,r,o){var s=t[e];return"<code"+o.renderAttrs(s)+">"+Fa(s.content)+"</code>"};No.code_block=function(t,e,n,r,o){var s=t[e];return"<pre"+o.renderAttrs(s)+"><code>"+Fa(t[e].content)+`</code></pre>
`};No.fence=function(t,e,n,r,o){var s=t[e],i=s.info?bgt(s.info).trim():"",a="",l="",c,u,d,f,p;return i&&(d=i.split(/(\s+)/g),a=d[0],l=d.slice(2).join("")),n.highlight?c=n.highlight(s.content,a,l)||Fa(s.content):c=Fa(s.content),c.indexOf("<pre")===0?c+`
`:i?(u=s.attrIndex("class"),f=s.attrs?s.attrs.slice():[],u<0?f.push(["class",n.langPrefix+a]):(f[u]=f[u].slice(),f[u][1]+=" "+n.langPrefix+a),p={attrs:f},"<pre><code"+o.renderAttrs(p)+">"+c+`</code></pre>
`):"<pre><code"+o.renderAttrs(s)+">"+c+`</code></pre>
`};No.image=function(t,e,n,r,o){var s=t[e];return s.attrs[s.attrIndex("alt")][1]=o.renderInlineAsText(s.children,n,r),o.renderToken(t,e,n)};No.hardbreak=function(t,e,n){return n.xhtmlOut?`<br />
`:`<br>
`};No.softbreak=function(t,e,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};No.text=function(t,e){return Fa(t[e].content)};No.html_block=function(t,e){return t[e].content};No.html_inline=function(t,e){return t[e].content};function nu(){this.rules=ygt({},No)}nu.prototype.renderAttrs=function(e){var n,r,o;if(!e.attrs)return"";for(o="",n=0,r=e.attrs.length;n<r;n++)o+=" "+Fa(e.attrs[n][0])+'="'+Fa(e.attrs[n][1])+'"';return o};nu.prototype.renderToken=function(e,n,r){var o,s="",i=!1,a=e[n];return a.hidden?"":(a.block&&a.nesting!==-1&&n&&e[n-1].hidden&&(s+=`
`),s+=(a.nesting===-1?"</":"<")+a.tag,s+=this.renderAttrs(a),a.nesting===0&&r.xhtmlOut&&(s+=" /"),a.block&&(i=!0,a.nesting===1&&n+1<e.length&&(o=e[n+1],(o.type==="inline"||o.hidden||o.nesting===-1&&o.tag===a.tag)&&(i=!1))),s+=i?`>
`:">",s)};nu.prototype.renderInline=function(t,e,n){for(var r,o="",s=this.rules,i=0,a=t.length;i<a;i++)r=t[i].type,typeof s[r]!="undefined"?o+=s[r](t,i,e,n,this):o+=this.renderToken(t,i,e);return o};nu.prototype.renderInlineAsText=function(t,e,n){for(var r="",o=0,s=t.length;o<s;o++)t[o].type==="text"?r+=t[o].content:t[o].type==="image"?r+=this.renderInlineAsText(t[o].children,e,n):t[o].type==="softbreak"&&(r+=`
`);return r};nu.prototype.render=function(t,e,n){var r,o,s,i="",a=this.rules;for(r=0,o=t.length;r<o;r++)s=t[r].type,s==="inline"?i+=this.renderInline(t[r].children,e,n):typeof a[s]!="undefined"?i+=a[s](t,r,e,n,this):i+=this.renderToken(t,r,e,n);return i};var vgt=nu;function Ur(){this.__rules__=[],this.__cache__=null}Ur.prototype.__find__=function(t){for(var e=0;e<this.__rules__.length;e++)if(this.__rules__[e].name===t)return e;return-1};Ur.prototype.__compile__=function(){var t=this,e=[""];t.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(r){e.indexOf(r)<0&&e.push(r)})}),t.__cache__={},e.forEach(function(n){t.__cache__[n]=[],t.__rules__.forEach(function(r){r.enabled&&(n&&r.alt.indexOf(n)<0||t.__cache__[n].push(r.fn))})})};Ur.prototype.at=function(t,e,n){var r=this.__find__(t),o=n||{};if(r===-1)throw new Error("Parser rule not found: "+t);this.__rules__[r].fn=e,this.__rules__[r].alt=o.alt||[],this.__cache__=null};Ur.prototype.before=function(t,e,n,r){var o=this.__find__(t),s=r||{};if(o===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(o,0,{name:e,enabled:!0,fn:n,alt:s.alt||[]}),this.__cache__=null};Ur.prototype.after=function(t,e,n,r){var o=this.__find__(t),s=r||{};if(o===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(o+1,0,{name:e,enabled:!0,fn:n,alt:s.alt||[]}),this.__cache__=null};Ur.prototype.push=function(t,e,n){var r=n||{};this.__rules__.push({name:t,enabled:!0,fn:e,alt:r.alt||[]}),this.__cache__=null};Ur.prototype.enable=function(t,e){Array.isArray(t)||(t=[t]);var n=[];return t.forEach(function(r){var o=this.__find__(r);if(o<0){if(e)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[o].enabled=!0,n.push(r)},this),this.__cache__=null,n};Ur.prototype.enableOnly=function(t,e){Array.isArray(t)||(t=[t]),this.__rules__.forEach(function(n){n.enabled=!1}),this.enable(t,e)};Ur.prototype.disable=function(t,e){Array.isArray(t)||(t=[t]);var n=[];return t.forEach(function(r){var o=this.__find__(r);if(o<0){if(e)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[o].enabled=!1,n.push(r)},this),this.__cache__=null,n};Ur.prototype.getRules=function(t){return this.__cache__===null&&this.__compile__(),this.__cache__[t]||[]};var H_=Ur,wgt=/\r\n?|\n/g,xgt=/\0/g,kgt=function(e){var n;n=e.src.replace(wgt,`
`),n=n.replace(xgt,""),e.src=n},_gt=function(e){var n;e.inlineMode?(n=new e.Token("inline","",0),n.content=e.src,n.map=[0,1],n.children=[],e.tokens.push(n)):e.md.block.parse(e.src,e.md,e.env,e.tokens)},$gt=function(e){var n=e.tokens,r,o,s;for(o=0,s=n.length;o<s;o++)r=n[o],r.type==="inline"&&e.md.inline.parse(r.content,e.md,e.env,r.children)},Egt=ze.arrayReplaceAt;function Sgt(t){return/^<a[>\s]/i.test(t)}function Cgt(t){return/^<\/a\s*>/i.test(t)}var Tgt=function(e){var n,r,o,s,i,a,l,c,u,d,f,p,h,y,g,b,w=e.tokens,x;if(e.md.options.linkify){for(r=0,o=w.length;r<o;r++)if(!(w[r].type!=="inline"||!e.md.linkify.pretest(w[r].content)))for(s=w[r].children,h=0,n=s.length-1;n>=0;n--){if(a=s[n],a.type==="link_close"){for(n--;s[n].level!==a.level&&s[n].type!=="link_open";)n--;continue}if(a.type==="html_inline"&&(Sgt(a.content)&&h>0&&h--,Cgt(a.content)&&h++),!(h>0)&&a.type==="text"&&e.md.linkify.test(a.content)){for(u=a.content,x=e.md.linkify.match(u),l=[],p=a.level,f=0,x.length>0&&x[0].index===0&&n>0&&s[n-1].type==="text_special"&&(x=x.slice(1)),c=0;c<x.length;c++)y=x[c].url,g=e.md.normalizeLink(y),e.md.validateLink(g)&&(b=x[c].text,x[c].schema?x[c].schema==="mailto:"&&!/^mailto:/i.test(b)?b=e.md.normalizeLinkText("mailto:"+b).replace(/^mailto:/,""):b=e.md.normalizeLinkText(b):b=e.md.normalizeLinkText("http://"+b).replace(/^http:\/\//,""),d=x[c].index,d>f&&(i=new e.Token("text","",0),i.content=u.slice(f,d),i.level=p,l.push(i)),i=new e.Token("link_open","a",1),i.attrs=[["href",g]],i.level=p++,i.markup="linkify",i.info="auto",l.push(i),i=new e.Token("text","",0),i.content=b,i.level=p,l.push(i),i=new e.Token("link_close","a",-1),i.level=--p,i.markup="linkify",i.info="auto",l.push(i),f=x[c].lastIndex);f<u.length&&(i=new e.Token("text","",0),i.content=u.slice(f),i.level=p,l.push(i)),w[r].children=s=Egt(s,n,l)}}}},iD=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,Agt=/\((c|tm|r)\)/i,Ngt=/\((c|tm|r)\)/ig,Pgt={c:"",r:"",tm:""};function Ogt(t,e){return Pgt[e.toLowerCase()]}function Igt(t){var e,n,r=0;for(e=t.length-1;e>=0;e--)n=t[e],n.type==="text"&&!r&&(n.content=n.content.replace(Ngt,Ogt)),n.type==="link_open"&&n.info==="auto"&&r--,n.type==="link_close"&&n.info==="auto"&&r++}function Rgt(t){var e,n,r=0;for(e=t.length-1;e>=0;e--)n=t[e],n.type==="text"&&!r&&iD.test(n.content)&&(n.content=n.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),n.type==="link_open"&&n.info==="auto"&&r--,n.type==="link_close"&&n.info==="auto"&&r++}var Mgt=function(e){var n;if(e.md.options.typographer)for(n=e.tokens.length-1;n>=0;n--)e.tokens[n].type==="inline"&&(Agt.test(e.tokens[n].content)&&Igt(e.tokens[n].children),iD.test(e.tokens[n].content)&&Rgt(e.tokens[n].children))},vT=ze.isWhiteSpace,wT=ze.isPunctChar,xT=ze.isMdAsciiPunct,Dgt=/['"]/,kT=/['"]/g,_T="";function ah(t,e,n){return t.slice(0,e)+n+t.slice(e+1)}function Lgt(t,e){var n,r,o,s,i,a,l,c,u,d,f,p,h,y,g,b,w,x,k,S,_;for(k=[],n=0;n<t.length;n++){for(r=t[n],l=t[n].level,w=k.length-1;w>=0&&!(k[w].level<=l);w--);if(k.length=w+1,r.type==="text"){o=r.content,i=0,a=o.length;e:for(;i<a&&(kT.lastIndex=i,s=kT.exec(o),!!s);){if(g=b=!0,i=s.index+1,x=s[0]==="'",u=32,s.index-1>=0)u=o.charCodeAt(s.index-1);else for(w=n-1;w>=0&&!(t[w].type==="softbreak"||t[w].type==="hardbreak");w--)if(t[w].content){u=t[w].content.charCodeAt(t[w].content.length-1);break}if(d=32,i<a)d=o.charCodeAt(i);else for(w=n+1;w<t.length&&!(t[w].type==="softbreak"||t[w].type==="hardbreak");w++)if(t[w].content){d=t[w].content.charCodeAt(0);break}if(f=xT(u)||wT(String.fromCharCode(u)),p=xT(d)||wT(String.fromCharCode(d)),h=vT(u),y=vT(d),y?g=!1:p&&(h||f||(g=!1)),h?b=!1:f&&(y||p||(b=!1)),d===34&&s[0]==='"'&&u>=48&&u<=57&&(b=g=!1),g&&b&&(g=f,b=p),!g&&!b){x&&(r.content=ah(r.content,s.index,_T));continue}if(b){for(w=k.length-1;w>=0&&(c=k[w],!(k[w].level<l));w--)if(c.single===x&&k[w].level===l){c=k[w],x?(S=e.md.options.quotes[2],_=e.md.options.quotes[3]):(S=e.md.options.quotes[0],_=e.md.options.quotes[1]),r.content=ah(r.content,s.index,_),t[c.token].content=ah(t[c.token].content,c.pos,S),i+=_.length-1,c.token===n&&(i+=S.length-1),o=r.content,a=o.length,k.length=w;continue e}}g?k.push({token:n,pos:s.index,single:x,level:l}):b&&x&&(r.content=ah(r.content,s.index,_T))}}}}var jgt=function(e){var n;if(e.md.options.typographer)for(n=e.tokens.length-1;n>=0;n--)e.tokens[n].type!=="inline"||!Dgt.test(e.tokens[n].content)||Lgt(e.tokens[n].children,e)},Fgt=function(e){var n,r,o,s,i,a,l=e.tokens;for(n=0,r=l.length;n<r;n++)if(l[n].type==="inline"){for(o=l[n].children,i=o.length,s=0;s<i;s++)o[s].type==="text_special"&&(o[s].type="text");for(s=a=0;s<i;s++)o[s].type==="text"&&s+1<i&&o[s+1].type==="text"?o[s+1].content=o[s].content+o[s+1].content:(s!==a&&(o[a]=o[s]),a++);s!==a&&(o.length=a)}};function ru(t,e,n){this.type=t,this.tag=e,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}ru.prototype.attrIndex=function(e){var n,r,o;if(!this.attrs)return-1;for(n=this.attrs,r=0,o=n.length;r<o;r++)if(n[r][0]===e)return r;return-1};ru.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]};ru.prototype.attrSet=function(e,n){var r=this.attrIndex(e),o=[e,n];r<0?this.attrPush(o):this.attrs[r]=o};ru.prototype.attrGet=function(e){var n=this.attrIndex(e),r=null;return n>=0&&(r=this.attrs[n][1]),r};ru.prototype.attrJoin=function(e,n){var r=this.attrIndex(e);r<0?this.attrPush([e,n]):this.attrs[r][1]=this.attrs[r][1]+" "+n};var K_=ru,Bgt=K_;function aD(t,e,n){this.src=t,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=e}aD.prototype.Token=Bgt;var zgt=aD,qgt=H_,nv=[["normalize",kgt],["block",_gt],["inline",$gt],["linkify",Tgt],["replacements",Mgt],["smartquotes",jgt],["text_join",Fgt]];function G_(){this.ruler=new qgt;for(var t=0;t<nv.length;t++)this.ruler.push(nv[t][0],nv[t][1])}G_.prototype.process=function(t){var e,n,r;for(r=this.ruler.getRules(""),e=0,n=r.length;e<n;e++)r[e](t)};G_.prototype.State=zgt;var Wgt=G_,rv=ze.isSpace;function ov(t,e){var n=t.bMarks[e]+t.tShift[e],r=t.eMarks[e];return t.src.slice(n,r)}function $T(t){var e=[],n=0,r=t.length,o,s=!1,i=0,a="";for(o=t.charCodeAt(n);n<r;)o===124&&(s?(a+=t.substring(i,n-1),i=n):(e.push(a+t.substring(i,n)),a="",i=n+1)),s=o===92,n++,o=t.charCodeAt(n);return e.push(a+t.substring(i)),e}var Vgt=function(e,n,r,o){var s,i,a,l,c,u,d,f,p,h,y,g,b,w,x,k,S,_;if(n+2>r||(u=n+1,e.sCount[u]<e.blkIndent)||e.sCount[u]-e.blkIndent>=4||(a=e.bMarks[u]+e.tShift[u],a>=e.eMarks[u])||(S=e.src.charCodeAt(a++),S!==124&&S!==45&&S!==58)||a>=e.eMarks[u]||(_=e.src.charCodeAt(a++),_!==124&&_!==45&&_!==58&&!rv(_))||S===45&&rv(_))return!1;for(;a<e.eMarks[u];){if(s=e.src.charCodeAt(a),s!==124&&s!==45&&s!==58&&!rv(s))return!1;a++}for(i=ov(e,n+1),d=i.split("|"),h=[],l=0;l<d.length;l++){if(y=d[l].trim(),!y){if(l===0||l===d.length-1)continue;return!1}if(!/^:?-+:?$/.test(y))return!1;y.charCodeAt(y.length-1)===58?h.push(y.charCodeAt(0)===58?"center":"right"):y.charCodeAt(0)===58?h.push("left"):h.push("")}if(i=ov(e,n).trim(),i.indexOf("|")===-1||e.sCount[n]-e.blkIndent>=4||(d=$T(i),d.length&&d[0]===""&&d.shift(),d.length&&d[d.length-1]===""&&d.pop(),f=d.length,f===0||f!==h.length))return!1;if(o)return!0;for(w=e.parentType,e.parentType="table",k=e.md.block.ruler.getRules("blockquote"),p=e.push("table_open","table",1),p.map=g=[n,0],p=e.push("thead_open","thead",1),p.map=[n,n+1],p=e.push("tr_open","tr",1),p.map=[n,n+1],l=0;l<d.length;l++)p=e.push("th_open","th",1),h[l]&&(p.attrs=[["style","text-align:"+h[l]]]),p=e.push("inline","",0),p.content=d[l].trim(),p.children=[],p=e.push("th_close","th",-1);for(p=e.push("tr_close","tr",-1),p=e.push("thead_close","thead",-1),u=n+2;u<r&&!(e.sCount[u]<e.blkIndent);u++){for(x=!1,l=0,c=k.length;l<c;l++)if(k[l](e,u,r,!0)){x=!0;break}if(x||(i=ov(e,u).trim(),!i)||e.sCount[u]-e.blkIndent>=4)break;for(d=$T(i),d.length&&d[0]===""&&d.shift(),d.length&&d[d.length-1]===""&&d.pop(),u===n+2&&(p=e.push("tbody_open","tbody",1),p.map=b=[n+2,0]),p=e.push("tr_open","tr",1),p.map=[u,u+1],l=0;l<f;l++)p=e.push("td_open","td",1),h[l]&&(p.attrs=[["style","text-align:"+h[l]]]),p=e.push("inline","",0),p.content=d[l]?d[l].trim():"",p.children=[],p=e.push("td_close","td",-1);p=e.push("tr_close","tr",-1)}return b&&(p=e.push("tbody_close","tbody",-1),b[1]=u),p=e.push("table_close","table",-1),g[1]=u,e.parentType=w,e.line=u,!0},Ugt=function(e,n,r){var o,s,i;if(e.sCount[n]-e.blkIndent<4)return!1;for(s=o=n+1;o<r;){if(e.isEmpty(o)){o++;continue}if(e.sCount[o]-e.blkIndent>=4){o++,s=o;continue}break}return e.line=s,i=e.push("code_block","code",0),i.content=e.getLines(n,s,4+e.blkIndent,!1)+`
`,i.map=[n,e.line],!0},Hgt=function(e,n,r,o){var s,i,a,l,c,u,d,f=!1,p=e.bMarks[n]+e.tShift[n],h=e.eMarks[n];if(e.sCount[n]-e.blkIndent>=4||p+3>h||(s=e.src.charCodeAt(p),s!==126&&s!==96)||(c=p,p=e.skipChars(p,s),i=p-c,i<3)||(d=e.src.slice(c,p),a=e.src.slice(p,h),s===96&&a.indexOf(String.fromCharCode(s))>=0))return!1;if(o)return!0;for(l=n;l++,!(l>=r||(p=c=e.bMarks[l]+e.tShift[l],h=e.eMarks[l],p<h&&e.sCount[l]<e.blkIndent));)if(e.src.charCodeAt(p)===s&&!(e.sCount[l]-e.blkIndent>=4)&&(p=e.skipChars(p,s),!(p-c<i)&&(p=e.skipSpaces(p),!(p<h)))){f=!0;break}return i=e.sCount[n],e.line=l+(f?1:0),u=e.push("fence","code",0),u.info=a,u.content=e.getLines(n+1,l,i,!0),u.markup=d,u.map=[n,e.line],!0},Kgt=ze.isSpace,Ggt=function(e,n,r,o){var s,i,a,l,c,u,d,f,p,h,y,g,b,w,x,k,S,_,C,$,T=e.lineMax,A=e.bMarks[n]+e.tShift[n],N=e.eMarks[n];if(e.sCount[n]-e.blkIndent>=4||e.src.charCodeAt(A)!==62)return!1;if(o)return!0;for(h=[],y=[],w=[],x=[],_=e.md.block.ruler.getRules("blockquote"),b=e.parentType,e.parentType="blockquote",f=n;f<r&&($=e.sCount[f]<e.blkIndent,A=e.bMarks[f]+e.tShift[f],N=e.eMarks[f],!(A>=N));f++){if(e.src.charCodeAt(A++)===62&&!$){for(l=e.sCount[f]+1,e.src.charCodeAt(A)===32?(A++,l++,s=!1,k=!0):e.src.charCodeAt(A)===9?(k=!0,(e.bsCount[f]+l)%4===3?(A++,l++,s=!1):s=!0):k=!1,p=l,h.push(e.bMarks[f]),e.bMarks[f]=A;A<N&&(i=e.src.charCodeAt(A),Kgt(i));){i===9?p+=4-(p+e.bsCount[f]+(s?1:0))%4:p++;A++}u=A>=N,y.push(e.bsCount[f]),e.bsCount[f]=e.sCount[f]+1+(k?1:0),w.push(e.sCount[f]),e.sCount[f]=p-l,x.push(e.tShift[f]),e.tShift[f]=A-e.bMarks[f];continue}if(u)break;for(S=!1,a=0,c=_.length;a<c;a++)if(_[a](e,f,r,!0)){S=!0;break}if(S){e.lineMax=f,e.blkIndent!==0&&(h.push(e.bMarks[f]),y.push(e.bsCount[f]),x.push(e.tShift[f]),w.push(e.sCount[f]),e.sCount[f]-=e.blkIndent);break}h.push(e.bMarks[f]),y.push(e.bsCount[f]),x.push(e.tShift[f]),w.push(e.sCount[f]),e.sCount[f]=-1}for(g=e.blkIndent,e.blkIndent=0,C=e.push("blockquote_open","blockquote",1),C.markup=">",C.map=d=[n,0],e.md.block.tokenize(e,n,f),C=e.push("blockquote_close","blockquote",-1),C.markup=">",e.lineMax=T,e.parentType=b,d[1]=e.line,a=0;a<x.length;a++)e.bMarks[a+n]=h[a],e.tShift[a+n]=x[a],e.sCount[a+n]=w[a],e.bsCount[a+n]=y[a];return e.blkIndent=g,!0},Zgt=ze.isSpace,Jgt=function(e,n,r,o){var s,i,a,l,c=e.bMarks[n]+e.tShift[n],u=e.eMarks[n];if(e.sCount[n]-e.blkIndent>=4||(s=e.src.charCodeAt(c++),s!==42&&s!==45&&s!==95))return!1;for(i=1;c<u;){if(a=e.src.charCodeAt(c++),a!==s&&!Zgt(a))return!1;a===s&&i++}return i<3?!1:(o||(e.line=n+1,l=e.push("hr","hr",0),l.map=[n,e.line],l.markup=Array(i+1).join(String.fromCharCode(s))),!0)},lD=ze.isSpace;function ET(t,e){var n,r,o,s;return r=t.bMarks[e]+t.tShift[e],o=t.eMarks[e],n=t.src.charCodeAt(r++),n!==42&&n!==45&&n!==43||r<o&&(s=t.src.charCodeAt(r),!lD(s))?-1:r}function ST(t,e){var n,r=t.bMarks[e]+t.tShift[e],o=r,s=t.eMarks[e];if(o+1>=s||(n=t.src.charCodeAt(o++),n<48||n>57))return-1;for(;;){if(o>=s)return-1;if(n=t.src.charCodeAt(o++),n>=48&&n<=57){if(o-r>=10)return-1;continue}if(n===41||n===46)break;return-1}return o<s&&(n=t.src.charCodeAt(o),!lD(n))?-1:o}function Ygt(t,e){var n,r,o=t.level+2;for(n=e+2,r=t.tokens.length-2;n<r;n++)t.tokens[n].level===o&&t.tokens[n].type==="paragraph_open"&&(t.tokens[n+2].hidden=!0,t.tokens[n].hidden=!0,n+=2)}var Xgt=function(e,n,r,o){var s,i,a,l,c,u,d,f,p,h,y,g,b,w,x,k,S,_,C,$,T,A,N,q,O,E,D,R=n,j=!1,we=!0;if(e.sCount[R]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[R]-e.listIndent>=4&&e.sCount[R]<e.blkIndent)return!1;if(o&&e.parentType==="paragraph"&&e.sCount[R]>=e.blkIndent&&(j=!0),(A=ST(e,R))>=0){if(d=!0,q=e.bMarks[R]+e.tShift[R],b=Number(e.src.slice(q,A-1)),j&&b!==1)return!1}else if((A=ET(e,R))>=0)d=!1;else return!1;if(j&&e.skipSpaces(A)>=e.eMarks[R])return!1;if(o)return!0;for(g=e.src.charCodeAt(A-1),y=e.tokens.length,d?(D=e.push("ordered_list_open","ol",1),b!==1&&(D.attrs=[["start",b]])):D=e.push("bullet_list_open","ul",1),D.map=h=[R,0],D.markup=String.fromCharCode(g),N=!1,E=e.md.block.ruler.getRules("list"),S=e.parentType,e.parentType="list";R<r;){for(T=A,w=e.eMarks[R],u=x=e.sCount[R]+A-(e.bMarks[R]+e.tShift[R]);T<w;){if(s=e.src.charCodeAt(T),s===9)x+=4-(x+e.bsCount[R])%4;else if(s===32)x++;else break;T++}if(i=T,i>=w?c=1:c=x-u,c>4&&(c=1),l=u+c,D=e.push("list_item_open","li",1),D.markup=String.fromCharCode(g),D.map=f=[R,0],d&&(D.info=e.src.slice(q,A-1)),$=e.tight,C=e.tShift[R],_=e.sCount[R],k=e.listIndent,e.listIndent=e.blkIndent,e.blkIndent=l,e.tight=!0,e.tShift[R]=i-e.bMarks[R],e.sCount[R]=x,i>=w&&e.isEmpty(R+1)?e.line=Math.min(e.line+2,r):e.md.block.tokenize(e,R,r,!0),(!e.tight||N)&&(we=!1),N=e.line-R>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=k,e.tShift[R]=C,e.sCount[R]=_,e.tight=$,D=e.push("list_item_close","li",-1),D.markup=String.fromCharCode(g),R=e.line,f[1]=R,R>=r||e.sCount[R]<e.blkIndent||e.sCount[R]-e.blkIndent>=4)break;for(O=!1,a=0,p=E.length;a<p;a++)if(E[a](e,R,r,!0)){O=!0;break}if(O)break;if(d){if(A=ST(e,R),A<0)break;q=e.bMarks[R]+e.tShift[R]}else if(A=ET(e,R),A<0)break;if(g!==e.src.charCodeAt(A-1))break}return d?D=e.push("ordered_list_close","ol",-1):D=e.push("bullet_list_close","ul",-1),D.markup=String.fromCharCode(g),h[1]=R,e.line=R,e.parentType=S,we&&Ygt(e,y),!0},Qgt=ze.normalizeReference,lh=ze.isSpace,e1t=function(e,n,r,o){var s,i,a,l,c,u,d,f,p,h,y,g,b,w,x,k,S=0,_=e.bMarks[n]+e.tShift[n],C=e.eMarks[n],$=n+1;if(e.sCount[n]-e.blkIndent>=4||e.src.charCodeAt(_)!==91)return!1;for(;++_<C;)if(e.src.charCodeAt(_)===93&&e.src.charCodeAt(_-1)!==92){if(_+1===C||e.src.charCodeAt(_+1)!==58)return!1;break}for(l=e.lineMax,x=e.md.block.ruler.getRules("reference"),h=e.parentType,e.parentType="reference";$<l&&!e.isEmpty($);$++)if(!(e.sCount[$]-e.blkIndent>3)&&!(e.sCount[$]<0)){for(w=!1,u=0,d=x.length;u<d;u++)if(x[u](e,$,l,!0)){w=!0;break}if(w)break}for(b=e.getLines(n,$,e.blkIndent,!1).trim(),C=b.length,_=1;_<C;_++){if(s=b.charCodeAt(_),s===91)return!1;if(s===93){p=_;break}else s===10?S++:s===92&&(_++,_<C&&b.charCodeAt(_)===10&&S++)}if(p<0||b.charCodeAt(p+1)!==58)return!1;for(_=p+2;_<C;_++)if(s=b.charCodeAt(_),s===10)S++;else if(!lh(s))break;if(y=e.md.helpers.parseLinkDestination(b,_,C),!y.ok||(c=e.md.normalizeLink(y.str),!e.md.validateLink(c)))return!1;for(_=y.pos,S+=y.lines,i=_,a=S,g=_;_<C;_++)if(s=b.charCodeAt(_),s===10)S++;else if(!lh(s))break;for(y=e.md.helpers.parseLinkTitle(b,_,C),_<C&&g!==_&&y.ok?(k=y.str,_=y.pos,S+=y.lines):(k="",_=i,S=a);_<C&&(s=b.charCodeAt(_),!!lh(s));)_++;if(_<C&&b.charCodeAt(_)!==10&&k)for(k="",_=i,S=a;_<C&&(s=b.charCodeAt(_),!!lh(s));)_++;return _<C&&b.charCodeAt(_)!==10||(f=Qgt(b.slice(1,p)),!f)?!1:(o||(typeof e.env.references=="undefined"&&(e.env.references={}),typeof e.env.references[f]=="undefined"&&(e.env.references[f]={title:k,href:c}),e.parentType=h,e.line=n+S+1),!0)},t1t=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],X1={},n1t="[a-zA-Z_:][a-zA-Z0-9:._-]*",r1t="[^\"'=<>`\\x00-\\x20]+",o1t="'[^']*'",s1t='"[^"]*"',i1t="(?:"+r1t+"|"+o1t+"|"+s1t+")",a1t="(?:\\s+"+n1t+"(?:\\s*=\\s*"+i1t+")?)",cD="<[A-Za-z][A-Za-z0-9\\-]*"+a1t+"*\\s*\\/?>",uD="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",l1t="<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->",c1t="<[?][\\s\\S]*?[?]>",u1t="<![A-Z]+\\s+[^>]*>",d1t="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",f1t=new RegExp("^(?:"+cD+"|"+uD+"|"+l1t+"|"+c1t+"|"+u1t+"|"+d1t+")"),p1t=new RegExp("^(?:"+cD+"|"+uD+")");X1.HTML_TAG_RE=f1t;X1.HTML_OPEN_CLOSE_TAG_RE=p1t;var h1t=t1t,m1t=X1.HTML_OPEN_CLOSE_TAG_RE,ul=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+h1t.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(m1t.source+"\\s*$"),/^$/,!1]],g1t=function(e,n,r,o){var s,i,a,l,c=e.bMarks[n]+e.tShift[n],u=e.eMarks[n];if(e.sCount[n]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(c)!==60)return!1;for(l=e.src.slice(c,u),s=0;s<ul.length&&!ul[s][0].test(l);s++);if(s===ul.length)return!1;if(o)return ul[s][2];if(i=n+1,!ul[s][1].test(l)){for(;i<r&&!(e.sCount[i]<e.blkIndent);i++)if(c=e.bMarks[i]+e.tShift[i],u=e.eMarks[i],l=e.src.slice(c,u),ul[s][1].test(l)){l.length!==0&&i++;break}}return e.line=i,a=e.push("html_block","",0),a.map=[n,i],a.content=e.getLines(n,i,e.blkIndent,!0),!0},CT=ze.isSpace,y1t=function(e,n,r,o){var s,i,a,l,c=e.bMarks[n]+e.tShift[n],u=e.eMarks[n];if(e.sCount[n]-e.blkIndent>=4||(s=e.src.charCodeAt(c),s!==35||c>=u))return!1;for(i=1,s=e.src.charCodeAt(++c);s===35&&c<u&&i<=6;)i++,s=e.src.charCodeAt(++c);return i>6||c<u&&!CT(s)?!1:(o||(u=e.skipSpacesBack(u,c),a=e.skipCharsBack(u,35,c),a>c&&CT(e.src.charCodeAt(a-1))&&(u=a),e.line=n+1,l=e.push("heading_open","h"+String(i),1),l.markup="########".slice(0,i),l.map=[n,e.line],l=e.push("inline","",0),l.content=e.src.slice(c,u).trim(),l.map=[n,e.line],l.children=[],l=e.push("heading_close","h"+String(i),-1),l.markup="########".slice(0,i)),!0)},b1t=function(e,n,r){var o,s,i,a,l,c,u,d,f,p=n+1,h,y=e.md.block.ruler.getRules("paragraph");if(e.sCount[n]-e.blkIndent>=4)return!1;for(h=e.parentType,e.parentType="paragraph";p<r&&!e.isEmpty(p);p++)if(!(e.sCount[p]-e.blkIndent>3)){if(e.sCount[p]>=e.blkIndent&&(c=e.bMarks[p]+e.tShift[p],u=e.eMarks[p],c<u&&(f=e.src.charCodeAt(c),(f===45||f===61)&&(c=e.skipChars(c,f),c=e.skipSpaces(c),c>=u)))){d=f===61?1:2;break}if(!(e.sCount[p]<0)){for(s=!1,i=0,a=y.length;i<a;i++)if(y[i](e,p,r,!0)){s=!0;break}if(s)break}}return d?(o=e.getLines(n,p,e.blkIndent,!1).trim(),e.line=p+1,l=e.push("heading_open","h"+String(d),1),l.markup=String.fromCharCode(f),l.map=[n,e.line],l=e.push("inline","",0),l.content=o,l.map=[n,e.line-1],l.children=[],l=e.push("heading_close","h"+String(d),-1),l.markup=String.fromCharCode(f),e.parentType=h,!0):!1},v1t=function(e,n,r){var o,s,i,a,l,c,u=n+1,d=e.md.block.ruler.getRules("paragraph");for(c=e.parentType,e.parentType="paragraph";u<r&&!e.isEmpty(u);u++)if(!(e.sCount[u]-e.blkIndent>3)&&!(e.sCount[u]<0)){for(s=!1,i=0,a=d.length;i<a;i++)if(d[i](e,u,r,!0)){s=!0;break}if(s)break}return o=e.getLines(n,u,e.blkIndent,!1).trim(),e.line=u,l=e.push("paragraph_open","p",1),l.map=[n,e.line],l=e.push("inline","",0),l.content=o,l.map=[n,e.line],l.children=[],l=e.push("paragraph_close","p",-1),e.parentType=c,!0},dD=K_,Q1=ze.isSpace;function Po(t,e,n,r){var o,s,i,a,l,c,u,d;for(this.src=t,this.md=e,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0,this.result="",s=this.src,d=!1,i=a=c=u=0,l=s.length;a<l;a++){if(o=s.charCodeAt(a),!d)if(Q1(o)){c++,o===9?u+=4-u%4:u++;continue}else d=!0;(o===10||a===l-1)&&(o!==10&&a++,this.bMarks.push(i),this.eMarks.push(a),this.tShift.push(c),this.sCount.push(u),this.bsCount.push(0),d=!1,c=0,u=0,i=a+1)}this.bMarks.push(s.length),this.eMarks.push(s.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}Po.prototype.push=function(t,e,n){var r=new dD(t,e,n);return r.block=!0,n<0&&this.level--,r.level=this.level,n>0&&this.level++,this.tokens.push(r),r};Po.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]};Po.prototype.skipEmptyLines=function(e){for(var n=this.lineMax;e<n&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e};Po.prototype.skipSpaces=function(e){for(var n,r=this.src.length;e<r&&(n=this.src.charCodeAt(e),!!Q1(n));e++);return e};Po.prototype.skipSpacesBack=function(e,n){if(e<=n)return e;for(;e>n;)if(!Q1(this.src.charCodeAt(--e)))return e+1;return e};Po.prototype.skipChars=function(e,n){for(var r=this.src.length;e<r&&this.src.charCodeAt(e)===n;e++);return e};Po.prototype.skipCharsBack=function(e,n,r){if(e<=r)return e;for(;e>r;)if(n!==this.src.charCodeAt(--e))return e+1;return e};Po.prototype.getLines=function(e,n,r,o){var s,i,a,l,c,u,d,f=e;if(e>=n)return"";for(u=new Array(n-e),s=0;f<n;f++,s++){for(i=0,d=l=this.bMarks[f],f+1<n||o?c=this.eMarks[f]+1:c=this.eMarks[f];l<c&&i<r;){if(a=this.src.charCodeAt(l),Q1(a))a===9?i+=4-(i+this.bsCount[f])%4:i++;else if(l-d<this.tShift[f])i++;else break;l++}i>r?u[s]=new Array(i-r+1).join(" ")+this.src.slice(l,c):u[s]=this.src.slice(l,c)}return u.join("")};Po.prototype.Token=dD;var w1t=Po,x1t=H_,ch=[["table",Vgt,["paragraph","reference"]],["code",Ugt],["fence",Hgt,["paragraph","reference","blockquote","list"]],["blockquote",Ggt,["paragraph","reference","blockquote","list"]],["hr",Jgt,["paragraph","reference","blockquote","list"]],["list",Xgt,["paragraph","reference","blockquote"]],["reference",e1t],["html_block",g1t,["paragraph","reference","blockquote"]],["heading",y1t,["paragraph","reference","blockquote"]],["lheading",b1t],["paragraph",v1t]];function ey(){this.ruler=new x1t;for(var t=0;t<ch.length;t++)this.ruler.push(ch[t][0],ch[t][1],{alt:(ch[t][2]||[]).slice()})}ey.prototype.tokenize=function(t,e,n){for(var r,o,s,i=this.ruler.getRules(""),a=i.length,l=e,c=!1,u=t.md.options.maxNesting;l<n&&(t.line=l=t.skipEmptyLines(l),!(l>=n||t.sCount[l]<t.blkIndent));){if(t.level>=u){t.line=n;break}for(s=t.line,o=0;o<a;o++)if(r=i[o](t,l,n,!1),r){if(s>=t.line)throw new Error("block rule didn't increment state.line");break}if(!r)throw new Error("none of the block rules matched");t.tight=!c,t.isEmpty(t.line-1)&&(c=!0),l=t.line,l<n&&t.isEmpty(l)&&(c=!0,l++,t.line=l)}};ey.prototype.parse=function(t,e,n,r){var o;t&&(o=new this.State(t,e,n,r),this.tokenize(o,o.line,o.lineMax))};ey.prototype.State=w1t;var k1t=ey;function _1t(t){switch(t){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}var $1t=function(e,n){for(var r=e.pos;r<e.posMax&&!_1t(e.src.charCodeAt(r));)r++;return r===e.pos?!1:(n||(e.pending+=e.src.slice(e.pos,r)),e.pos=r,!0)},E1t=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i,S1t=function(e,n){var r,o,s,i,a,l,c,u;return!e.md.options.linkify||e.linkLevel>0||(r=e.pos,o=e.posMax,r+3>o)||e.src.charCodeAt(r)!==58||e.src.charCodeAt(r+1)!==47||e.src.charCodeAt(r+2)!==47||(s=e.pending.match(E1t),!s)||(i=s[1],a=e.md.linkify.matchAtStart(e.src.slice(r-i.length)),!a)||(l=a.url,l.length<=i.length)||(l=l.replace(/\*+$/,""),c=e.md.normalizeLink(l),!e.md.validateLink(c))?!1:(n||(e.pending=e.pending.slice(0,-i.length),u=e.push("link_open","a",1),u.attrs=[["href",c]],u.markup="linkify",u.info="auto",u=e.push("text","",0),u.content=e.md.normalizeLinkText(l),u=e.push("link_close","a",-1),u.markup="linkify",u.info="auto"),e.pos+=l.length-i.length,!0)},C1t=ze.isSpace,T1t=function(e,n){var r,o,s,i=e.pos;if(e.src.charCodeAt(i)!==10)return!1;if(r=e.pending.length-1,o=e.posMax,!n)if(r>=0&&e.pending.charCodeAt(r)===32)if(r>=1&&e.pending.charCodeAt(r-1)===32){for(s=r-1;s>=1&&e.pending.charCodeAt(s-1)===32;)s--;e.pending=e.pending.slice(0,s),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(i++;i<o&&C1t(e.src.charCodeAt(i));)i++;return e.pos=i,!0},A1t=ze.isSpace,Z_=[];for(var TT=0;TT<256;TT++)Z_.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(t){Z_[t.charCodeAt(0)]=1});var N1t=function(e,n){var r,o,s,i,a,l=e.pos,c=e.posMax;if(e.src.charCodeAt(l)!==92||(l++,l>=c))return!1;if(r=e.src.charCodeAt(l),r===10){for(n||e.push("hardbreak","br",0),l++;l<c&&(r=e.src.charCodeAt(l),!!A1t(r));)l++;return e.pos=l,!0}return i=e.src[l],r>=55296&&r<=56319&&l+1<c&&(o=e.src.charCodeAt(l+1),o>=56320&&o<=57343&&(i+=e.src[l+1],l++)),s="\\"+i,n||(a=e.push("text_special","",0),r<256&&Z_[r]!==0?a.content=i:a.content=s,a.markup=s,a.info="escape"),e.pos=l+1,!0},P1t=function(e,n){var r,o,s,i,a,l,c,u,d=e.pos,f=e.src.charCodeAt(d);if(f!==96)return!1;for(r=d,d++,o=e.posMax;d<o&&e.src.charCodeAt(d)===96;)d++;if(s=e.src.slice(r,d),c=s.length,e.backticksScanned&&(e.backticks[c]||0)<=r)return n||(e.pending+=s),e.pos+=c,!0;for(l=d;(a=e.src.indexOf("`",l))!==-1;){for(l=a+1;l<o&&e.src.charCodeAt(l)===96;)l++;if(u=l-a,u===c)return n||(i=e.push("code_inline","code",0),i.markup=s,i.content=e.src.slice(d,a).replace(/\n/g," ").replace(/^ (.+) $/,"$1")),e.pos=l,!0;e.backticks[u]=a}return e.backticksScanned=!0,n||(e.pending+=s),e.pos+=c,!0},ty={};ty.tokenize=function(e,n){var r,o,s,i,a,l=e.pos,c=e.src.charCodeAt(l);if(n||c!==126||(o=e.scanDelims(e.pos,!0),i=o.length,a=String.fromCharCode(c),i<2))return!1;for(i%2&&(s=e.push("text","",0),s.content=a,i--),r=0;r<i;r+=2)s=e.push("text","",0),s.content=a+a,e.delimiters.push({marker:c,length:0,token:e.tokens.length-1,end:-1,open:o.can_open,close:o.can_close});return e.pos+=o.length,!0};function AT(t,e){var n,r,o,s,i,a=[],l=e.length;for(n=0;n<l;n++)o=e[n],o.marker===126&&o.end!==-1&&(s=e[o.end],i=t.tokens[o.token],i.type="s_open",i.tag="s",i.nesting=1,i.markup="~~",i.content="",i=t.tokens[s.token],i.type="s_close",i.tag="s",i.nesting=-1,i.markup="~~",i.content="",t.tokens[s.token-1].type==="text"&&t.tokens[s.token-1].content==="~"&&a.push(s.token-1));for(;a.length;){for(n=a.pop(),r=n+1;r<t.tokens.length&&t.tokens[r].type==="s_close";)r++;r--,n!==r&&(i=t.tokens[r],t.tokens[r]=t.tokens[n],t.tokens[n]=i)}}ty.postProcess=function(e){var n,r=e.tokens_meta,o=e.tokens_meta.length;for(AT(e,e.delimiters),n=0;n<o;n++)r[n]&&r[n].delimiters&&AT(e,r[n].delimiters)};var ny={};ny.tokenize=function(e,n){var r,o,s,i=e.pos,a=e.src.charCodeAt(i);if(n||a!==95&&a!==42)return!1;for(o=e.scanDelims(e.pos,a===42),r=0;r<o.length;r++)s=e.push("text","",0),s.content=String.fromCharCode(a),e.delimiters.push({marker:a,length:o.length,token:e.tokens.length-1,end:-1,open:o.can_open,close:o.can_close});return e.pos+=o.length,!0};function NT(t,e){var n,r,o,s,i,a,l=e.length;for(n=l-1;n>=0;n--)r=e[n],!(r.marker!==95&&r.marker!==42)&&r.end!==-1&&(o=e[r.end],a=n>0&&e[n-1].end===r.end+1&&e[n-1].marker===r.marker&&e[n-1].token===r.token-1&&e[r.end+1].token===o.token+1,i=String.fromCharCode(r.marker),s=t.tokens[r.token],s.type=a?"strong_open":"em_open",s.tag=a?"strong":"em",s.nesting=1,s.markup=a?i+i:i,s.content="",s=t.tokens[o.token],s.type=a?"strong_close":"em_close",s.tag=a?"strong":"em",s.nesting=-1,s.markup=a?i+i:i,s.content="",a&&(t.tokens[e[n-1].token].content="",t.tokens[e[r.end+1].token].content="",n--))}ny.postProcess=function(e){var n,r=e.tokens_meta,o=e.tokens_meta.length;for(NT(e,e.delimiters),n=0;n<o;n++)r[n]&&r[n].delimiters&&NT(e,r[n].delimiters)};var O1t=ze.normalizeReference,sv=ze.isSpace,I1t=function(e,n){var r,o,s,i,a,l,c,u,d,f="",p="",h=e.pos,y=e.posMax,g=e.pos,b=!0;if(e.src.charCodeAt(e.pos)!==91||(a=e.pos+1,i=e.md.helpers.parseLinkLabel(e,e.pos,!0),i<0))return!1;if(l=i+1,l<y&&e.src.charCodeAt(l)===40){for(b=!1,l++;l<y&&(o=e.src.charCodeAt(l),!(!sv(o)&&o!==10));l++);if(l>=y)return!1;if(g=l,c=e.md.helpers.parseLinkDestination(e.src,l,e.posMax),c.ok){for(f=e.md.normalizeLink(c.str),e.md.validateLink(f)?l=c.pos:f="",g=l;l<y&&(o=e.src.charCodeAt(l),!(!sv(o)&&o!==10));l++);if(c=e.md.helpers.parseLinkTitle(e.src,l,e.posMax),l<y&&g!==l&&c.ok)for(p=c.str,l=c.pos;l<y&&(o=e.src.charCodeAt(l),!(!sv(o)&&o!==10));l++);}(l>=y||e.src.charCodeAt(l)!==41)&&(b=!0),l++}if(b){if(typeof e.env.references=="undefined")return!1;if(l<y&&e.src.charCodeAt(l)===91?(g=l+1,l=e.md.helpers.parseLinkLabel(e,l),l>=0?s=e.src.slice(g,l++):l=i+1):l=i+1,s||(s=e.src.slice(a,i)),u=e.env.references[O1t(s)],!u)return e.pos=h,!1;f=u.href,p=u.title}return n||(e.pos=a,e.posMax=i,d=e.push("link_open","a",1),d.attrs=r=[["href",f]],p&&r.push(["title",p]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,d=e.push("link_close","a",-1)),e.pos=l,e.posMax=y,!0},R1t=ze.normalizeReference,iv=ze.isSpace,M1t=function(e,n){var r,o,s,i,a,l,c,u,d,f,p,h,y,g="",b=e.pos,w=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91||(l=e.pos+2,a=e.md.helpers.parseLinkLabel(e,e.pos+1,!1),a<0))return!1;if(c=a+1,c<w&&e.src.charCodeAt(c)===40){for(c++;c<w&&(o=e.src.charCodeAt(c),!(!iv(o)&&o!==10));c++);if(c>=w)return!1;for(y=c,d=e.md.helpers.parseLinkDestination(e.src,c,e.posMax),d.ok&&(g=e.md.normalizeLink(d.str),e.md.validateLink(g)?c=d.pos:g=""),y=c;c<w&&(o=e.src.charCodeAt(c),!(!iv(o)&&o!==10));c++);if(d=e.md.helpers.parseLinkTitle(e.src,c,e.posMax),c<w&&y!==c&&d.ok)for(f=d.str,c=d.pos;c<w&&(o=e.src.charCodeAt(c),!(!iv(o)&&o!==10));c++);else f="";if(c>=w||e.src.charCodeAt(c)!==41)return e.pos=b,!1;c++}else{if(typeof e.env.references=="undefined")return!1;if(c<w&&e.src.charCodeAt(c)===91?(y=c+1,c=e.md.helpers.parseLinkLabel(e,c),c>=0?i=e.src.slice(y,c++):c=a+1):c=a+1,i||(i=e.src.slice(l,a)),u=e.env.references[R1t(i)],!u)return e.pos=b,!1;g=u.href,f=u.title}return n||(s=e.src.slice(l,a),e.md.inline.parse(s,e.md,e.env,h=[]),p=e.push("image","img",0),p.attrs=r=[["src",g],["alt",""]],p.children=h,p.content=s,f&&r.push(["title",f])),e.pos=c,e.posMax=w,!0},D1t=/^([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,L1t=/^([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)$/,j1t=function(e,n){var r,o,s,i,a,l,c=e.pos;if(e.src.charCodeAt(c)!==60)return!1;for(a=e.pos,l=e.posMax;;){if(++c>=l||(i=e.src.charCodeAt(c),i===60))return!1;if(i===62)break}return r=e.src.slice(a+1,c),L1t.test(r)?(o=e.md.normalizeLink(r),e.md.validateLink(o)?(n||(s=e.push("link_open","a",1),s.attrs=[["href",o]],s.markup="autolink",s.info="auto",s=e.push("text","",0),s.content=e.md.normalizeLinkText(r),s=e.push("link_close","a",-1),s.markup="autolink",s.info="auto"),e.pos+=r.length+2,!0):!1):D1t.test(r)?(o=e.md.normalizeLink("mailto:"+r),e.md.validateLink(o)?(n||(s=e.push("link_open","a",1),s.attrs=[["href",o]],s.markup="autolink",s.info="auto",s=e.push("text","",0),s.content=e.md.normalizeLinkText(r),s=e.push("link_close","a",-1),s.markup="autolink",s.info="auto"),e.pos+=r.length+2,!0):!1):!1},F1t=X1.HTML_TAG_RE;function B1t(t){return/^<a[>\s]/i.test(t)}function z1t(t){return/^<\/a\s*>/i.test(t)}function q1t(t){var e=t|32;return e>=97&&e<=122}var W1t=function(e,n){var r,o,s,i,a=e.pos;return!e.md.options.html||(s=e.posMax,e.src.charCodeAt(a)!==60||a+2>=s)||(r=e.src.charCodeAt(a+1),r!==33&&r!==63&&r!==47&&!q1t(r))||(o=e.src.slice(a).match(F1t),!o)?!1:(n||(i=e.push("html_inline","",0),i.content=o[0],B1t(i.content)&&e.linkLevel++,z1t(i.content)&&e.linkLevel--),e.pos+=o[0].length,!0)},PT=sD,V1t=ze.has,U1t=ze.isValidEntityCode,OT=ze.fromCodePoint,H1t=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,K1t=/^&([a-z][a-z0-9]{1,31});/i,G1t=function(e,n){var r,o,s,i,a=e.pos,l=e.posMax;if(e.src.charCodeAt(a)!==38||a+1>=l)return!1;if(r=e.src.charCodeAt(a+1),r===35){if(s=e.src.slice(a).match(H1t),s)return n||(o=s[1][0].toLowerCase()==="x"?parseInt(s[1].slice(1),16):parseInt(s[1],10),i=e.push("text_special","",0),i.content=U1t(o)?OT(o):OT(65533),i.markup=s[0],i.info="entity"),e.pos+=s[0].length,!0}else if(s=e.src.slice(a).match(K1t),s&&V1t(PT,s[1]))return n||(i=e.push("text_special","",0),i.content=PT[s[1]],i.markup=s[0],i.info="entity"),e.pos+=s[0].length,!0;return!1};function IT(t){var e,n,r,o,s,i,a,l,c={},u=t.length;if(u){var d=0,f=-2,p=[];for(e=0;e<u;e++)if(r=t[e],p.push(0),(t[d].marker!==r.marker||f!==r.token-1)&&(d=e),f=r.token,r.length=r.length||0,!!r.close){for(c.hasOwnProperty(r.marker)||(c[r.marker]=[-1,-1,-1,-1,-1,-1]),s=c[r.marker][(r.open?3:0)+r.length%3],n=d-p[d]-1,i=n;n>s;n-=p[n]+1)if(o=t[n],o.marker===r.marker&&o.open&&o.end<0&&(a=!1,(o.close||r.open)&&(o.length+r.length)%3===0&&(o.length%3!==0||r.length%3!==0)&&(a=!0),!a)){l=n>0&&!t[n-1].open?p[n-1]+1:0,p[e]=e-n+l,p[n]=l,r.open=!1,o.end=e,o.close=!1,i=-1,f=-2;break}i!==-1&&(c[r.marker][(r.open?3:0)+(r.length||0)%3]=i)}}}var Z1t=function(e){var n,r=e.tokens_meta,o=e.tokens_meta.length;for(IT(e.delimiters),n=0;n<o;n++)r[n]&&r[n].delimiters&&IT(r[n].delimiters)},J1t=function(e){var n,r,o=0,s=e.tokens,i=e.tokens.length;for(n=r=0;n<i;n++)s[n].nesting<0&&o--,s[n].level=o,s[n].nesting>0&&o++,s[n].type==="text"&&n+1<i&&s[n+1].type==="text"?s[n+1].content=s[n].content+s[n+1].content:(n!==r&&(s[r]=s[n]),r++);n!==r&&(s.length=r)},J_=K_,RT=ze.isWhiteSpace,MT=ze.isPunctChar,DT=ze.isMdAsciiPunct;function gp(t,e,n,r){this.src=t,this.env=n,this.md=e,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}gp.prototype.pushPending=function(){var t=new J_("text","",0);return t.content=this.pending,t.level=this.pendingLevel,this.tokens.push(t),this.pending="",t};gp.prototype.push=function(t,e,n){this.pending&&this.pushPending();var r=new J_(t,e,n),o=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],o={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(o),r};gp.prototype.scanDelims=function(t,e){var n=t,r,o,s,i,a,l,c,u,d,f=!0,p=!0,h=this.posMax,y=this.src.charCodeAt(t);for(r=t>0?this.src.charCodeAt(t-1):32;n<h&&this.src.charCodeAt(n)===y;)n++;return s=n-t,o=n<h?this.src.charCodeAt(n):32,c=DT(r)||MT(String.fromCharCode(r)),d=DT(o)||MT(String.fromCharCode(o)),l=RT(r),u=RT(o),u?f=!1:d&&(l||c||(f=!1)),l?p=!1:c&&(u||d||(p=!1)),e?(i=f,a=p):(i=f&&(!p||c),a=p&&(!f||d)),{can_open:i,can_close:a,length:s}};gp.prototype.Token=J_;var Y1t=gp,LT=H_,av=[["text",$1t],["linkify",S1t],["newline",T1t],["escape",N1t],["backticks",P1t],["strikethrough",ty.tokenize],["emphasis",ny.tokenize],["link",I1t],["image",M1t],["autolink",j1t],["html_inline",W1t],["entity",G1t]],lv=[["balance_pairs",Z1t],["strikethrough",ty.postProcess],["emphasis",ny.postProcess],["fragments_join",J1t]];function yp(){var t;for(this.ruler=new LT,t=0;t<av.length;t++)this.ruler.push(av[t][0],av[t][1]);for(this.ruler2=new LT,t=0;t<lv.length;t++)this.ruler2.push(lv[t][0],lv[t][1])}yp.prototype.skipToken=function(t){var e,n,r=t.pos,o=this.ruler.getRules(""),s=o.length,i=t.md.options.maxNesting,a=t.cache;if(typeof a[r]!="undefined"){t.pos=a[r];return}if(t.level<i){for(n=0;n<s;n++)if(t.level++,e=o[n](t,!0),t.level--,e){if(r>=t.pos)throw new Error("inline rule didn't increment state.pos");break}}else t.pos=t.posMax;e||t.pos++,a[r]=t.pos};yp.prototype.tokenize=function(t){for(var e,n,r,o=this.ruler.getRules(""),s=o.length,i=t.posMax,a=t.md.options.maxNesting;t.pos<i;){if(r=t.pos,t.level<a){for(n=0;n<s;n++)if(e=o[n](t,!1),e){if(r>=t.pos)throw new Error("inline rule didn't increment state.pos");break}}if(e){if(t.pos>=i)break;continue}t.pending+=t.src[t.pos++]}t.pending&&t.pushPending()};yp.prototype.parse=function(t,e,n,r){var o,s,i,a=new this.State(t,e,n,r);for(this.tokenize(a),s=this.ruler2.getRules(""),i=s.length,o=0;o<i;o++)s[o](a)};yp.prototype.State=Y1t;var X1t=yp,cv,jT;function Q1t(){return jT||(jT=1,cv=function(t){var e={};t=t||{},e.src_Any=M_().source,e.src_Cc=D_().source,e.src_Z=L_().source,e.src_P=pp.source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");var n="[><]";return e.src_pseudo_letter="(?:(?!"+n+"|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|"+n+"|"+e.src_ZPCc+")(?!"+(t["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+e.src_ZCc+"|[.]|$)|"+(t["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+e.src_ZCc+"|$)|;(?!"+e.src_ZCc+"|$)|\\!+(?!"+e.src_ZCc+"|[!]|$)|\\?(?!"+e.src_ZCc+"|[?]|$))+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}),cv}function Ew(t){var e=Array.prototype.slice.call(arguments,1);return e.forEach(function(n){n&&Object.keys(n).forEach(function(r){t[r]=n[r]})}),t}function ry(t){return Object.prototype.toString.call(t)}function eyt(t){return ry(t)==="[object String]"}function tyt(t){return ry(t)==="[object Object]"}function nyt(t){return ry(t)==="[object RegExp]"}function FT(t){return ry(t)==="[object Function]"}function ryt(t){return t.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var fD={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function oyt(t){return Object.keys(t||{}).reduce(function(e,n){return e||fD.hasOwnProperty(n)},!1)}var syt={"http:":{validate:function(t,e,n){var r=t.slice(e);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(t,e,n){var r=t.slice(e);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?e>=3&&t[e-3]===":"||e>=3&&t[e-3]==="/"?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(t,e,n){var r=t.slice(e);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},iyt="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",ayt="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function lyt(t){t.__index__=-1,t.__text_cache__=""}function cyt(t){return function(e,n){var r=e.slice(n);return t.test(r)?r.match(t)[0].length:0}}function BT(){return function(t,e){e.normalize(t)}}function dg(t){var e=t.re=Q1t()(t.__opts__),n=t.__tlds__.slice();t.onCompile(),t.__tlds_replaced__||n.push(iyt),n.push(e.src_xn),e.src_tlds=n.join("|");function r(a){return a.replace("%TLDS%",e.src_tlds)}e.email_fuzzy=RegExp(r(e.tpl_email_fuzzy),"i"),e.link_fuzzy=RegExp(r(e.tpl_link_fuzzy),"i"),e.link_no_ip_fuzzy=RegExp(r(e.tpl_link_no_ip_fuzzy),"i"),e.host_fuzzy_test=RegExp(r(e.tpl_host_fuzzy_test),"i");var o=[];t.__compiled__={};function s(a,l){throw new Error('(LinkifyIt) Invalid schema "'+a+'": '+l)}Object.keys(t.__schemas__).forEach(function(a){var l=t.__schemas__[a];if(l!==null){var c={validate:null,link:null};if(t.__compiled__[a]=c,tyt(l)){nyt(l.validate)?c.validate=cyt(l.validate):FT(l.validate)?c.validate=l.validate:s(a,l),FT(l.normalize)?c.normalize=l.normalize:l.normalize?s(a,l):c.normalize=BT();return}if(eyt(l)){o.push(a);return}s(a,l)}}),o.forEach(function(a){t.__compiled__[t.__schemas__[a]]&&(t.__compiled__[a].validate=t.__compiled__[t.__schemas__[a]].validate,t.__compiled__[a].normalize=t.__compiled__[t.__schemas__[a]].normalize)}),t.__compiled__[""]={validate:null,normalize:BT()};var i=Object.keys(t.__compiled__).filter(function(a){return a.length>0&&t.__compiled__[a]}).map(ryt).join("|");t.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+i+")","i"),t.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+i+")","ig"),t.re.schema_at_start=RegExp("^"+t.re.schema_search.source,"i"),t.re.pretest=RegExp("("+t.re.schema_test.source+")|("+t.re.host_fuzzy_test.source+")|@","i"),lyt(t)}function uyt(t,e){var n=t.__index__,r=t.__last_index__,o=t.__text_cache__.slice(n,r);this.schema=t.__schema__.toLowerCase(),this.index=n+e,this.lastIndex=r+e,this.raw=o,this.text=o,this.url=o}function Sw(t,e){var n=new uyt(t,e);return t.__compiled__[n.schema].normalize(n,t),n}function Un(t,e){if(!(this instanceof Un))return new Un(t,e);e||oyt(t)&&(e=t,t={}),this.__opts__=Ew({},fD,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=Ew({},syt,t),this.__compiled__={},this.__tlds__=ayt,this.__tlds_replaced__=!1,this.re={},dg(this)}Un.prototype.add=function(e,n){return this.__schemas__[e]=n,dg(this),this};Un.prototype.set=function(e){return this.__opts__=Ew(this.__opts__,e),this};Un.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;var n,r,o,s,i,a,l,c,u;if(this.re.schema_test.test(e)){for(l=this.re.schema_search,l.lastIndex=0;(n=l.exec(e))!==null;)if(s=this.testSchemaAt(e,n[2],l.lastIndex),s){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+s;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(c=e.search(this.re.host_fuzzy_test),c>=0&&(this.__index__<0||c<this.__index__)&&(r=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(i=r.index+r[1].length,(this.__index__<0||i<this.__index__)&&(this.__schema__="",this.__index__=i,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(u=e.indexOf("@"),u>=0&&(o=e.match(this.re.email_fuzzy))!==null&&(i=o.index+o[1].length,a=o.index+o[0].length,(this.__index__<0||i<this.__index__||i===this.__index__&&a>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=i,this.__last_index__=a))),this.__index__>=0};Un.prototype.pretest=function(e){return this.re.pretest.test(e)};Un.prototype.testSchemaAt=function(e,n,r){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(e,r,this):0};Un.prototype.match=function(e){var n=0,r=[];this.__index__>=0&&this.__text_cache__===e&&(r.push(Sw(this,n)),n=this.__last_index__);for(var o=n?e.slice(n):e;this.test(o);)r.push(Sw(this,n)),o=o.slice(this.__last_index__),n+=this.__last_index__;return r.length?r:null};Un.prototype.matchAtStart=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return null;var n=this.re.schema_at_start.exec(e);if(!n)return null;var r=this.testSchemaAt(e,n[2],n[0].length);return r?(this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+r,Sw(this,0)):null};Un.prototype.tlds=function(e,n){return e=Array.isArray(e)?e:[e],n?(this.__tlds__=this.__tlds__.concat(e).sort().filter(function(r,o,s){return r!==s[o-1]}).reverse(),dg(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,dg(this),this)};Un.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),e.schema==="mailto:"&&!/^mailto:/i.test(e.url)&&(e.url="mailto:"+e.url)};Un.prototype.onCompile=function(){};var dyt=Un,fyt={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},pyt={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},hyt={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},kd=ze,myt=Y1,gyt=vgt,yyt=Wgt,byt=k1t,vyt=X1t,wyt=dyt,aa=Ii,pD=nD,xyt={default:fyt,zero:pyt,commonmark:hyt},kyt=/^(vbscript|javascript|file|data):/,_yt=/^data:image\/(gif|png|jpeg|webp);/;function $yt(t){var e=t.trim().toLowerCase();return kyt.test(e)?!!_yt.test(e):!0}var hD=["http:","https:","mailto:"];function Eyt(t){var e=aa.parse(t,!0);if(e.hostname&&(!e.protocol||hD.indexOf(e.protocol)>=0))try{e.hostname=pD.toASCII(e.hostname)}catch(n){}return aa.encode(aa.format(e))}function Syt(t){var e=aa.parse(t,!0);if(e.hostname&&(!e.protocol||hD.indexOf(e.protocol)>=0))try{e.hostname=pD.toUnicode(e.hostname)}catch(n){}return aa.decode(aa.format(e),aa.decode.defaultChars+"%")}function vr(t,e){if(!(this instanceof vr))return new vr(t,e);e||kd.isString(t)||(e=t||{},t="default"),this.inline=new vyt,this.block=new byt,this.core=new yyt,this.renderer=new gyt,this.linkify=new wyt,this.validateLink=$yt,this.normalizeLink=Eyt,this.normalizeLinkText=Syt,this.utils=kd,this.helpers=kd.assign({},myt),this.options={},this.configure(t),e&&this.set(e)}vr.prototype.set=function(t){return kd.assign(this.options,t),this};vr.prototype.configure=function(t){var e=this,n;if(kd.isString(t)&&(n=t,t=xyt[n],!t))throw new Error('Wrong `markdown-it` preset "'+n+'", check name');if(!t)throw new Error("Wrong `markdown-it` preset, can't be empty");return t.options&&e.set(t.options),t.components&&Object.keys(t.components).forEach(function(r){t.components[r].rules&&e[r].ruler.enableOnly(t.components[r].rules),t.components[r].rules2&&e[r].ruler2.enableOnly(t.components[r].rules2)}),this};vr.prototype.enable=function(t,e){var n=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(o){n=n.concat(this[o].ruler.enable(t,!0))},this),n=n.concat(this.inline.ruler2.enable(t,!0));var r=t.filter(function(o){return n.indexOf(o)<0});if(r.length&&!e)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};vr.prototype.disable=function(t,e){var n=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(o){n=n.concat(this[o].ruler.disable(t,!0))},this),n=n.concat(this.inline.ruler2.disable(t,!0));var r=t.filter(function(o){return n.indexOf(o)<0});if(r.length&&!e)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};vr.prototype.use=function(t){var e=[this].concat(Array.prototype.slice.call(arguments,1));return t.apply(t,e),this};vr.prototype.parse=function(t,e){if(typeof t!="string")throw new Error("Input data should be a String");var n=new this.core.State(t,this,e);return this.core.process(n),n.tokens};vr.prototype.render=function(t,e){return e=e||{},this.renderer.render(this.parse(t,e),this.options,e)};vr.prototype.parseInline=function(t,e){var n=new this.core.State(t,this,e);return n.inlineMode=!0,this.core.process(n),n.tokens};vr.prototype.renderInline=function(t,e){return e=e||{},this.renderer.render(this.parseInline(t,e),this.options,e)};var Cyt=vr,Tyt=Cyt;const Ayt=fs(Tyt),Nyt=new AR({nodes:{doc:{content:"block+"},paragraph:{content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM(){return["p",0]}},blockquote:{content:"block+",group:"block",parseDOM:[{tag:"blockquote"}],toDOM(){return["blockquote",0]}},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM(){return["div",["hr"]]}},heading:{attrs:{level:{default:1}},content:"(text | image)*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}],toDOM(t){return["h"+t.attrs.level,0]}},code_block:{content:"text*",group:"block",code:!0,defining:!0,marks:"",attrs:{params:{default:""}},parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:t=>({params:t.getAttribute("data-params")||""})}],toDOM(t){return["pre",t.attrs.params?{"data-params":t.attrs.params}:{},["code",0]]}},ordered_list:{content:"list_item+",group:"block",attrs:{order:{default:1},tight:{default:!1}},parseDOM:[{tag:"ol",getAttrs(t){return{order:t.hasAttribute("start")?+t.getAttribute("start"):1,tight:t.hasAttribute("data-tight")}}}],toDOM(t){return["ol",{start:t.attrs.order==1?null:t.attrs.order,"data-tight":t.attrs.tight?"true":null},0]}},bullet_list:{content:"list_item+",group:"block",attrs:{tight:{default:!1}},parseDOM:[{tag:"ul",getAttrs:t=>({tight:t.hasAttribute("data-tight")})}],toDOM(t){return["ul",{"data-tight":t.attrs.tight?"true":null},0]}},list_item:{content:"block+",defining:!0,parseDOM:[{tag:"li"}],toDOM(){return["li",0]}},text:{group:"inline"},image:{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs(t){return{src:t.getAttribute("src"),title:t.getAttribute("title"),alt:t.getAttribute("alt")}}}],toDOM(t){return["img",t.attrs]}},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM(){return["br"]}}},marks:{em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"},{style:"font-style=normal",clearMark:t=>t.type.name=="em"}],toDOM(){return["em"]}},strong:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name=="strong"},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}],toDOM(){return["strong"]}},link:{attrs:{href:{},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs(t){return{href:t.getAttribute("href"),title:t.getAttribute("title")}}}],toDOM(t){return["a",t.attrs]}},code:{parseDOM:[{tag:"code"}],toDOM(){return["code"]}}}});function Pyt(t,e){if(t.isText&&e.isText&&Ne.sameSet(t.marks,e.marks))return t.withText(t.text+e.text)}class Oyt{constructor(e,n){this.schema=e,this.tokenHandlers=n,this.stack=[{type:e.topNodeType,attrs:null,content:[],marks:Ne.none}]}top(){return this.stack[this.stack.length-1]}push(e){this.stack.length&&this.top().content.push(e)}addText(e){if(!e)return;let n=this.top(),r=n.content,o=r[r.length-1],s=this.schema.text(e,n.marks),i;o&&(i=Pyt(o,s))?r[r.length-1]=i:r.push(s)}openMark(e){let n=this.top();n.marks=e.addToSet(n.marks)}closeMark(e){let n=this.top();n.marks=e.removeFromSet(n.marks)}parseTokens(e){for(let n=0;n<e.length;n++){let r=e[n],o=this.tokenHandlers[r.type];if(!o)throw new Error("Token type `"+r.type+"` not supported by Markdown parser");o(this,r,e,n)}}addNode(e,n,r){let o=this.top(),s=e.createAndFill(n,r,o?o.marks:[]);return s?(this.push(s),s):null}openNode(e,n){this.stack.push({type:e,attrs:n,content:[],marks:Ne.none})}closeNode(){let e=this.stack.pop();return this.addNode(e.type,e.attrs,e.content)}}function Cu(t,e,n,r){return t.getAttrs?t.getAttrs(e,n,r):t.attrs instanceof Function?t.attrs(e):t.attrs}function uv(t,e){return t.noCloseToken||e=="code_inline"||e=="code_block"||e=="fence"}function zT(t){return t[t.length-1]==`
`?t.slice(0,t.length-1):t}function dv(){}function Iyt(t,e){let n=Object.create(null);for(let r in e){let o=e[r];if(o.block){let s=t.nodeType(o.block);uv(o,r)?n[r]=(i,a,l,c)=>{i.openNode(s,Cu(o,a,l,c)),i.addText(zT(a.content)),i.closeNode()}:(n[r+"_open"]=(i,a,l,c)=>i.openNode(s,Cu(o,a,l,c)),n[r+"_close"]=i=>i.closeNode())}else if(o.node){let s=t.nodeType(o.node);n[r]=(i,a,l,c)=>i.addNode(s,Cu(o,a,l,c))}else if(o.mark){let s=t.marks[o.mark];uv(o,r)?n[r]=(i,a,l,c)=>{i.openMark(s.create(Cu(o,a,l,c))),i.addText(zT(a.content)),i.closeMark(s)}:(n[r+"_open"]=(i,a,l,c)=>i.openMark(s.create(Cu(o,a,l,c))),n[r+"_close"]=i=>i.closeMark(s))}else if(o.ignore)uv(o,r)?n[r]=dv:(n[r+"_open"]=dv,n[r+"_close"]=dv);else throw new RangeError("Unrecognized parsing spec "+JSON.stringify(o))}return n.text=(r,o)=>r.addText(o.content),n.inline=(r,o)=>r.parseTokens(o.children),n.softbreak=n.softbreak||(r=>r.addText(" ")),n}class mD{constructor(e,n,r){this.schema=e,this.tokenizer=n,this.tokens=r,this.tokenHandlers=Iyt(e,r)}parse(e,n={}){let r=new Oyt(this.schema,this.tokenHandlers),o;r.parseTokens(this.tokenizer.parse(e,n));do o=r.closeNode();while(r.stack.length);return o||this.schema.topNodeType.createAndFill()}}function qT(t,e){for(;++e<t.length;)if(t[e].type!="list_item_open")return t[e].hidden;return!1}new mD(Nyt,Ayt("commonmark",{html:!1}),{blockquote:{block:"blockquote"},paragraph:{block:"paragraph"},list_item:{block:"list_item"},bullet_list:{block:"bullet_list",getAttrs:(t,e,n)=>({tight:qT(e,n)})},ordered_list:{block:"ordered_list",getAttrs:(t,e,n)=>({order:+t.attrGet("start")||1,tight:qT(e,n)})},heading:{block:"heading",getAttrs:t=>({level:+t.tag.slice(1)})},code_block:{block:"code_block",noCloseToken:!0},fence:{block:"code_block",getAttrs:t=>({params:t.info||""}),noCloseToken:!0},hr:{node:"horizontal_rule"},image:{node:"image",getAttrs:t=>({src:t.attrGet("src"),title:t.attrGet("title")||null,alt:t.children[0]&&t.children[0].content||null})},hardbreak:{node:"hard_break"},em:{mark:"em"},strong:{mark:"strong"},link:{mark:"link",getAttrs:t=>({href:t.attrGet("href"),title:t.attrGet("title")||null})},code_inline:{mark:"code",noCloseToken:!0}});class Ryt{constructor(e,n,r={}){this.nodes=e,this.marks=n,this.options=r}serialize(e,n={}){n=Object.assign({},this.options,n);let r=new Myt(this.nodes,this.marks,n);return r.renderContent(e),r.out}}class Myt{constructor(e,n,r){this.nodes=e,this.marks=n,this.options=r,this.delim="",this.out="",this.closed=null,this.inAutolink=void 0,this.atBlockStart=!1,this.inTightList=!1,typeof this.options.tightLists=="undefined"&&(this.options.tightLists=!1),typeof this.options.hardBreakNodeName=="undefined"&&(this.options.hardBreakNodeName="hard_break")}flushClose(e=2){if(this.closed){if(this.atBlank()||(this.out+=`
`),e>1){let n=this.delim,r=/\s+$/.exec(n);r&&(n=n.slice(0,n.length-r[0].length));for(let o=1;o<e;o++)this.out+=n+`
`}this.closed=null}}wrapBlock(e,n,r,o){let s=this.delim;this.write(n!=null?n:e),this.delim+=e,o(),this.delim=s,this.closeBlock(r)}atBlank(){return/(^|\n)$/.test(this.out)}ensureNewLine(){this.atBlank()||(this.out+=`
`)}write(e){this.flushClose(),this.delim&&this.atBlank()&&(this.out+=this.delim),e&&(this.out+=e)}closeBlock(e){this.closed=e}text(e,n=!0){let r=e.split(`
`);for(let o=0;o<r.length;o++)this.write(),!n&&r[o][0]=="["&&/(^|[^\\])\!$/.test(this.out)&&(this.out=this.out.slice(0,this.out.length-1)+"\\!"),this.out+=n?this.esc(r[o],this.atBlockStart):r[o],o!=r.length-1&&(this.out+=`
`)}render(e,n,r){if(typeof n=="number")throw new Error("!");if(!this.nodes[e.type.name])throw new Error("Token type `"+e.type.name+"` not supported by Markdown renderer");this.nodes[e.type.name](this,e,n,r)}renderContent(e){e.forEach((n,r,o)=>this.render(n,e,o))}renderInline(e){this.atBlockStart=!0;let n=[],r="",o=(s,i,a)=>{let l=s?s.marks:[];s&&s.type.name===this.options.hardBreakNodeName&&(l=l.filter(h=>{if(a+1==e.childCount)return!1;let y=e.child(a+1);return h.isInSet(y.marks)&&(!y.isText||/\S/.test(y.text))}));let c=r;if(r="",s&&s.isText&&l.some(h=>{let y=this.marks[h.type.name];return y&&y.expelEnclosingWhitespace&&!h.isInSet(n)})){let[h,y,g]=/^(\s*)(.*)$/m.exec(s.text);y&&(c+=y,s=g?s.withText(g):null,s||(l=n))}if(s&&s.isText&&l.some(h=>{let y=this.marks[h.type.name];return y&&y.expelEnclosingWhitespace&&(a==e.childCount-1||!h.isInSet(e.child(a+1).marks))})){let[h,y,g]=/^(.*?)(\s*)$/m.exec(s.text);g&&(r=g,s=y?s.withText(y):null,s||(l=n))}let u=l.length?l[l.length-1]:null,d=u&&this.marks[u.type.name].escape===!1,f=l.length-(d?1:0);e:for(let h=0;h<f;h++){let y=l[h];if(!this.marks[y.type.name].mixable)break;for(let g=0;g<n.length;g++){let b=n[g];if(!this.marks[b.type.name].mixable)break;if(y.eq(b)){h>g?l=l.slice(0,g).concat(y).concat(l.slice(g,h)).concat(l.slice(h+1,f)):g>h&&(l=l.slice(0,h).concat(l.slice(h+1,g)).concat(y).concat(l.slice(g,f)));continue e}}}let p=0;for(;p<Math.min(n.length,f)&&l[p].eq(n[p]);)++p;for(;p<n.length;)this.text(this.markString(n.pop(),!1,e,a),!1);if(c&&this.text(c),s){for(;n.length<f;){let h=l[n.length];n.push(h),this.text(this.markString(h,!0,e,a),!1),this.atBlockStart=!1}d&&s.isText?this.text(this.markString(u,!0,e,a)+s.text+this.markString(u,!1,e,a+1),!1):this.render(s,e,a),this.atBlockStart=!1}s!=null&&s.isText&&s.nodeSize>0&&(this.atBlockStart=!1)};e.forEach(o),o(null,0,e.childCount),this.atBlockStart=!1}renderList(e,n,r){this.closed&&this.closed.type==e.type?this.flushClose(3):this.inTightList&&this.flushClose(1);let o=typeof e.attrs.tight!="undefined"?e.attrs.tight:this.options.tightLists,s=this.inTightList;this.inTightList=o,e.forEach((i,a,l)=>{l&&o&&this.flushClose(1),this.wrapBlock(n,r(l),e,()=>this.render(i,e,l))}),this.inTightList=s}esc(e,n=!1){return e=e.replace(/[`*\\~\[\]_]/g,(r,o)=>r=="_"&&o>0&&o+1<e.length&&e[o-1].match(/\w/)&&e[o+1].match(/\w/)?r:"\\"+r),n&&(e=e.replace(/^[\-*+>]/,"\\$&").replace(/^(\s*)(#{1,6})(\s|$)/,"$1\\$2$3").replace(/^(\s*\d+)\.\s/,"$1\\. ")),this.options.escapeExtraCharacters&&(e=e.replace(this.options.escapeExtraCharacters,"\\$&")),e}quote(e){let n=e.indexOf('"')==-1?'""':e.indexOf("'")==-1?"''":"()";return n[0]+e+n[1]}repeat(e,n){let r="";for(let o=0;o<n;o++)r+=e;return r}markString(e,n,r,o){let s=this.marks[e.type.name],i=n?s.open:s.close;return typeof i=="string"?i:i(this,e,r,o)}getEnclosingWhitespace(e){return{leading:(e.match(/^(\s+)/)||[void 0])[0],trailing:(e.match(/(\s+)$/)||[void 0])[0]}}}function gD(t,{tokenName:e,regex:n,getTokenDetails:r=o=>({payload:o.slice(1,-1),markup:""})}){const o=t.utils.arrayReplaceAt;t.core.ruler.push(e,s=>{var i,a,l,c,u,d=s.tokens,f=0;for(a=0,l=d.length;a<l;a++){let p=d[a];if(!(!p||p.type!=="inline"))for(c=p.children,i=c.length-1;i>=0;i--)u=c[i],u&&u.type==="text"&&f===0&&n.test(u.content)&&(p.children=c=o(c,i,Dyt(n,r,e)(u.content,u.level,s.Token)))}})}function Dyt(t,e,n){return(r,o,s)=>{var i,a=0,l=[];return r.replace(t,(c,...u)=>{const d=u[u.length-2];let{payload:f,markup:p,whiteSpaceAfter:h,whiteSpaceBefore:y}=e(c,d,r);if(d>a&&(i=new s("text","",0),i.content=r.slice(a,d),l.push(i)),y){let g=new s("text","",0);g.content=" ",l.push(g)}if(i=new s(n,"",0),i.markup=p,i.payload=f,l.push(i),h){let g=new s("text","",0);g.content=" ",l.push(g)}return a=d+c.length,""}),a<r.length&&(i=new s("text","",0),i.content=r.slice(a),l.push(i)),l}}function yD(t=new ep){var e,n;const r=Object.fromEntries(t.spec.filter(i=>i.markdown&&i.markdown.parseMarkdown).flatMap(i=>{var a;return Object.entries(((a=i.markdown)===null||a===void 0?void 0:a.parseMarkdown)||{})}));let o={};for(const i of t.spec)i.type==="node"&&(!((e=i.markdown)===null||e===void 0)&&e.toMarkdown)&&(o[i.name]=i.markdown.toMarkdown);let s={};for(const i of t.spec)i.type==="mark"&&(!((n=i.markdown)===null||n===void 0)&&n.toMarkdown)&&(s[i.name]=i.markdown.toMarkdown);return{tokens:r,serializer:{node:o,mark:s}}}function Lyt(t,e={}){t.core.ruler.after("inline","tables",function(n){return n.tokens=WT(n.tokens,"tbody"),n.tokens=WT(n.tokens,"thead"),n.tokens=jyt(n.tokens),!1})}function WT(t,e){const n=e+"_open",r=e+"_close";let o=0;return t.filter(s=>(s.level=s.level-o,n===s.type&&o++,r===s.type&&o--,![n,r].includes(s.type)))}function jyt(t){return t.flatMap(e=>{if(["th_open","td_open"].includes(e.type)){if(e.attrs){const[,n]=e.attrs[0]||[];n&&(e.align=n.split(":")[1])}return[e,new _w("paragraph_open","p",1)]}return["th_close","td_close"].includes(e.type)?[e,new _w("paragraph_close","p",-1)]:e})}function Fyt(t,e={}){const{todoListOpenType:n="bullet_list_open",todoListCloseType:r="bullet_list_close",todoItemCloseType:o="list_item_close",todoItemOpenName:s="list_item_open",isDoneAttrName:i="isDone"}=e;t.core.ruler.after("inline","gfm-todo-list",function(h){for(var y=h.tokens,g=0;g<y.length;g++)a(y,g)});function a(h,y){var g;if(((g=h[y])===null||g===void 0?void 0:g.type)!=="bullet_list_open")return;const b=c(h,y);if(b.filter(([x])=>x.type==="list_item_open").every(([x,k])=>!p(h,k)))return;if(b.some(([x])=>!x.type.startsWith("list_item_")))throw new Error("Expected all children to be of type list_item_*");const w=l(h,y);if(w===-1)throw new Error("Must have a closing token");h[y].type=n,h[w].type=r,b.forEach(([x])=>{x.type==="list_item_close"&&(x.type=o),x.type==="list_item_open"&&(x.type=s)}),b.filter(([x])=>x.type===s).forEach(([x,k])=>{const S=h[k+2];Ve(S,"inlineToken cannot be undefined"),S.children==null&&(S.children=[new _w("text","",0)]);const _=S.children[0];Ve(_,"inlineTokenChild cannot be undefined");let C=null;if(f(_)){const T=typeof _.content=="string"?_.content.charAt(1):null;T&&["x","X"].includes(T)?C="yes":C="no"}const $=x.attrs;C&&($?x.attrs=[[i,C],...$]:x.attrs=[[i,C]]),_.content=u(_.content),S.content=u(S.content)})}function l(h,y){var g,b;const w=((g=h[y])===null||g===void 0?void 0:g.type)||"";if(!w.endsWith("_open"))throw new Error("expect type to be _open");const x=w.split("_open").join("")+"_close";for(var k=(b=h[y])===null||b===void 0?void 0:b.level,S=y+1;S<h.length;S++)if(h[S].level===k&&h[S].type===x)return S;return-1}function c(h,y){const g=h[y];if(Ve(g,"parentOpen cannot be undefined"),!g.type.endsWith("_open"))throw new Error("Can only work with _open types");const b=g.type.split("_open").join("")+"_close",w=[];for(let x=y+1;x<h.length;x++){const k=h[x];if(k.level<g.level||k.level===g.level&&k.type===b)break;k.level===g.level+1&&w.push([k,x])}return w}function u(h){return d(h)?h.slice(4):h}function d(h){return h?h.startsWith("[ ] ")||h.startsWith("[x] ")||h.startsWith("[X] "):!1}function f(h){return d(h==null?void 0:h.content)}function p(h,y){function g(x){return(x==null?void 0:x.type)==="inline"}function b(x){return(x==null?void 0:x.type)==="paragraph_open"}function w(x){return(x==null?void 0:x.type)==="list_item_open"}return g(h[y+2])&&b(h[y+1])&&w(h[y])&&f(h[y+2])}}const bD=()=>HMe().use(Fyt).use(Lyt);function vD(t=new ep,e=bD()){const{tokens:n}=yD(t);return new mD(t.schema,e,n)}const wD=t=>{const{serializer:e}=yD(t);return new Ryt(e.node,e.mark)},{flattenFragmentJSON:Byt}=nr,zyt=()=>{let t,e;return n=>(n!==e&&(t=wD(n)),t)},qyt=()=>{const t=(o,s)=>{let i=bD();return s.forEach(a=>{Array.isArray(a)?i=i.use(...a):i=i.use(a)}),vD(o,i)};let e,n,r;return(o,s)=>((o!==n||s!==r)&&(e=t(o,s),n=o,r=s),e)},Wyt=qyt(),Vyt=zyt(),Y_=(t,e,n)=>{var o;const r=Wyt(e,n);return(o=r==null?void 0:r.parse(t))!=null?o:void 0},Uyt=(t,e)=>{var r;return t=Kyt(t,e),(r=Vyt(e))==null?void 0:r.serialize(t)};function Hyt(t,e){return b1(t,n=>n.type===e.schema.nodes.heading&&!!n.attrs.collapseContent,!1)}function Kyt(t,e){const n=new Set(Hyt(t,e).map(o=>o.node));if(n.size===0)return t;let r=L.empty;return t.forEach(o=>{if(!n.has(o)){r=r.append(L.from(o));return}r=r.append(L.from(e.schema.nodes.heading.createChecked({...o.attrs,collapseContent:null},o.content))).append(L.fromJSON(e.schema,Byt(o.attrs.collapseContent)))}),t=t.replace(0,t.content.size,new H(r,0,0)),t}const Gyt={name:"markdown-format-provider",description:"Saves notes in Markdown format",extensions:["md"],serializeNote(t,e){return Uyt(t,e)||""},parseNote(t,e,n){return Y_(t,e,n)}};function Wo(t,e){return{key:t,value:e,lastModified:Date.now()}}class Zyt{constructor(e,n,r){this.dbName=e,this._storeName=n,this._openDb=r}async bulkDelete(e){const r=(await this._openDb()).transaction(this._storeName,"readwrite"),o=r.objectStore(this._storeName);let s=[];for(const i of e)s.push(o.delete(i));await Promise.all(s),await r.done}async bulkPutIfNotExists(e,n={}){const o=(await this._openDb()).transaction(this._storeName,"readwrite",n),s=o.objectStore(this._storeName);let i=[],a=[];for(const{key:l,value:c}of e)await s.get(l)?a.push(l):i.push(s.put(Wo(l,c)));return await Promise.all(i),await o.done,{failed:a}}async bulkUpdateIfExists(e,n,r={}){const s=(await this._openDb()).transaction(this._storeName,"readwrite",r),i=s.objectStore(this._storeName);let a=[],l=[];for(const c of e){const u=await i.get(c);if(u){const d=Wo(c,n(c,u.value));a.push(i.put(d))}else l.push(c)}return await Promise.all(a),await s.done,{failed:l}}async delete(e){await(await this._openDb()).delete(this._storeName,e)}async get(e){const r=await(await this._openDb()).get(this._storeName,e);return r==null?void 0:r.value}async getAll(){return(await(await this._openDb()).getAll(this._storeName)).map(r=>r.value)}openDb(){return this._openDb()}async put(e,n){const r=await this._openDb(),o=Wo(e,n);await r.put(this._storeName,o)}async putIfNotExists(e,n,r={}){const s=(await this._openDb()).transaction(this._storeName,"readwrite",r),i=s.objectStore(this._storeName);if(await i.get(e))return await s.done,!1;{let l=Wo(e,n);return await Promise.all([i.put(l),s.done]),!0}}async updateIfExists(e,n,r={}){const s=(await this._openDb()).transaction(this._storeName,"readwrite",r),i=s.objectStore(this._storeName),a=await i.get(e);if(a){let l=Wo(e,n(a.value));return await Promise.all([i.put(l),s.done]),!0}else return await s.done,!1}}function X_(t,e,n){return new Zyt(t,e,n)}function Jyt(){const t=ip("keyval-store",1,{upgrade(e,n){switch(n){case 0:e.createObjectStore("keyval")}}});return{async get(e){return(await t).get("keyval",e)},async del(e){return(await t).delete("keyval",e)},async set(e,n){return(await t).put("keyval",n,e)}}}const xD="bangle-io-db",Yyt=2,kc="WorkspaceInfo",Xyt="DummyTable",kD="MiscTable",Qyt=[kc,Xyt,kD];function _D(){return ip(xD,Yyt,{upgrade(t,e){switch(e){case 0:{for(const n of Qyt)t.createObjectStore(n,{keyPath:"key"});break}case 1:{t.createObjectStore(kD,{keyPath:"key"});break}}}})}function $D(){return _D()}function Q_(){return X_(xD,kc,_D)}async function ebt(){await tbt()}async function tbt(){const t=Jyt(),e=await t.get("workspaces/2");if(!e){console.debug("workspacesKeyValMigration: no legacy data");return}console.debug("workspacesKeyValMigration: migrating legacy data of count, ",e.length);const n=Q_();for(const r of e)r&&typeof r.name=="string"&&r.metadata&&typeof r.type=="string"&&await n.put(r.name,r);await t.del("workspaces/2"),console.debug("workspacesKeyValMigration: migrating legacy success")}let fv;const ED=()=>(fv||(fv={deleted:!1,metadata:{allowLocalChanges:!0},name:Br,type:Je.Help,lastModified:Date.now()}),fv);async function Zn(t,{allowDeleted:e=!1,type:n}={}){let r=await Q_().get(t).catch(o=>{console.warn("Error reading workspace info from db",o)});if(t===Br&&(r=ED()),!(!e&&(r!=null&&r.deleted)))return n?r&&r.type===n?r:void 0:r}async function nbt(t,e){var n;return(n=await Zn(t,e))==null?void 0:n.metadata}async function rbt(t,e){const n=await Zn(t);return n?await CD(t,r=>({...n,...r,metadata:{...typeof e=="function"?e((r||n).metadata):e}})):!1}async function SD(t){return[...(await Q_().getAll()||[]).filter(n=>t!=null&&t.allowDeleted?!0:!n.deleted).filter(n=>t!=null&&t.type?n.type===t.type:!0),ED()].sort((n,r)=>n.name.localeCompare(r.name))}async function obt(t,e){if(t===Br)return!1;const r=(await $D()).transaction(kc,"readwrite"),o=r.objectStore(kc);if(await o.get(t))return!1;const i={...e,lastModified:Date.now()};return await Promise.all([o.put(Wo(t,i)),r.done]),!0}async function CD(t,e){if(t===Br)return!1;const r=(await $D()).transaction(kc,"readwrite"),o=r.objectStore(kc),s=await o.get(t);if(s){const i={...e(s.value),lastModified:Date.now()};return await Promise.all([o.put(Wo(t,i)),r.done]),!0}return!1}const TD={};function Ri(t){const e=TD[t];if(!e)throw new Error(`No storage provider found for type ${t}`);return e}function sbt(t,e){const n={specRegistry:e,readWorkspaceMetadata:async r=>await nbt(r)||{},updateWorkspaceMetadata:async(r,o)=>{await rbt(r,()=>o)}};TD[t.name]={provider:t,options:n}}function Ya(t,e){if(!e)throw new ge({code:Ko.WorkspaceNotFound,message:`Workspace "${t}" not found`})}function AD(t,e,n){const{wsName:r,fileName:o}=tt(t),s=OD().serializeNote(e,n.specRegistry,o);return new File([s],o,{type:"text/plain"})}async function ND(t,e,n){const r=AD(t,n,e);await ibt(t,e,r)}async function ibt(t,e,n){const r=tt(t).wsName;Hs&&Hs>0&&(console.warn("Slowing down write by "+Hs+"ms"),await ap(Hs));const o=await Zn(r);Ya(r,o);const{options:s,provider:i}=Ri(o.type);await i.createFile(t,n,s)}async function PD(t,e){const n=await lbt(t);return n?(tt(t),OD().parseNote(n,e.specRegistry,e.markdownItPlugins)):void 0}function OD(t){let e=Gyt;if(!e)throw new Error("Note storage provider not found.");return e}async function e$(t){const e=tt(t).wsName,n=await Zn(e);Ya(e,n);const{options:r,provider:o}=Ri(n.type);return o.readFile(t,r)}async function abt(t){const e=tt(t).wsName,n=await Zn(e);Ya(e,n);const{options:r,provider:o}=Ri(n.type);return o.fileExists(t,r)}async function lbt(t){const e=await e$(t);if(e)return E_(e)}async function cbt(t,e){const{wsName:n}=tt(t),{wsName:r}=tt(e);if(n!==r)throw new ge({code:Ko.FileRenameNotAllowed,message:`Cannot rename file ${t} to ${e} as they are in different workspaces`});const o=await Zn(n);Ya(n,o);const{options:s,provider:i}=Ri(o.type);await i.renameFile(t,e,s)}async function ID(t,e,n){await RD(t,AD(t,n,e))}async function RD(t,e,n){const r=tt(t).wsName;Hs&&Hs>0&&(console.warn("Slowing down write by "+Hs+"ms"),await ap(Hs));const o=await Zn(r);Ya(r,o);const{options:s,provider:i}=Ri(o.type);await i.writeFile(t,e,s,n)}async function ubt(t){const e=tt(t).wsName,n=await Zn(e);Ya(e,n);const{options:r,provider:o}=Ri(n.type);await o.deleteFile(t,r)}async function dbt(t,e){const n=await Zn(t);Ya(t,n);const{options:r,provider:o}=Ri(n.type);return(await o.listAllFiles(e,t,r)).filter(i=>{const a=O_(i);return a||console.warn(`Invalid file path ${i}`),a}).map(i=>He(i))}async function fbt(t){if(!await CD(t,n=>({...n,deleted:!0})))throw new ge({code:Ko.WorkspaceDeleteNotAllowed,message:`Unable to delete workspace "${t}". It either is already deleted or is not allowed.`})}async function pbt(t,e,n){MM(t);const{provider:r}=Ri(e),o=await r.newWorkspaceMetadata(t,n)||{},s={deleted:!1,lastModified:Date.now(),name:t,type:e,metadata:o};if(!await obt(t,s))throw new ge({code:Ko.WorkspaceCreateNotAllowed,message:`Unable to create workspace "${t}" as it either already exists or the operation is not allowed.`})}const MD=new WeakMap;function DD(t){const e=MD.get(t);if(!e)throw new Error("Eternal vars not set");return e}function hbt(t){var u;const{effects:e,eternalVars:n,onRefreshWorkspace:r,otherStoreParams:o,slices:s,type:i}=t;for(const d of n.extensionRegistry.getAllStorageProviders())d.onChange=f=>{n.storageEmitter.emit(Lh,f)},sbt(d,n.extensionRegistry.specRegistry);const a=(u=t.name)!=null?u:`bangle-store-${i}`,l=KI({storeName:a,slices:s,...o});MD.set(l,n),e.forEach(d=>{l.registerEffect(d)});const c=d=>{(d.type==="delete"||d.type==="create"||d.type==="rename")&&(l.destroyed||r(l))};if(n.storageEmitter.on(Lh,c),l.destroySignal.addEventListener("abort",()=>{n.storageEmitter.off(Lh,c)},{once:!0}),t.registerWorker){if(i==="worker")throw new Error("Worker cannot register worker");t.registerWorker.setup(l).then(d=>{if(!t.registerWorker)return;const f=new MessageChannel;sY(f.port1,n.editorCollabMessageBus,l.destroySignal),d.__internal_register_main_cb(cR(t.registerWorker.api(l,n))),d.editor.registerCollabMessagePort(lR(f.port2,[f.port2]))})}return l}let Cw;function mbt(t){Cw=t,LB(DD(t))}function fe(){if(!Cw)throw new Error("Store not set");return Cw}te.union([te.literal("active"),te.literal("passive"),te.literal("hidden"),te.literal("frozen"),te.literal("terminated"),te.undefined()]);function gbt(t){for(var e=[],n=0;n<t.length;){var r=t[n];if(r==="*"||r==="+"||r==="?"){e.push({type:"MODIFIER",index:n,value:t[n++]});continue}if(r==="\\"){e.push({type:"ESCAPED_CHAR",index:n++,value:t[n++]});continue}if(r==="{"){e.push({type:"OPEN",index:n,value:t[n++]});continue}if(r==="}"){e.push({type:"CLOSE",index:n,value:t[n++]});continue}if(r===":"){for(var o="",s=n+1;s<t.length;){var i=t.charCodeAt(s);if(i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122||i===95){o+=t[s++];continue}break}if(!o)throw new TypeError("Missing parameter name at ".concat(n));e.push({type:"NAME",index:n,value:o}),n=s;continue}if(r==="("){var a=1,l="",s=n+1;if(t[s]==="?")throw new TypeError('Pattern cannot start with "?" at '.concat(s));for(;s<t.length;){if(t[s]==="\\"){l+=t[s++]+t[s++];continue}if(t[s]===")"){if(a--,a===0){s++;break}}else if(t[s]==="("&&(a++,t[s+1]!=="?"))throw new TypeError("Capturing groups are not allowed at ".concat(s));l+=t[s++]}if(a)throw new TypeError("Unbalanced pattern at ".concat(n));if(!l)throw new TypeError("Missing pattern at ".concat(n));e.push({type:"PATTERN",index:n,value:l}),n=s;continue}e.push({type:"CHAR",index:n,value:t[n++]})}return e.push({type:"END",index:n,value:""}),e}function ybt(t,e){e===void 0&&(e={});for(var n=gbt(t),r=e.prefixes,o=r===void 0?"./":r,s="[^".concat(kl(e.delimiter||"/#?"),"]+?"),i=[],a=0,l=0,c="",u=function(_){if(l<n.length&&n[l].type===_)return n[l++].value},d=function(_){var C=u(_);if(C!==void 0)return C;var $=n[l],T=$.type,A=$.index;throw new TypeError("Unexpected ".concat(T," at ").concat(A,", expected ").concat(_))},f=function(){for(var _="",C;C=u("CHAR")||u("ESCAPED_CHAR");)_+=C;return _};l<n.length;){var p=u("CHAR"),h=u("NAME"),y=u("PATTERN");if(h||y){var g=p||"";o.indexOf(g)===-1&&(c+=g,g=""),c&&(i.push(c),c=""),i.push({name:h||a++,prefix:g,suffix:"",pattern:y||s,modifier:u("MODIFIER")||""});continue}var b=p||u("ESCAPED_CHAR");if(b){c+=b;continue}c&&(i.push(c),c="");var w=u("OPEN");if(w){var g=f(),x=u("NAME")||"",k=u("PATTERN")||"",S=f();d("CLOSE"),i.push({name:x||(k?a++:""),pattern:x&&!k?s:k,prefix:g,suffix:S,modifier:u("MODIFIER")||""});continue}d("END")}return i}function kl(t){return t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function LD(t){return t&&t.sensitive?"":"i"}function bbt(t,e){if(!e)return t;for(var n=/\((?:\?<(.*?)>)?(?!\?)/g,r=0,o=n.exec(t.source);o;)e.push({name:o[1]||r++,prefix:"",suffix:"",modifier:"",pattern:""}),o=n.exec(t.source);return t}function vbt(t,e,n){var r=t.map(function(o){return jD(o,e,n).source});return new RegExp("(?:".concat(r.join("|"),")"),LD(n))}function wbt(t,e,n){return xbt(ybt(t,n),e,n)}function xbt(t,e,n){n===void 0&&(n={});for(var r=n.strict,o=r===void 0?!1:r,s=n.start,i=s===void 0?!0:s,a=n.end,l=a===void 0?!0:a,c=n.encode,u=c===void 0?function(A){return A}:c,d=n.delimiter,f=d===void 0?"/#?":d,p=n.endsWith,h=p===void 0?"":p,y="[".concat(kl(h),"]|$"),g="[".concat(kl(f),"]"),b=i?"^":"",w=0,x=t;w<x.length;w++){var k=x[w];if(typeof k=="string")b+=kl(u(k));else{var S=kl(u(k.prefix)),_=kl(u(k.suffix));if(k.pattern)if(e&&e.push(k),S||_)if(k.modifier==="+"||k.modifier==="*"){var C=k.modifier==="*"?"?":"";b+="(?:".concat(S,"((?:").concat(k.pattern,")(?:").concat(_).concat(S,"(?:").concat(k.pattern,"))*)").concat(_,")").concat(C)}else b+="(?:".concat(S,"(").concat(k.pattern,")").concat(_,")").concat(k.modifier);else k.modifier==="+"||k.modifier==="*"?b+="((?:".concat(k.pattern,")").concat(k.modifier,")"):b+="(".concat(k.pattern,")").concat(k.modifier);else b+="(?:".concat(S).concat(_,")").concat(k.modifier)}}if(l)o||(b+="".concat(g,"?")),b+=n.endsWith?"(?=".concat(y,")"):"$";else{var $=t[t.length-1],T=typeof $=="string"?g.indexOf($[$.length-1])>-1:$===void 0;o||(b+="(?:".concat(g,"(?=").concat(y,"))?")),T||(b+="(?=".concat(g,"|").concat(y,")"))}return new RegExp(b,LD(n))}function jD(t,e,n){return t instanceof RegExp?bbt(t,e):Array.isArray(t)?vbt(t,e,n):wbt(t,e,n)}function FD(t=_bt){let e={};const n=r=>e[r]||(e[r]=t(r));return(r,o)=>{const{regexp:s,keys:i}=n(r||""),a=s.exec(o);return a?[!0,i.reduce((c,u,d)=>(c[u.name]=a[d+1],c),{})]:[!1,null]}}const VT=t=>t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),kbt=(t,e,n)=>{let r=t?"((?:[^\\/]+?)(?:\\/(?:[^\\/]+?))*)":"([^\\/]+?)";return e&&n&&(r="(?:\\/"+r+")"),r+(e?"?":"")},_bt=t=>{const e=/:([A-Za-z0-9_]+)([?+*]?)/g;let n=null,r=0,o=[],s="";for(;(n=e.exec(t))!==null;){const[i,a,l]=n,c=l==="+"||l==="*",u=l==="?"||l==="*",d=u&&t[n.index-1]==="/"?1:0,f=t.substring(r,n.index-d);o.push({name:a}),r=e.lastIndex,s+=VT(f)+kbt(c,u,d)}return s+=VT(t.substring(r)),{keys:o,regexp:new RegExp("^"+s+"(?:\\/)?$","i")}};te.object({pathname:te.string().optional(),search:te.string().optional()});const $bt=t=>{let e=[];const n=jD(t,e,{strict:!0,end:!1});return{keys:e,regexp:n}},BD=FD($bt);function zD(t){let{wsName:e,filePath:n}=he(t);return e=encodeURIComponent(e),n=n.split("/").map(r=>encodeURIComponent(r)).join("/"),`/ws/${e}/${n}`}function qD(t){if(!t)return;const e=sy(t);if(!e)return;let n=t.split("/").slice(3).map(r=>decodeURIComponent(r)).join("/");if(n.length!==0)return`${e}:${n}`}function oy(t){return`/ws/${encodeURIComponent(t)}`}function sy(t){if(!t)return;const[e,n]=BD("/ws/:wsName",t);if(e){const{wsName:r}=n;return decodeURIComponent(r)}}function Ebt(t,e){const n=new URLSearchParams(e);return n.set("secondary",encodeURIComponent(t)),n.toString()}function WD(t){if(!t)return;const n=new URLSearchParams(t).get("secondary");if(n)return decodeURIComponent(n)}function VD(t,e,n){let r=t.pathname,o=t.search||"";if(n.primaryWsPath2?r=zD(n.primaryWsPath2):r=oy(e),n.secondaryWsPath)o=Ebt(n.secondaryWsPath,o);else{const s=new URLSearchParams(t.search);s.delete("secondary"),o=s.toString()}return{pathname:r,search:o}}const Sbt={blockReload:!1,pendingNavigation:void 0,location:{pathname:void 0,search:void 0},lifeCycleState:{current:void 0,previous:void 0}},Cbt={...Sbt},mn=pk([],{name:"bangle/page-slice",state:Cbt}),Tbt=mn.selector(t=>{const{lifeCycleState:e}=mn.get(t);return e.current}),Abt=mn.selector(t=>{const{location:e}=mn.get(t);let n=sy(e.pathname);if(n){if(!qX(n)){console.warn("Invalid wsName",n);return}return gr(n)}}),Nbt=mn.selector(t=>{const{location:e}=mn.get(t);return qD(e.pathname)}),Pbt=mn.selector(t=>{const{location:e}=mn.get(t);return sy(e.pathname)?WD(e.search):void 0}),Obt=mn.selector(t=>{const{location:e}=mn.get(t),n=qD(e.pathname);if(n){if(!Wr(n)){console.warn("Invalid primaryWsPath",n);return}return He(n)}}),Ibt=mn.selector(t=>{const{location:e}=mn.get(t),r=sy(e.pathname)?WD(e.search):void 0;if(r){if(!Wr(r)){console.warn("Invalid secondaryWsPath",r);return}return He(r)}}),Rbt=mn.selector(t=>{const{lifeCycleState:e}=mn.get(t),{current:n}=e;return n==="passive"||n==="hidden"||n==="terminated"}),ue=mn.slice({derivedState:{currentPageLifeCycle:Tbt,wsName:Abt,rawPrimaryWsPath:Nbt,rawSecondaryWsPath:Pbt,primaryWsPath:Obt,secondaryWsPath:Ibt,isInactivePage:Rbt}});ue.action(function(){return ue.tx(e=>ue.update(e,n=>n))});const UD=ue.action(function(e){return ue.tx(n=>ue.update(n,{blockReload:e}))}),Mbt=ue.action(function({current:e,previous:n}){return ue.tx(r=>ue.update(r,{lifeCycleState:{current:e,previous:n}}))}),UT=ue.action(function(e){return ue.tx(n=>ue.update(n,{location:e}))}),Xa=ue.action(function({location:e,replace:n=!1}){return ue.tx(r=>{if(typeof e=="string"){const[o,s]=e.split("?");return ue.update(r,{pendingNavigation:{location:{pathname:o,search:s},replaceHistory:n,preserve:!1}})}else return ue.update(r,{pendingNavigation:{location:e,replaceHistory:n,preserve:!0}})})});function fg({invalidWsName:t,replace:e}){return Xa({location:`/ws-invalid-path/${encodeURIComponent(t)}`,replace:!1})}function t$({replace:t}={}){return Xa({location:"/landing",replace:t})}function ou({wsName:t,replace:e}){return Xa({location:oy(t),replace:e})}const Dbt=(t,e,n)=>{const r=new URLSearchParams([["error_code",e]]);return n&&Lbt(n,r),Xa({location:{pathname:`/ws-auth/${encodeURIComponent(t)}`,search:r.toString()},replace:!0})};function HD({wsName:t}){return Xa({location:`/ws-not-found/${encodeURIComponent(t)}`,replace:!0})}function Lbt(t,e){t.hasSomeOpenedWsPaths()&&e.append("ws_paths",JSON.stringify(t.toArray()))}const _d=hs([],{name:"bangle/slice-refresh-workspace",state:{refreshWorkspace:0}}),iy=_d.action(function(){return _d.tx(e=>_d.update(e,n=>({refreshWorkspace:n.refreshWorkspace+1})))});function jbt(t){let e;return t.forEachWsPath(n=>{e||n==null||Wr(n)||(e=n)}),e?{valid:!1,invalidWsPath:e}:{valid:!0}}const Fbt={wsPaths:void 0,recentlyUsedWsPaths:void 0,miniEditorWsPath:void 0,popupEditorWsPath:void 0},Bbt={workspaceData:{}},bp=(t,e,n)=>gn.update(t,r=>{const o=r.workspaceData[e],s={...Fbt,...o,...n};return{workspaceData:{...r.workspaceData,[e]:s}}}),zbt="nsm-slice-workspace",su=ue.query(()=>t=>ue.get(t).wsName),qbt=ue.query(()=>t=>ue.get(t).primaryWsPath),Wbt=ue.query(()=>t=>ue.get(t).secondaryWsPath),gn=pk([ue],{name:zbt,state:Bbt}),Vbt=gn.selector(t=>su(t)),Ubt=gn.selector(t=>ue.get(t).primaryWsPath),KD=gn.selector(t=>{var o;const e=su(t),{workspaceData:n}=gn.get(t),r=e?(o=n[e])==null?void 0:o.miniEditorWsPath:void 0;if(r){if(!Wr(r)){console.warn("Invalid miniPath",r);return}return r}}),Hbt=gn.selector(t=>{var o;const e=su(t),{workspaceData:n}=gn.get(t),r=e?(o=n[e])==null?void 0:o.popupEditorWsPath:void 0;if(r){if(!Wr(r)){console.warn("Invalid popupPath",r);return}return r}}),Kbt=gn.selector(t=>{const e=qbt(t),n=Wbt(t),r=KD(t),o=Hbt(t);return ia.createEmpty().updatePrimaryWsPath(e).updateSecondaryWsPath(n).updateMiniEditorWsPath(r).updatePopupEditorWsPath(o)},{equal:(t,e)=>t.equal(e)}),Gbt=gn.selector(t=>{var r;const e=su(t),{workspaceData:n}=gn.get(t);if(e)return(r=n[e])==null?void 0:r.wsPaths}),Zbt=Qc(t=>t.filter(e=>Wr(e))),Jbt=[],Ybt=gn.selector(t=>{var o;const e=su(t),{workspaceData:n}=gn.get(t);if(!e)return;const r=(o=n[e])==null?void 0:o.wsPaths;return r?Zbt(r):Jbt}),Xbt=gn.selector(t=>{var r;const e=su(t),{workspaceData:n}=gn.get(t);if(e)return(r=n[e])==null?void 0:r.recentlyUsedWsPaths}),Fe=gn.slice({derivedState:{wsName:Vbt,primaryWsPath:Ubt,miniWsPath:KD,openedWsPaths:Kbt,wsPaths:Gbt,noteWsPaths:Ybt,recentWsPaths:Xbt}}),Qbt=ye(function(e){const{wsName:n}=Fe.track(e);_d.track(e).refreshWorkspace;let r=new AbortController;bn(e,()=>{r==null||r.abort()}),n&&dbt(n,r.signal).then(o=>{r.signal.aborted||e.dispatch(nvt({wsPaths:o,wsName:n}))}).catch(o=>{if(!Ja(o))throw o})}),evt=[Qbt],tvt=Fe.action(function({wsName:e,recentlyUsedWsPaths:n}){return Fe.tx(r=>bp(r,e,{recentlyUsedWsPaths:n}))}),nvt=Fe.action(function({wsName:e,wsPaths:n}){return Fe.tx(r=>bp(r,e,{wsPaths:n}))}),rvt=Fe.action(function({mini:e,wsName:n,popup:r}){return Fe.tx(o=>bp(o,n,{miniEditorWsPath:e,popupEditorWsPath:r}))});Fe.action(function({wsName:e,wsPath:n}){return Fe.tx(r=>bp(r,e,{miniEditorWsPath:n}))});Fe.action(function({wsName:e,wsPath:n}){return Fe.tx(r=>bp(r,e,{popupEditorWsPath:n}))});const ay=ms({deferred:!1}),ur=ay(function(e,n={}){return r=>{const{openedWsPaths:o,wsName:s}=Fe.get(r.state),{location:i}=ue.get(r.state);if(e instanceof Function&&(e=e(o)),e.equal(o))return;const a=jbt(e),l=e.getOneWsName();if(!a.valid){r.dispatch(fg({invalidWsName:l||gr("unknown-ws"),...n}));return}if(!l){r.dispatch(t$(n));return}if(!e.allBelongToSameWsName(s)){console.error("Cannot have different wsNames"),r.dispatch(fg({invalidWsName:gr("unknown-ws"),...n}));return}if(o.primaryWsPath!==e.primaryWsPath||o.secondaryWsPath!==e.secondaryWsPath){const c=VD(i,l,e);r.dispatch(Xa({location:c,...n}));return}else{r.dispatch(rvt({mini:e.miniEditorWsPath2,popup:e.popupEditorWsPath2,wsName:l}));return}}}),ovt=ay((t,e)=>n=>{n.dispatch(ur(r=>r.updatePrimaryWsPath(t),e))}),svt=ay((t,e)=>n=>{n.dispatch(ur(r=>r.updateSecondaryWsPath(t),e))}),ivt=t=>{typeof window!="undefined"&&window.open(zD(t))},GD=ay((t,e)=>n=>{const{openedWsPaths:r}=Fe.get(n.state);let o=r.closeIfFound(t);if(!o.hasSomeOpenedWsPaths()){n.dispatch(ou({wsName:tt(t).wsName,...e}));return}n.dispatch(ur(o.optimizeSpace(),e))});function avt(t){return SD({allowDeleted:t==null?void 0:t.allowDeleted})}function n$(t,e){return Zn(t,{allowDeleted:e==null?void 0:e.allowDeleted})}const r$=(t,e,n)=>{fe().dispatch(Dbt(t,e,n))},ly=async(t,e,n)=>{await pbt(t,e,n),fe().dispatch(ou({wsName:t})),await Promise.resolve()},lvt=async t=>{await fbt(t);const e=fe();Fe.get(e.state).wsName===t&&(e.dispatch(t$({replace:!0})),await Promise.resolve())},cvt=te.record(te.union([te.undefined(),te.string(),te.number(),te.null()])),o$=(t,e)=>{const r=e.view.state.selection.toJSON();for(const o of Object.values(r))if(typeof o!="number"&&typeof o!="string"&&o!=null)throw new Error(`Invalid editor selection json value type: ${r}`);return{wsPath:ss(e.view.state).wsPath,editorId:t,selectionJson:r}},uvt=(t,e)=>{var r;const n=(r=s$(t))==null?void 0:r.scrollTop;if(typeof n=="number")return{wsPath:ss(e.state).wsPath,editorId:t,scrollPosition:n}};function vp(t){return t>=0&&t<Rr}function ZD(t){if(!vp(t))throw new Error("editorId is out of range or invalid")}function s$(t){const e=document.querySelector(".B-editor-container_editor-"+t);if(e)return mX(e)}const dvt=te.array(te.union([te.undefined(),te.record(te.union([te.number(),te.null(),te.undefined()]))])).length(Rr),fvt=te.array(te.union([te.undefined(),te.record(te.union([te.undefined(),cvt]))])).length(Rr),pvt=te.object({selections:fvt,scrollPositions:dvt});class ec{constructor({selections:e,scrollPositions:n}){M(this,"selections");M(this,"scrollPositions");this.selections=ag(Rr).map((r,o)=>{let s=e[o];return s==null?void 0:s}),this.scrollPositions=ag(Rr).map((r,o)=>{let s=n[o];return s==null?void 0:s})}static fromJsonObj(e){const{selections:n=[],scrollPositions:r=[]}=e;return new ec({selections:n,scrollPositions:r})}getScrollPosition(e,n){var o;if(typeof n!="number")return;const r=(o=this.scrollPositions[n])==null?void 0:o[e];return r==null?void 0:r}getSelection(e,n){var o;if(typeof n!="number")return;const r=(o=this.selections[n])==null?void 0:o[e];return r==null?void 0:r}toJsonObj(){const e=this.selections,n=this.scrollPositions;return{selections:e,scrollPositions:n}}updateScrollPosition(e,n,r){if(typeof r!="number")return this;const o=[...this.scrollPositions];let s=o[r];return s||(s={}),o[r]=s,s[n]=e==null?void 0:e,new ec({selections:this.selections,scrollPositions:o})}updateSelection(e,n,r){if(typeof r!="number")return this;const o=[...this.selections];let s=o[r];return s||(s={}),o[r]=s,s[n]=e==null?void 0:e,new ec({selections:o,scrollPositions:this.scrollPositions})}}const Tw={focusedEditorId:void 0,mainEditors:ag(Rr),editorConfig:ec.fromJsonObj({selections:[],scrollPositions:[]}),primaryEditor:void 0,secondaryEditor:void 0,editingAllowed:B1(),editorOpenOrder:[],disableEditingCounter:void 0,searchQuery:void 0},Si=pk([ue],{name:"editor-manager-slice",state:Tw}),hvt=Si.selector(t=>{const{mainEditors:e}=Si.get(t);return e[jn]}),mvt=Si.selector(t=>{const{mainEditors:e}=Si.get(t);return e[ri]}),gvt=Si.selector(t=>{const{editorOpenOrder:e,mainEditors:n}=Si.get(t),r=e[0],o=typeof r=="number"?n[r]:void 0;return typeof r=="number"&&o?{editorId:r,editor:o}:void 0},{equal:gX}),re=Si.slice({derivedState:{primaryEditor:hvt,secondaryEditor:mvt,lastOpenedEditor:gvt}}),yvt=re.query((t,e)=>n=>{const r=s$(e),s=re.get(n).editorConfig.getScrollPosition(t,e);typeof s=="number"&&r&&(r.scrollTop=s)}),bvt=re.query(t=>e=>{var n,r;if(!xvt(e,o=>o.view.hasFocus())){if(t!=null){const o=wp(e,t);if(o){o.focusView();return}}(r=(n=re.get(e).lastOpenedEditor)==null?void 0:n.editor)==null||r.focusView()}}),wp=re.query(t=>e=>(ZD(t),re.get(e).mainEditors[t])),vvt=re.query((t,e,n)=>r=>{ZD(t);const o=re.get(r);if(!o)return;const s=o.editorConfig.getSelection(e,t);if(s){const i=typeof(s==null?void 0:s.anchor)=="number"?s.anchor:void 0,a=typeof(s==null?void 0:s.head)=="number"?s.head:void 0;let l=!1;i!=null&&a!=null&&(l=Math.max(i,a)>=n.content.size);let c=l?Q.atEnd(n):wvt(n,s),{from:u}=c;return u>=n.content.size?c=Q.atEnd(n):c=Q.near(n.resolve(u)),c}});function wvt(t,e){try{return Q.fromJSON(t,e)}catch(n){if(n instanceof RangeError)return Q.atStart(t);throw n}}const i$=re.query(t=>e=>{const{mainEditors:n}=re.get(e);for(const[r,o]of n.entries())o&&t(o,r)}),HT=1,JD=MI(Si,{dbKey:"editorManagerSlice",schema:te.object({focusedEditorId:te.union([te.number(),te.undefined()]),editorConfig:pvt}),serialize:t=>{const{editorConfig:e,focusedEditorId:n}=re.get(t);let r=e;return i$(t,(o,s)=>{var c;const{selectionJson:i,wsPath:a}=o$(s,o),l=(c=uvt(s,o.view))==null?void 0:c.scrollPosition;r=r.updateSelection(i,a,s),r=r.updateScrollPosition(l,a,s)}),{version:HT,data:{focusedEditorId:n,editorConfig:r.toJsonObj()}}},deserialize:({version:t,data:e})=>t<HT?Tw:{...Tw,focusedEditorId:e.focusedEditorId,editorConfig:ec.fromJsonObj(e.editorConfig)}}),xvt=re.query(t=>e=>{const n=re.get(e);return YD(n.mainEditors,t)});function YD(t,e){return Array.from(t.entries()).some(([n,r])=>r?e(r,n):!1)}re.action(function(){return re.tx(e=>re.update(e,n=>n))});re.simpleAction("editingAllowed");const KT=re.action(function({editorId:e,editor:n}){return re.tx(r=>re.update(r,o=>{if(!vp(e))return o;const s=[...o.mainEditors];s[e]=n;const i=[e,...o.editorOpenOrder].filter(a=>!!s[a]);return{mainEditors:s,editorOpenOrder:i}}))}),kvt=re.simpleAction("focusedEditorId",(t,e)=>typeof t=="number"&&!vp(t)?re.get(e):{focusedEditorId:t}),_vt=re.action(function({editorId:e,wsPath:n,scrollPosition:r}){return re.tx(o=>re.update(o,s=>vp(e)?{editorConfig:s.editorConfig.updateScrollPosition(r,n,e)}:s))}),$vt=re.action(function(){return re.tx(e=>re.update(e,n=>({disableEditingCounter:(n.disableEditingCounter||0)+1})))}),XD=re.action(function({editorId:e,wsPath:n,selectionJson:r}){return re.tx(o=>vp(e)?re.update(o,s=>({editorConfig:s.editorConfig.updateSelection(r,n,e)})):re.get(o))}),pg=re.action(({focusOrBlur:t=!0,editingAllowed:e}={})=>re.tx(n=>t?re.update(n,r=>{const o=e!=null?e:!r.editingAllowed;for(const s of r.mainEditors)s!=null&&s.view.isDestroyed||(o?s==null||s.focusView():s==null||s.view.dom.blur(),queueMicrotask(()=>{s==null||s.view.dispatch(s.view.state.tr.setMeta("__activitybar_empty__",!0))}));return{editingAllowed:o}}):re.get(n))),Evt=re.simpleAction("searchQuery"),Svt="search",Cvt=Tvt;function Tvt({key:t=new Ee(Svt),query:e,className:n="bangle-search-match",maxHighlights:r=1500}){function o(s,i){if(!i)return rt.empty;const l=Avt(s.doc,i,r).map(c=>Jt.inline(c.pos+c.match.start,c.pos+c.match.end,{class:n}));return rt.create(s.doc,l)}return()=>new xe({key:t,state:{init(s,i){return{query:e,decos:o(i,e)}},apply(s,i,a,l){const c=s.getMeta(t);if(c){const u=c.query;return{query:u,decos:o(l,u)}}return s.docChanged?{query:i.query,decos:o(l,i.query)}:i}},props:{decorations(s){var i;return((i=t.getState(s))===null||i===void 0?void 0:i.decos)||null}}})}function Avt(t,e,n){let r=[],o=0,s;if(e instanceof RegExp){let i="g";e.ignoreCase&&(i+="i"),e.multiline&&(i+="m"),s=RegExp(e.source,i)}else s=RegExp(e,"g");return t.descendants((i,a)=>{if(n<=o)return!1;if(i.isText){const l=i.textContent,c=v1(s,l);for(const u of c)if(u.match){if(n<=o++)break;r.push({pos:a,match:u})}}}),r}function Nvt(t,e){return(n,r,o)=>(r&&r(n.tr.setMeta(t,{query:e}).setMeta("addToHistory",!1)),!0)}var a$=Object.freeze({__proto__:null,plugins:Cvt,updateSearchQuery:Nvt});const Aw={changelogHasUpdates:!1,dialogName:void 0,dialogMetadata:void 0,noteSidebar:!1,paletteInitialQuery:void 0,paletteMetadata:void 0,paletteType:void 0,sidebar:void 0,colorScheme:Pvt(),widescreen:B1()};function Pvt(){return typeof window=="undefined"||!window.matchMedia?go.LIGHT:window.matchMedia("(prefers-color-scheme: dark)").matches?go.DARK:go.LIGHT}const se=hs([],{name:"bangle/ui-slice-main",state:Aw}),QD=se.action(function(e){return se.tx(n=>se.update(n,r=>{let o=e===void 0?r.sidebar:e;return{sidebar:r.sidebar===o?void 0:o}}))}),e5=se.simpleAction("sidebar"),t5=se.action(function(){return se.tx(e=>se.update(e,()=>({sidebar:void 0})))}),Ovt=se.action(function(e,n){return se.tx(r=>se.update(r,()=>({paletteType:e,paletteInitialQuery:n})))}),ci=se.simpleAction("paletteType",(t,e)=>({paletteType:se.get(e).paletteType===t?void 0:t,paletteInitialQuery:void 0})),Ivt=se.action(function(){return se.tx(e=>se.update(e,()=>({paletteType:void 0,paletteInitialQuery:"",paletteMetadata:{}})))}),n5=se.action(function(){return se.tx(e=>se.update(e,n=>({colorScheme:n.colorScheme===go.DARK?go.LIGHT:go.DARK})))}),Rvt=se.simpleAction("colorScheme"),Mvt=se.simpleAction("widescreen"),l$=se.action(function(e){return se.tx(n=>se.update(n,()=>({dialogName:e.dialogName,dialogMetadata:e.metadata})))}),r5=se.simpleAction("dialogName",(t,e)=>{const n=se.get(e);return typeof t=="string"?t===n.dialogName?{dialogName:void 0,dialogMetadata:void 0}:n:{dialogName:void 0,dialogMetadata:void 0}}),GT=se.simpleAction("noteSidebar"),Dvt=se.simpleAction("changelogHasUpdates"),Lvt=se.action(function(){return se.tx(e=>se.update(e,n=>({noteSidebar:!n.noteSidebar})))});function jvt({title:t,description:e}){return l$({dialogName:a1,metadata:{title:t,description:e}})}const Fvt=ye(t=>{const e=r=>{const o=B1(r==null?void 0:r.width),s=se.get(t.state).widescreen;o!==s&&t.dispatch(Mvt(o))};e();const n=new AbortController;IX(e,n.signal),bn(t,()=>{n.abort()})}),Bvt=ye(t=>{const{widescreen:e}=se.track(t);OX(e)},{deferred:!1}),zvt=ye(t=>{const{colorScheme:e}=se.track(t);RX(e)},{deferred:!1}),qvt=[Fvt,Bvt,zvt],ZT=1,o5=MI(se,{dbKey:"nsmUiSlice",schema:te.object({sidebar:te.union([te.string(),te.undefined()]),colorScheme:fR,noteSidebar:te.boolean()}),serialize:t=>{const{sidebar:e,colorScheme:n,noteSidebar:r}=se.get(t);return{version:ZT,data:{sidebar:e===null?void 0:e,colorScheme:n,noteSidebar:r}}},deserialize:({version:t,data:e})=>t<ZT?Aw:{...Aw,...e}}),Wvt=ye(function(e){const r=A_(()=>{var a;const{mainEditors:i}=re.get(e.state);for(const l of i){if(!l)continue;const{editorId:c,wsPath:u}=ss(l.view.state);if(c==null)return;const d=(a=s$(c))==null?void 0:a.scrollTop;if(typeof d!="number")return;e.dispatch(_vt({editorId:c,scrollPosition:d,wsPath:u}))}},{wait:300,maxWait:600}),o={capture:!0,passive:!0},s=typeof window!="undefined";s&&window.addEventListener("scroll",r,o),bn(e,()=>{r.cancel(),s&&window.removeEventListener("scroll",r,o)})}),Vvt=ye(function(e){let n;const r=setInterval(()=>{if(n&&clearTimeout(n),!se.get(e.state).widescreen){const{editingAllowed:o}=re.get(e.state);o&&(n=setTimeout(()=>{e.dispatch($vt())},300))}},500);bn(e,()=>{n&&clearTimeout(n),clearInterval(r)})}),Uvt=ye(function(e){ue.track(e).isInactivePage;const{disableEditingCounter:n}=re.track(e),{widescreen:r}=se.track(e),{mainEditors:o,editingAllowed:s}=re.get(e.state);r||n===void 0||YD(o,i=>i.view.hasFocus())}),Hvt=ye(function(e){const{mainEditors:n}=re.track(e);for(const[r,o]of n.entries()){if(!o)continue;const s=o$(r,o);e.dispatch(XD(s))}}),Kvt=ye(function(e){const{mainEditors:n}=re.get(e.state),{isInactivePage:r}=ue.track(e);if(r)for(const o of n)o&&nX()(o.view.state,o.view.dispatch)}),Gvt=ye(function(e){const{searchQuery:n}=re.track(e);i$(e.state,r=>{a$.updateSearchQuery(y1,n)(r.view.state,r.view.dispatch)})}),Zvt=ye(function(e){ue.track(e).wsName,i$(e.state,n=>{a$.updateSearchQuery(y1,void 0)(n.view.state,n.view.dispatch)})}),Jvt=o1(()=>({focusedOnMount:!1})),Yvt=ye(function(e){var u;const{lastOpenedEditor:n}=re.track(e),{focusedEditorId:r,mainEditors:o}=re.get(e.state),{primaryWsPath:s,secondaryWsPath:i}=ue.get(e.state),a=Jvt(e);if(s==null&&i==null)return;const l=!!(!s||o[jn]),c=!!(!i||o[ri]);if(!(!l&&!c)){if(a.current.focusedOnMount){n==null||n.editor.focusView();return}l&&c&&(a.current.focusedOnMount=!0,typeof r=="number"?(u=o[r])==null||u.focusView():n==null||n.editor.focusView())}},{deferred:!1}),Xvt=[Wvt,Vvt,Uvt,Hvt,Kvt,Yvt,Gvt,Zvt],_f=()=>{const t=fe();return re.get(t.state)},Qvt=[],e0t=re.track.bind(re);function s5(t,e){t({name:hd,value:`tag:${e}`})}function c$(){const{focusedEditorId:t,primaryEditor:e}=et(re);return v.useMemo(()=>({focusedEditorId:t,primaryEditor:e}),[t,e])}const i5=t=>{fe().dispatch(Evt(t))};function $f(t){const e=fe();return wp(e.state,t)}function Ef(){const t=fe();return wp(t.state,jn)}function u$(){const t=fe();let e=re.get(t.state).focusedEditorId;if(typeof e=="number")return Fe.get(t.state).openedWsPaths.getByIndex2(e)}const a5=(...t)=>{fe().dispatch(kvt(...t))};function l5(){fe().dispatch(pg())}function d$(){const t=fe();bvt(t.state)}function Uu(t,e){const n=$f(t);if(!n)return!1;const r=n.view;return e(r.state,r.dispatch,r)}const t0t=Object.freeze(Object.defineProperty({__proto__:null,dispatchEditorCommand:Uu,editorManagerProxyEffects:Qvt,editorState:_f,focusEditorIfNotFocused:d$,getEditor:$f,getFocusedWsPath:u$,getPrimaryEditor:Ef,onFocusUpdate:a5,searchByTag:s5,searchPluginKey:y1,toggleEditing:l5,track:e0t,updateEditorSearchQuery:i5,useEditor:c$},Symbol.toStringTag,{value:"Module"})),n0t={notifications:[],editorIssues:[]},mt=hs([],{name:"notificationSliceKey",state:n0t}),c5=mt.action(function(e){return mt.tx(n=>mt.update(n,r=>{const{editorIssues:o}=r,s=o.filter(i=>i.uid!==e.uid&&i.wsPath!==e.wsPath);return s.push(e),{editorIssues:s}}))}),r0t=mt.action(function(e){return mt.tx(n=>mt.update(n,r=>{const{editorIssues:o}=r;return o.find(s=>s.uid===e)?{editorIssues:o.filter(s=>s.uid!==e)}:r}))}),_c=mt.action(function(e){return mt.tx(n=>mt.update(n,r=>{const{uid:o}=e;return r.notifications.find(s=>s.uid===o)?r:{notifications:[...r.notifications,e]}}))}),o0t=mt.action(function(){return mt.tx(e=>mt.update(e,{notifications:[]}))}),hg=mt.action(function(e){return mt.tx(n=>mt.update(n,r=>{const o=r.notifications.filter(s=>!e.includes(s.uid));return o.length!==r.notifications.length?{notifications:o}:r}))}),u5=mt.query(t=>e=>{const{editorIssues:n}=mt.get(e);return n.find(r=>r.wsPath===t)});function Qa(){return et(se)}const el=()=>{const t=fe();return se.get(t.state)},f$=()=>{fe().dispatch(t5())},cy=(...t)=>{fe().dispatch(ci(...t))},ba=(...t)=>{fe().dispatch(Ovt(...t))},d5=(...t)=>{fe().dispatch(Ivt(...t))},f5=(...t)=>{fe().dispatch(e5(...t))},p5=(...t)=>{fe().dispatch(QD(...t))},h5=(...t)=>{fe().dispatch(Lvt(...t))},m5=(...t)=>{fe().dispatch(n5(...t))},_n=(...t)=>{fe().dispatch(l$(...t))},g5=(...t)=>{fe().dispatch(Dvt(...t))},wr=(...t)=>{fe().dispatch(r5(...t))},ke=(...t)=>{fe().dispatch(_c(...t))},s0t=(...t)=>{fe().dispatch(o0t(...t))},y5=(...t)=>{fe().dispatch(c5(...t))},b5=(...t)=>{fe().dispatch(r0t(...t))},i0t=t=>{const e=fe();return u5(e.state,t)},a0t=Object.freeze(Object.defineProperty({__proto__:null,changeSidebar:f5,clearAllNotifications:s0t,clearEditorIssue:b5,closeSidebar:f$,dismissDialog:wr,getEditorIssue:i0t,resetPalette:d5,setEditorIssue:y5,showDialog:_n,showNotification:ke,toggleColorSchema:m5,toggleNoteSidebar:h5,togglePalette:cy,toggleSideBar:p5,uiState:el,updateChangelogHasUpdates:g5,updatePalette:ba,useUi:Qa},Symbol.toStringTag,{value:"Module"})),pv=Object.create(null);function l0t(t){return t in pv?t+"$"+ ++pv[t]:(pv[t]=0,t+"$")}class c0t{constructor(e){M(this,"key");this.spec=e,this.key=e.key?e.key.key:l0t("slice")}getSliceState(e){return e.getSliceState(this.key)}}const JT=Symbol();class Tt{constructor(e,n){M(this,"name");M(this,"editor");M(this,"application");M(this,"themes");if(n!==JT)throw new Error("Instantiate class via `Extension.create({})`");this.name=e.name,this.editor=e.editor,this.application=e.application,this.themes=e.themes}static create(e){var _;const{name:n}=e;if(!n)throw new Error("Extension: name is required");if(!/^[a-z0-9-_@/\.]+$/.test(n))throw new Error(`Extension "${n}": Extension's name can oly have the following characters "a..z" "0..9" "@" "." "-" and "_"`);const r=e.editor?Object.assign({},e.editor,{name:n}):void 0,o=e.application?Object.assign({},e.application,{name:n}):void 0,s=(_=e.themes)==null?void 0:_.map(C=>({...C,ownerExtension:n}));if(s){if(new Set(s.map(C=>C.name)).size!==s.length)throw new Error("Theme: names must be unique");for(const C of s){if(!C.name)throw new Error("Theme: name is required");if(!C.url)throw new Error("Theme: url is required");if(typeof C.url!="string")throw new Error('Theme: url must be of "string" type')}}const{specs:i,plugins:a,highPriorityPlugins:l,markdownItPlugins:c,renderReactNodeView:u}=r!=null?r:{};if(i&&!Array.isArray(i))throw new Error(`Extension "${n}": specs must be an array`);if(a&&!Array.isArray(a))throw new Error(`Extension "${n}": plugins must be an array`);if(l&&!Array.isArray(l))throw new Error(`Extension "${n}": highPriorityPlugins must be an array`);if(c&&!Array.isArray(c))throw new Error(`Extension "${n}": markdownItPlugins must be an array`);if(u&&Object.values(u).some(C=>typeof C!="function"))throw new Error(`Extension "${n}": renderReactNodeView must be an Object<string, function> where the function returns a react element`);const{operations:d,sidebars:f,dialogs:p,noteSidebarWidgets:h,slices:y,nsmSlices:g,nsmEffects:b,operationHandler:w,storageProvider:x,noteFormatProvider:k,onStorageError:S}=o!=null?o:{};if(w&&!d)throw new Error(`Extension "${n}": operationHandler is required when defining operations`);if(d){if(!d.every(C=>Tu("operation",C.name)&&Au(n,C.name)))throw new Error(`Extension "${n}": An operation must have a name with the following schema operation::<extension_pkg_name:xyz. For example 'operation::@bangle.io/example:hello-world'`);if(d.length!==new Set(d.map(C=>C.name)).size)throw new Error(`Extension "${n}": Operation name must be unique`)}if(f){if(!Array.isArray(f))throw new Error(`Extension "${n}": sidebars must be an array`);if(!f.every(C=>{const $=Tu("sidebar",C.name)&&Au(n,C.name),T=!!C.activitybarIcon,A=!!C.ReactComponent,N=typeof C.hint=="string";return $&&T&&T&&A&&N}))throw new Error(`Extension "${n}": Invalid sidebars config.`)}if(y&&!y.every(C=>C instanceof c0t&&Tu("slice",C.key)&&Au(n,C.key)))throw new Error(`Extension "${n}": invalid slice. Slice key must be prefixed with extension name followed by a semicolon (:). For example, "new SliceKey('slice::my-extension-name:xyz')"`);if(g&&!g.every(C=>jz(C)&&C.name.startsWith(`slice::${YT(n)}:`)))throw new Error(`Extension "${n}": invalid slice name. Must start with ${`slice::${YT(n)}:`}`);if(b&&!b.every(C=>typeof C=="function"))throw new Error(`Extension "${n}": invalid slice effect.`);if(h&&!h.every(C=>Tu("note-sidebar-widget",C.name)&&Au(n,C.name)))throw new Error(`Extension "${n}": Invalid note sidebar widget name. Example: "note-sidebar-widget::my-extension-name:xyz"`);if(p&&!p.every(C=>Tu("dialog",C.name)&&Au(n,C.name)))throw new Error(`Extension "${n}" : Invalid dialog name. Example: "dialog::my-extension-name:xyz"`);if(k){if(typeof k.name!="string")throw new Error("Extension: noteFormatProvider must have a valid name");if(typeof k.description!="string")throw new Error("Extension: noteFormatProvider must have a description name");if(typeof k.parseNote!="function"||typeof k.serializeNote!="function")throw new Error("Extension: noteFormatProvider must have parseNote and serializeNote functions")}if(x){if(typeof x.name!="string")throw new Error("Extension: Storage provider must have a valid name");if(typeof x.description!="string")throw new Error("Extension: Storage provider must have a valid description");if(typeof S!="function")throw new Error("Extension: onStorageError must be defined when storage provider is defined")}return new Tt({name:n,editor:r,application:o,themes:s},JT)}}function Tu(t,e){return t===v5(e).scheme}function Au(t,e){return t===v5(e).pkgName}function YT(t){return t.replace("@bangle.io/","")}function v5(t){if(t.includes("?"))throw new Error("Cannot have ? in the slug");const[e,n]=t.split("::"),[r,o]=(n==null?void 0:n.split(":"))||[];return{scheme:e,pkgName:r,path:o}}var w5={exports:{}},xp={};/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u0t=v,x5=60103;xp.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var XT=Symbol.for;x5=XT("react.element"),xp.Fragment=XT("react.fragment")}var d0t=u0t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,f0t=Object.prototype.hasOwnProperty,p0t={key:!0,ref:!0,__self:!0,__source:!0};function k5(t,e,n){var r,o={},s=null,i=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(i=e.ref);for(r in e)f0t.call(e,r)&&!p0t.hasOwnProperty(r)&&(o[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)o[r]===void 0&&(o[r]=e[r]);return{$$typeof:x5,type:t,key:s,ref:i,props:o,_owner:d0t.current}}xp.jsx=k5;xp.jsxs=k5;w5.exports=xp;var m=w5.exports;function qt(t,e,n=!0){let r=t.filter(o=>!!o[e]);return n?r.flatMap(o=>o[e]):r.map(o=>o[e])}class _5{constructor(e=[],n=[]){M(this,"specRegistry");M(this,"markdownItPlugins");M(this,"renderExtensionEditorComponents",()=>this._editorConfig.map(n=>{const{ReactComponent:r}=n;if(r)return m.jsx(r,{},n.name)}).filter(n=>!!n));M(this,"renderApplicationComponents",()=>this._extensions.map(n=>{var o;const{ReactComponent:r}=(o=n.application)!=null?o:{};if(r)return m.jsx(r,{},n.name)}).filter(n=>!!n));M(this,"registerSerialOperationHandler",e=>(this._serialOperationHandlers.add(e),()=>{this._serialOperationHandlers.delete(e)}));M(this,"_dialogs");M(this,"_editorConfig");M(this,"_editorWatchPluginStates");M(this,"_noteFormatProviders");M(this,"_noteSidebarWidgets");M(this,"_nsmEffects");M(this,"_nsmSlices");M(this,"_onStorageErrorHandlers");M(this,"_operationHandlers");M(this,"_operationKeybindingMapping");M(this,"_registeredSerialOperations");M(this,"_renderReactNodeViewLookup");M(this,"_serialOperationHandlers");M(this,"_sidebars");M(this,"_slices");M(this,"_storageProviders");M(this,"_themes");this._extensions=e,this._validate(),this._editorConfig=e.map(s=>s.editor).filter(s=>!!s),this.specRegistry=new ep([...qt(this._editorConfig,"specs")]),this.markdownItPlugins=[...n,...qt(this._editorConfig,"markdownItPlugins")],this._renderReactNodeViewLookup=Object.fromEntries(qt(this._editorConfig,"renderReactNodeView",!1).flatMap(s=>Object.entries(s))),this._themes=qt(e,"themes",!0);const r=e.map(s=>s.application).filter(s=>!!s);this._serialOperationHandlers=new Set,this._editorWatchPluginStates=qt(this._editorConfig,"watchPluginStates"),this._registeredSerialOperations=qt(r,"operations"),this._sidebars=qt(r,"sidebars"),Nu(this._sidebars,"sidebars"),this._dialogs=qt(r,"dialogs"),Nu(this._dialogs,"dialogs"),this._noteSidebarWidgets=qt(r,"noteSidebarWidgets"),Nu(this._noteSidebarWidgets,"noteSidebarWidgets"),this._slices=qt(r,"slices"),this._nsmSlices=qt(r,"nsmSlices"),this._nsmEffects=qt(r,"nsmEffects"),this._operationHandlers=e.map(s=>{var i;return(i=s.application)==null?void 0:i.operationHandler}).filter(s=>s!=null),this._operationKeybindingMapping=this._getSerialOperationKeybindingMapping();const o=qt(r,"storageProvider");Nu(o,"storageProviders"),this._storageProviders=Object.fromEntries(o.map(s=>[s.name,s])),this._noteFormatProviders=Object.fromEntries(qt(r,"noteFormatProvider").map(s=>[s.name,s])),this._onStorageErrorHandlers=Object.fromEntries(r.filter(s=>!!s.storageProvider&&!!s.onStorageError).map(s=>[s.storageProvider.name,s.onStorageError]))}getAllStorageProviders(){return Object.values(this._storageProviders)}getDialog(e){return this._dialogs.find(n=>n.name===e)}getEditorWatchPluginStates(){return this._editorWatchPluginStates}getNoteFormatProvider(e){return this._noteFormatProviders[e]}getNoteSidebarWidgets(){return this._noteSidebarWidgets}getNsmEffects(){return this._nsmEffects}getNsmSlices(){return this._nsmSlices}getOnStorageErrorHandlers(e){return this._onStorageErrorHandlers[e]}getOperationHandlers(){return this._operationHandlers}getPlugins(){return[...qt(this._editorConfig,"highPriorityPlugins"),...qt(this._editorConfig,"plugins")]}getRegisteredOperationKeybinding(e){var n;return(n=this._registeredSerialOperations.find(r=>r.name===e))==null?void 0:n.keybinding}getRegisteredOperations(){return this._registeredSerialOperations}getSerialOperationHandlers(){return this._serialOperationHandlers}getSerialOperationKeybindingMapping(){return this._operationKeybindingMapping}getSidebars(){return this._sidebars}getSlices(){return this._slices}getStorageProvider(e){return this._storageProviders[e]}getThemes(){return this._themes}isExtensionDefined(e){return this._extensions.some(n=>n.name===e)}renderReactNodeViews({nodeViewRenderArg:e}){var n,r;return(r=(n=this._renderReactNodeViewLookup)[e.node.type.name])==null?void 0:r.call(n,{nodeViewRenderArg:e})}_getSerialOperationKeybindingMapping(){const e=this.getRegisteredOperations().filter(n=>typeof n.keybinding=="string").map(n=>[n.name,n.keybinding]);return Object.fromEntries(e)}_validate(){Nu(this._extensions,"extensions")}}function Nu(t,e){if(new Set(t.map(n=>n.name)).size!==t.length)throw new Error(`In "${e}" there is an existing entity with same name.`)}const $5=new _5([],[]),ls=hs([],{name:"nsm-extension-registry",state:{extensionRegistry:$5}}),h0t=ye(function(e){const{extensionRegistry:n}=ls.get(e.state);if(n===$5)throw new Error("ExtensionRegistry not set in store")}),m0t=[h0t];P.createContext(void 0);function vs(){const{extensionRegistry:t}=et(ls);return t}function g0t(t,e){return Cn.fromJSON(e.specRegistry.schema,{type:"doc",content:[{type:"heading",attrs:{level:1},content:[{type:"text",text:$t(he(t).fileName)}]},{type:"paragraph",content:[{type:"text",text:"Hello world!"}]}]})}function vn(){return et(Fe)}function uy(t){return Fe.track(t).wsName}function p$(t){return ue.track(t).lifeCycleState}const y0t=Qc(t=>{const e=Fe.get(t),{isInactivePage:n}=ue.get(t);return{...e,isInactivePage:n}}),St=()=>{const t=fe();return y0t(t.state)},h$=t=>{const e=fe(),{extensionRegistry:n}=ls.get(e.state);return PD(t,n)},m$=async(t,e={})=>{const n=fe(),{extensionRegistry:r}=ls.get(n.state);if(await h$(t))throw new ge({message:`Cannot create. Note "${tt(t).fileName}" already exists.`});if(await ND(t,r,e.doc||g0t(t,r)),e.open)return y$(t,e.open)},E5=async(t,e)=>{const n=fe(),{openedWsPaths:r,noteWsPaths:o}=Fe.get(n.state);if(o!=null&&o.includes(e))throw new ge({message:`Cannot rename. Note "${tt(e).fileName}" already exists.`});n.dispatch(GD(t)),await cbt(t,e),n.dispatch(ur(r.updateIfFound(t,e)))},g$=t=>(fe().dispatch(GD(t)),ubt(t)),b0t=async(t,e)=>{const n=fe(),{extensionRegistry:r}=ls.get(n.state);await ID(t,r,e)},S5=async(...t)=>{await RD(...t)},C5=async(...t)=>await e$(...t);async function v0t(t,e){const n=fe(),{extensionRegistry:r}=ls.get(n.state),o=Y_(e,r.specRegistry,r.markdownItPlugins);await ID(t,r,o)}async function w0t(t,e){const n=fe(),{extensionRegistry:r}=ls.get(n.state),o=Y_(e,r.specRegistry,r.markdownItPlugins);await ND(t,r,o)}const y$=(t,e="primary")=>{if(e==="primary"||e===!0)return tl(t);if(e==="secondary")return Ba(t);if(e==="newTab")return kp(t);if(e){let n=e;throw new Error(`Invalid openType: ${n}`)}else return},tl=t=>{fe().dispatch(ovt(t))},Ba=t=>{fe().dispatch(svt(t))},T5=({wsName:t,type:e="replace"})=>{const n=fe();if(e==="newTab"&&typeof window!="undefined"){window.open(oy(t));return}n.dispatch(ou({wsName:t,replace:e==="replace"}))},x0t=t=>{fe().dispatch(fg({invalidWsName:t,replace:!0}))},kp=t=>{ivt(t)},Ks=t=>{fe().dispatch(ur(t))},Nw=t=>{const e=fe(),n=ur(r=>typeof t=="number"?r.updateByIndex(t,void 0).optimizeSpace():r.closeAll());e.dispatch(n)},dy=()=>{fe().dispatch(iy(),{debugInfo:"refresh-nsm-api"})},k0t=Object.freeze(Object.defineProperty({__proto__:null,closeEditor:Nw,createNote:m$,createNoteFromMd:w0t,deleteNote:g$,getNote:h$,goToInvalidWorkspacePage:x0t,goToWorkspace:T5,goToWorkspaceAuthRoute:r$,openWsPathInNewTab:kp,pushOpenedWsPath:Ks,pushPrimaryWsPath:tl,pushSecondaryWsPath:Ba,pushWsPath:y$,readFile:C5,readWorkspaceInfo:n$,refresh:dy,renameNote:E5,trackPageLifeCycleState:p$,trackWorkspaceName:uy,useWorkspace:vn,workspaceState:St,writeFile:S5,writeNote:b0t,writeNoteFromMd:v0t},Symbol.toStringTag,{value:"Module"})),_0t=Object.freeze(Object.defineProperty({__proto__:null,editor:t0t,ui:a0t,workspace:k0t},Symbol.toStringTag,{value:"Module"}));let $0t=console.debug.bind(console,"SerialOperationCotext");const A5=v.createContext({dispatchSerialOperation:()=>{}});function E0t({children:t}){const e=vs(),n=v.useMemo(()=>new Set(e.getRegisteredOperations().map(i=>i.name)),[e]),[r]=v.useState(()=>e.getOperationHandlers().map(i=>i())),o=v.useCallback(i=>{var u,d;const{name:a,value:l,...c}=i;if($0t(a,l),(d=(u=window.Sentry)==null?void 0:u.addBreadcrumb)==null||d.call(u,{type:"operation",message:a,timestamp:Date.now()}),!a)throw new Error("Operation must have a name");if(!n.has(a))throw new Error("Unknown operation "+a);if(Object.keys(c).length>0)throw new Error("Unknown keys in operation : "+Object.keys(c).join(","));for(const f of r)if(f.handle({name:a,value:l},l))return;for(const f of Array.from(e.getSerialOperationHandlers()))f(i)},[e,n,r]),s=v.useMemo(()=>({dispatchSerialOperation:o}),[o]);return CM(()=>{const i=e.getRegisteredOperations();return Object.fromEntries(i.filter(l=>l.keybinding).map(l=>[l.keybinding,()=>{const{dialogName:c}=el();return c?console.debug("Ignoring keybinding",l.name,l.keybinding):o({name:l.name}),!0}]))},[e,o]),m.jsx(A5.Provider,{value:s,children:t})}function zt(){return v.useContext(A5)}function N5(t,e){const n=vs(),r=v.useCallback(t,e);v.useEffect(()=>{const o=n.registerSerialOperationHandler(r);return()=>{o()}},[r,n])}function b$(t,e,n=[]){const r=t.constructor();for(let o in t){const s=t[o],i=[...n,o];typeof s=="string"||typeof s=="number"||s==null?r[o]=e(s,i):typeof s=="object"&&!Array.isArray(s)?r[o]=b$(s,e,i):console.warn(`Skipping invalid key "${i.join(".")}". Should be a string, number, null or object. Received: "${Array.isArray(s)?"Array":typeof s}"`)}return r}const S0t={theme:"",uid:"",misc:{activitybarWidth:"",miniEditorWidth:"",noteSidebarWidth:"",noteTagsBg:"",noteTagsText:"",pageMaxWidth:"",pagePadding:"",workspaceSidebarWidth:"",activitybarBg:"",activitybarBtnBgPress:"",activitybarText:"",editorAttentionBg:"",editorBacklinkBg:"",editorBacklinkBgHover:"",editorBacklinkText:"",editorBg:"",editorCodeBg:"",kbdBg:"",kbdText:"",linkText:"",searchHighlightBg:""},border:{radius:{DEFAULT:"",none:"",sm:"",md:"",lg:"",xl:""},width:{DEFAULT:"",none:"",lg:"",md:""}},widescreenWidth:"",color:{neutral:{bgLayerTop:"",bgLayerMiddle:"",bgLayerBottom:"",bgLayerFloat:"",textDisabled:"",textSubdued:"",text:"",textStrong:"",textInverted:"",textFieldBg:"",textFieldText:"",textFieldBorder:"",...dl()},secondary:dl(),promote:dl(),caution:dl(),critical:dl(),positive:dl()},ringWidth:{DEFAULT:"",none:""},size:{xs:"",sm:"",md:"",lg:"",xl:"","2xl":"","3xl":"","4xl":"","5xl":"","6xl":"","7xl":"",prose:""},space:{0:"","0_5":"",1:"","1_5":"",2:"","2_5":"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",10:"",11:"",12:"",14:"",16:"",20:"",24:"",48:"",64:"",72:"",80:"",96:"",px:""},typography:{fontFamily:{sans:"",serif:"",mono:""},text:{xl:{height:"",size:""},lg:{height:"",size:""},base:{height:"",size:""},sm:{height:"",size:""},xs:{height:"",size:""},"2xl":{height:"",size:""},"3xl":{height:"",size:""}}}};function dl(){return{iconDisabled:"",iconSubdued:"",icon:"",solid:"",solidText:"",solidStrong:"",solidStronger:"",solidSubdued:"",solidFaint:"",borderSubdued:"",border:"",borderStrong:""}}const P5={...S0t},I=b$(P5,(t,e)=>`var(${O5(e)})`);b$(P5,(t,e)=>O5(e));function O5(t){var n;const e=[(n=t[0])!=null?n:"",...t.slice(1).map(r=>C0t(r))].join("");if(/^[a-zA-Z0-9_-]*$/g.test(e))return`--BV-${e}`;throw new Error(`Invalid id ${e}`)}function C0t(t){var e;return((e=t[0])==null?void 0:e.toLocaleUpperCase())+t.slice(1)}function qh(t){return fe()}const T0t="popstate",v$="pushState",mg="replaceState",QT=[T0t,v$,mg];if(typeof window!="undefined"&&typeof window.history!="undefined"){const t=window.history;for(const e of[v$,mg]){const n=t[e];t[e]=function(){const r=n.apply(this,arguments),o=new Event(e);return o.arguments=arguments,dispatchEvent(o),r}}}function w$(t,e){var o;if((o=t.search)!=null&&o.startsWith("?"))throw new Error("Location search cannot start with ?");const n=typeof t.pathname=="string"?t.pathname:e.pathname,r=typeof t.search=="string"?t.search:e.search;return n+(r?"?"+r:"")}class I5{constructor(e="",n){M(this,"_checkForUpdates",()=>{const e=eA(this._base);P0t(e,this._currentLoc)||(this._currentLoc=e,this._onChange(e)),this.refreshHistoryState()});M(this,"_currentLoc");M(this,"_historyCounter",0);M(this,"_historyState");M(this,"_host",typeof window!="undefined"?window:void 0);this._base=e,this._onChange=n,QT.forEach(r=>{var o;return(o=this._host)==null?void 0:o.addEventListener(r,this._checkForUpdates)}),this._currentLoc=eA(this._base)}get pathname(){return this._currentLoc.pathname}get search(){return this._currentLoc.search}destroy(){QT.forEach(e=>{var n;return(n=this._host)==null?void 0:n.removeEventListener(e,this._checkForUpdates)})}navigate(e,{replace:n=!1}={}){setTimeout(()=>{window.history[n?mg:v$](this._createHistoryState(),"",this._base+e)},0)}refreshHistoryState(){window.history.state==null&&this._historyState&&this.updateHistoryState(this._historyState)}updateHistoryState(e){this._historyState=e,setTimeout(()=>{const n=w$({pathname:this.pathname,search:this.search},this);window.history[mg](this._createHistoryState(),"",this._base+n)},0)}_createHistoryState(){return{key:this._historyCounter++,value:this._historyState||null}}}const A0t=()=>R5().pathname,N0t=(t,e=A0t())=>e.slice(t.length)||"/",R5=()=>{if(typeof window!="undefined")return window.location;throw new Error("Expected to be run in window")},eA=t=>{const e=N0t(t);let n=R5().search;return n.startsWith("?")&&(n=n.slice(1)),{pathname:e,search:n}},P0t=(t,e)=>t.pathname===e.pathname&&t.search===e.search,O0t={history:void 0},_p=hs([],{name:"history-slice",state:O0t}),I0t=_p.simpleAction("history"),R0t=ye(function(e){const{pendingNavigation:n}=ue.track(e),{history:r}=_p.track(e);if(!(!r||!n))if(n.preserve)r.navigate(w$(n.location,r),{replace:n.replaceHistory});else{let o=n.location.pathname||"";n.location.search&&(o+="?"+n.location.search),r.navigate(o,{replace:n.replaceHistory})}},{deferred:!1}),M0t=ye(function(e){const n=new I5("",r=>{e.dispatch(UT(r))});e.dispatch(I0t(n)),e.dispatch(UT({search:n.search,pathname:n.pathname})),bn(e,()=>{n.destroy()})}),D0t=ye(function(e){const{wsName:n}=ue.track(e),{history:r}=_p.get(e.state);let o=!1;n&&Zn(n).then(s=>{!s||o||!r||!(r instanceof I5)||(s.type===Je.NativeFS?r.updateHistoryState({workspaceRootDir:s.metadata.rootDirHandle}):r.updateHistoryState({}))}),bn(e,()=>{o=!0})}),L0t=[R0t,M0t,D0t];Xc();const j0t=ye(function(e){const{wsName:n}=ue.track(e);n&&x$.save(n)}),F0t=ye(function(e){const{location:n}=ue.track(e);n.pathname===oy(Br)&&e.dispatch(Xa({location:VD(n,Br,ia.createEmpty().updatePrimaryWsPath(Gi))}))}),B0t=ye(function(e){const{wsName:n,rawPrimaryWsPath:r,primaryWsPath:o}=ue.track(e);n&&typeof r=="string"&&o!==r&&e.dispatch(fg({invalidWsName:n,replace:!0}))}),z0t=[j0t,F0t,B0t],hv="workspace-context/last-workspace-used",x$={save:t=>{typeof window!="undefined"&&window.localStorage.setItem(hv,t)},clear(){typeof window!="undefined"&&window.localStorage.removeItem(hv)},get:()=>{if(typeof window=="undefined")return;const t=window.localStorage.getItem(hv);if(t&&typeof t=="string")return t}};async function va(t){const e=await t.arrayBuffer(),n=new Uint8Array(e),o=new TextEncoder().encode(`blob ${n.length}\0`),s=new Uint8Array(o.length+n.length);if(s.set(o),s.set(n,o.length),typeof globalThis!="undefined"&&globalThis.crypto&&globalThis.crypto.subtle){const i=await globalThis.crypto.subtle.digest("SHA-1",s);return Array.from(new Uint8Array(i)).map(a=>a.toString(16).padStart(2,"0")).join("")}else if(typeof require!="undefined"){const a=require("crypto").createHash("sha1");return a.update(s),a.digest("hex")}else throw new Error("Unsupported environment")}const q0t=Qc(va);async function W0t(t){if(typeof globalThis!="undefined"&&"Blob"in globalThis&&t instanceof Blob){const e=await t.arrayBuffer(),n=new Uint8Array(e);let r="";for(let o=0;o<n.length;o++)r+=String.fromCharCode(n[o]);return btoa(r)}else if(typeof Buffer!="undefined"){const e=await t.arrayBuffer();return Buffer.from(e).toString("base64")}else throw new Error("Unsupported environment: Unable to convert blob to base64 string")}const V0t="nsm-slice-file-sha";function U0t(t){return{wsPath:t,pendingWrite:!1,sha:void 0,currentDiskSha:void 0,lastKnownDiskSha:void 0,currentDiskShaTimestamp:void 0}}const H0t={openedFiles:{}},jt=hs([],{name:V0t,state:H0t}),K0t=jt.action(function({removals:e,additions:n}){return jt.tx(r=>jt.update(r,o=>{if(e.length===0&&n.length===0)return o;const s={...o.openedFiles};return e.forEach(i=>{delete s[i]}),n.forEach(i=>{s[i]={...U0t(i),wsPath:i,pendingWrite:!1}}),{openedFiles:s}}))}),k$=jt.action(function({wsPath:e,info:n}){return jt.tx(r=>jt.update(r,o=>{const{openedFiles:s}=o,i=s[e];if(!i)return o;const a={...i,...n};return{openedFiles:{...s,[e]:a}}}))});jt.action(function({data:e}){return jt.tx(n=>jt.update(n,r=>{const{openedFiles:o}=r;if(e.length===0)return r;const s={...o};for(const{wsPath:i,...a}of e){const l=s[i];l&&(s[i]={...l,...a,currentDiskShaTimestamp:Date.now()})}return{openedFiles:s}}))});const M5=console.debug.bind(console,"[slice-workspace-opened-doc-info] "),_$=o1(()=>({pendingRun:!1})),D5=ms({deferred:!0})(function(){return async e=>{const n=_$(e);if(n.current.pendingRun)return;const{openedFiles:r}=jt.get(e.state),o=Object.values(r);if(o.length===0)return;let s=!1;bn(e,()=>{s=!0}),await Promise.all(o.map(async i=>{if(s)return;const a=await j5(i.wsPath);n.current.pendingRun=!1,a!==i.currentDiskSha&&a&&(M5("[calculateCurrentDiskShaEffect] updateCurrentDiskSha",i.wsPath),queueMicrotask(()=>{e.dispatch(k$({wsPath:i.wsPath,info:{currentDiskSha:a}}))}))}))}}),G0t=ye(function(e){const{openedWsPaths:n}=Fe.track(e),{openedFiles:r}=jt.get(e.state);let o=[],s=[];if(Object.entries(r).forEach(([i,a])=>{!n.has(i)&&!a.pendingWrite&&s.push(i)}),n.getWsPaths().forEach(i=>{r[i]||o.push(i)}),o.length>0||s.length>0){e.dispatch(K0t({additions:o,removals:s}));return}}),Z0t=ye(function(e){const{openedFiles:n}=jt.track(e);L5(Object.values(n))&&e.dispatch(UD(!0))},{deferred:!1}),J0t=ye(function(e){const{openedFiles:n}=jt.track(e);L5(Object.values(n))||e.dispatch(UD(!1))}),Y0t=ye(function(e){jt.track(e).openedFiles,!_$(e).current.pendingRun&&e.dispatch(D5())}),X0t=ye(function(e){const n=setInterval(()=>{_$(e).current.pendingRun||e.dispatch(D5())},hR);bn(e,()=>{clearInterval(n)})}),Q0t=ye(function(e){const{openedFiles:n}=jt.track(e),r=Object.values(n);let o=!1;bn(e,()=>{o=!0}),r.forEach(s=>{s.lastKnownDiskSha||j5(s.wsPath).then(i=>{o||i&&queueMicrotask(()=>{M5("[calculateLastKnownDiskShaEffect] updateLastKnownDiskSha",s.wsPath),e.dispatch(k$({wsPath:s.wsPath,info:{lastKnownDiskSha:i}}))})})})});function L5(t){return t.some(e=>e.pendingWrite)}async function j5(t){const e=await e$(He(t));if(e)return q0t(e)}const ewt=[G0t,Z0t,J0t,Y0t,X0t,Q0t];function twt(t){return{replicaWorkspaceUpdateFileShaEntry:async n=>{t.dispatch(k$(n),{debugInfo:"naukarReplicaSlicesDispatch.replicaWorkspaceUpdateFileShaEntry"})},refreshWorkspace:async()=>{t.dispatch(iy(),{debugInfo:"naukarReplicaSlicesDispatch.refreshWorkspace"})}}}function nwt(t=10){return Math.random().toString(36).substring(2,15).slice(0,t)}let rwt=0;const owt=nwt(4);class swt extends WeakMap{get(e){let n=super.get(e);return n||(n=(rwt++).toString()+"-"+owt,this.set(e,n),n)}}const iwt=new swt;function awt(t){return iwt.get(t)}function lwt(t){if(t.aborted)throw new DOMException("AbortError","AbortError")}const cwt="ABORTABLE_SERVICE_ABORTED$_0.39574939029022294%";function uwt(t,{abortableMethodIdentifier:e="abortable"}={}){return new Proxy(t,{get(n,r){const o=Reflect.get(n,r);return typeof r=="string"&&r.startsWith(e)&&typeof o=="function"?(s,...i)=>{if(!(s instanceof AbortSignal))throw new Error(`An abortable methods (${r}) first param must be an "AbortSignal"`);lwt(s);const a=r+awt(s);return s.addEventListener("abort",()=>{console.debug("aborting "+a),n.__signalWorkerToAbortMethod(a)},{once:!0}),Reflect.apply(o,null,[a,...i]).catch(l=>{throw l===cwt?new DOMException("Aborted","AbortError"):l})}:o}})}function $p(t,e){const n=[];return{proxy:new Proxy({},{get:(s,i,a)=>{if(t.current){const l=Reflect.get(e(),i,a);return typeof l!="function"&&console.warn(`Proxying on a non-callable ${i} is not supported`),l}return function(...l){return new Promise((c,u)=>{const d=()=>{const f=Reflect.get(e(),i,a);try{c(Reflect.apply(f,this===a?e():this,l))}catch(p){u(p)}};t.current?d():n.push(d)})}}}),check:()=>{if(!t.current)return;let s=n.length;for(let i=0;i<s&&t.current;i++){const a=n.shift();a==null||a()}}}}const nl={current:void 0},rl=[];let ol={current:!1};const F5=$p(ol,()=>{var t;return(t=nl.current)==null?void 0:t.editor});rl.push(F5.check);const B5=$p(ol,()=>{var t;return(t=nl.current)==null?void 0:t.test});rl.push(B5.check);const z5=$p(ol,()=>{var t;return(t=nl.current)==null?void 0:t.workspace});rl.push(z5.check);const q5=$p(ol,()=>{var t;return(t=nl.current)==null?void 0:t.abortable});rl.push(q5.check);const W5=$p(ol,()=>{var t;return(t=nl.current)==null?void 0:t.replicaSlices});rl.push(W5.check);if(rl.length!==5)throw new Error("Incorrect number of checks");function dwt(t){nl.current=t,ol.current=!0,rl.forEach(e=>e())}function V5(){nl.current=void 0,ol.current=!1}const Pr={editor:F5.proxy,test:B5.proxy,workspace:z5.proxy,abortable:uwt(q5.proxy),replicaSlices:W5.proxy};gk.set("BaseError",{canHandle:t=>t instanceof ge,serialize:t=>[t.toJsonValue(),[]],deserialize:t=>ge.fromJsonValue(t)});Xc();Xc();function fwt(){if(ZY)return console.debug("BANGLE_HOT is on, disabling worker"),!1;let t=!1;const e={get type(){return t=!0,"module"}};try{wM?new Worker("data:,",e).terminate():new Worker("data:",e).terminate()}catch(n){t=!1}return t}const pwt=fwt();Xc();async function hwt(t){console.log("Initializing naukar.... t=",performance.now());const e=await mwt(pwt);return t.addEventListener("abort",()=>{var n;(n=e.terminate)==null||n.call(e)},{once:!0}),e.naukar}async function mwt(t){if(t){const e=await _a(()=>import("./wrap-worker-naukar-d6340d0c.js"),[]);return{naukar:e.wrapper,terminate:e.terminate}}else{const{default:e}=await _a(()=>import("./naukar-init-2053d90a.js"),["assets/naukar-init-2053d90a.js","assets/hub-a01f0c8e.js"]);return{naukar:e}}}Xc();function gwt(t,e){const{dom:n}=yK(t,e);let o=`<meta charset="utf-8">${n.innerHTML}`;ywt(t,o)}function ywt(t,e){function n(s){return s.openStart===0&&s.openEnd===0&&s.content.childCount===1?s.content.firstChild:null}function r(s,i,a,l){let c=gK(s,i||"",a,s.shiftKey,s.state.selection.$from);if(s.someProp("handlePaste",f=>f(s,l,c||H.empty))||!c)return;let u=n(c),d=u?s.state.tr.replaceSelectionWith(u,s.shiftKey):s.state.tr.replaceSelection(c);s.dispatch(d.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste"))}const o=bwt("paste");r(t,null,e,o)}const bwt=(t,e={})=>{let n;return e.bubbles===void 0&&(e.bubbles=!0),e.cancelable===void 0&&(e.cancelable=!0),e.composed===void 0&&(e.composed=!0),n=new Event(t,e),n},uh=()=>fe();let Pw={nsmApi2:_0t,config:mr,constants:xW,sliceManualPaste:gwt,EditorSlice:H,getEditorPluginMetadata:ss,getNsmStore:uh,getPageSliceState:()=>ue.get(uh().state),getOpenedWsPaths:()=>Fe.get(uh().state).openedWsPaths,getEditorDetailsById:t=>{const e=wp(uh().state,t);if(!e)return;const n=ss(e.view.state);return{editor:e,wsPath:n.wsPath}},testRequestDeleteCollabInstance:async t=>{await Pr.test.requestDeleteCollabInstance(t)},e2eHealthCheck:async()=>(dh(await Pr.test.status(),"naukarProxy.status failed"),dh(await Pr.test.handlesBaseError(new ge({message:"test"}))instanceof ge,"naukarProxy.test.handlesBaseError failed"),dh(await Pr.test.isWorkerEnv(),"naukarProxy.test.isWorkerEnv failed"),dh(await Pr.test.status(),"naukarProxy.status failed"),!0)};typeof window!="undefined"&&(window._nsmE2e=Pw);const vwt=ye(function(e){const{primaryEditor:n}=re.track(e),{secondaryEditor:r}=re.track(e);Pw.primaryEditor=n,Pw.secondaryEditor=r},{deferred:!1}),wwt=ye(function(){}),xwt=[vwt,wwt];function dh(t,e){if(!t)throw new Error(e||"assertion failed")}/*!
 Copyright 2018 Google Inc. All Rights Reserved.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*//*! lifecycle.mjs v0.1.1 */let gg;try{new EventTarget,gg=!0}catch(t){gg=!1}let kwt=class{constructor(){this.e={}}addEventListener(e,n,r=!1){this.t(e).push(n)}removeEventListener(e,n,r=!1){const o=this.t(e),s=o.indexOf(n);s>-1&&o.splice(s,1)}dispatchEvent(e){return e.target=this,Object.freeze(e),this.t(e.type).forEach(n=>n(e)),!0}t(e){return this.e[e]=this.e[e]||[]}};var _wt=gg?EventTarget:kwt;let $wt=class{constructor(e){this.type=e}};var Ewt=gg?Event:$wt;let Swt=class extends Ewt{constructor(e,n){super(e),this.newState=n.newState,this.oldState=n.oldState,this.originalEvent=n.originalEvent}};const la="active",Hu="passive",ca="hidden",ua="frozen",Ow="terminated",tA=typeof safari=="object"&&safari.pushNotification,Cwt="onpageshow"in self,Twt=["focus","blur","visibilitychange","freeze","resume","pageshow",Cwt?"pagehide":"unload"],nA=t=>(t.preventDefault(),t.returnValue="Are you sure?"),Awt=t=>t.reduce((e,n,r)=>(e[n]=r,e),{}),Nwt=[[la,Hu,ca,Ow],[la,Hu,ca,ua],[ca,Hu,la],[ua,ca],[ua,la],[ua,Hu]].map(Awt),Pwt=(t,e)=>{for(let n,r=0;n=Nwt[r];++r){const o=n[t],s=n[e];if(o>=0&&s>=0&&s>o)return Object.keys(n).slice(o,s+1)}return[]},fh=()=>document.visibilityState===ca?ca:document.hasFocus()?la:Hu;let Owt=class extends _wt{constructor(){super();const e=fh();this.s=e,this.i=[],this.a=this.a.bind(this),Twt.forEach(n=>addEventListener(n,this.a,!0)),tA&&addEventListener("beforeunload",n=>{this.n=setTimeout(()=>{n.defaultPrevented||n.returnValue.length>0||this.r(n,ca)},0)})}get state(){return this.s}get pageWasDiscarded(){return document.wasDiscarded||!1}addUnsavedChanges(e){!this.i.indexOf(e)>-1&&(this.i.length===0&&addEventListener("beforeunload",nA),this.i.push(e))}removeUnsavedChanges(e){const n=this.i.indexOf(e);n>-1&&(this.i.splice(n,1),this.i.length===0&&removeEventListener("beforeunload",nA))}r(e,n){if(n!==this.s){const r=this.s,o=Pwt(r,n);for(let s=0;s<o.length-1;++s){const i=o[s],a=o[s+1];this.s=a,this.dispatchEvent(new Swt("statechange",{oldState:i,newState:a,originalEvent:e}))}}}a(e){switch(tA&&clearTimeout(this.n),e.type){case"pageshow":case"resume":this.r(e,fh());break;case"focus":this.r(e,la);break;case"blur":this.s===la&&this.r(e,fh());break;case"pagehide":case"unload":this.r(e,e.persisted?ua:Ow);break;case"visibilitychange":this.s!==ua&&this.s!==Ow&&this.r(e,fh());break;case"freeze":this.r(e,ua)}}};var $d=new Owt;const rA=Symbol("pending"),Iwt=ye(function(e){const n=r=>{e.dispatch(Mbt({current:r.newState,previous:r.oldState}))};$d.addEventListener("statechange",n),n({newState:$d.state,oldState:void 0}),bn(e,()=>{$d.removeEventListener("statechange",n)})}),Rwt=ye(function(e){const{blockReload:n}=ue.track(e);n?$d.addUnsavedChanges(rA):$d.removeUnsavedChanges(rA)},{deferred:!1}),Mwt=[Iwt,Rwt],U5="nsm-local-storage-v1",H5="nsm-session-storage-v1",Dwt=()=>K5(U5,localStorage,t=>{const e={};return e[se.sliceId]=o5.retrieve(t),e}),Lwt=()=>K5(H5,sessionStorage,t=>{const e={};return e[re.sliceId]=JD.retrieve(t),e}),jwt=hs([ue,re,se],{name:"persistStateSlice",state:{}}),Fwt=ye(function(e){ue.track(e).lifeCycleState,oA(H5,sessionStorage,n=>{JD.populate(e.state,n)}),oA(U5,localStorage,n=>{o5.populate(e.state,n)})},{deferred:!1}),Bwt=[Fwt];function oA(t,e,n){const r={};n(r);const o=FX(r);o.success?e.setItem(t,o.value):console.warn(`Failed to persist data for key: ${t}`)}function K5(t,e,n){const r=e.getItem(t);if(r==null)return{};const o=jX(r);return o.success?n(o.value):(e.removeItem(t),console.warn(`Unable to parse data for key: ${t}`),{})}const zwt=ye(function(e){const{wsName:n}=ue.track(e),{openedFiles:r}=jt.track(e);Pr.replicaSlices.setReplicaWorkspaceState({wsName:n,openedFilesSha:r})},{deferred:!1}),qwt=[zwt],Wwt=[...m0t,...L0t,...z0t,...xwt,...Xvt,...ewt,...evt,...Mwt,...Bwt,...qwt,...qvt],Vwt=(t,e)=>{const n=Dwt(),r=Lwt(),o={...n,...r,[ls.sliceId]:{extensionRegistry:t.extensionRegistry}};console.debug("Overriding with state",o);const s=hbt({type:"window",eternalVars:t,otherStoreParams:{dispatchTransaction:(i,a,l)=>{const c=i.state.applyTransaction(l);a(c)},debug:i=>{console.group(`[main] ${i.type} >`),console.info(i),console.groupEnd()},stateOverride:o},onRefreshWorkspace:i=>{i.dispatch(iy(),{debugInfo:"storage-provider-change"})},effects:[...Wwt,...t.extensionRegistry.getNsmEffects()],slices:[ls,_d,ue,mt,jt,se,_p,re,Fe,jwt,...t.extensionRegistry.getNsmSlices()],registerWorker:{setup:async i=>{const a=await hwt(i.destroySignal);return dwt(a),a},api:(i,a)=>({application:{onError:async l=>{e(l,i,a)}},replicaSlices:twt(i)})}});return s.destroySignal.addEventListener("abort",()=>{V5()},{once:!0}),s},Uwt=typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope,G5=[];typeof globalThis=="undefined"&&(typeof self!="undefined"?self.globalThis=self:typeof window!="undefined"?window.globalThis=window:typeof global!="undefined"&&(global.globalThis=global));Uwt||typeof window!="undefined"&&!window.requestIdleCallback&&(console.debug("polyfilling idle callback"),window.requestIdleCallback=function(t,e){var n=Date.now();return setTimeout(function(){t({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-n))}})},typeof(e==null?void 0:e.timeout)=="number"?e.timeout:50)},window.cancelIdleCallback=function(t){clearTimeout(t)});function Z5(t){return t.name===qr.name||t.name===sg.name}class J5{constructor(){M(this,"name",Je.Browser);M(this,"displayName","Browser Storage");M(this,"description","Saves data in your browsers local storage");M(this,"onChange",()=>{});M(this,"_idb",new kY)}async createFile(e,n,r){await this.writeFile(e,n,r),this.onChange({type:"create",wsPath:e})}async deleteFile(e,n){await this._idb.unlink(on(e)),this.onChange({type:"delete",wsPath:e})}async fileExists(e,n){const r=on(e);try{return await this._idb.stat(r),!0}catch(o){if(o instanceof qr&&o.code===as)return!1;throw o}}async fileStat(e,n){const r=on(e),o=await this._idb.stat(r);return{ctime:o.mtimeMs,mtime:o.mtimeMs}}isSupported(){return globalThis.indexedDB!=null}async listAllFiles(e,n,r){let o=[];const s=await this._idb.opendirRecursive(n);return cp(e),o=s.map(a=>R_(a)).filter(a=>!!a),o.sort((a,l)=>a.localeCompare(l))}async newWorkspaceMetadata(e,n){}parseError(e){try{return M1(JSON.parse(e))}catch(n){return}}async readFile(e,n){if(await this.fileExists(e,n))return this._idb.readFile(on(e))}async renameFile(e,n,r){await this._idb.rename(on(e),on(n)),this.onChange({type:"rename",oldWsPath:e,newWsPath:n})}serializeError(e){return JSON.stringify(R1(e))}async writeFile(e,n,r){const o=on(e);await this._idb.writeFile(o,n),this.onChange({type:"write",wsPath:e})}}function Hwt(t){const e=on(t);function n(s,i=!1){return fetch(`https://unpkg.com/flent-help@${kw}/`+s).then(a=>{if(!a.ok){if(a.status===404)return null;throw new ge({message:`Encountered an error making request to unpkg.com ${a.status} ${a.statusText}`})}return a}).catch(a=>{if(a.message==="Failed to fetch"){console.error("Failed to fetch helpfs");return}throw a})}const r=e.split("/"),[,...o]=r;return n(o.join("/")).then(s=>s==null?void 0:s.blob()).then(s=>{if(!s)return;const i=r[r.length-1];return new File([s],i)})}class Kwt{constructor(){M(this,"name",Je.Help);M(this,"displayName","Help documentation");M(this,"description","");M(this,"hidden",!0);M(this,"onChange",()=>{});M(this,"_idbProvider",new J5)}async createFile(e,n,r){await this.writeFile(e,n,r),this.onChange({type:"create",wsPath:e})}async deleteFile(e,n){e!==Gi&&(await this._idbProvider.deleteFile(e,n),this.onChange({type:"delete",wsPath:e}))}async fileExists(e,n){return e===Gi?!0:this._idbProvider.fileExists(e,n)}async fileStat(e,n){return this._idbProvider.fileStat(e,n)}isSupported(){return!0}async listAllFiles(e,n,r){return[...new Set([Gi,...await this._idbProvider.listAllFiles(e,n,r)])]}async newWorkspaceMetadata(e,n){}parseError(e){try{return M1(JSON.parse(e))}catch(n){return}}async readFile(e,n){const r=await Hwt(e);return r||this._idbProvider.readFile(e,n)}async renameFile(e,n,r){e!==Gi&&(await this._idbProvider.renameFile(e,n,r),this.onChange({type:"rename",oldWsPath:e,newWsPath:n}))}serializeError(e){return JSON.stringify(R1(e))}async writeFile(e,n,r){e!==Gi&&(await this._idbProvider.writeFile(e,n,r),this.onChange({type:"write",wsPath:e}))}}const Y5=t=>t.endsWith(".md")||t.endsWith(".png");class X5{constructor(){M(this,"onChange",()=>{})}async createFile(e,n,r){await this.writeFile(e,n,r),this.onChange({type:"create",wsPath:e})}async deleteFile(e,n){const{wsName:r}=he(e);await(await this._getFs(r,n)).unlink(on(e)),this.onChange({type:"delete",wsPath:e})}async fileExists(e,n){const r=on(e),{wsName:o}=he(e);try{return await(await this._getFs(o,n)).stat(r),!0}catch(s){if(s instanceof qr&&s.code===as)return!1;throw s}}async fileStat(e,n){const r=on(e),{wsName:o}=he(e),s=await(await this._getFs(o,n)).stat(r);return{ctime:s.mtimeMs,mtime:s.mtimeMs}}async listAllFiles(e,n,r){let o=[];const s=await(await this._getFs(n,r)).opendirRecursive(n);return cp(e),o=s.map(a=>R_(a)).filter(a=>!!a),o.sort((a,l)=>a.localeCompare(l))}parseError(e){try{return M1(JSON.parse(e))}catch(n){return}}async readFile(e,n){if(!await this.fileExists(e,n))return;const{wsName:r}=he(e);return(await this._getFs(r,n)).readFile(on(e))}async renameFile(e,n,r){const{wsName:o}=he(e);await(await this._getFs(o,r)).rename(on(e),on(n)),this.onChange({type:"rename",oldWsPath:e,newWsPath:n})}serializeError(e){return JSON.stringify(R1(e))}async writeFile(e,n,r){const o=on(e),{wsName:s}=he(e);await(await this._getFs(s,r)).writeFile(o,n),this.onChange({type:"write",wsPath:e})}}class Gwt extends X5{constructor(){super(...arguments);M(this,"name",Je.NativeFS);M(this,"displayName","File system storage");M(this,"description","Saves data in your file system");M(this,"onChange",()=>{})}isSupported(){return!0}async newWorkspaceMetadata(n,r){const{rootDirHandle:o}=r;if(!o)throw new Error("rootDirHandle is necessary for creating nativefs workspace");return{rootDirHandle:o}}async _getFs(n,r){const o=(await r.readWorkspaceMetadata(n)).rootDirHandle;return new yM({rootDirHandle:o,allowedFile:({name:s})=>Y5(s)})}}class Zwt extends X5{constructor(){super(...arguments);M(this,"name",Je.PrivateFS);M(this,"displayName","Private file system storage");M(this,"description","Saves data in your browsers file system storage");M(this,"onChange",()=>{})}isSupported(){return!0}async newWorkspaceMetadata(){}async _getFs(n){const r=await IM();if(!r)throw new Error("PrivateFS is not available in this browser");const o=await r.getDirectoryHandle(n,{create:!0});return new yM({rootDirHandle:o,allowedFile:({name:s})=>Y5(s)})}}const Jwt="@bangle.io/browser-nativefs-storage",Ywt=Tt.create({name:Jwt,application:{storageProvider:new Gwt,onStorageError:t=>{if(t.code===sp||t.code===N1){const e=St().wsName;if(e)return r$(e,t.code),!0}return t.name===lr.name||t.name===qr.name?(console.debug(t.code,t.name,t.stack),ke({severity:J.ERROR,title:"File system error",content:t.message,uid:"NativefsStorageProviderError"+Math.random(),buttons:[{title:"Report issue",hint:"Report an issue on Github",operation:fc}]}),!0):(console.log("nativefs didnt handle error",t.name,t.message),!1)}}}),Xwt="@bangle.io/browser-privatefs-storage",Qwt=Tt.create({name:Xwt,application:{slices:[],storageProvider:new Zwt,onStorageError:t=>{if(t.code===sp||t.code===N1){const e=St().wsName;if(e)return r$(e,t.code),!0}return t.name===lr.name||t.name===qr.name?(console.debug(t.code,t.name,t.stack),ke({severity:J.ERROR,title:"File system error",content:t.message,uid:"PrivateFSStorage"+Math.random(),buttons:[{title:"Report issue",hint:"Report an issue on Github",operation:fc}]}),!0):(console.log("nativefs didnt handle error",t.name,t.message),!1)}}}),ext="@bangle.io/browser-storage",txt=Tt.create({name:ext,application:{storageProvider:new J5,onStorageError:t=>Z5(t)?(console.debug(t.code,t.name),ke({severity:J.ERROR,title:"Error writing to browser storage",content:t.message,uid:t.code+""+Math.random()}),!0):(ke({severity:J.ERROR,title:`Browser storage provider encountered an unknown error: ${t.name}`,uid:"unknown-error"+t.code||t.name+Math.random(),buttons:[]}),!1)}});var An="top",xr="bottom",kr="right",Nn="left",$$="auto",Ep=[An,xr,kr,Nn],$c="start",Sf="end",nxt="clippingParents",Q5="viewport",Pu="popper",rxt="reference",sA=Ep.reduce(function(t,e){return t.concat([e+"-"+$c,e+"-"+Sf])},[]),e7=[].concat(Ep,[$$]).reduce(function(t,e){return t.concat([e,e+"-"+$c,e+"-"+Sf])},[]),oxt="beforeRead",sxt="read",ixt="afterRead",axt="beforeMain",lxt="main",cxt="afterMain",uxt="beforeWrite",dxt="write",fxt="afterWrite",pxt=[oxt,sxt,ixt,axt,lxt,cxt,uxt,dxt,fxt];function bo(t){return t.split("-")[0]}function Hn(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function za(t){var e=Hn(t).Element;return t instanceof e||t instanceof Element}function dr(t){var e=Hn(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function E$(t){if(typeof ShadowRoot=="undefined")return!1;var e=Hn(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}var wa=Math.max,yg=Math.min,Ec=Math.round;function Iw(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function t7(){return!/^((?!chrome|android).)*safari/i.test(Iw())}function Sc(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),o=1,s=1;e&&dr(t)&&(o=t.offsetWidth>0&&Ec(r.width)/t.offsetWidth||1,s=t.offsetHeight>0&&Ec(r.height)/t.offsetHeight||1);var i=za(t)?Hn(t):window,a=i.visualViewport,l=!t7()&&n,c=(r.left+(l&&a?a.offsetLeft:0))/o,u=(r.top+(l&&a?a.offsetTop:0))/s,d=r.width/o,f=r.height/s;return{width:d,height:f,top:u,right:c+d,bottom:u+f,left:c,x:c,y:u}}function S$(t){var e=Sc(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function n7(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&E$(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Eo(t){return t?(t.nodeName||"").toLowerCase():null}function cs(t){return Hn(t).getComputedStyle(t)}function hxt(t){return["table","td","th"].indexOf(Eo(t))>=0}function Mi(t){return((za(t)?t.ownerDocument:t.document)||window.document).documentElement}function fy(t){return Eo(t)==="html"?t:t.assignedSlot||t.parentNode||(E$(t)?t.host:null)||Mi(t)}function iA(t){return!dr(t)||cs(t).position==="fixed"?null:t.offsetParent}function mxt(t){var e=/firefox/i.test(Iw()),n=/Trident/i.test(Iw());if(n&&dr(t)){var r=cs(t);if(r.position==="fixed")return null}var o=fy(t);for(E$(o)&&(o=o.host);dr(o)&&["html","body"].indexOf(Eo(o))<0;){var s=cs(o);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return o;o=o.parentNode}return null}function Sp(t){for(var e=Hn(t),n=iA(t);n&&hxt(n)&&cs(n).position==="static";)n=iA(n);return n&&(Eo(n)==="html"||Eo(n)==="body"&&cs(n).position==="static")?e:n||mxt(t)||e}function C$(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Ed(t,e,n){return wa(t,yg(e,n))}function gxt(t,e,n){var r=Ed(t,e,n);return r>n?n:r}function r7(){return{top:0,right:0,bottom:0,left:0}}function o7(t){return Object.assign({},r7(),t)}function s7(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var yxt=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,o7(typeof e!="number"?e:s7(e,Ep))};function bxt(t){var e,n=t.state,r=t.name,o=t.options,s=n.elements.arrow,i=n.modifiersData.popperOffsets,a=bo(n.placement),l=C$(a),c=[Nn,kr].indexOf(a)>=0,u=c?"height":"width";if(!(!s||!i)){var d=yxt(o.padding,n),f=S$(s),p=l==="y"?An:Nn,h=l==="y"?xr:kr,y=n.rects.reference[u]+n.rects.reference[l]-i[l]-n.rects.popper[u],g=i[l]-n.rects.reference[l],b=Sp(s),w=b?l==="y"?b.clientHeight||0:b.clientWidth||0:0,x=y/2-g/2,k=d[p],S=w-f[u]-d[h],_=w/2-f[u]/2+x,C=Ed(k,_,S),$=l;n.modifiersData[r]=(e={},e[$]=C,e.centerOffset=C-_,e)}}function vxt(t){var e=t.state,n=t.options,r=n.element,o=r===void 0?"[data-popper-arrow]":r;o!=null&&(typeof o=="string"&&(o=e.elements.popper.querySelector(o),!o)||n7(e.elements.popper,o)&&(e.elements.arrow=o))}const i7={name:"arrow",enabled:!0,phase:"main",fn:bxt,effect:vxt,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};var wxt={left:"right",right:"left",bottom:"top",top:"bottom"};function Wh(t){return t.replace(/left|right|bottom|top/g,function(e){return wxt[e]})}var xxt={start:"end",end:"start"};function aA(t){return t.replace(/start|end/g,function(e){return xxt[e]})}function T$(t){var e=Hn(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function A$(t){return Sc(Mi(t)).left+T$(t).scrollLeft}function kxt(t,e){var n=Hn(t),r=Mi(t),o=n.visualViewport,s=r.clientWidth,i=r.clientHeight,a=0,l=0;if(o){s=o.width,i=o.height;var c=t7();(c||!c&&e==="fixed")&&(a=o.offsetLeft,l=o.offsetTop)}return{width:s,height:i,x:a+A$(t),y:l}}function _xt(t){var e,n=Mi(t),r=T$(t),o=(e=t.ownerDocument)==null?void 0:e.body,s=wa(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),i=wa(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),a=-r.scrollLeft+A$(t),l=-r.scrollTop;return cs(o||n).direction==="rtl"&&(a+=wa(n.clientWidth,o?o.clientWidth:0)-s),{width:s,height:i,x:a,y:l}}function N$(t){var e=cs(t),n=e.overflow,r=e.overflowX,o=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+r)}function a7(t){return["html","body","#document"].indexOf(Eo(t))>=0?t.ownerDocument.body:dr(t)&&N$(t)?t:a7(fy(t))}function Sd(t,e){var n;e===void 0&&(e=[]);var r=a7(t),o=r===((n=t.ownerDocument)==null?void 0:n.body),s=Hn(r),i=o?[s].concat(s.visualViewport||[],N$(r)?r:[]):r,a=e.concat(i);return o?a:a.concat(Sd(fy(i)))}function Rw(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function $xt(t,e){var n=Sc(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function lA(t,e,n){return e===Q5?Rw(kxt(t,n)):za(e)?$xt(e,n):Rw(_xt(Mi(t)))}function Ext(t){var e=Sd(fy(t)),n=["absolute","fixed"].indexOf(cs(t).position)>=0,r=n&&dr(t)?Sp(t):t;return za(r)?e.filter(function(o){return za(o)&&n7(o,r)&&Eo(o)!=="body"}):[]}function Sxt(t,e,n,r){var o=e==="clippingParents"?Ext(t):[].concat(e),s=[].concat(o,[n]),i=s[0],a=s.reduce(function(l,c){var u=lA(t,c,r);return l.top=wa(u.top,l.top),l.right=yg(u.right,l.right),l.bottom=yg(u.bottom,l.bottom),l.left=wa(u.left,l.left),l},lA(t,i,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function Cc(t){return t.split("-")[1]}function l7(t){var e=t.reference,n=t.element,r=t.placement,o=r?bo(r):null,s=r?Cc(r):null,i=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(o){case An:l={x:i,y:e.y-n.height};break;case xr:l={x:i,y:e.y+e.height};break;case kr:l={x:e.x+e.width,y:a};break;case Nn:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var c=o?C$(o):null;if(c!=null){var u=c==="y"?"height":"width";switch(s){case $c:l[c]=l[c]-(e[u]/2-n[u]/2);break;case Sf:l[c]=l[c]+(e[u]/2-n[u]/2);break}}return l}function Cf(t,e){e===void 0&&(e={});var n=e,r=n.placement,o=r===void 0?t.placement:r,s=n.strategy,i=s===void 0?t.strategy:s,a=n.boundary,l=a===void 0?nxt:a,c=n.rootBoundary,u=c===void 0?Q5:c,d=n.elementContext,f=d===void 0?Pu:d,p=n.altBoundary,h=p===void 0?!1:p,y=n.padding,g=y===void 0?0:y,b=o7(typeof g!="number"?g:s7(g,Ep)),w=f===Pu?rxt:Pu,x=t.rects.popper,k=t.elements[h?w:f],S=Sxt(za(k)?k:k.contextElement||Mi(t.elements.popper),l,u,i),_=Sc(t.elements.reference),C=l7({reference:_,element:x,strategy:"absolute",placement:o}),$=Rw(Object.assign({},x,C)),T=f===Pu?$:_,A={top:S.top-T.top+b.top,bottom:T.bottom-S.bottom+b.bottom,left:S.left-T.left+b.left,right:T.right-S.right+b.right},N=t.modifiersData.offset;if(f===Pu&&N){var q=N[o];Object.keys(A).forEach(function(O){var E=[kr,xr].indexOf(O)>=0?1:-1,D=[An,xr].indexOf(O)>=0?"y":"x";A[O]+=q[D]*E})}return A}function Cxt(t,e){e===void 0&&(e={});var n=e,r=n.placement,o=n.boundary,s=n.rootBoundary,i=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?e7:l,u=Cc(r),d=u?a?sA:sA.filter(function(h){return Cc(h)===u}):Ep,f=d.filter(function(h){return c.indexOf(h)>=0});f.length===0&&(f=d);var p=f.reduce(function(h,y){return h[y]=Cf(t,{placement:y,boundary:o,rootBoundary:s,padding:i})[bo(y)],h},{});return Object.keys(p).sort(function(h,y){return p[h]-p[y]})}function Txt(t){if(bo(t)===$$)return[];var e=Wh(t);return[aA(t),e,aA(e)]}function Axt(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var o=n.mainAxis,s=o===void 0?!0:o,i=n.altAxis,a=i===void 0?!0:i,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,f=n.altBoundary,p=n.flipVariations,h=p===void 0?!0:p,y=n.allowedAutoPlacements,g=e.options.placement,b=bo(g),w=b===g,x=l||(w||!h?[Wh(g)]:Txt(g)),k=[g].concat(x).reduce(function(W,K){return W.concat(bo(K)===$$?Cxt(e,{placement:K,boundary:u,rootBoundary:d,padding:c,flipVariations:h,allowedAutoPlacements:y}):K)},[]),S=e.rects.reference,_=e.rects.popper,C=new Map,$=!0,T=k[0],A=0;A<k.length;A++){var N=k[A],q=bo(N),O=Cc(N)===$c,E=[An,xr].indexOf(q)>=0,D=E?"width":"height",R=Cf(e,{placement:N,boundary:u,rootBoundary:d,altBoundary:f,padding:c}),j=E?O?kr:Nn:O?xr:An;S[D]>_[D]&&(j=Wh(j));var we=Wh(j),Oe=[];if(s&&Oe.push(R[q]<=0),a&&Oe.push(R[j]<=0,R[we]<=0),Oe.every(function(W){return W})){T=N,$=!1;break}C.set(N,Oe)}if($)for(var ee=h?3:1,z=function(K){var Ce=k.find(function(Te){var Se=C.get(Te);if(Se)return Se.slice(0,K).every(function(gt){return gt})});if(Ce)return T=Ce,"break"},F=ee;F>0;F--){var B=z(F);if(B==="break")break}e.placement!==T&&(e.modifiersData[r]._skip=!0,e.placement=T,e.reset=!0)}}const c7={name:"flip",enabled:!0,phase:"main",fn:Axt,requiresIfExists:["offset"],data:{_skip:!1}};function Nxt(t,e,n){var r=bo(t),o=[Nn,An].indexOf(r)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,i=s[0],a=s[1];return i=i||0,a=(a||0)*o,[Nn,kr].indexOf(r)>=0?{x:a,y:i}:{x:i,y:a}}function Pxt(t){var e=t.state,n=t.options,r=t.name,o=n.offset,s=o===void 0?[0,0]:o,i=e7.reduce(function(u,d){return u[d]=Nxt(d,e.rects,s),u},{}),a=i[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=i}const u7={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Pxt};function Oxt(t){var e=t.state,n=t.name;e.modifiersData[n]=l7({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const P$={name:"popperOffsets",enabled:!0,phase:"read",fn:Oxt,data:{}};function Ixt(t){return t==="x"?"y":"x"}function Rxt(t){var e=t.state,n=t.options,r=t.name,o=n.mainAxis,s=o===void 0?!0:o,i=n.altAxis,a=i===void 0?!1:i,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,f=n.tether,p=f===void 0?!0:f,h=n.tetherOffset,y=h===void 0?0:h,g=Cf(e,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),b=bo(e.placement),w=Cc(e.placement),x=!w,k=C$(b),S=Ixt(k),_=e.modifiersData.popperOffsets,C=e.rects.reference,$=e.rects.popper,T=typeof y=="function"?y(Object.assign({},e.rects,{placement:e.placement})):y,A=typeof T=="number"?{mainAxis:T,altAxis:T}:Object.assign({mainAxis:0,altAxis:0},T),N=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,q={x:0,y:0};if(_){if(s){var O,E=k==="y"?An:Nn,D=k==="y"?xr:kr,R=k==="y"?"height":"width",j=_[k],we=j+g[E],Oe=j-g[D],ee=p?-$[R]/2:0,z=w===$c?C[R]:$[R],F=w===$c?-$[R]:-C[R],B=e.elements.arrow,W=p&&B?S$(B):{width:0,height:0},K=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:r7(),Ce=K[E],Te=K[D],Se=Ed(0,C[R],W[R]),gt=x?C[R]/2-ee-Se-Ce-A.mainAxis:z-Se-Ce-A.mainAxis,ws=x?-C[R]/2+ee+Se+Te+A.mainAxis:F+Se+Te+A.mainAxis,Gr=e.elements.arrow&&Sp(e.elements.arrow),Oo=Gr?k==="y"?Gr.clientTop||0:Gr.clientLeft||0:0,be=(O=N==null?void 0:N[k])!=null?O:0,je=j+gt-be-Oo,Ie=j+ws-be,xs=Ed(p?yg(we,je):we,j,p?wa(Oe,Ie):Oe);_[k]=xs,q[k]=xs-j}if(a){var Io,Zr=k==="x"?An:Nn,Re=k==="x"?xr:kr,Me=_[S],Ae=S==="y"?"height":"width",dt=Me+g[Zr],ft=Me-g[Re],On=[An,Nn].indexOf(b)!==-1,In=(Io=N==null?void 0:N[S])!=null?Io:0,Rn=On?dt:Me-C[Ae]-$[Ae]-In+A.altAxis,ji=On?Me+C[Ae]+$[Ae]-In-A.altAxis:ft,Jr=p&&On?gxt(Rn,Me,ji):Ed(p?Rn:dt,Me,p?ji:ft);_[S]=Jr,q[S]=Jr-Me}e.modifiersData[r]=q}}const d7={name:"preventOverflow",enabled:!0,phase:"main",fn:Rxt,requiresIfExists:["offset"]};function Mxt(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function Dxt(t){return t===Hn(t)||!dr(t)?T$(t):Mxt(t)}function Lxt(t){var e=t.getBoundingClientRect(),n=Ec(e.width)/t.offsetWidth||1,r=Ec(e.height)/t.offsetHeight||1;return n!==1||r!==1}function jxt(t,e,n){n===void 0&&(n=!1);var r=dr(e),o=dr(e)&&Lxt(e),s=Mi(e),i=Sc(t,o,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((Eo(e)!=="body"||N$(s))&&(a=Dxt(e)),dr(e)?(l=Sc(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=A$(s))),{x:i.left+a.scrollLeft-l.x,y:i.top+a.scrollTop-l.y,width:i.width,height:i.height}}function Fxt(t){var e=new Map,n=new Set,r=[];t.forEach(function(s){e.set(s.name,s)});function o(s){n.add(s.name);var i=[].concat(s.requires||[],s.requiresIfExists||[]);i.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&o(l)}}),r.push(s)}return t.forEach(function(s){n.has(s.name)||o(s)}),r}function Bxt(t){var e=Fxt(t);return pxt.reduce(function(n,r){return n.concat(e.filter(function(o){return o.phase===r}))},[])}function zxt(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function qxt(t){var e=t.reduce(function(n,r){var o=n[r.name];return n[r.name]=o?Object.assign({},o,r,{options:Object.assign({},o.options,r.options),data:Object.assign({},o.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var cA={placement:"bottom",modifiers:[],strategy:"absolute"};function uA(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function f7(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,o=e.defaultOptions,s=o===void 0?cA:o;return function(a,l,c){c===void 0&&(c=s);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},cA,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],f=!1,p={state:u,setOptions:function(b){var w=typeof b=="function"?b(u.options):b;y(),u.options=Object.assign({},s,u.options,w),u.scrollParents={reference:za(a)?Sd(a):a.contextElement?Sd(a.contextElement):[],popper:Sd(l)};var x=Bxt(qxt([].concat(r,u.options.modifiers)));return u.orderedModifiers=x.filter(function(k){return k.enabled}),h(),p.update()},forceUpdate:function(){if(!f){var b=u.elements,w=b.reference,x=b.popper;if(uA(w,x)){u.rects={reference:jxt(w,Sp(x),u.options.strategy==="fixed"),popper:S$(x)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(A){return u.modifiersData[A.name]=Object.assign({},A.data)});for(var k=0;k<u.orderedModifiers.length;k++){if(u.reset===!0){u.reset=!1,k=-1;continue}var S=u.orderedModifiers[k],_=S.fn,C=S.options,$=C===void 0?{}:C,T=S.name;typeof _=="function"&&(u=_({state:u,options:$,name:T,instance:p})||u)}}}},update:zxt(function(){return new Promise(function(g){p.forceUpdate(),g(u)})}),destroy:function(){y(),f=!0}};if(!uA(a,l))return p;p.setOptions(c).then(function(g){!f&&c.onFirstUpdate&&c.onFirstUpdate(g)});function h(){u.orderedModifiers.forEach(function(g){var b=g.name,w=g.options,x=w===void 0?{}:w,k=g.effect;if(typeof k=="function"){var S=k({state:u,name:b,instance:p,options:x}),_=function(){};d.push(S||_)}})}function y(){d.forEach(function(g){return g()}),d=[]}return p}}var ph={passive:!0};function Wxt(t){var e=t.state,n=t.instance,r=t.options,o=r.scroll,s=o===void 0?!0:o,i=r.resize,a=i===void 0?!0:i,l=Hn(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach(function(u){u.addEventListener("scroll",n.update,ph)}),a&&l.addEventListener("resize",n.update,ph),function(){s&&c.forEach(function(u){u.removeEventListener("scroll",n.update,ph)}),a&&l.removeEventListener("resize",n.update,ph)}}const p7={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Wxt,data:{}};var Vxt={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Uxt(t,e){var n=t.x,r=t.y,o=e.devicePixelRatio||1;return{x:Ec(n*o)/o||0,y:Ec(r*o)/o||0}}function dA(t){var e,n=t.popper,r=t.popperRect,o=t.placement,s=t.variation,i=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,d=t.isFixed,f=i.x,p=f===void 0?0:f,h=i.y,y=h===void 0?0:h,g=typeof u=="function"?u({x:p,y}):{x:p,y};p=g.x,y=g.y;var b=i.hasOwnProperty("x"),w=i.hasOwnProperty("y"),x=Nn,k=An,S=window;if(c){var _=Sp(n),C="clientHeight",$="clientWidth";if(_===Hn(n)&&(_=Mi(n),cs(_).position!=="static"&&a==="absolute"&&(C="scrollHeight",$="scrollWidth")),_=_,o===An||(o===Nn||o===kr)&&s===Sf){k=xr;var T=d&&_===S&&S.visualViewport?S.visualViewport.height:_[C];y-=T-r.height,y*=l?1:-1}if(o===Nn||(o===An||o===xr)&&s===Sf){x=kr;var A=d&&_===S&&S.visualViewport?S.visualViewport.width:_[$];p-=A-r.width,p*=l?1:-1}}var N=Object.assign({position:a},c&&Vxt),q=u===!0?Uxt({x:p,y},Hn(n)):{x:p,y};if(p=q.x,y=q.y,l){var O;return Object.assign({},N,(O={},O[k]=w?"0":"",O[x]=b?"0":"",O.transform=(S.devicePixelRatio||1)<=1?"translate("+p+"px, "+y+"px)":"translate3d("+p+"px, "+y+"px, 0)",O))}return Object.assign({},N,(e={},e[k]=w?y+"px":"",e[x]=b?p+"px":"",e.transform="",e))}function Hxt(t){var e=t.state,n=t.options,r=n.gpuAcceleration,o=r===void 0?!0:r,s=n.adaptive,i=s===void 0?!0:s,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:bo(e.placement),variation:Cc(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:o,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,dA(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:i,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,dA(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const h7={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Hxt,data:{}};function Kxt(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},o=e.attributes[n]||{},s=e.elements[n];!dr(s)||!Eo(s)||(Object.assign(s.style,r),Object.keys(o).forEach(function(i){var a=o[i];a===!1?s.removeAttribute(i):s.setAttribute(i,a===!0?"":a)}))})}function Gxt(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var o=e.elements[r],s=e.attributes[r]||{},i=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),a=i.reduce(function(l,c){return l[c]="",l},{});!dr(o)||!Eo(o)||(Object.assign(o.style,a),Object.keys(s).forEach(function(l){o.removeAttribute(l)}))})}}const m7={name:"applyStyles",enabled:!0,phase:"write",fn:Kxt,effect:Gxt,requires:["computeStyles"]};var Zxt=[p7,P$,h7,m7],Jxt=f7({defaultModifiers:Zxt});function py(t=["div",{class:"bangle-tooltip",role:"tooltip"},["div",{class:"bangle-tooltip-content"},0]],e=!1){const{dom:n,contentDOM:r}=$n.renderSpec(window.document,t);if(e&&!n.querySelector(".bangle-tooltip-arrow")){const o=$n.renderSpec(window.document,["div",{class:"bangle-tooltip-arrow","data-popper-arrow":""}]);n.appendChild(o.dom)}return{dom:n,contentDOM:r}}const g7=Xxt,Yxt=typeof window=="undefined"?12:parseFloat(getComputedStyle(document.documentElement).fontSize);function Xxt({stateKey:t,renderOpts:{tooltipDOMSpec:e,placement:n="top",getReferenceElement:r,getScrollContainer:o=u=>u.dom.parentElement,onUpdateTooltip:s=(u,d,f)=>{},onHideTooltip:i=(u,d,f)=>{},tooltipOffset:a=()=>[0,.5*Yxt],fallbackPlacements:l=["bottom","top"],customPopperModifiers:c}}){const u=new xe({view:f=>new d(f)});class d{constructor(p){this.popperInstance=null,this._view=p;const{dom:h}=py(e);this._tooltip=h,this._scrollContainerDOM=o(p),this._view.dom.parentNode.appendChild(this._tooltip);const y=t.getState(p.state);if(Qxt(y),y.show){this._showTooltip();return}}destroy(){this.popperInstance&&(this.popperInstance.destroy(),this.popperInstance=null),this._view.dom.parentNode.removeChild(this._tooltip)}update(p,h){const y=t.getState(p.state);y!==t.getState(h)&&(y.show?(s.call(this,p.state,p.dispatch,p),this._showTooltip()):this._hideTooltip())}_createPopperInstance(p){if(this.popperInstance)return;const h=this._tooltip.querySelector("[data-popper-arrow]"),y=[u7,d7,c7,{name:"offset",options:{offset:g=>a(g)}},{name:"flip",options:{fallbackPlacements:l,padding:10}},{name:"preventOverflow",options:{boundary:this._scrollContainerDOM}},P$,h?i7:void 0,h?{name:"arrow",options:{element:h}}:void 0].filter(Boolean);this.popperInstance=Jxt(r(p,this._tooltip,this._scrollContainerDOM),this._tooltip,{placement:n,modifiers:c?c(p,this._tooltip,this._scrollContainerDOM,y):y}),s.call(this,p.state,p.dispatch,p)}_hideTooltip(){this.popperInstance&&(this._tooltip.removeAttribute("data-show"),this.popperInstance.destroy(),this.popperInstance=null,i.call(this,this._view.state,this._view.dispatch,this._view))}_showTooltip(){this._tooltip.setAttribute("data-show",""),this._createPopperInstance(this._view),this.popperInstance.update()}}return u}function Qxt(t){if(typeof t.show!="boolean")throw ar('Tooltip must be controlled by a plugin having a boolean field "show" in its state, but received the state=',t),new Error('"show" field required.')}const ekt=rkt,tkt={updateSelectionTooltipType:O$,hideSelectionTooltip:I$,queryIsSelectionTooltipActive:y7,querySelectionTooltipType:b7};let nkt=()=>{};function rkt({key:t=new Ee("selectionTooltipPlugin"),calculateType:e=(r,o)=>r.selection.empty?null:"default",tooltipRenderOpts:n={}}){return()=>{const r=py(n.tooltipDOMSpec);return[okt({key:t,tooltipDOMSpec:r,calculateType:e}),skt({stateKey:t}),g7({stateKey:t,renderOpts:{...n,getReferenceElement:ikt,tooltipDOMSpec:r}})]}}function okt({key:t,calculateType:e,tooltipDOMSpec:n}){return new xe({key:t,state:{init:(r,o)=>{const s=e(o,null);return{type:s,tooltipContentDOM:n.contentDOM,show:typeof s=="string",calculateType:e}},apply:(r,o)=>{const s=r.getMeta(t);return s===void 0||s.type==null&&o.type==null?o:(nkt("update tooltip state to ",s.type),{...o,type:s.type,show:typeof s.type=="string"})}}})}function skt({stateKey:t}){let e=!1;return new xe({props:{handleDOMEvents:{mousedown:(n,r)=>(e=!0,!1),mouseup:(n,r)=>(e=!1,Mw(t)(n.state,n.dispatch,n),!1)}},view(){return{update(n,r){const o=n.state;if(!(e||r===o)&&!(r&&r.doc.eq(o.doc)&&r.selection.eq(o.selection)))return Mw(t)(n.state,n.dispatch,n)}}}})}function ikt(t){return{getBoundingClientRect:()=>{const{selection:e}=t.state;let{head:n,from:r}=e;const o=e instanceof ne?r:n,s=t.coordsAtPos(o);let{top:i,bottom:a,left:l,right:c}=s,u=c-l;if(e instanceof ne){const d=t.nodeDOM(o);u=d?d.clientWidth:u}return{width:u,height:a-i,top:i,right:c,bottom:a,left:l}}}}function Mw(t){return(e,n,r)=>{const o=t.getState(e),s=o.calculateType(e,o.type);return typeof s=="string"?O$(t,s)(e,n,r):s==null&&o.type!=null?I$(t)(e,n,r):!1}}function O$(t,e){return(n,r,o)=>(r&&r(n.tr.setMeta(t,{type:e}).setMeta("addToHistory",!1)),!0)}function I$(t){return(e,n,r)=>(n&&n(e.tr.setMeta(t,{type:null}).setMeta("addToHistory",!1)),!0)}function y7(t){return e=>{const n=t.getState(e);return!!(n&&typeof n.type=="string")}}function b7(t){return e=>{const n=t.getState(e);return n&&n.type}}var v7=Object.freeze({__proto__:null,plugins:ekt,commands:tkt,_syncTooltipOnUpdate:Mw,updateSelectionTooltipType:O$,hideSelectionTooltip:I$,queryIsSelectionTooltipActive:y7,querySelectionTooltipType:b7});const akt="";function lkt(t,e,n){const r=new RegExp(`(^|[.!?\\s${akt}])(${ukt(n)})$`);return new ys(r,(s,i)=>{const a=i[3]||i[2];if(!a)return null;const l=t.mark(e,{trigger:a}),{tr:c,selection:u}=s;if(a.length>1){const f=ae.create(c.doc,u.from,u.from-a.length+1);c.setSelection(f)}const d=u.$from.marks();return c.replaceSelectionWith(t.text(a,[l,...d]),!1)})}const w7=/[\\^$.*+?()[\]{}|]/g,ckt=RegExp(w7.source);function ukt(t){return t&&ckt.test(t)?t.replace(w7,"\\$&"):t||""}const dkt=hkt,fkt=mkt,pkt={queryTriggerText:_7,queryIsSuggestTooltipActive:R$,replaceSuggestMarkWith:$7,incrementSuggestTooltipCounter:M$,decrementSuggestTooltipCounter:D$,resetSuggestTooltipCounter:E7},x7={select:"Enter",up:"ArrowUp",down:"ArrowDown",hide:"Escape",right:void 0,left:void 0};function hkt({markName:t,trigger:e,markColor:n="#005893"}){return{name:t,type:"mark",schema:{inclusive:!0,excludes:"_",group:"suggestTriggerMarks",parseDOM:[{tag:`span[data-${t}]`}],toDOM:r=>["span",{"data-bangle-name":t,"data-suggest-trigger":r.attrs.trigger,style:`color: ${n}`}],attrs:{trigger:{default:e}}},markdown:{toMarkdown:{open:"",close:"",mixable:!0}}}}function mkt({key:t=new Ee("suggest_tooltip"),markName:e,trigger:n,tooltipRenderOpts:r,keybindings:o=x7,onEnter:s=(d,f,p)=>bg(t)(d,f,p),onArrowDown:i=M$(t),onArrowUp:a=D$(t),onEscape:l=(d,f,p)=>bg(t)(d,f,p),onArrowLeft:c,onArrowRight:u}){return({schema:d})=>{const f=R$(t);return[new xe({key:t,state:{init(p,h){return{trigger:n,markName:e,triggerText:"",show:!1,counter:0}},apply(p,h,y,g){const b=p.getMeta(t);if(b===void 0)return h;if(b.type==="RENDER_TOOLTIP")return{...h,triggerText:k7(g,e,n),show:!0};if(b.type==="HIDE_TOOLTIP")return h.show===!1?h:{...h,triggerText:"",show:!1,counter:0};if(b.type==="INCREMENT_COUNTER")return{...h,counter:h.counter+1};if(b.type==="RESET_COUNTER")return{...h,counter:0};if(b.type==="UPDATE_COUNTER")return{...h,counter:b.value};if(b.type==="DECREMENT_COUNTER")return{...h,counter:h.counter-1};throw new Error("Unknown type")}}}),g7({stateKey:t,renderOpts:{...r,getReferenceElement:gkt(p=>{const h=d.marks[e];Ve(h,`markType ${e} not found`);const{selection:y}=p;return Kk(h,p.doc,y.from-1,y.to)})}}),lkt(d,e,n),ykt({trigger:n,markName:e,key:t}),o&&st(nn([[o.select,_e(f,s)],[o.up,_e(f,a)],[o.down,_e(f,i)],[o.left,_e(f,c)],[o.right,_e(f,u)],[o.hide,_e(f,l)]]))]}}function gkt(t){return(e,n,r)=>({getBoundingClientRect:()=>{let o=e.state;const s=t(o),i=s.start>-1?s.start+1:0,a=e.coordsAtPos(i),l=e.coordsAtPos(s.end>-1?s.end:i);let{left:c,right:u}=a,{top:d,bottom:f}=l;const p=c,h=d,y=u-c,g=f-d;return new DOMRect(p,h,y,g)}})}function ykt({key:t,trigger:e,markName:n}){return new xe({view(){return{update:(r,o)=>{const{state:s}=r;if(o===s||!s.selection.empty)return;const i=s.schema.marks[n];if(Ve(i,`markType ${n} not found`),o.doc.eq(s.doc)&&s.selection.eq(o&&o.selection)&&fA(s,i)===fA(o,i))return;const a=bkt(n)(s);if(a&&!vkt(s,i,e)){bg(t)(s,r.dispatch,r);return}if(!a){t.getState(s).show===!0&&xkt(t)(r.state,r.dispatch,r);return}wkt(t)(r.state,r.dispatch,r)}}}})}function fA(t,e){return t&&t.storedMarks&&e.isInSet(t.storedMarks)}function bkt(t){return e=>{const{from:n,to:r}=e.selection,o=e.schema.marks[t];return Ve(o,`markType ${t} not found`),e.doc.rangeHasMark(n-1,r,o)}}function vkt(t,e,n){const{nodeBefore:r}=t.selection.$from;return!r||!e.isInSet(r.marks||[])?!1:(r.textContent||"").includes(n)}function wkt(t){return(e,n,r)=>(n&&n(e.tr.setMeta(t,{type:"RENDER_TOOLTIP"}).setMeta("addToHistory",!1)),!0)}function xkt(t){return(e,n,r)=>(n&&n(e.tr.setMeta(t,{type:"HIDE_TOOLTIP"}).setMeta("addToHistory",!1)),!0)}function k7(t,e,n){const r=t.schema.marks[e];Ve(r,`markType ${e} not found`);const{nodeBefore:o}=t.selection.$from;return!o||!r.isInSet(o.marks||[])?"":(o.textContent||"").replace(/^([^\x00-\xFF]|[\s\n])+/g,"").replace(n,"")}function _7(t){return e=>{const{trigger:n,markName:r}=t.getState(e);return k7(e,r,n)}}function R$(t){return e=>t.getState(e)&&t.getState(e).show}function $7(t,e){return(n,r,o)=>{const{markName:s}=t.getState(n),{schema:i}=n,a=i.marks[s];Ve(a,`markType ${s} not found`);const{selection:l}=n,c=Kk(a,n.doc,l.from-1,l.to);if(!c||c.start===-1)return!1;const d=(()=>{const{start:f,end:p}=c;let h=n.tr.removeStoredMark(a).replaceWith(f,p,L.empty);if(!e)return h;const y=e instanceof L;let g;try{g=e instanceof Cn||y?e:typeof e=="string"?n.schema.text(e):Cn.fromJSON(n.schema,e)}catch(b){return console.error(b),h}if(g.isText)h=h.replaceWith(f,f,g);else if(g.isBlock)h=Yf(g)(h);else if(g.isInline||y){const b=y?g:L.fromArray([g,n.schema.text(" ")]);if(h=h.replaceWith(f,f,b),TK){const w=document.getSelection();w&&w.empty()}return h=h.setSelection(Q.near(h.doc.resolve(f+b.size))),h}return h})();return r&&(o==null||o.focus(),r(d)),!0}}function bg(t){return(e,n,r)=>{const{markName:o}=t.getState(e),{schema:s,selection:i}=e,a=s.marks[o];Ve(a,`markType ${o} not found`);const l=Kk(a,e.doc,i.from-1,i.to),{start:c,end:u}=l;return c===-1&&e.storedMarks&&a.isInSet(e.storedMarks)?(n&&n(e.tr.removeStoredMark(a)),!0):c===-1?!1:(n&&n(e.tr.removeMark(c,u,a).removeStoredMark(a).setMeta("addToHistory",!1)),!0)}}function M$(t){return(e,n,r)=>(n&&n(e.tr.setMeta(t,{type:"INCREMENT_COUNTER"}).setMeta("addToHistory",!1)),!0)}function D$(t){return(e,n,r)=>(n&&n(e.tr.setMeta(t,{type:"DECREMENT_COUNTER"}).setMeta("addToHistory",!1)),!0)}function E7(t){return(e,n,r)=>(n&&n(e.tr.setMeta(t,{type:"RESET_COUNTER"}).setMeta("addToHistory",!1)),!0)}function kkt(t,e){return(n,r,o)=>(r&&r(n.tr.setMeta(t,{type:"UPDATE_COUNTER",value:e}).setMeta("addToHistory",!1)),!0)}var Kn=Object.freeze({__proto__:null,spec:dkt,plugins:fkt,commands:pkt,defaultKeys:x7,queryTriggerText:_7,queryIsSuggestTooltipActive:R$,replaceSuggestMarkWith:$7,removeSuggestMark:bg,incrementSuggestTooltipCounter:M$,decrementSuggestTooltipCounter:D$,resetSuggestTooltipCounter:E7,updateSuggestTooltipCounter:kkt}),S7={exports:{}},_kt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",$kt=_kt,Ekt=$kt;function C7(){}function T7(){}T7.resetWarningCache=C7;var Skt=function(){function t(r,o,s,i,a,l){if(l!==Ekt){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:T7,resetWarningCache:C7};return n.PropTypes=n,n};S7.exports=Skt();var Ckt=S7.exports;const $e=fs(Ckt);let mv=()=>{};const A7=new WeakMap,Tkt=t=>({create:(e,n)=>{mv("create",Jl.get(e)),t(r=>[...r,e])},update:(e,n)=>{mv("update",Jl.get(e));const r=A7.get(e);r&&r()},destroy:e=>{mv("destroy",Jl.get(e)),t(n=>n.filter(r=>r!==e))}});function Akt(t){const[e,n]=v.useState([]);return v.useEffect(()=>{let r=!1;return CG(t.current,Tkt(o=>{r||n(s=>o(s))})),()=>{r=!0}},[t]),e}let Nkt=()=>{};class N7 extends P.Component{constructor(e){super(e),this.update=()=>{this.setState((n,r)=>({nodeViewProps:r.nodeView.getNodeViewProps()}))},this.attachToContentDOM=n=>{if(!n)return;const r=this.props.nodeView.contentDOM;n.contains(r)||(r.parentNode&&r.parentNode.removeChild(r),n.appendChild(r))},e.nodeViewUpdateStore.set(e.nodeView,this.update),this.state={nodeViewProps:this.props.nodeView.getNodeViewProps()}}getChildren(){return this.props.nodeView.contentDOM?this.state.nodeViewProps.node.isInline?P.createElement("span",{className:"bangle-nv-child-container",ref:this.attachToContentDOM}):P.createElement("div",{className:"bangle-nv-child-container",ref:this.attachToContentDOM}):null}render(){Nkt("react rendering",Jl.get(this.props.nodeView));const e=this.props.renderNodeViews({...this.state.nodeViewProps,children:this.getChildren()});if(!e)throw ar("renderNodeView prop must return a react element for the node",this.state.nodeViewProps.node),new Error(`renderNodeView must handle rendering for node of type "${this.state.nodeViewProps.node.type.name}"`);return e}}N7.propTypes={nodeView:$e.object.isRequired,renderNodeViews:$e.func.isRequired,nodeViewUpdateStore:$e.instanceOf(WeakMap).isRequired};const Pkt={selected:$e.bool.isRequired,node:$e.instanceOf(Cn).isRequired,view:$e.instanceOf(A3).isRequired,getPos:$e.func.isRequired,decorations:$e.object.isRequired,attrs:$e.object.isRequired,updateAttrs:$e.func.isRequired};({...Pkt,children:$e.oneOfType([$e.element,$e.arrayOf($e.element)]).isRequired});const P7=P.createContext(null),L$=P.forwardRef(({id:t,state:e,children:n,focusOnInit:r=!0,pmViewOpts:o,renderNodeViews:s,className:i,style:a,onReady:l=()=>{}},c)=>{const u=v.useRef(null),d=v.useRef(l),f=v.useRef({state:e,focusOnInit:r,pmViewOpts:o}),[p,h]=v.useState(),y=Akt(u);if(v.useImperativeHandle(c,()=>p,[p]),v.useEffect(()=>{const g=new u4(u.current,f.current);return g.view._updatePluginWatcher=Okt(g),d.current(g),h(g),()=>{g.destroy()}},[c]),y.length>0&&s==null)throw new Error("When using nodeViews, you must provide renderNodeViews callback");return P.createElement(P.Fragment,null,P.createElement("div",{ref:u,id:t,className:i,style:a}),y.map(g=>Co.createPortal(P.createElement(N7,{debugKey:Jl.get(g),nodeViewUpdateStore:A7,nodeView:g,renderNodeViews:s}),g.containerDOM,Jl.get(g))),p?P.createElement(P7.Provider,{value:p.view},n):null)}),Okt=t=>(e,n=!1)=>{if(t.destroyed)return;let r=t.view.state;const o=n?r.plugins.filter(s=>s!==e):[...r.plugins,e];r=r.reconfigure({plugins:o}),t.view.updateState(r)};L$.propTypes={id:$e.string,renderNodeViews:$e.func,onReady:$e.func,children:$e.oneOfType([$e.element,$e.arrayOf($e.element)]),state:$e.instanceOf(t_).isRequired,pmViewOpts:$e.object,className:$e.string,style:$e.object};function O7(t){if(t.plugins&&typeof t.plugins!="function")throw new Error("plugins error: plugins must be a function");const[e]=v.useState(()=>new t_(t));return e}function Tc(t,e=!1){const n=At(),[r,o]=v.useState(t.getState(n.state));return v.useEffect(()=>{let s=o;e&&(s=IK(o));const i=Ikt(t,s);return n._updatePluginWatcher(i),()=>{e&&s.cancel(),n._updatePluginWatcher(i,!0)}},[n,t,e]),r}function At(){return v.useContext(P7)}function Ikt(t,e){return new xe({key:new Ee(`withPluginState_${t.key}`),view(){return{update(n,r){const{state:o}=n;if(r===o)return;const s=t.getState(o);s!==t.getState(r)&&e(s)}}}})}function to(t,e){return!!t.schema.nodes[e]||!!t.schema.marks[e]}const{queryIsSelectionTooltipActive:I7,querySelectionTooltipType:Rkt,hideSelectionTooltip:j$,updateSelectionTooltipType:R7}=v7,Mkt=Lkt,Dkt={focusFloatingMenuInput:Tf,toggleLinkSubMenu:hy,updateFloatingTooltipType:R7,hideFloatingMenu:j$,queryIsMenuActive:I7},F$={hide:"Escape",toggleLink:"Meta-k"},M7=(t,e)=>{if(to(t,"link")&&($o.queryIsSelectionAroundLink()(t)||$o.queryIsLinkActive()(t)))return"linkSubMenu";if(t.selection.empty)return null;if(t.selection instanceof ne)return"defaultMenu";const{from:n,to:r}=t.selection;return jkt(t.doc,n,r)?"defaultMenu":null};function Lkt({key:t=new Ee("floatingMenuPlugin"),keybindings:e=F$,tooltipRenderOpts:n={},calculateType:r=M7}={}){return[v7.plugins({key:t,calculateType:r,tooltipRenderOpts:n}),e?st(nn([[e.hide,_e(I7(t),j$(t))],[e.toggleLink,hy(t)]])):void 0]}function hy(t){return(e,n,r)=>{const o=Rkt(t)(e);return to(e,"link")?e.selection.empty?(o==="linkSubMenu"&&Mn(r,Tf(t)),!1):o==="linkSubMenu"?j$(t)(r.state,r.dispatch,r):(Mn(r,Tf(t)),R7(t,"linkSubMenu")(r.state,r.dispatch,r)):!1}}function Tf(t){return e=>{const r=t.getState(e).tooltipContentDOM.querySelector("input");return r?(r.focus(),!0):!1}}function jkt(t,e,n){let r=!1;return t.nodesBetween(e,n,(o,s)=>{if(r)return!1;if(o.isText){const i=s,a=s+o.text.length;if(!(e>=a||n<=i))return r=!0,!1}}),r}var D7=Object.freeze({__proto__:null,plugins:Mkt,commands:Dkt,defaultKeys:F$,defaultCalculateType:M7,toggleLinkSubMenu:hy,focusFloatingMenuInput:Tf});const qn=({className:t="",children:e,isActive:n,isDisabled:r,hint:o,hintPos:s="top",hintBreakWhiteSpace:i=!0,onMouseDown:a})=>P.createElement("button",{type:"button","data-bangle-balloon-break":i,"aria-label":o,"data-bangle-balloon-pos":s,disabled:r,onMouseDown:a,className:`bangle-menu-button ${n?"active":""} ${t}`},e);qn.propTypes={onMouseDown:$e.func,children:$e.oneOfType([$e.string,$e.element,$e.arrayOf($e.element)]).isRequired};function Fkt(t){return P.createElement("svg",{viewBox:"-6 -5 24 24",xmlns:"http://www.w3.org/2000/svg",...t},P.createElement("path",{d:"M5.997 14H1.72c-.618 0-1.058-.138-1.323-.415C.132 13.308 0 12.867 0 12.262V1.738C0 1.121.135.676.406.406.676.136 1.114 0 1.719 0h4.536c.669 0 1.248.041 1.738.124.49.083.93.242 1.318.478a3.458 3.458 0 0 1 1.461 1.752c.134.366.2.753.2 1.16 0 1.401-.7 2.426-2.1 3.075 1.84.586 2.76 1.726 2.76 3.42 0 .782-.2 1.487-.602 2.114a3.61 3.61 0 0 1-1.623 1.39 5.772 5.772 0 0 1-1.471.377c-.554.073-1.2.11-1.939.11zm-.21-6.217h-2.95v4.087h3.046c1.916 0 2.874-.69 2.874-2.072 0-.707-.248-1.22-.745-1.537-.496-.319-1.238-.478-2.225-.478zM2.837 2.13v3.619h2.597c.707 0 1.252-.067 1.638-.2.385-.134.68-.389.883-.765.16-.267.239-.566.239-.897 0-.707-.252-1.176-.755-1.409-.503-.232-1.27-.348-2.301-.348H2.836z"}))}function Bkt(t){return P.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",...t},P.createElement("path",{d:"M9.95263 16.9123L8.59323 18.3608L2.03082 12.2016L8.18994 5.63922L9.64826 7.00791L4.85783 12.112L9.95212 16.8932L9.95263 16.9123Z"}),P.createElement("path",{d:"M14.0474 16.9123L15.4068 18.3608L21.9692 12.2016L15.8101 5.63922L14.3517 7.00791L19.1422 12.112L14.0479 16.8932L14.0474 16.9123Z"}))}function zkt(){return P.createElement("svg",{style:{transform:"scale(1.4, 1.4)"},viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},P.createElement("path",{d:"M9 7H7V9H9V7Z"}),P.createElement("path",{d:"M7 13V11H9V13H7Z"}),P.createElement("path",{d:"M7 15V17H9V15H7Z"}),P.createElement("path",{d:"M11 15V17H17V15H11Z"}),P.createElement("path",{d:"M17 13V11H11V13H17Z"}),P.createElement("path",{d:"M17 7V9H11V7H17Z"}))}function qkt(t){return P.createElement("svg",{style:{transform:"scale(0.8, 0.8)"},viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",...t},P.createElement("path",{d:"M10.2426 16.3137L6 12.071L7.41421 10.6568L10.2426 13.4853L15.8995 7.8284L17.3137 9.24262L10.2426 16.3137Z"}),P.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1 5C1 2.79086 2.79086 1 5 1H19C21.2091 1 23 2.79086 23 5V19C23 21.2091 21.2091 23 19 23H5C2.79086 23 1 21.2091 1 19V5ZM5 3H19C20.1046 3 21 3.89543 21 5V19C21 20.1046 20.1046 21 19 21H5C3.89543 21 3 20.1046 3 19V5C3 3.89543 3.89543 3 5 3Z"}))}function Wkt(t){return P.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",...t},P.createElement("path",{d:"M11.4903 5.45801H17.4903L16.7788 7.32716H14.7788L11.2212 16.6729H13.2212L12.5097 18.5421H6.5097L7.22122 16.6729H9.22122L12.7788 7.32716H10.7788L11.4903 5.45801Z"}))}function Vkt({level:t,...e}){return P.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",...e},P.createElement("text",{x:"12",y:"12",stroke:"currentColor",textAnchor:"middle",alignmentBaseline:"central",dominantBaseline:"middle"},"H",t))}function Ukt(t){return P.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",...t},P.createElement("text",{x:"12",y:"12",stroke:"currentColor",textAnchor:"middle",alignmentBaseline:"central",dominantBaseline:"middle"},"1."))}function Hkt(t){return P.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",...t},P.createElement("path",{d:"M14.8284 12L16.2426 13.4142L19.071 10.5858C20.6331 9.02365 20.6331 6.49099 19.071 4.9289C17.509 3.3668 14.9763 3.3668 13.4142 4.9289L10.5858 7.75732L12 9.17154L14.8284 6.34311C15.6095 5.56206 16.8758 5.56206 17.6568 6.34311C18.4379 7.12416 18.4379 8.39049 17.6568 9.17154L14.8284 12Z"}),P.createElement("path",{d:"M12 14.8285L13.4142 16.2427L10.5858 19.0711C9.02372 20.6332 6.49106 20.6332 4.92896 19.0711C3.36686 17.509 3.36686 14.9764 4.92896 13.4143L7.75739 10.5858L9.1716 12L6.34317 14.8285C5.56212 15.6095 5.56212 16.8758 6.34317 17.6569C7.12422 18.4379 8.39055 18.4379 9.1716 17.6569L12 14.8285Z"}),P.createElement("path",{d:"M14.8285 10.5857C15.219 10.1952 15.219 9.56199 14.8285 9.17147C14.4379 8.78094 13.8048 8.78094 13.4142 9.17147L9.1716 13.4141C8.78107 13.8046 8.78107 14.4378 9.1716 14.8283C9.56212 15.2188 10.1953 15.2188 10.5858 14.8283L14.8285 10.5857Z"}))}function Kkt(t){return P.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",...t},P.createElement("path",{d:"M10.2426 16.3137L6 12.071L7.41421 10.6568L10.2426 13.4853L15.8995 7.8284L17.3137 9.24262L10.2426 16.3137Z"}),P.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1 12C1 5.92487 5.92487 1 12 1C18.0751 1 23 5.92487 23 12C23 18.0751 18.0751 23 12 23C5.92487 23 1 18.0751 1 12ZM12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21Z"}))}function Gkt(t){return P.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",style:{transform:"scale(1.1, 1.1)"},...t},P.createElement("path",{d:"M15.6396 7.02527H12.0181V5.02527H19.0181V12.0253H17.0181V8.47528L12.1042 13.3892L10.6899 11.975L15.6396 7.02527Z"}),P.createElement("path",{d:"M10.9819 6.97473H4.98193V18.9747H16.9819V12.9747H14.9819V16.9747H6.98193V8.97473H10.9819V6.97473Z"}))}function Zkt(t){return P.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",...t},P.createElement("path",{d:"M16.34 9.32a1 1 0 10-1.36-1.46l-2.93 2.73-2.73-2.93a1 1 0 00-1.46 1.36l2.73 2.93-2.93 2.73a1 1 0 101.36 1.46l2.93-2.73 2.73 2.93a1 1 0 101.46-1.36l-2.73-2.93 2.93-2.73z"}),P.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1 12a11 11 0 1122 0 11 11 0 01-22 0zm11 9a9 9 0 110-18 9 9 0 010 18z"}))}function Ac({className:t="",children:e}){return P.createElement("div",{className:`bangle-menu-group  ${t}`},e)}function L7({getIsTop:t=()=>!0}){const e=At(),n=$o.queryLinkAttrs()(e.state),r=n&&n.href||"";return P.createElement(Jkt,{key:r,originalHref:r,view:e,getIsTop:t})}function Jkt({getIsTop:t,view:e,originalHref:n=""}){const[r,o]=v.useState(n),s=v.useRef(null),i=()=>{$o.updateLink(r)(e.state,e.dispatch),e.focus()};return P.createElement("span",{className:"bangle-link-menu"},P.createElement("input",{value:r,ref:s,onKeyDown:a=>{if(a.key==="Enter"){a.preventDefault(),i(),e.focus();return}const l=t();if(l&&a.key==="ArrowDown"){a.preventDefault(),e.focus();return}if(!l&&a.key==="ArrowUp"){a.preventDefault(),e.focus();return}if(a.key==="Escape"){a.preventDefault(),e.focus();return}},onChange:a=>{o(a.target.value),a.preventDefault()}}),P.createElement(Ac,null,P.createElement(qn,{hint:"Visit",onMouseDown:a=>{a.preventDefault(),window.open(r,"_blank")}},P.createElement(Gkt,null))),r===n?P.createElement(qn,{hint:"Clear",onMouseDown:a=>{a.preventDefault(),$o.updateLink()(e.state,e.dispatch),e.focus()}},P.createElement(Zkt,null)):P.createElement(qn,{hint:"Save",onMouseDown:a=>{a.preventDefault(),i(),e.focus()}},P.createElement(Kkt,null)))}function Af({className:t="",children:e,...n}){return P.createElement("div",{className:`bangle-menu ${t}`,...n},e)}const{defaultKeys:Ykt,queryIsOrderedListActive:Xkt,toggleOrderedList:Qkt}=Gc,{defaultKeys:e_t,queryIsItalicActive:t_t,toggleItalic:pA}=T1,{defaultKeys:n_t,queryIsBoldActive:r_t,toggleBold:hA}=$1,{defaultKeys:o_t,queryIsCodeActive:s_t,toggleCode:mA}=S1,{defaultKeys:i_t,queryIsHeadingActive:a_t,toggleHeading:gA}=nr,{createLink:yA,queryIsLinkActive:l_t}=$o,{defaultKeys:j7,queryIsBulletListActive:c_t,queryIsTodoListActive:F7,toggleBulletList:u_t,toggleTodoList:d_t}=Kc;function B7({hint:t=`Bold
`+n_t.toggleBold,hintPos:e="top",children:n=P.createElement(Fkt,null),...r}){const o=At(),s=v.useCallback(i=>{i.preventDefault(),hA()(o.state,o.dispatch,o)&&o.dispatch&&o.focus()},[o]);return P.createElement(qn,{...r,hintPos:e,onMouseDown:s,hint:t,isActive:r_t()(o.state),isDisabled:!o.editable||!hA()(o.state)},n)}function z7({hint:t=`Italic
`+e_t.toggleItalic,hintPos:e="top",children:n=P.createElement(Wkt,null),...r}){const o=At(),s=v.useCallback(i=>{i.preventDefault(),pA()(o.state,o.dispatch,o)&&o.dispatch&&o.focus()},[o]);return P.createElement(qn,{...r,hintPos:e,onMouseDown:s,hint:t,isActive:t_t()(o.state),isDisabled:!o.editable||!pA()(o.state)},n)}function q7({hint:t=`Code
`+o_t.toggleCode,hintPos:e="top",children:n=P.createElement(Bkt,null),...r}){const o=At(),s=v.useCallback(i=>{i.preventDefault(),mA()(o.state,o.dispatch,o)&&o.dispatch&&o.focus()},[o]);return P.createElement(qn,{...r,hintPos:e,onMouseDown:s,hint:t,isActive:s_t()(o.state),isDisabled:!o.editable||!mA()(o.state)},n)}function W7({hint:t=`BulletList
`+j7.toggle,hintPos:e="top",children:n=P.createElement(zkt,null),...r}){const o=At(),s=v.useCallback(i=>{i.preventDefault(),u_t()(o.state,o.dispatch,o)&&o.dispatch&&o.focus()},[o]);return P.createElement(qn,{...r,hintPos:e,onMouseDown:s,hint:t,isDisabled:!o.editable,isActive:c_t()(o.state)&&!F7()(o.state)},n)}function f_t({hint:t=`OrderedList
`+Ykt.toggle,hintPos:e="top",children:n=P.createElement(Ukt,null),...r}){const o=At(),s=v.useCallback(i=>{i.preventDefault(),Qkt()(o.state,o.dispatch,o)&&o.dispatch&&o.focus()},[o]);return P.createElement(qn,{...r,hintPos:e,onMouseDown:s,hint:t,isDisabled:!o.editable,isActive:Xkt()(o.state)},n)}function V7({hint:t=`TodoList
`+j7.toggleTodo,hintPos:e="top",children:n=P.createElement(qkt,null),...r}){const o=At(),s=v.useCallback(i=>{i.preventDefault(),d_t()(o.state,o.dispatch,o)&&o.dispatch&&o.focus()},[o]);return P.createElement(qn,{...r,hintPos:e,onMouseDown:s,hint:t,isDisabled:!o.editable,isActive:F7()(o.state)},n)}function Nf({level:t,hint:e=`Heading${t}
`+i_t["toH"+t],hintPos:n="top",children:r=P.createElement(Vkt,{level:t}),...o}){const s=At(),i=v.useCallback(a=>{a.preventDefault(),gA(t)(s.state,s.dispatch,s)&&s.dispatch&&s.focus()},[s,t]);return P.createElement(qn,{...o,hintPos:n,onMouseDown:i,hint:e,isActive:a_t(t)(s.state),isDisabled:!s.editable||!gA(t)(s.state)},r)}Nf.propTypes={level:$e.number.isRequired};function B$({hint:t=`Link
`+F$.toggleLink,hintPos:e="top",children:n=P.createElement(Hkt,null),menuKey:r}){const o=At(),s=v.useCallback(i=>{i.preventDefault(),_e(l=>yA("")(l),(l,c,u)=>(c&&(hy(r)(u.state,u.dispatch,u),Mn(u,Tf(r))),!0))(o.state,o.dispatch,o)&&o.dispatch&&o.focus()},[o,r]);return P.createElement(qn,{onMouseDown:s,hint:t,hintPos:e,isActive:l_t()(o.state),isDisabled:!o.editable||!yA("")(o.state)},n)}B$.propTypes={menuKey:$e.instanceOf(Ee).isRequired};function z$({menuKey:t,renderMenuType:e=({type:n,menuKey:r,editorState:o})=>n==="defaultMenu"?P.createElement(Af,null,P.createElement(Ac,null,to(o,"bold")&&P.createElement(B7,null),to(o,"italic")&&P.createElement(z7,null),to(o,"code")&&P.createElement(q7,null),to(o,"link")&&P.createElement(B$,{menuKey:r})),P.createElement(Ac,null,to(o,"heading")&&P.createElement(Nf,{level:2}),to(o,"heading")&&P.createElement(Nf,{level:3}),to(o,"bulletList")&&P.createElement(W7,null),to(o,"bulletList")&&P.createElement(V7,null))):n==="linkSubMenu"?P.createElement(Af,null,P.createElement(L7,null)):null}){const n=Tc(t),r=At(),o=e({type:n.type,menuKey:t,editorState:r.state});return o?Co.createPortal(o,n.tooltipContentDOM):null}z$.propTypes={menuKey:$e.instanceOf(Ee).isRequired,renderMenuType:$e.func};$e.func.isRequired,$e.instanceOf(u4);const p_t=h_t;function h_t(){return st({"Ctrl-Shift-5":gv("medium"),"Ctrl-Shift-6":gv("utc"),"Ctrl-Shift-4":gv("short")})}function gv(t){return function(e,n){let{$from:r}=e.selection,o=r.index();if(!r.parent.canReplaceWith(o,o,e.schema.nodes.text))return!1;if(n){let s;t==="medium"&&(s=""+new Intl.DateTimeFormat("default",{dateStyle:"medium",timeStyle:"medium",hour12:!1}).format(new Date().getTime())),t==="utc"&&(s=""+new Date().toISOString()),t==="short"&&(s=""+new Intl.DateTimeFormat("default",{dateStyle:"medium",hour12:!1}).format(new Date().getTime())),n(e.tr.replaceSelectionWith(e.schema.text(s)))}return!0}}var m_t=Object.freeze({__proto__:null,plugins:p_t});const g_t=b_t,y_t="trailing_node_addon";function b_t({node:t="paragraph",notAfter:e=["paragraph"]}={}){const n=new Ee(y_t);return({schema:r})=>{const o=Object.entries(r.nodes).map(([,i])=>i).filter(i=>e.includes(i.name)),s=new WeakMap;return[new xe({key:n,view:()=>({update:i=>{const{state:a}=i,{incorrectNodeAtEnd:l}=n.getState(a);if(!l||s.has(i.state))return;const{doc:c,schema:u,tr:d}=i.state,f=u.nodes[t];Ve(f,`Node ${t} not found in schema`);const p=d.insert(c.content.size,f.create());s.set(i.state,!0),i.dispatch(p)}}),state:{init:(i,a)=>{const l=a.tr.doc.lastChild;return{incorrectNodeAtEnd:l?!o.includes(l.type):!1}},apply:(i,a)=>{if(!i.docChanged)return a;const l=i.doc.lastChild;return{incorrectNodeAtEnd:l?!o.includes(l.type):!1}}}})]}}var v_t=Object.freeze({__proto__:null,plugins:g_t});const U7=new WeakMap,bA=new WeakMap;var vA=0;const w_t=typeof window!="undefined"&&window.requestAnimationFrame?window.requestAnimationFrame:function(t){var e=new Date().getTime(),n=Math.max(0,16-(e-vA)),r=window.setTimeout(function(){t(e+n)},n);return vA=e+n,r},x_t=typeof window!="undefined"&&window.cancelAnimationFrame?window.cancelAnimationFrame:function(t){clearTimeout(t)};function k_t({pluginKey:t,intersectionObserverOpts:e}){return new xe({key:t,state:{init(n,r){return{minStartPosition:0,maxStartPosition:r.doc.content.size}},apply(n,r,o,s){const i=n.getMeta(t);if(i){let{minStartPosition:a,maxStartPosition:l}=i;return a=Math.max(0,i.minStartPosition),l=Math.min(s.doc.content.size,i.maxStartPosition),a===r.minStartPosition&&l===r.maxStartPosition?r:{minStartPosition:Math.max(0,i.minStartPosition),maxStartPosition:Math.min(s.doc.content.size,i.maxStartPosition)}}return r}},view(n){if(typeof window=="undefined")return{};let r=new Set,o;const s=()=>{let u={minStartPosition:n.state.doc.content.size,maxStartPosition:0},d=0;r.forEach(p=>{const h=U7.get(p),y=bA.get(p);typeof y=="number"&&y>0&&(d++,typeof h=="number"&&(h<u.minStartPosition&&(u.minStartPosition=h),h>u.maxStartPosition&&(u.maxStartPosition=h)))});const f=o&&o.maxStartPosition===u.maxStartPosition&&o.minStartPosition===u.minStartPosition;d>0&&!f&&(n.dispatch(n.state.tr.setMeta(t,u)),o=u)},i=(u,d)=>{n.isDestroyed||(u.forEach(f=>{bA.set(f.target,f.intersectionRatio)}),s())};let a=$_t()?new IntersectionObserver(i,e):void 0,l=()=>{const u=__t(n);r.forEach(d=>{u.has(d)||a==null||a.unobserve(d)}),u.forEach(d=>{r.has(d)||a==null||a.observe(d)}),r=u,s()},c=null;return{destroy(){c!==null&&cancelAnimationFrame(c),a==null||a.disconnect(),r.clear()},update(u,d){const{state:f}=u;d!==f&&(c!==null&&x_t(c),c=w_t(l))}}}})}function __t(t){const e=t.docView;let n=new Set;for(let r=0,o=0;r<e.children.length;r++){let s=e.children[r];for(;!s.border&&s.children.length;)s=s.children[0];const i=s.nodeDOM;i instanceof Element&&(U7.set(i,o),n.add(i)),o=o+s.size}return n}function $_t(){return typeof window!="undefined"&&"IntersectionObserver"in window}const E_t="@bangle.io/core-editor";function S_t(){const t=new Ee(E_t+":active_node");return new xe({key:t,state:{init:(e,n)=>wA(n),apply:(e,n,r,o)=>e.selectionSet?wA(o):n},props:{decorations(e){return t.getState(e)}}})}function wA(t){const e=t.selection,n=e.$from,r=e.empty?[Jt.node(n.before(),n.after(),{class:"B-editor-common_selected-node"})]:[];return rt.create(t.doc,r)}class H7{constructor(e,n,r){this.step=e,this.inverted=n,this.origin=r}}function C_t(t,e,n){for(let o=t.length-1;o>=0;o--)n.step(t[o].inverted);for(let o=0;o<e.length;o++)n.step(e[o]);let r=[];for(let o=0,s=t.length;o<t.length;o++){let i=t[o].step.map(n.mapping.slice(s));s--,i&&!n.maybeStep(i).failed&&(n.mapping.setMirror(s,n.steps.length-1),r.push(new H7(i,i.invert(n.docs[n.docs.length-1]),t[o].origin)))}return r}class vg{constructor(e,n){this.version=e,this.unconfirmed=n}}function T_t(t){let e=[];for(let n=0;n<t.steps.length;n++)e.push(new H7(t.steps[n],t.steps[n].invert(t.docs[n]),t));return e}const Go=new Ee("collab");function A_t(t={}){let e={version:t.version||0,clientID:t.clientID==null?Math.floor(Math.random()*4294967295):t.clientID};return new xe({key:Go,state:{init:()=>new vg(e.version,[]),apply(n,r){let o=n.getMeta(Go);return o||(n.docChanged?new vg(r.version,r.unconfirmed.concat(T_t(n))):r)}},config:e,historyPreserveItems:!0})}function N_t(t,e,n,r={}){let o=Go.getState(t),s=o.version+e.length,i=Go.get(t).spec.config.clientID,a=0;for(;a<n.length&&n[a]==i;)++a;let l=o.unconfirmed.slice(a);if(e=a?e.slice(a):e,!e.length)return t.tr.setMeta(Go,new vg(s,l));let c=l.length,u=t.tr;if(c)l=C_t(l,e,u);else{for(let f=0;f<e.length;f++)u.step(e[f]);l=[]}let d=new vg(s,l);return r&&r.mapSelectionBackward&&t.selection instanceof ae&&(u.setSelection(ae.between(u.doc.resolve(u.mapping.map(t.selection.anchor,-1)),u.doc.resolve(u.mapping.map(t.selection.head,-1)),-1)),u.updated&=-2),u.setMeta("rebased",c).setMeta("addToHistory",!1).setMeta(Go,d)}function q$(t){let e=Go.getState(t);return e.unconfirmed.length==0?null:{version:e.version,steps:e.unconfirmed.map(n=>n.step),clientID:Go.get(t).spec.config.clientID,get origins(){return this._origins||(this._origins=e.unconfirmed.map(n=>n.origin))}}}function Nc(t){return Go.getState(t).version}const xA=15,P_t=5,no=new Ee("bangle.dev/collab-client"),tc=new Ee("bangle.dev/collabMonitorKey");var ce;(function(t){t.Fatal="FATAL_EVENT",t.HardReset="HARD_RESET_EVENT",t.InitDoc="INIT_DOC_EVENT",t.InitError="INIT_ERROR_EVENT",t.Pull="PULL_EVENT",t.Push="PUSH_EVENT",t.PushPullError="PUSH_PULL_ERROR_EVENT",t.Ready="READY_EVENT",t.Restart="RESTART_EVENT"})(ce||(ce={}));var ro;(function(t){t.InitialDocLoadFailed="INITIAL_DOC_LOAD_FAILED",t.StuckInInfiniteLoop="STUCK_IN_INFINITE_LOOP",t.IncorrectManager="INCORRECT_MANAGER",t.HistoryNotAvailable="HISTORY_NOT_AVAILABLE",t.DocumentNotFound="DOCUMENT_NOT_FOUND",t.UnexpectedState="UNEXPECTED_STATE"})(ro||(ro={}));var _r;(function(t){t.Fatal="FATAL_STATE",t.Init="INIT_STATE",t.InitDoc="INIT_DOC_STATE",t.InitError="INIT_ERROR_STATE",t.Pull="PULL_STATE",t.Push="PUSH_STATE",t.PushPullError="PUSH_PULL_ERROR_STATE",t.Ready="READY_STATE"})(_r||(_r={}));function O_t(t,e,n){if(t.isDestroyed)return;const r=(e.steps?e.steps:[]).map(s=>Bt.fromJSON(t.state.schema,s)),o=e.clientIDs?e.clientIDs:[];if(r.length===0){n("no steps",e,"version",Nc(t.state));return}try{const s=N_t(t.state,r,o).setMeta("addToHistory",!1).setMeta("bangle.dev/isRemote",!0),i=t.state.apply(s);t.updateState(i)}catch(s){return console.error(s),!1}return n("after apply version",Nc(t.state)),!0}function I_t(t,e,n,r){if(t.isDestroyed)return;const o=t.state.selection instanceof ae?t.state.selection:void 0;let s=R_t(t.state,e,n);const i=r||o;if(i){let{from:a}=i;a>=s.doc.content.size?s=s.setSelection(Q.atEnd(s.doc)):s=s.setSelection(Q.near(s.doc.resolve(a)))}try{const a=t.state.apply(s.setMeta("bangle.dev/isRemote",!0));t.updateState(a)}catch(a){return console.error(a),!1}return!0}function R_t(t,e,n){const{schema:r,tr:o}=t,s=e instanceof Cn?e.content:(e.content||[]).map(a=>r.nodeFromJSON(a));if(!(Array.isArray(s)?s.length>0:!!s))return o;if(o.setMeta("addToHistory",!1),o.replaceWith(0,t.doc.nodeSize-2,s),o.setSelection(Q.atStart(o.doc)),typeof n!==void 0){const a={version:n,unconfirmed:[]};o.setMeta("collab$",a)}return o}function ui(t){var e;return(e=no.getState(t))===null||e===void 0?void 0:e.collabState}function M_t(){return t=>{const e=ui(t);if(e!=null&&e.isFatalState())return e.state}}function D_t(){return t=>ui(t)}function K7(){return(t,e)=>{const n=ui(t);return n==null||n.dispatchCollabPluginEvent({signal:new AbortController().signal,collabEvent:{type:ce.HardReset},debugInfo:"hard-reset"})(t,e),!0}}function G7(t){return(e,n)=>{const r=tc.getState(e);if(!r)return!1;if(r.serverVersion!==t){const o={serverVersion:t};return n==null||n(e.tr.setMeta(tc,o)),!0}return!1}}function L_t(){return(t,e)=>{const n=ui(t);return n!=null&&n.isReadyState()?(n==null||n.dispatch(new AbortController().signal,t,e,{type:ce.Push},"onLocalChanges"),!0):!1}}function Z7(){return t=>{var e;const n=(e=tc.getState(t))===null||e===void 0?void 0:e.serverVersion;return typeof n=="number"&&Nc(t)<n}}function j_t(){return(t,e)=>{const n=ui(t);return n!=null&&n.isReadyState()?(n.dispatch(new AbortController().signal,t,e,{type:ce.Pull},"collabMonitorKey(outdated-local-version)"),!0):!1}}function F_t(){return t=>{var e;const n=(e=no.getState(t))===null||e===void 0?void 0:e.previousStates;return n?n.filter(r=>r.isTaggedError).length>P_t:!1}}class Di{constructor(){this.isEditingBlocked=!1,this.isTaggedError=!1,this.createdAt=Date.now()}dispatchCollabPluginEvent(e){return(n,r)=>e.signal.aborted?!1:(r==null||r(n.tr.setMeta(no,e)),!0)}isFatalState(){return this instanceof Cp}isReadyState(){return this instanceof my}}class Cp extends Di{constructor(e,n){super(),this.state=e,this.debugInfo=n,this.isEditingBlocked=!0,this.isTaggedError=!0,this.name=_r.Fatal}dispatch(e,n,r,o,s){return this.dispatchCollabPluginEvent({signal:e,collabEvent:o,debugInfo:s})(n,r)}async runAction({signal:e,clientInfo:n,logger:r}){e.aborted||r(`Freezing document(${n.docName}) to prevent further edits due to FatalState`)}transition(e,n){return this}}class wg extends Di{constructor(e={},n){super(),this.state=e,this.debugInfo=n,this.isEditingBlocked=!0,this.name=_r.Init,this.clientCreatedAt=Date.now()}dispatch(e,n,r,o,s){return this.dispatchCollabPluginEvent({signal:e,collabEvent:o,debugInfo:s})(n,r)}async runAction({clientInfo:e,signal:n,view:r}){if(n.aborted)return;const{docName:o,userId:s,clientCom:i}=e,a="initStateAction:";if(typeof e.warmupTime=="number"&&(await PK(e.warmupTime),n.aborted))return;const l=await i.getDocument({clientCreatedAt:this.clientCreatedAt,docName:o,userId:s});if(n.aborted)return;if(!l.ok){this.dispatch(n,r.state,r.dispatch,{type:ce.InitError,payload:{failure:l.body}},a);return}const{doc:c,managerId:u,version:d}=l.body;this.dispatch(n,r.state,r.dispatch,{type:ce.InitDoc,payload:{doc:r.state.schema.nodeFromJSON(c),version:d,managerId:u,selection:void 0}},a)}transition(e,n){const r=e.type;if(r===ce.InitDoc){const{payload:o}=e;return new B_t({initialDoc:o.doc,initialSelection:o.selection,initialVersion:o.version,managerId:o.managerId,clientCreatedAt:this.clientCreatedAt},n)}else{if(r===ce.InitError)return new Dw({failure:e.payload.failure},n);console.debug("@bangle.dev/collab-client Ignoring event"+r);return}}}class B_t extends Di{constructor(e,n){super(),this.state=e,this.debugInfo=n,this.isEditingBlocked=!0,this.name=_r.InitDoc}dispatch(e,n,r,o,s){return this.dispatchCollabPluginEvent({signal:e,collabEvent:o,debugInfo:s})(n,r)}async runAction({signal:e,view:n}){if(e.aborted)return;const{initialDoc:r,initialVersion:o,initialSelection:s}=this.state;e.aborted||(I_t(n,r,o,s)===!1?this.dispatch(e,n.state,n.dispatch,{type:ce.Fatal,payload:{message:"Failed to load initial doc",errorCode:ro.InitialDocLoadFailed}}):this.dispatch(e,n.state,n.dispatch,{type:ce.Ready},`runAction:${this.name}`))}transition(e,n){const r=e.type;if(r===ce.Ready)return new my(this.state,n);if(r===ce.Fatal)return new Cp({message:e.payload.message,errorCode:e.payload.errorCode},n);console.debug("@bangle.dev/collab-client Ignoring event"+r)}}class Dw extends Di{constructor(e,n){super(),this.state=e,this.debugInfo=n,this.isEditingBlocked=!0,this.isTaggedError=!0,this.name=_r.InitError}dispatch(e,n,r,o,s){return this.dispatchCollabPluginEvent({signal:e,collabEvent:o,debugInfo:s})(n,r)}async runAction(e){await J7({...e,collabState:this})}transition(e,n){const r=e.type;if(r===ce.Restart)return new wg(void 0,n);if(r===ce.Fatal)return new Cp({message:e.payload.message,errorCode:e.payload.errorCode},n);console.debug("@bangle.dev/collab-client Ignoring event"+r)}}class my extends Di{constructor(e,n){super(),this.state=e,this.debugInfo=n,this.name=_r.Ready}dispatch(e,n,r,o,s){return this.dispatchCollabPluginEvent({signal:e,collabEvent:o,debugInfo:s})(n,r)}async runAction({signal:e,view:n}){if(e.aborted)return;const r=`runActions:${this.name}`;e.aborted||(Z7()(n.state)?this.dispatch(e,n.state,n.dispatch,{type:ce.Pull},r+"(outdated-local-version)"):q$(n.state)&&this.dispatch(e,n.state,n.dispatch,{type:ce.Push},r+"(sendable-steps)"))}transition(e,n){const r=e.type;if(r===ce.Push)return new z_t(this.state,n);if(r===ce.Pull)return new W$(this.state,n);console.debug("@bangle.dev/collab-client Ignoring event"+r)}}class z_t extends Di{constructor(e,n){super(),this.state=e,this.debugInfo=n,this.name=_r.Push}dispatch(e,n,r,o,s){return this.dispatchCollabPluginEvent({signal:e,collabEvent:o,debugInfo:s})(n,r)}async runAction({clientInfo:e,signal:n,view:r}){if(n.aborted)return;const{docName:o,userId:s,clientCom:i}=e,a="pushStateAction:",l=q$(r.state);if(!l){this.dispatch(n,r.state,r.dispatch,{type:ce.Ready},a+"(no steps):");return}const{managerId:c}=this.state,u=await i.pushEvents({clientCreatedAt:this.state.clientCreatedAt,version:Nc(r.state),steps:l?l.steps.map(d=>d.toJSON()):[],clientID:(l?l.clientID:0)+"",docName:o,userId:s,managerId:c});n.aborted||(u.ok?this.dispatch(n,r.state,r.dispatch,{type:ce.Pull},a):this.dispatch(n,r.state,r.dispatch,{type:ce.PushPullError,payload:{failure:u.body}},a))}transition(e,n){const r=e.type;if(r===ce.Ready)return new my(this.state,n);if(r===ce.Pull)return new W$(this.state,n);if(r===ce.PushPullError)return new Il({failure:e.payload.failure,initDocState:this.state},n);console.debug("@bangle.dev/collab-client Ignoring event"+r)}}class W$ extends Di{constructor(e,n){super(),this.state=e,this.debugInfo=n,this.name=_r.Pull}dispatch(e,n,r,o,s){return this.dispatchCollabPluginEvent({signal:e,collabEvent:o,debugInfo:s})(n,r)}async runAction({clientInfo:e,logger:n,signal:r,view:o}){if(r.aborted)return;const{docName:s,userId:i,clientCom:a}=e,{managerId:l}=this.state,c=await a.pullEvents({clientCreatedAt:this.state.clientCreatedAt,version:Nc(o.state),docName:s,userId:i,managerId:l});if(r.aborted)return;const u="pullStateAction:";c.ok?O_t(o,c.body,n)===!1?this.dispatch(r,o.state,o.dispatch,{type:ce.PushPullError,payload:{failure:Yn.ApplyFailed}},u+"(local-apply-failed)"):(G7(c.body.version)(o.state,o.dispatch),this.dispatch(r,o.state,o.dispatch,{type:ce.Ready},u)):this.dispatch(r,o.state,o.dispatch,{type:ce.PushPullError,payload:{failure:c.body}},u)}transition(e,n){const r=e.type;return r===ce.Ready?new my(this.state,n):r===ce.PushPullError?new Il({failure:e.payload.failure,initDocState:this.state},n):void 0}}class Il extends Di{constructor(e,n){super(),this.state=e,this.debugInfo=n,this.isTaggedError=!0,this.name=_r.PushPullError}dispatch(e,n,r,o,s){return this.dispatchCollabPluginEvent({signal:e,collabEvent:o,debugInfo:s})(n,r)}async runAction(e){await J7({...e,collabState:this})}transition(e,n){const r=e.type;if(r===ce.Restart)return new wg(void 0,n);if(r===ce.Pull)return new W$(this.state.initDocState,n);if(r===ce.Fatal)return new Cp({message:e.payload.message,errorCode:e.payload.errorCode},n);console.debug("@bangle.dev/collab-client Ignoring event"+r)}}const J7=async({clientInfo:t,view:e,logger:n,signal:r,collabState:o})=>{if(r.aborted)return;const s=o.state.failure;n("Handling failure=",s,"currentState=",o.name);const i=`pushPullErrorStateAction(${s}):`;if(F_t()(e.state)){o.dispatch(r,e.state,e.dispatch,{type:ce.Fatal,payload:{message:"Stuck in error loop, last failure: "+s,errorCode:ro.StuckInInfiniteLoop}},i);return}switch(s){case Yn.InvalidVersion:{th(()=>{r.aborted||o.dispatch(r,e.state,e.dispatch,{type:ce.Restart},i)},r,t.cooldownTime);return}case Yn.IncorrectManager:{o.dispatch(r,e.state,e.dispatch,{type:ce.Fatal,payload:{message:"Incorrect manager",errorCode:ro.IncorrectManager}},i);return}case Yn.HistoryNotAvailable:{o.dispatch(r,e.state,e.dispatch,{type:ce.Fatal,payload:{message:"History/Server not available",errorCode:ro.HistoryNotAvailable}},i);return}case Yn.DocumentNotFound:{n("Document not found"),o.dispatch(r,e.state,e.dispatch,{type:ce.Fatal,payload:{message:"Document not found",errorCode:ro.DocumentNotFound}},i);return}case Yn.OutdatedVersion:{o instanceof Il?o.dispatch(r,e.state,e.dispatch,{type:ce.Pull},i):o.dispatch(r,e.state,e.dispatch,{type:ce.Fatal,payload:{message:`Cannot handle ${s} in state=${o.name}`,errorCode:ro.UnexpectedState}},i);return}case Yn.ManagerDestroyed:{th(()=>{r.aborted||(o instanceof Il?o.dispatch(r,e.state,e.dispatch,{type:ce.Pull},i):o instanceof Dw&&o.dispatch(r,e.state,e.dispatch,{type:ce.Restart},i))},r,t.cooldownTime);return}case Yn.ApplyFailed:{o instanceof Il?th(()=>{r.aborted||o.dispatch(r,e.state,e.dispatch,{type:ce.Pull},i)},r,t.cooldownTime):o.dispatch(r,e.state,e.dispatch,{type:ce.Fatal,payload:{message:`Cannot handle ${s} in state=${o.name}`,errorCode:ro.UnexpectedState}},i);return}case Yn.ManagerUnresponsive:{th(()=>{r.aborted||(o instanceof Il?o.dispatch(r,e.state,e.dispatch,{type:ce.Pull},i):o instanceof Dw&&o.dispatch(r,e.state,e.dispatch,{type:ce.Restart},i))},r,t.cooldownTime);return}default:throw new Error(`Unknown failure ${s}`)}},q_t=!0;let W_t=!Uk&&q_t?console.debug.bind(console,"collab-client:"):()=>{};const kA={serverVersion:void 0},V_t=500,U_t=1e3;function H_t({requestTimeout:t,clientID:e,collabMessageBus:n,docName:r,managerId:o,cooldownTime:s,userId:i,warmupTime:a}){const l=c=>(...u)=>{var d;return W_t(`${e}:version=${Nc(c)}:debugInfo=${(d=no.getState(c))===null||d===void 0?void 0:d.collabState.debugInfo}`,...u)};return[new xe({key:no,filterTransaction(c,u){var d;return c.getMeta(no)||c.getMeta(tc)||c.getMeta("bangle.dev/isRemote")?!0:c.docChanged&&((d=ui(u))===null||d===void 0?void 0:d.isEditingBlocked)===!0?(console.debug("@bangle.dev/collab-client blocking transaction"),!1):!0},state:{init(){return{collabState:new wg,previousStates:[],infiniteTransitionGuard:{counter:0,lastChecked:0}}},apply(c,u,d,f){const p=c.getMeta(no);if(p===void 0||!p.collabEvent)return u;if(p.collabEvent.type===ce.HardReset)return l(f)("apply state HARD RESET, newStateName=",_r.Init,"oldStateName=",u.collabState.name),{collabState:new wg(void 0,"(HardReset)"),previousStates:[],infiniteTransitionGuard:{counter:0,lastChecked:0}};if(u.infiniteTransitionGuard.counter++,u.infiniteTransitionGuard.counter%V_t===0){if(Date.now()-u.infiniteTransitionGuard.lastChecked<=U_t)return queueMicrotask(()=>{throw new Error("Stuck in infinite transitions. Last few states: "+u.previousStates.map(y=>y.name+(y.debugInfo?`:${y.debugInfo}`:"")).join(", ").slice(0,5))}),{collabState:new Cp({message:"Infinite transitions",errorCode:ro.StuckInInfiniteLoop},"(stuck in infinite transitions)"),previousStates:[u.collabState,...u.previousStates],infiniteTransitionGuard:{counter:0,lastChecked:0}};u.infiniteTransitionGuard.lastChecked=Date.now(),u.infiniteTransitionGuard.counter=0}const h=u.collabState.transition(p.collabEvent,p.debugInfo);if(!h)return u;if(h.name!==u.collabState.name){l(f)("apply state, newStateName=",h.name,`debugInfo=${h.debugInfo}`,"oldStateName=",u.collabState.name);let y=[u.collabState,...u.previousStates];return y.length>xA&&(y=y.slice(0,xA)),{...u,collabState:h,previousStates:y}}return l(f)(`applyState IGNORE EVENT ${p.collabEvent.type} due to self transition`,`debugInfo=${p.debugInfo}`),u}},view(c){let u=new AbortController,d=new AbortController,f=new oY({clientId:e,managerId:o,docName:r,messageBus:n,signal:d.signal,requestTimeout:t,onNewVersion:({version:y})=>{G7(y)(c.state,c.dispatch)},onResetClient(){K7()(c.state,c.dispatch)}});const p=no.getState(c.state),h={clientID:e,docName:r,cooldownTime:s,clientCom:f,managerId:o,userId:i,warmupTime:a};return p&&p.collabState.runAction({clientInfo:h,view:c,signal:u.signal,logger:l(c.state)}),{destroy(){u.abort(),d.abort()},update(y,g){var b;const w=no.getState(y.state);(w==null?void 0:w.collabState)!==((b=no.getState(g))===null||b===void 0?void 0:b.collabState)&&w&&(u.abort(),u=new AbortController,w.collabState.runAction({clientInfo:h,view:y,signal:u.signal,logger:l(y.state)}))}}}}),new xe({key:tc,props:{attributes:c=>{var u;return{class:((u=ui(c))===null||u===void 0?void 0:u.isEditingBlocked)?"bangle-collab-frozen":"bangle-collab-active"}}},state:{init:(c,u)=>kA,apply:(c,u,d,f)=>{var p;const h=c.getMeta(tc);return h?(l(f)("collabMonitorKey received tr",h),{...u,...h}):((p=ui(f))===null||p===void 0?void 0:p.name)===_r.Init?kA:u}},view(c){const u=d=>{Z7()(d.state)?j_t()(d.state,d.dispatch):q$(d.state)&&L_t()(d.state,d.dispatch)};return u(c),{update(d){u(d)}}}})]}const K_t=Z_t,G_t={queryFatalError:M_t,hardResetClient:K7,queryCollabState:D_t};function Z_t({requestTimeout:t,clientID:e="client-"+Hk(),collabMessageBus:n,docName:r,managerId:o=tY,cooldownTime:s=100,warmupTime:i=0}){const a="user-"+e;return[A_t({clientID:e}),H_t({requestTimeout:t,clientID:e,collabMessageBus:n,docName:r,managerId:o,cooldownTime:s,userId:a,warmupTime:i})]}var _A=Object.freeze({__proto__:null,plugins:K_t,commands:G_t});function J_t({metadata:t}){return[_A.plugins({docName:t.wsPath,clientID:"client-"+t.editorId+"-"+Hk(4),collabMessageBus:t.collabMessageBus,cooldownTime:550,requestTimeout:1e3,warmupTime:20}),new xe({key:new Ee("collab state"),view(){let e=null;return{destroy(){e!=null&&clearTimeout(e)},update:n=>{const r=_A.commands.queryFatalError()(n.state);if(r){const{wsPath:o,nsmStore:s}=ss(n.state);console.warn(r),u5(s.state,o)||(e=setTimeout(()=>{n.isDestroyed||s.dispatch(c5({wsPath:o,title:"Editor crashed!",description:`Please manually save your work and then try reloading the application. Error - ${r.message}`,severity:J.ERROR,uid:$M()}))},300))}}}}})]}const Y_t="collapsible_heading_deco";function X_t(){const t=new Ee(Y_t);return[new xe({key:t,state:{init(e,n){return EA(n)},apply(e,n,r,o){return!e.docChanged&&!q3(g1,o,r)?n:EA(o)}},props:{decorations(e){return t.getState(e)}}})]}function $A(t,e){const n=g1.getState(e);return n?t.filter(o=>o.pos>=n.minStartPosition&&o.pos<=n.maxStartPosition):t}function EA(t){const e=new Set($A(nr.listCollapsedHeading(t),t).map(s=>s.node)),n=$A(nr.listCollapsibleHeading(t),t).filter(s=>s.node.content.size>0).map(s=>({...s,collapsed:e.has(s.node)}));function r(s,i){let a=document.createElementNS("http://www.w3.org/2000/svg",s);for(var l in i)a.setAttributeNS(null,l,i[l]);return a}const o=n.map(s=>Jt.widget(s.pos+1,i=>{let a=document.createElement("span");a.className="B-editor-common_deco-collapse-positioner";const l=document.createElement("span");l.className="B-editor-common_deco-collapse",a.appendChild(l);const c=r("svg",{viewBox:"0 0 24 24"});return c.addEventListener("click",function(u){const d=i.state.tr;i.dispatch(d.setSelection(Q.near(d.doc.resolve(s.pos)))),nr.toggleHeadingCollapse()(i.state)&&(nr.toggleHeadingCollapse()(i.state,i.dispatch,i),u.preventDefault())}),l.appendChild(c),c.setAttribute("class","B-editor-common_deco-collapse-child"),c.appendChild(r("path",{d:s.collapsed?"M10.5858 6.34317L12 4.92896L19.0711 12L12 19.0711L10.5858 17.6569L16.2427 12L10.5858 6.34317Z":"M6.34317 7.75732L4.92896 9.17154L12 16.2426L19.0711 9.17157L17.6569 7.75735L12 13.4142L6.34317 7.75732Z"})),a},{key:s.pos+(s.collapsed?"true":"false")}));return rt.create(t.doc,o)}const Q_t=function(){return new xe({props:{editable(){return _f().editingAllowed}}})};function e$t(){return a$.plugins({query:void 0,key:y1,className:"B-search-notes_bangle-search-match"})}const t$t=function(){return new xe({props:{handleDOMEvents:{focus:(e,n)=>{const{editorId:r}=ss(e.state);return r!=null&&a5(r),!1}}}})},n$t=t=>t.dom.parentElement,{queryIsSelectionAroundLink:r$t,queryIsLinkActive:o$t}=$o,s$t=()=>{Xc();const t=[$1.plugins(),S1.plugins(),T1.plugins(),k_.plugins(),$o.plugins(),__.plugins(),Qf.plugins(),_1.plugins(),Kc.plugins(),c_.plugins(),u_.plugins(),nr.plugins({keybindings:{...nr.defaultKeys,toggleCollapse:"Shift-Meta-1",toH4:void 0,toH5:void 0,toH6:void 0}}),h_.plugins(),rp.plugins(),Gc.plugins(),dG.plugins(),XJ()];return[typeof window!="undefined"&&k_t({pluginKey:g1,intersectionObserverOpts:{root:window.document.body,rootMargin:"0px",threshold:0}}),D7.plugins({key:z3,tooltipRenderOpts:{getScrollContainer:n$t},calculateType:(e,n)=>e.selection instanceof ne?null:r$t()(e)||o$t()(e)?"linkSubMenu":e.selection.empty?null:"defaultMenu"}),...t,v_t.plugins(),m_t.plugins(),new xe({props:{scrollMargin:Math.floor(window.innerHeight/4)}}),S_t(),Q_t,t$t,i$t(),J_t,X_t(),e$t()]};function i$t(){return st({Tab:t=>!0,"Meta-s":t=>!0})}function a$t(){const t=v.useCallback(({type:e,menuKey:n})=>e==="defaultMenu"?m.jsxs(Af,{children:[m.jsxs(Ac,{children:[m.jsx(B7,{}),m.jsx(z7,{}),m.jsx(q7,{}),m.jsx(B$,{menuKey:n})]}),m.jsxs(Ac,{children:[m.jsx(Nf,{level:2}),m.jsx(Nf,{level:3}),m.jsx(W7,{}),m.jsx(V7,{}),m.jsx(f_t,{})]})]}):e==="linkSubMenu"?m.jsx(Af,{children:m.jsx(L7,{})}):null,[]);return m.jsx(z$,{menuKey:z3,renderMenuType:t})}const l$t="@bangle.io/core-editor",c$t=Tt.create({name:l$t,editor:{specs:eY,plugins:[s$t],ReactComponent:a$t,markdownItPlugins:RG},application:{slices:[],operations:[{name:"operation::@bangle.io/core-editor:collapse-heading",title:"Editor: Collapse heading",hidden:!0},{name:"operation::@bangle.io/core-editor:uncollapse-all-heading",title:"Editor: Uncollapse all headings",hidden:!0},{name:"operation::@bangle.io/core-editor:move-list-up",title:"Editor: Move list up",hidden:!0},{name:"operation::@bangle.io/core-editor:move-list-down",title:"Editor: Move list down",hidden:!0}],operationHandler(){const{toggleHeadingCollapse:t,uncollapseAllHeadings:e}=nr,{moveListItemUp:n,moveListItemDown:r}=rp;return{handle(o){switch(o.name){case"operation::@bangle.io/core-editor:collapse-heading":return Uu(jn,t()),!0;case"operation::@bangle.io/core-editor:uncollapse-all-heading":return Uu(jn,e()),!0;case"operation::@bangle.io/core-editor:move-list-up":return Uu(jn,n()),!0;case"operation::@bangle.io/core-editor:move-list-down":return Uu(jn,r()),!0;default:return}}}}}}),u$t="@bangle.io/core-extension",SA="operation::@bangle.io/core-extension:RENAME_ACTIVE_NOTE",CA="operation::@bangle.io/core-extension:NOTE_TOGGLE_SIDEBAR",TA="operation::@bangle.io/core-extension:TOGGLE_UI_COLOR_SCHEME",AA="operation::@bangle.io/core-extension:DOWNLOAD_WORKSPACE_COPY",NA="operation::@bangle.io/core-extension:NEW_WORKSPACE_FROM_BACKUP",PA="operation::@bangle.io/core-extension:DELETE_ACTIVE_NOTE";function iu(t,e,n){let[r,o]=v.useState(t||e),s=v.useRef(t!==void 0),i=t!==void 0;v.useEffect(()=>{let c=s.current;c!==i&&console.warn(`WARN: A component changed from ${c?"controlled":"uncontrolled"} to ${i?"controlled":"uncontrolled"}.`),s.current=i},[i]);let a=i?t:r,l=v.useCallback((c,...u)=>{let d=(f,...p)=>{n&&(Object.is(a,f)||n(f,...p)),i||(a=f)};typeof c=="function"?(console.warn("We can not support a function callback. See Github Issues for details https://github.com/adobe/react-spectrum/issues/2320"),o((p,...h)=>{let y=c(i?a:p,...h);return d(y,...u),i?p:y})):(i||o(c),d(c,...u))},[i,a,n]);return[a,l]}const xg={prefix:String(Math.round(Math.random()*1e10)),current:0},Y7=P.createContext(xg),d$t=P.createContext(!1);let f$t=!!(typeof window!="undefined"&&window.document&&window.document.createElement),yv=new WeakMap;function p$t(t=!1){let e=v.useContext(Y7),n=v.useRef(null);if(n.current===null&&!t){var r,o;let s=(r=P.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||r===void 0||(o=r.ReactCurrentOwner)===null||o===void 0?void 0:o.current;if(s){let i=yv.get(s);i==null?yv.set(s,{id:e.current,state:s.memoizedState}):s.memoizedState!==i.state&&(e.current=i.id,yv.delete(s))}n.current=++e.current}return n.current}function h$t(t){let e=v.useContext(Y7);e===xg&&!f$t&&console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server.");let n=p$t(!!t),r=`react-aria${e.prefix}`;return t||`${r}-${n}`}function m$t(t){let e=P.useId(),[n]=v.useState(V$()),r=n?"react-aria":`react-aria${xg.prefix}`;return t||`${r}-${e}`}const g$t=typeof P.useId=="function"?m$t:h$t;function y$t(){return!1}function b$t(){return!0}function v$t(t){return()=>{}}function V$(){return typeof P.useSyncExternalStore=="function"?P.useSyncExternalStore(v$t,y$t,b$t):v.useContext(d$t)}function X7(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=X7(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function Q7(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=X7(t))&&(r&&(r+=" "),r+=e);return r}const wt=typeof document!="undefined"?P.useLayoutEffect:()=>{};function Ln(t){const e=v.useRef(null);return wt(()=>{e.current=t},[t]),v.useCallback((...n)=>{const r=e.current;return r(...n)},[])}function w$t(t){let[e,n]=v.useState(t),r=v.useRef(null),o=Ln(()=>{let i=r.current.next();if(i.done){r.current=null;return}e===i.value?o():n(i.value)});wt(()=>{r.current&&o()});let s=Ln(i=>{r.current=i(e),o()});return[e,s]}let kg=new Map;function us(t){let[e,n]=v.useState(t),r=v.useRef(null),o=g$t(e),s=v.useCallback(i=>{r.current=i},[]);return kg.set(o,s),wt(()=>{let i=o;return()=>{kg.delete(i)}},[o]),v.useEffect(()=>{let i=r.current;i&&(r.current=null,n(i))}),o}function x$t(t,e){if(t===e)return t;let n=kg.get(t);if(n)return n(e),e;let r=kg.get(e);return r?(r(t),t):e}function di(t=[]){let e=us(),[n,r]=w$t(e),o=v.useCallback(()=>{r(function*(){yield e,yield document.getElementById(e)?e:void 0})},[e,r]);return wt(o,[e,o,...t]),n}function Pc(...t){return(...e)=>{for(let n of t)typeof n=="function"&&n(...e)}}function nt(...t){let e={...t[0]};for(let n=1;n<t.length;n++){let r=t[n];for(let o in r){let s=e[o],i=r[o];typeof s=="function"&&typeof i=="function"&&o[0]==="o"&&o[1]==="n"&&o.charCodeAt(2)>=65&&o.charCodeAt(2)<=90?e[o]=Pc(s,i):(o==="className"||o==="UNSAFE_className")&&typeof s=="string"&&typeof i=="string"?e[o]=Q7(s,i):o==="id"&&s&&i?e.id=x$t(s,i):e[o]=i!==void 0?i:s}}return e}const k$t=new Set(["id"]),_$t=new Set(["aria-label","aria-labelledby","aria-describedby","aria-details"]),$$t=new Set(["href","target","rel","download","ping","referrerPolicy"]),E$t=/^(data-.*)$/;function Li(t,e={}){let{labelable:n,isLink:r,propNames:o}=e,s={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(k$t.has(i)||n&&_$t.has(i)||r&&$$t.has(i)||o!=null&&o.has(i)||E$t.test(i))&&(s[i]=t[i]);return s}function Zo(t){if(S$t())t.focus({preventScroll:!0});else{let e=C$t(t);t.focus(),T$t(e)}}let hh=null;function S$t(){if(hh==null){hh=!1;try{var t=document.createElement("div");t.focus({get preventScroll(){return hh=!0,!0}})}catch(e){}}return hh}function C$t(t){for(var e=t.parentNode,n=[],r=document.scrollingElement||document.documentElement;e instanceof HTMLElement&&e!==r;)(e.offsetHeight<e.scrollHeight||e.offsetWidth<e.scrollWidth)&&n.push({element:e,scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}),e=e.parentNode;return r instanceof HTMLElement&&n.push({element:r,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft}),n}function T$t(t){for(let{element:e,scrollTop:n,scrollLeft:r}of t)e.scrollTop=n,e.scrollLeft=r}function gy(t){var e;return typeof window=="undefined"||window.navigator==null?!1:((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.brands.some(n=>t.test(n.brand)))||t.test(window.navigator.userAgent)}function U$(t){var e;return typeof window!="undefined"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function Ci(){return U$(/^Mac/i)}function A$t(){return U$(/^iPhone/i)}function e6(){return U$(/^iPad/i)||Ci()&&navigator.maxTouchPoints>1}function yy(){return A$t()||e6()}function Vh(){return Ci()||yy()}function t6(){return gy(/AppleWebKit/i)&&!N$t()}function N$t(){return gy(/Chrome/i)}function n6(){return gy(/Android/i)}function P$t(){return gy(/Firefox/i)}const O$t=v.createContext({isNative:!0,open:R$t});function by(){return v.useContext(O$t)}function qa(t,e,n=!0){var r,o;let{metaKey:s,ctrlKey:i,altKey:a,shiftKey:l}=e;P$t()&&(!((r=window.event)===null||r===void 0||(o=r.type)===null||o===void 0)&&o.startsWith("key"))&&t.target==="_blank"&&(Ci()?s=!0:i=!0);let c=t6()&&Ci()&&!e6()?new KeyboardEvent("keydown",{keyIdentifier:"Enter",metaKey:s,ctrlKey:i,altKey:a,shiftKey:l}):new MouseEvent("click",{metaKey:s,ctrlKey:i,altKey:a,shiftKey:l,bubbles:!0,cancelable:!0});qa.isOpening=n,Zo(t),t.dispatchEvent(c),qa.isOpening=!1}qa.isOpening=!1;function I$t(t,e){if(t instanceof HTMLAnchorElement)e(t);else if(t.hasAttribute("data-href")){let n=document.createElement("a");n.href=t.getAttribute("data-href"),t.hasAttribute("data-target")&&(n.target=t.getAttribute("data-target")),t.hasAttribute("data-rel")&&(n.rel=t.getAttribute("data-rel")),t.hasAttribute("data-download")&&(n.download=t.getAttribute("data-download")),t.hasAttribute("data-ping")&&(n.ping=t.getAttribute("data-ping")),t.hasAttribute("data-referrer-policy")&&(n.referrerPolicy=t.getAttribute("data-referrer-policy")),t.appendChild(n),e(n),t.removeChild(n)}}function R$t(t,e){I$t(t,n=>qa(n,e))}let _l=new Map,Lw=new Set;function OA(){if(typeof window=="undefined")return;let t=n=>{let r=_l.get(n.target);r||(r=new Set,_l.set(n.target,r),n.target.addEventListener("transitioncancel",e)),r.add(n.propertyName)},e=n=>{let r=_l.get(n.target);if(r&&(r.delete(n.propertyName),r.size===0&&(n.target.removeEventListener("transitioncancel",e),_l.delete(n.target)),_l.size===0)){for(let o of Lw)o();Lw.clear()}};document.body.addEventListener("transitionrun",t),document.body.addEventListener("transitionend",e)}typeof document!="undefined"&&(document.readyState!=="loading"?OA():document.addEventListener("DOMContentLoaded",OA));function r6(t){requestAnimationFrame(()=>{_l.size===0?t():Lw.add(t)})}function o6(){let t=v.useRef(new Map),e=v.useCallback((o,s,i,a)=>{let l=a!=null&&a.once?(...c)=>{t.current.delete(i),i(...c)}:i;t.current.set(i,{type:s,eventTarget:o,fn:l,options:a}),o.addEventListener(s,i,a)},[]),n=v.useCallback((o,s,i,a)=>{var l;let c=((l=t.current.get(i))===null||l===void 0?void 0:l.fn)||i;o.removeEventListener(s,c,a),t.current.delete(i)},[]),r=v.useCallback(()=>{t.current.forEach((o,s)=>{n(o.eventTarget,o.type,s,o.options)})},[n]);return v.useEffect(()=>r,[r]),{addGlobalListener:e,removeGlobalListener:n,removeAllGlobalListeners:r}}function _g(t,e){let{id:n,"aria-label":r,"aria-labelledby":o}=t;return n=us(n),o&&r?o=[...new Set([n,...o.trim().split(/\s+/)])].join(" "):o&&(o=o.trim().split(/\s+/).join(" ")),!r&&!o&&e&&(r=e),{id:n,"aria-label":r,"aria-labelledby":o}}function s6(t,e){wt(()=>{if(t&&t.ref&&e)return t.ref.current=e.current,()=>{t.ref.current=null}})}function $g(t){for(Eg(t)&&(t=t.parentElement);t&&!Eg(t);)t=t.parentElement;return t||document.scrollingElement||document.documentElement}function Eg(t){let e=window.getComputedStyle(t);return/(auto|scroll)/.test(e.overflow+e.overflowX+e.overflowY)}let M$t=0;const bv=new Map;function D$t(t){let[e,n]=v.useState(void 0);return wt(()=>{if(!t)return;let r=bv.get(t);if(r)n(r.element.id);else{let o=`react-aria-description-${M$t++}`;n(o);let s=document.createElement("div");s.id=o,s.style.display="none",s.textContent=t,document.body.appendChild(s),r={refCount:0,element:s},bv.set(t,r)}return r.refCount++,()=>{--r.refCount===0&&(r.element.remove(),bv.delete(t))}},[t]),{"aria-describedby":t?e:void 0}}function L$t(t,e,n,r){let o=Ln(n),s=n==null;v.useEffect(()=>{if(s)return;let i=t.current;return i.addEventListener(e,o,r),()=>{i.removeEventListener(e,o,r)}},[t,e,r,s,o])}function i6(t,e){let n=IA(t,e,"left"),r=IA(t,e,"top"),o=e.offsetWidth,s=e.offsetHeight,i=t.scrollLeft,a=t.scrollTop,{borderTopWidth:l,borderLeftWidth:c}=getComputedStyle(t),u=t.scrollLeft+parseInt(c,10),d=t.scrollTop+parseInt(l,10),f=u+t.clientWidth,p=d+t.clientHeight;n<=i?i=n-parseInt(c,10):n+o>f&&(i+=n+o-f),r<=d?a=r-parseInt(l,10):r+s>p&&(a+=r+s-p),t.scrollLeft=i,t.scrollTop=a}function IA(t,e,n){const r=n==="left"?"offsetLeft":"offsetTop";let o=0;for(;e.offsetParent&&(o+=e[r],e.offsetParent!==t);){if(e.offsetParent.contains(t)){o-=t[r];break}e=e.offsetParent}return o}function RA(t,e){if(document.contains(t)){let i=document.scrollingElement||document.documentElement;if(window.getComputedStyle(i).overflow==="hidden"){let l=$g(t);for(;t&&l&&t!==i&&l!==i;)i6(l,t),t=l,l=$g(t)}else{var n;let{left:l,top:c}=t.getBoundingClientRect();t==null||(n=t.scrollIntoView)===null||n===void 0||n.call(t,{block:"nearest"});let{left:u,top:d}=t.getBoundingClientRect();if(Math.abs(l-u)>1||Math.abs(c-d)>1){var r,o,s;e==null||(r=e.containingElement)===null||r===void 0||(o=r.scrollIntoView)===null||o===void 0||o.call(r,{block:"center",inline:"center"}),(s=t.scrollIntoView)===null||s===void 0||s.call(t,{block:"nearest"})}}}}function jw(t){return t.mozInputSource===0&&t.isTrusted?!0:n6()&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function j$t(t){return!n6()&&t.width===0&&t.height===0||t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType==="mouse"}function F$t(t,e,n){let r=v.useRef(e),o=Ln(()=>{n&&n(r.current)});v.useEffect(()=>{var s;let i=t==null||(s=t.current)===null||s===void 0?void 0:s.form;return i==null||i.addEventListener("reset",o),()=>{i==null||i.removeEventListener("reset",o)}},[t,o])}function B$t(t,e){return e.get?e.get.call(t):e.value}function a6(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function z$t(t,e){var n=a6(t,e,"get");return B$t(t,n)}function q$t(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function W$t(t,e,n){q$t(t,e),e.set(t,n)}function V$t(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}function MA(t,e,n){var r=a6(t,e,"set");return V$t(t,r,n),n}let Rl="default",Fw="",Uh=new WeakMap;function DA(t){yy()?(Rl==="default"&&(Fw=document.documentElement.style.webkitUserSelect,document.documentElement.style.webkitUserSelect="none"),Rl="disabled"):(t instanceof HTMLElement||t instanceof SVGElement)&&(Uh.set(t,t.style.userSelect),t.style.userSelect="none")}function mh(t){if(yy()){if(Rl!=="disabled")return;Rl="restoring",setTimeout(()=>{r6(()=>{Rl==="restoring"&&(document.documentElement.style.webkitUserSelect==="none"&&(document.documentElement.style.webkitUserSelect=Fw||""),Fw="",Rl="default")})},300)}else if((t instanceof HTMLElement||t instanceof SVGElement)&&t&&Uh.has(t)){let e=Uh.get(t);t.style.userSelect==="none"&&(t.style.userSelect=e),t.getAttribute("style")===""&&t.removeAttribute("style"),Uh.delete(t)}}const l6=P.createContext(null);l6.displayName="PressResponderContext";function U$t(t){let e=v.useContext(l6);if(e){let{register:n,...r}=e;t=nt(r,t),n()}return s6(e,t.ref),t}var gh=new WeakMap;class yh{continuePropagation(){MA(this,gh,!1)}get shouldStopPropagation(){return z$t(this,gh)}constructor(e,n,r){W$t(this,gh,{writable:!0,value:void 0}),MA(this,gh,!0),this.type=e,this.pointerType=n,this.target=r.currentTarget,this.shiftKey=r.shiftKey,this.metaKey=r.metaKey,this.ctrlKey=r.ctrlKey,this.altKey=r.altKey}}const LA=Symbol("linkClicked");function vy(t){let{onPress:e,onPressChange:n,onPressStart:r,onPressEnd:o,onPressUp:s,isDisabled:i,isPressed:a,preventFocusOnPress:l,shouldCancelOnPointerExit:c,allowTextSelectionOnPress:u,ref:d,...f}=U$t(t),[p,h]=v.useState(!1),y=v.useRef({isPressed:!1,ignoreEmulatedMouseEvents:!1,ignoreClickAfterPress:!1,didFirePressStart:!1,isTriggeringEvent:!1,activePointerId:null,target:null,isOverTarget:!1,pointerType:null}),{addGlobalListener:g,removeAllGlobalListeners:b}=o6(),w=Ln(($,T)=>{let A=y.current;if(i||A.didFirePressStart)return;let N=!0;if(A.isTriggeringEvent=!0,r){let q=new yh("pressstart",T,$);r(q),N=q.shouldStopPropagation}return n&&n(!0),A.isTriggeringEvent=!1,A.didFirePressStart=!0,h(!0),N}),x=Ln(($,T,A=!0)=>{let N=y.current;if(!N.didFirePressStart)return;N.ignoreClickAfterPress=!0,N.didFirePressStart=!1,N.isTriggeringEvent=!0;let q=!0;if(o){let O=new yh("pressend",T,$);o(O),q=O.shouldStopPropagation}if(n&&n(!1),h(!1),e&&A&&!i){let O=new yh("press",T,$);e(O),q&&(q=O.shouldStopPropagation)}return N.isTriggeringEvent=!1,q}),k=Ln(($,T)=>{let A=y.current;if(!i){if(s){A.isTriggeringEvent=!0;let N=new yh("pressup",T,$);return s(N),A.isTriggeringEvent=!1,N.shouldStopPropagation}return!0}}),S=Ln($=>{let T=y.current;T.isPressed&&(T.isOverTarget&&x(Mo(T.target,$),T.pointerType,!1),T.isPressed=!1,T.isOverTarget=!1,T.activePointerId=null,T.pointerType=null,b(),u||mh(T.target))}),_=Ln($=>{c&&S($)}),C=v.useMemo(()=>{let $=y.current,T={onKeyDown(N){if(vv(N.nativeEvent,N.currentTarget)&&N.currentTarget.contains(N.target)){FA(N.target,N.key)&&N.preventDefault();let q=!0;!$.isPressed&&!N.repeat&&($.target=N.currentTarget,$.isPressed=!0,q=w(N,"keyboard"),g(document,"keyup",A,!1)),q&&N.stopPropagation(),N.metaKey&&Ci()&&$.metaKeyEvents.set(N.key,N.nativeEvent)}else N.key==="Meta"&&($.metaKeyEvents=new Map)},onKeyUp(N){vv(N.nativeEvent,N.currentTarget)&&!N.repeat&&N.currentTarget.contains(N.target)&&k(Mo($.target,N),"keyboard")},onClick(N){if(!(N&&!N.currentTarget.contains(N.target))&&N&&N.button===0&&!$.isTriggeringEvent&&!qa.isOpening){let q=!0;if(i&&N.preventDefault(),!$.ignoreClickAfterPress&&!$.ignoreEmulatedMouseEvents&&!$.isPressed&&($.pointerType==="virtual"||jw(N.nativeEvent))){!i&&!l&&Zo(N.currentTarget);let O=w(N,"virtual"),E=k(N,"virtual"),D=x(N,"virtual");q=O&&E&&D}$.ignoreEmulatedMouseEvents=!1,$.ignoreClickAfterPress=!1,q&&N.stopPropagation()}}},A=N=>{var q;if($.isPressed&&vv(N,$.target)){var O;FA(N.target,N.key)&&N.preventDefault();let E=N.target,D=x(Mo($.target,N),"keyboard",$.target.contains(E));b(),D&&N.stopPropagation(),N.key!=="Enter"&&H$($.target)&&$.target.contains(E)&&!N[LA]&&(N[LA]=!0,qa($.target,N,!1)),$.isPressed=!1,(O=$.metaKeyEvents)===null||O===void 0||O.delete(N.key)}else if(N.key==="Meta"&&(!((q=$.metaKeyEvents)===null||q===void 0)&&q.size)){let E=$.metaKeyEvents;$.metaKeyEvents=null;for(let D of E.values())$.target.dispatchEvent(new KeyboardEvent("keyup",D))}};if(typeof PointerEvent!="undefined"){T.onPointerDown=E=>{if(E.button!==0||!E.currentTarget.contains(E.target))return;if(j$t(E.nativeEvent)){$.pointerType="virtual";return}wv(E.currentTarget)&&E.preventDefault(),$.pointerType=E.pointerType;let D=!0;$.isPressed||($.isPressed=!0,$.isOverTarget=!0,$.activePointerId=E.pointerId,$.target=E.currentTarget,!i&&!l&&Zo(E.currentTarget),u||DA($.target),D=w(E,$.pointerType),g(document,"pointermove",N,!1),g(document,"pointerup",q,!1),g(document,"pointercancel",O,!1)),D&&E.stopPropagation()},T.onMouseDown=E=>{E.currentTarget.contains(E.target)&&E.button===0&&(wv(E.currentTarget)&&E.preventDefault(),E.stopPropagation())},T.onPointerUp=E=>{!E.currentTarget.contains(E.target)||$.pointerType==="virtual"||E.button===0&&fl(E,E.currentTarget)&&k(E,$.pointerType||E.pointerType)};let N=E=>{E.pointerId===$.activePointerId&&(fl(E,$.target)?$.isOverTarget||($.isOverTarget=!0,w(Mo($.target,E),$.pointerType)):$.isOverTarget&&($.isOverTarget=!1,x(Mo($.target,E),$.pointerType,!1),_(E)))},q=E=>{E.pointerId===$.activePointerId&&$.isPressed&&E.button===0&&(fl(E,$.target)?x(Mo($.target,E),$.pointerType):$.isOverTarget&&x(Mo($.target,E),$.pointerType,!1),$.isPressed=!1,$.isOverTarget=!1,$.activePointerId=null,$.pointerType=null,b(),u||mh($.target))},O=E=>{S(E)};T.onDragStart=E=>{E.currentTarget.contains(E.target)&&S(E)}}else{T.onMouseDown=O=>{if(O.button!==0||!O.currentTarget.contains(O.target))return;if(wv(O.currentTarget)&&O.preventDefault(),$.ignoreEmulatedMouseEvents){O.stopPropagation();return}$.isPressed=!0,$.isOverTarget=!0,$.target=O.currentTarget,$.pointerType=jw(O.nativeEvent)?"virtual":"mouse",!i&&!l&&Zo(O.currentTarget),w(O,$.pointerType)&&O.stopPropagation(),g(document,"mouseup",N,!1)},T.onMouseEnter=O=>{if(!O.currentTarget.contains(O.target))return;let E=!0;$.isPressed&&!$.ignoreEmulatedMouseEvents&&($.isOverTarget=!0,E=w(O,$.pointerType)),E&&O.stopPropagation()},T.onMouseLeave=O=>{if(!O.currentTarget.contains(O.target))return;let E=!0;$.isPressed&&!$.ignoreEmulatedMouseEvents&&($.isOverTarget=!1,E=x(O,$.pointerType,!1),_(O)),E&&O.stopPropagation()},T.onMouseUp=O=>{O.currentTarget.contains(O.target)&&!$.ignoreEmulatedMouseEvents&&O.button===0&&k(O,$.pointerType||"mouse")};let N=O=>{if(O.button===0){if($.isPressed=!1,b(),$.ignoreEmulatedMouseEvents){$.ignoreEmulatedMouseEvents=!1;return}fl(O,$.target)?x(Mo($.target,O),$.pointerType):$.isOverTarget&&x(Mo($.target,O),$.pointerType,!1),$.isOverTarget=!1}};T.onTouchStart=O=>{if(!O.currentTarget.contains(O.target))return;let E=H$t(O.nativeEvent);if(!E)return;$.activePointerId=E.identifier,$.ignoreEmulatedMouseEvents=!0,$.isOverTarget=!0,$.isPressed=!0,$.target=O.currentTarget,$.pointerType="touch",!i&&!l&&Zo(O.currentTarget),u||DA($.target),w(O,$.pointerType)&&O.stopPropagation(),g(window,"scroll",q,!0)},T.onTouchMove=O=>{if(!O.currentTarget.contains(O.target))return;if(!$.isPressed){O.stopPropagation();return}let E=jA(O.nativeEvent,$.activePointerId),D=!0;E&&fl(E,O.currentTarget)?$.isOverTarget||($.isOverTarget=!0,D=w(O,$.pointerType)):$.isOverTarget&&($.isOverTarget=!1,D=x(O,$.pointerType,!1),_(O)),D&&O.stopPropagation()},T.onTouchEnd=O=>{if(!O.currentTarget.contains(O.target))return;if(!$.isPressed){O.stopPropagation();return}let E=jA(O.nativeEvent,$.activePointerId),D=!0;E&&fl(E,O.currentTarget)?(k(O,$.pointerType),D=x(O,$.pointerType)):$.isOverTarget&&(D=x(O,$.pointerType,!1)),D&&O.stopPropagation(),$.isPressed=!1,$.activePointerId=null,$.isOverTarget=!1,$.ignoreEmulatedMouseEvents=!0,u||mh($.target),b()},T.onTouchCancel=O=>{O.currentTarget.contains(O.target)&&(O.stopPropagation(),$.isPressed&&S(O))};let q=O=>{$.isPressed&&O.target.contains($.target)&&S({currentTarget:$.target,shiftKey:!1,ctrlKey:!1,metaKey:!1,altKey:!1})};T.onDragStart=O=>{O.currentTarget.contains(O.target)&&S(O)}}return T},[g,i,l,b,u,S,_,x,w,k]);return v.useEffect(()=>()=>{u||mh(y.current.target)},[u]),{isPressed:a||p,pressProps:nt(f,C)}}function H$(t){return t.tagName==="A"&&t.hasAttribute("href")}function vv(t,e){const{key:n,code:r}=t,o=e,s=o.getAttribute("role");return(n==="Enter"||n===" "||n==="Spacebar"||r==="Space")&&!(o instanceof HTMLInputElement&&!c6(o,n)||o instanceof HTMLTextAreaElement||o.isContentEditable)&&!((s==="link"||!s&&H$(o))&&n!=="Enter")}function H$t(t){const{targetTouches:e}=t;return e.length>0?e[0]:null}function jA(t,e){const n=t.changedTouches;for(let r=0;r<n.length;r++){const o=n[r];if(o.identifier===e)return o}return null}function Mo(t,e){return{currentTarget:t,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,metaKey:e.metaKey,altKey:e.altKey}}function K$t(t){let e=t.width/2||t.radiusX||0,n=t.height/2||t.radiusY||0;return{top:t.clientY-n,right:t.clientX+e,bottom:t.clientY+n,left:t.clientX-e}}function G$t(t,e){return!(t.left>e.right||e.left>t.right||t.top>e.bottom||e.top>t.bottom)}function fl(t,e){let n=e.getBoundingClientRect(),r=K$t(t);return G$t(n,r)}function wv(t){return!(t instanceof HTMLElement)||!t.hasAttribute("draggable")}function FA(t,e){return t instanceof HTMLInputElement?!c6(t,e):t instanceof HTMLButtonElement?t.type!=="submit"&&t.type!=="reset":!H$(t)}const Z$t=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function c6(t,e){return t.type==="checkbox"||t.type==="radio"?e===" ":Z$t.has(t.type)}class J$t{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor(e,n){this.nativeEvent=n,this.target=n.target,this.currentTarget=n.currentTarget,this.relatedTarget=n.relatedTarget,this.bubbles=n.bubbles,this.cancelable=n.cancelable,this.defaultPrevented=n.defaultPrevented,this.eventPhase=n.eventPhase,this.isTrusted=n.isTrusted,this.timeStamp=n.timeStamp,this.type=e}}function u6(t){let e=v.useRef({isFocused:!1,observer:null});wt(()=>{const r=e.current;return()=>{r.observer&&(r.observer.disconnect(),r.observer=null)}},[]);let n=Ln(r=>{t==null||t(r)});return v.useCallback(r=>{if(r.target instanceof HTMLButtonElement||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement||r.target instanceof HTMLSelectElement){e.current.isFocused=!0;let o=r.target,s=i=>{e.current.isFocused=!1,o.disabled&&n(new J$t("blur",i)),e.current.observer&&(e.current.observer.disconnect(),e.current.observer=null)};o.addEventListener("focusout",s,{once:!0}),e.current.observer=new MutationObserver(()=>{if(e.current.isFocused&&o.disabled){e.current.observer.disconnect();let i=o===document.activeElement?null:document.activeElement;o.dispatchEvent(new FocusEvent("blur",{relatedTarget:i})),o.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:i}))}}),e.current.observer.observe(o,{attributes:!0,attributeFilter:["disabled"]})}},[n])}function K$(t){let{isDisabled:e,onFocus:n,onBlur:r,onFocusChange:o}=t;const s=v.useCallback(l=>{if(l.target===l.currentTarget)return r&&r(l),o&&o(!1),!0},[r,o]),i=u6(s),a=v.useCallback(l=>{l.target===l.currentTarget&&document.activeElement===l.target&&(n&&n(l),o&&o(!0),i(l))},[o,n,i]);return{focusProps:{onFocus:!e&&(n||o||r)?a:void 0,onBlur:!e&&(r||o)?s:void 0}}}let au=null,Bw=new Set,BA=!1,Wa=!1,zw=!1;const Y$t={Tab:!0,Escape:!0};function G$(t,e){for(let n of Bw)n(t,e)}function X$t(t){return!(t.metaKey||!Ci()&&t.altKey||t.ctrlKey||t.key==="Control"||t.key==="Shift"||t.key==="Meta")}function zA(t){Wa=!0,X$t(t)&&(au="keyboard",G$("keyboard",t))}function pl(t){au="pointer",(t.type==="mousedown"||t.type==="pointerdown")&&(Wa=!0,G$("pointer",t))}function Q$t(t){jw(t)&&(Wa=!0,au="virtual")}function eEt(t){t.target===window||t.target===document||(!Wa&&!zw&&(au="virtual",G$("virtual",t)),Wa=!1,zw=!1)}function tEt(){Wa=!1,zw=!0}function qw(){if(typeof window=="undefined"||BA)return;let t=HTMLElement.prototype.focus;HTMLElement.prototype.focus=function(){Wa=!0,t.apply(this,arguments)},document.addEventListener("keydown",zA,!0),document.addEventListener("keyup",zA,!0),document.addEventListener("click",Q$t,!0),window.addEventListener("focus",eEt,!0),window.addEventListener("blur",tEt,!1),typeof PointerEvent!="undefined"?(document.addEventListener("pointerdown",pl,!0),document.addEventListener("pointermove",pl,!0),document.addEventListener("pointerup",pl,!0)):(document.addEventListener("mousedown",pl,!0),document.addEventListener("mousemove",pl,!0),document.addEventListener("mouseup",pl,!0)),BA=!0}typeof document!="undefined"&&(document.readyState!=="loading"?qw():document.addEventListener("DOMContentLoaded",qw));function Pf(){return au!=="pointer"}function Ww(){return au}function nEt(t,e,n){return!(t&&e==="keyboard"&&n instanceof KeyboardEvent&&!Y$t[n.key])}function rEt(t,e,n){qw(),v.useEffect(()=>{let r=(o,s)=>{nEt(n==null?void 0:n.isTextInput,o,s)&&t(Pf())};return Bw.add(r),()=>{Bw.delete(r)}},e)}function wy(t){let{isDisabled:e,onBlurWithin:n,onFocusWithin:r,onFocusWithinChange:o}=t,s=v.useRef({isFocusWithin:!1}),i=v.useCallback(c=>{s.current.isFocusWithin&&!c.currentTarget.contains(c.relatedTarget)&&(s.current.isFocusWithin=!1,n&&n(c),o&&o(!1))},[n,o,s]),a=u6(i),l=v.useCallback(c=>{!s.current.isFocusWithin&&document.activeElement===c.target&&(r&&r(c),o&&o(!0),s.current.isFocusWithin=!0,a(c))},[r,o,a]);return e?{focusWithinProps:{onFocus:null,onBlur:null}}:{focusWithinProps:{onFocus:l,onBlur:i}}}let Sg=!1,xv=0;function Vw(){Sg=!0,setTimeout(()=>{Sg=!1},50)}function qA(t){t.pointerType==="touch"&&Vw()}function oEt(){if(typeof document!="undefined")return typeof PointerEvent!="undefined"?document.addEventListener("pointerup",qA):document.addEventListener("touchend",Vw),xv++,()=>{xv--,!(xv>0)&&(typeof PointerEvent!="undefined"?document.removeEventListener("pointerup",qA):document.removeEventListener("touchend",Vw))}}function lu(t){let{onHoverStart:e,onHoverChange:n,onHoverEnd:r,isDisabled:o}=t,[s,i]=v.useState(!1),a=v.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;v.useEffect(oEt,[]);let{hoverProps:l,triggerHoverEnd:c}=v.useMemo(()=>{let u=(p,h)=>{if(a.pointerType=h,o||h==="touch"||a.isHovered||!p.currentTarget.contains(p.target))return;a.isHovered=!0;let y=p.currentTarget;a.target=y,e&&e({type:"hoverstart",target:y,pointerType:h}),n&&n(!0),i(!0)},d=(p,h)=>{if(a.pointerType="",a.target=null,h==="touch"||!a.isHovered)return;a.isHovered=!1;let y=p.currentTarget;r&&r({type:"hoverend",target:y,pointerType:h}),n&&n(!1),i(!1)},f={};return typeof PointerEvent!="undefined"?(f.onPointerEnter=p=>{Sg&&p.pointerType==="mouse"||u(p,p.pointerType)},f.onPointerLeave=p=>{!o&&p.currentTarget.contains(p.target)&&d(p,p.pointerType)}):(f.onTouchStart=()=>{a.ignoreEmulatedMouseEvents=!0},f.onMouseEnter=p=>{!a.ignoreEmulatedMouseEvents&&!Sg&&u(p,"mouse"),a.ignoreEmulatedMouseEvents=!1},f.onMouseLeave=p=>{!o&&p.currentTarget.contains(p.target)&&d(p,"mouse")}),{hoverProps:f,triggerHoverEnd:d}},[e,n,r,o,a]);return v.useEffect(()=>{o&&c({currentTarget:a.target},a.pointerType)},[o]),{hoverProps:l,isHovered:s}}function sEt(t){let{ref:e,onInteractOutside:n,isDisabled:r,onInteractOutsideStart:o}=t,s=v.useRef({isPointerDown:!1,ignoreEmulatedMouseEvents:!1}),i=Ln(l=>{n&&bh(l,e)&&(o&&o(l),s.current.isPointerDown=!0)}),a=Ln(l=>{n&&n(l)});v.useEffect(()=>{let l=s.current;if(!r)if(typeof PointerEvent!="undefined"){let c=u=>{l.isPointerDown&&bh(u,e)&&a(u),l.isPointerDown=!1};return document.addEventListener("pointerdown",i,!0),document.addEventListener("pointerup",c,!0),()=>{document.removeEventListener("pointerdown",i,!0),document.removeEventListener("pointerup",c,!0)}}else{let c=d=>{l.ignoreEmulatedMouseEvents?l.ignoreEmulatedMouseEvents=!1:l.isPointerDown&&bh(d,e)&&a(d),l.isPointerDown=!1},u=d=>{l.ignoreEmulatedMouseEvents=!0,l.isPointerDown&&bh(d,e)&&a(d),l.isPointerDown=!1};return document.addEventListener("mousedown",i,!0),document.addEventListener("mouseup",c,!0),document.addEventListener("touchstart",i,!0),document.addEventListener("touchend",u,!0),()=>{document.removeEventListener("mousedown",i,!0),document.removeEventListener("mouseup",c,!0),document.removeEventListener("touchstart",i,!0),document.removeEventListener("touchend",u,!0)}}},[e,r,i,a])}function bh(t,e){if(t.button>0)return!1;if(t.target){const n=t.target.ownerDocument;if(!n||!n.documentElement.contains(t.target)||t.target.closest("[data-react-aria-top-layer]"))return!1}return e.current&&!e.current.contains(t.target)}function WA(t){if(!t)return;let e=!0;return n=>{let r={...n,preventDefault(){n.preventDefault()},isDefaultPrevented(){return n.isDefaultPrevented()},stopPropagation(){console.error("stopPropagation is now the default behavior for events in React Spectrum. You can use continuePropagation() to revert this behavior.")},continuePropagation(){e=!1}};t(r),e&&n.stopPropagation()}}function d6(t){return{keyboardProps:t.isDisabled?{}:{onKeyDown:WA(t.onKeyDown),onKeyUp:WA(t.onKeyUp)}}}const iEt=500;function f6(t){let{isDisabled:e,onLongPressStart:n,onLongPressEnd:r,onLongPress:o,threshold:s=iEt,accessibilityDescription:i}=t;const a=v.useRef(null);let{addGlobalListener:l,removeGlobalListener:c}=o6(),{pressProps:u}=vy({isDisabled:e,onPressStart(f){if(f.continuePropagation(),(f.pointerType==="mouse"||f.pointerType==="touch")&&(n&&n({...f,type:"longpressstart"}),a.current=setTimeout(()=>{f.target.dispatchEvent(new PointerEvent("pointercancel",{bubbles:!0})),o&&o({...f,type:"longpress"}),a.current=null},s),f.pointerType==="touch")){let p=h=>{h.preventDefault()};l(f.target,"contextmenu",p,{once:!0}),l(window,"pointerup",()=>{setTimeout(()=>{c(f.target,"contextmenu",p)},30)},{once:!0})}},onPressEnd(f){a.current&&clearTimeout(a.current),r&&(f.pointerType==="mouse"||f.pointerType==="touch")&&r({...f,type:"longpressend"})}}),d=D$t(o&&!e?i:null);return{longPressProps:nt(u,d)}}function Ti(t){if(Ww()==="virtual"){let e=document.activeElement;r6(()=>{document.activeElement===e&&document.contains(t)&&Zo(t)})}else Zo(t)}function aEt(t){if(!(t instanceof HTMLElement)&&!(t instanceof SVGElement))return!1;let{display:e,visibility:n}=t.style,r=e!=="none"&&n!=="hidden"&&n!=="collapse";if(r){const{getComputedStyle:o}=t.ownerDocument.defaultView;let{display:s,visibility:i}=o(t);r=s!=="none"&&i!=="hidden"&&i!=="collapse"}return r}function lEt(t,e){return!t.hasAttribute("hidden")&&(t.nodeName==="DETAILS"&&e&&e.nodeName!=="SUMMARY"?t.hasAttribute("open"):!0)}function p6(t,e){return t.nodeName!=="#comment"&&aEt(t)&&lEt(t,e)&&(!t.parentElement||p6(t.parentElement,t))}const Uw=P.createContext(null);let Xe=null;function Z$(t){let{children:e,contain:n,restoreFocus:r,autoFocus:o}=t,s=v.useRef(),i=v.useRef(),a=v.useRef([]),{parentNode:l}=v.useContext(Uw)||{},c=v.useMemo(()=>new Hw({scopeRef:a}),[a]);wt(()=>{let f=l||pt.root;if(pt.getTreeNode(f.scopeRef)&&Xe&&!Tg(Xe,f.scopeRef)){let p=pt.getTreeNode(Xe);p&&(f=p)}f.addChild(c),pt.addNode(c)},[c,l]),wt(()=>{let f=pt.getTreeNode(a);f.contain=n},[n]),wt(()=>{let f=s.current.nextSibling,p=[];for(;f&&f!==i.current;)p.push(f),f=f.nextSibling;a.current=p},[e]),gEt(a,r,n),pEt(a,n),bEt(a,r,n),mEt(a,o),v.useEffect(()=>{if(a){let f=document.activeElement,p=null;if(Gt(f,a.current)){for(let h of pt.traverse())Gt(f,h.scopeRef.current)&&(p=h);p===pt.getTreeNode(a)&&(Xe=p.scopeRef)}return()=>{let h=pt.getTreeNode(a).parent.scopeRef;(a===Xe||Tg(a,Xe))&&(!h||pt.getTreeNode(h))&&(Xe=h),pt.removeTreeNode(a)}}},[a]);let u=v.useMemo(()=>uEt(a),[]),d=v.useMemo(()=>({focusManager:u,parentNode:c}),[c,u]);return P.createElement(Uw.Provider,{value:d},P.createElement("span",{"data-focus-scope-start":!0,hidden:!0,ref:s}),e,P.createElement("span",{"data-focus-scope-end":!0,hidden:!0,ref:i}))}function cEt(){var t;return(t=v.useContext(Uw))===null||t===void 0?void 0:t.focusManager}function uEt(t){return{focusNext(e={}){let n=t.current,{from:r,tabbable:o,wrap:s,accept:i}=e,a=r||document.activeElement,l=n[0].previousElementSibling,c=Yo(da(n),{tabbable:o,accept:i},n);c.currentNode=Gt(a,n)?a:l;let u=c.nextNode();return!u&&s&&(c.currentNode=l,u=c.nextNode()),u&&Jo(u,!0),u},focusPrevious(e={}){let n=t.current,{from:r,tabbable:o,wrap:s,accept:i}=e,a=r||document.activeElement,l=n[n.length-1].nextElementSibling,c=Yo(da(n),{tabbable:o,accept:i},n);c.currentNode=Gt(a,n)?a:l;let u=c.previousNode();return!u&&s&&(c.currentNode=l,u=c.previousNode()),u&&Jo(u,!0),u},focusFirst(e={}){let n=t.current,{tabbable:r,accept:o}=e,s=Yo(da(n),{tabbable:r,accept:o},n);s.currentNode=n[0].previousElementSibling;let i=s.nextNode();return i&&Jo(i,!0),i},focusLast(e={}){let n=t.current,{tabbable:r,accept:o}=e,s=Yo(da(n),{tabbable:r,accept:o},n);s.currentNode=n[n.length-1].nextElementSibling;let i=s.previousNode();return i&&Jo(i,!0),i}}}const J$=["input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[contenteditable]"],dEt=J$.join(":not([hidden]),")+",[tabindex]:not([disabled]):not([hidden])";J$.push('[tabindex]:not([tabindex="-1"]):not([disabled])');const fEt=J$.join(':not([hidden]):not([tabindex="-1"]),');function da(t){return t[0].parentElement}function Ku(t){let e=pt.getTreeNode(Xe);for(;e&&e.scopeRef!==t;){if(e.contain)return!1;e=e.parent}return!0}function pEt(t,e){let n=v.useRef(),r=v.useRef(null);wt(()=>{let o=t.current;if(!e){r.current&&(cancelAnimationFrame(r.current),r.current=null);return}let s=l=>{if(l.key!=="Tab"||l.altKey||l.ctrlKey||l.metaKey||!Ku(t))return;let c=document.activeElement,u=t.current;if(!Gt(c,u))return;let d=Yo(da(u),{tabbable:!0},u);d.currentNode=c;let f=l.shiftKey?d.previousNode():d.nextNode();f||(d.currentNode=l.shiftKey?u[u.length-1].nextElementSibling:u[0].previousElementSibling,f=l.shiftKey?d.previousNode():d.nextNode()),l.preventDefault(),f&&Jo(f,!0)},i=l=>{(!Xe||Tg(Xe,t))&&Gt(l.target,t.current)?(Xe=t,n.current=l.target):Ku(t)&&!Cg(l.target,t)?n.current?n.current.focus():Xe&&Ag(Xe.current):Ku(t)&&(n.current=l.target)},a=l=>{r.current&&cancelAnimationFrame(r.current),r.current=requestAnimationFrame(()=>{Ku(t)&&!Cg(document.activeElement,t)&&(Xe=t,document.body.contains(l.target)?(n.current=l.target,n.current.focus()):Xe&&Ag(Xe.current))})};return document.addEventListener("keydown",s,!1),document.addEventListener("focusin",i,!1),o.forEach(l=>l.addEventListener("focusin",i,!1)),o.forEach(l=>l.addEventListener("focusout",a,!1)),()=>{document.removeEventListener("keydown",s,!1),document.removeEventListener("focusin",i,!1),o.forEach(l=>l.removeEventListener("focusin",i,!1)),o.forEach(l=>l.removeEventListener("focusout",a,!1))}},[t,e]),wt(()=>()=>{r.current&&cancelAnimationFrame(r.current)},[r])}function h6(t){return Cg(t)}function Gt(t,e){return e.some(n=>n.contains(t))}function Cg(t,e=null){if(t instanceof Element&&t.closest("[data-react-aria-top-layer]"))return!0;for(let{scopeRef:n}of pt.traverse(pt.getTreeNode(e)))if(Gt(t,n.current))return!0;return!1}function hEt(t){return Cg(t,Xe)}function Tg(t,e){var n;let r=(n=pt.getTreeNode(e))===null||n===void 0?void 0:n.parent;for(;r;){if(r.scopeRef===t)return!0;r=r.parent}return!1}function Jo(t,e=!1){if(t!=null&&!e)try{Ti(t)}catch(n){}else if(t!=null)try{t.focus()}catch(n){}}function Ag(t,e=!0){let n=t[0].previousElementSibling,r=Yo(da(t),{tabbable:e},t);r.currentNode=n;let o=r.nextNode();e&&!o&&(r=Yo(da(t),{tabbable:!1},t),r.currentNode=n,o=r.nextNode()),Jo(o)}function mEt(t,e){const n=P.useRef(e);v.useEffect(()=>{n.current&&(Xe=t,Gt(document.activeElement,Xe.current)||Ag(t.current)),n.current=!1},[t])}function gEt(t,e,n){wt(()=>{if(e||n)return;let r=t.current,o=s=>{let i=s.target;Gt(i,t.current)?Xe=t:h6(i)||(Xe=null)};return document.addEventListener("focusin",o,!1),r.forEach(s=>s.addEventListener("focusin",o,!1)),()=>{document.removeEventListener("focusin",o,!1),r.forEach(s=>s.removeEventListener("focusin",o,!1))}},[t,e,n])}function yEt(t){let e=pt.getTreeNode(Xe);for(;e&&e.scopeRef!==t;){if(e.nodeToRestore)return!1;e=e.parent}return(e==null?void 0:e.scopeRef)===t}function bEt(t,e,n){const r=v.useRef(typeof document!="undefined"?document.activeElement:null);wt(()=>{let o=t.current;if(!e||n)return;let s=()=>{(!Xe||Tg(Xe,t))&&Gt(document.activeElement,t.current)&&(Xe=t)};return document.addEventListener("focusin",s,!1),o.forEach(i=>i.addEventListener("focusin",s,!1)),()=>{document.removeEventListener("focusin",s,!1),o.forEach(i=>i.removeEventListener("focusin",s,!1))}},[t,n]),wt(()=>{if(!e)return;let o=s=>{if(s.key!=="Tab"||s.altKey||s.ctrlKey||s.metaKey||!Ku(t))return;let i=document.activeElement;if(!Gt(i,t.current))return;let a=pt.getTreeNode(t).nodeToRestore,l=Yo(document.body,{tabbable:!0});l.currentNode=i;let c=s.shiftKey?l.previousNode():l.nextNode();if((!document.body.contains(a)||a===document.body)&&(a=null,pt.getTreeNode(t).nodeToRestore=null),(!c||!Gt(c,t.current))&&a){l.currentNode=a;do c=s.shiftKey?l.previousNode():l.nextNode();while(Gt(c,t.current));s.preventDefault(),s.stopPropagation(),c?Jo(c,!0):h6(a)?Jo(a,!0):i.blur()}};return n||document.addEventListener("keydown",o,!0),()=>{n||document.removeEventListener("keydown",o,!0)}},[t,e,n]),wt(()=>{if(e)return pt.getTreeNode(t).nodeToRestore=r.current,()=>{let o=pt.getTreeNode(t).nodeToRestore;if(e&&o&&(Gt(document.activeElement,t.current)||document.activeElement===document.body&&yEt(t))){let s=pt.clone();requestAnimationFrame(()=>{if(document.activeElement===document.body){let i=s.getTreeNode(t);for(;i;){if(i.nodeToRestore&&document.body.contains(i.nodeToRestore)){Jo(i.nodeToRestore);return}i=i.parent}for(i=s.getTreeNode(t);i;){if(i.scopeRef&&pt.getTreeNode(i.scopeRef)){Ag(i.scopeRef.current,!0);return}i=i.parent}}})}}},[t,e])}function Yo(t,e,n){let r=e!=null&&e.tabbable?fEt:dEt,o=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode(s){var i;return!(e==null||(i=e.from)===null||i===void 0)&&i.contains(s)?NodeFilter.FILTER_REJECT:s.matches(r)&&p6(s)&&(!n||Gt(s,n))&&(!(e!=null&&e.accept)||e.accept(s))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});return e!=null&&e.from&&(o.currentNode=e.from),o}class Y${get size(){return this.fastMap.size}getTreeNode(e){return this.fastMap.get(e)}addTreeNode(e,n,r){let o=this.fastMap.get(n!=null?n:null),s=new Hw({scopeRef:e});o.addChild(s),s.parent=o,this.fastMap.set(e,s),r&&(s.nodeToRestore=r)}addNode(e){this.fastMap.set(e.scopeRef,e)}removeTreeNode(e){if(e===null)return;let n=this.fastMap.get(e),r=n.parent;for(let s of this.traverse())s!==n&&n.nodeToRestore&&s.nodeToRestore&&n.scopeRef.current&&Gt(s.nodeToRestore,n.scopeRef.current)&&(s.nodeToRestore=n.nodeToRestore);let o=n.children;r.removeChild(n),o.size>0&&o.forEach(s=>r.addChild(s)),this.fastMap.delete(n.scopeRef)}*traverse(e=this.root){if(e.scopeRef!=null&&(yield e),e.children.size>0)for(let n of e.children)yield*this.traverse(n)}clone(){let e=new Y$;for(let n of this.traverse())e.addTreeNode(n.scopeRef,n.parent.scopeRef,n.nodeToRestore);return e}constructor(){this.fastMap=new Map,this.root=new Hw({scopeRef:null}),this.fastMap.set(null,this.root)}}class Hw{addChild(e){this.children.add(e),e.parent=this}removeChild(e){this.children.delete(e),e.parent=void 0}constructor(e){this.children=new Set,this.contain=!1,this.scopeRef=e.scopeRef}}let pt=new Y$;function xy(t={}){let{autoFocus:e=!1,isTextInput:n,within:r}=t,o=v.useRef({isFocused:!1,isFocusVisible:e||Pf()}),[s,i]=v.useState(!1),[a,l]=v.useState(()=>o.current.isFocused&&o.current.isFocusVisible),c=v.useCallback(()=>l(o.current.isFocused&&o.current.isFocusVisible),[]),u=v.useCallback(p=>{o.current.isFocused=p,i(p),c()},[c]);rEt(p=>{o.current.isFocusVisible=p,c()},[],{isTextInput:n});let{focusProps:d}=K$({isDisabled:r,onFocusChange:u}),{focusWithinProps:f}=wy({isDisabled:!r,onFocusWithinChange:u});return{isFocused:s,isFocusVisible:a,focusProps:r?f:d}}function Tp(t){let{children:e,focusClass:n,focusRingClass:r}=t,{isFocused:o,isFocusVisible:s,focusProps:i}=xy(t),a=P.Children.only(e);return P.cloneElement(a,nt(a.props,{...i,className:Q7({[n||""]:o,[r||""]:s})}))}let vEt=P.createContext(null);function wEt(t){let e=v.useContext(vEt)||{};s6(e,t);let{ref:n,...r}=e;return r}function m6(t,e){let{focusProps:n}=K$(t),{keyboardProps:r}=d6(t),o=nt(n,r),s=wEt(e),i=t.isDisabled?{}:s,a=v.useRef(t.autoFocus);return v.useEffect(()=>{a.current&&e.current&&Ti(e.current),a.current=!1},[e]),{focusableProps:nt({...o,tabIndex:t.excludeFromTabOrder&&!t.isDisabled?-1:void 0},i)}}function ky(t,e){let{elementType:n="button",isDisabled:r,onPress:o,onPressStart:s,onPressEnd:i,onPressChange:a,preventFocusOnPress:l,allowFocusWhenDisabled:c,onClick:u,href:d,target:f,rel:p,type:h="button"}=t,y;n==="button"?y={type:h,disabled:r}:y={role:"button",tabIndex:r?void 0:0,href:n==="a"&&r?void 0:d,target:n==="a"?f:void 0,type:n==="input"?h:void 0,disabled:n==="input"?r:void 0,"aria-disabled":!r||n==="input"?void 0:r,rel:n==="a"?p:void 0};let{pressProps:g,isPressed:b}=vy({onPressStart:s,onPressEnd:i,onPressChange:a,onPress:o,isDisabled:r,preventFocusOnPress:l,ref:e}),{focusableProps:w}=m6(t,e);c&&(w.tabIndex=r?-1:w.tabIndex);let x=nt(w,g,Li(t,{labelable:!0}));return{isPressed:b,buttonProps:nt(y,x,{"aria-haspopup":t["aria-haspopup"],"aria-expanded":t["aria-expanded"],"aria-controls":t["aria-controls"],"aria-pressed":t["aria-pressed"],onClick:k=>{u&&(u(k),console.warn("onClick is deprecated, please use onPress"))}})}}function xEt(t,e,n){const{isSelected:r}=e,{isPressed:o,buttonProps:s}=ky({...t,onPress:Pc(e.toggle,t.onPress)},n);return{isPressed:o,buttonProps:nt(s,{"aria-pressed":r})}}const Gs={SOLID:"solid",GHOST:"ghost",SOFT:"soft",TRANSPARENT:"transparent"};function VA({icon:t,size:e,side:n="left",text:r}){if(!P.isValidElement(t))return null;let o="";switch(r&&(e==="xs"?o=oe(o,n==="left"?"mr-0_5":"ml-0_5"):o=oe(o,n==="left"?"mr-1":"ml-1")),e){case"xs":{o=oe(o,"w-4 h-4");break}case"sm":{o=oe(o,"w-5 h-5");break}case"md":{o=oe(o,"w-6 h-6");break}case"lg":{o=oe(o,"w-7 h-7");break}default:throw new Error("Invalid size")}return typeof t.props.className=="string"&&(t.props.className.includes("w-")||t.props.className.includes("h-"))&&console.warn("Icon size should not be set in Button Icon! Found class "+t.props.className),P.cloneElement(t,{className:oe(t.props.className,o)})}function kEt(t,e,n){let r={};const o=n.variant===Gs.GHOST,s=a=>{r.border=`2px solid ${a}`},i=a=>{r.backgroundColor=a};return r.color=t.color,o&&(s(t.color),n.isDisabled&&s(t.disabledColor)),i(t.buttonBgColor),n.isDisabled&&(i(t.disabledBgColor),r.color=t.disabledColor),n.isHovered&&!n.isDisabled&&(r.color=t.hoverColor,i(t.hoverBgColor)),n.isPressed&&!n.isDisabled&&(i(t.pressedBgColor),o&&s(t.hoverColor)),{...r,...e}}const _Et={[Gs.SOLID]:{[Ue.CAUTION]:{color:I.color.caution.solidText,buttonBgColor:I.color.caution.solid,hoverBgColor:I.color.caution.solidStrong,hoverColor:I.color.caution.solidText,pressedBgColor:I.color.caution.solidStronger,disabledBgColor:I.color.caution.solidFaint,disabledColor:I.color.neutral.textDisabled},[Ue.CRITICAL]:{color:I.color.critical.solidText,buttonBgColor:I.color.critical.solid,hoverBgColor:I.color.critical.solidStrong,hoverColor:I.color.critical.solidText,pressedBgColor:I.color.critical.solidStronger,disabledBgColor:I.color.critical.solidFaint,disabledColor:I.color.neutral.textDisabled},[Ue.NEUTRAL]:{color:I.color.neutral.solidText,buttonBgColor:I.color.neutral.solid,hoverBgColor:I.color.neutral.solidStrong,hoverColor:I.color.neutral.solidText,pressedBgColor:I.color.neutral.solidStronger,disabledBgColor:I.color.neutral.solidFaint,disabledColor:I.color.neutral.textDisabled},[Ue.SECONDARY]:{color:I.color.secondary.solidText,buttonBgColor:I.color.secondary.solid,hoverBgColor:I.color.secondary.solidStrong,hoverColor:I.color.secondary.solidText,pressedBgColor:I.color.secondary.solidStronger,disabledBgColor:I.color.secondary.solidFaint,disabledColor:I.color.neutral.textDisabled},[Ue.POSITIVE]:{color:I.color.positive.solidText,buttonBgColor:I.color.positive.solid,hoverBgColor:I.color.positive.solidStrong,hoverColor:I.color.positive.solidText,pressedBgColor:I.color.positive.solidStronger,disabledBgColor:I.color.positive.solidFaint,disabledColor:I.color.neutral.textDisabled},[Ue.PROMOTE]:{color:I.color.promote.solidText,buttonBgColor:I.color.promote.solid,hoverBgColor:I.color.promote.solidStrong,hoverColor:I.color.promote.solidText,pressedBgColor:I.color.promote.solidStronger,disabledBgColor:I.color.promote.solidFaint,disabledColor:I.color.neutral.textDisabled}},[Gs.GHOST]:{[Ue.CAUTION]:{color:I.color.caution.solid,buttonBgColor:"transparent",hoverBgColor:I.color.neutral.solidFaint,hoverColor:I.color.caution.solidStrong,pressedBgColor:I.color.neutral.border,disabledBgColor:"transparent",disabledColor:I.color.neutral.textDisabled},[Ue.CRITICAL]:{color:I.color.critical.solid,buttonBgColor:"transparent",hoverBgColor:I.color.neutral.solidFaint,hoverColor:I.color.critical.solidStrong,pressedBgColor:I.color.neutral.border,disabledBgColor:"transparent",disabledColor:I.color.neutral.textDisabled},[Ue.NEUTRAL]:{color:I.color.neutral.solid,buttonBgColor:"transparent",hoverBgColor:I.color.neutral.solidFaint,hoverColor:I.color.neutral.solidStrong,pressedBgColor:I.color.neutral.solidSubdued,disabledBgColor:"transparent",disabledColor:I.color.neutral.textDisabled},[Ue.SECONDARY]:{color:I.color.secondary.solidText,buttonBgColor:"transparent",hoverBgColor:I.color.neutral.solidFaint,hoverColor:I.color.secondary.solidText,pressedBgColor:I.color.neutral.border,disabledBgColor:"transparent",disabledColor:I.color.neutral.textDisabled},[Ue.POSITIVE]:{color:I.color.positive.solid,buttonBgColor:"transparent",hoverBgColor:I.color.neutral.solidFaint,hoverColor:I.color.positive.solidStrong,pressedBgColor:I.color.neutral.border,disabledBgColor:"transparent",disabledColor:I.color.neutral.textDisabled},[Ue.PROMOTE]:{color:I.color.promote.solid,buttonBgColor:"transparent",hoverBgColor:I.color.neutral.solidFaint,hoverColor:I.color.promote.solidStrong,pressedBgColor:I.color.neutral.border,disabledBgColor:"transparent",disabledColor:I.color.neutral.textDisabled}},[Gs.SOFT]:{[Ue.CAUTION]:{color:I.color.caution.solid,buttonBgColor:I.color.neutral.borderSubdued,hoverBgColor:I.color.neutral.border,hoverColor:I.color.caution.solid,pressedBgColor:I.color.neutral.borderStrong,disabledBgColor:"transparent",disabledColor:I.color.neutral.textDisabled},[Ue.CRITICAL]:{color:I.color.critical.solid,buttonBgColor:I.color.neutral.borderSubdued,hoverBgColor:I.color.neutral.border,hoverColor:I.color.critical.solid,pressedBgColor:I.color.neutral.borderStrong,disabledBgColor:"transparent",disabledColor:I.color.neutral.textDisabled},[Ue.NEUTRAL]:{color:I.color.neutral.text,buttonBgColor:I.color.neutral.borderSubdued,hoverBgColor:I.color.neutral.border,hoverColor:I.color.neutral.text,pressedBgColor:I.color.neutral.borderStrong,disabledBgColor:"transparent",disabledColor:I.color.neutral.textDisabled},[Ue.SECONDARY]:{color:I.color.secondary.solidText,buttonBgColor:I.color.neutral.borderSubdued,hoverBgColor:I.color.neutral.border,hoverColor:I.color.neutral.text,pressedBgColor:I.color.neutral.borderStrong,disabledBgColor:"transparent",disabledColor:I.color.neutral.textDisabled},[Ue.POSITIVE]:{color:I.color.positive.solid,buttonBgColor:I.color.neutral.borderSubdued,hoverBgColor:I.color.neutral.border,hoverColor:I.color.positive.solid,pressedBgColor:I.color.neutral.borderStrong,disabledBgColor:"transparent",disabledColor:I.color.neutral.textDisabled},[Ue.PROMOTE]:{color:I.color.promote.solid,buttonBgColor:I.color.neutral.borderSubdued,hoverBgColor:I.color.neutral.border,hoverColor:I.color.promote.solid,pressedBgColor:I.color.neutral.borderStrong,disabledBgColor:"transparent",disabledColor:I.color.neutral.textDisabled}},[Gs.TRANSPARENT]:{[Ue.CAUTION]:{color:I.color.caution.solid,buttonBgColor:"transparent",hoverBgColor:I.color.neutral.border,hoverColor:I.color.caution.solidStrong,pressedBgColor:I.color.neutral.borderStrong,disabledBgColor:"transparent",disabledColor:I.color.neutral.textDisabled},[Ue.CRITICAL]:{color:I.color.critical.solid,buttonBgColor:"transparent",hoverBgColor:I.color.neutral.border,hoverColor:I.color.critical.solidStrong,pressedBgColor:I.color.neutral.borderStrong,disabledBgColor:"transparent",disabledColor:I.color.neutral.textDisabled},[Ue.NEUTRAL]:{color:I.color.neutral.text,buttonBgColor:"transparent",hoverBgColor:I.color.neutral.border,hoverColor:I.color.neutral.text,pressedBgColor:I.color.neutral.borderStrong,disabledBgColor:"transparent",disabledColor:I.color.neutral.textDisabled},[Ue.SECONDARY]:{color:I.color.neutral.textSubdued,buttonBgColor:"transparent",hoverBgColor:I.color.neutral.border,hoverColor:I.color.neutral.text,pressedBgColor:I.color.neutral.borderStrong,disabledBgColor:"transparent",disabledColor:I.color.neutral.textDisabled},[Ue.POSITIVE]:{color:I.color.positive.solid,buttonBgColor:"transparent",hoverBgColor:I.color.neutral.border,hoverColor:I.color.positive.solidStrong,pressedBgColor:I.color.neutral.borderStrong,disabledBgColor:"transparent",disabledColor:I.color.neutral.textDisabled},[Ue.PROMOTE]:{color:I.color.promote.solid,buttonBgColor:"transparent",hoverBgColor:I.color.neutral.border,hoverColor:I.color.promote.solidStrong,pressedBgColor:I.color.neutral.border,disabledBgColor:"transparent",disabledColor:I.color.neutral.textDisabled}}},g6=({text:t,textElementProps:e,leftIcon:n,rightIcon:r,styleProps:o,elementProps:s})=>{var c;const[i,a]=$Et(o),l=t&&!n&&!r||!t&&n&&!r||!t&&!n&&r;return{...s,type:(c=s.type)!=null?c:"button",style:a,className:i,children:m.jsxs("span",{className:oe("flex flex-grow-1 overflow-hidden"),style:{justifyContent:o.justifyContent!=="auto"&&o.justifyContent?o.justifyContent:l?"center":"space-between"},children:[n&&m.jsx("span",{children:m.jsx(VA,{text:t,size:o.size,side:"left",icon:n})}),t&&m.jsx("span",{...e,className:oe("text-ellipsis overflow-hidden",e==null?void 0:e.className),children:t}),r&&m.jsx("span",{children:m.jsx(VA,{text:t,size:o.size,side:"right",icon:r})})]})}};function $Et({animateOnPress:t,className:e,isDisabled:n,isFocusVisible:r,isHovered:o,isPressed:s,isTouch:i,size:a,style:l,tone:c,variant:u,onHoverStyle:d,onPressStyle:f}){let p=e;switch(a){case"xs":{p=oe(p,"text-xs font-600 min-w-6",i?"h-7 px-3":"h-6 px-1_5");break}case"sm":{p=oe(p,"text-sm font-600 h-8 min-w-8",i?" px-3":"px-2");break}case"md":{p=oe(p,"text-base h-9 smallscreen:h-10 min-w-10",i?"px-4":"px-3");break}case"lg":{p=oe(p,"text-lg font-600 h-11 min-w-12","px-4");break}default:{let g=a;throw new Error("Invalid size "+g)}}p=oe(p,"select-none inline-flex justify-center items-center rounded-md whitespace-nowrap overflow-hidden",i?"py-2":"py-1",r&&"ring-promote",t?"transition-all duration-100":"transition-colors duration-100",t&&s&&(i?"scale-94":"scale-97"),n?"cursor-not-allowed ":"cursor-pointer");let h=_Et[u][c],y=l;return d&&o&&(y={...y,...d}),f&&s&&(y={...y,...f}),[p,kEt(h,y,{isDisabled:n,isHovered:o,isPressed:s,variant:u})]}const UA={autoFocus:!1};function qe({animateOnPress:t=!0,ariaLabel:e,className:n="",focus:r,id:o,isDisabled:s=!1,isTouch:i=lp,justifyContent:a="auto",leftIcon:l,onHoverStyle:c,onPress:u,onPressStyle:d,rightIcon:f,size:p="md",style:h={},text:y,tone:g=Ue.NEUTRAL,tooltipPlacement:b,variant:w=Gs.SOLID}){h.justifyContent&&console.warn("Button: Do not set justifyContent in style prop. Use justifyContent prop instead");const x=v.useRef(null),{autoFocus:k=UA.autoFocus}=r||UA,{hoverProps:S,isHovered:_}=lu({isDisabled:s}),{isFocusVisible:C,focusProps:$}=xy({autoFocus:k}),{buttonProps:T,isPressed:A}=ky({"aria-label":e,onPress:u,isDisabled:s,type:"button",autoFocus:k},x),N=nt(S,T,$);return m.jsx("button",{ref:x,...g6({elementProps:N,leftIcon:l,rightIcon:f,styleProps:{animateOnPress:t,className:n,isDisabled:s,isFocusVisible:C,isHovered:_,isPressed:A,isTouch:i,size:p,tone:g,style:h,variant:w,justifyContent:a,onHoverStyle:c,onPressStyle:d},text:y})})}function rr({className:t="",hint:e,hintPos:n="bottom",children:r,onClick:o,active:s,style:i,removeFocus:a=!0}){return m.jsx("button",{type:"button","aria-label":e,"data-bangle-editor-pos":n,"data-bangle-editor-break":!0,className:oe(s&&"BU_active",a&&"focus:outline-none",t),onClick:o,style:i,children:r})}function y6({children:t,collapse:e=!0,className:n,justify:r="start",reverseRow:o,gap:s=2}){return m.jsx("div",{className:oe(n,"flex flex-wrap",e&&"smallscreen:flex-col",s===1?"gap-1":s===2?"gap-2":s===3?"gap-3":"gap-4",o?"flex-row-reverse":"flex-row",r&&(r==="center"?"justify-center":r==="start"?"justify-start":"justify-end")),children:t})}function Ap({childClassName:t,children:e,className:n,title:r,actions:o,dataTestId:s}){return m.jsx("div",{"data-testid":s,className:oe("w-full h-full smallscreen:h-screen flex flex-col px-8 mt-6","lg:p-0 lg:m-0 justify-center smallscreen:justify-start items-center",n),children:m.jsx("div",{className:"w-full rounded-lg border-neutral bg-colorNeutralBgLayerTop",style:{padding:I.misc.pagePadding,maxWidth:`min(${I.misc.pageMaxWidth}, 100vw)`},children:m.jsxs("div",{className:oe("w-full",t),style:{maxWidth:`min(${I.misc.pageMaxWidth}, 100vw)`},children:[r&&m.jsx("h1",{className:"mb-3 text-2xl leading-none",children:r}),m.jsx("div",{className:"text-base sm:mb-1",children:e}),o&&m.jsx(y6,{collapse:!0,className:"mt-6 ",children:o})]})})})}function EEt(t,e){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:e},t),v.createElement("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"}))}const SEt=v.forwardRef(EEt),b6=SEt;function CEt(t,e){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:e},t),v.createElement("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"}))}const TEt=v.forwardRef(CEt),AEt=TEt,v6=7e3;let kv=null;function _v(t,e="assertive",n=v6){kv||(kv=new NEt),kv.announce(t,e,n)}class NEt{createLog(e){let n=document.createElement("div");return n.setAttribute("role","log"),n.setAttribute("aria-live",e),n.setAttribute("aria-relevant","additions"),n}destroy(){this.node&&(document.body.removeChild(this.node),this.node=null)}announce(e,n="assertive",r=v6){if(!this.node)return;let o=document.createElement("div");o.textContent=e,n==="assertive"?this.assertiveLog.appendChild(o):this.politeLog.appendChild(o),e!==""&&setTimeout(()=>{o.remove()},r)}clear(e){this.node&&((!e||e==="assertive")&&(this.assertiveLog.innerHTML=""),(!e||e==="polite")&&(this.politeLog.innerHTML=""))}constructor(){this.node=document.createElement("div"),this.node.dataset.liveAnnouncer="true",Object.assign(this.node.style,{border:0,clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"}),this.assertiveLog=this.createLog("assertive"),this.node.appendChild(this.assertiveLog),this.politeLog=this.createLog("polite"),this.node.appendChild(this.politeLog),document.body.prepend(this.node)}}class PEt{getStringForLocale(e,n){let r=this.strings[n];r||(r=OEt(n,this.strings,this.defaultLocale),this.strings[n]=r);let o=r[e];if(!o)throw new Error(`Could not find intl message ${e} in ${n} locale`);return o}constructor(e,n="en-US"){this.strings={...e},this.defaultLocale=n}}function OEt(t,e,n="en-US"){if(e[t])return e[t];let r=IEt(t);if(e[r])return e[r];for(let o in e)if(o.startsWith(r+"-"))return e[o];return e[n]}function IEt(t){return Intl.Locale?new Intl.Locale(t).language:t.split("-")[0]}const HA=new Map,KA=new Map;class REt{format(e,n){let r=this.strings.getStringForLocale(e,this.locale);return typeof r=="function"?r(n,this):r}plural(e,n,r="cardinal"){let o=n["="+e];if(o)return typeof o=="function"?o():o;let s=this.locale+":"+r,i=HA.get(s);i||(i=new Intl.PluralRules(this.locale,{type:r}),HA.set(s,i));let a=i.select(e);return o=n[a]||n.other,typeof o=="function"?o():o}number(e){let n=KA.get(this.locale);return n||(n=new Intl.NumberFormat(this.locale),KA.set(this.locale,n)),n.format(e)}select(e,n){let r=e[n]||e.other;return typeof r=="function"?r():r}constructor(e,n){this.locale=e,this.strings=n}}const MEt=new Set(["Arab","Syrc","Samr","Mand","Thaa","Mend","Nkoo","Adlm","Rohg","Hebr"]),DEt=new Set(["ae","ar","arc","bcc","bqi","ckb","dv","fa","glk","he","ku","mzn","nqo","pnb","ps","sd","ug","ur","yi"]);function LEt(t){if(Intl.Locale){let n=new Intl.Locale(t).maximize().script;return MEt.has(n)}let e=t.split("-")[0];return DEt.has(e)}function w6(){let t=typeof navigator!="undefined"&&(navigator.language||navigator.userLanguage)||"en-US";try{Intl.DateTimeFormat.supportedLocalesOf([t])}catch(e){t="en-US"}return{locale:t,direction:LEt(t)?"rtl":"ltr"}}let Kw=w6(),Gu=new Set;function GA(){Kw=w6();for(let t of Gu)t(Kw)}function jEt(){let t=V$(),[e,n]=v.useState(Kw);return v.useEffect(()=>(Gu.size===0&&window.addEventListener("languagechange",GA),Gu.add(n),()=>{Gu.delete(n),Gu.size===0&&window.removeEventListener("languagechange",GA)}),[]),t?{locale:"en-US",direction:"ltr"}:e}const FEt=P.createContext(null);function _y(){let t=jEt();return v.useContext(FEt)||t}const ZA=new WeakMap;function BEt(t){let e=ZA.get(t);return e||(e=new PEt(t),ZA.set(t,e)),e}function X$(t){let{locale:e}=_y(),n=v.useMemo(()=>BEt(t),[t]);return v.useMemo(()=>new REt(e,n),[e,n])}let $v=new Map;function x6(t){let{locale:e}=_y(),n=e+(t?Object.entries(t).sort((o,s)=>o[0]<s[0]?-1:1).join():"");if($v.has(n))return $v.get(n);let r=new Intl.Collator(e,t);return $v.set(n,r),r}function zEt(t){let e=x6({usage:"search",...t}),n=v.useCallback((s,i)=>i.length===0?!0:(s=s.normalize("NFC"),i=i.normalize("NFC"),e.compare(s.slice(0,i.length),i)===0),[e]),r=v.useCallback((s,i)=>i.length===0?!0:(s=s.normalize("NFC"),i=i.normalize("NFC"),e.compare(s.slice(-i.length),i)===0),[e]),o=v.useCallback((s,i)=>{if(i.length===0)return!0;s=s.normalize("NFC"),i=i.normalize("NFC");let a=0,l=i.length;for(;a+l<=s.length;a++){let c=s.slice(a,a+l);if(e.compare(i,c)===0)return!0}return!1},[e]);return v.useMemo(()=>({startsWith:n,endsWith:r,contains:o}),[n,r,o])}const JA={border:0,clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"};function qEt(t={}){let{style:e,isFocusable:n}=t,[r,o]=v.useState(!1),{focusWithinProps:s}=wy({isDisabled:!n,onFocusWithinChange:a=>o(a)}),i=v.useMemo(()=>r?e:e?{...JA,...e}:JA,[r]);return{visuallyHiddenProps:{...s,style:i}}}function WEt(t){let{children:e,elementType:n="div",isFocusable:r,style:o,...s}=t,{visuallyHiddenProps:i}=qEt(t);return P.createElement(n,nt(s,i),e)}function VEt(t){return t&&t.__esModule?t.default:t}const UEt=new WeakMap,Do=[];function k6(t,e){let{onClose:n,shouldCloseOnBlur:r,isOpen:o,isDismissable:s=!1,isKeyboardDismissDisabled:i=!1,shouldCloseOnInteractOutside:a}=t;v.useEffect(()=>(o&&Do.push(e),()=>{let h=Do.indexOf(e);h>=0&&Do.splice(h,1)}),[o,e]);let l=()=>{Do[Do.length-1]===e&&n&&n()},c=h=>{(!a||a(h.target))&&Do[Do.length-1]===e&&(h.stopPropagation(),h.preventDefault())},u=h=>{(!a||a(h.target))&&(Do[Do.length-1]===e&&(h.stopPropagation(),h.preventDefault()),l())},d=h=>{h.key==="Escape"&&!i&&(h.stopPropagation(),h.preventDefault(),l())};sEt({ref:e,onInteractOutside:s?u:null,onInteractOutsideStart:c});let{focusWithinProps:f}=wy({isDisabled:!r,onBlurWithin:h=>{!h.relatedTarget||hEt(h.relatedTarget)||(!a||a(h.relatedTarget))&&n()}}),p=h=>{h.target===h.currentTarget&&h.preventDefault()};return{overlayProps:{onKeyDown:d,...f},underlayProps:{onPointerDown:p}}}function HEt(t,e,n){let{type:r}=t,{isOpen:o}=e;v.useEffect(()=>{n&&n.current&&UEt.set(n.current,e.close)});let s;r==="menu"?s=!0:r==="listbox"&&(s="listbox");let i=us();return{triggerProps:{"aria-haspopup":s,"aria-expanded":o,"aria-controls":o?i:null,onPress:e.toggle},overlayProps:{id:i}}}const Ev=typeof document!="undefined"&&window.visualViewport,KEt=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let vh=0,Sv;function GEt(t={}){let{isDisabled:e}=t;wt(()=>{if(!e)return vh++,vh===1&&(yy()?Sv=JEt():Sv=ZEt()),()=>{vh--,vh===0&&Sv()}},[e])}function ZEt(){return Pc(Cd(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`),Cd(document.documentElement,"overflow","hidden"))}function JEt(){let t,e=0,n=d=>{t=$g(d.target),!(t===document.documentElement&&t===document.body)&&(e=d.changedTouches[0].pageY)},r=d=>{if(!t||t===document.documentElement||t===document.body){d.preventDefault();return}let f=d.changedTouches[0].pageY,p=t.scrollTop,h=t.scrollHeight-t.clientHeight;h!==0&&((p<=0&&f>e||p>=h&&f<e)&&d.preventDefault(),e=f)},o=d=>{let f=d.target;XA(f)&&f!==document.activeElement&&(d.preventDefault(),f.style.transform="translateY(-2000px)",f.focus(),requestAnimationFrame(()=>{f.style.transform=""}))},s=d=>{let f=d.target;XA(f)&&(f.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{f.style.transform="",Ev&&(Ev.height<window.innerHeight?requestAnimationFrame(()=>{YA(f)}):Ev.addEventListener("resize",()=>YA(f),{once:!0}))}))},i=()=>{window.scrollTo(0,0)},a=window.pageXOffset,l=window.pageYOffset,c=Pc(Cd(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`),Cd(document.documentElement,"overflow","hidden"),Cd(document.body,"marginTop",`-${l}px`));window.scrollTo(0,0);let u=Pc(Ou(document,"touchstart",n,{passive:!1,capture:!0}),Ou(document,"touchmove",r,{passive:!1,capture:!0}),Ou(document,"touchend",o,{passive:!1,capture:!0}),Ou(document,"focus",s,!0),Ou(window,"scroll",i));return()=>{c(),u(),window.scrollTo(a,l)}}function Cd(t,e,n){let r=t.style[e];return t.style[e]=n,()=>{t.style[e]=r}}function Ou(t,e,n,r){return t.addEventListener(e,n,r),()=>{t.removeEventListener(e,n,r)}}function YA(t){let e=document.scrollingElement||document.documentElement;for(;t&&t!==e;){let n=$g(t);if(n!==document.documentElement&&n!==document.body&&n!==t){let r=n.getBoundingClientRect().top,o=t.getBoundingClientRect().top;o>r+t.clientHeight&&(n.scrollTop+=o-r)}t=n.parentElement}}function XA(t){return t instanceof HTMLInputElement&&!KEt.has(t.type)||t instanceof HTMLTextAreaElement||t instanceof HTMLElement&&t.isContentEditable}const Ng=P.createContext(null);function YEt(t){let{children:e}=t,n=v.useContext(Ng),[r,o]=v.useState(0),s=v.useMemo(()=>({parent:n,modalCount:r,addModal(){o(i=>i+1),n&&n.addModal()},removeModal(){o(i=>i-1),n&&n.removeModal()}}),[n,r]);return P.createElement(Ng.Provider,{value:s},e)}function XEt(){let t=v.useContext(Ng);return{modalProviderProps:{"aria-hidden":t&&t.modalCount>0?!0:null}}}function QEt(t){let{modalProviderProps:e}=XEt();return P.createElement("div",{"data-overlay-container":!0,...t,...e})}function _6(t){return P.createElement(YEt,null,P.createElement(QEt,t))}function eSt(t){let e=V$(),{portalContainer:n=e?null:document.body,...r}=t;if(P.useEffect(()=>{if(n!=null&&n.closest("[data-overlay-container]"))throw new Error("An OverlayContainer must not be inside another container. Please change the portalContainer prop.")},[n]),!n)return null;let o=P.createElement(_6,r);return Co.createPortal(o,n)}function tSt(t){let e=v.useContext(Ng);if(!e)throw new Error("Modal is not contained within a provider");return v.useEffect(()=>{if(!(t!=null&&t.isDisabled||!e||!e.parent))return e.parent.addModal(),()=>{e&&e.parent&&e.parent.removeModal()}},[e,e.parent,t==null?void 0:t.isDisabled]),{modalProps:{"data-ismodal":!(t!=null&&t.isDisabled)}}}var $6={},E6={};E6={dismiss:""};var S6={};S6={dismiss:""};var C6={};C6={dismiss:"Odstranit"};var T6={};T6={dismiss:"Luk"};var A6={};A6={dismiss:"Schlieen"};var N6={};N6={dismiss:""};var P6={};P6={dismiss:"Dismiss"};var O6={};O6={dismiss:"Descartar"};var I6={};I6={dismiss:"Lpeta"};var R6={};R6={dismiss:"Hylk"};var M6={};M6={dismiss:"Rejeter"};var D6={};D6={dismiss:""};var L6={};L6={dismiss:"Odbaci"};var j6={};j6={dismiss:"Elutasts"};var F6={};F6={dismiss:"Ignora"};var B6={};B6={dismiss:""};var z6={};z6={dismiss:""};var q6={};q6={dismiss:"Atmesti"};var W6={};W6={dismiss:"Nerdt"};var V6={};V6={dismiss:"Lukk"};var U6={};U6={dismiss:"Negeren"};var H6={};H6={dismiss:"Zignoruj"};var K6={};K6={dismiss:"Descartar"};var G6={};G6={dismiss:"Dispensar"};var Z6={};Z6={dismiss:"Revocare"};var J6={};J6={dismiss:""};var Y6={};Y6={dismiss:"Zrui"};var X6={};X6={dismiss:"Opusti"};var Q6={};Q6={dismiss:"Odbaci"};var eL={};eL={dismiss:"Avvisa"};var tL={};tL={dismiss:"Kapat"};var nL={};nL={dismiss:""};var rL={};rL={dismiss:""};var oL={};oL={dismiss:""};$6={"ar-AE":E6,"bg-BG":S6,"cs-CZ":C6,"da-DK":T6,"de-DE":A6,"el-GR":N6,"en-US":P6,"es-ES":O6,"et-EE":I6,"fi-FI":R6,"fr-FR":M6,"he-IL":D6,"hr-HR":L6,"hu-HU":j6,"it-IT":F6,"ja-JP":B6,"ko-KR":z6,"lt-LT":q6,"lv-LV":W6,"nb-NO":V6,"nl-NL":U6,"pl-PL":H6,"pt-BR":K6,"pt-PT":G6,"ro-RO":Z6,"ru-RU":J6,"sk-SK":Y6,"sl-SI":X6,"sr-SP":Q6,"sv-SE":eL,"tr-TR":tL,"uk-UA":nL,"zh-CN":rL,"zh-TW":oL};function nSt(t){let{onDismiss:e,...n}=t,r=X$(VEt($6)),o=_g(n,r.format("dismiss")),s=()=>{e&&e()};return P.createElement(WEt,null,P.createElement("button",{...o,tabIndex:-1,onClick:s}))}let Iu=new WeakMap,Jn=[];function rSt(t,e=document.body){let n=new Set(t),r=new Set,o=l=>{for(let f of l.querySelectorAll("[data-live-announcer], [data-react-aria-top-layer]"))n.add(f);let c=f=>{if(n.has(f)||r.has(f.parentElement)&&f.parentElement.getAttribute("role")!=="row")return NodeFilter.FILTER_REJECT;for(let p of n)if(f.contains(p))return NodeFilter.FILTER_SKIP;return NodeFilter.FILTER_ACCEPT},u=document.createTreeWalker(l,NodeFilter.SHOW_ELEMENT,{acceptNode:c}),d=c(l);if(d===NodeFilter.FILTER_ACCEPT&&s(l),d!==NodeFilter.FILTER_REJECT){let f=u.nextNode();for(;f!=null;)s(f),f=u.nextNode()}},s=l=>{var c;let u=(c=Iu.get(l))!==null&&c!==void 0?c:0;l.getAttribute("aria-hidden")==="true"&&u===0||(u===0&&l.setAttribute("aria-hidden","true"),r.add(l),Iu.set(l,u+1))};Jn.length&&Jn[Jn.length-1].disconnect(),o(e);let i=new MutationObserver(l=>{for(let c of l)if(!(c.type!=="childList"||c.addedNodes.length===0)&&![...n,...r].some(u=>u.contains(c.target))){for(let u of c.removedNodes)u instanceof Element&&(n.delete(u),r.delete(u));for(let u of c.addedNodes)(u instanceof HTMLElement||u instanceof SVGElement)&&(u.dataset.liveAnnouncer==="true"||u.dataset.reactAriaTopLayer==="true")?n.add(u):u instanceof Element&&o(u)}});i.observe(e,{childList:!0,subtree:!0});let a={observe(){i.observe(e,{childList:!0,subtree:!0})},disconnect(){i.disconnect()}};return Jn.push(a),()=>{i.disconnect();for(let l of r){let c=Iu.get(l);c===1?(l.removeAttribute("aria-hidden"),Iu.delete(l)):Iu.set(l,c-1)}a===Jn[Jn.length-1]?(Jn.pop(),Jn.length&&Jn[Jn.length-1].observe()):Jn.splice(Jn.indexOf(a),1)}}const oSt=P.createContext(null);function sSt(){let t=v.useContext(oSt),e=t==null?void 0:t.setContain;wt(()=>{e==null||e(!0)},[e])}function sL(t){let{id:e,label:n,"aria-labelledby":r,"aria-label":o,labelElementType:s="label"}=t;e=us(e);let i=us(),a={};n?(r=r?`${i} ${r}`:i,a={id:i,htmlFor:s==="label"?e:void 0}):!r&&!o&&console.warn("If you do not provide a visible label, you must specify an aria-label or aria-labelledby attribute for accessibility");let l=_g({id:e,"aria-label":o,"aria-labelledby":r});return{labelProps:a,fieldProps:l}}function iSt(t){let{description:e,errorMessage:n,isInvalid:r,validationState:o}=t,{labelProps:s,fieldProps:i}=sL(t),a=di([!!e,!!n,r,o]),l=di([!!e,!!n,r,o]);return i=nt(i,{"aria-describedby":[a,l,t["aria-describedby"]].filter(Boolean).join(" ")||void 0}),{labelProps:s,fieldProps:i,descriptionProps:{id:a},errorMessageProps:{id:l}}}function Gw(t){return Vh()?t.altKey:t.ctrlKey}function $l(t){return Ci()?t.metaKey:t.ctrlKey}const aSt=1e3;function lSt(t){let{keyboardDelegate:e,selectionManager:n,onTypeSelect:r}=t,o=v.useRef({search:"",timeout:null}).current,s=i=>{let a=cSt(i.key);if(!a||i.ctrlKey||i.metaKey||!i.currentTarget.contains(i.target))return;a===" "&&o.search.trim().length>0&&(i.preventDefault(),"continuePropagation"in i||i.stopPropagation()),o.search+=a;let l=e.getKeyForSearch(o.search,n.focusedKey);l==null&&(l=e.getKeyForSearch(o.search)),l!=null&&(n.setFocusedKey(l),r&&r(l)),clearTimeout(o.timeout),o.timeout=setTimeout(()=>{o.search=""},aSt)};return{typeSelectProps:{onKeyDownCapture:e.getKeyForSearch?s:null}}}function cSt(t){return t.length===1||!/^[A-Z]/i.test(t)?t:""}function iL(t){let{selectionManager:e,keyboardDelegate:n,ref:r,autoFocus:o=!1,shouldFocusWrap:s=!1,disallowEmptySelection:i=!1,disallowSelectAll:a=!1,selectOnFocus:l=e.selectionBehavior==="replace",disallowTypeAhead:c=!1,shouldUseVirtualFocus:u,allowsTabNavigation:d=!1,isVirtualized:f,scrollRef:p=r,linkBehavior:h="action"}=t,{direction:y}=_y(),g=by(),b=A=>{if(A.altKey&&A.key==="Tab"&&A.preventDefault(),!r.current.contains(A.target))return;const N=(ee,z)=>{if(ee!=null){if(e.isLink(ee)&&h==="selection"&&l&&!Gw(A)){ik.flushSync(()=>{e.setFocusedKey(ee,z)});let F=p.current.querySelector(`[data-key="${ee}"]`);g.open(F,A);return}if(e.setFocusedKey(ee,z),e.isLink(ee)&&h==="override")return;A.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(ee):l&&!Gw(A)&&e.replaceSelection(ee)}};switch(A.key){case"ArrowDown":if(n.getKeyBelow){var q,O;A.preventDefault();let ee=e.focusedKey!=null?n.getKeyBelow(e.focusedKey):(q=n.getFirstKey)===null||q===void 0?void 0:q.call(n);ee==null&&s&&(ee=(O=n.getFirstKey)===null||O===void 0?void 0:O.call(n,e.focusedKey)),N(ee)}break;case"ArrowUp":if(n.getKeyAbove){var E,D;A.preventDefault();let ee=e.focusedKey!=null?n.getKeyAbove(e.focusedKey):(E=n.getLastKey)===null||E===void 0?void 0:E.call(n);ee==null&&s&&(ee=(D=n.getLastKey)===null||D===void 0?void 0:D.call(n,e.focusedKey)),N(ee)}break;case"ArrowLeft":if(n.getKeyLeftOf){var R,j;A.preventDefault();let ee=n.getKeyLeftOf(e.focusedKey);ee==null&&s&&(ee=y==="rtl"?(R=n.getFirstKey)===null||R===void 0?void 0:R.call(n,e.focusedKey):(j=n.getLastKey)===null||j===void 0?void 0:j.call(n,e.focusedKey)),N(ee,y==="rtl"?"first":"last")}break;case"ArrowRight":if(n.getKeyRightOf){var we,Oe;A.preventDefault();let ee=n.getKeyRightOf(e.focusedKey);ee==null&&s&&(ee=y==="rtl"?(we=n.getLastKey)===null||we===void 0?void 0:we.call(n,e.focusedKey):(Oe=n.getFirstKey)===null||Oe===void 0?void 0:Oe.call(n,e.focusedKey)),N(ee,y==="rtl"?"last":"first")}break;case"Home":if(n.getFirstKey){A.preventDefault();let ee=n.getFirstKey(e.focusedKey,$l(A));e.setFocusedKey(ee),$l(A)&&A.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(ee):l&&e.replaceSelection(ee)}break;case"End":if(n.getLastKey){A.preventDefault();let ee=n.getLastKey(e.focusedKey,$l(A));e.setFocusedKey(ee),$l(A)&&A.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(ee):l&&e.replaceSelection(ee)}break;case"PageDown":if(n.getKeyPageBelow){A.preventDefault();let ee=n.getKeyPageBelow(e.focusedKey);N(ee)}break;case"PageUp":if(n.getKeyPageAbove){A.preventDefault();let ee=n.getKeyPageAbove(e.focusedKey);N(ee)}break;case"a":$l(A)&&e.selectionMode==="multiple"&&a!==!0&&(A.preventDefault(),e.selectAll());break;case"Escape":A.preventDefault(),i||e.clearSelection();break;case"Tab":if(!d){if(A.shiftKey)r.current.focus();else{let ee=Yo(r.current,{tabbable:!0}),z,F;do F=ee.lastChild(),F&&(z=F);while(F);z&&!z.contains(document.activeElement)&&Zo(z)}break}}},w=v.useRef({top:0,left:0});L$t(p,"scroll",f?null:()=>{w.current={top:p.current.scrollTop,left:p.current.scrollLeft}});let x=A=>{if(e.isFocused){A.currentTarget.contains(A.target)||e.setFocused(!1);return}if(A.currentTarget.contains(A.target)){if(e.setFocused(!0),e.focusedKey==null){let O=D=>{D!=null&&(e.setFocusedKey(D),l&&e.replaceSelection(D))},E=A.relatedTarget;var N,q;E&&A.currentTarget.compareDocumentPosition(E)&Node.DOCUMENT_POSITION_FOLLOWING?O((N=e.lastSelectedKey)!==null&&N!==void 0?N:n.getLastKey()):O((q=e.firstSelectedKey)!==null&&q!==void 0?q:n.getFirstKey())}else f||(p.current.scrollTop=w.current.top,p.current.scrollLeft=w.current.left);if(!f&&e.focusedKey!=null){let O=p.current.querySelector(`[data-key="${e.focusedKey}"]`);O&&(O.contains(document.activeElement)||Zo(O),Ww()==="keyboard"&&RA(O,{containingElement:r.current}))}}},k=A=>{A.currentTarget.contains(A.relatedTarget)||e.setFocused(!1)};const S=v.useRef(o);v.useEffect(()=>{if(S.current){let A=null;o==="first"&&(A=n.getFirstKey()),o==="last"&&(A=n.getLastKey());let N=e.selectedKeys;N.size&&(A=N.values().next().value),e.setFocused(!0),e.setFocusedKey(A),A==null&&!u&&Ti(r.current)}S.current=!1},[]);let _=v.useRef(e.focusedKey);v.useEffect(()=>{let A=Ww();if(e.isFocused&&e.focusedKey!=null&&(p!=null&&p.current)){let N=p.current.querySelector(`[data-key="${e.focusedKey}"]`);N&&A==="keyboard"&&(f||i6(p.current,N),RA(N,{containingElement:r.current}))}e.isFocused&&e.focusedKey==null&&_.current!=null&&Ti(r.current),_.current=e.focusedKey},[f,p,e.focusedKey,e.isFocused,r]);let C={onKeyDown:b,onFocus:x,onBlur:k,onMouseDown(A){p.current===A.target&&A.preventDefault()}},{typeSelectProps:$}=lSt({keyboardDelegate:n,selectionManager:e});c||(C=nt($,C));let T;return u||(T=e.focusedKey==null?0:-1),{collectionProps:{...C,tabIndex:T}}}function aL(t){let{selectionManager:e,key:n,ref:r,shouldSelectOnPressUp:o,shouldUseVirtualFocus:s,focus:i,isDisabled:a,onAction:l,allowsDifferentPressOrigin:c,linkBehavior:u="action"}=t,d=by(),f=j=>{if(j.pointerType==="keyboard"&&Gw(j))e.toggleSelection(n);else{if(e.selectionMode==="none")return;if(e.isLink(n)){if(u==="selection"){d.open(r.current,j),e.setSelectedKeys(e.selectedKeys);return}else if(u==="override"||u==="none")return}e.selectionMode==="single"?e.isSelected(n)&&!e.disallowEmptySelection?e.toggleSelection(n):e.replaceSelection(n):j&&j.shiftKey?e.extendSelection(n):e.selectionBehavior==="toggle"||j&&($l(j)||j.pointerType==="touch"||j.pointerType==="virtual")?e.toggleSelection(n):e.replaceSelection(n)}};v.useEffect(()=>{n===e.focusedKey&&e.isFocused&&!s&&(i?i():document.activeElement!==r.current&&Ti(r.current))},[r,n,e.focusedKey,e.childFocusStrategy,e.isFocused,s]),a=a||e.isDisabled(n);let p={};!s&&!a?p={tabIndex:n===e.focusedKey?0:-1,onFocus(j){j.target===r.current&&e.setFocusedKey(n)}}:a&&(p.onMouseDown=j=>{j.preventDefault()});let h=e.isLink(n)&&u==="override",y=e.isLink(n)&&u!=="selection"&&u!=="none",g=!a&&e.canSelectItem(n)&&!h,b=(l||y)&&!a,w=b&&(e.selectionBehavior==="replace"?!g:!g||e.isEmpty),x=b&&g&&e.selectionBehavior==="replace",k=w||x,S=v.useRef(null),_=k&&g,C=v.useRef(!1),$=v.useRef(!1),T=j=>{l&&l(),y&&d.open(r.current,j)},A={};o?(A.onPressStart=j=>{S.current=j.pointerType,C.current=_,j.pointerType==="keyboard"&&(!k||eN())&&f(j)},c?(A.onPressUp=w?null:j=>{j.pointerType!=="keyboard"&&g&&f(j)},A.onPress=w?T:null):A.onPress=j=>{if(w||x&&j.pointerType!=="mouse"){if(j.pointerType==="keyboard"&&!QA())return;T(j)}else j.pointerType!=="keyboard"&&g&&f(j)}):(A.onPressStart=j=>{S.current=j.pointerType,C.current=_,$.current=w,g&&(j.pointerType==="mouse"&&!w||j.pointerType==="keyboard"&&(!b||eN()))&&f(j)},A.onPress=j=>{(j.pointerType==="touch"||j.pointerType==="pen"||j.pointerType==="virtual"||j.pointerType==="keyboard"&&k&&QA()||j.pointerType==="mouse"&&$.current)&&(k?T(j):g&&f(j))}),p["data-key"]=n,A.preventFocusOnPress=s;let{pressProps:N,isPressed:q}=vy(A),O=x?j=>{S.current==="mouse"&&(j.stopPropagation(),j.preventDefault(),T(j))}:void 0,{longPressProps:E}=f6({isDisabled:!_,onLongPress(j){j.pointerType==="touch"&&(f(j),e.setSelectionBehavior("toggle"))}}),D=j=>{S.current==="touch"&&C.current&&j.preventDefault()},R=e.isLink(n)?j=>{qa.isOpening||j.preventDefault()}:void 0;return{itemProps:nt(p,g||w?N:{},_?E:{},{onDoubleClick:O,onDragStartCapture:D,onClick:R}),isPressed:q,isSelected:e.isSelected(n),isFocused:e.isFocused&&e.focusedKey===n,isDisabled:a,allowsSelection:g,hasAction:k}}function QA(){let t=window.event;return(t==null?void 0:t.key)==="Enter"}function eN(){let t=window.event;return(t==null?void 0:t.key)===" "||(t==null?void 0:t.code)==="Space"}class lL{getNextKey(e){for(e=this.collection.getKeyAfter(e);e!=null;){if(this.collection.getItem(e).type==="item"&&!this.disabledKeys.has(e))return e;e=this.collection.getKeyAfter(e)}return null}getPreviousKey(e){for(e=this.collection.getKeyBefore(e);e!=null;){if(this.collection.getItem(e).type==="item"&&!this.disabledKeys.has(e))return e;e=this.collection.getKeyBefore(e)}return null}findKey(e,n,r){let o=this.getItem(e);if(!o)return null;let s=o.getBoundingClientRect();do e=n(e),o=this.getItem(e);while(o&&r(s,o.getBoundingClientRect()));return e}isSameRow(e,n){return e.top===n.top||e.left!==n.left}isSameColumn(e,n){return e.left===n.left||e.top!==n.top}getKeyBelow(e){return this.layout==="grid"&&this.orientation==="vertical"?this.findKey(e,n=>this.getNextKey(n),this.isSameRow):this.getNextKey(e)}getKeyAbove(e){return this.layout==="grid"&&this.orientation==="vertical"?this.findKey(e,n=>this.getPreviousKey(n),this.isSameRow):this.getPreviousKey(e)}getNextColumn(e,n){return n?this.getPreviousKey(e):this.getNextKey(e)}getKeyRightOf(e){return this.layout==="grid"?this.orientation==="vertical"?this.getNextColumn(e,this.direction==="rtl"):this.findKey(e,n=>this.getNextColumn(n,this.direction==="rtl"),this.isSameColumn):this.orientation==="horizontal"?this.getNextColumn(e,this.direction==="rtl"):null}getKeyLeftOf(e){return this.layout==="grid"?this.orientation==="vertical"?this.getNextColumn(e,this.direction==="ltr"):this.findKey(e,n=>this.getNextColumn(n,this.direction==="ltr"),this.isSameColumn):this.orientation==="horizontal"?this.getNextColumn(e,this.direction==="ltr"):null}getFirstKey(){let e=this.collection.getFirstKey();for(;e!=null;){if(this.collection.getItem(e).type==="item"&&!this.disabledKeys.has(e))return e;e=this.collection.getKeyAfter(e)}return null}getLastKey(){let e=this.collection.getLastKey();for(;e!=null;){if(this.collection.getItem(e).type==="item"&&!this.disabledKeys.has(e))return e;e=this.collection.getKeyBefore(e)}return null}getItem(e){return this.ref.current.querySelector(`[data-key="${e}"]`)}getKeyPageAbove(e){let n=this.ref.current,r=this.getItem(e);if(!r)return null;if(!Eg(n))return this.getFirstKey();let o=n.getBoundingClientRect(),s=r.getBoundingClientRect();if(this.orientation==="horizontal"){let i=o.x-n.scrollLeft,a=Math.max(0,s.x-i+s.width-o.width);for(;r&&s.x-i>a;)e=this.getKeyAbove(e),r=e==null?null:this.getItem(e),s=r==null?void 0:r.getBoundingClientRect()}else{let i=o.y-n.scrollTop,a=Math.max(0,s.y-i+s.height-o.height);for(;r&&s.y-i>a;)e=this.getKeyAbove(e),r=e==null?null:this.getItem(e),s=r==null?void 0:r.getBoundingClientRect()}return e!=null?e:this.getFirstKey()}getKeyPageBelow(e){let n=this.ref.current,r=this.getItem(e);if(!r)return null;if(!Eg(n))return this.getLastKey();let o=n.getBoundingClientRect(),s=r.getBoundingClientRect();if(this.orientation==="horizontal"){let i=o.x-n.scrollLeft,a=Math.min(n.scrollWidth,s.x-i-s.width+o.width);for(;r&&s.x-i<a;)e=this.getKeyBelow(e),r=e==null?null:this.getItem(e),s=r==null?void 0:r.getBoundingClientRect()}else{let i=o.y-n.scrollTop,a=Math.min(n.scrollHeight,s.y-i-s.height+o.height);for(;r&&s.y-i<a;)e=this.getKeyBelow(e),r=e==null?null:this.getItem(e),s=r==null?void 0:r.getBoundingClientRect()}return e!=null?e:this.getLastKey()}getKeyForSearch(e,n){if(!this.collator)return null;let r=this.collection,o=n||this.getFirstKey();for(;o!=null;){let s=r.getItem(o),i=s.textValue.slice(0,e.length);if(s.textValue&&this.collator.compare(i,e)===0)return o;o=this.getKeyBelow(o)}return null}constructor(...e){if(e.length===1){let n=e[0];this.collection=n.collection,this.ref=n.ref,this.collator=n.collator,this.disabledKeys=n.disabledKeys||new Set,this.orientation=n.orientation,this.direction=n.direction,this.layout=n.layout||"stack"}else this.collection=e[0],this.disabledKeys=e[1],this.ref=e[2],this.collator=e[3],this.layout="stack",this.orientation="vertical";this.layout==="stack"&&this.orientation==="vertical"&&(this.getKeyLeftOf=void 0,this.getKeyRightOf=void 0)}}function cL(t){let{selectionManager:e,collection:n,disabledKeys:r,ref:o,keyboardDelegate:s}=t,i=x6({usage:"search",sensitivity:"base"}),a=e.disabledBehavior,l=v.useMemo(()=>s||new lL(n,a==="selection"?new Set:r,o,i),[s,n,r,o,i,a]),{collectionProps:c}=iL({...t,ref:o,selectionManager:e,keyboardDelegate:l});return{listProps:c}}function uL(t){return null}uL.getCollectionNode=function*(e,n){let{childItems:r,title:o,children:s}=e,i=e.title||e.children,a=e.textValue||(typeof i=="string"?i:"")||e["aria-label"]||"";!a&&!(n!=null&&n.suppressTextValueWarning)&&console.warn("<Item> with non-plain text contents is unsupported by type to select for accessibility. Please add a `textValue` prop."),yield{type:"item",props:e,rendered:i,textValue:a,"aria-label":e["aria-label"],hasChildNodes:uSt(e),*childNodes(){if(r)for(let l of r)yield{type:"item",value:l};else if(o){let l=[];P.Children.forEach(s,c=>{l.push({type:"item",element:c})}),yield*l}}}};function uSt(t){return t.hasChildItems!=null?t.hasChildItems:!!(t.childItems||t.title&&P.Children.count(t.children)>0)}let Nt=uL;function dL(t){return null}dL.getCollectionNode=function*(e){let{children:n,title:r,items:o}=e;yield{type:"section",props:e,hasChildNodes:!0,rendered:r,"aria-label":e["aria-label"],*childNodes(){if(typeof n=="function"){if(!o)throw new Error("props.children was a function but props.items is missing");for(let s of o)yield{type:"item",value:s,renderer:n}}else{let s=[];P.Children.forEach(n,i=>{s.push({type:"item",element:i})}),yield*s}}}};let El=dL;class dSt{build(e,n){return this.context=n,tN(()=>this.iterateCollection(e))}*iterateCollection(e){let{children:n,items:r}=e;if(typeof n=="function"){if(!r)throw new Error("props.children was a function but props.items is missing");for(let o of e.items)yield*this.getFullNode({value:o},{renderer:n})}else{let o=[];P.Children.forEach(n,i=>{o.push(i)});let s=0;for(let i of o){let a=this.getFullNode({element:i,index:s},{});for(let l of a)s++,yield l}}}getKey(e,n,r,o){if(e.key!=null)return e.key;if(n.type==="cell"&&n.key!=null)return`${o}${n.key}`;let s=n.value;if(s!=null){var i;let a=(i=s.key)!==null&&i!==void 0?i:s.id;if(a==null)throw new Error("No key found for item");return a}return o?`${o}.${n.index}`:`$.${n.index}`}getChildState(e,n){return{renderer:n.renderer||e.renderer}}*getFullNode(e,n,r,o){let s=e.element;if(!s&&e.value&&n&&n.renderer){let l=this.cache.get(e.value);if(l&&(!l.shouldInvalidate||!l.shouldInvalidate(this.context))){l.index=e.index,l.parentKey=o?o.key:null,yield l;return}s=n.renderer(e.value)}if(P.isValidElement(s)){let l=s.type;if(typeof l!="function"&&typeof l.getCollectionNode!="function"){let f=typeof s.type=="function"?s.type.name:s.type;throw new Error(`Unknown element <${f}> in collection.`)}let c=l.getCollectionNode(s.props,this.context),u=e.index,d=c.next();for(;!d.done&&d.value;){let f=d.value;e.index=u;let p=f.key;p||(p=f.element?null:this.getKey(s,e,n,r));let y=[...this.getFullNode({...f,key:p,index:u,wrapper:fSt(e.wrapper,f.wrapper)},this.getChildState(n,f),r?`${r}${s.key}`:s.key,o)];for(let g of y){if(g.value=f.value||e.value,g.value&&this.cache.set(g.value,g),e.type&&g.type!==e.type)throw new Error(`Unsupported type <${Cv(g.type)}> in <${Cv(o.type)}>. Only <${Cv(e.type)}> is supported.`);u++,yield g}d=c.next(y)}return}if(e.key==null)return;let i=this,a={type:e.type,props:e.props,key:e.key,parentKey:o?o.key:null,value:e.value,level:o?o.level+1:0,index:e.index,rendered:e.rendered,textValue:e.textValue,"aria-label":e["aria-label"],wrapper:e.wrapper,shouldInvalidate:e.shouldInvalidate,hasChildNodes:e.hasChildNodes,childNodes:tN(function*(){if(!e.hasChildNodes)return;let l=0;for(let c of e.childNodes()){c.key!=null&&(c.key=`${a.key}${c.key}`),c.index=l;let u=i.getFullNode(c,i.getChildState(n,c),a.key,a);for(let d of u)l++,yield d}})};yield a}constructor(){this.cache=new WeakMap}}function tN(t){let e=[],n=null;return{*[Symbol.iterator](){for(let r of e)yield r;n||(n=t());for(let r of n)e.push(r),yield r}}}function fSt(t,e){if(t&&e)return n=>t(e(n));if(t)return t;if(e)return e}function Cv(t){return t[0].toUpperCase()+t.slice(1)}function fL(t,e,n){let r=v.useMemo(()=>new dSt,[]),{children:o,items:s,collection:i}=t;return v.useMemo(()=>{if(i)return i;let l=r.build({children:o,items:s},n);return e(l)},[r,o,s,i,n,e])}function $y(t,e){return typeof e.getChildren=="function"?e.getChildren(t.key):t.childNodes}function pSt(t){return hSt(t,0)}function hSt(t,e){if(e<0)return;let n=0;for(let r of t){if(n===e)return r;n++}}function Tv(t,e,n){if(e.parentKey===n.parentKey)return e.index-n.index;let r=[...nN(t,e),e],o=[...nN(t,n),n],s=r.slice(0,o.length).findIndex((i,a)=>i!==o[a]);return s!==-1?(e=r[s],n=o[s],e.index-n.index):r.findIndex(i=>i===n)>=0?1:(o.findIndex(i=>i===e)>=0,-1)}function nN(t,e){let n=[];for(;(e==null?void 0:e.parentKey)!=null;)e=t.getItem(e.parentKey),n.unshift(e);return n}const rN=new WeakMap;function Q$(t){let e=rN.get(t);if(e!=null)return e;e=0;let n=r=>{for(let o of r)o.type==="section"?n($y(o,t)):e++};return n(t),rN.set(t,e),e}const Ey=new WeakMap;function mSt(t){return typeof t=="string"?t.replace(/\s*/g,""):""+t}function pL(t,e){let n=Ey.get(t);if(!n)throw new Error("Unknown list");return`${n.id}-option-${mSt(e)}`}function gSt(t,e,n){let r=Li(t,{labelable:!0}),o=t.selectionBehavior||"toggle",s=t.linkBehavior||(o==="replace"?"action":"override");o==="toggle"&&s==="action"&&(s="override");let{listProps:i}=cL({...t,ref:n,selectionManager:e.selectionManager,collection:e.collection,disabledKeys:e.disabledKeys,linkBehavior:s}),{focusWithinProps:a}=wy({onFocusWithin:t.onFocus,onBlurWithin:t.onBlur,onFocusWithinChange:t.onFocusChange}),l=us(t.id);Ey.set(e,{id:l,shouldUseVirtualFocus:t.shouldUseVirtualFocus,shouldSelectOnPressUp:t.shouldSelectOnPressUp,shouldFocusOnHover:t.shouldFocusOnHover,isVirtualized:t.isVirtualized,onAction:t.onAction,linkBehavior:s});let{labelProps:c,fieldProps:u}=sL({...t,id:l,labelElementType:"span"});return{labelProps:c,listBoxProps:nt(r,a,e.selectionManager.selectionMode==="multiple"?{"aria-multiselectable":"true"}:{},{role:"listbox",...nt(u,i)})}}function hL(t,e,n){var r;let{key:o}=t,s=Ey.get(e);var i;let a=(i=t.isDisabled)!==null&&i!==void 0?i:e.disabledKeys.has(o);var l;let c=(l=t.isSelected)!==null&&l!==void 0?l:e.selectionManager.isSelected(o);var u;let d=(u=t.shouldSelectOnPressUp)!==null&&u!==void 0?u:s==null?void 0:s.shouldSelectOnPressUp;var f;let p=(f=t.shouldFocusOnHover)!==null&&f!==void 0?f:s==null?void 0:s.shouldFocusOnHover;var h;let y=(h=t.shouldUseVirtualFocus)!==null&&h!==void 0?h:s==null?void 0:s.shouldUseVirtualFocus;var g;let b=(g=t.isVirtualized)!==null&&g!==void 0?g:s==null?void 0:s.isVirtualized,w=di(),x=di(),k={role:"option","aria-disabled":a||void 0,"aria-selected":e.selectionManager.selectionMode!=="none"?c:void 0};Ci()&&t6()||(k["aria-label"]=t["aria-label"],k["aria-labelledby"]=w,k["aria-describedby"]=x);let S=e.collection.getItem(o);if(b){let O=Number(S==null?void 0:S.index);k["aria-posinset"]=Number.isNaN(O)?void 0:O+1,k["aria-setsize"]=Q$(e.collection)}let{itemProps:_,isPressed:C,isFocused:$,hasAction:T,allowsSelection:A}=aL({selectionManager:e.selectionManager,key:o,ref:n,shouldSelectOnPressUp:d,allowsDifferentPressOrigin:d&&p,isVirtualized:b,shouldUseVirtualFocus:y,isDisabled:a,onAction:s!=null&&s.onAction?()=>{var O;return s==null||(O=s.onAction)===null||O===void 0?void 0:O.call(s,o)}:void 0,linkBehavior:s==null?void 0:s.linkBehavior}),{hoverProps:N}=lu({isDisabled:a||!p,onHoverStart(){Pf()||(e.selectionManager.setFocused(!0),e.selectionManager.setFocusedKey(o))}}),q=Li(S==null?void 0:S.props,{isLink:!!(!(S==null||(r=S.props)===null||r===void 0)&&r.href)});return delete q.id,{optionProps:{...k,...nt(q,_,N),id:pL(e,o)},labelProps:{id:w},descriptionProps:{id:x},isFocused:$,isFocusVisible:$&&Pf(),isSelected:c,isDisabled:a,isPressed:C,allowsSelection:A,hasAction:T}}function ySt(t){let{heading:e,"aria-label":n}=t,r=us();return{itemProps:{role:"presentation"},headingProps:e?{id:r,role:"presentation"}:{},groupProps:{role:"group","aria-label":n,"aria-labelledby":e?r:void 0}}}function bSt(t){return t&&t.__esModule?t.default:t}var mL={},gL={};gL={longPressMessage:"     Alt +    "};var yL={};yL={longPressMessage:"    Alt+  ,    "};var bL={};bL={longPressMessage:"Dlouhm stiskem nebo stisknutm klves Alt + ipka dol otevete nabdku"};var vL={};vL={longPressMessage:"Langt tryk eller tryk p Alt + pil ned for at bne menuen"};var wL={};wL={longPressMessage:"Drcken Sie lange oder drcken Sie Alt + Nach-unten, um das Men zu ffnen"};var xL={};xL={longPressMessage:"    Alt +       "};var kL={};kL={longPressMessage:"Long press or press Alt + ArrowDown to open menu"};var _L={};_L={longPressMessage:"Mantenga pulsado o pulse Alt + flecha abajo para abrir el men"};var $L={};$L={longPressMessage:"Men avamiseks vajutage pikalt vi vajutage klahve Alt + allanool"};var EL={};EL={longPressMessage:"Avaa valikko painamalla pohjassa tai nppinyhdistelmll Alt + Alanuoli"};var SL={};SL={longPressMessage:"Appuyez de manire prolonge ou appuyez sur Alt+Flche vers le bas pour ouvrir le menu."};var CL={};CL={longPressMessage:"     Alt + ArrowDown    "};var TL={};TL={longPressMessage:"Dugo pritisnite ili pritisnite Alt + strelicu prema dolje za otvaranje izbornika"};var AL={};AL={longPressMessage:"Nyomja meg hosszan, vagy nyomja meg az Alt + lefele nyl gombot a men megnyitshoz"};var NL={};NL={longPressMessage:"Premere a lungo o premere Alt + Freccia gi per aprire il menu"};var PL={};PL={longPressMessage:" Alt+"};var OL={};OL={longPressMessage:"  Alt +     "};var IL={};IL={longPressMessage:"Nordami atidaryti meniu, nuspaud palaikykite arba paspauskite Alt + ArrowDown."};var RL={};RL={longPressMessage:"Lai atvrtu izvlni, turiet nospiestu vai nospiediet taustiu kombinciju Alt + lejupvrst bultia"};var ML={};ML={longPressMessage:"Langt trykk eller trykk Alt + PilNed for  pne menyen"};var DL={};DL={longPressMessage:"Druk lang op Alt + pijl-omlaag of druk op Alt om het menu te openen"};var LL={};LL={longPressMessage:"Nacinij i przytrzymaj lub nacinij klawisze Alt + Strzaka w d, aby otworzy menu"};var jL={};jL={longPressMessage:"Pressione e segure ou pressione Alt + Seta para baixo para abrir o menu"};var FL={};FL={longPressMessage:"Prima continuamente ou prima Alt + Seta Para Baixo para abrir o menu"};var BL={};BL={longPressMessage:"Apsai lung sau apsai pe Alt + sgeat n jos pentru a deschide meniul"};var zL={};zL={longPressMessage:"     Alt +  ,   "};var qL={};qL={longPressMessage:"Ponuku otvorte dlhm stlaenm alebo stlaenm klvesu Alt + klvesu so pkou nadol"};var WL={};WL={longPressMessage:"Za odprtje menija pritisnite in drite gumb ali pritisnite Alt+puica navzdol"};var VL={};VL={longPressMessage:"Dugo pritisnite ili pritisnite Alt + strelicu prema dole da otvorite meni"};var UL={};UL={longPressMessage:"Hll nedtryckt eller tryck p Alt + pil nedt fr att ppna menyn"};var HL={};HL={longPressMessage:"Meny amak iin uzun basn veya Alt + Aa Ok tuuna basn"};var KL={};KL={longPressMessage:"      Alt   ,   "};var GL={};GL={longPressMessage:" Alt + "};var ZL={};ZL={longPressMessage:" Alt+"};mL={"ar-AE":gL,"bg-BG":yL,"cs-CZ":bL,"da-DK":vL,"de-DE":wL,"el-GR":xL,"en-US":kL,"es-ES":_L,"et-EE":$L,"fi-FI":EL,"fr-FR":SL,"he-IL":CL,"hr-HR":TL,"hu-HU":AL,"it-IT":NL,"ja-JP":PL,"ko-KR":OL,"lt-LT":IL,"lv-LV":RL,"nb-NO":ML,"nl-NL":DL,"pl-PL":LL,"pt-BR":jL,"pt-PT":FL,"ro-RO":BL,"ru-RU":zL,"sk-SK":qL,"sl-SI":WL,"sr-SP":VL,"sv-SE":UL,"tr-TR":HL,"uk-UA":KL,"zh-CN":GL,"zh-TW":ZL};function vSt(t,e,n){let{type:r="menu",isDisabled:o,trigger:s="press"}=t,i=us(),{triggerProps:a,overlayProps:l}=HEt({type:r},e,n),c=p=>{if(!o&&!(s==="longPress"&&!p.altKey)&&n&&n.current)switch(p.key){case"Enter":case" ":if(s==="longPress")return;case"ArrowDown":"continuePropagation"in p||p.stopPropagation(),p.preventDefault(),e.toggle("first");break;case"ArrowUp":"continuePropagation"in p||p.stopPropagation(),p.preventDefault(),e.toggle("last");break;default:"continuePropagation"in p&&p.continuePropagation()}},u=X$(bSt(mL)),{longPressProps:d}=f6({isDisabled:o||s!=="longPress",accessibilityDescription:u.format("longPressMessage"),onLongPressStart(){e.close()},onLongPress(){e.open("first")}}),f={onPressStart(p){p.pointerType!=="touch"&&p.pointerType!=="keyboard"&&!o&&e.toggle(p.pointerType==="virtual"?"first":null)},onPress(p){p.pointerType==="touch"&&!o&&e.toggle()}};return delete a.onPress,{menuTriggerProps:{...a,...s==="press"?f:d,id:i,onKeyDown:c},menuProps:{...l,"aria-labelledby":i,autoFocus:e.focusStrategy||!0,onClose:e.close}}}const JL=new WeakMap;function wSt(t,e,n){let{shouldFocusWrap:r=!0,...o}=t;!t["aria-label"]&&!t["aria-labelledby"]&&console.warn("An aria-label or aria-labelledby prop is required for accessibility.");let s=Li(t,{labelable:!0}),{listProps:i}=cL({...o,ref:n,selectionManager:e.selectionManager,collection:e.collection,disabledKeys:e.disabledKeys,shouldFocusWrap:r,linkBehavior:"override"});return JL.set(e,{onClose:t.onClose,onAction:t.onAction}),{menuProps:nt(s,{role:"menu","aria-hidden":e.expandedKeys.size>0?!0:void 0,...i,onKeyDown:a=>{a.key!=="Escape"&&i.onKeyDown(a)}})}}function xSt(t,e,n){var r;let{key:o,closeOnSelect:s,isVirtualized:i,"aria-haspopup":a}=t,{direction:l}=_y(),c=!!a,u=e.expandedKeys.has(o);var d;let f=(d=t.isDisabled)!==null&&d!==void 0?d:e.disabledKeys.has(o);var p;let h=(p=t.isSelected)!==null&&p!==void 0?p:e.selectionManager.isSelected(o),y=v.useRef(),g=v.useCallback(()=>{y.current&&(clearTimeout(y.current),y.current=void 0)},[y]),b=Ln(()=>{g(),e.setExpandedKeys(new Set([o]))});wt(()=>()=>g(),[g]);let w=JL.get(e),x=t.onClose||w.onClose,k=v.useCallback(()=>{b()},[]),S=c?k:t.onAction||w.onAction,_=by(),C=B=>{S&&S(o),B.target instanceof HTMLAnchorElement&&_.open(B.target,B)},$="menuitem";e.selectionManager.selectionMode==="single"?$="menuitemradio":e.selectionManager.selectionMode==="multiple"&&($="menuitemcheckbox");let T=di(),A=di(),N=di(),q={"aria-disabled":f||void 0,role:$,"aria-label":t["aria-label"],"aria-labelledby":T,"aria-describedby":[A,N].filter(Boolean).join(" ")||void 0};e.selectionManager.selectionMode!=="none"&&(q["aria-checked"]=h);let O=e.collection.getItem(o);i&&(q["aria-posinset"]=O==null?void 0:O.index,q["aria-setsize"]=Q$(e.collection)),a!=null&&(q["aria-haspopup"]=a,q["aria-expanded"]=u?"true":"false");let E=B=>{B.pointerType==="keyboard"&&C(B)},D=B=>{B.pointerType!=="keyboard"&&(C(B),!c&&x&&(s!=null?s:e.selectionManager.selectionMode!=="multiple"||e.selectionManager.isLink(o))&&x())},{itemProps:R,isFocused:j}=aL({selectionManager:e.selectionManager,key:o,ref:n,shouldSelectOnPressUp:!0,allowsDifferentPressOrigin:!0,linkBehavior:"none"}),{pressProps:we,isPressed:Oe}=vy({onPressStart:E,onPressUp:D,isDisabled:f||c&&e.expandedKeys.has(o)}),{hoverProps:ee}=lu({isDisabled:f,onHoverStart(){!Pf()&&!(c&&e.expandedKeys.has(o))&&(e.selectionManager.setFocused(!0),e.selectionManager.setFocusedKey(o),o===e.selectionManager.focusedKey&&e.selectionManager.isFocused&&document.activeElement!==n.current&&Ti(n.current))},onHoverChange:B=>{B&&c&&!e.expandedKeys.has(o)?y.current||(y.current=setTimeout(()=>{b()},200)):B||g()}}),{keyboardProps:z}=d6({onKeyDown:B=>{if(B.repeat){B.continuePropagation();return}switch(B.key){case" ":!f&&e.selectionManager.selectionMode==="none"&&!c&&s!==!1&&x&&x();break;case"Enter":!f&&s!==!1&&!c&&x&&x();break;case"ArrowRight":c&&l==="ltr"?b():B.continuePropagation();break;case"ArrowLeft":c&&l==="rtl"?b():B.continuePropagation();break;default:B.continuePropagation();break}}}),F=Li(O.props,{isLink:!!(!(O==null||(r=O.props)===null||r===void 0)&&r.href)});return delete F.id,{menuItemProps:{...q,...nt(F,R,we,ee,z)},labelProps:{id:T},descriptionProps:{id:A},keyboardShortcutProps:{id:N},isFocused:j,isSelected:h,isPressed:Oe,isDisabled:f}}function kSt(t){let{heading:e,"aria-label":n}=t,r=us();return{itemProps:{role:"presentation"},headingProps:e?{id:r,role:"presentation"}:{},groupProps:{role:"group","aria-label":n,"aria-labelledby":e?r:void 0}}}function YL(t,e){let{inputElementType:n="input",isDisabled:r=!1,isRequired:o=!1,isReadOnly:s=!1,validationState:i,isInvalid:a=!1,type:l="text",value:c,defaultValue:u,onChange:d=()=>{}}=t,{focusableProps:f}=m6(t,e),{labelProps:p,fieldProps:h,descriptionProps:y,errorMessageProps:g}=iSt(t),b=Li(t,{labelable:!0});const w={type:l,pattern:t.pattern};var x;return F$t(e,(x=c!=null?c:u)!==null&&x!==void 0?x:"",d),{labelProps:p,inputProps:nt(b,n==="input"&&w,{disabled:r,readOnly:s,"aria-required":o||void 0,"aria-invalid":a||i==="invalid"||void 0,"aria-errormessage":t["aria-errormessage"],"aria-activedescendant":t["aria-activedescendant"],"aria-autocomplete":t["aria-autocomplete"],"aria-haspopup":t["aria-haspopup"],value:t.value,defaultValue:t.value?void 0:t.defaultValue,onChange:k=>d(k.target.value),autoComplete:t.autoComplete,maxLength:t.maxLength,minLength:t.minLength,name:t.name,placeholder:t.placeholder,inputMode:t.inputMode,onCopy:t.onCopy,onCut:t.onCut,onPaste:t.onPaste,onCompositionEnd:t.onCompositionEnd,onCompositionStart:t.onCompositionStart,onCompositionUpdate:t.onCompositionUpdate,onSelect:t.onSelect,onBeforeInput:t.onBeforeInput,onInput:t.onInput,...f,...h}),descriptionProps:y,errorMessageProps:g}}function _St(t){return t&&t.__esModule?t.default:t}var XL={},QL={};QL={buttonLabel:" ",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} `,other:()=>`${e.number(t.optionCount)} `})} .`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`  ${t.groupTitle},  ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} `,other:()=>`${e.number(t.groupCount)} `})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", ",other:""},t.isSelected)}`,listboxLabel:"",selectedAnnouncement:t=>`${t.optionText} `};var e9={};e9={buttonLabel:" ",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} `,other:()=>`${e.number(t.optionCount)} `})}  .`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`  ${t.groupTitle},  ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} `,other:()=>`${e.number(t.groupCount)} `})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", ",other:""},t.isSelected)}`,listboxLabel:"",selectedAnnouncement:t=>`${t.optionText}, `};var t9={};t9={buttonLabel:"Zobrazit doporuen",countAnnouncement:(t,e)=>`K dispozici ${e.plural(t.optionCount,{one:()=>`je ${e.number(t.optionCount)} monost`,other:()=>`jsou/je ${e.number(t.optionCount)} monosti/-`})}.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Zadan skupina ${t.groupTitle} ${e.plural(t.groupCount,{one:()=>`s ${e.number(t.groupCount)} monost`,other:()=>`se ${e.number(t.groupCount)} monostmi`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:" (vybrno)",other:""},t.isSelected)}`,listboxLabel:"Nvrhy",selectedAnnouncement:t=>`${t.optionText}, vybrno`};var n9={};n9={buttonLabel:"Vis forslag",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} mulighed tilgngelig`,other:()=>`${e.number(t.optionCount)} muligheder tilgngelige`})}.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Angivet gruppe ${t.groupTitle}, med ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} mulighed`,other:()=>`${e.number(t.groupCount)} muligheder`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", valgt",other:""},t.isSelected)}`,listboxLabel:"Forslag",selectedAnnouncement:t=>`${t.optionText}, valgt`};var r9={};r9={buttonLabel:"Empfehlungen anzeigen",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} Option`,other:()=>`${e.number(t.optionCount)} Optionen`})} verfgbar.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Eingetretene Gruppe ${t.groupTitle}, mit ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} Option`,other:()=>`${e.number(t.groupCount)} Optionen`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", ausgewhlt",other:""},t.isSelected)}`,listboxLabel:"Empfehlungen",selectedAnnouncement:t=>`${t.optionText}, ausgewhlt`};var o9={};o9={buttonLabel:" ",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} `,other:()=>`${e.number(t.optionCount)}  `})} .`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`  ${t.groupTitle},  ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} `,other:()=>`${e.number(t.groupCount)} `})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", ",other:""},t.isSelected)}`,listboxLabel:"",selectedAnnouncement:t=>`${t.optionText}, `};var s9={};s9={focusAnnouncement:(t,e)=>`${e.select({true:()=>`Entered group ${t.groupTitle}, with ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} option`,other:()=>`${e.number(t.groupCount)} options`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", selected",other:""},t.isSelected)}`,countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} option`,other:()=>`${e.number(t.optionCount)} options`})} available.`,selectedAnnouncement:t=>`${t.optionText}, selected`,buttonLabel:"Show suggestions",listboxLabel:"Suggestions"};var i9={};i9={buttonLabel:"Mostrar sugerencias",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} opcin`,other:()=>`${e.number(t.optionCount)} opciones`})} disponible(s).`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Se ha unido al grupo ${t.groupTitle}, con ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} opcin`,other:()=>`${e.number(t.groupCount)} opciones`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", seleccionado",other:""},t.isSelected)}`,listboxLabel:"Sugerencias",selectedAnnouncement:t=>`${t.optionText}, seleccionado`};var a9={};a9={buttonLabel:"Kuva soovitused",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} valik`,other:()=>`${e.number(t.optionCount)} valikud`})} saadaval.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Sisestatud rhm ${t.groupTitle}, valikuga ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} valik`,other:()=>`${e.number(t.groupCount)} valikud`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", valitud",other:""},t.isSelected)}`,listboxLabel:"Soovitused",selectedAnnouncement:t=>`${t.optionText}, valitud`};var l9={};l9={buttonLabel:"Nyt ehdotukset",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} vaihtoehto`,other:()=>`${e.number(t.optionCount)} vaihtoehdot`})} saatavilla.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Mentiin ryhmn ${t.groupTitle}, ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} vaihtoehdon`,other:()=>`${e.number(t.groupCount)} vaihtoehdon`})} kanssa.`,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", valittu",other:""},t.isSelected)}`,listboxLabel:"Ehdotukset",selectedAnnouncement:t=>`${t.optionText}, valittu`};var c9={};c9={buttonLabel:"Afficher les suggestions",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} option`,other:()=>`${e.number(t.optionCount)} options`})} disponible(s).`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Groupe ${t.groupTitle} saisi, avec ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} option`,other:()=>`${e.number(t.groupCount)} options`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", slectionn(s)",other:""},t.isSelected)}`,listboxLabel:"Suggestions",selectedAnnouncement:t=>`${t.optionText}, slectionn`};var u9={};u9={buttonLabel:" ",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>` ${e.number(t.optionCount)}`,other:()=>`${e.number(t.optionCount)} `})}  .`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`  ${t.groupTitle},  ${e.plural(t.groupCount,{one:()=>` ${e.number(t.groupCount)}`,other:()=>`${e.number(t.groupCount)} `})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", ",other:""},t.isSelected)}`,listboxLabel:"",selectedAnnouncement:t=>`${t.optionText}, `};var d9={};d9={buttonLabel:"Prikai prijedloge",countAnnouncement:(t,e)=>`Dostupno jo: ${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} opcija`,other:()=>`${e.number(t.optionCount)} opcije/a`})}.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Unesena skupina ${t.groupTitle}, s ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} opcijom`,other:()=>`${e.number(t.groupCount)} opcije/a`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", odabranih",other:""},t.isSelected)}`,listboxLabel:"Prijedlozi",selectedAnnouncement:t=>`${t.optionText}, odabrano`};var f9={};f9={buttonLabel:"Javaslatok megjelentse",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} lehetsg`,other:()=>`${e.number(t.optionCount)} lehetsg`})} ll rendelkezsre.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Belpett a(z) ${t.groupTitle} csoportba, amely ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} lehetsget`,other:()=>`${e.number(t.groupCount)} lehetsget`})} tartalmaz. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", kijellve",other:""},t.isSelected)}`,listboxLabel:"Javaslatok",selectedAnnouncement:t=>`${t.optionText}, kijellve`};var p9={};p9={buttonLabel:"Mostra suggerimenti",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} opzione disponibile`,other:()=>`${e.number(t.optionCount)} opzioni disponibili`})}.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Ingresso nel gruppo ${t.groupTitle}, con ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} opzione`,other:()=>`${e.number(t.groupCount)} opzioni`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", selezionato",other:""},t.isSelected)}`,listboxLabel:"Suggerimenti",selectedAnnouncement:t=>`${t.optionText}, selezionato`};var h9={};h9={buttonLabel:"",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} `,other:()=>`${e.number(t.optionCount)} `})}`,focusAnnouncement:(t,e)=>`${e.select({true:()=>` ${t.groupTitle}${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} `,other:()=>`${e.number(t.groupCount)} `})}`,other:""},t.isGroupChange)}${t.optionText}${e.select({true:"",other:""},t.isSelected)}`,listboxLabel:"",selectedAnnouncement:t=>`${t.optionText}`};var m9={};m9={buttonLabel:"  ",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} `,other:()=>`${e.number(t.optionCount)} `})}   .`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`  ${t.groupTitle}, ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} `,other:()=>`${e.number(t.groupCount)} `})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", ",other:""},t.isSelected)}`,listboxLabel:"",selectedAnnouncement:t=>`${t.optionText}, `};var g9={};g9={buttonLabel:"Rodyti pasilymus",countAnnouncement:(t,e)=>`Yra ${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} parinktis`,other:()=>`${e.number(t.optionCount)} parinktys (-i)`})}.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`vesta grup ${t.groupTitle}, su ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} parinktimi`,other:()=>`${e.number(t.groupCount)} parinktimis (-i)`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", pasirinkta",other:""},t.isSelected)}`,listboxLabel:"Pasilymai",selectedAnnouncement:t=>`${t.optionText}, pasirinkta`};var y9={};y9={buttonLabel:"Rdt ieteikumus",countAnnouncement:(t,e)=>`Pieejamo opciju skaits: ${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} opcija`,other:()=>`${e.number(t.optionCount)} opcijas`})}.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Ievadta grupa ${t.groupTitle}, ar ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} opciju`,other:()=>`${e.number(t.groupCount)} opcijm`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", atlasta",other:""},t.isSelected)}`,listboxLabel:"Ieteikumi",selectedAnnouncement:t=>`${t.optionText}, atlasta`};var b9={};b9={buttonLabel:"Vis forslag",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} alternativ`,other:()=>`${e.number(t.optionCount)} alternativer`})} finnes.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Angitt gruppe ${t.groupTitle}, med ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} alternativ`,other:()=>`${e.number(t.groupCount)} alternativer`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", valgt",other:""},t.isSelected)}`,listboxLabel:"Forslag",selectedAnnouncement:t=>`${t.optionText}, valgt`};var v9={};v9={buttonLabel:"Suggesties weergeven",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} optie`,other:()=>`${e.number(t.optionCount)} opties`})} beschikbaar.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Groep ${t.groupTitle} ingevoerd met ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} optie`,other:()=>`${e.number(t.groupCount)} opties`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", geselecteerd",other:""},t.isSelected)}`,listboxLabel:"Suggesties",selectedAnnouncement:t=>`${t.optionText}, geselecteerd`};var w9={};w9={buttonLabel:"Wywietlaj sugestie",countAnnouncement:(t,e)=>`dostpna/dostpne(-nych) ${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} opcja`,other:()=>`${e.number(t.optionCount)} opcje(-i)`})}.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Doczono do grupy ${t.groupTitle}, z ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} opcj`,other:()=>`${e.number(t.groupCount)} opcjami`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", wybrano",other:""},t.isSelected)}`,listboxLabel:"Sugestie",selectedAnnouncement:t=>`${t.optionText}, wybrano`};var x9={};x9={buttonLabel:"Mostrar sugestes",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} opo`,other:()=>`${e.number(t.optionCount)} opes`})} disponvel.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Grupo inserido ${t.groupTitle}, com ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} opo`,other:()=>`${e.number(t.groupCount)} opes`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", selecionado",other:""},t.isSelected)}`,listboxLabel:"Sugestes",selectedAnnouncement:t=>`${t.optionText}, selecionado`};var k9={};k9={buttonLabel:"Apresentar sugestes",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} opo`,other:()=>`${e.number(t.optionCount)} opes`})} disponvel.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Grupo introduzido ${t.groupTitle}, com ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} opo`,other:()=>`${e.number(t.groupCount)} opes`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", selecionado",other:""},t.isSelected)}`,listboxLabel:"Sugestes",selectedAnnouncement:t=>`${t.optionText}, selecionado`};var _9={};_9={buttonLabel:"Afiare sugestii",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} opiune`,other:()=>`${e.number(t.optionCount)} opiuni`})} disponibile.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Grup ${t.groupTitle} introdus, cu ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} opiune`,other:()=>`${e.number(t.groupCount)} opiuni`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", selectat",other:""},t.isSelected)}`,listboxLabel:"Sugestii",selectedAnnouncement:t=>`${t.optionText}, selectat`};var $9={};$9={buttonLabel:" ",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} `,other:()=>`${e.number(t.optionCount)} `})} .`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`  ${t.groupTitle},  ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} `,other:()=>`${e.number(t.groupCount)} `})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", ",other:""},t.isSelected)}`,listboxLabel:"",selectedAnnouncement:t=>`${t.optionText}, `};var E9={};E9={buttonLabel:"Zobrazi nvrhy",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} monos`,other:()=>`${e.number(t.optionCount)} monosti/-`})} k dispozcii.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Zadan skupina ${t.groupTitle}, s ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} monosou`,other:()=>`${e.number(t.groupCount)} monosami`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", vybrat",other:""},t.isSelected)}`,listboxLabel:"Nvrhy",selectedAnnouncement:t=>`${t.optionText}, vybrat`};var S9={};S9={buttonLabel:"Prikai predloge",countAnnouncement:(t,e)=>`Na voljo je ${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} opcija`,other:()=>`${e.number(t.optionCount)} opcije`})}.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Vnesena skupina ${t.groupTitle}, z ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} opcija`,other:()=>`${e.number(t.groupCount)} opcije`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", izbrano",other:""},t.isSelected)}`,listboxLabel:"Predlogi",selectedAnnouncement:t=>`${t.optionText}, izbrano`};var C9={};C9={buttonLabel:"Prikai predloge",countAnnouncement:(t,e)=>`Dostupno jo: ${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} opcija`,other:()=>`${e.number(t.optionCount)} opcije/a`})}.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Unesena grupa ${t.groupTitle}, s ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} opcijom`,other:()=>`${e.number(t.groupCount)} optione/a`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", izabranih",other:""},t.isSelected)}`,listboxLabel:"Predlozi",selectedAnnouncement:t=>`${t.optionText}, izabrano`};var T9={};T9={buttonLabel:"Visa frslag",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} alternativ`,other:()=>`${e.number(t.optionCount)} alternativ`})} tillgngliga.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Ingick i gruppen ${t.groupTitle} med ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} alternativ`,other:()=>`${e.number(t.groupCount)} alternativ`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", valda",other:""},t.isSelected)}`,listboxLabel:"Frslag",selectedAnnouncement:t=>`${t.optionText}, valda`};var A9={};A9={buttonLabel:"nerileri gster",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} seenek`,other:()=>`${e.number(t.optionCount)} seenekler`})} kullanlabilir.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Girilen grup ${t.groupTitle}, ile ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} seenek`,other:()=>`${e.number(t.groupCount)} seenekler`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", seildi",other:""},t.isSelected)}`,listboxLabel:"neriler",selectedAnnouncement:t=>`${t.optionText}, seildi`};var N9={};N9={buttonLabel:" ",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} `,other:()=>`${e.number(t.optionCount)} (-)`})} .`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`  ${t.groupTitle},  ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} `,other:()=>`${e.number(t.groupCount)} (-)`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", ",other:""},t.isSelected)}`,listboxLabel:"",selectedAnnouncement:t=>`${t.optionText}, `};var P9={};P9={buttonLabel:"",countAnnouncement:(t,e)=>` ${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} `,other:()=>`${e.number(t.optionCount)} `})}`,focusAnnouncement:(t,e)=>`${e.select({true:()=>` ${t.groupTitle}  ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} `,other:()=>`${e.number(t.groupCount)} `})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", ",other:""},t.isSelected)}`,listboxLabel:"",selectedAnnouncement:t=>`${t.optionText}, `};var O9={};O9={buttonLabel:"",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} `,other:()=>`${e.number(t.optionCount)} `})} `,focusAnnouncement:(t,e)=>`${e.select({true:()=>` ${t.groupTitle},  ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} `,other:()=>`${e.number(t.groupCount)} `})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", ",other:""},t.isSelected)}`,listboxLabel:"",selectedAnnouncement:t=>`${t.optionText}, `};XL={"ar-AE":QL,"bg-BG":e9,"cs-CZ":t9,"da-DK":n9,"de-DE":r9,"el-GR":o9,"en-US":s9,"es-ES":i9,"et-EE":a9,"fi-FI":l9,"fr-FR":c9,"he-IL":u9,"hr-HR":d9,"hu-HU":f9,"it-IT":p9,"ja-JP":h9,"ko-KR":m9,"lt-LT":g9,"lv-LV":y9,"nb-NO":b9,"nl-NL":v9,"pl-PL":w9,"pt-BR":x9,"pt-PT":k9,"ro-RO":_9,"ru-RU":$9,"sk-SK":E9,"sl-SI":S9,"sr-SP":C9,"sv-SE":T9,"tr-TR":A9,"uk-UA":N9,"zh-CN":P9,"zh-TW":O9};function $St(t,e){let{buttonRef:n,popoverRef:r,inputRef:o,listBoxRef:s,keyboardDelegate:i,shouldFocusWrap:a,isReadOnly:l,isDisabled:c}=t,u=X$(_St(XL)),{menuTriggerProps:d,menuProps:f}=vSt({type:"listbox",isDisabled:c||l},e,n);Ey.set(e,{id:f.id});let p=v.useMemo(()=>i||new lL(e.collection,e.disabledKeys,s),[i,e.collection,e.disabledKeys,s]),{collectionProps:h}=iL({selectionManager:e.selectionManager,keyboardDelegate:p,disallowTypeAhead:!0,disallowEmptySelection:!0,shouldFocusWrap:a,ref:o,isVirtualized:!0}),y=by(),g=W=>{switch(W.key){case"Enter":case"Tab":if(e.isOpen&&W.key==="Enter"&&W.preventDefault(),e.isOpen&&e.selectionManager.focusedKey!=null&&e.selectionManager.isLink(e.selectionManager.focusedKey)){if(W.key==="Enter"){let K=s.current.querySelector(`[data-key="${e.selectionManager.focusedKey}"]`);K instanceof HTMLAnchorElement&&y.open(K,W)}e.close()}else e.commit();break;case"Escape":(e.selectedKey!==null||e.inputValue===""||t.allowsCustomValue)&&W.continuePropagation(),e.revert();break;case"ArrowDown":e.open("first","manual");break;case"ArrowUp":e.open("last","manual");break;case"ArrowLeft":case"ArrowRight":e.selectionManager.setFocusedKey(null);break}},b=W=>{var K;W.relatedTarget===(n==null?void 0:n.current)||!((K=r.current)===null||K===void 0)&&K.contains(W.relatedTarget)||(t.onBlur&&t.onBlur(W),e.setFocused(!1))},w=W=>{e.isFocused||(t.onFocus&&t.onFocus(W),e.setFocused(!0))},{labelProps:x,inputProps:k,descriptionProps:S,errorMessageProps:_}=YL({...t,onChange:e.setInputValue,onKeyDown:!l&&Pc(e.isOpen&&h.onKeyDown,g,t.onKeyDown),onBlur:b,value:e.inputValue,onFocus:w,autoComplete:"off"},o),C=W=>{W.pointerType==="touch"&&(o.current.focus(),e.toggle(null,"manual"))},$=W=>{W.pointerType!=="touch"&&(o.current.focus(),e.toggle(W.pointerType==="keyboard"||W.pointerType==="virtual"?"first":null,"manual"))},T=_g({id:d.id,"aria-label":u.format("buttonLabel"),"aria-labelledby":t["aria-labelledby"]||x.id}),A=_g({id:f.id,"aria-label":u.format("listboxLabel"),"aria-labelledby":t["aria-labelledby"]||x.id}),N=v.useRef(0),q=W=>{if(c||l)return;if(W.timeStamp-N.current<500){W.preventDefault(),o.current.focus();return}let K=W.target.getBoundingClientRect(),Ce=W.changedTouches[0],Te=Math.ceil(K.left+.5*K.width),Se=Math.ceil(K.top+.5*K.height);Ce.clientX===Te&&Ce.clientY===Se&&(W.preventDefault(),o.current.focus(),e.toggle(null,"manual"),N.current=W.timeStamp)},O=e.selectionManager.focusedKey!=null&&e.isOpen?e.collection.getItem(e.selectionManager.focusedKey):void 0;var E;let D=(E=O==null?void 0:O.parentKey)!==null&&E!==void 0?E:null;var R;let j=(R=e.selectionManager.focusedKey)!==null&&R!==void 0?R:null,we=v.useRef(D),Oe=v.useRef(j);v.useEffect(()=>{if(Vh()&&O!=null&&j!==Oe.current){let W=e.selectionManager.isSelected(j),K=D!=null?e.collection.getItem(D):null,Ce=(K==null?void 0:K["aria-label"])||(typeof(K==null?void 0:K.rendered)=="string"?K.rendered:"")||"",Te=u.format("focusAnnouncement",{isGroupChange:K&&D!==we.current,groupTitle:Ce,groupCount:K?[...$y(K,e.collection)].length:0,optionText:O["aria-label"]||O.textValue||"",isSelected:W});_v(Te)}we.current=D,Oe.current=j});let ee=Q$(e.collection),z=v.useRef(ee),F=v.useRef(e.isOpen);v.useEffect(()=>{let W=e.isOpen!==F.current&&(e.selectionManager.focusedKey==null||Vh());if(e.isOpen&&(W||ee!==z.current)){let K=u.format("countAnnouncement",{optionCount:ee});_v(K)}z.current=ee,F.current=e.isOpen});let B=v.useRef(e.selectedKey);return v.useEffect(()=>{if(Vh()&&e.isFocused&&e.selectedItem&&e.selectedKey!==B.current){let W=e.selectedItem["aria-label"]||e.selectedItem.textValue||"",K=u.format("selectedAnnouncement",{optionText:W});_v(K)}B.current=e.selectedKey}),v.useEffect(()=>{if(e.isOpen)return rSt([o.current,r.current])},[e.isOpen,o,r]),{labelProps:x,buttonProps:{...d,...T,excludeFromTabOrder:!0,onPress:C,onPressStart:$,isDisabled:c||l},inputProps:nt(k,{role:"combobox","aria-expanded":d["aria-expanded"],"aria-controls":e.isOpen?f.id:void 0,"aria-autocomplete":"list","aria-activedescendant":O?pL(e,O.key):void 0,onTouchEnd:q,autoCorrect:"off",spellCheck:"false"}),listBoxProps:nt(f,A,{autoFocus:e.focusStrategy,shouldUseVirtualFocus:!0,shouldSelectOnPressUp:!0,shouldFocusOnHover:!0,linkBehavior:"selection"}),descriptionProps:S,errorMessageProps:_}}class Cr extends Set{constructor(e,n,r){super(e),e instanceof Cr?(this.anchorKey=n||e.anchorKey,this.currentKey=r||e.currentKey):(this.anchorKey=n,this.currentKey=r)}}function ESt(t,e){if(t.size!==e.size)return!1;for(let n of t)if(!e.has(n))return!1;return!0}function I9(t){let{selectionMode:e="none",disallowEmptySelection:n,allowDuplicateSelectionEvents:r,selectionBehavior:o="toggle",disabledBehavior:s="all"}=t,i=v.useRef(!1),[,a]=v.useState(!1),l=v.useRef(null),c=v.useRef(null),[,u]=v.useState(null),d=v.useMemo(()=>oN(t.selectedKeys),[t.selectedKeys]),f=v.useMemo(()=>oN(t.defaultSelectedKeys,new Cr),[t.defaultSelectedKeys]),[p,h]=iu(d,f,t.onSelectionChange),y=v.useMemo(()=>t.disabledKeys?new Set(t.disabledKeys):new Set,[t.disabledKeys]),[g,b]=v.useState(o);o==="replace"&&g==="toggle"&&typeof p=="object"&&p.size===0&&b("replace");let w=v.useRef(o);return v.useEffect(()=>{o!==w.current&&(b(o),w.current=o)},[o]),{selectionMode:e,disallowEmptySelection:n,selectionBehavior:g,setSelectionBehavior:b,get isFocused(){return i.current},setFocused(x){i.current=x,a(x)},get focusedKey(){return l.current},get childFocusStrategy(){return c.current},setFocusedKey(x,k="first"){l.current=x,c.current=k,u(x)},selectedKeys:p,setSelectedKeys(x){(r||!ESt(x,p))&&h(x)},disabledKeys:y,disabledBehavior:s}}function oN(t,e){return t?t==="all"?"all":new Cr(t):e}class R9{get selectionMode(){return this.state.selectionMode}get disallowEmptySelection(){return this.state.disallowEmptySelection}get selectionBehavior(){return this.state.selectionBehavior}setSelectionBehavior(e){this.state.setSelectionBehavior(e)}get isFocused(){return this.state.isFocused}setFocused(e){this.state.setFocused(e)}get focusedKey(){return this.state.focusedKey}get childFocusStrategy(){return this.state.childFocusStrategy}setFocusedKey(e,n){(e==null||this.collection.getItem(e))&&this.state.setFocusedKey(e,n)}get selectedKeys(){return this.state.selectedKeys==="all"?new Set(this.getSelectAllKeys()):this.state.selectedKeys}get rawSelection(){return this.state.selectedKeys}isSelected(e){return this.state.selectionMode==="none"?!1:(e=this.getKey(e),this.state.selectedKeys==="all"?this.canSelectItem(e):this.state.selectedKeys.has(e))}get isEmpty(){return this.state.selectedKeys!=="all"&&this.state.selectedKeys.size===0}get isSelectAll(){if(this.isEmpty)return!1;if(this.state.selectedKeys==="all")return!0;if(this._isSelectAll!=null)return this._isSelectAll;let e=this.getSelectAllKeys(),n=this.state.selectedKeys;return this._isSelectAll=e.every(r=>n.has(r)),this._isSelectAll}get firstSelectedKey(){let e=null;for(let n of this.state.selectedKeys){let r=this.collection.getItem(n);(!e||r&&Tv(this.collection,r,e)<0)&&(e=r)}return e==null?void 0:e.key}get lastSelectedKey(){let e=null;for(let n of this.state.selectedKeys){let r=this.collection.getItem(n);(!e||r&&Tv(this.collection,r,e)>0)&&(e=r)}return e==null?void 0:e.key}get disabledKeys(){return this.state.disabledKeys}get disabledBehavior(){return this.state.disabledBehavior}extendSelection(e){if(this.selectionMode==="none")return;if(this.selectionMode==="single"){this.replaceSelection(e);return}e=this.getKey(e);let n;if(this.state.selectedKeys==="all")n=new Cr([e],e,e);else{let r=this.state.selectedKeys,o=r.anchorKey||e;n=new Cr(r,o,e);for(let s of this.getKeyRange(o,r.currentKey||e))n.delete(s);for(let s of this.getKeyRange(e,o))this.canSelectItem(s)&&n.add(s)}this.state.setSelectedKeys(n)}getKeyRange(e,n){let r=this.collection.getItem(e),o=this.collection.getItem(n);return r&&o?Tv(this.collection,r,o)<=0?this.getKeyRangeInternal(e,n):this.getKeyRangeInternal(n,e):[]}getKeyRangeInternal(e,n){let r=[],o=e;for(;o;){let s=this.collection.getItem(o);if((s&&s.type==="item"||s.type==="cell"&&this.allowsCellSelection)&&r.push(o),o===n)return r;o=this.collection.getKeyAfter(o)}return[]}getKey(e){let n=this.collection.getItem(e);if(!n||n.type==="cell"&&this.allowsCellSelection)return e;for(;n.type!=="item"&&n.parentKey!=null;)n=this.collection.getItem(n.parentKey);return!n||n.type!=="item"?null:n.key}toggleSelection(e){if(this.selectionMode==="none")return;if(this.selectionMode==="single"&&!this.isSelected(e)){this.replaceSelection(e);return}if(e=this.getKey(e),e==null)return;let n=new Cr(this.state.selectedKeys==="all"?this.getSelectAllKeys():this.state.selectedKeys);n.has(e)?n.delete(e):this.canSelectItem(e)&&(n.add(e),n.anchorKey=e,n.currentKey=e),!(this.disallowEmptySelection&&n.size===0)&&this.state.setSelectedKeys(n)}replaceSelection(e){if(this.selectionMode==="none"||(e=this.getKey(e),e==null))return;let n=this.canSelectItem(e)?new Cr([e],e,e):new Cr;this.state.setSelectedKeys(n)}setSelectedKeys(e){if(this.selectionMode==="none")return;let n=new Cr;for(let r of e)if(r=this.getKey(r),r!=null&&(n.add(r),this.selectionMode==="single"))break;this.state.setSelectedKeys(n)}getSelectAllKeys(){let e=[],n=r=>{for(;r;){if(this.canSelectItem(r)){let o=this.collection.getItem(r);o.type==="item"&&e.push(r),o.hasChildNodes&&(this.allowsCellSelection||o.type!=="item")&&n(pSt($y(o,this.collection)).key)}r=this.collection.getKeyAfter(r)}};return n(this.collection.getFirstKey()),e}selectAll(){!this.isSelectAll&&this.selectionMode==="multiple"&&this.state.setSelectedKeys("all")}clearSelection(){!this.disallowEmptySelection&&(this.state.selectedKeys==="all"||this.state.selectedKeys.size>0)&&this.state.setSelectedKeys(new Cr)}toggleSelectAll(){this.isSelectAll?this.clearSelection():this.selectAll()}select(e,n){this.selectionMode!=="none"&&(this.selectionMode==="single"?this.isSelected(e)&&!this.disallowEmptySelection?this.toggleSelection(e):this.replaceSelection(e):this.selectionBehavior==="toggle"||n&&(n.pointerType==="touch"||n.pointerType==="virtual")?this.toggleSelection(e):this.replaceSelection(e))}isSelectionEqual(e){if(e===this.state.selectedKeys)return!0;let n=this.selectedKeys;if(e.size!==n.size)return!1;for(let r of e)if(!n.has(r))return!1;for(let r of n)if(!e.has(r))return!1;return!0}canSelectItem(e){if(this.state.selectionMode==="none"||this.state.disabledKeys.has(e))return!1;let n=this.collection.getItem(e);return!(!n||n.type==="cell"&&!this.allowsCellSelection)}isDisabled(e){return this.state.disabledKeys.has(e)&&this.state.disabledBehavior==="all"}isLink(e){var n,r;return!!(!((n=this.collection.getItem(e))===null||n===void 0||(r=n.props)===null||r===void 0)&&r.href)}constructor(e,n,r){this.collection=e,this.state=n;var o;this.allowsCellSelection=(o=r==null?void 0:r.allowsCellSelection)!==null&&o!==void 0?o:!1,this._isSelectAll=null}}class Zw{*[Symbol.iterator](){yield*this.iterable}get size(){return this.keyMap.size}getKeys(){return this.keyMap.keys()}getKeyBefore(e){let n=this.keyMap.get(e);return n?n.prevKey:null}getKeyAfter(e){let n=this.keyMap.get(e);return n?n.nextKey:null}getFirstKey(){return this.firstKey}getLastKey(){return this.lastKey}getItem(e){return this.keyMap.get(e)}at(e){const n=[...this.getKeys()];return this.getItem(n[e])}getChildren(e){let n=this.keyMap.get(e);return(n==null?void 0:n.childNodes)||[]}constructor(e){this.keyMap=new Map,this.iterable=e;let n=s=>{if(this.keyMap.set(s.key,s),s.childNodes&&s.type==="section")for(let i of s.childNodes)n(i)};for(let s of e)n(s);let r,o=0;for(let[s,i]of this.keyMap)r?(r.nextKey=s,i.prevKey=r.key):(this.firstKey=s,i.prevKey=void 0),i.type==="item"&&(i.index=o++),r=i,r.nextKey=void 0;this.lastKey=r==null?void 0:r.key}}function M9(t){let{filter:e}=t,n=I9(t),r=v.useMemo(()=>t.disabledKeys?new Set(t.disabledKeys):new Set,[t.disabledKeys]),o=v.useCallback(c=>e?new Zw(e(c)):new Zw(c),[e]),s=v.useMemo(()=>({suppressTextValueWarning:t.suppressTextValueWarning}),[t.suppressTextValueWarning]),i=fL(t,o,s),a=v.useMemo(()=>new R9(i,n),[i,n]);const l=v.useRef(null);return v.useEffect(()=>{if(n.focusedKey!=null&&!i.getItem(n.focusedKey)){const c=l.current.getItem(n.focusedKey),u=[...l.current.getKeys()].map(y=>{const g=l.current.getItem(y);return g.type==="item"?g:null}).filter(y=>y!==null),d=[...i.getKeys()].map(y=>{const g=i.getItem(y);return g.type==="item"?g:null}).filter(y=>y!==null),f=u.length-d.length;let p=Math.min(f>1?Math.max(c.index-f+1,0):c.index,d.length-1),h;for(;p>=0;){if(!a.isDisabled(d[p].key)){h=d[p];break}p<d.length-1?p++:(p>c.index&&(p=c.index),p--)}n.setFocusedKey(h?h.key:null)}l.current=i},[i,a,n,n.focusedKey]),{collection:i,disabledKeys:r,selectionManager:a}}function SSt(t){var e;let[n,r]=iu(t.selectedKey,(e=t.defaultSelectedKey)!==null&&e!==void 0?e:null,t.onSelectionChange),o=v.useMemo(()=>n!=null?[n]:[],[n]),{collection:s,disabledKeys:i,selectionManager:a}=M9({...t,selectionMode:"single",disallowEmptySelection:!0,allowDuplicateSelectionEvents:!0,selectedKeys:o,onSelectionChange:c=>{var u;let d=(u=c.values().next().value)!==null&&u!==void 0?u:null;d===n&&t.onSelectionChange&&t.onSelectionChange(d),r(d)}}),l=n!=null?s.getItem(n):null;return{collection:s,disabledKeys:i,selectionManager:a,selectedKey:n,setSelectedKey:r,selectedItem:l}}function D9(t){let[e,n]=iu(t.isOpen,t.defaultOpen||!1,t.onOpenChange);const r=v.useCallback(()=>{n(!0)},[n]),o=v.useCallback(()=>{n(!1)},[n]),s=v.useCallback(()=>{n(!e)},[n,e]);return{isOpen:e,setOpen:n,open:r,close:o,toggle:s}}function CSt(t){let e=D9(t),[n,r]=v.useState(null);return{focusStrategy:n,...e,open(o=null){r(o),e.open()},toggle(o=null){r(o),e.toggle()}}}function TSt(t){var e,n;let{defaultFilter:r,menuTrigger:o="input",allowsEmptyCollection:s=!1,allowsCustomValue:i,shouldCloseOnBlur:a=!0}=t,[l,c]=v.useState(!1),[u,d]=v.useState(!1),f=be=>{t.onSelectionChange&&t.onSelectionChange(be),be===g&&(ee(),we())};var p;let{collection:h,selectionManager:y,selectedKey:g,setSelectedKey:b,selectedItem:w,disabledKeys:x}=SSt({...t,onSelectionChange:f,items:(p=t.items)!==null&&p!==void 0?p:t.defaultItems});var k,S;let[_,C]=iu(t.inputValue,(S=(k=t.defaultInputValue)!==null&&k!==void 0?k:(e=h.getItem(g))===null||e===void 0?void 0:e.textValue)!==null&&S!==void 0?S:"",t.onInputChange),$=h,T=v.useMemo(()=>t.items!=null||!r?h:ASt(h,_,r),[h,_,r,t.items]),[A,N]=v.useState(T),q=v.useRef("focus"),E=CSt({...t,onOpenChange:be=>{t.onOpenChange&&t.onOpenChange(be,be?q.current:void 0),y.setFocused(be),be||y.setFocusedKey(null)},isOpen:void 0,defaultOpen:void 0}),D=(be,je)=>{let Ie=je==="manual"||je==="focus"&&o==="focus";(s||T.size>0||Ie&&$.size>0||t.items)&&(Ie&&!E.isOpen&&t.items===void 0&&c(!0),q.current=je,E.open(be))},R=(be,je)=>{let Ie=je==="manual"||je==="focus"&&o==="focus";!(s||T.size>0||Ie&&$.size>0||t.items)&&!E.isOpen||(Ie&&!E.isOpen&&t.items===void 0&&c(!0),E.isOpen||(q.current=je),j(be))},j=v.useCallback(be=>{E.isOpen&&N(T),E.toggle(be)},[E,T]),we=v.useCallback(()=>{E.isOpen&&(N(T),E.close())},[E,T]),Oe=v.useRef(_),ee=()=>{var be,je;let Ie=(je=(be=h.getItem(g))===null||be===void 0?void 0:be.textValue)!==null&&je!==void 0?je:"";Oe.current=Ie,C(Ie)};var z,F;let B=v.useRef((F=(z=t.selectedKey)!==null&&z!==void 0?z:t.defaultSelectedKey)!==null&&F!==void 0?F:null);var W;let K=v.useRef((W=(n=h.getItem(g))===null||n===void 0?void 0:n.textValue)!==null&&W!==void 0?W:"");v.useEffect(()=>{var be;u&&(T.size>0||s)&&!E.isOpen&&_!==Oe.current&&o!=="manual"&&D(null,"input"),!l&&!s&&E.isOpen&&T.size===0&&we(),g!=null&&g!==B.current&&we(),_!==Oe.current&&(y.setFocusedKey(null),c(!1),_===""&&(t.inputValue===void 0||t.selectedKey===void 0)&&b(null)),g!==B.current&&(t.inputValue===void 0||t.selectedKey===void 0)?ee():Oe.current=_;var je;let Ie=(je=(be=h.getItem(g))===null||be===void 0?void 0:be.textValue)!==null&&je!==void 0?je:"";!u&&g!=null&&t.inputValue===void 0&&g===B.current&&K.current!==Ie&&(Oe.current=Ie,C(Ie)),B.current=g,K.current=Ie});let Ce=()=>{i&&g==null?Te():Se()},Te=()=>{B.current=null,b(null),we()},Se=()=>{if(t.selectedKey!==void 0&&t.inputValue!==void 0){var be;t.onSelectionChange(g);var je;let Ie=(je=(be=h.getItem(g))===null||be===void 0?void 0:be.textValue)!==null&&je!==void 0?je:"";Oe.current=Ie,we()}else ee(),we()};const gt=()=>{if(i){var be,je;const Ie=(je=(be=h.getItem(g))===null||be===void 0?void 0:be.textValue)!==null&&je!==void 0?je:"";_===Ie?Se():Te()}else Se()};let ws=()=>{E.isOpen&&y.focusedKey!=null?g===y.focusedKey?Se():b(y.focusedKey):gt()},Gr=be=>{be?o==="focus"&&D(null,"focus"):a&&gt(),d(be)},Oo=v.useMemo(()=>E.isOpen?l?$:T:A,[E.isOpen,$,T,l,A]);return{...E,toggle:R,open:D,close:gt,selectionManager:y,selectedKey:g,setSelectedKey:b,disabledKeys:x,isFocused:u,setFocused:Gr,selectedItem:w,collection:Oo,inputValue:_,setInputValue:C,commit:ws,revert:Ce}}function ASt(t,e,n){return new Zw(L9(t,t,e,n))}function L9(t,e,n,r){let o=[];for(let s of e)if(s.type==="section"&&s.hasChildNodes){let i=L9(t,$y(s,t),n,r);[...i].some(a=>a.type==="item")&&o.push({...s,childNodes:i})}else s.type==="item"&&r(s.textValue,n)?o.push({...s}):s.type!=="item"&&o.push({...s});return o}function j9(t){let e=Li(t,{labelable:!0}),n;return t.orientation==="vertical"&&(n="vertical"),t.elementType!=="hr"?{separatorProps:{...e,role:"separator","aria-orientation":n}}:{separatorProps:e}}function F9(t){let e=v.useRef(null),{listBoxRef:n=e,state:r}=t,{listBoxProps:o}=gSt(t,r,n),s=t.optionComponent||PSt;return m.jsx("ul",{...o,ref:n,className:oe("outline-none",t.className),children:[...r.collection].map(i=>i.type==="section"?m.jsx(NSt,{optionComponent:s,section:i,state:r},i.key):m.jsx(s,{item:i,state:r},i.key))})}function NSt({section:t,state:e,optionComponent:n}){let{itemProps:r,headingProps:o,groupProps:s}=ySt({heading:t.rendered,"aria-label":t["aria-label"]}),{separatorProps:i}=j9({elementType:"li"});return m.jsxs(m.Fragment,{children:[t.key!==e.collection.getFirstKey()&&m.jsx("li",{...i,className:"mx-1 my-2 border-t-1 border-colorNeutralBorder border-solid"}),m.jsxs("li",{...r,className:"pt-2",children:[t.rendered&&m.jsx("span",{...o,className:"text-xs font-bold uppercase mx-3 select-none text-colorNeutralTextSubdued",children:t.rendered}),m.jsx("ul",{...s,children:[...t.childNodes].map(a=>m.jsx(n,{item:a,state:e},a.key))})]})]})}function PSt({item:t,state:e}){let n=v.useRef(null),{optionProps:r,isDisabled:o,isSelected:s,isFocused:i}=hL({key:t.key},e,n);return m.jsx("li",{...r,ref:n,className:"outline-none",children:m.jsxs("div",{className:oe("my-1 py-2 px-2 text-sm outline-none flex items-center justify-between select-none rounded",o&&"text-colorNeutralTextDisabled cursor-not-allowed",s?"bg-colorPromoteSolid":i?"bg-colorNeutralSolidFaint":""),children:[t.rendered,s&&m.jsx(b6,{"aria-hidden":"true",className:"w-4 h-4"})]})})}function OSt(t){let e=v.useRef(null),{popoverRef:n=e,isOpen:r,onClose:o,children:s}=t,{overlayProps:i}=k6({isOpen:r,onClose:o,shouldCloseOnBlur:!0,isDismissable:!1},n);return m.jsx(Z$,{restoreFocus:!0,children:m.jsxs("div",{...i,ref:n,className:"shadow-md bg-colorBgLayerFloat absolute z-10 top-full w-full mt-2 rounded",children:[s,m.jsx(nSt,{onDismiss:o})]})})}function ISt(t){let{contains:e}=zEt({sensitivity:"base"}),n=TSt({...t,defaultFilter:e}),r=v.useRef(null),o=v.useRef(null),s=v.useRef(null),i=v.useRef(null),{buttonProps:a,inputProps:l,listBoxProps:c,labelProps:u}=$St({...t,inputRef:o,buttonRef:r,listBoxRef:s,popoverRef:i},n),{buttonProps:d}=ky(a,r);return m.jsxs("div",{className:oe("B-ui-components_combo-box flex flex-col relative"),children:[m.jsx("label",{...u,className:"block select-none text-sm font-medium text-left text-colorNeutralTextSubdued",children:t.label}),m.jsxs("div",{className:oe("relative inline-flex flex-row rounded-md overflow-hidden","text-field-neutral border-solid border-1 border-colorNeutralTextFieldBorder px-1 py-1 rounded",n.isFocused&&"B-ui-components_misc-input-ring"),children:[m.jsx("input",{...l,ref:o,className:oe("w-full outline-none px-2 py-1 text-field-neutral")}),m.jsx("button",{...d,ref:r,className:"px-1 cursor-pointer",children:m.jsx(AEt,{className:"w-5 h-5","aria-hidden":"true"})})]}),n.isOpen&&m.jsx(OSt,{popoverRef:i,isOpen:n.isOpen,onClose:n.close,children:m.jsx(F9,{className:"max-h-72 overflow-auto border-neutral bg-colorNeutralTextFieldBg text-colorNeutralTextFieldText rounded",...c,listBoxRef:s,state:n})})]})}function RSt(t,e){let{role:n="dialog"}=t,r=di();r=t["aria-label"]?void 0:r;let o=v.useRef(!1);return v.useEffect(()=>{if(e.current&&!e.current.contains(document.activeElement)){Ti(e.current);let s=setTimeout(()=>{document.activeElement===e.current&&(o.current=!0,e.current.blur(),Ti(e.current),o.current=!1)},500);return()=>{clearTimeout(s)}}},[e]),sSt(),{dialogProps:{...Li(t,{labelable:!0}),role:n,tabIndex:-1,"aria-labelledby":t["aria-labelledby"]||r,onBlur:s=>{o.current&&s.stopPropagation()}},titleProps:{id:r}}}const cu=({children:t,style:e={},size:n,className:r="",...o})=>m.jsx("svg",{style:e,fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:`${n?`h-${n} w-${n}`:""} ${r}`,...o,children:t}),eE=t=>m.jsx(cu,{...t,children:m.jsx("path",{d:"M6.343 7.757L4.93 9.172 12 16.242l7.071-7.07-1.414-1.415L12 13.414 6.343 7.757z"})}),MSt=t=>m.jsx(cu,{...t,children:m.jsx("path",{d:"M17.657 16.243l1.414-1.414-7.07-7.072-7.072 7.072 1.414 1.414L12 10.586l5.657 5.657z",fill:"currentColor"})}),uu=t=>m.jsx(cu,{...t,children:m.jsx("path",{d:"M6.2253 4.81108C5.83477 4.42056 5.20161 4.42056 4.81108 4.81108C4.42056 5.20161 4.42056 5.83477 4.81108 6.2253L10.5858 12L4.81114 17.7747C4.42062 18.1652 4.42062 18.7984 4.81114 19.1889C5.20167 19.5794 5.83483 19.5794 6.22535 19.1889L12 13.4142L17.7747 19.1889C18.1652 19.5794 18.7984 19.5794 19.1889 19.1889C19.5794 18.7984 19.5794 18.1652 19.1889 17.7747L13.4142 12L19.189 6.2253C19.5795 5.83477 19.5795 5.20161 19.189 4.81108C18.7985 4.42056 18.1653 4.42056 17.7748 4.81108L12 10.5858L6.2253 4.81108Z",fill:"currentColor"})}),DSt=t=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,...t,children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})});function LSt(t){return m.jsxs(cu,{...t,children:[m.jsx("path",{d:"M5.0333 14.8284L6.44751 16.2426L10.6902 12L6.44751 7.75733L5.0333 9.17155L7.86172 12L5.0333 14.8284Z",fill:"currentColor"}),m.jsx("path",{d:"M15 14H11V16H15V14Z",fill:"currentColor"}),m.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"currentColor",d:"M2 2C0.895431 2 0 2.89543 0 4V20C0 21.1046 0.89543 22 2 22H22C23.1046 22 24 21.1046 24 20V4C24 2.89543 23.1046 2 22 2H2ZM22 4H2L2 20H22V4Z"})]})}function jSt(t){return m.jsx(cu,{...t,children:m.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 19C2 20.6569 3.34315 22 5 22H19C20.6569 22 22 20.6569 22 19V5C22 3.34315 20.6569 2 19 2H5C3.34315 2 2 3.34315 2 5V19ZM20 19C20 19.5523 19.5523 20 19 20H5C4.44772 20 4 19.5523 4 19V5C4 4.44772 4.44772 4 5 4H10V12.0111L12.395 12.0112L14.0001 9.86419L15.6051 12.0112H18.0001L18 4H19C19.5523 4 20 4.44772 20 5V19ZM16 4H12V9.33585L14.0001 6.66046L16 9.33571V4Z",fill:"currentColor"})})}function FSt(t){return m.jsxs(cu,{...t,children:[m.jsx("path",{d:"M7 18H17V16H7V18Z",fill:"currentColor"}),m.jsx("path",{d:"M17 14H7V12H17V14Z",fill:"currentColor"}),m.jsx("path",{d:"M7 10H11V8H7V10Z",fill:"currentColor"}),m.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6 2C4.34315 2 3 3.34315 3 5V19C3 20.6569 4.34315 22 6 22H18C19.6569 22 21 20.6569 21 19V9C21 5.13401 17.866 2 14 2H6ZM6 4H13V9H19V19C19 19.5523 18.5523 20 18 20H6C5.44772 20 5 19.5523 5 19V5C5 4.44772 5.44772 4 6 4ZM15 4.10002C16.6113 4.4271 17.9413 5.52906 18.584 7H15V4.10002Z",fill:"currentColor"})]})}function B9(t){return m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",...t,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[m.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}),m.jsx("path",{d:"M12 3v18"})]})}function tE(t){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...t})}function sN(t){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...t,children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}function z9({className:t="",...e}){return m.jsx("svg",{"aria-label":"search spinner",className:"B-ui-components_spinner-icon "+t,viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",...e,children:m.jsx("circle",{cx:"50",cy:"50",r:"45"})})}function q9({className:t="w-6 h-6",...e}){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:t,...e,children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}function W9({className:t="w-6 h-6",...e}){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:t,...e,children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}function V9({className:t="w-6 h-6",...e}){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:t,...e,children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}function U9({className:t="w-6 h-6",...e}){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:t,...e,children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}function BSt(t){return m.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",children:[m.jsx("path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"}),m.jsx("path",{d:"M2 10h20"})]})}function zSt(t){return m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18",stroke:"currentColor",...t,children:[m.jsx("path",{d:"M10,5.5V1H3.5a.5.5,0,0,0-.5.5v15a.5.5,0,0,0,.5.5h11a.5.5,0,0,0,.5-.5V6H10.5A.5.5,0,0,1,10,5.5Z"}),m.jsx("path",{d:"M11,1h.043a.5.5,0,0,1,.3535.1465l3.457,3.457A.5.5,0,0,1,15,4.957V5H11Z"})]})}function qSt(t){return m.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",children:[m.jsx("circle",{cx:"11",cy:"11",r:"8"}),m.jsx("path",{d:"m21 21-4.3-4.3"})]})}function WSt({showDot:t=!1,...e}){return m.jsxs("svg",{...e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.8","stroke-linecap":"round","stroke-linejoin":"round",children:[m.jsx("rect",{x:"3",y:"8",width:"18",height:"4",rx:"1"}),m.jsx("path",{d:"M12 8v13"}),m.jsx("path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7"}),m.jsx("path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5"})]})}function VSt(t){return m.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",children:[m.jsx("path",{d:"M5 12h14"}),m.jsx("path",{d:"M12 5v14"})]})}function USt(t){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",...t,viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})}function H9(t){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",...t,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:m.jsx("path",{d:"m15 18-6-6 6-6"})})}function nE(t){return m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18",fill:"currentColor",...t,children:[m.jsx("rect",{fill:"#ff13dc",opacity:"0",width:"18",height:"18"}),m.jsx("path",{d:"M12,9a.994.994,0,0,1-.2925.7045l-3.9915,3.99a1,1,0,1,1-1.4355-1.386l.0245-.0245L9.5905,9,6.3045,5.715A1,1,0,0,1,7.691,4.28l.0245.0245,3.9915,3.99A.994.994,0,0,1,12,9Z"})]})}function HSt(t){return m.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[m.jsx("path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"}),m.jsx("path",{d:"m21.854 2.147-10.94 10.939"})]})}function KSt(t){return m.jsxs("svg",{...t,width:"24.000000",height:"24.000000",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",children:[m.jsx("defs",{children:m.jsx("clipPath",{id:"clip4_1970",children:m.jsx("rect",{id:"svg",width:"24.000000",height:"24.000000",fill:"white","fill-opacity":"0"})})}),m.jsxs("g",{"clip-path":"url(#clip4_1970)",children:[m.jsx("path",{id:"path",d:"M4.96 7.9C4.42 7.9 3.95 7.71 3.57 7.33C3.19 6.95 3 6.49 3 5.95C3 5.41 3.19 4.95 3.57 4.57C3.95 4.19 4.42 4 4.96 4C5.5 4 5.97 4.19 6.35 4.57C6.73 4.95 6.93 5.41 6.93 5.95C6.93 6.49 6.73 6.95 6.35 7.33C5.97 7.71 5.5 7.9 4.96 7.9Z",fill:"#000000","fill-opacity":"1.000000","fill-rule":"nonzero"}),m.jsx("path",{id:"path",d:"M13.46 7.9C12.92 7.9 12.46 7.71 12.07 7.33C11.69 6.95 11.5 6.49 11.5 5.95C11.5 5.41 11.69 4.95 12.07 4.57C12.46 4.19 12.92 4 13.46 4C14 4 14.47 4.19 14.85 4.57C15.24 4.95 15.43 5.41 15.43 5.95C15.43 6.49 15.24 6.95 14.85 7.33C14.47 7.71 14 7.9 13.46 7.9Z",fill:"#000000","fill-opacity":"1.000000","fill-rule":"nonzero"}),m.jsx("path",{id:"path",d:"M21.98 7.9C21.44 7.9 20.97 7.71 20.59 7.33C20.2 6.95 20.01 6.49 20.01 5.95C20.01 5.41 20.2 4.95 20.59 4.57C20.97 4.19 21.44 4 21.98 4C22.52 4 22.98 4.19 23.37 4.57C23.75 4.95 23.94 5.41 23.94 5.95C23.95 6.49 23.76 6.95 23.37 7.33C22.99 7.71 22.52 7.9 21.98 7.9Z",fill:"#000000","fill-opacity":"1.000000","fill-rule":"nonzero"}),m.jsx("path",{id:"path",d:"M30.5 7.9C29.95 7.9 29.49 7.71 29.11 7.33C28.72 6.95 28.53 6.49 28.53 5.95C28.53 5.41 28.72 4.95 29.11 4.57C29.49 4.19 29.95 4 30.5 4C31.04 4 31.5 4.19 31.88 4.57C32.27 4.95 32.46 5.41 32.46 5.95C32.46 6.49 32.27 6.95 31.89 7.33C31.5 7.71 31.04 7.9 30.5 7.9Z",fill:"#000000","fill-opacity":"1.000000","fill-rule":"nonzero"}),m.jsx("path",{id:"path",d:"M39 7.9C38.45 7.9 37.99 7.71 37.61 7.33C37.22 6.95 37.03 6.49 37.03 5.95C37.03 5.41 37.22 4.95 37.61 4.57C37.99 4.19 38.45 4 39 4C39.54 4 40 4.19 40.39 4.57C40.77 4.95 40.96 5.41 40.96 5.95C40.96 6.49 40.77 6.95 40.39 7.33C40 7.71 39.54 7.9 39 7.9Z",fill:"#000000","fill-opacity":"1.000000","fill-rule":"nonzero"}),m.jsx("path",{id:"path",d:"M47.51 7.9C46.97 7.9 46.51 7.71 46.12 7.33C45.74 6.95 45.55 6.49 45.55 5.95C45.55 5.41 45.74 4.95 46.12 4.57C46.51 4.19 46.97 4 47.51 4C48.06 4 48.52 4.19 48.9 4.57C49.29 4.95 49.48 5.41 49.48 5.95C49.48 6.49 49.29 6.95 48.91 7.33C48.52 7.71 48.06 7.9 47.51 7.9Z",fill:"#000000","fill-opacity":"1.000000","fill-rule":"nonzero"}),m.jsx("path",{id:"path",d:"M56.03 7.9C55.49 7.9 55.02 7.71 54.64 7.33C54.26 6.95 54.06 6.49 54.06 5.95C54.06 5.41 54.26 4.95 54.64 4.57C55.02 4.19 55.49 4 56.03 4C56.57 4 57.04 4.19 57.42 4.57C57.8 4.95 58 5.41 58 5.95C58 6.49 57.81 6.95 57.42 7.33C57.04 7.71 56.57 7.9 56.03 7.9Z",fill:"#000000","fill-opacity":"1.000000","fill-rule":"nonzero"}),m.jsx("path",{id:"path",d:"M39.11 20.72L13.35 20.72C12.21 20.62 11.65 20 11.65 18.88C11.65 17.75 12.21 17.13 13.35 17.03L39.11 17.03C40.25 17.13 40.81 17.75 40.81 18.88C40.81 20 40.25 20.62 39.11 20.72Z",fill:"#000000","fill-opacity":"1.000000","fill-rule":"nonzero"}),m.jsx("path",{id:"path",d:"M4.96 20.83C4.42 20.83 3.95 20.64 3.57 20.26C3.19 19.88 3 19.42 3 18.88C3 18.34 3.19 17.88 3.57 17.5C3.95 17.12 4.42 16.93 4.96 16.93C5.5 16.93 5.97 17.12 6.35 17.5C6.73 17.88 6.93 18.34 6.93 18.88C6.93 19.42 6.73 19.88 6.35 20.26C5.97 20.64 5.5 20.83 4.96 20.83Z",fill:"#000000","fill-opacity":"1.000000","fill-rule":"nonzero"}),m.jsx("path",{id:"path",d:"M47.51 20.83C46.97 20.83 46.51 20.64 46.12 20.26C45.74 19.88 45.55 19.42 45.55 18.88C45.55 18.34 45.74 17.88 46.12 17.5C46.51 17.12 46.97 16.93 47.51 16.93C48.06 16.93 48.52 17.12 48.9 17.5C49.29 17.88 49.48 18.34 49.48 18.88C49.48 19.42 49.29 19.89 48.91 20.27C48.52 20.65 48.06 20.84 47.51 20.83Z",fill:"#000000","fill-opacity":"1.000000","fill-rule":"nonzero"}),m.jsx("path",{id:"path",d:"M56.03 20.83C55.49 20.83 55.02 20.64 54.64 20.26C54.26 19.88 54.06 19.42 54.06 18.88C54.06 18.34 54.26 17.88 54.64 17.5C55.02 17.12 55.49 16.93 56.03 16.93C56.57 16.93 57.04 17.12 57.42 17.5C57.8 17.88 58 18.34 58 18.88C58 19.42 57.81 19.89 57.42 20.27C57.04 20.65 56.57 20.84 56.03 20.83Z",fill:"#000000","fill-opacity":"1.000000","fill-rule":"nonzero"}),m.jsx("path",{id:"path",d:"M9.24 14.37C8.7 14.37 8.23 14.18 7.85 13.8C7.47 13.42 7.28 12.96 7.28 12.42C7.28 11.88 7.47 11.42 7.85 11.04C8.23 10.66 8.7 10.47 9.24 10.47C9.78 10.47 10.25 10.66 10.63 11.04C11.01 11.42 11.21 11.88 11.21 12.42C11.21 12.96 11.01 13.42 10.63 13.8C10.25 14.18 9.78 14.37 9.24 14.37Z",fill:"#000000","fill-opacity":"1.000000","fill-rule":"nonzero"}),m.jsx("path",{id:"path",d:"M17.74 14.37C17.2 14.37 16.74 14.18 16.35 13.8C15.97 13.42 15.78 12.96 15.78 12.42C15.78 11.88 15.97 11.42 16.35 11.04C16.74 10.66 17.2 10.47 17.74 10.47C18.28 10.47 18.75 10.66 19.13 11.04C19.52 11.42 19.71 11.88 19.71 12.42C19.7 12.96 19.51 13.42 19.13 13.8C18.75 14.18 18.28 14.37 17.74 14.37Z",fill:"#000000","fill-opacity":"1.000000","fill-rule":"nonzero"}),m.jsx("path",{id:"path",d:"M26.26 14.37C25.72 14.37 25.25 14.18 24.87 13.8C24.49 13.42 24.29 12.96 24.29 12.42C24.29 11.88 24.49 11.42 24.87 11.04C25.25 10.66 25.72 10.47 26.26 10.47C26.8 10.47 27.26 10.66 27.65 11.04C28.03 11.42 28.22 11.88 28.22 12.42C28.22 12.96 28.03 13.42 27.64 13.8C27.26 14.18 26.8 14.37 26.26 14.37Z",fill:"#000000","fill-opacity":"1.000000","fill-rule":"nonzero"}),m.jsx("path",{id:"path",d:"M34.78 14.37C34.23 14.37 33.77 14.18 33.39 13.8C33 13.42 32.81 12.96 32.81 12.42C32.81 11.88 33 11.42 33.39 11.04C33.77 10.66 34.23 10.47 34.78 10.47C35.32 10.47 35.78 10.66 36.16 11.04C36.55 11.42 36.74 11.88 36.74 12.42C36.74 12.96 36.55 13.42 36.16 13.8C35.78 14.18 35.32 14.37 34.78 14.37Z",fill:"#000000","fill-opacity":"1.000000","fill-rule":"nonzero"}),m.jsx("path",{id:"path",d:"M43.28 14.37C42.73 14.37 42.27 14.18 41.89 13.8C41.5 13.42 41.31 12.96 41.31 12.42C41.31 11.88 41.5 11.42 41.89 11.04C42.27 10.66 42.73 10.47 43.28 10.47C43.82 10.47 44.28 10.66 44.67 11.04C45.05 11.42 45.24 11.88 45.24 12.42C45.24 12.96 45.04 13.42 44.66 13.8C44.28 14.18 43.82 14.37 43.28 14.37Z",fill:"#000000","fill-opacity":"1.000000","fill-rule":"nonzero"}),m.jsx("path",{id:"path",d:"M51.79 14.37C51.25 14.37 50.79 14.18 50.4 13.8C50.02 13.42 49.83 12.96 49.83 12.42C49.83 11.88 50.02 11.42 50.4 11.04C50.79 10.66 51.25 10.47 51.79 10.47C52.34 10.47 52.8 10.66 53.18 11.04C53.57 11.42 53.76 11.88 53.76 12.42C53.75 12.96 53.56 13.42 53.18 13.8C52.8 14.18 52.33 14.37 51.79 14.37Z",fill:"#000000","fill-opacity":"1.000000","fill-rule":"nonzero"})]})]})}function GSt(t){return m.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[m.jsx("circle",{cx:"12",cy:"12",r:"10"}),m.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),m.jsx("path",{d:"M12 17h.01"})]})}function K9(t){return m.jsx("svg",{...t,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",children:m.jsx("path",{d:"M32 6C17.641 6 6 17.641 6 32c0 12.277 8.512 22.56 19.955 25.286-.592-.141-1.179-.299-1.755-.479V50.85c0 0-.975.325-2.275.325-3.637 0-5.148-3.245-5.525-4.875-.229-.993-.827-1.934-1.469-2.509-.767-.684-1.126-.686-1.131-.92-.01-.491.658-.471.975-.471 1.625 0 2.857 1.729 3.429 2.623 1.417 2.207 2.938 2.577 3.721 2.577.975 0 1.817-.146 2.397-.426.268-1.888 1.108-3.57 2.478-4.774-6.097-1.219-10.4-4.716-10.4-10.4 0-2.928 1.175-5.619 3.133-7.792C19.333 23.641 19 22.494 19 20.625c0-1.235.086-2.751.65-4.225 0 0 3.708.026 7.205 3.338C28.469 19.268 30.196 19 32 19s3.531.268 5.145.738c3.497-3.312 7.205-3.338 7.205-3.338.567 1.474.65 2.99.65 4.225 0 2.015-.268 3.19-.432 3.697C46.466 26.475 47.6 29.124 47.6 32c0 5.684-4.303 9.181-10.4 10.4 1.628 1.43 2.6 3.513 2.6 5.85v8.557c-.576.181-1.162.338-1.755.479C49.488 54.56 58 44.277 58 32 58 17.641 46.359 6 32 6zM33.813 57.93C33.214 57.972 32.61 58 32 58 32.61 58 33.213 57.971 33.813 57.93zM37.786 57.346c-1.164.265-2.357.451-3.575.554C35.429 57.797 36.622 57.61 37.786 57.346zM32 58c-.61 0-1.214-.028-1.813-.07C30.787 57.971 31.39 58 32 58zM29.788 57.9c-1.217-.103-2.411-.289-3.574-.554C27.378 57.61 28.571 57.797 29.788 57.9z"})})}function ZSt(t){return m.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:oe("animate-spin",t.className),children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}function un({children:t,dismissText:e="Close",headingTitle:n,headingIcon:r=null,footer:o=null,heroImageUrl:s,isDismissable:i=!1,isKeyboardDismissDisabled:a=!i,isLoading:l=!1,onDismiss:c,primaryButtonConfig:u,size:d="md",allowScroll:f=!1}){const p=P.useRef(null),h=v.useCallback(()=>{l||c()},[l,c]),{overlayProps:y,underlayProps:g}=k6({isOpen:!0,onClose:h,isDismissable:i,isKeyboardDismissDisabled:a},p),{modalProps:b}=tSt(),{dialogProps:w,titleProps:x}=RSt({role:"alertdialog"},p);return GEt(),m.jsx(eSt,{portalContainer:document.getElementById("dialog-container")||void 0,children:m.jsx("div",{className:"fixed flex justify-center z-modal backdrop-blur-sm items-start widescreen:items-center inset-0 transition-opacity",style:{backgroundColor:"rgba(0, 0, 0, 0.6)"},...g,children:m.jsx(Z$,{contain:!0,restoreFocus:!0,autoFocus:!0,children:m.jsxs("div",{className:oe("B-ui-components_dialog-content-container bg-colorNeutralBgLayerTop rounded-lg shadow-xl",d==="sm"&&"BU_small",d==="md"&&"BU_medium",d==="lg"&&"BU_large",d==="full"&&"w-full"),...y,...w,...b,ref:p,children:[s&&m.jsx("div",{className:"B-ui-components_dialog-hero",children:m.jsx("img",{src:s,alt:"hero"})}),m.jsx("div",{className:"B-ui-components_dialog-header-icon w-6 h-6",children:l?m.jsx("div",{role:"progressbar",className:"inline-block","aria-label":"Loading...",children:m.jsx(ZSt,{className:"w-6 h-6"})}):r}),m.jsx("h2",{className:"B-ui-components_dialog-heading text-xl font-semibold break-all",...x,children:n}),m.jsx("hr",{className:"B-ui-components_dialog-divider"}),m.jsx("div",{className:oe("B-ui-components_dialog-content",f&&"overflow-y-auto"),children:typeof t=="string"?m.jsx("p",{children:t}):t}),m.jsxs(y6,{justify:null,reverseRow:!0,className:"B-ui-components_dialog-button-group pt-12 smallscreen:pt-4 flex-row-reverse",children:[u&&m.jsx(qe,{tone:u.isDestructive?"critical":"neutral",isDisabled:l||u.disabled,ariaLabel:u.text,onPress:()=>{u.onPress()},text:u.text}),i&&m.jsx(qe,{tone:"secondary",ariaLabel:"dismiss",isDisabled:l,onPress:h,text:e,focus:{autoFocus:u==null?void 0:u.isDestructive}})]}),m.jsx("footer",{className:"B-ui-components_dialog-footer",children:o})]})})})})}function JSt(t={}){let{isReadOnly:e}=t,[n,r]=iu(t.isSelected,t.defaultSelected||!1,t.onChange);function o(i){e||r(i)}function s(){e||r(!n)}return{isSelected:n,setSelected:o,toggle:s}}class YSt{*[Symbol.iterator](){yield*this.iterable}get size(){return this.keyMap.size}getKeys(){return this.keyMap.keys()}getKeyBefore(e){let n=this.keyMap.get(e);return n?n.prevKey:null}getKeyAfter(e){let n=this.keyMap.get(e);return n?n.nextKey:null}getFirstKey(){return this.firstKey}getLastKey(){return this.lastKey}getItem(e){return this.keyMap.get(e)}at(e){const n=[...this.getKeys()];return this.getItem(n[e])}constructor(e,{expandedKeys:n}={}){this.keyMap=new Map,this.iterable=e,n=n||new Set;let r=i=>{if(this.keyMap.set(i.key,i),i.childNodes&&(i.type==="section"||n.has(i.key)))for(let a of i.childNodes)r(a)};for(let i of e)r(i);let o,s=0;for(let[i,a]of this.keyMap)o?(o.nextKey=i,a.prevKey=o.key):(this.firstKey=i,a.prevKey=void 0),a.type==="item"&&(a.index=s++),o=a,o.nextKey=void 0;this.lastKey=o==null?void 0:o.key}}function XSt(t){let[e,n]=iu(t.expandedKeys?new Set(t.expandedKeys):void 0,t.defaultExpandedKeys?new Set(t.defaultExpandedKeys):new Set,t.onExpandedChange),r=I9(t),o=v.useMemo(()=>t.disabledKeys?new Set(t.disabledKeys):new Set,[t.disabledKeys]),s=fL(t,v.useCallback(a=>new YSt(a,{expandedKeys:e}),[e]),null);return v.useEffect(()=>{r.focusedKey!=null&&!s.getItem(r.focusedKey)&&r.setFocusedKey(null)},[s,r.focusedKey]),{collection:s,expandedKeys:e,disabledKeys:o,toggleKey:a=>{n(QSt(e,a))},setExpandedKeys:n,selectionManager:new R9(s,r)}}function QSt(t,e){let n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n}const eCt=1500,iN=500;let zi={},tCt=0,Ru=!1,Lo=null,qi=null;function nCt(t={}){let{delay:e=eCt,closeDelay:n=iN}=t,{isOpen:r,open:o,close:s}=D9(t),i=v.useMemo(()=>`${++tCt}`,[]),a=v.useRef(),l=()=>{zi[i]=d},c=()=>{for(let p in zi)p!==i&&(zi[p](!0),delete zi[p])},u=()=>{clearTimeout(a.current),a.current=null,c(),l(),Ru=!0,o(),Lo&&(clearTimeout(Lo),Lo=null),qi&&(clearTimeout(qi),qi=null)},d=p=>{p||n<=0?(clearTimeout(a.current),a.current=null,s()):a.current||(a.current=setTimeout(()=>{a.current=null,s()},n)),Lo&&(clearTimeout(Lo),Lo=null),Ru&&(qi&&clearTimeout(qi),qi=setTimeout(()=>{delete zi[i],qi=null,Ru=!1},Math.max(iN,n)))},f=()=>{c(),l(),!r&&!Lo&&!Ru?Lo=setTimeout(()=>{Lo=null,Ru=!0,u()},e):r||u()};return v.useEffect(()=>()=>{clearTimeout(a.current),zi[i]&&delete zi[i]},[i]),{isOpen:r,open:p=>{!p&&e>0&&!a.current?f():u()},close:d}}var aN=function(e){return e.reduce(function(n,r){var o=r[0],s=r[1];return n[o]=s,n},{})},lN=typeof window!="undefined"&&window.document&&window.document.createElement?v.useLayoutEffect:v.useEffect;function cN(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function uN(t){return[An,kr,xr,Nn].some(function(e){return t[e]>=0})}function rCt(t){var e=t.state,n=t.name,r=e.rects.reference,o=e.rects.popper,s=e.modifiersData.preventOverflow,i=Cf(e,{elementContext:"reference"}),a=Cf(e,{altBoundary:!0}),l=cN(i,r),c=cN(a,o,s),u=uN(l),d=uN(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}const oCt={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:rCt};var sCt=[p7,P$,h7,m7,u7,c7,d7,i7,oCt],iCt=f7({defaultModifiers:sCt}),aCt=typeof Element!="undefined",lCt=typeof Map=="function",cCt=typeof Set=="function",uCt=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Hh(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,r,o;if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!Hh(t[r],e[r]))return!1;return!0}var s;if(lCt&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(s=t.entries();!(r=s.next()).done;)if(!e.has(r.value[0]))return!1;for(s=t.entries();!(r=s.next()).done;)if(!Hh(r.value[1],e.get(r.value[0])))return!1;return!0}if(cCt&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(s=t.entries();!(r=s.next()).done;)if(!e.has(r.value[0]))return!1;return!0}if(uCt&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(t[r]!==e[r])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof e.valueOf=="function")return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof e.toString=="function")return t.toString()===e.toString();if(o=Object.keys(t),n=o.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,o[r]))return!1;if(aCt&&t instanceof Element)return!1;for(r=n;r--!==0;)if(!((o[r]==="_owner"||o[r]==="__v"||o[r]==="__o")&&t.$$typeof)&&!Hh(t[o[r]],e[o[r]]))return!1;return!0}return t!==t&&e!==e}var dCt=function(e,n){try{return Hh(e,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}};const fCt=fs(dCt);var pCt=[],hCt=function(e,n,r){r===void 0&&(r={});var o=v.useRef(null),s={onFirstUpdate:r.onFirstUpdate,placement:r.placement||"bottom",strategy:r.strategy||"absolute",modifiers:r.modifiers||pCt},i=v.useState({styles:{popper:{position:s.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),a=i[0],l=i[1],c=v.useMemo(function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(p){var h=p.state,y=Object.keys(h.elements);ik.flushSync(function(){l({styles:aN(y.map(function(g){return[g,h.styles[g]||{}]})),attributes:aN(y.map(function(g){return[g,h.attributes[g]]}))})})},requires:["computeStyles"]}},[]),u=v.useMemo(function(){var f={onFirstUpdate:s.onFirstUpdate,placement:s.placement,strategy:s.strategy,modifiers:[].concat(s.modifiers,[c,{name:"applyStyles",enabled:!1}])};return fCt(o.current,f)?o.current||f:(o.current=f,f)},[s.onFirstUpdate,s.placement,s.strategy,s.modifiers,c]),d=v.useRef();return lN(function(){d.current&&d.current.setOptions(u)},[u]),lN(function(){if(!(e==null||n==null)){var f=r.createPopper||iCt,p=f(e,n,u);return d.current=p,function(){p.destroy(),d.current=null}}},[e,n,r.createPopper]),{state:d.current?d.current.state:null,styles:a.styles,attributes:a.attributes,update:d.current?d.current.update:null,forceUpdate:d.current?d.current.forceUpdate:null}};function G9({isActive:t=!1,delay:e=0,placement:n="bottom",xOffset:r=0,yOffset:o=0,isDisabled:s,immediateClose:i=!0}){var S,_,C;const[a,l]=v.useState(null),[c,u]=v.useState(null),d=nCt({delay:e,isDisabled:s}),f=v.useMemo(()=>({placement:n,modifiers:[{name:"offset",options:{offset:[o,r]}}]}),[n,r,o]),{styles:p,attributes:h,...y}=hCt(a,c,f),g=v.useCallback(()=>{if(i){d.close(!0);return}d.close(e===0)},[d,e,i]),b=v.useCallback(()=>{d.open(e===0)},[d,e]);v.useEffect(()=>{t?b():t||g()},[t,b,g]);const w=(C=(_=(S=y==null?void 0:y.state)==null?void 0:S.modifiersData)==null?void 0:_.hide)==null?void 0:C.isReferenceHidden;v.useEffect(()=>{w&&g()},[g,w]);const x={style:p.popper,attributes:h.popper},k={style:p.arrow,attributes:h.arrow};return{isTooltipVisible:d.isOpen,arrowProps:k,tooltipProps:x,setTooltipElement:u,setTriggerElement:l,tooltipElement:c,triggerElement:a,...y}}function mCt({buttonProps:t,children:e,disabledKeys:n,isDisabled:r=!1,isTouch:o=lp,menuProps:s={},onAction:i,onSelectedChange:a}){var $,T,A,N,q,O,E,D;const l=v.useRef(null),c=JSt({onChange:a}),{buttonProps:u,isPressed:d}=xEt({"aria-label":t.ariaLabel,isDisabled:r,autoFocus:t.autoFocus},c,l),{hoverProps:f,isHovered:p}=lu({isDisabled:r}),{isFocusVisible:h,focusProps:y}=xy({autoFocus:t.autoFocus}),g=nt(u,f,y),{isTooltipVisible:b,tooltipProps:w,setTooltipElement:x,setTriggerElement:k,triggerElement:S}=G9({isActive:c.isSelected,placement:($=s.placement)!=null?$:"bottom",xOffset:(T=s.xOffset)!=null?T:5,yOffset:(A=s.yOffset)!=null?A:5});v.useEffect(()=>{l.current=S},[S]);const _=v.useCallback(()=>{c.setSelected(!1)},[c]);v.useEffect(()=>{r&&c.isSelected&&c.setSelected(!1)},[r,c]);const C=g6({elementProps:g,leftIcon:t.leftIcon,rightIcon:t.rightIcon,text:t.text,styleProps:{animateOnPress:(N=t.animateOnPress)!=null?N:!0,className:t.className,isDisabled:r,isFocusVisible:h,isHovered:p,isPressed:d,isTouch:o,size:(q=t.size)!=null?q:"md",tone:(O=t.tone)!=null?O:Ue.NEUTRAL,style:t.style,variant:(E=t.variant)!=null?E:Gs.SOLID,onHoverStyle:t.onHoverStyle,onPressStyle:t.onPressStyle}});return m.jsxs(m.Fragment,{children:[m.jsx("button",{ref:k,...C}),e&&b&&Co.createPortal(m.jsx("div",{ref:x,style:w.style,...w.attributes,children:m.jsx(Z$,{autoFocus:!0,children:m.jsx(gCt,{ariaLabel:(D=s.ariaLabel)!=null?D:"Dropdown Menu",onAction:i,onClose:_,disabledKeys:n,className:s.className,style:s.style,children:e})})}),document.getElementById("tooltip-container"))]})}function gCt({ariaLabel:t,onAction:e,children:n,onClose:r,className:o,style:s,disabledKeys:i}){CM(()=>({Escape:()=>(r(),!0)}),[r]);let a=XSt({children:n,selectionMode:"none",disabledKeys:i}),l=P.useRef(null);TM(l,v.useCallback(()=>{r()},[r]),v.useCallback(()=>{},[]));let{menuProps:c}=wSt({"aria-label":t},a,l);return m.jsx("ul",{...c,ref:l,className:oe("flex flex-col min-w-72 z-dropdown shadow-md  bg-colorBgLayerFloat border-neutral p-1 py-2 rounded",o),style:s,children:[...a.collection].map(u=>m.jsx(yCt,{section:u,state:a,onAction:e,onClose:r},u.key))})}function yCt({section:t,state:e,onAction:n,onClose:r}){let{itemProps:o,headingProps:s,groupProps:i}=kSt({heading:t.rendered,"aria-label":t["aria-label"]}),{separatorProps:a}=j9({elementType:"li"});return m.jsxs(m.Fragment,{children:[t.key!==e.collection.getFirstKey()&&m.jsx("li",{...a,className:"mx-1 my-2 border-t-1 border-colorNeutralBorder"}),m.jsxs("li",{...o,children:[t.rendered&&m.jsx("span",{...s,className:"font-bold",children:t.rendered}),m.jsx("ul",{...i,className:"p-0 list-outside",children:[...t.childNodes].map(l=>m.jsx(bCt,{item:l,state:e,onAction:n,onClose:r},l.key))})]})]})}function bCt({item:t,state:e,onAction:n,onClose:r}){let o=P.useRef(null),s=e.disabledKeys.has(t.key),{menuItemProps:i}=xSt({key:t.key,isDisabled:s,onAction:n,onClose:r,"aria-label":t["aria-label"]},e,o),[a,l]=P.useState(!1),{focusProps:c}=K$({onFocusChange:l});return m.jsx("li",{...nt(i,c),ref:o,className:oe("outline-none cursor-pointer text-sm rounded-md px-2 py-1",a&&"bg-colorNeutralSolidFaint"),children:m.jsx("span",{className:"inline-flex justify-between w-full",children:t.rendered})})}function Z9({dataTestId:t,title:e,content:n}){return m.jsxs("div",{className:"m-3 p-4 rounded bg-colorCriticalSolidFaint","data-testid":t,children:[m.jsx("div",{className:"font-semibold text-lg text-left",children:e}),m.jsx("div",{className:"text-left font-light mt-2",children:n})]})}let vCt=class extends P.Component{constructor(){super(...arguments);M(this,"state",{hasError:!1,error:void 0})}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error(n)}render(){var n,r,o;return this.state.hasError?m.jsx("div",{style:{},className:"w-full p-4 ",children:m.jsxs("div",{className:"w-full p-4 rounded-md B-ui-components_bangle-error-boundary",children:[m.jsx("div",{className:"w-full text-5xl text-center",children:""}),m.jsx("h1",{className:"w-full my-4 text-center",children:"-   "}),m.jsxs("div",{className:"w-full text-sm text-center",children:["      "," ",m.jsx("a",{target:"_blank",rel:"noreferrer",className:"font-extrabold underline",href:"https://flent.ru/contacts/",children:"Flent"}),m.jsxs("div",{className:"w-full text-sm italic text-center",children:["Error:"," ",((n=this.state.error)==null?void 0:n.displayMessage)||((r=this.state.error)==null?void 0:r.message)||((o=this.state.error)==null?void 0:o.name)]})]})]})}):this.props.children}};function Np({text:t,href:e}){let n=v.useRef(null),{buttonProps:r}=ky({elementType:"a"},n);return m.jsx(Tp,{focusRingClass:"ring-promote",children:m.jsx("a",{...r,ref:n,target:"_blank",href:e,className:"underline outline-none rounded-sm",rel:"noreferrer noopener",style:{color:I.misc.linkText},children:t})})}const wCt=16,xCt=16;function Oc({dataId:t,title:e,isActive:n,onClick:r,rightIcon:o=null,rightHoverIcon:s=null,leftNode:i=null,basePadding:a=xCt,depth:l=1,description:c="",className:u="",scrollIntoViewIfNeeded:d=!0,style:f={},disabled:p,allowHover:h=!lp}){const y=v.useRef(null),[g,b]=v.useState(!1);v.useEffect(()=>{d&&n&&y.current&&j1(y.current,!1)},[d,n]);const w=v.useCallback(()=>{h&&b(!0)},[h]),x=v.useCallback(()=>{h&&b(!1)},[h]);return m.jsx(m.Fragment,{children:m.jsxs("div",{"data-id":t,onClick:r,onMouseEnter:w,onMouseLeave:x,ref:y,className:oe("flex flex-row items-center B-ui-components_inline-palette-row",p?"cursor-not-allowed":"cursor-pointer",u,n&&"BU_active",h&&"BU_hover-allowed",p&&"BU_disabled"),style:{paddingLeft:l*a,paddingRight:wCt,...f},children:[i,m.jsxs("span",{className:"flex flex-col",children:[m.jsx("span",{className:oe("text-base font-bold truncate select-none",p&&"text-colorNeutralTextSubdued"),children:e}),m.jsx("span",{className:oe("text-sm font-normal select-none",p&&"text-colorNeutralTextSubdued"),children:c})]}),m.jsx("span",{className:" flex flex-1"}),o,g?s:null]})})}const J9=P.forwardRef(({style:t,showClear:e=!1,onClear:n,className:r="",value:o,label:s,onFocus:i,onKeyDown:a,onChange:l,placeholder:c,autoCapitalize:u,spellCheck:d,autoCorrect:f},p)=>{var y,g;let h=0;return o?h=o.length:p&&typeof p!="function"&&((y=p.current)!=null&&y.value)&&(h=(g=p.current)==null?void 0:g.value.length),m.jsxs("div",{className:"B-ui-components_input-container",children:[m.jsx(Tp,{focusClass:"B-ui-components_misc-input-ring",children:m.jsx("input",{onKeyDown:a,"aria-label":s,type:"text",onChange:l,ref:p,className:oe("outline-offset-1 text-field-neutral border-1 border-colorNeutralTextFieldBorder rounded px-2 py-1",r),style:t,value:o,placeholder:c,onFocus:i,autoCapitalize:u?"on":"off",autoCorrect:f?"on":"off",spellCheck:d})}),m.jsx("div",{style:{position:"relative",display:"flex"},children:e&&h>0&&m.jsx("button",{className:"B-ui-components_input-clear","aria-label":"Clear search",onMouseDown:n})})]})});function Y9(t,e){const[n,r]=v.useState(0),o=v.useMemo(()=>["Escape","Enter","ArrowDown","ArrowUp"],[]),s=v.useCallback(()=>{r(0)},[]),i=v.useCallback(c=>{c.preventDefault(),c.stopPropagation();const u=c.type;switch(u){case"keydown":case"click":break;default:throw new Error("Unknown select source "+u)}const d=c.currentTarget.getAttribute("data-id");e(d?()=>d:f=>{var p;return(p=f[rE(n,f.length)])==null?void 0:p.uid},{source:u,metaKey:!!c.metaKey,shiftKey:!!c.shiftKey})},[e,n]),a=v.useCallback(c=>{switch(c.key){case"ArrowUp":{r(u=>u-1);break}case"ArrowDown":{r(u=>u+1);break}case"Enter":{i(c);break}case"Escape":{t();break}default:throw new Error("Unknown key "+c.key)}},[t,i]);return{inputProps:v.useMemo(()=>({onSpecialKey:a,specialKeys:o}),[a,o]),counter:n,onSelect:i,resetCounter:s,updateCounter:r}}function rE(t,e){const n=t%e;return n<0?n+e:n}function X9({paletteType:t,onClickOutside:e,onClickInside:n,children:r,widescreen:o,className:s=""}){const i=v.useRef(null);return TM(i,e,n),m.jsx("div",{"data-palette-type":t,ref:i,className:"B-ui-components_universal-palette-container z-popup "+oe(o&&" BU_widescreen",s),children:r})}function Hr({children:t,className:e=""}){return m.jsx("div",{className:oe("flex flex-row justify-center my-1 space",e),children:t})}function Le({children:t,className:e=""}){return m.jsx("span",{className:oe("text-xs ml-2 mr-2 font-light",e),children:t})}const Q9=P.forwardRef(({className:t,onInputValueChange:e,inputValue:n,specialKeys:r,onSpecialKey:o,placeholder:s,leftNode:i,selectOnMount:a=!1},l)=>{v.useEffect(()=>{var f;(f=l.current)==null||f.focus()},[l]);const c=v.useCallback(f=>{var p;a&&((p=f.target)==null||p.select())},[a]),u=v.useCallback(f=>{r.includes(f.key)&&(f.preventDefault(),o(f))},[r,o]),d=v.useCallback(f=>{e(f.target.value)},[e]);return m.jsxs("div",{className:oe("B-ui-components_universal-palette-input-wrapper",t),style:{display:"flex"},children:[i&&null,m.jsx(J9,{ref:l,onKeyDown:u,placeholder:s,onFocus:c,autoCapitalize:!1,spellCheck:!1,autoCorrect:!1,label:"Palette Input",className:"B-ui-components_universal-palette-input w-full mx-4 my-4",value:n,onChange:d})]})});function Va({item:t,onClick:e,isActive:n,className:r="",scrollIntoViewIfNeeded:o=!0,allowHover:s=!lp,style:i}){const a=v.useRef(null);v.useEffect(()=>{o&&n&&a.current&&j1(a.current,!1)},[o,n]);const l=m.jsxs("span",{children:[m.jsx("span",{className:"text-base font-normal",children:t.title}),t.extraInfo&&m.jsx("span",{className:"B-ui-components_extra-info text-base font-light",children:t.extraInfo})]});return m.jsxs("div",{"data-id":t.uid,ref:a,onClick:e,className:oe("B-ui-components_universal-palette-item",r,n&&"BU_active",t.isDisabled&&"BU_disabled",t.showDividerAbove&&"BU_divider",s&&"BU_allow-hover"),style:{cursor:"pointer",display:"flex",justifyContent:"space-between",userSelect:"none",...i},children:[m.jsxs("div",{className:"flex flex-row",children:[m.jsx("div",{className:"B-ui-components_left-node",children:t.leftNode}),t.description?m.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[l,m.jsx("span",{className:"B-ui-components_description text-sm",children:t.description})]}):l]}),m.jsxs("div",{className:"flex flex-row",children:[m.jsx("span",{className:"B-ui-components_right-node",children:t.rightNode}),m.jsx("span",{className:"B-ui-components_right-hover-node",children:t.rightHoverNode})]})]})}function du({children:t}){return m.jsx("div",{className:"",style:{overflowY:"scroll"},children:t})}function e8({placeholder:t,initialValue:e="",onDismiss:n,onExecute:r,updateError:o,error:s,children:i,selectOnMount:a,widescreen:l,className:c=""}){const u=Zc(),[d,f]=v.useState(!1),[p,h]=v.useState(e),y=v.useRef(null),g=v.useMemo(()=>[{uid:"input-confirm",title:"",isDisabled:!!(d||s)},{uid:"input-cancel",title:"",isDisabled:!!d}].filter(Boolean),[s,d]),b=s&&{uid:"error",title:"",description:s.message};v.useEffect(()=>{o(void 0),f(!1)},[p,o]),v.useEffect(()=>{f(!1)},[s]),v.useEffect(()=>{var T;s&&((T=y.current)==null||T.focus())},[s]);const w=v.useCallback(async T=>{const A=T(g);let N=!1;if(A==="input-confirm"&&!s){ap(250).then(()=>{N||u.current||f(!0)});try{await r(p)}finally{N=!0}}else A==="input-cancel"&&n();N=!0},[p,n,g,s,r,u]),{inputProps:x,resetCounter:k,onSelect:S,counter:_}=Y9(n,w),C=T=>{h(T),k()},$=g[rE(_,g.length)];return m.jsxs(X9,{paletteType:"input-palette",onClickOutside:()=>{n()},onClickInside:()=>{var T;(T=y.current)==null||T.focus()},className:"input-palette "+c,children:[m.jsx(Q9,{leftNode:d?m.jsx(z9,{}):m.jsx(tE,{}),placeholder:t,inputValue:p,onInputValueChange:C,ref:y,selectOnMount:a,...x}),m.jsxs(du,{className:"px-5 py-5 mx-5 my-5",children:[g.map((T,A)=>m.jsx(Va,{item:T,onClick:S,isActive:T===$},T.uid)),b&&m.jsx(Va,{item:b,isActive:!1,onClick:()=>{},className:"bg-colorCriticalSolidFaint"})]}),i]})}function wh({rawKey:t}){let e=Jc(t).split("-");return m.jsx("span",{className:"inline B-ui-components_pretty-keybinding text-colorNeutralTextSubdued",children:e.map((n,r)=>m.jsx("kbd",{className:"px-1 font-sans capitalize rounded-sm B-ui-components_pretty-keybinding-kbd",children:n},r))})}function kCt({label:t,labelProps:e}){return m.jsx("label",{...e,className:oe("text-sm text-colorNeutralTextSubdued",e.className),children:t})}function Ic({item:t,className:e="",titleClassName:n="text-base font-normal",extraInfoClassName:r="text-base font-light",descriptionClassName:o="text-sm",onClick:s,isActive:i,style:a,allowHover:l=!lp,extraInfoOnNewLine:c=!1}){if(typeof t.title=="string"){t.title=function(f){f=String(f);const p=f.split(" ");return p.length>1&&p[p.length-1].length>=30&&p.pop(),p.join(" ")}(t.title);const d=24;t.title=t.title.length>d?t.title.slice(0,d)+"...":t.title}const u=m.jsxs("span",{className:oe(c&&"flex flex-col"),children:[m.jsx("span",{className:n,children:t.title}),t.extraInfo&&m.jsx("span",{className:oe("B-ui-components_extra-info "+r,c&&"B-ui-components_extra-info-on-new-line"),children:t.extraInfo})]});return m.jsxs("div",{role:"button","data-id":t.uid,onClick:s,className:oe("B-ui-components_sidebar-row2 rounded-md",l&&"BU_hover",i&&"BU_active",t.isDisabled&&"BU_disabled",t.showDividerAbove&&"BU_divider",e),style:{cursor:"pointer",display:"flex",justifyContent:"space-between",userSelect:"none",paddingTop:"4px",paddingBottom:"5px",marginBottom:"2px",marginTop:"2px",...a},children:[m.jsxs("div",{className:"flex flex-row",children:[m.jsx("span",{children:t.leftNode}),t.description?m.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:["d",u,m.jsx("span",{className:"B-ui-components_description "+o,children:t.description})]}):u]}),m.jsxs("div",{className:"flex flex-row",children:[m.jsx("span",{className:"B-ui-components_right-node",children:t.rightNode}),m.jsx("span",{className:"B-ui-components_right-hover-node",children:t.rightHoverNode})]})]})}function dN({hoverBgColorChange:t=!1,className:e="",children:n,...r}){return m.jsx("div",{className:oe(t&&"BU_hover",e),...r,children:n})}function t8({className:t="",children:e}){return m.jsx("div",{className:"flex flex-col h-full "+t,style:{overflowY:"auto"},children:e})}function _Ct({children:t}){return m.jsx("div",{className:"flex-grow",style:{overflowY:"auto"},children:t})}function $Ct(t){let{label:e}=t,n=P.useRef(null),{labelProps:r,inputProps:o,descriptionProps:s,errorMessageProps:i}=YL(t,n);return m.jsxs("div",{className:t.className,style:{display:"flex",flexDirection:"column"},children:[m.jsx(kCt,{label:e,labelProps:r}),m.jsx(Tp,{focusClass:"B-ui-components_misc-input-ring",children:m.jsx("input",{...o,ref:n,spellCheck:t.spellCheck===void 0?!0:t.spellCheck,className:"outline-none text-field-neutral border-1 border-colorNeutralTextFieldBorder rounded px-2 py-2",style:{}})}),t.description&&m.jsx("div",{...s,className:"text-sm text-colorNeutralTextSubdued",children:t.description}),t.errorMessage&&m.jsx("div",{...i,className:"text-sm",style:{color:I.color.critical.solidStrong},children:t.errorMessage})]})}const oE=new ep([_1.spec(),$1.spec(),Kc.spec(),S1.spec(),c_.spec(),Y3.spec(),u_.spec(),nr.spec(),h_.spec(),yw.spec(),T1.spec(),$o.spec(),rp.spec(),Gc.spec(),Qf.spec(),k_.spec(),c4.spec(),__.spec()]);function ECt(){TCt(!0);const t=v.useCallback(()=>{wr(af)},[]);return m.jsx(un,{heroImageUrl:"https://flent.ru/assets/forapp/whatsnew_cover2.png",isDismissable:!0,headingTitle:" ?",dismissText:"",onDismiss:t,size:"lg",children:m.jsx("div",{className:"overflow-y-scroll",style:{maxHeight:"min(50vh, 500px)",minHeight:"min(50vh, 500px)"},children:m.jsx(CCt,{})})})}const SCt=vD(oE);wD(oE);function n8(){return JY||"Error loading changelog"}function CCt(){const t=O7({specRegistry:oE,plugins:()=>[new xe({props:{editable:()=>!1}})],initialValue:SCt.parse(n8())||""});return m.jsx(L$,{state:t,focusOnInit:!1,className:"px-5 B-core-extension_changelog-dialog-container text-sm",renderNodeViews:()=>null,children:null})}function fN(){return n8().split(`
`).find(n=>n.startsWith("#"))}function TCt(t){const[e,n]=La("app/changelog-last-seen1",""),{changelogHasUpdates:r}=el();v.useEffect(()=>{const o=fN();t&&o&&e!==o&&n(o)},[t,n,e]),v.useEffect(()=>{e!==fN()!==r&&g5(!0)},[r,e])}function ACt(){const{dialogMetadata:t}=el(),e=NCt(t),n=v.useCallback(()=>{wr(a1)},[]);return m.jsx(un,{onDismiss:n,primaryButtonConfig:{text:"Reload",onPress:()=>{window.location.reload()}},size:"md",isDismissable:!0,headingTitle:e.title,footer:m.jsx(Np,{text:"Report an issue",href:"https://github.com/bangle-io/bangle-io/issues/new"}),children:e.description})}function NCt(t){if(t&&typeof t.title=="string"&&typeof t.description=="string"){const{title:e,description:n}=t;return{title:e,description:n}}return console.warn("Unable to parse dialog metadata",t),{title:"Error",description:"Something went wrong"}}let r8=LY();const pN=[!r8&&Je.NativeFS].filter(t=>!!t),PCt=r8?Je.NativeFS:Je.Browser,o8="ERROR_PICKING_DIRECTORY",s8="UNKNOWN_ERROR",OCt="INVALID_WORKSPACE_NAME",i8="WORKSPACE_AUTH_REJECTED",a8="CLICKED_TOO_SOON_ERROR",ICt="WORKSPACE_NAME_ALREADY_EXISTS",RCt="new-workspace-modal_browse-button";function sE({errorType:t,closeModal:e}){if(!t)return null;let n,r;switch(t){case ICt:{r="A workspace with the same name already exists.",n=m.jsxs("div",{children:[m.jsx("button",{className:"underline",onClick:()=>{e(),Yc(()=>{cy(Lt.Workspace)})},children:"Click here"})," ","to open it"]});break}case o8:{r="      .",n=m.jsx("div",{children:",        , ,    ."});break}case a8:{r="That didnt work",n=m.jsx("div",{children:"Please try clicking the Browse button again."});break}case OCt:{r="Invalid workspace name",n=m.jsxs("div",{children:["Workspace cannot have ",m.jsx("code",{children:":"})," in its name."]});break}case i8:{r="Flent      .",n=m.jsxs("div",{children:[",      ",m.jsx("i",{children:""}),",   Flent      ."]});break}case s8:{r="An unknown error occurred.",n=m.jsxs("div",{children:["Please reload window and try again. If the problem still persists open an issue at"," ",m.jsx("a",{href:"https://github.com/bangle-io/bangle-io/issues",className:"underline",children:"Github"})," "]});break}default:{let o=t;throw new Error("Unknown error type "+o)}}return m.jsxs("div",{className:"w-full m-1 px-5 py-3 text-center rounded","data-testid":t,style:{backgroundColor:I.color.critical.solidFaint,color:I.color.critical.solidText},children:[m.jsx("div",{className:"font-semibold text-left",children:r}),m.jsx("div",{className:"text-left",children:n})]})}const MCt=(t,e)=>{switch(e.type){case"update_workspace":return{...t,workspace:e.workspace,error:void 0};case"update_error":return{...t,error:e.error};case"reset":return{error:void 0,workspace:void 0}}},DCt=({onDismiss:t,dialogName:e})=>{var c;const[n,r]=v.useReducer(MCt,{error:void 0,workspace:{name:OM()}}),o=v.useCallback(()=>{t(e)},[t,e]),s=n.error,{dispatchSerialOperation:i}=zt(),a=v.useCallback(()=>{n.workspace&&(i({name:cf,value:{wsName:n.workspace.name}}),o())},[i,n,o]),l=v.useCallback(u=>{r({type:"update_workspace",workspace:{name:u}})},[]);return m.jsxs(un,{isDismissable:!0,headingTitle:"  ",onDismiss:o,dismissText:"",size:"md",primaryButtonConfig:{disabled:!n.workspace,onPress:a,text:""},footer:m.jsx(Np,{text:"",href:"https://flent.ru/privacy"}),children:[s&&m.jsx("div",{className:"mb-5",children:m.jsx(sE,{errorType:s,closeModal:o})}),m.jsxs("div",{className:"flex flex-col mb-5",children:[m.jsx("div",{className:"mb-2",children:m.jsx("h2",{className:"text-lg font-medium",children:"     "})}),m.jsx(LCt,{isDisabled:!1,value:(c=n.workspace)==null?void 0:c.name,updateValue:l,onPressEnter:s?void 0:a})]})]})};function LCt({value:t="",updateValue:e,isDisabled:n,onPressEnter:r}){return m.jsx(m.Fragment,{children:m.jsx("div",{className:"mb-2",children:m.jsx("div",{className:"mt-2 text-lg text-colorNeutralTextSubdued",children:m.jsx(Tp,{focusClass:"B-ui-components_misc-input-ring",children:m.jsx("input",{"aria-label":"workspace name input",className:"p-1 pl-2 w-full rounded border-neutral text-field-neutral",disabled:n,value:t,onChange:o=>{e==null||e(o.target.value)},onKeyDown:o=>{o.key==="Enter"&&(r==null||r())},style:{}})})})})})}const jCt=(t,e)=>{switch(e.type){case"update_workspace":return{...t,workspace:e.workspace,error:void 0};case"update_error":return{...t,error:e.error};case"reset":return{error:void 0,workspace:void 0}}},FCt=({onDismiss:t,dialogName:e})=>{var u,d;const[n,r]=v.useReducer(jCt,{error:void 0,workspace:void 0}),o=v.useCallback(()=>{t(e)},[t,e]),s=v.useCallback(f=>{r(f?{type:"update_workspace",workspace:{name:f.name,rootDir:f}}:{type:"reset"})},[]),i=n.error,a=v.useCallback(f=>{r({type:"update_error",error:f})},[]),{dispatchSerialOperation:l}=zt(),c=v.useCallback(()=>{n.workspace&&(l({name:lf,value:{rootDirHandle:n.workspace.rootDir}}),o())},[l,n,o]);return m.jsxs(un,{isDismissable:!0,headingTitle:" ",dismissText:"",size:"md",primaryButtonConfig:{disabled:!n.workspace,onPress:c,text:" "},children:[i&&m.jsx("div",{className:"mb-5",children:m.jsx(sE,{errorType:i,closeModal:o})}),m.jsxs("div",{className:"flex flex-col mb-5",children:[m.jsxs("div",{className:"mb-2",children:[m.jsx("h2",{className:"text-lg font-medium",children:""}),m.jsx("span",{className:"text-sm text-colorNeutralTextSubdued",children:" ,   Flent    .        .    , ,      .md (,  Notion)."})]}),m.jsx(BCt,{setError:a,dirName:(d=(u=n.workspace)==null?void 0:u.rootDir)==null?void 0:d.name,updateRootDirHandle:s})]})]})};function BCt({setError:t,updateRootDirHandle:e,dirName:n}){const r=cEt(),o=v.useCallback(async s=>{try{const i=await DY();e(i),s.pointerType==="keyboard"&&requestAnimationFrame(()=>{r.focusNext({wrap:!0})})}catch(i){if(i instanceof Error&&i.message.toLocaleLowerCase().includes("user activation is required")){t(a8);return}if(i instanceof qr&&(i.code===sp||i.code===N1)){t(i8);return}if(i instanceof qr){t(o8);return}throw t(s8),i}},[e,r,t]);return m.jsx(m.Fragment,{children:m.jsx("div",{className:"",children:n?m.jsxs(m.Fragment,{children:[m.jsxs("span",{children:[" : ",m.jsx("span",{className:"font-bold",children:n})]}),m.jsx(qe,{tone:"secondary",variant:"soft",text:"",className:"ml-2",size:"xs",onPress:()=>{e(void 0)}})]}):m.jsx(qe,{id:RCt,ariaLabel:"pick directory",onPress:o,text:""})})})}const zCt=(t,e)=>{switch(e.type){case"update_workspace":return{...t,workspace:e.workspace,error:void 0};case"update_error":return{...t,error:e.error};case"reset":return{error:void 0,workspace:void 0}}},qCt=OM(),WCt=({onDismiss:t,dialogName:e})=>{var c;const[n,r]=v.useReducer(zCt,{error:void 0,workspace:{name:qCt}}),o=v.useCallback(()=>{t(e)},[t,e]),s=n.error,{dispatchSerialOperation:i}=zt(),a=v.useCallback(()=>{n.workspace&&(i({name:uf,value:{wsName:n.workspace.name}}),o())},[i,n,o]),l=v.useCallback(u=>{r({type:"update_workspace",workspace:{name:u}})},[]);return m.jsxs(un,{isDismissable:!0,headingTitle:"New Browser Workspace",onDismiss:o,size:"md",primaryButtonConfig:{disabled:!n.workspace,onPress:a,text:"Create workspace"},footer:m.jsx(Np,{text:"Privacy Policy",href:"https://bangle.io/privacy"}),children:[s&&m.jsx("div",{className:"mb-5",children:m.jsx(sE,{errorType:s,closeModal:o})}),m.jsxs("div",{className:"flex flex-col mb-5",children:[m.jsx("div",{className:"mb-2",children:m.jsx("h2",{className:"text-lg font-medium",children:"Give your workspace a fancy name "})}),m.jsx(VCt,{isDisabled:!1,value:(c=n.workspace)==null?void 0:c.name,updateValue:l,onPressEnter:s?void 0:a})]})]})};function VCt({value:t="",updateValue:e,isDisabled:n,onPressEnter:r}){return m.jsx(m.Fragment,{children:m.jsx("div",{className:"mb-2",children:m.jsx("div",{className:"mt-2 text-lg text-colorNeutralTextSubdued",children:m.jsx(Tp,{focusClass:"ring-promote",children:m.jsx("input",{"aria-label":"workspace name input",className:"p-1 pl-2 w-full rounded border-neutral text-field-neutral",disabled:n,value:t,onChange:o=>{e==null||e(o.target.value)},onKeyDown:o=>{o.key==="Enter"&&(r==null||r())}})})})})})}var Mr=(t=>(t.Yes="Yes",t.No="No",t.Unknown="Unknown",t))(Mr||{});function l8(t,e){switch(t){case"Yes":return e.onYes();case"No":return e.onNo();case"Unknown":return e.onUnknown();default:throw new Error("Invalid TriState")}}function UCt({onDismiss:t,onSelect:e,hasGithub:n,hasPrivateFs:r}){const[o,s]=P.useState(PCt),i=M9({children:[m.jsx(Nt,{"aria-label":"local file storage",textValue:"local file storage",children:m.jsxs("div",{children:[m.jsxs("div",{children:[m.jsx("span",{className:"font-bold",children:"   "}),pN.includes(Je.NativeFS)?m.jsx("span",{children:" ()"}):m.jsx("span",{children:" ()"})]}),m.jsx("div",{children:m.jsx("span",{className:"text-sm text-justify",children:"           .   ,        ."})})]})},Je.NativeFS),m.jsx(Nt,{textValue:"browser storage",children:m.jsxs("div",{children:[m.jsx("div",{children:m.jsx("span",{className:"font-bold",children:""})}),m.jsx("div",{children:m.jsx("span",{className:"text-sm text-justify",children:"    .  ,     Flent.      ,    ."})})]})},r?Je.PrivateFS:Je.Browser),n?m.jsx(Nt,{textValue:"github storage",children:m.jsxs("div",{children:[m.jsxs("div",{children:[m.jsx("span",{className:"font-bold",children:""}),m.jsx("span",{children:" (-)"})]}),m.jsx("div",{children:m.jsx("span",{className:"text-sm text-justify",children:"  ,  ,         ."})})]})},Je.Github):null].filter(a=>!!a),selectionMode:"single",disabledKeys:pN,selectedKeys:[o],onSelectionChange(a){if(typeof a!="string"){const l=[...a][0];l&&s(l)}}});return m.jsx(un,{footer:m.jsx(Np,{text:"    ",href:"https://flent.ru/privacy"}),dismissText:"",isDismissable:!0,headingTitle:"  ",onDismiss:t,size:"md",primaryButtonConfig:{text:"",onPress:()=>{e(o)}},children:m.jsx(F9,{label:"  ",state:i,optionComponent:HCt,className:"B-core-extension_pick-workspace-storage"})})}const HCt=({item:t,state:e})=>{let n=P.useRef(null),{optionProps:r,isSelected:o,isDisabled:s,isFocused:i}=hL({key:t.key},e,n),{isFocusVisible:a,focusProps:l}=xy();return m.jsxs("li",{...nt(r,l),ref:n,className:oe("flex flex-row items-center rounded",a&&"ring-promote","outline-none rounded-sm cursor-pointer my-2",s&&"opacity-50 cursor-not-allowed",o&&"BU_is-active",i&&"BU_is-focused"),children:[m.jsx("div",{className:"px-3 py-2",children:t.rendered}),m.jsx("div",{className:"px-3",children:o?m.jsx(b6,{className:"w-4 h-4"}):m.jsx("div",{className:"w-4 h-4"})})]})},KCt=t=>{const[e,n]=P.useState(Mr.Unknown);v.useEffect(()=>{let o=!1;return IM().then(s=>{o||n(Mr.No)}),()=>{o=!0}},[]);const r=vs();return e===Mr.Unknown?null:m.jsx(UCt,{hasGithub:r.isExtensionDefined("@bangle.io/github-storage"),hasPrivateFs:e===Mr.Yes,onDismiss:()=>{t.onDismiss(t.dialogName)},onSelect:o=>{switch(o){case Je.Github:{_n({dialogName:"dialog::@bangle.io/github-storage:NEW_GITHUB_WORKSPACE_TOKEN_DIALOG"});return}case Je.Browser:{_n({dialogName:vk});return}case Je.NativeFS:{_n({dialogName:yk});return}case Je.PrivateFS:{_n({dialogName:bk});return}case Je.Help:throw new Error("Not allowed to create help workspace");default:throw new Error("Unknown storage type")}}})};function GCt(){const{dialogName:t,dialogMetadata:e}=el(),n=v.useCallback((d=!0)=>{var f;wr(sf),d&&((f=Ef())==null||f.focusView())},[]),r=Zc(),{wsName:o}=vn(),[s,i]=v.useState(),{widescreen:a}=Qa(),l=v.useCallback(async d=>{if(!d||d.endsWith("/")||d.endsWith("/.md")){i(new Error("   "));return}if(!o){i(new Error("  "));return}let f=xf(o,d);Wr(f)||(f+=".md");try{await m$(He(f),{open:!0}),n()}catch(p){if(!(p instanceof Error))throw p;if(r.current)return;if(i(p),!(p instanceof cr))throw p}},[n,r,o]),c=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],u=c[Math.floor(Math.random()*c.length)];return t!==sf?null:m.jsx(e8,{placeholder:"  ",onExecute:l,onDismiss:n,updateError:i,error:s,widescreen:a,initialValue:(e==null?void 0:e.initialValue)||u+" ",selectOnMount:!0,children:m.jsx(Hr,{children:m.jsx(Le,{})})})}function ZCt(){const t=v.useCallback((c=!0)=>{wr(Im),c&&d$()},[]),e=Zc(),{widescreen:n}=Qa(),{wsName:r}=vn(),o=u$(),[s,i]=v.useState(),a=v.useCallback(async c=>{if(!c||c.endsWith("/")||c.endsWith("/.md")){i(new Error("Must provide a note name"));return}if(!r){i(new Error("No workspace open"));return}if(!o){i(new Error("No note active"));return}let u=xf(r,c);Wr(u)||(u+=".md");try{const d=He(o),f=He(u);await E5(d,f),t()}catch(d){if(e.current)return;if(t(),!(d instanceof Error))throw d;if(d instanceof ge){ke({severity:J.ERROR,uid:"error-rename-note-"+o,title:"Unable to rename note",content:d.message});return}}},[o,t,e,r]),l=o?he(o).filePath:"";return m.jsx(e8,{placeholder:"Enter the new name",onExecute:a,onDismiss:t,updateError:i,error:s,initialValue:l,selectOnMount:!0,widescreen:n,children:m.jsx(Hr,{children:m.jsxs(Le,{children:['You are currently renaming "',l,'"']})})})}function JCt(){const t=v.useCallback(()=>{wr(Rm)},[]);return m.jsx(un,{onDismiss:t,primaryButtonConfig:{text:"Reload",onPress:()=>{window.location.reload()}},size:"md",isDismissable:!0,headingTitle:"Reload Application",children:"Are you sure you want to reload the application?"})}function YCt(){const{wsName:t}=St();if(!t){ke({severity:J.ERROR,uid:"new-note-not-no-workspace",title:"  .",buttons:[]});return}const e=new AbortController;ke({severity:J.INFO,uid:"downloading-ws-copy"+t,title:" .   zip-     .",buttons:[]}),Pr.abortable.abortableBackupAllFiles(e.signal,t).then(n=>{t2t(n,n.name)})}function XCt(){const{wsName:t}=St();return t?(e2t().then(e=>{const n=new AbortController;return ke({buttons:[],severity:J.INFO,uid:"restoreWorkspaceFromBackup-"+t,title:"  !   . ,       ."}),Pr.abortable.abortableCreateWorkspaceFromBackup(n.signal,t,e)}).then(()=>ap(100)).then(()=>{var e;dy(),ke({buttons:[],severity:J.SUCCESS,uid:"recovery-finished-"+t,title:`Restore success! ${((e=St().noteWsPaths)==null?void 0:e.length)||0} notes were restored.`})},e=>{var n;if((n=e==null?void 0:e.message)!=null&&n.includes(pR.EMPTY_WORKSPACE_NEEDED)){ke({buttons:[],severity:J.ERROR,uid:"restoreWorkspaceFromBackup-workspace-has-things",title:"     ."});return}}),!0):(ke({buttons:[],severity:J.ERROR,uid:"restoreWorkspaceFromBackup-no-workspace",title:"   ."}),!1)}function c8(){const t=u$();return t?(ba(void 0),typeof window!="undefined"&&window.confirm(` ,   ? "${tt(t).filePath}"?     ..`)&&g$(t).then(()=>{ke({buttons:[],severity:J.SUCCESS,uid:"success-delete-"+t,title:"Successfully deleted "+t})}).catch(e=>{e instanceof Error&&ke({buttons:[],severity:J.ERROR,uid:"delete-"+c8,title:e.message})}),!0):(ke({severity:J.ERROR,uid:"delete-wsPath-not-found",title:"Cannot delete because there is no primary note",buttons:[]}),!0)}function QCt(t){if(t=t||St().wsName,!t){ke({buttons:[],severity:J.ERROR,uid:"removeWorkspace-no-workspace",title:"  ."});return}if(t===Br){ke({buttons:[],severity:J.ERROR,uid:"removeWorkspace-not-allowed",title:"   "});return}window.confirm(` ,    "${t}"?       -   .`)&&(lvt(t),ke({buttons:[],severity:J.SUCCESS,uid:"success-removed-"+t,title:"  "+t}))}function e2t(){return new Promise((t,e)=>{const n=document.createElement("input");n.type="file",n.accept=".zip",n.addEventListener("change",()=>{var o;const r=(o=n.files)==null?void 0:o[0];r?t(r):e(new Error("    "))},{once:!0}),n.click()})}function t2t(t,e){const n=URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download=e,r.addEventListener("click",()=>{setTimeout(()=>{URL.revokeObjectURL(n)},150)},{once:!0}),r.click()}const n2t=Tt.create({name:u$t,application:{dialogs:[{name:af,ReactComponent:ECt},{name:sf,ReactComponent:GCt},{name:Im,ReactComponent:ZCt},{name:V0,ReactComponent:KCt},{name:yk,ReactComponent:FCt},{name:vk,ReactComponent:DCt},{name:bk,ReactComponent:WCt},{name:Rm,ReactComponent:JCt},{name:a1,ReactComponent:ACt}],operations:[{name:Lm,title:"  ",keywords:["dismiss","hide"],hidden:!0},{name:PA,title:" ",keywords:["remove"],hidden:!0},{name:pc,title:" ",keywords:["create","",""],keybinding:"Mod-y",preventEditorFocusOnExecute:!0},{name:Na,title:" ",keywords:["create"],preventEditorFocusOnExecute:!0},{name:Mm,title:"  ",keywords:["delete"]},{name:SA,title:"  ",preventEditorFocusOnExecute:!0},{name:CA,title:"/  ",keywords:["hide","outline","toc","backlink","right sidebar"],keybinding:"Mod-r"},{name:Dm,title:"/  ",keybinding:"Mod-\\",keywords:["hide"]},{name:U0,title:"  ",keywords:["preview"]},{name:H0,title:"  ",keywords:["hide"]},{name:TA,title:"/ ",keywords:["darkmode","lightmode","color"],hidden:!0},{name:lf,title:"Create native fs workspace",hidden:!0},{name:cf,title:"Create browser workspace",hidden:!0},{name:uf,title:"Create private fs workspace",hidden:!0},{name:dd,title:"Reload page in response to a service worker update",hidden:!0},{name:wk,title:"Dismiss prompt from service worker to update",hidden:!0},{name:fc,title:"Report an issue on Github",hidden:!0},{name:AA,title:"   "},{name:NA,title:"     "},{name:"operation::@bangle.io/core-extension:focus-primary-editor",title:"Editor: Focus on primary editor",hidden:!0},{name:"operation::@bangle.io/core-extension:focus-secondary-editor",title:"Editor: Focus on secondary editor",hidden:!0},{name:"operation::@bangle.io/core-extension:toggle-editing-mode",title:"Editor: Toggle editing mode",hidden:!0},{name:"operation::@bangle.io/core-extension:reload-application",title:" "}],operationHandler(){return{handle(t,e){var n,r;switch(t.name){case pc:{if(!St().wsName)return ke({severity:J.ERROR,uid:"new-note-not-no-workspace",title:"  "}),!0;const{path:o}=e||{};return _n({dialogName:sf,metadata:{initialValue:typeof o=="string"?o:void 0}}),!0}case Na:return _n({dialogName:V0}),!0;case SA:return ba(void 0),_n({dialogName:Im}),!0;case CA:return h5(),!0;case PA:return c8(),!0;case Dm:{const{openedWsPaths:o}=St();return o.secondaryWsPath?Ks(s=>s.updateSecondaryWsPath(void 0)):o.primaryWsPath&&Ks(s=>s.updateSecondaryWsPath(o.primaryWsPath)),!0}case U0:{const o=St().primaryWsPath;return o&&Ks(s=>s.updateMiniEditorWsPath(o)),!0}case H0:return Ks(o=>o.updateMiniEditorWsPath(void 0)),!0;case Lm:return typeof e=="number"?(Nw(e),!0):(Nw(),!0);case AA:return YCt(),!0;case NA:return XCt(),!0;case Mm:{const o=typeof e=="string"?e:void 0;return QCt(o?gr(o):void 0),!0}case"operation::@bangle.io/core-extension:focus-primary-editor":return(n=Ef())==null||n.focusView(),!0;case"operation::@bangle.io/core-extension:focus-secondary-editor":return(r=$f(ri))==null||r.focusView(),!0;case TA:return m5(),!0;case cf:{const{wsName:o}=e||{};return o2t(o),!0}case uf:{const{wsName:o}=e||{};return console.debug("Creating private fs workspace",o),s2t(o),!0}case lf:{const{rootDirHandle:o}=e||{};return r2t(o),!0}case fc:return window.open("https://github.com/bangle-io/bangle-io/issues/new"),!0;case"operation::@bangle.io/core-extension:toggle-editing-mode":{l5();let{editingAllowed:o}=_f();return ke({severity:o?J.INFO:J.WARNING,uid:"editing-mode"+o+Date.now(),title:"Editing mode is now "+(o?"on":"off")}),!0}case"operation::@bangle.io/core-extension:reload-application":return _n({dialogName:Rm}),!0;case"operation::@bangle.io/core-extension:show-changelog":return _n({dialogName:af}),!0;default:return!1}}}}}});async function r2t(t){var n;const e=t==null?void 0:t.name;if(typeof e=="string")try{await ly(gr(e),Je.NativeFS,{rootDirHandle:t}),(n=window.fathom)==null||n.trackGoal("K3NFTGWX",0)}catch(r){throw ke({severity:J.ERROR,uid:"error-create-workspace-"+(t==null?void 0:t.name),title:"Unable to create workspace "+(t==null?void 0:t.name),content:r.displayMessage||r.message}),r}else throw new Error("   "+lf);return!0}async function o2t(t){var e;if(typeof t!="string")throw new Error("   "+cf);try{await ly(t,Je.Browser,{}),(e=window.fathom)==null||e.trackGoal("AISLCLRF",0)}catch(n){throw ke({severity:J.ERROR,uid:"error-create-workspace-"+t,title:"Unable to create workspace "+t,content:n.displayMessage||n.message}),n}return!0}async function s2t(t){var e;if(typeof t!="string")throw new Error("   "+uf);try{await ly(t,Je.PrivateFS,{}),(e=window.fathom)==null||e.trackGoal("KWXITXAK",0)}catch(n){throw ke({severity:J.ERROR,uid:"error-create-workspace-"+t,title:"Unable to create workspace "+t,content:n.displayMessage||n.message}),n}return!0}const i2t="@bangle.io/core-palettes";/** @license
 * fzf v0.5.2
 * Copyright (c) 2021 Ajit
 * Licensed under BSD 3-Clause
 */const iE={216:"O",223:"s",248:"o",273:"d",295:"h",305:"i",320:"l",322:"l",359:"t",383:"s",384:"b",385:"B",387:"b",390:"O",392:"c",393:"D",394:"D",396:"d",398:"E",400:"E",402:"f",403:"G",407:"I",409:"k",410:"l",412:"M",413:"N",414:"n",415:"O",421:"p",427:"t",429:"t",430:"T",434:"V",436:"y",438:"z",477:"e",485:"g",544:"N",545:"d",549:"z",564:"l",565:"n",566:"t",567:"j",570:"A",571:"C",572:"c",573:"L",574:"T",575:"s",576:"z",579:"B",580:"U",581:"V",582:"E",583:"e",584:"J",585:"j",586:"Q",587:"q",588:"R",589:"r",590:"Y",591:"y",592:"a",593:"a",595:"b",596:"o",597:"c",598:"d",599:"d",600:"e",603:"e",604:"e",605:"e",606:"e",607:"j",608:"g",609:"g",610:"G",613:"h",614:"h",616:"i",618:"I",619:"l",620:"l",621:"l",623:"m",624:"m",625:"m",626:"n",627:"n",628:"N",629:"o",633:"r",634:"r",635:"r",636:"r",637:"r",638:"r",639:"r",640:"R",641:"R",642:"s",647:"t",648:"t",649:"u",651:"v",652:"v",653:"w",654:"y",655:"Y",656:"z",657:"z",663:"c",665:"B",666:"e",667:"G",668:"H",669:"j",670:"k",671:"L",672:"q",686:"h",867:"a",868:"e",869:"i",870:"o",871:"u",872:"c",873:"d",874:"h",875:"m",876:"r",877:"t",878:"v",879:"x",7424:"A",7427:"B",7428:"C",7429:"D",7431:"E",7432:"e",7433:"i",7434:"J",7435:"K",7436:"L",7437:"M",7438:"N",7439:"O",7440:"O",7441:"o",7442:"o",7443:"o",7446:"o",7447:"o",7448:"P",7449:"R",7450:"R",7451:"T",7452:"U",7453:"u",7454:"u",7455:"m",7456:"V",7457:"W",7458:"Z",7522:"i",7523:"r",7524:"u",7525:"v",7834:"a",7835:"s",8305:"i",8341:"h",8342:"k",8343:"l",8344:"m",8345:"n",8346:"p",8347:"s",8348:"t",8580:"c"};for(let t="".codePointAt(0);t<="".codePointAt(0);++t){const e=String.fromCodePoint(t);for(const n of"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"){const o=(n+e).normalize().codePointAt(0);o>126&&(iE[o]=n)}}const Av={a:[7844,7863],e:[7870,7879],o:[7888,7907],u:[7912,7921]};for(const t of Object.keys(Av)){const e=t.toUpperCase();for(let n=Av[t][0];n<=Av[t][1];++n)iE[n]=n%2===0?e:t}function Pp(t){if(t<192||t>8580)return t;const e=iE[t];return e!==void 0?e.codePointAt(0):t}function Is(t,e){return t>e?t:e}const u8=t=>t.split("").map(e=>e.codePointAt(0)),a2t=new Set(` \f
\r	\v\u2028\u2029\uFEFF`.split("").map(t=>t.codePointAt(0)));for(let t="".codePointAt(0);t<="".codePointAt(0);t++)a2t.add(t);const Rc="".codePointAt(0),Of="A".codePointAt(0),If="Z".codePointAt(0),d8="a".codePointAt(0),f8="z".codePointAt(0),l2t="0".codePointAt(0),c2t="9".codePointAt(0);function Ml(t,e,n){return n?t:e-t-1}const Rf=16,Pg=-3,Mf=-1,Ua=Rf/2,u2t=Rf/2,d2t=Ua+Mf,p8=-(Pg+Mf),h8=2;function Jw(t){return t?new Set:null}function Mu(t,e,n){if(e!==null&&e.i16.length>t+n){const r=e.i16.subarray(t,t+n);return[t+n,r]}return[t,new Int16Array(n)]}function hN(t,e,n){if(e!==null&&e.i32.length>t+n){const r=e.i32.subarray(t,t+n);return[t+n,r]}return[t,new Int32Array(n)]}function m8(t){return t>=d8&&t<=f8?1:t>=Of&&t<=If?2:t>=l2t&&t<=c2t?4:0}function g8(t){const e=String.fromCodePoint(t);return e!==e.toUpperCase()?1:e!==e.toLowerCase()?2:e.match(/\p{Number}/gu)!==null?4:e.match(/\p{Letter}/gu)!==null?3:0}function Og(t){return t<=Rc?m8(t):g8(t)}function aE(t,e){return t===0&&e!==0?Ua:t===1&&e===2||t!==4&&e===4?d2t:e===0?u2t:0}function f2t(t,e){return e===0?Ua:aE(Og(t[e-1]),Og(t[e]))}function p2t(t,e,n,r){let o=t.slice(r),s=o.indexOf(n);if(s===0)return r;if(!e&&n>=d8&&n<=f8){s>0&&(o=o.slice(0,s));const i=o.indexOf(n-32);i>=0&&(s=i)}return s<0?-1:r+s}function mN(t){for(const e of t)if(e>=128)return!1;return!0}function lE(t,e,n){if(!mN(t))return 0;if(!mN(e))return-1;let r=0,o=0;for(let s=0;s<e.length;s++){if(o=p2t(t,n,e[s],o),o<0)return-1;s===0&&o>0&&(r=o-1),o++}return r}const h2t=(t,e,n,r,o,s,i)=>{const a=o.length;if(a===0)return[{start:0,end:0,score:0},Jw(s)];const l=r.length;if(i!==null&&l*a>i.i16.length)return b8(t,e,n,r,o,s);const c=lE(r,o,t);if(c<0)return[{start:-1,end:-1,score:0},null];let u=0,d=0,f=null,p=null,h=null,y=null;[u,f]=Mu(u,i,l),[u,p]=Mu(u,i,l),[u,h]=Mu(u,i,l),[d,y]=hN(d,i,a);const[,g]=hN(d,i,l);for(let F=0;F<g.length;F++)g[F]=r[F];let b=0,w=0,x=0,k=0;const S=o[0];let _=o[0],C=0,$=0,T=!1,A=g.subarray(c),N=f.subarray(c).subarray(0,A.length),q=p.subarray(c).subarray(0,A.length),O=h.subarray(c).subarray(0,A.length);for(let[F,B]of A.entries()){let W=null;B<=Rc?(W=m8(B),!t&&W===2&&(B+=32)):(W=g8(B),!t&&W===2&&(B=String.fromCodePoint(B).toLowerCase().codePointAt(0)),e&&(B=Pp(B))),A[F]=B;const K=aE($,W);if(O[F]=K,$=W,B===_&&(x<a&&(y[x]=c+F,x++,_=o[Math.min(x,a-1)]),k=c+F),B===S){const Ce=Rf+K*h8;if(N[F]=Ce,q[F]=1,a===1&&(n&&Ce>b||!n&&Ce>=b)&&(b=Ce,w=c+F,n&&K===Ua))break;T=!1}else T?N[F]=Is(C+Mf,0):N[F]=Is(C+Pg,0),q[F]=0,T=!0;C=N[F]}if(x!==a)return[{start:-1,end:-1,score:0},null];if(a===1){const F={start:w,end:w+1,score:b};if(!s)return[F,null];const B=new Set;return B.add(w),[F,B]}const E=y[0],D=k-E+1;let R=null;[u,R]=Mu(u,i,D*a);{const F=f.subarray(E,k+1);for(const[B,W]of F.entries())R[B]=W}let[,j]=Mu(u,i,D*a);{const F=p.subarray(E,k+1);for(const[B,W]of F.entries())j[B]=W}const we=y.subarray(1),Oe=o.slice(1).slice(0,we.length);for(const[F,B]of we.entries()){let W=!1;const K=Oe[F],Ce=F+1,Te=Ce*D,Se=g.subarray(B,k+1),gt=h.subarray(B).subarray(0,Se.length),ws=j.subarray(Te+B-E).subarray(0,Se.length),Gr=j.subarray(Te+B-E-1-D).subarray(0,Se.length),Oo=R.subarray(Te+B-E).subarray(0,Se.length),be=R.subarray(Te+B-E-1-D).subarray(0,Se.length),je=R.subarray(Te+B-E-1).subarray(0,Se.length);je[0]=0;for(const[Ie,xs]of Se.entries()){const Io=Ie+B;let Zr=0,Re=0,Me=0;if(W?Re=je[Ie]+Mf:Re=je[Ie]+Pg,K===xs){Zr=be[Ie]+Rf;let dt=gt[Ie];Me=Gr[Ie]+1,dt===Ua?Me=1:Me>1&&(dt=Is(dt,Is(p8,h[Io-Me+1]))),Zr+dt<Re?(Zr+=gt[Ie],Me=0):Zr+=dt}ws[Ie]=Me,W=Zr<Re;const Ae=Is(Is(Zr,Re),0);Ce===a-1&&(n&&Ae>b||!n&&Ae>=b)&&(b=Ae,w=Io),Oo[Ie]=Ae}}const ee=Jw(s);let z=E;if(s&&ee!==null){let F=a-1;z=w;let B=!0;for(;;){const W=F*D,K=z-E,Ce=R[W+K];let Te=0,Se=0;if(F>0&&z>=y[F]&&(Te=R[W-D+K-1]),z>y[F]&&(Se=R[W+K-1]),Ce>Te&&(Ce>Se||Ce===Se&&B)){if(ee.add(z),F===0)break;F--}B=j[W+K]>1||W+D+K+1<j.length&&j[W+D+K+1]>0,z--}}return[{start:z,end:w+1,score:b},ee]};function y8(t,e,n,r,o,s,i){let a=0,l=0,c=!1,u=0,d=0;const f=Jw(i);let p=0;o>0&&(p=Og(n[o-1]));for(let h=o;h<s;h++){let y=n[h];const g=Og(y);if(t||(y>=Of&&y<=If?y+=32:y>Rc&&(y=String.fromCodePoint(y).toLowerCase().codePointAt(0))),e&&(y=Pp(y)),y===r[a]){i&&f!==null&&f.add(h),l+=Rf;let b=aE(p,g);u===0?d=b:(b===Ua&&(d=b),b=Is(Is(b,d),p8)),a===0?l+=b*h8:l+=b,c=!1,u++,a++}else c?l+=Mf:l+=Pg,c=!0,u=0,d=0;p=g}return[l,f]}const b8=(t,e,n,r,o,s,i)=>{if(o.length===0)return[{start:0,end:0,score:0},null];if(lE(r,o,t)<0)return[{start:-1,end:-1,score:0},null];let a=0,l=-1,c=-1;const u=r.length,d=o.length;for(let f=0;f<u;f++){let p=r[Ml(f,u,n)];t||(p>=Of&&p<=If?p+=32:p>Rc&&(p=String.fromCodePoint(p).toLowerCase().codePointAt(0))),e&&(p=Pp(p));const h=o[Ml(a,d,n)];if(p===h&&(l<0&&(l=f),a++,a===d)){c=f+1;break}}if(l>=0&&c>=0){a--;for(let h=c-1;h>=l;h--){const y=Ml(h,u,n);let g=r[y];t||(g>=Of&&g<=If?g+=32:g>Rc&&(g=String.fromCodePoint(g).toLowerCase().codePointAt(0)));const b=Ml(a,d,n),w=o[b];if(g===w&&(a--,a<0)){l=h;break}}if(!n){const h=l;l=u-c,c=u-h}const[f,p]=y8(t,e,r,o,l,c,s);return[{start:l,end:c,score:f},p]}return[{start:-1,end:-1,score:0},null]},m2t=(t,e,n,r,o,s,i)=>{if(o.length===0)return[{start:0,end:0,score:0},null];const a=r.length,l=o.length;if(a<l)return[{start:-1,end:-1,score:0},null];if(lE(r,o,t)<0)return[{start:-1,end:-1,score:0},null];let c=0,u=-1,d=0,f=-1;for(let p=0;p<a;p++){const h=Ml(p,a,n);let y=r[h];t||(y>=Of&&y<=If?y+=32:y>Rc&&(y=String.fromCodePoint(y).toLowerCase().codePointAt(0))),e&&(y=Pp(y));const g=Ml(c,l,n);if(o[g]===y){if(g===0&&(d=f2t(r,h)),c++,c===l){if(d>f&&(u=p,f=d),d===Ua)break;p-=c-1,c=0,d=0}}else p-=c,c=0,d=0}if(u>=0){let p=0,h=0;n?(p=u-l+1,h=u+1):(p=a-(u+1),h=a-(u-l+1));const[y]=y8(t,e,r,o,p,h,!1);return[{start:p,end:h,score:y},null]}return[{start:-1,end:-1,score:0},null]},g2t=100*1024,y2t=2048;function b2t(t,e){return{i16:new Int16Array(t),i32:new Int32Array(e)}}const v2t=b2t(g2t,y2t),w2t=(t,e,n)=>{let r=!1;switch(e){case"smart-case":t.toLowerCase()!==t&&(r=!0);break;case"case-sensitive":r=!0;break;case"case-insensitive":t=t.toLowerCase(),r=!1;break}let o=u8(t);return n&&(o=o.map(Pp)),{queryRunes:o,caseSensitive:r}};function x2t(t,e){const n=Object.keys(t).map(o=>parseInt(o,10)).sort((o,s)=>s-o);let r=[];for(const o of n)if(r=r.concat(t[o]),r.length>=e)break;return r}function k2t(t,e,n){return r=>{const o=this.runesList[r];if(e.length>o.length)return;let[s,i]=this.algoFn(n,this.opts.normalize,this.opts.forward,o,e,!0,v2t);if(s.start===-1)return;if(this.opts.fuzzy===!1){i=new Set;for(let l=s.start;l<s.end;++l)i.add(l)}const a=this.opts.sort?s.score:0;t[a]===void 0&&(t[a]=[]),t[a].push({item:this.items[r],...s,positions:i!=null?i:new Set})}}function _2t(t){const{queryRunes:e,caseSensitive:n}=w2t(t,this.opts.casing,this.opts.normalize),r={},o=k2t.bind(this)(r,e,n);for(let s=0,i=this.runesList.length;s<i;++s)o(s);return x2t(r,this.opts.limit)}const v8={limit:1/0,selector:t=>t,casing:"smart-case",normalize:!0,fuzzy:"v2",tiebreakers:[],sort:!0,forward:!0};class $2t{constructor(e,...n){switch(this.opts={...v8,...n[0]},this.items=e,this.runesList=e.map(r=>u8(this.opts.selector(r).normalize())),this.algoFn=m2t,this.opts.fuzzy){case"v2":this.algoFn=h2t;break;case"v1":this.algoFn=b8;break}}}const E2t={...v8,match:_2t};class S2t extends $2t{constructor(e,...n){super(e,...n),this.opts={...E2t,...n[0]}}find(e){if(e.length===0||this.items.length===0)return this.items.slice(0,this.opts.limit).map(C2t);e=e.normalize();let n=this.opts.match.bind(this)(e);return T2t(n,this.opts)}}const C2t=t=>({item:t,start:-1,end:-1,score:0,positions:new Set});function T2t(t,e){if(e.sort){const{selector:n}=e;t.sort((r,o)=>{if(r.score===o.score)for(const s of e.tiebreakers){const i=s(r,o,n);if(i!==0)return i}return 0})}return Number.isFinite(e.limit)&&t.splice(e.limit),t}function cE(t,e,n){return n(t.item).length-n(e.item).length}function bRt(t,e){return t.start-e.start}class gN{constructor(e,...n){this.finder=new S2t(e,...n),this.find=this.finder.find.bind(this.finder)}}function uE(t,e,...n){const r=v.useRef(n),[o,s]=v.useState(()=>new gN(t,...r.current));return v.useEffect(()=>{s(new gN(t,...r.current))},[t,r]),v.useMemo(()=>o.find(e),[o,e])}const w8=200,A2t=6,N2t=5,P2t=200,yN=({wsPath:t,onClick:e})=>{const{fileName:n,dirPath:r}=tt(t);return{uid:t,title:$t(n),rightNode:void 0,showDividerAbove:!1,extraInfo:r,data:{wsPath:t},rightHoverNode:m.jsx(rr,{hint:"Open in split screen",hintPos:"left",onClick:e,children:m.jsx(B9,{style:{height:18,width:18}})})}},O2t=P.forwardRef(({query:t,dismissPalette:e,onSelect:n,getActivePaletteItem:r},o)=>{const{recent:s,other:i}=R2t(t),a=v.useMemo(()=>{const u=s.map((d,f)=>{let p=yN({wsPath:d,onClick:h=>{h.stopPropagation(),Ba(d),e()}});return f===0&&(p.rightNode=""),p});return[...u.slice(0,t?N2t:P2t),...i.map((d,f)=>{let p=yN({wsPath:d,onClick:h=>{h.stopPropagation(),Ba(d),e()}});return f===0&&u.length>0&&(p.showDividerAbove=!0),p})]},[i,s,t,e]),l=v.useCallback((u,d)=>{const f=u(a),p=a.find(h=>h.uid===f);p&&y$(p.data.wsPath,d.metaKey?"newTab":d.shiftKey?"secondary":"primary")},[a]);v.useImperativeHandle(o,()=>({onExecuteItem:l}),[l]);const c=r(a);return m.jsxs(m.Fragment,{children:[m.jsx(du,{children:a.map(u=>m.jsx(Va,{item:u,onClick:n,isActive:c===u},u.uid))}),m.jsxs(Hr,{children:[m.jsx(Le,{}),m.jsxs(Le,{children:[m.jsx("kbd",{className:"font-normal",children:""})," "]}),m.jsxs(Le,{children:[m.jsx("kbd",{className:"font-normal",children:"Enter"})," "]}),m.jsxs(Le,{children:[m.jsx("kbd",{className:"font-normal",children:"Shift-Enter"}),"  "]}),m.jsxs(Le,{children:[m.jsxs("kbd",{className:"font-normal",children:[Jc("Mod"),"-Enter"]})," ","  "]})]})]})}),x8={type:Lt.Notes,icon:m.jsx(FSt,{}),identifierPrefix:"",placeholder:"  (? - ).",parseRawQuery:t=>t,ReactComponent:O2t},I2t=[];function R2t(t){const{recentWsPaths:e=I2t,wsName:n}=vn(),r=uE(e,t,{limit:w8,selector:a=>tt(a).filePath,tiebreakers:[cE]}),o=M2t(t,n),s=v.useMemo(()=>{let a;return t===""?a=e:a=r.map((l,c)=>l.item).slice(0,A2t),a},[r,e,t]),i=v.useMemo(()=>{const a=new Set(s);return o?o.filter(l=>!a.has(l.item)).map((l,c)=>l.item):[]},[o,s]);return{recent:s,other:i}}function M2t(t,e){const[n,r]=v.useState(void 0);return v.useEffect(()=>{const o=new AbortController;let s=!1;return e&&Pr.abortable.abortableFzfSearchNoteWsPaths(o.signal,e,t,w8).then(i=>{s||r(i)}).catch(i=>{if(!Ja(i))throw i}),()=>{s=!0,o.abort()}},[t,e]),n}const D2t=10;function k8(t,{maxEntries:e=D2t}={}){const[n,r]=La(t,{}),o=v.useCallback(i=>{r(a=>{const l=Object.entries(a||{}).sort((u,d)=>typeof u[1]=="number"&&typeof d[1]=="number"?d[1]-u[1]:0),c=Object.fromEntries(l.slice(0,e));return c[i]=Date.now(),c})},[r,e]),s=v.useCallback(i=>{const a=i.sort((l,c)=>{const u=n[l.uid],d=n[c.uid];return u&&d?d-u:u&&!d?-1:d&&!u?1:l.title.localeCompare(c.title)});if(a[0]&&n[a[0].uid]){a[0].rightNode="Recent";const l=a.find(c=>n[c.uid]==null);l&&(l.showDividerAbove=!0)}return a},[n]);return{updateRecency:o,injectRecency:s}}const bN=">",L2t="ActionPaletteUIComponent/1",j2t=P.forwardRef(({query:t,onSelect:e,getActivePaletteItem:n,dismissPalette:r},o)=>{const s=vs(),{dispatchSerialOperation:i}=zt(),{injectRecency:a,updateRecency:l}=k8(L2t),c=v.useMemo(()=>{const f=s.getRegisteredOperations().filter(h=>!h.hidden).map(h=>({uid:h.name,title:h.title||h.name,data:h,keywords:h.keywords,preventEditorFocusOnExecute:h.preventEditorFocusOnExecute})).filter(h=>Yw(h.title,t)?!0:h.keywords?Yw(h.keywords,t):!1);return a(f).slice(0,50)},[s,a,t]),u=v.useCallback((f,p)=>{const h=f(c),y=c.find(b=>b.uid===h);return y&&h&&(i({name:y.data.name}),l(h)),{shouldPreventFocus:!!(y!=null&&y.preventEditorFocusOnExecute)}},[i,l,c]);v.useImperativeHandle(o,()=>({onExecuteItem:u}),[u]);const d=n(c);return m.jsxs(m.Fragment,{children:[m.jsx(du,{children:c.map(f=>m.jsx(Va,{item:f,onClick:e,isActive:d===f},f.uid))}),m.jsxs(Hr,{children:[m.jsx(Le,{children:"use:"}),m.jsxs(Le,{children:[m.jsx("kbd",{className:"font-normal",children:""})," Navigate"]}),m.jsxs(Le,{children:[m.jsx("kbd",{className:"font-normal",children:"Enter"})," Execute"]})]})]})}),_8={type:Lt.Operation,icon:m.jsx(LSt,{}),identifierPrefix:bN,placeholder:"Operations",parseRawQuery:t=>t.startsWith(bN)?t.slice(1):null,ReactComponent:j2t};function Yw(t,e){return e=e.toLocaleLowerCase().trim(),e=e.split(" ").filter(Boolean).join(" "),Array.isArray(t)?t.filter(Boolean).some(n=>Yw(n,e)):(t=t.toLocaleLowerCase().trim(),t=t.split(" ").filter(Boolean).join(" "),t.includes(e)||e.includes(t))}const vN="#",F2t=P.forwardRef(({query:t,onSelect:e,getActivePaletteItem:n},r)=>{const o=v.useMemo(()=>{const{primaryEditor:a}=_f();if(!a||a.destroyed)return[];const l=[];return a.view.state.doc.forEach((c,u)=>{c.type.name==="heading"&&l.push({offset:u,level:c.attrs.level,title:c.textContent})}),l.filter(c=>t.length===1&&parseInt(t)<=6&&parseInt(t)>0?c.level===parseInt(t):$8(c.title+" "+c.level,t)).map((c,u)=>({uid:u+"heading",title:c.title,extraInfo:"#"+c.level,data:c}))},[t]),s=v.useCallback((a,l)=>{const{primaryEditor:c}=_f(),u=a(o),d=o.find(f=>f.uid===u);d&&Yc(()=>{if(!c||c.destroyed)return;c.focusView();const{dispatch:f,state:p}=c.view,h=p.tr;f(h.setSelection(Q.near(h.doc.resolve(d.data.offset))).scrollIntoView())})},[o]);v.useImperativeHandle(r,()=>({onExecuteItem:s}),[s]);const i=n(o);return m.jsxs(m.Fragment,{children:[m.jsx(du,{children:o.map(a=>m.jsx(Va,{item:a,onClick:e,isActive:i===a},a.uid))}),m.jsxs(Hr,{children:[m.jsx(Le,{children:"use:"}),m.jsxs(Le,{children:[m.jsx("kbd",{className:"font-normal",children:""})," Navigate"]}),m.jsxs(Le,{children:[m.jsx("kbd",{className:"font-normal",children:"Enter"})," Jump to a heading"]})]})]})});function $8(t,e){return e=e.toLocaleLowerCase(),Array.isArray(t)?t.filter(Boolean).some(n=>$8(n,e)):(t=t.toLocaleLowerCase(),t.includes(e)||e.includes(t))}const B2t={type:Lt.Heading,icon:m.jsx(tE,{}),identifierPrefix:vN,placeholder:"Jump to a heading.",parseRawQuery:t=>t.startsWith(vN)?t.slice(1):null,ReactComponent:F2t},wN="?",z2t=P.forwardRef(({query:t,updatePalette:e,onSelect:n,getActivePaletteItem:r,allPalettes:o},s)=>{const i=o.map(c=>({uid:c.type,rightNode:m.jsx("kbd",{children:c.identifierPrefix}),rightHoverNode:m.jsx("kbd",{children:c.identifierPrefix}),title:c.type.split("/").slice(1).join("/"),data:{type:c.type}})).filter(c=>E8(c.title,t)),a=v.useCallback((c,u)=>{const d=c(i),f=i.find(p=>p.uid===d);f&&e(f.data.type)},[e,i]);v.useImperativeHandle(s,()=>({onExecuteItem:a}),[a]);const l=r(i);return m.jsxs(m.Fragment,{children:[m.jsx(du,{children:i.map(c=>m.jsx(Va,{item:c,isActive:l===c,onClick:n},c.uid))}),m.jsxs(Hr,{children:[m.jsx(Le,{children:"use:"}),m.jsxs(Le,{children:[m.jsx("kbd",{className:"font-normal",children:""})," Navigate"]}),m.jsxs(Le,{children:[m.jsx("kbd",{className:"font-normal",children:"Enter"})," Select a Palette"]})]})]})}),q2t={type:Lt.Question,icon:m.jsx(tE,{}),identifierPrefix:wN,placeholder:"Available palettes",parseRawQuery:t=>t.startsWith(wN)?t.slice(1):null,ReactComponent:z2t};function E8(t,e){return e=e.toLocaleLowerCase(),Array.isArray(t)?t.filter(Boolean).some(n=>E8(n,e)):(t=t.toLocaleLowerCase(),t.includes(e)||e.includes(t))}const xN="ws:",W2t="WorkspacePaletteUIComponent/1",V2t=P.forwardRef(({query:t,dismissPalette:e,onSelect:n,getActivePaletteItem:r},o)=>{const{injectRecency:s,updateRecency:i}=k8(W2t),[a,l]=v.useState([]),{dispatchSerialOperation:c}=zt();v.useEffect(()=>{avt().then(p=>{l(p)})},[]);const u=v.useMemo(()=>s(a.filter(h=>S8(h.name,t)).map((h,y)=>({uid:h.name,title:h.name,extraInfo:h.type,data:{workspace:h},rightHoverNode:m.jsx(uu,{style:{height:16,width:16},onClick:async g=>{g.stopPropagation(),c({name:Mm,value:h.name}),e()}})}))),[t,e,c,a,s]),d=r(u),f=v.useCallback((p,h)=>{const y=p(u),g=u.find(b=>b.uid===y);if(g&&y!=null){const b=gr(g.data.workspace.name);T5({wsName:b,type:h.metaKey?"newTab":"replace"}),i(y)}},[i,u]);return v.useImperativeHandle(o,()=>({onExecuteItem:f}),[f]),m.jsxs(m.Fragment,{children:[m.jsx(du,{children:u.map(p=>m.jsx(Va,{item:p,onClick:n,isActive:p===d},p.uid))}),m.jsxs(Hr,{children:[m.jsx(Le,{children:"use:"}),m.jsxs(Le,{children:[m.jsx("kbd",{className:"font-normal",children:""})," Navigate"]}),m.jsxs(Le,{children:[m.jsx("kbd",{className:"font-normal",children:"Enter"})," Open a workspace"]}),m.jsxs(Le,{children:[m.jsxs("kbd",{className:"font-normal",children:[Jc("Mod"),"-Enter"]})," ","Open a in new tab"]})]})]})});function S8(t,e){return e=e.toLocaleLowerCase().trim(),Array.isArray(t)?t.filter(Boolean).some(n=>S8(n,e)):(t=t.toLocaleLowerCase().trim(),t.includes(e)||e.includes(t))}const C8={type:Lt.Workspace,icon:m.jsx(jSt,{}),identifierPrefix:xN,placeholder:"Select a workspace to open",parseRawQuery:t=>t.startsWith(xN)?t.slice(3):null,ReactComponent:V2t},Xw=[B2t,C8,q2t,_8,x8],U2t=Object.fromEntries(Xw.map(t=>[t.type,t]));function H2t(){const{paletteMetadata:t,paletteType:e,paletteInitialQuery:n}=Qa(),r=v.useRef(null),[o,s]=v.useState(n||""),i=v.useCallback((w=!0)=>{s(""),d5(),w&&Yc(()=>{d$()})},[]),a=v.useRef(null),l=v.useCallback((w,x)=>{var S;const k=(S=a.current)==null?void 0:S.onExecuteItem(w,x);return Promise.resolve(k).then(_=>{i(!(_!=null&&_.shouldPreventFocus))}),k},[i]),c=v.useCallback((w,x="")=>{var k;ba(w,x),w&&((k=document.querySelector(".B-ui-components_universal-palette-container input"))==null||k.focus())},[]),{inputProps:u,updateCounter:d,resetCounter:f,counter:p,onSelect:h}=Y9(i,l);v.useEffect(()=>{f()},[o,f]),v.useEffect(()=>{s(n||""),f()},[f,e,n]);const y=v.useCallback(w=>{const x=Xw.find(S=>S.parseRawQuery(w)!=null);if(f(),!x){i();return}const k=x.parseRawQuery(w);x.type!==e?c(x.type,k||""):s(k||"")},[f,i,e,c,s]),g=e?U2t[e]:void 0,b=v.useCallback(w=>w[rE(p,w.length)],[p]);return g?m.jsxs(X9,{paletteType:e,widescreen:!1,onClickOutside:i,onClickInside:()=>{var w;(w=document.querySelector(".B-ui-components_universal-palette-container input"))==null||w.focus()},children:[m.jsx(Q9,{leftNode:g.icon,placeholder:g.placeholder,inputValue:g.identifierPrefix+o,onInputValueChange:y,ref:r,...u}),m.jsx(g.ReactComponent,{ref:a,query:o,paletteType:e,paletteMetadata:t,updatePalette:c,dismissPalette:i,onSelect:h,counter:p,getActivePaletteItem:b,updateCounter:d,allPalettes:Xw})]}):null}const K2t=Tt.create({name:i2t,application:{operations:[{name:jm,title:"Operation Palette",hidden:!0,keybinding:vM?"Mod-o":"Mod-P"},{name:Fm,title:"Switch Workspace",hidden:!0,keybinding:O1?"Ctrl-r":"Ctrl-h"},{name:Bm,title:"Open a Note",hidden:!0,keybinding:"Mod-p"}],ReactComponent:H2t,operationHandler(){const t=e=>{const n=el();return(n==null?void 0:n.paletteType)===e?void 0:e};return{handle(e){switch(e.name){case jm:return ba(t(_8.type)),!0;case Fm:return ba(t(C8.type)),!0;case Bm:return ba(t(x8.type)),!0;default:return}}}}}}),G2t="@bangle.io/github-storage",Sy=Je.Github,Ig="operation::@bangle.io/github-storage:update-github-token",Qw="operation::@bangle.io/github-storage:sync-github-changes",kN="operation::@bangle.io/github-storage:OPERATION_DISCARD_LOCAL_CHANGES",Rg="operation::@bangle.io/github-storage:show-conflict-dialog",_N="operation::@bangle.io/github-storage:OPERATION_OPTIMIZE_GITHUB_STORAGE",ex="dialog::@bangle.io/github-storage:discard-local-changes",T8="dialog::@bangle.io/github-storage:NEW_GITHUB_WORKSPACE_TOKEN_DIALOG",Mg="dialog::@bangle.io/github-storage:NEW_GITHUB_WORKSPACE_REPO_PICKER_DIALOG",tx="dialog::@bangle.io/github-storage:UPDATE_GITHUB_TOKEN_DIALOG",nx="dialog::@bangle.io/github-storage:conflict",Z2t="@bangle.io/github-storage:sync-lock";async function Cy(t,e){let n=await PX(Z2t+":"+t);if(!n)return{lockAcquired:!1,result:void 0};try{return{lockAcquired:!0,result:await e()}}finally{await n()}}const A8=()=>C_?15*1e3:1e3*60;function ln(t,e,n){return ke({severity:e,title:t,uid:"sync notification-"+Math.random(),transient:e!==J.ERROR,content:n})}function N8({wsPath:t,children:e,className:n,onClick:r}){const o=v.useCallback(()=>{tl(He(t)),r==null||r()},[t,r]);return m.jsx("a",{className:n,onClick:o,children:e})}const P8={githubWsName:void 0,conflictedWsPaths:[]},Ke=hs([],{name:"slice::github-storage:main",state:P8}),Df=Ke.action(function(e){return Ke.tx(n=>Ke.update(n,e))}),J2t=Ke.action(function(){return Ke.tx(e=>Ke.update(e,P8))});async function O8(t,e,{concurrency:n=Number.POSITIVE_INFINITY,abortSignal:r}){return $N(r),new Promise((o,s)=>{if(typeof e!="function")throw new TypeError("Mapper function is required");if(!((Number.isSafeInteger(n)||n===Number.POSITIVE_INFINITY)&&n>=1))throw new TypeError(`Expected \`concurrency\` to be an integer from 1 and up or \`Infinity\`, got \`${n}\` (${typeof n})`);$N(r);const i=[],a=t[Symbol.iterator]();let l=!1,c=!1,u=0,d=0,f=!1;r.addEventListener("abort",h=>{f=!0,s(new DOMException("Aborted","AbortError"))},{once:!0});const p=()=>{if(l||f)return;const h=a.next(),y=d;if(d++,h.done){c=!0,u===0&&o(i);return}u++,(async()=>{try{const g=await h.value;i[y]=await e(g,y),u--,p()}catch(g){l=!0,s(g)}})()};for(let h=0;h<n&&(p(),!c);h++);})}function $N(t){if(t.aborted)throw new DOMException("AbortError","AbortError")}function I8(t){return{...t,deleted:void 0,source:void 0}}function R8(t){return{...t,deleted:void 0,source:{file:t.file,sha:t.sha}}}function M8(t){var e;return t.sha!==((e=t.source)==null?void 0:e.sha)}function D8(t){return t.source==null}function L8(t){return typeof t.deleted=="number"}function j8(t){return!(D8(t)||L8(t)||M8(t))}const EN="REMOTE_SYNC_NOT_ALLOWED_ERROR",ds=Symbol.for("@ts-pattern/matcher"),Y2t=Symbol.for("@ts-pattern/isVariadic"),Dg="@ts-pattern/anonymous-select-key",rx=t=>!!(t&&typeof t=="object"),Kh=t=>t&&!!t[ds],so=(t,e,n)=>{if(Kh(t)){const r=t[ds](),{matched:o,selections:s}=r.match(e);return o&&s&&Object.keys(s).forEach(i=>n(i,s[i])),o}if(rx(t)){if(!rx(e))return!1;if(Array.isArray(t)){if(!Array.isArray(e))return!1;let r=[],o=[],s=[];for(const i of t.keys()){const a=t[i];Kh(a)&&a[Y2t]?s.push(a):s.length?o.push(a):r.push(a)}if(s.length){if(s.length>1)throw new Error("Pattern error: Using `...P.array(...)` several times in a single pattern is not allowed.");if(e.length<r.length+o.length)return!1;const i=e.slice(0,r.length),a=o.length===0?[]:e.slice(-o.length),l=e.slice(r.length,o.length===0?1/0:-o.length);return r.every((c,u)=>so(c,i[u],n))&&o.every((c,u)=>so(c,a[u],n))&&(s.length===0||so(s[0],l,n))}return t.length===e.length&&t.every((i,a)=>so(i,e[a],n))}return Object.keys(t).every(r=>{const o=t[r];return(r in e||Kh(s=o)&&s[ds]().matcherType==="optional")&&so(o,e[r],n);var s})}return Object.is(e,t)},Ai=t=>{var e,n,r;return rx(t)?Kh(t)?(e=(n=(r=t[ds]()).getSelectionKeys)==null?void 0:n.call(r))!=null?e:[]:Array.isArray(t)?Lf(t,Ai):Lf(Object.values(t),Ai):[]},Lf=(t,e)=>t.reduce((n,r)=>n.concat(e(r)),[]);function Kr(t){return Object.assign(t,{optional:()=>X2t(t),and:e=>at(t,e),or:e=>Q2t(t,e),select:e=>e===void 0?SN(t):SN(e,t)})}function X2t(t){return Kr({[ds]:()=>({match:e=>{let n={};const r=(o,s)=>{n[o]=s};return e===void 0?(Ai(t).forEach(o=>r(o,void 0)),{matched:!0,selections:n}):{matched:so(t,e,r),selections:n}},getSelectionKeys:()=>Ai(t),matcherType:"optional"})})}function at(...t){return Kr({[ds]:()=>({match:e=>{let n={};const r=(o,s)=>{n[o]=s};return{matched:t.every(o=>so(o,e,r)),selections:n}},getSelectionKeys:()=>Lf(t,Ai),matcherType:"and"})})}function Q2t(...t){return Kr({[ds]:()=>({match:e=>{let n={};const r=(o,s)=>{n[o]=s};return Lf(t,Ai).forEach(o=>r(o,void 0)),{matched:t.some(o=>so(o,e,r)),selections:n}},getSelectionKeys:()=>Lf(t,Ai),matcherType:"or"})})}function We(t){return{[ds]:()=>({match:e=>({matched:!!t(e)})})}}function SN(...t){const e=typeof t[0]=="string"?t[0]:void 0,n=t.length===2?t[1]:typeof t[0]=="string"?void 0:t[0];return Kr({[ds]:()=>({match:r=>{let o={[e!=null?e:Dg]:r};return{matched:n===void 0||so(n,r,(s,i)=>{o[s]=i}),selections:o}},getSelectionKeys:()=>[e!=null?e:Dg].concat(n===void 0?[]:Ai(n))})})}function Xr(t){return typeof t=="number"}function Vi(t){return typeof t=="string"}function Ss(t){return typeof t=="bigint"}Kr(We(function(t){return!0}));const Ui=t=>Object.assign(Kr(t),{startsWith:e=>{return Ui(at(t,(n=e,We(r=>Vi(r)&&r.startsWith(n)))));var n},endsWith:e=>{return Ui(at(t,(n=e,We(r=>Vi(r)&&r.endsWith(n)))));var n},minLength:e=>Ui(at(t,(n=>We(r=>Vi(r)&&r.length>=n))(e))),maxLength:e=>Ui(at(t,(n=>We(r=>Vi(r)&&r.length<=n))(e))),includes:e=>{return Ui(at(t,(n=e,We(r=>Vi(r)&&r.includes(n)))));var n},regex:e=>{return Ui(at(t,(n=e,We(r=>Vi(r)&&!!r.match(n)))));var n}});Ui(We(Vi));const Qr=t=>Object.assign(Kr(t),{between:(e,n)=>Qr(at(t,((r,o)=>We(s=>Xr(s)&&r<=s&&o>=s))(e,n))),lt:e=>Qr(at(t,(n=>We(r=>Xr(r)&&r<n))(e))),gt:e=>Qr(at(t,(n=>We(r=>Xr(r)&&r>n))(e))),lte:e=>Qr(at(t,(n=>We(r=>Xr(r)&&r<=n))(e))),gte:e=>Qr(at(t,(n=>We(r=>Xr(r)&&r>=n))(e))),int:()=>Qr(at(t,We(e=>Xr(e)&&Number.isInteger(e)))),finite:()=>Qr(at(t,We(e=>Xr(e)&&Number.isFinite(e)))),positive:()=>Qr(at(t,We(e=>Xr(e)&&e>0))),negative:()=>Qr(at(t,We(e=>Xr(e)&&e<0)))});Qr(We(Xr));const Cs=t=>Object.assign(Kr(t),{between:(e,n)=>Cs(at(t,((r,o)=>We(s=>Ss(s)&&r<=s&&o>=s))(e,n))),lt:e=>Cs(at(t,(n=>We(r=>Ss(r)&&r<n))(e))),gt:e=>Cs(at(t,(n=>We(r=>Ss(r)&&r>n))(e))),lte:e=>Cs(at(t,(n=>We(r=>Ss(r)&&r<=n))(e))),gte:e=>Cs(at(t,(n=>We(r=>Ss(r)&&r>=n))(e))),positive:()=>Cs(at(t,We(e=>Ss(e)&&e>0))),negative:()=>Cs(at(t,We(e=>Ss(e)&&e<0)))});Cs(We(Ss));Kr(We(function(t){return typeof t=="boolean"}));Kr(We(function(t){return typeof t=="symbol"}));Kr(We(function(t){return t==null}));const ox={matched:!1,value:void 0};function eTt(t){return new Lg(t,ox)}class Lg{constructor(e,n){this.input=void 0,this.state=void 0,this.input=e,this.state=n}with(...e){if(this.state.matched)return this;const n=e[e.length-1],r=[e[0]];let o;e.length===3&&typeof e[1]=="function"?(r.push(e[0]),o=e[1]):e.length>2&&r.push(...e.slice(1,e.length-1));let s=!1,i={};const a=(c,u)=>{s=!0,i[c]=u},l=!r.some(c=>so(c,this.input,a))||o&&!o(this.input)?ox:{matched:!0,value:n(s?Dg in i?i[Dg]:i:this.input,this.input)};return new Lg(this.input,l)}when(e,n){if(this.state.matched)return this;const r=!!e(this.input);return new Lg(this.input,r?{matched:!0,value:n(this.input,this.input)}:ox)}otherwise(e){return this.state.matched?this.state.value:e(this.input)}exhaustive(){return this.run()}run(){if(this.state.matched)return this.state.value;let e;try{e=JSON.stringify(this.input)}catch(n){e=this.input}throw new Error(`Pattern matching error: no pattern matches value ${e}`)}returnType(){return this}}const jf={action:"noop",target:void 0},CN={action:"conflict",target:void 0};function tTt(t,e){return t&&e?t.sha===e.sha?Mr.Yes:Mr.No:Mr.Unknown}function nTt({fileEntry:t,ancestorFileEntry:e}){const n=tTt(t,e);return l8(n,{onYes:()=>Mr.No,onNo:()=>Mr.Yes,onUnknown:()=>Mr.Unknown})}function rTt({fileA:t,fileB:e,ancestor:n}){if(t&&e&&t.sha===e.sha&&t.deleted===void 0&&e.deleted===void 0)return n&&t.sha!==n.sha?{action:"set",target:"ancestor"}:jf;if(!t&&!e)return jf;if(!t&&e)return TN(e,"fileB","fileA");if(t&&!e)return TN(t,"fileA","fileB");if(t&&e)return oTt(t,e,n);throw new Error("impossible file-sync condition")}function oTt(t,e,n){if(!n)return CN;let r;(a=>{a.NoChange="NoChange",a.Modified="Modified",a.Deleted="Deleted"})(r||(r={}));const o=({fileEntry:a,ancestorFileEntry:l})=>{if(a.deleted)return"Deleted";const c=nTt({ancestorFileEntry:l,fileEntry:a});return l8(c,{onYes:()=>"Modified",onNo:()=>"NoChange",onUnknown:()=>{throw new Error("Invalid file state")}})},s=o({fileEntry:t,ancestorFileEntry:n}),i=o({fileEntry:e,ancestorFileEntry:n});return eTt([s,i]).with(["NoChange","NoChange"],()=>jf).with(["NoChange","Modified"],()=>({action:"set",target:"fileA"})).with(["NoChange","Deleted"],()=>({action:"delete",target:"fileA"})).with(["Modified","NoChange"],()=>({action:"set",target:"fileB"})).with(["Modified","Modified"],()=>CN).with(["Modified","Deleted"],()=>({action:"set",target:"fileB"})).with(["Deleted","NoChange"],()=>({action:"delete",target:"fileB"})).with(["Deleted","Modified"],()=>({action:"set",target:"fileA"})).with(["Deleted","Deleted"],()=>jf).exhaustive()}function TN(t,e,n){return t.deleted?jf:{action:"set",target:n}}const dE=G2t,sTt=2,po="LOCAL_ENTRIES_TABLE",fE="MISC_TABLE",iTt=[po,fE];function xa(){return ip(dE,sTt,{upgrade(t,e){switch(e){case 0:{for(const n of iTt)t.createObjectStore(n,{keyPath:"key"});break}case 1:{t.createObjectStore(fE,{keyPath:"key"});break}}}})}const sx=X_(dE,fE,xa);function _s(){return X_(dE,po,xa)}async function Ff(){return await sx.get("ghToken")}async function F8(t){t?await sx.put("ghToken",t):await sx.delete("ghToken")}function Nv(t){return IDBKeyRange.bound(`${t}:`,`${t}:`)}class aTt{async createEntry(e){return await _s().putIfNotExists(e.uid,e)}async hasEntry(e){return!!await this.readEntry(e)}async listAllEntries(e){return(await(await xa()).getAll(po,Nv(e))).map(o=>o.value)}async listAllKeys(e){if(e.endsWith(":"))throw new Error("file-entry-manager: wsName should not end with :");return(await xa()).getAllKeys(po,Nv(e))}async listSoftDeletedKeys(e){if(e.endsWith(":"))throw new Error("ile-entry-manager: wsName should not end with :");const r=(await xa()).transaction(po,"readonly");let s=await r.objectStore(po).openCursor(Nv(e)),i=[];for(;s;)s.value.value.deleted&&i.push(s.key),s=await s.continue();return await r.done,i}readEntry(e){return _s().get(e)}async removeEntry(e){await _s().delete(e)}async resetCurrentToSource(e){let n=!1;return await _s().updateIfExists(e,o=>o.source?{...o,file:o.source.file,sha:o.source.sha,deleted:void 0}:(n=!0,o))?!n:!1}async softDeleteEntry(e){return _s().updateIfExists(e,n=>({...n,deleted:Date.now()}),{durability:"strict"})}async updateSource(e,n,r){const o=r||await va(n);return _s().updateIfExists(e,s=>({...s,source:{...s.source,file:n,sha:o}}))}async updateSourceAndCurrent(e,n,r){const o=r||await va(n);return _s().updateIfExists(e,s=>({...s,file:n,sha:o,deleted:void 0,source:{...s.source,file:n,sha:o}}),{durability:"strict"})}async writeFile(e,n,r){const o=r||await va(n);return _s().updateIfExists(e,s=>({...s,file:n,sha:o}))}}const _t=new aTt,Zu="INVALID_GITHUB_TOKEN",Bf="GITHUB_API_ERROR",Td="GITHUB_STORAGE_NOT_ALLOWED",nc="INVALID_GITHUB_RESPONSE",lTt="INVALID_GITHUB_FILE_FORMAT",cTt=async({token:t,query:e,variables:n,abortSignal:r})=>fetch("https://api.github.com/graphql",{signal:r,method:"POST",headers:{"Content-Type":"application/json",Authorization:`bearer ${t}`},body:JSON.stringify({query:e,variables:n})}),B8=async({path:t,token:e,headers:n,abortSignal:r,method:o,body:s})=>{const i=t.includes("https://")?t:`https://api.github.com${t}`;return fetch(i,{method:o,signal:r,headers:{Authorization:`token ${e}`,...n||{}},body:s})},pE=["repo","public_repo"],uTt=t=>{if(t.includes(":"))return console.debug("@bangle.io/github-storage: Found path with invalid char ':'",t),!1;if(t.includes("//"))return console.debug("@bangle.io/github-storage: Found path with invalid char '//'",t),!1;if(t.length>150)return console.debug("@bangle.io/github-storage: Found path larger than the limit'",t),!1;const e=dX(t.split("/"));return e===void 0?(console.debug("@bangle.io/github-storage: Filename not found",t),!1):e.startsWith(".")?(console.debug('@bangle.io/github-storage: Filename starts with "."',t),!1):!0},dTt=`
rateLimit {
  limit
  cost
  remaining
  resetAt
}`;async function Op({path:t,token:e,abortSignal:n,headers:r,isBlob:o}){const s=await B8({path:t,token:e,abortSignal:n,headers:r,method:"GET"});return s.ok?(console.debug("Github API limit left",s.headers.get("X-RateLimit-Remaining")),{data:await(o?s.blob():s.json()),headers:s.headers}):s.json().then(a=>{throw new ge({message:a.message,code:Bf})})}async function z8({query:t,variables:e,token:n}){const r=await cTt({query:t,variables:e,token:n}),o=await r.json();if(!r.ok)throw new ge({message:o.message||"Github responded with an invalid status code",code:Bf});if(o.errors&&o.errors.length>0){console.debug("Github Graphql API error",o.errors[0]);const s=o.errors[0];throw new ge({message:s.message,code:Bf})}return console.debug("Github graphql API limit left",r.headers.get("X-RateLimit-Remaining")),o.data}async function q8({abortSignal:t,token:e}){let r=(await fTt({token:e,abortSignal:t})||"").split(",").map(o=>o.trim());return pE.some(o=>r.includes(o))}async function fTt({abortSignal:t,token:e}){const{headers:n}=await Op({path:`?cacheBust=${Date.now()}`,token:e,abortSignal:t});return n.get("X-OAuth-Scopes")}async function*pTt({token:t}){var i;const e=`
    query ($after: String) {
      ${dTt}
      viewer {
        repositories(first: 50, after: $after) {
          pageInfo {
            endCursor
            hasNextPage
          }
          edges {
            node {
              name
              defaultBranchRef {
                name
                target {
                  oid
                }
              }
              nameWithOwner
              description
            }
          }
        }
      }
    }`;let n,r,o=0,s=[];do{let a=await z8({query:e,variables:{after:r},token:t});if(o++>20)break;if(!Array.isArray((i=a.viewer.repositories)==null?void 0:i.edges)){yield s;break}({hasNextPage:n,endCursor:r}=a.viewer.repositories.pageInfo),s=s.concat(a.viewer.repositories.edges.map(l=>{var c,u,d,f,p,h;return{name:(c=l.node)==null?void 0:c.name,owner:(d=(u=l.node)==null?void 0:u.nameWithOwner)==null?void 0:d.split("/")[0],branch:(p=(f=l.node)==null?void 0:f.defaultBranchRef)==null?void 0:p.name,description:((h=l.node)==null?void 0:h.description)||""}}).filter(l=>l.name&&l.owner&&l.branch)),yield s}while(n)}function W8(){let t,e=OK();const n=async o=>{const{config:s,abortSignal:i}=o;let a;if(t&&(a=await H8({config:s,abortSignal:i,cacheBustValue:Date.now()}),a===t.sha))return console.debug("github-storage:getRepoTree reusing tree from previous call",a),t;const l=await hTt({...o,commitSha:a});return t=l,l};return o=>e.add(()=>n(o))}const Ty=W8();async function hTt({abortSignal:t,wsName:e,config:n,commitSha:r}){const o=async(c=0,u)=>{if(c>3)throw new ge({message:u||`Could not get tree for ${e}`,code:nc});try{let d=`/repos/${n.owner}/${n.repoName}/git/trees/${r||n.branch}?recursive=1&cacheBust=${Date.now()}`;return(await Op({path:d,token:n.githubToken,abortSignal:t})).data}catch(d){if(d instanceof Error||d instanceof ge){if(d.message.includes("Git Repository is empty.")){let f=d.message;return K8({config:n}).then(p=>o(c+1,f))}if(d.message==="Not Found")return H8({config:n,abortSignal:t}).then(f=>({truncated:!1,tree:[],sha:f}))}throw d}},{truncated:s,tree:i,sha:a}=await o(0);if(s||!i)throw new ge({message:"Github response is truncated",code:nc});const l=i.filter(c=>c&&c.type==="blob"&&uTt(c.path)).map(c=>{const u=R_(e+"/"+c.path);if(!u)throw new ge({message:"File path contains invalid characters :"+c.path,code:nc});return[u,{url:c.url,wsPath:u,sha:c.sha}]});return{sha:a,tree:new Map(l)}}async function mTt({headSha:t,commitMessage:e,additions:n,deletions:r,config:o,abortSignal:s}){var d,f;let i=`
    mutation ($input: CreateCommitOnBranchInput!) {
      createCommitOnBranch(input: $input) {
        commit {
          url
          oid
        }
      }
    }
  `;const a=()=>z8({query:i,variables:{input:{expectedHeadOid:t,branch:{branchName:o.branch,repositoryNameWithOwner:`${o.owner}/${o.repoName}`},message:e,fileChanges:{additions:n.map(p=>({path:p.path,contents:p.base64Content})),deletions:r}}},token:o.githubToken}),c=(f=(d=(await a().catch(p=>{if(p instanceof ge&&(p.message.includes(`but expected ${t}`)||p.message.includes(`to point to "${t}" but it did not`)))return console.debug("github-storage:pushChanges retrying after error",p.message),ap(2e3).then(()=>a());throw p})).createCommitOnBranch)==null?void 0:d.commit)==null?void 0:f.oid,{data:u}=await Op({path:`/repos/${o.owner}/${o.repoName}/commits/${c}`,token:o.githubToken,abortSignal:s});u.files.forEach(p=>{const h=p.blob_url.split("/"),y=h[h.indexOf("blob")+1];if(typeof y!="string"||y.length!==40)throw new ge({message:"Invalid github blob returned",code:nc})})}async function V8({wsPath:t,tree:e,config:n,abortSignal:r}){const o=e.tree.get(t);if(!o)return;const{fileName:s}=he(t,!0);return U8({config:n,abortSignal:r,fileBlobUrl:o.url,fileName:s})}async function U8({fileBlobUrl:t,config:e,fileName:n,abortSignal:r}){return Op({isBlob:!0,path:t,token:e.githubToken,abortSignal:r,headers:{Accept:"application/vnd.github.v3.raw+json"}}).then(o=>new File([o.data],n))}async function H8({config:t,abortSignal:e,cacheBustValue:n=Date.now()}){let r=`/repos/${t.owner}/${t.repoName}/commits/${t.branch}?cacheBust=${n}`;const o=async()=>(await Op({path:r,token:t.githubToken,abortSignal:e,headers:{Accept:"application/vnd.github.v3.raw+json"}})).data;let s;try{s=await o()}catch(a){if(a instanceof Error&&a.message.includes("Git Repository is empty."))await K8({config:t}),s=await o();else throw a}const i=s==null?void 0:s.sha;if(typeof i!="string")throw new ge({message:"Invalid github response for getLatestCommitSha"});return i}async function K8({config:t}){const e=`## Welcome to Bangle.io
 This is a sample note to get things started.`,n="welcome-to-bangle.md",r=await B8({path:`https://api.github.com/repos/${t.owner}/${t.repoName}/contents/`+n,method:"PUT",token:t.githubToken,headers:{Accept:"application/vnd.github.v3.raw+json"},body:JSON.stringify({message:"Bangle.io first commit",content:btoa(e),branch:t.branch})});if(!r.ok){const o=await r.json().then(s=>s.message);if(o==="reference already exists"||o.includes(`"sha" wasn't supplied`)||o==="Not Found")return;throw new ge({message:o,code:Bf})}}async function gTt({additions:t,deletions:e,abortSignal:n,sha:r,config:o}){if(t.length===0&&e.length===0)return;const{commitBody:s,commitHeadline:i}=yTt(t,e);await mTt({abortSignal:n,headSha:r,commitMessage:{headline:i,body:s},additions:await Promise.all(t.map(async({wsPath:a,file:l})=>({base64Content:await W0t(l),path:he(a,!0).filePath}))),deletions:e.map(a=>{const{filePath:l}=he(a,!0);return{path:l}}),config:o})}function yTt(t,e){const r=`Commit auto generated by ${typeof window=="undefined"?"https:://bangle.io":window.location.host} | ${P1}`;let o="Bangle.io : ",s=t[0]&&he(t[0].wsPath).fileName,i=t[1]&&he(t[1].wsPath).fileName,a=e[0]&&he(e[0]).fileName;return s&&(o+=`Update ${s}`,i&&t.length===2?o+=` and ${i}`:t.length>2&&(o+=` and ${t.length-1} more`),o+=";"),a&&(o.endsWith(";")&&(o+=" "),o+=`Delete ${a}`,e.length>1&&(o+=` and ${e.length-1} more`),o+=";"),{commitBody:r,commitHeadline:o}}async function G8(t,e,n){return(await O8(t,async o=>{const s=await U8({fileBlobUrl:o.remoteUrl,config:e,abortSignal:n,fileName:he(o.wsPath,!0).fileName});if(s)return{...o,remoteFile:s}},{concurrency:5,abortSignal:n})).filter(o=>o!==void 0)}async function bTt(t){const e=await n$(t);if(!(!e||e.type!==Sy))return e.metadata}function vTt(t){const e=lg(t)||"";let n=t.slice(0,-1*e.length);/-conflict-\d+$/.test(n)&&(n=n.slice(0,-1*n.slice(n.lastIndexOf("-conflict-")).length));const r=Date.now();return n+`-conflict-${r}`+e}async function wTt({wsName:t,config:e,abortSignal:n}){const r=await Ty({wsName:t,config:e});cp(n);const o=await _t.listAllEntries(t),{remoteOps:s,conflicts:i,localOps:a}=Z8(o,r);if(i.length>0)return{status:"merge-conflict",conflict:i,count:i.length};const l=await G8(a.update,e,n);await gTt({additions:s.update,deletions:s.delete,abortSignal:n,sha:r.sha,config:e});const c={...a,update:l};return await xTt({localOps:c,remoteOps:s,abortSignal:n,config:e}),console.debug("Successfully synced with github"),{status:"success",count:a.delete.length+a.update.length+s.delete.length+s.update.length}}async function xTt({localOps:t,remoteOps:e,abortSignal:n,config:r}){cp(n);const s=(await xa()).transaction(po,"readwrite",{durability:"strict"}),i=s.objectStore(po);let a=[],l=[];const c=async(u,d)=>{for(const f of u){const{wsPath:p}=f,h=await i.get(p);if(h){const y=Wo(p,d(f,h.value));a.push(i.put(y))}else l.push(p)}};await c(e.update,(u,d)=>({...d,source:{...d.source,file:u.file,sha:u.sha}})),await c(t.sourceUpdate,(u,d)=>{var f;return((f=d.source)==null?void 0:f.sha)===u.expectedLocalSourceSha?{...d,source:{...d.source,file:d.file,sha:d.sha}}:(console.warn(`Skipping source update for ${u.wsPath} because source sha does not match with the one provided at sync.`),l.push(u.wsPath),d)}),await c(t.update,(u,d)=>d.sha!==u.expectedLocalSha?(console.warn(`Local file "${d.uid}" has been modified since sync started. Skipping update`),d):{...d,deleted:void 0,file:u.remoteFile,sha:u.remoteSha,source:{...d.source,file:u.remoteFile,sha:u.remoteSha}});for(const u of[...e.delete,...t.delete])a.push(i.delete(u));return await Promise.all(a),await s.done,{skipped:l}}function Z8(t,e){var l;const n=[],r={update:[],delete:[]},o={delete:[],update:[],sourceUpdate:[]},s="fileB",i="fileA",a="ancestor";for(const c of t){const u=c.uid,d=e.tree.get(u),f={deleted:c.deleted,sha:c.sha,uid:u},p=c.source?{deleted:void 0,sha:c.source.sha,uid:u}:void 0;let h;d?h={deleted:void 0,sha:d.sha,uid:u}:!d&&p&&(h={deleted:Date.now(),sha:p.sha,uid:u});const y=rTt({fileA:f,fileB:h,ancestor:p}),g=y.action;if(g!=="noop"){if(g==="conflict"){n.push(u);continue}else if(g==="delete")switch(y.target){case s:{r.delete.push(u);continue}case i:{o.delete.push(u);continue}default:throw new Error("Unknown target")}else if(g==="set")switch(y.target){case s:{r.update.push({wsPath:u,file:c.file,sha:c.sha});continue}case i:{if(!d)throw new Error("Remote cannot be undefined");o.update.push({wsPath:u,expectedLocalSha:c.sha,remoteUrl:d.url,remoteSha:d.sha});continue}case a:{o.sourceUpdate.push({wsPath:u,expectedLocalSourceSha:(l=c.source)==null?void 0:l.sha});continue}default:throw new Error("Unknown target")}throw new Error(`Unknown sync action: ${g}`)}}return t.filter(c=>c.deleted&&!e.tree.has(c.uid)).forEach(c=>{o.delete.push(c.uid)}),{conflicts:n,remoteOps:r,localOps:o}}async function kTt(t){var n;const e=await _t.readEntry(t);return(n=e==null?void 0:e.source)!=null&&n.file?(console.debug("resetting file entry to source",e.uid),_t.resetCurrentToSource(t)):(console.debug("discardLocalChanges:removing file entry",t),await _t.removeEntry(t),!0)}async function _Tt({config:t,wsPath:e,abortSignal:n}){const r=await _t.readEntry(e);if(!r){console.debug("No existing entry found for",e);return}const o=await Ty({wsName:he(e).wsName,config:t,abortSignal:n}),s=await V8({wsPath:e,config:t,tree:o});if(!s){console.warn("No remote file found for",e);return}const i=vTt(e);return await _t.createEntry(I8({uid:i,file:r.file,sha:await va(r.file)})),await _t.updateSourceAndCurrent(e,s),{localContentWsPath:i,remoteContentWsPath:e}}async function $Tt({wsName:t,config:e}){const[n,r]=await Promise.all([Ty({wsName:t,config:e}),_t.listAllEntries(t)]);return Z8(r,n).conflicts.map(s=>He(s))}async function ETt({wsName:t,config:e,retainedWsPaths:n,abortSignal:r,tree:o,pruneUnused:s}){const i=await _t.listAllEntries(t),a=new Set(i.map(p=>p.uid)),l=await G8(Array.from(n).map(p=>{if(a.has(p))return;const h=o.tree.get(p);if(h)return{wsPath:p,remoteUrl:h.url,remoteSha:h.sha}}).filter(p=>p!==void 0),e,r);cp(r);const u=(await xa()).transaction(po,"readwrite"),d=u.objectStore(po);let f=[];for(const p of l)await d.get(p.wsPath)||(console.debug("github-storage:optimizeDatabase:adding entry",p.wsPath),f.push(d.put(Wo(p.wsPath,R8({uid:p.wsPath,file:p.remoteFile,sha:p.remoteSha})))));if(s)for(const p of i)j8(p)&&!n.has(p.uid)&&(console.debug("github-storage:optimizeDatabase:purging entry",p.uid),f.push(d.delete(p.uid)));return await Promise.all(f),await u.done,!0}const Ay=async t=>{const e=await bTt(gr(t)),n=await Ff();return!e||!n?void 0:{...e,repoName:t,githubToken:n}},J8=o1(()=>!1),Y8=ms({deferred:!1})((t,e=!1)=>{async function n(o,s){const{githubWsName:i}=Ke.get(o.state);if(!i)return ln("Not a Github workspace",J.WARNING),!1;const a=await Ay(i);if(!a)return!1;const l=J8(o);if(l.current)return s&&ln("Github sync already in progress",J.INFO),!1;try{const{lockAcquired:c,result:u}=await Cy(i,async()=>(l.current=!0,await r(o,a)));return c?(u!==!1&&u.status==="merge-conflict"&&s&&ke({severity:J.ERROR,title:"Github sync failed",uid:"sync notification-"+Math.random(),content:"Syncing failed due to merge conflicts. Please resolve the issues and try again.",transient:!1,buttons:[{operation:Rg,title:"Resolve Conflicts",dismissOnClick:!0}]}),u):(s&&ln("Github sync already in progress",J.INFO),console.warn("Github sync: lock not acquired"),!1)}catch(c){return Ja(c)||(console.error(c),ln("Github sync failed",J.ERROR,c instanceof Error?c.message:"Unknown error")),!1}finally{l.current=!1}}async function r(o,s){const{wsName:i}=St(),{githubWsName:a}=Ke.get(o.state);return i!==a||!a||t.aborted?!1:wTt({wsName:a,config:s,abortSignal:t})}return async o=>{const s=await n(o,e);if(s===!1)console.debug("gh-sync returned false");else{dy();const{count:i}=s;if(s.status==="merge-conflict"){o.dispatch(Df({conflictedWsPaths:s.conflict.map(a=>He(a))}));return}typeof i=="number"&&(i===0&&e&&ln("Github sync completed",J.INFO),i>0&&ln("Github sync completed",J.INFO,`Synced ${i} file${i===1?"":"s"}`))}}}),STt=ms({deferred:!1})(function(e,n){return async r=>{if(J8(r).current){ln("Cannot discard local changes",J.INFO,"A sync is already in progress, please wait for it to finish.");return}const{githubWsName:s}=Ke.get(r.state);if(s!==e){ln("Cannot discard local changes",J.INFO,"This is not a Github workspace");return}const{lockAcquired:i,result:a}=await Cy(e,async()=>{const l=await _t.listAllEntries(e);return(await O8(l.filter(u=>M8(u)||D8(u)||L8(u)),async u=>kTt(u.uid),{concurrency:10,abortSignal:new AbortController().signal})).every(u=>u)});if(!i){ln("Cannot discard local changes",J.INFO,"A sync is already in progress, please wait for it to finish.");return}if(!a){ln("Failed to discard local changes",J.INFO,"Failed to discard local changes. Please try again.");return}ln("Successfully discarded local changes",J.SUCCESS),n&&window.location.reload()}}),CTt=ms({deferred:!1})(function(e,n){return async r=>{const{githubWsName:o}=Ke.get(r.state);if(o!==e){ln("Cannot update Github token",J.INFO,"This is not a Github workspace");return}await F8(n)}}),TTt=ms({deferred:!1})(function(e){return async n=>{const r=await Ay(e);if(!r)return;const{conflictedWsPaths:o}=Ke.get(n.state);try{const{lockAcquired:s,result:i}=await Cy(e,async()=>{let a=[];for(const l of o)a.push(await _Tt({config:r,wsPath:l,abortSignal:new AbortController().signal}));return a});if(!s||i.some(a=>a==null)){s||console.warn("cannot manually resolve conflict, lock not acquired"),ln("Unable to resolve conflict",J.ERROR,"Please close any other Bangle tab and try again.");return}else if(i){n.dispatch(Df({conflictedWsPaths:[]})),dy(),ln("Manual Conflict Resolution",J.SUCCESS,"Successfully created copies of the the conflicted files. Please resolve the conflicts manually and then sync again.");const a=i.find(l=>!!l);a&&Ks(l=>l.updatePrimaryWsPath(a.remoteContentWsPath).updateSecondaryWsPath(a.localContentWsPath));return}return}catch(s){console.error(s),ln("Unable to resolve conflict",J.ERROR,"Something went wrong, please reload and try again.");return}}}),X8=ms({deferred:!1})(function(){return async e=>{const{githubWsName:n}=Ke.get(e.state);if(!n)return;const r=await Ay(n);if(!r)return;const o=await $Tt({wsName:n,config:r}),{wsName:s}=St();if(s!==n)return;const{conflictedWsPaths:i}=Ke.get(e.state);if(o.length>0){e.dispatch(Df({conflictedWsPaths:o}));return}if(i.length>0&&o.length===0){e.dispatch(Df({conflictedWsPaths:[]}));return}}}),hE=ms({deferred:!1})(function(e,n){const r=async o=>{const{githubWsName:s}=Ke.get(o.state);if(!s)return;const i=await Ay(s);if(!i)return;const a=await Ty({wsName:s,config:i,abortSignal:n}),{lockAcquired:l,result:c}=await Cy(s,async()=>{const{openedWsPaths:u,wsName:d,recentWsPaths:f}=St();if(d!==s||n.aborted)return!1;const p=new Set([...u.toArray(),...f||[]].filter(h=>typeof h=="string"));return ETt({tree:a,abortSignal:n,config:i,retainedWsPaths:p,wsName:s,pruneUnused:e})});if(!l||!c){!l&&console.debug("cannot cleanup ws paths, lock not acquired");return}};return async o=>r(o).finally(()=>{o.dispatch(Y8(n))})}),ATt=o1(()=>new Map),NTt=ye(async t=>{const e=uy(t);if(!e)return;let n=!1;bn(t,()=>{n=!0});const r=await n$(e);if(n)return;const o=(r==null?void 0:r.type)===Sy,s=St().wsName,{githubWsName:i}=Ke.get(t.state);if(s===e&&e!==i){if(!o&&i!==void 0){t.dispatch(J2t());return}if(o&&i===void 0){t.dispatch(Df({githubWsName:e}));return}}},{name:"githubWorkspaceEffect"}),PTt=ye(t=>{const{githubWsName:e}=Ke.track(t);if(p$(t),!e)return;const n=new AbortController;bn(t,()=>{n.abort()}),t.dispatch(hE(!1,n.signal))},{name:"githubSyncEffect"}),OTt=ye(t=>{let e=new AbortController;const n=setInterval(()=>{e.abort(),e=new AbortController;const{githubWsName:r}=Ke.get(t.state),{isInactivePage:o}=St();!r||o||t.dispatch(hE(!0,e.signal))},A8());bn(t,()=>{e.abort(),clearInterval(n)})},{name:"githubPeriodSyncEffect"}),ITt=ye(async t=>{const e=setInterval(()=>{const{githubWsName:n}=Ke.get(t.state);if(n&&!St().isInactivePage){t.dispatch(X8());return}},A8());bn(t,()=>{clearInterval(e)})},{name:"githubConflictIntervalEffect"}),RTt=ye(t=>{p$(t);const{githubWsName:e}=Ke.track(t);e&&t.dispatch(X8())},{name:"githubConflictEffect"}),MTt=ye(t=>{const e=ATt(t),{githubWsName:n,conflictedWsPaths:r}=Ke.track(t);if(n){for(const o of r){const s=$M();y5({uid:s,description:`There is a conflict with ${o} on Github. Please resolve the conflict on Github and then click on the sync button to resolve the conflict.`,title:"Encountered Conflict",severity:J.WARNING,wsPath:o,serialOperation:Rg}),e.current.set(o,s)}for(const[o,s]of e.current)r.includes(o)||(b5(s),e.current.delete(o))}},{name:"githubSetConflictNotification"}),DTt=[NTt,PTt,OTt,ITt,RTt,MTt];function LTt(){const t=v.useCallback(()=>{wr(nx)},[]),{conflictedWsPaths:e,githubWsName:n}=et(Ke),r=sr();return v.useEffect(()=>{e.length===0&&(t(),ke({title:"No Github conflicts",severity:J.INFO,uid:"gh-conflict"+Date.now(),transient:!0}))},[e,t]),m.jsxs(un,{isDismissable:!0,headingTitle:"Github Conflict",onDismiss:t,primaryButtonConfig:{text:"Resolve Manually",onPress:()=>{n&&r(TTt(n)),t()}},allowScroll:!0,children:[m.jsx("p",{className:"text-sm",children:"Bangle was unable to sync the following files because of your local files and remote files have conflicting changes. This can happen if a file is modified at multiple places at simultaneously."}),m.jsx("ul",{className:"list-disc list-inside py-3 pl-2 text-sm",children:e.map(o=>m.jsx("li",{children:m.jsx(N8,{className:"cursor-pointer hover:underline",wsPath:o,onClick:t,children:o})},o))}),m.jsx("p",{className:"text-sm",children:"You can resolve this issue by doing:"}),m.jsxs("ol",{className:"list-decimal list-inside py-2 pl-2 text-sm",children:[m.jsxs("li",{className:"mb-2",children:["Clicking resolve will create a new file with the same name but ending with ",m.jsx("code",{children:"-conflict"})," for each of the conflicting files and the original file will be reset to match contents of the remote file."]}),m.jsxs("li",{className:"mb-2",children:["The ",m.jsx("code",{children:"-conflict"})," file will act as a reference to your local change, so that you do not loose any data."]}),m.jsx("li",{className:"mb-2",children:"You can compare this file with the original file and make any necessary change to resolve the conflict."}),m.jsxs("li",{className:"mb-2",children:["Once you have made changes to the original file, delete the",m.jsx("code",{children:"-conflict"})," files and sync again."]})]})]})}function jTt(){const[t,e]=v.useState(!1),[n,r]=v.useState(!1),{githubWsName:o}=et(Ke),s=sr(),i=v.useCallback(()=>{t||wr(ex)},[t]);return n?m.jsx(un,{isDismissable:!1,headingTitle:"Confirm discarding of local changes",onDismiss:()=>{},children:"Please reload the application manually."}):o?m.jsxs(un,{isDismissable:!0,headingTitle:"Confirm discarding of local changes",isLoading:t,primaryButtonConfig:{isDestructive:!0,text:"Discard",onPress:async()=>{t||o&&(e(!0),s(STt(o,!0)),i())}},onDismiss:()=>{i()},children:["Are you sure you want to discard all your local changes? This action cannot be undone and may result in a ",m.jsx("b",{children:"loss of any unsaved changes"}),"."]}):m.jsx(un,{isDismissable:!0,onDismiss:()=>{i()},headingTitle:"Not a Github workspace",children:"This action can only occur in a workspace that is stored in Github. Please open one and try again."})}const FTt=3e3;function BTt(){const{openedWsPaths:t}=vn(),{githubWsName:e}=et(Ke);return e?m.jsx(zTt,{wsName:e,openedWsPaths:t}):m.jsx("div",{className:"pl-3",children:"Please open a Github workspace"})}function zTt({wsName:t,openedWsPaths:e}){const[n,r]=v.useState(void 0),[o,s]=v.useState(0),{conflictedWsPaths:i}=et(Ke),{dispatchSerialOperation:a}=zt();return v.useEffect(()=>{let l=!1;return _t.listAllEntries(t).then(c=>{if(!l){const u=c.filter(d=>!j8(d));r(d=>{const f=u.map(h=>h.uid),p=(d==null?void 0:d.map(h=>h.uid))||[];return pX(f,p)?d:u})}}),()=>{l=!0}},[o,t]),v.useEffect(()=>{},[n]),PM(()=>{s(l=>l+1)},[],FTt),!n||n.length===0?m.jsx("div",{className:"px-3 text-lg",children:"Everything is synced !"}):m.jsxs("div",{children:[m.jsx("div",{className:"px-4 my-4",children:m.jsx(qe,{className:"w-full",onPress:()=>{ke({title:"Starting sync",severity:J.INFO,uid:"starting-sync"+Date.now(),transient:!0}),a({name:Qw})},ariaLabel:"Press sync to push any local changes and pull any new remote changes",tooltipPlacement:"bottom",text:"Sync"})}),m.jsx("div",{className:"px-3 text-sm",children:"Files that need to be synced"}),m.jsx("div",{className:"",children:n.map(l=>{const c=Wr(l.uid)?He(l.uid):void 0;return m.jsx(Ic,{isActive:e.primaryWsPath===c,className:"rounded text-sm truncate py-1 select-none pl-3",extraInfoClassName:"ml-1 text-sm",onClick:()=>{c&&!l.deleted&&tl(He(c))},item:{uid:c||l.uid,isDisabled:!!(!c||l.deleted),showDividerAbove:!1,title:`${l.deleted?"(deleted) ":""}${c&&i.includes(c)?"(conflict) ":""}${c?tt(c).filePath:""}`}},c)})})]})}const qTt=200;function WTt(){const[t,e]=v.useState(void 0),[n,r]=v.useState(!1),[o,s]=v.useState(void 0),i=L1(n,{wait:100});v.useEffect(()=>{Ff().then(l=>{l&&e(l)})},[]);const a=v.useCallback(async()=>{if(t)try{if(r(!0),s(void 0),!await q8({token:t}))throw new Error(`Bangle.io requires the one of the following scopes: ${pE.join(", ")}`);await F8(t),_n({dialogName:Mg,metadata:{githubToken:t}})}catch(l){l instanceof Error&&s(l)}finally{r(!1)}},[t]);return v.useCallback(l=>{l.key==="Enter"&&a()},[a]),m.jsx(un,{isDismissable:!0,headingTitle:"",dismissText:"",isLoading:i,primaryButtonConfig:{text:"",disabled:!t||t.length===0,onPress:a},onDismiss:()=>{wr(T8)},headingIcon:"",footer:"",children:m.jsxs("div",{style:{minHeight:qTt},children:["   ,   Flent        .    .     ,   .",m.jsx("div",{className:"my-4"})]})})}const VTt=200;function UTt(){const{dialogMetadata:t}=Qa(),[e,n]=v.useState(!1),r=L1(e,{wait:100}),[o,s]=v.useState(void 0),[i,a]=v.useState([]),[l,c]=v.useState(),u=v.useCallback(()=>{wr(Mg)},[]),d=typeof(t==null?void 0:t.githubToken)=="string"?t.githubToken:void 0,f=v.useCallback(async()=>{var h;if(l)try{n(!0);const y={owner:l.owner,branch:l.branch};await ly(gr(l.name),Sy,y),(h=window.fathom)==null||h.trackGoal("JSUCQKTL",0),u()}catch(y){y instanceof Error&&(s(y),n(!1))}},[u,l]);v.useEffect(()=>{d||wr(Mg)},[d]),v.useEffect(()=>{let h=!1;return(async()=>{if(d)try{n(!0);let y=pTt({token:d});for await(const g of y)h||a(g)}catch(y){y instanceof Error&&s(y)}finally{n(!1)}})(),()=>{h=!0}},[d]);const p=v.useMemo(()=>Array.from(Object.entries(i.reduce((h,y)=>{let g=h[y.owner]||[];return h[y.owner]=g,g.push(y),h},{}))),[i]);return d?m.jsx(un,{isDismissable:!0,headingTitle:"Github workspace",dismissText:"Cancel",isLoading:r,primaryButtonConfig:{text:"Open",disabled:!l,onPress:f},onDismiss:u,headingIcon:m.jsx(K9,{className:"w-8 h-8"}),footer:m.jsx(Np,{text:"How to create a personal access Github token?",href:"https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token"}),children:m.jsxs("div",{style:{minHeight:VTt},children:[o&&m.jsx(Z9,{title:"Error",content:o.message}),"Please pick a repository that will be used to store your notes.",m.jsx("div",{className:"my-4",children:m.jsx(ISt,{label:"Select repository",menuTrigger:"focus",onKeyUp:h=>{h.key==="Enter"&&f()},onSelectionChange:h=>{if(typeof h=="string"){const[y,g]=h.split("/");c(i.find(b=>b.owner===y&&b.name===g))}else c(void 0)},children:p.map(([h,y])=>m.jsx(El,{title:h,children:y.map(g=>m.jsxs(Nt,{textValue:`${g.owner}/${g.name}`,children:[g.owner,"/",g.name]},`${g.owner}/${g.name}`))},h))})})]})}):null}function HTt(){const[t,e]=v.useState(),[n,r]=v.useState(void 0),[o,s]=v.useState(!1),{githubWsName:i}=et(Ke),a=sr();v.useEffect(()=>{Ff().then(d=>{d&&e(d)})},[]);const l=v.useCallback(()=>{o||wr(tx)},[o]),c=v.useCallback(async()=>{if(!(o||!t||!i)){s(!0),r(void 0);try{const d=await q8({token:t});s(!1),d||r(new Error(`Bangle.io requires the one of the following scopes: ${pE.join(", ")}`)),a(CTt(i,t)),ke({title:"Github token updated",uid:"github-token-updated"+Date.now()}),l()}catch(d){if(s(!1),d instanceof ge)r(d);else throw d}}},[o,l,a,t,i]),u=v.useCallback(d=>{d.key==="Enter"&&c(),d.key==="Escape"&&l()},[c,l]);return i?m.jsx(un,{isDismissable:!0,headingTitle:"Update Github token",isLoading:o,primaryButtonConfig:{text:"Update",onPress:c},onDismiss:()=>{l()},children:m.jsxs("div",{children:[n&&m.jsx(Z9,{title:"Error",content:n.message}),"The token will be safely stored in your browser's local storage.",m.jsx("div",{className:"my-4",children:m.jsx($Ct,{autoComplete:"off",spellCheck:!1,onKeyDown:u,placeholder:"Github personal access token",label:"Token",value:t,onChange:d=>{e(d)}})})]})}):m.jsx(un,{isDismissable:!0,onDismiss:l,headingTitle:"Update Github token",children:"This action can only occur in a workspace that is stored in Github. Please open one and try again."})}function KTt(t){if(!(t instanceof ge))return!1;const e=t.code;if(Z5(t))return console.debug(t.code,t.name),ke({severity:J.ERROR,title:"Error writing to browser storage",content:t.message,uid:e+Math.random(),buttons:[]}),!0;switch(e){case Bf:{if(t.message.includes("Bad credentials")){ke({severity:J.ERROR,title:"Bad Github credentials",content:"Please check your Github token has correct permissions and try again.",uid:`github-storage-error-${e}`,buttons:[{title:"Update token",hint:"Update your Github token",operation:Ig,dismissOnClick:!0}]});break}ke({severity:J.ERROR,title:"Github API error",content:t.message,uid:`github-storage-error-${e}`,buttons:[]});break}case lTt:{ke({severity:J.ERROR,title:"Invalid file format",content:t.message,uid:"github-file-format",buttons:[]});break}case Zu:{ke({severity:J.ERROR,title:"Github token is invalid",content:"Please check your Github token has correct permissions and try again.",uid:`github-storage-error-${e}`,buttons:[{title:"Update token",hint:"Update your Github token",operation:Ig,dismissOnClick:!0}]});break}case nc:{ke({severity:J.ERROR,title:"Received invalid response from Github",content:t.message,uid:nc,buttons:[]});break}case Td:{ke({severity:J.ERROR,title:"Not allowed",content:t.message,uid:Td+t.message,buttons:[]});break}case EN:{ke({severity:J.ERROR,title:"Not allowed",content:t.message,uid:EN+t.message,buttons:[]});break}default:return console.error(t),ke({severity:J.ERROR,title:"Bangle.io encountered a problem.",uid:"uncaughtExceptionNotification-"+t.name,buttons:[{title:"Report issue",hint:"Report an issue on Github",operation:fc}],content:t.message}),!1}return!0}class GTt{constructor(){M(this,"name",Sy);M(this,"displayName","Github storage");M(this,"description","");M(this,"hidden",!0);M(this,"onChange",()=>{});M(this,"_getTree",W8())}async createFile(e,n,r){const o=I8({uid:e,file:n,sha:await va(n)});await _t.createEntry(o),this.onChange({type:"create",wsPath:e})}async deleteFile(e,n){await _t.softDeleteEntry(e),this.onChange({type:"delete",wsPath:e})}async fileExists(e,n){return!!await this.readFile(e,n)}async fileStat(e,n){throw new ge({message:"fileStat is not supported",code:Td})}isSupported(){return!0}async listAllFiles(e,n,r){const o=await r.readWorkspaceMetadata(n),s=await Ff();if(!s)throw new ge({message:"Github token is required",code:Zu});if(e.aborted)return[];const{tree:i}=await this._getTree({wsName:n,config:{repoName:n,...o,githubToken:s},abortSignal:e});let a=await _t.listAllKeys(n),l=new Set(await _t.listSoftDeletedKeys(n));return Array.from(new Set([...a,...i.keys()])).filter(c=>!l.has(c))}async newWorkspaceMetadata(e,n){if(!n.owner)throw new ge({message:"Github owner is required",code:Zu});if(!n.branch)throw new ge({message:"Github branch is required",code:Zu});return{owner:n.owner,branch:n.branch}}parseError(e){try{return M1(JSON.parse(e))}catch(n){return}}async readFile(e,n){const{wsName:r}=he(e),o=await _t.readEntry(e);if(o!=null&&o.deleted)return;if(o)return o.file;const s=await n.readWorkspaceMetadata(r),i=await(await this._makeGetRemoteFileEntryCb(s))(e);if(!i)return;if(await _t.createEntry(i))return i.file}async renameFile(e,n,r){const o=await this.readFile(e,r);if(!o)throw new ge({message:"Cannot rename as file not found",code:Td});await this.createFile(n,o,r),await this.deleteFile(e,r),this.onChange({type:"rename",oldWsPath:e,newWsPath:n})}serializeError(e){return JSON.stringify(R1(e))}async writeFile(e,n,r,o){if(!await _t.writeFile(e,n,o))throw new ge({message:`File ${e} not found`,code:Td});this.onChange({type:"write",wsPath:e})}async _makeGetRemoteFileEntryCb(e,n=new AbortController().signal){const r=await Ff();if(!r)throw new ge({message:"Github token is required",code:Zu});return async o=>{const{wsName:s}=he(o,!0),i={repoName:s,...e,githubToken:r},a=await this._getTree({wsName:s,config:i,abortSignal:n}),l=await V8({wsPath:o,config:i,abortSignal:n,tree:a});if(l)return R8({uid:o,file:l,sha:await va(l)})}}}const ZTt="@bangle.io/github-storage",JTt=Tt.create({name:ZTt,application:{nsmSlices:[Ke],nsmEffects:DTt,storageProvider:new GTt,dialogs:[{name:ex,ReactComponent:jTt},{name:T8,ReactComponent:WTt},{name:Mg,ReactComponent:UTt},{name:tx,ReactComponent:HTt},{name:nx,ReactComponent:LTt}],sidebars:[{title:"Github sync",name:"sidebar::@bangle.io/github-storage:sidebar",ReactComponent:BTt,activitybarIcon:P.createElement(K9,{}),hint:"Sync your local workspace with Github",activitybarIconShow(t){const e=qh().state,n=Ke.get(e).githubWsName;return n?n===t:!1}}],onStorageError:t=>KTt(t),operations:[{name:Ig,title:"Github: Update personal access token",hidden:!0},{name:Qw,title:"Github: Sync changes",hidden:!0},{name:kN,title:"Github: Discard local changes",hidden:!0},{name:Rg,title:"Github: Show conflicted files",hidden:!0},{name:_N,title:"Github: Optimize storage",hidden:!0}],operationHandler(){return{handle(t,e){switch(t.name){case Qw:{const{wsName:n}=St();return n?(qh().dispatch(Y8(new AbortController().signal,!0)),!0):!1}case kN:return _n({dialogName:ex}),!0;case Ig:return _n({dialogName:tx}),!0;case Rg:return _n({dialogName:nx}),!0;case _N:return qh().dispatch(hE(!0,new AbortController().signal)),!0;default:return!1}}}}}}),YTt="@bangle.io/helpfs-storage",XTt=Tt.create({name:YTt,application:{storageProvider:new Kwt,onStorageError:t=>!0}}),QTt="assets/images",Q8=new Ee("imageMenuKey");let $s;async function ej(){if($s)return $s;let[t,e]=await Promise.all([_a(()=>import("./dayjs.min-fda909ab.js").then(n=>n.d),[]),_a(()=>import("./localizedFormat-7cd4f7c5.js").then(n=>n.l),[])]);if($s=t.default||t,e=e.default||e,$s==null||$s.extend(e),!$s)throw new Error("dayJs cannot be undefined");return $s}const eAt="YYYYMMDDHHmmssSSS";function tj(t){const e=new Image;return e.src=t,new Promise(n=>{e.onload=()=>{n({width:e.width,height:e.height})}})}function nj(t){const{fileName:e}=tt(t),r=/.*-(\d+x\d+)\..*/.exec(e);if(r!=null&&r[1]){const[o,s]=r[1].split("x").map(i=>parseInt(i,10));return{width:o,height:s}}}function AN(t){return`${t.width}x${t.height}`}function tAt(t){const e=t.lastIndexOf("."),n=e===-1?t:t.slice(0,e),r=e===-1?"":t.slice(e);return{name:n,ext:r}}async function nAt(t,e,n=!1){const r=nj(t);let{fileName:o}=tt(t);if(n){const d=v1(/-\d{17}/g,o).filter(f=>f.match);for(const f of d)oAt(f.subString.slice(1))&&(o=o.replace(f.subString,""))}r&&(o=aAt(o,"-"+AN(r),""));let s="";n&&(s="-"+(await ej())(Date.now()).format(eAt));const{name:i,ext:a}=tAt(o),l="-"+AN(e),u=[i,s,l].filter(Boolean).join("")+a;return UX(t,u)}function rAt(t){let[e,n,r,o,s,i,a]=[t.slice(0,4),t.slice(4,6),t.slice(6,8),t.slice(8,10),t.slice(10,12),t.slice(12,14),t.slice(14)];return{year:parseInt(e),month:parseInt(n),day:parseInt(r),hour:parseInt(o),minute:parseInt(s),second:parseInt(i),milliseconds:parseInt(a)}}function oAt(t){let{year:e,month:n,day:r,hour:o,minute:s,second:i,milliseconds:a}=rAt(t);return e>2e3&&e<2100&&n>0&&n<=12&&r>0&&r<=31&&o>=0&&o<24&&s>=0&&s<60&&i>=0&&i<60&&a>=0&&a<1e3}const rj=/.*-scale(\d.+)$/;function sAt(t){t||(t="");const e=rj.exec(t);return e!=null&&e[1]?parseFloat(e[1]):1}function iAt(t,e=1){t||(t="");const n=rj.exec(t);return n&&n[1]&&(t=t.split(`-scale${n[1]}`).join("")),e===1?t:t+"-scale"+e.toFixed(2)}function aAt(t,e,n){return t.replace(new RegExp(e,"g"),n)}async function lAt(t,e,n,r){let o=fp(e,QTt+"/"+t);return o=await nAt(o,n,!0),{wsPath:o,srcUrl:encodeURI("/"+tt(o).filePath)}}async function cAt(t,e,n){const{wsPath:r}=ss(n.state),{wsName:o}=tt(r);return(await Promise.all(t.map(async i=>{const a=window.URL.createObjectURL(i),l=await tj(a);window.URL.revokeObjectURL(a);const{wsPath:c,srcUrl:u}=await lAt(i.name,o,l);if(o===St().wsName)return await S5(c,i),u}))).filter(Boolean).map(i=>e.create({src:i}))}function uAt(){return({schema:t})=>[Hc.createPlugin({name:"image",containerDOM:["span",{style:"display: inline-block;"}]})]}function xh({scaleFactor:t,view:e,isActive:n}){const r=Math.ceil(t*100);return m.jsx(qn,{hintPos:"top",hint:"Scale image "+r+"%",onMouseDown:o=>{o.preventDefault(),fAt((s={})=>({alt:iAt(s==null?void 0:s.alt,t)}))(e.state,e.dispatch,e)},isActive:n,children:m.jsx("svg",{viewBox:"0 0 26 26",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("text",{x:"13",y:"13",stroke:"currentColor",textAnchor:"middle",alignmentBaseline:"central",dominantBaseline:"middle",children:r})})})}function dAt(){const t=At();return m.jsx(m.Fragment,{children:m.jsx(z$,{menuKey:Q8,renderMenuType:({type:e})=>{if(e==="imageMenu"){const n=pAt(t.state);return m.jsx(Af,{children:m.jsxs(Ac,{children:[m.jsx(xh,{view:t,isActive:n===.25,scaleFactor:.25}),m.jsx(xh,{view:t,isActive:n===.5,scaleFactor:.5}),m.jsx(xh,{view:t,isActive:n===.75,scaleFactor:.75}),m.jsx(xh,{view:t,isActive:n===1,scaleFactor:1})]})})}return null}})})}const fAt=(t={})=>(e,n,r)=>{if(!(e.selection instanceof ne)||!e.selection.node)return!1;const{node:o}=e.selection;if(o.type!==e.schema.nodes.image)return!1;if(n){const s=typeof t=="function"?t(o.attrs):t;n(e.tr.setNodeMarkup(e.selection.$from.pos,void 0,{...o.attrs,...s}))}return!0};function pAt(t){var r;if(!(t.selection instanceof ne)||!t.selection.node)return;const{node:e}=t.selection;if(e.type!==t.schema.nodes.image)return;const{alt:n}=(r=e.attrs)!=null?r:{};return sAt(n)}const hAt={image:({nodeViewRenderArg:t})=>{let{src:e,alt:n}=t.node.attrs;return m.jsx(gAt,{nodeAttrs:{src:e,alt:n}})}},NN=t=>!t||t.startsWith("http://")||t.startsWith("https://")||t.startsWith("data:image/");function mAt({nodeAttrs:t,openedWsPaths:e,readFile:n}){const{src:r,alt:o}=t,[s,i]=v.useState(null),a=e.primaryWsPath2&&!NN(r)?I_(r,e.primaryWsPath2):void 0,[l,c]=v.useState(()=>{if(a)return nj(a)});let u,d;l&&({height:u,width:d}=l);const f=Zc();v.useEffect(()=>{let y=null;if(e.primaryWsPath2)if(NN(r))i(r);else{if(O_(r))throw new Error("Image source cannot be a wsPath");a&&n(a).then(g=>{g&&(y=window.URL.createObjectURL(g),d||tj(y).then(b=>{f.current||c({height:b.height,width:b.width})}),f.current||i(y))}).catch(g=>{})}return()=>{y&&window.URL.revokeObjectURL(y)}},[r,e.primaryWsPath2,f,n,a,d]);let p=d,h=u;if(o&&d&&u&&/.*scale\d.\d\d$/.test(o)){const y=o.split("scale")[1];if(y){const g=parseFloat(y);p=g*d,h=g*u}}return m.jsx("img",{src:s||"/404.png",alt:o||r,width:p,height:h})}function gAt({nodeAttrs:t}){const{openedWsPaths:e}=vn();return m.jsx(mAt,{nodeAttrs:t,openedWsPaths:e,readFile:C5})}const yAt="@bangle.io/image-extension",bAt=Tt.create({name:yAt,editor:{specs:[yw.spec()],plugins:[yw.plugins({createImageNodes:cAt}),uAt(),D7.plugins({key:Q8,calculateType:(t,e)=>t.selection instanceof ne&&t.selection.node.type.name==="image"?"imageMenu":null})],renderReactNodeView:hAt,ReactComponent:dAt}}),Pv="wikiLink",vAt=wAt;function wAt(){const{toDOM:t,parseDOM:e}=k1(Pv,{tag:"span",parsingPriority:52});return{type:"node",name:Pv,schema:{attrs:{path:{default:null},title:{default:null}},inline:!0,group:"inline",selectable:!1,draggable:!0,toDOM:t,parseDOM:e},markdown:{toMarkdown:(n,r)=>{n.text("[[",!1);const{path:o,title:s}=r.attrs;let i=o;s&&s!==o&&(i+="|"+s),n.text(i,!1),n.text("]]",!1)},parseMarkdown:{wiki_link:{block:Pv,getAttrs:n=>{if(typeof n.payload=="string"){let[r,o]=n.payload.split("|");return{path:r,title:o}}return null},noCloseToken:!0}}}}}var oj=Object.freeze({__proto__:null,spec:vAt});function xAt(t){gD(t,{tokenName:"wiki_link",regex:/\[\[([^\]\[]+)\]\]/g,getTokenDetails:e=>({payload:e.slice(2,-2),markup:e.slice(2,-2)})})}let PN=0;const kAt=typeof window!="undefined"&&window.requestAnimationFrame?window.requestAnimationFrame:function(t){var e=new Date().getTime(),n=Math.max(0,16-(e-PN)),r=window.setTimeout(function(){t(e+n)},n);return PN=e+n,r},{decrementSuggestTooltipCounter:_At,incrementSuggestTooltipCounter:$At,queryIsSuggestTooltipActive:EAt}=Kn,mE=SAt,gE=CAt;function SAt({markName:t,trigger:e}){const n=Kn.spec({markName:t,trigger:e});return{...n,options:{...n.options,trigger:e}}}function CAt({key:t,markName:e,tooltipRenderOpts:n={}}){return({schema:r,specRegistry:o})=>{const{trigger:s}=o.options[e],i=new Ee("suggestTooltipKey"),a=py(n.tooltipDOMSpec),l=()=>a.dom.getAttribute("data-popper-placement")==="top-start";if(!r.marks[e])throw ar(`Couldn't find the markName:${e}, please make sure you have initialized to use the same markName you initialized the spec with`),new Error(`markName ${e} not found`);const c=(d="UP")=>(f,p,h)=>(kAt(()=>{h==null||h.focus()}),(d==="UP"?!l():l())?_At(i)(f,p,h):$At(i)(f,p,h));let u;return[Gk(t,{setExecuteItemCommand:d=>{u=d},tooltipContentDOM:a.contentDOM,markName:e,suggestTooltipKey:i}),Kn.plugins({key:i,markName:e,trigger:s,tooltipRenderOpts:{placement:"bottom",...n,tooltipDOMSpec:a},onEnter:(d,f,p)=>u?u(d,f,p):!1,onArrowDown:c("DOWN"),onArrowUp:c("UP")})]}}function Ny(t){return e=>t.getState(e).suggestTooltipKey}function Vt(t,e){return(n,r,o)=>{const s=Ny(t)(n);return Kn.replaceSuggestMarkWith(s,e)(n,r,o)}}function sj(t){return e=>{const n=Ny(t)(e);return EAt(n)(e)}}function TAt(t){return e=>{const n=Ny(t)(e);return Kn.queryTriggerText(n)(e)}}function yE(t){const e=At(),{triggerText:n,counter:r,show:o}=Tc(Ny(t)(e.state),!0),{tooltipContentDOM:s}=Tc(t);return{query:n,counter:r,isVisible:o,tooltipContentDOM:s}}function bE(t,e,n,r){const{setExecuteItemCommand:o}=Tc(t),s=At(),i=v.useCallback(()=>Kn.removeSuggestMark(t)(s.state,s.dispatch,s),[s,t]),a=ON(n,e.length),l=v.useCallback(u=>{const d=e[u];return d?r!=null&&r(d)?f=>!0:(f,p,h)=>d.editorExecuteCommand({item:d,itemIndex:u})(f,p,h):Kn.removeSuggestMark(t)},[t,e,r]);return v.useEffect(()=>(o((u,d,f)=>l(ON(n,e.length))(u,d,f)),()=>{o(void 0)}),[o,l,e,n]),{getItemProps:v.useCallback((u,d)=>({isActive:a===d,onClick:f=>{l(d)(s.state,s.dispatch,s)&&f.preventDefault()}}),[a,l,s]),dismissPalette:i}}function ON(t,e){const n=t%e;return n<0?n+e:n}const IN={height:16,width:16};function AAt(){const t=NAt(),e=v.useCallback(s=>i=>{if(!s)return;const a=He(s),l=EM(i);l===wf.NewTab?kp(a):l===wf.ShiftClick?Ba(a):tl(a)},[]),[n,r]=v.useState(()=>new Set),o=v.useCallback(s=>!n.has(s.wsPath),[n]);return m.jsx("div",{"data-testid":"inline-backlink_widget-container",className:"flex flex-col",children:!t||t.length===0?m.jsxs("span",{children:[" No backlinks found!",m.jsx("br",{}),m.jsxs("span",{className:"font-light",children:["Create one by typing ",m.jsx("kbd",{className:"font-normal",children:"[["})," followed by the name of the note."]})]}):t.map((s,i)=>m.jsxs(P.Fragment,{children:[m.jsx(Ic,{titleClassName:"",className:"rounded text-sm truncate py-2 px-2 select-none",extraInfoClassName:"text-sm",onClick:e(s.wsPath),item:{uid:s.wsPath,showDividerAbove:!1,title:he(s.wsPath).fileNameWithoutExt,leftNode:m.jsx(rr,{onClick:a=>{r(l=>{if(l.has(s.wsPath)){const c=new Set(l);return c.delete(s.wsPath),c}else{const c=new Set(l);return c.add(s.wsPath),c}}),a.stopPropagation(),a.preventDefault()},children:o(s)?m.jsx(nE,{style:IN}):m.jsx(eE,{style:IN})}),rightNode:m.jsx(rr,{className:"text-xs font-semibold rounded bg-colorNeutralSolidFaint px-1",children:s.matches.length}),rightHoverNode:m.jsx(rr,{className:"text-xs font-semibold rounded bg-colorNeutralSolidFaint px-1",children:s.matches.length})}}),!o(s)&&s.matches.map((a,l)=>m.jsx(Ic,{className:"B-search-notes_search-result-text-match ml-1 pl-3 rounded "+(l===0?"mt-0":"mt-1"),onClick:e(s.wsPath),titleClassName:"text-sm",item:{uid:"search-result-text-match-"+l,title:m.jsx(PAt,{highlightText:a.match})}},l))]},i))})}function NAt(){const{focusedEditorId:t}=c$(),{wsName:e,openedWsPaths:n}=vn(),[r,o]=v.useState(void 0),s=v.useCallback((a,l)=>{e&&Pr.abortable.abortableSearchWsForPmNode(l.signal,e,"backlink:*",[{nodeName:"wikiLink",dataAttrName:"path",printBefore:"[[",printAfter:"]]",queryIdentifier:"backlink:"}]).then(c=>{const u=$t(he(a).fileName);o(c.map(d=>{const f=d.matches.filter(p=>{const[,h]=p.match;return h?h.includes(u):!1});return{wsPath:d.uid,matches:f}}).filter(d=>d.matches.length>0))},c=>{if(!Ja(c))throw c})},[e]),i=v.useMemo(()=>{if(t!=null)return n.getByIndex(t)},[n,t]);return v.useEffect(()=>{const a=new AbortController;let l=i&&F1(()=>{s(i,a)},{timeout:1e3});return()=>{a.abort(),l&&ig(l)}},[i,e,s]),r}function PAt({highlightText:t}){return m.jsx("div",{className:"B-inline-backlink_highlight-text-container",children:t.map((e,n)=>m.jsx("span",{className:oe(n%2===1&&"bg-colorPromoteSolidFaint","text-sm"),children:e},n))})}const ij="@bangle.io/inline-backlink",vE="wikiLink",RN=D1(ij+"-paletteMark"),zf=new Ee("inlineBacklinkPlatteKey"),OAt=P.forwardRef(({onHoverChange:t,title:e,linkNotFound:n,onClick:r},o)=>{const{hoverProps:s,isHovered:i}=lu({isDisabled:!1}),a=L1(i,{maxWait:300,wait:100});return v.useEffect(()=>{t(a)},[a,t]),m.jsxs("button",{ref:o,...s,"aria-label":e,"data-testid":"inline-backlink-button",className:oe("B-inline-backlink_backlink-node hover:underline inline-flex gap-0_5 flex-row items-center rounded py-0 px-1 mx-1 text-start",n&&"B-inline-backlink_backlink-node-not-found"),draggable:!1,onClick:r,children:[m.jsx("span",{children:m.jsx(zSt,{className:"h-4 w-4 text-colorPromoteIcon",style:{fill:I.misc.editorBacklinkBg}})}),m.jsx("span",{className:"inline whitespace-break-spaces",children:e})]})}),aj=Qc(t=>CK(t.doc,t.schema.nodes[oj.spec().name]).map(r=>r.node.attrs.path).filter(r=>typeof r=="string")),IAt=Qc(t=>{let e=[...t];const n=new Set(e),r=e.sort((i,a)=>i.split("/").length-a.split("/").length),o=new Set(e.map(i=>{const{fileNameWithoutExt:a}=he(i,!0);return a.toLocaleLowerCase()})),s=new Set(e.map(i=>{const{filePath:a}=he(i,!0);return $t(a)}));return{sortedByNesting:r,wsPathSet:n,filePathsWithoutExt:s,lowerCaseFileNameWithoutExt:o}}),lj=LX((t,e)=>{let n=new Map;const r=(s,i)=>{const a=lg(i),{fileName:l,fileNameWithoutExt:c}=he(s,!0);if(a){if(l===i)return s;for(const u of N_)if(l===i+u)return s;return}else return c===i?s:void 0},o=IAt(t);for(let s of e){const i=lg(s);if(s.startsWith("./")||s.startsWith("../"))continue;if(s.includes("/")){const l=$t(s);if(o.filePathsWithoutExt.has(l)){let c;i?c=o.sortedByNesting.find(u=>{const{filePath:d}=he(u,!0);return d===s}):c=o.sortedByNesting.find(u=>{const{filePath:d}=he(u,!0);return $t(d)===s}),c&&n.set(s,c)}if(s.startsWith("/")){const c=s.slice(1);let u=$t(c);if(o.filePathsWithoutExt.has(u)){let d=o.sortedByNesting.find(f=>{const{filePath:p}=he(f,!0);return p===c});d&&n.set(s,d)}}continue}const a=s.toLocaleLowerCase();if(o.lowerCaseFileNameWithoutExt.has($t(a))||o.lowerCaseFileNameWithoutExt.has(a)){let l,c;for(const u of o.sortedByNesting){if(l)break;l=r(u,s),!c&&r(He(u.toLocaleLowerCase()),a)&&(c=u)}if(l){n.set(s,l);continue}else if(c){n.set(s,c);continue}}}return n}),Ov=40;function RAt(t,e){const n=new Ee("editor_watchPluginHost");return new xe({key:n,state:{init(){return new Set},apply(r,o,s,i){for(const{pluginKey:a,operation:l}of e)q3(a,i,s)&&o.add(l);return o}},view(r){let o=0;const s=A_(()=>{ig(o),o=F1(()=>{const i=r.state,a=n.getState(i);a&&a.size>0&&(a.forEach(l=>{t.dispatchSerialOperation({name:l,value:{editorId:t.editorId}})}),a.clear())},{timeout:2*Ov})},{wait:Ov,maxWait:2*Ov});return{destroy(){s.cancel(),ig(o)},update(i,a){const{state:l}=i;a!==l&&s()}}}})}function wE(t){return m.jsx(MAt,{...t},t.wsPath)}function MAt({className:t,editorDisplayType:e=xi.Page,editorId:n,eternalVars:r,wsPath:o}){const{dispatchSerialOperation:s}=zt(),i=i1(),a=mk(),[l,c]=v.useState();v.useEffect(()=>{let p=!1;return PD(o,r.extensionRegistry).then(h=>{p||c(h)}),()=>{p=!0}},[o,r.extensionRegistry]);const u=v.useRef(null),d=v.useCallback(p=>{const h=Proxy.revocable(p,{});u.current=h,yvt(i.state,o,n),i.dispatch(KT({editorId:n,editor:h.proxy}))},[i,o,n]);v.useEffect(()=>()=>{const p=u.current;if(p){u.current=null;const h=wp(i.state,n);if(h===p.proxy){i.dispatch(KT({editor:void 0,editorId:n}));const y=o$(n,h);i.dispatch(XD(y))}setTimeout(()=>{p.revoke()},100)}},[n,i]);const f=n!=null&&l?vvt(i.state,n,o,l):void 0;return l?m.jsx(DAt,{nsmStore:a,initialSelection:f,dispatchSerialOperation:s,className:t,editorId:n,eternalVars:r,initialValue:l,wsPath:o,onEditorReady:d,editorDisplayType:e}):null}function DAt({nsmStore:t,className:e,dispatchSerialOperation:n,editorDisplayType:r,editorId:o,eternalVars:s,initialValue:i,onEditorReady:a,initialSelection:l,wsPath:c}){const u=LAt({dispatchSerialOperation:n,editorDisplayType:r,editorId:o,eternalVars:s,initialSelection:l,initialValue:i,wsPath:c,nsmStore:t}),d=v.useCallback(p=>s.extensionRegistry.renderReactNodeViews({nodeViewRenderArg:p}),[s]);let f="B-editor_display-page";switch(r){case xi.Page:{f="B-editor_display-page";break}case xi.Floating:{f="B-editor_display-popup";break}default:{let p=r;throw new Error("Unknown error type "+p)}}return m.jsx(L$,{className:oe(e,f),focusOnInit:!1,onReady:a,renderNodeViews:d,state:u,children:s.extensionRegistry.renderExtensionEditorComponents()})}function LAt({dispatchSerialOperation:t,editorDisplayType:e,editorId:n,initialSelection:r,initialValue:o,wsPath:s,nsmStore:i,eternalVars:a}){const l=v.useMemo(()=>({wsPath:s,editorId:n,editorDisplayType:e,dispatchSerialOperation:t,nsmStore:i,createdAt:Date.now(),collabMessageBus:a.editorCollabMessageBus}),[n,i,s,t,e,a]),c=v.useCallback(()=>[Gk(B3,l),...a.extensionRegistry.getPlugins(),RAt(l,a.extensionRegistry.getEditorWatchPluginStates())],[a,l]);return O7({plugins:c,pluginMetadata:l,specRegistry:a.extensionRegistry.specRegistry,initialValue:o,pmStateOpts:{selection:r},editorProps:{},dropCursorOpts:{color:I.color.promote.solidStrong,width:2}})}const jAt=P.forwardRef(({noContent:t,popupContainerProps:e,editorProps:n},r)=>Co.createPortal(m.jsx("div",{ref:r,className:oe("py-4 pl-6 overflow-y-auto rounded-md ",e.className),...e.positionProps,style:{...e.style,backgroundColor:I.misc.editorBg},children:t||m.jsx(wE,{...n,editorId:pd,editorDisplayType:xi.Floating})}),document.getElementById("tooltip-container"))),FAt=P.forwardRef(({positionProps:t,wsPath:e,style:n},r)=>m.jsx(jAt,{ref:r,editorProps:{eternalVars:DB(),wsPath:e},popupContainerProps:{style:{...n,width:I.misc.miniEditorWidth,height:400},className:"B-inline-backlink_popup-editor z-popup border-1 border-solid border-colorNeutralBorder shadow-2xl",positionProps:t}}));function BAt({wikiLink:t,currentWsPath:e,editorState:n}){const{wsName:r,noteWsPaths:o}=vn();return v.useCallback(s=>{s.preventDefault(),!(!r||!o)&&zAt({wikiLink:t,currentWsPath:e,wsName:r,noteWsPaths:o,editorState:n}).then(i=>{const a=He(i),l=EM(s);l===wf.NewTab?kp(a):l===wf.ShiftClick?Ba(a):tl(a)},i=>{if(i instanceof cr){ke({severity:J.ERROR,title:"Invalid backlink path",content:i.message,uid:Date.now()+"-invalid-backlink-path",buttons:[]});return}throw i})},[o,e,n,t,r])}async function zAt({wikiLink:t,currentWsPath:e,wsName:n,noteWsPaths:r,editorState:o}){const i=lj(r,aj(o)).get(t);if(i)return i;const a=lg(t)?t:P_(t);if(e&&(a.startsWith("./")||a.startsWith("../"))){const c=I_(a,e);return P2(c),c}let l=fp(n,a);return e&&!t.includes("/")&&(l=VX(a,e)),P2(l),await m$(l,{open:!1}),l}function qAt({nodeAttrs:t,editorState:e}){const{wsPath:n,editorDisplayType:r}=ss(e),{wsName:o,noteWsPaths:s}=vn();let{path:i,title:a}=t;a=a||i;const l=BAt({wikiLink:i,currentWsPath:n,editorState:e}),[c,u]=v.useState(void 0),d=r===xi.Floating,[f,p]=v.useState(!1),{hoverProps:h,isHovered:y}=lu({isDisabled:d}),{isTooltipVisible:g,setTooltipElement:b,setTriggerElement:w,tooltipProps:x}=G9({isDisabled:d,isActive:!d&&(f||y),xOffset:10,yOffset:0,placement:"right",delay:450,immediateClose:!1});return v.useEffect(()=>{if(s){const k=lj(s,aj(e)).get(i);u(k)}},[o,s,i,e]),v.useEffect(()=>{let k=c,S=!1;return k&&g&&(S=!0,Ks(_=>_.updatePopupEditorWsPath(k))),()=>{S&&Ks(_=>k&&k===_.popupEditorWsPath?_.updatePopupEditorWsPath(void 0):_)}},[c,g]),m.jsxs(m.Fragment,{children:[m.jsx(OAt,{ref:w,linkNotFound:!c,title:a,onClick:l,onHoverChange:p}),g&&c&&m.jsx(FAt,{disablePreview:d,positionProps:{...h,...x.attributes},ref:b,style:x.style,wsPath:c})]})}const WAt={[vE]:({nodeViewRenderArg:t})=>{const{path:e,title:n}=t.node.attrs;return typeof e!="string"?m.jsx("span",{children:"Invalid Path"}):m.jsx(qAt,{nodeAttrs:{path:e,title:n},editorState:t.view.state})}};function VAt(){return()=>[Hc.createPlugin({name:vE,containerDOM:["span",{style:"display: inline-block;"}]})]}function MN(t,e){let n=t.split("]]").join("");n=n.trim(),n=P_(n);let r=xf(e,n);try{dp(r)}catch(o){r=xf(e,WX(n))}return r}function UAt(t,e){const{fileName:n,filePath:r}=he(t),o=e.filter(s=>he(s).fileName===n);return o.length===0||o.length>1?$t(r):$t(n)}const HAt=12,Iv=(t,e)=>(n,r,o)=>{const s=n.schema.nodes[vE],i=UAt(t,e);return up(s,"wikiLink must be defined"),Vt(zf,s.create({path:i}))(n,r,o)};function KAt(){const t=At();return!t||t.isDestroyed?null:m.jsx(GAt,{})}function GAt(){const{query:t,counter:e,tooltipContentDOM:n,isVisible:r}=yE(zf);return Co.createPortal(m.jsx(ZAt,{query:t,counter:e,isVisible:r,editorView:At()}),n)}function ZAt({query:t,counter:e,isVisible:n,editorView:r}){return m.jsx("div",{className:"shadow-2xl B-ui-components_inline-palette-wrapper flex flex-col bg-colorNeutralBgLayerFloat",children:m.jsxs("div",{className:"B-ui-components_inline-palette-items-wrapper",children:[n&&m.jsx(YAt,{query:t,counter:e,editorView:r}),m.jsxs(Hr,{children:[m.jsxs(Le,{children:[m.jsx("kbd",{className:"font-normal",children:""})," Navigate"]}),m.jsxs(Le,{children:[m.jsx("kbd",{className:"font-normal",children:"Enter"})," Create link"]}),m.jsxs(Le,{children:[m.jsx("kbd",{className:"font-normal",children:"Esc"})," Dismiss"]})]})]})})}const JAt=[];function YAt({query:t,editorView:e,counter:n}){const{wsName:r,noteWsPaths:o=JAt}=vn(),s=uE(o,t,{limit:HAt,selector:l=>he(l,!0).filePath,tiebreakers:[cE]}),i=v.useMemo(()=>{let l=s.map(u=>{const d=u.item;return{wsPath:d,uid:d,title:$t(he(d,!0).filePath),editorExecuteCommand:()=>Iv(d,o)}});if(!l.find(u=>u.title===t||P_(t)===he(u.wsPath,!0).filePath)&&t.length>0&&r){const u=MN(t,r);let d={uid:"create-"+u,wsPath:u,title:"Create: "+$t(he(u).filePath),editorExecuteCommand:()=>Iv(u,o)};l=hX(l,1,d)}return l},[o,s,r,t]),{getItemProps:a}=bE(zf,i,n,()=>!1);return v.useEffect(()=>{r&&(t==="]]"||t.includes("[[")?Vt(zf,"")(e.state,e.dispatch,e):t.endsWith("]]")&&Iv(MN(t,r),o)(e.state,e.dispatch,e))},[t,r,e,o]),m.jsxs(m.Fragment,{children:[t===""&&m.jsx(Oc,{dataId:"searchNote",className:"palette-row",title:" Search for a note to link it"}),i.map((l,c)=>m.jsx(Oc,{dataId:l.uid,className:"palette-row",description:l.title,...a(l,c)},l.uid))]})}const XAt=t=>t.dom.parentElement,QAt=oj.spec(),eNt=Tt.create({name:ij,editor:{specs:[QAt,mE({markName:RN,trigger:"[["})],highPriorityPlugins:[gE({key:zf,markName:RN,tooltipRenderOpts:{getScrollContainer:XAt}})],plugins:[VAt()],markdownItPlugins:[xAt],ReactComponent:KAt,renderReactNodeView:WAt},application:{noteSidebarWidgets:[{name:"note-sidebar-widget::@bangle.io/inline-backlink",ReactComponent:AAt,title:"Backlink references"}]}}),xE="@bangle.io/inline-command-palette",Rv=D1(xE+"/paletteMark"),kn=new Ee(xE+"-key"),kE="REGULAR_TYPE",Py="HINT_TYPE",tNt=[Py,kE];class Ut{constructor(e){M(this,"uid");M(this,"title");M(this,"type");M(this,"description");M(this,"rightHoverIcon");M(this,"keybinding");M(this,"keywords");M(this,"disabled");M(this,"hidden");M(this,"editorExecuteCommand");M(this,"group");M(this,"highPriority");M(this,"skipFiltering");const{uid:n,title:r,type:o=kE,description:s,keywords:i,disabled:a,hidden:l,editorExecuteCommand:c,group:u,highPriority:d,skipFiltering:f,...p}=e;if(Object.keys(p).length>0)throw new Error(`PaletteItem: the following fields are not recognized "${Object.keys(p).join(",")}"`);if(!tNt.includes(o))throw new Error("PaletteItem: Unknown type "+o);if(!u)throw new Error("PaletteItem: group is required");this.uid=n,this.title=r,this.type=o,this.description=s,this.keywords=i,this.disabled=a,this.hidden=l,this.editorExecuteCommand=c,this.group=u,this.highPriority=d,this.skipFiltering=f}static create(e){return new Ut(e)}}const nNt=24*60*60*1e3,DN=(t,e)=>{const n=t(e),r=n.startOf("day");return n.diff(r)===0||n.diff(r)===nNt/2?n.format("ll"):n.format("ll LT")},rNt=Ut.create({uid:"date",type:Py,title:" ",description:"   -  '/tomorrow', '/next friday 3pm', '/sep 23'",keywords:["date","time"],group:"date",disabled:!0,editorExecuteCommand:()=>{}});let Mv;async function oNt(){if(!Mv){let[t,e]=await Promise.all([_a(()=>import("./chrono-d477366d.js"),["assets/chrono-d477366d.js","assets/dayjs.min-fda909ab.js"]).then(n=>n.getChrono()),ej()]);Mv={chrono:t,dayjs:e}}return Mv}function sNt(t){const[e,n]=v.useState(void 0),[r,o]=v.useState("not-started"),s=v.useRef(),i=Zc(),a=v.useMemo(()=>{if(e){const{parsedDates:l,dayjs:c}=e;return l.map((u,d)=>Ut.create({uid:"parsedDate"+d,highPriority:!0,skipFiltering:!0,title:"Insert date",group:"date",description:'Insert "'+DN(c,u.date())+'"',editorExecuteCommand:()=>Vt(kn,DN(c,u.date())+" ")}))}return[rNt]},[e]);return v.useEffect(()=>{t&&r==="not-started"&&(o("loading"),oNt().then(l=>{i.current||(s.current=l,o("loaded"))}).catch(l=>{if(!i.current)throw o("not-started"),l}))},[t,r,o,i]),v.useEffect(()=>{if(t&&r==="loaded"&&s.current){const{chrono:l,dayjs:c}=s.current;let u=c().startOf("day").toDate();const d=l.parse(t,u);d.length>0?n({parsedDates:d,chrono:l,dayjs:c}):n(void 0)}},[t,r]),v.useEffect(()=>{t===""&&e&&n(void 0)},[t,e]),a}const{insertEmptyParagraphAbove:iNt,insertEmptyParagraphBelow:aNt}=Qf,{queryIsBulletListActive:lNt}=Kc,{queryIsOrderedListActive:cNt}=Gc,{insertEmptyParaAbove:uNt,insertEmptyParaBelow:dNt}=nr,{insertEmptyParaAbove:fNt,insertEmptyParaBelow:pNt}=_1;function hNt(){return Vn(iNt(),uNt(),fNt())}function mNt(){return Vn(aNt(),dNt(),pNt())}function Du(){return Vn(cNt(),lNt())}const{convertToParagraph:gNt}=Qf,{toggleBulletList:LN,toggleTodoList:jN,queryIsBulletListActive:yNt,queryIsTodoListActive:bNt}=Kc,{insertEmptySiblingListAbove:vNt,insertEmptySiblingListBelow:wNt}=rp,{toggleOrderedList:FN,queryIsOrderedListActive:xNt}=Gc,kNt=t=>(e,n)=>{const r=e.schema.nodes.heading;return up(r,"   "),bc(r,{level:t})(e,n)};function _Nt(){return v.useMemo(()=>[Ut.create({uid:"paraBelow",title:"   ",group:"editor",description:"     ",disabled:e=>Du()(e),editorExecuteCommand:()=>(e,n,r)=>(r&&Mn(r,mNt()),Vt(kn,"")(e,n,r))}),Ut.create({uid:"paraAbove",title:"   ",group:"editor",description:"     ",disabled:e=>Du()(e),editorExecuteCommand:()=>(e,n,r)=>(r&&Mn(r,hNt()),Vt(kn,"")(e,n,r))}),Ut.create({uid:"paraConvert",title:"",group:"editor",description:"    ",editorExecuteCommand:()=>(e,n,r)=>(r&&Mn(r,(o,s,i)=>bNt()(o)?jN()(o,s,i):yNt()(o)?LN()(o,s,i):xNt()(o)?FN()(o,s,i):gNt()(o,s,i)),Vt(kn,"")(e,n,r))}),Ut.create({uid:"bulletListConvert",title:" ",group:"editor",keywords:["unordered","lists"],description:"     ",editorExecuteCommand:()=>(e,n,r)=>(r&&Mn(r,LN()),Vt(kn,"")(e,n,r))}),Ut.create({uid:"todoListConvert",title:"Todo",group:"editor",keywords:["todo","lists","checkbox","checked"],description:"     ",editorExecuteCommand:()=>(e,n,r)=>(r&&Mn(r,jN()),Vt(kn,"")(e,n,r))}),Ut.create({uid:"orderedListConvert",group:"editor",title:"  ",keywords:["numbered","lists"],description:"     ",editorExecuteCommand:()=>(e,n,r)=>(r&&Mn(r,FN()),Vt(kn,"")(e,n,r))}),Ut.create({uid:"insertSiblingListAbove",group:"editor",title:"   ",keywords:["insert","above","lists"],description:"      ",disabled:e=>!Du()(e),editorExecuteCommand:()=>(e,n,r)=>(r&&Mn(r,vNt()),Vt(kn,"")(e,n,r))}),Ut.create({uid:"insertSiblingListBelow",group:"editor",title:"   ",keywords:["insert","below","lists"],description:"      ",disabled:e=>!Du()(e),editorExecuteCommand:()=>(e,n,r)=>(r&&r&&Mn(r,wNt()),Vt(kn,"")(e,n,r))}),...Array.from({length:3},(e,n)=>{const r=n+1;return Ut.create({uid:"headingConvert"+r,title:"H"+r,group:"editor",description:"      "+r,disabled:o=>Du()(o),editorExecuteCommand:()=>(o,s,i)=>(i&&Mn(i,kNt(r)),Vt(kn,"")(o,s,i))})})],[])}const $Nt=[Ut.create({uid:"useBacklink",type:Py,title:"   ",description:" [[,    ,     .",keywords:["backlink","link"],group:"hints",disabled:!0,editorExecuteCommand:()=>{}})];function BN(t,e,n,r,o){var a;let s=[...r,...n];if(!s.every(l=>l instanceof Ut))throw new Error(`uid: "${(a=s.find(l=>!(l instanceof Ut)))==null?void 0:a.uid}" must be an instance of PaletteItem `);s=s.filter(l=>typeof l.hidden=="function"?!l.hidden(t.state):!l.hidden),s.forEach(l=>{l._isItemDisabled=o(l)});let i=[...$Nt,...s.filter(l=>l.type===Py)];return s=s.filter(l=>SNt(l,e)&&l.type===kE).sort((l,c)=>{let u=zN(l,c,"highPriority");return u!==0||(u=zN(l,c,"_isItemDisabled",!0),u!==0)?u:l.group===c.group?l.title.localeCompare(c.title):l.group.localeCompare(c.group)}),{items:s,hintItems:i}}function ENt(){const{query:t,counter:e,isVisible:n,tooltipContentDOM:r}=yE(kn),o=At(),s=sNt(t),i=_Nt(),a=v.useCallback(f=>typeof f.disabled=="function"?f.disabled(o.state):f.disabled,[o]),[{items:l,hintItems:c},u]=v.useState(()=>BN(o,t,i,s,a));v.useEffect(()=>{const f=BN(o,t,i,s,a);u(f)},[o,t,i,s,a,n]);const{getItemProps:d}=bE(kn,l,e,a);return Co.createPortal(m.jsxs("div",{className:"B-ui-components_inline-palette-wrapper flex flex-col bg-colorNeutralBgLayerFloat shadow-2xl",children:[m.jsxs("div",{className:"B-ui-components_inline-palette-items-wrapper",children:[l.map((f,p)=>m.jsx(Oc,{dataId:f.uid,disabled:f._isItemDisabled,title:(f._isItemDisabled?" ":"")+f.title,description:f.description,rightHoverIcon:f.rightHoverIcon,rightIcon:m.jsx("kbd",{className:"whitespace-nowrap",children:f.keybinding}),...d(f,p)},f.uid)),c.map((f,p)=>m.jsx(Oc,{dataId:f.uid,className:"palette-row",title:" Tip "+f.title,description:f.description,rightHoverIcon:f.rightHoverIcon,rightIcon:m.jsx("kbd",{className:"whitespace-nowrap",children:f.keybinding})},f.uid))]}),m.jsxs(Hr,{children:[m.jsxs(Le,{children:[m.jsx("kbd",{className:"font-normal",children:""})," "]}),m.jsxs(Le,{children:[m.jsx("kbd",{className:"font-normal",children:"Enter"}),"  "]}),m.jsxs(Le,{children:[m.jsx("kbd",{className:"font-normal",children:"Esc"})," "]})]})]}),r)}function SNt(t,e){if(t.skipFiltering||Ju(t.title,e)||t.keywords&&Ju(t.keywords,e)||Ju(t.group,e)||Ju(t.description,e))return t}function Ju(t,e){return e=e.toLocaleLowerCase(),Array.isArray(t)?t.filter(Boolean).some(n=>Ju(n,e)):(t=t.toLocaleLowerCase(),t.includes(e)||e.includes(t))}function zN(t,e,n,r=!1){return t[n]&&!e[n]?r?1:-1:e[n]&&!t[n]?r?-1:1:0}const CNt=t=>t.dom.parentElement,Dv="/",TNt=Tt.create({name:xE,editor:{ReactComponent:ENt,specs:[mE({markName:Rv,trigger:Dv})],highPriorityPlugins:[gE({key:kn,markName:Rv,tooltipRenderOpts:{getScrollContainer:CNt}})],plugins:[st({[CX.toggleInlineCommandPalette.key]:(t,e,n)=>{var c;const{tr:r,schema:o,selection:s}=t;if(sj(kn)(t))return!1;const i=s.$from.marks(),a=o.mark(Rv,{trigger:Dv}),l=(c=s.$from.nodeBefore)==null?void 0:c.text;return l&&!l.endsWith(" ")&&r.replaceSelectionWith(o.text(" "),!1),r.replaceSelectionWith(o.text(Dv,[a,...i]),!1),e==null||e(r),!0}})]}});var ANt=function(e,n){return e[n].content},NNt=function(e,n,r,o,s){var i=e.utils.arrayReplaceAt,a=e.utils.lib.ucmicro,l=new RegExp([a.Z.source,a.P.source,a.Cc.source].join("|"));function c(u,d,f){var p,h=0,y=[];return u.replace(s,function(g,b,w){var x;if(r.hasOwnProperty(g)){if(x=r[g],b>0&&!l.test(w[b-1])||b+g.length<w.length&&!l.test(w[b+g.length]))return}else x=g.slice(1,-1);b>h&&(p=new f("text","",0),p.content=u.slice(h,b),y.push(p)),p=new f("emoji","",0),p.markup=x,p.content=n[x],y.push(p),h=b+g.length}),h<u.length&&(p=new f("text","",0),p.content=u.slice(h),y.push(p)),y}return function(d){var f,p,h,y,g,b=d.tokens,w=0;for(p=0,h=b.length;p<h;p++)if(b[p].type==="inline")for(y=b[p].children,f=y.length-1;f>=0;f--)g=y[f],(g.type==="link_open"||g.type==="link_close")&&g.info==="auto"&&(w-=g.nesting),g.type==="text"&&w===0&&o.test(g.content)&&(b[p].children=y=i(y,f,c(g.content,g.level,d.Token)))}};function PNt(t){return t.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var ONt=function(e){var n=e.defs,r;e.enabled.length&&(n=Object.keys(n).reduce(function(l,c){return e.enabled.indexOf(c)>=0&&(l[c]=n[c]),l},{})),r=Object.keys(e.shortcuts).reduce(function(l,c){return n[c]?Array.isArray(e.shortcuts[c])?(e.shortcuts[c].forEach(function(u){l[u]=c}),l):(l[e.shortcuts[c]]=c,l):l},{});var o=Object.keys(n),s;o.length===0?s="^$":s=o.map(function(l){return":"+l+":"}).concat(Object.keys(r)).sort().reverse().map(function(l){return PNt(l)}).join("|");var i=RegExp(s),a=RegExp(s,"g");return{defs:n,shortcuts:r,scanRE:i,replaceRE:a}},INt=ANt,RNt=NNt,MNt=ONt,DNt=function(e,n){var r={defs:{},shortcuts:{},enabled:[]},o=MNt(e.utils.assign({},r,n||{}));e.renderer.rules.emoji=INt,e.core.ruler.after("linkify","emoji",RNt(e,o.defs,o.shortcuts,o.scanRE,o.replaceRE))};const LNt=fs(DNt),jNt=qNt,FNt=WNt,BNt={insertEmoji:cj},ix="emoji",zNt=t=>t.nodes[ix];function qNt({getEmoji:t,defaultEmojiAlias:e="smiley"}){const{toDOM:n,parseDOM:r}=k1(ix,{tag:"span",parsingPriority:51,content:o=>t(o.attrs.emojiAlias,o)});return{type:"node",name:ix,schema:{attrs:{emojiAlias:{default:e}},inline:!0,group:"inline",draggable:!0,atom:!0,toDOM:n,parseDOM:r},markdown:{toMarkdown:(o,s)=>{o.write(`:${s.attrs.emojiAlias}:`)},parseMarkdown:{emoji:{node:"emoji",getAttrs:o=>({emojiAlias:o.markup})}}}}}function WNt({keybindings:t={}}={}){return()=>[]}function cj(t){return function(e,n){let r=zNt(e.schema),{$from:o}=e.selection,s=o.index();if(!o.parent.canReplaceWith(s,s,r))return!1;if(n){const i={emojiAlias:t};n(e.tr.replaceSelectionWith(r.create(i)))}return!0}}var qN=Object.freeze({__proto__:null,spec:jNt,plugins:FNt,commands:BNt,insertEmoji:cj});const VNt=LNt,Gh={item:void 0,coords:void 0};function UNt(t,e){const n=Oy(e);let r=0;for(let o=0;o<t[0];o++)r+=n[o].length;return r+=t[1],r}function uj(t,e){const n=Oy(e);let r=ZNt(t,n);if(r!=null)for(let o=0;o<n.length;o++){const s=n[o].length;if(r<s)return[o,r];r=r-s}}function dj(t,e){const n=uj(t,e);return n?{item:Oy(e)[n[0]][n[1]],coords:n}:Gh}function HNt(t,e=1,n,r){const{coords:o}=GNt(t,e,n,r);return o==null?null:UNt(o,r)}function KNt(t,e,n=1){let r=t+n;if(e.length!==0){for(;r<0;)r+=e.length;return r=r%e.length,r}}function fj({rowWidth:t,squareMargin:e,squareSide:n}){const r=n+2*e,o=Math.floor((t-2)/r);return{containerWidth:o*r,rowCount:o}}function GNt(t,e=1,n,r){const o=uj(t,r);if(!o)return Gh;const s=Oy(r),i=o[0],a=o[1],l=s[i].length,c=e===1?a+n:a-n;if(c<l&&c>=0)return{item:s[i][c],coords:[i,c]};const u=KNt(i,s,c>=l?1:-1);if(u==null)return Gh;const d=s[u],f=e===1?0:d.length-1,p=d[f];return p==null?Gh:{item:p,coords:[u,f]}}function Oy(t){return t.map(e=>e.emojis)}function ZNt(t,e){const n=e.reduce((r,o)=>r+o.length,0);if(n!==0){for(;t<0;)t+=n;return t=t%n,t}}const{decrementSuggestTooltipCounter:JNt,incrementSuggestTooltipCounter:YNt,updateSuggestTooltipCounter:XNt,removeSuggestMark:WN,resetSuggestTooltipCounter:QNt,defaultKeys:ePt}=Kn,tPt=iPt,nPt=aPt,rPt={queryTriggerText:jg,selectEmoji:Iy},oPt=":",sPt=2e3;function iPt({markName:t,trigger:e=oPt}){return{...Kn.spec({markName:t,trigger:e}),options:{trigger:e}}}function aPt({key:t=new Ee("emojiSuggestMenu"),markName:e,tooltipRenderOpts:n={},getEmojiGroups:r,maxItems:o=sPt,squareSide:s=32,squareMargin:i=2,rowWidth:a=400}){return({schema:l,specRegistry:c})=>{const{trigger:u}=c.options[e],d=new Ee("suggestTooltipKey"),f=py(n.tooltipDOMSpec),p=()=>f.dom.getAttribute("data-popper-placement")==="top-start";if(!l.marks[e])throw ar(`Couldn't find the markName:${e}, please make sure you have initialized to use the same markName you initialized the spec with`),new Error(`markName ${e} not found`);const h=Hk(6),y=g=>(b,w,x)=>{if(requestAnimationFrame(()=>{const T=document.getElementById(h);T&&("scrollIntoViewIfNeeded"in document.body?T.scrollIntoViewIfNeeded(!1):T.scrollIntoView&&T.scrollIntoView(!1)),x==null||x.focus()}),g==="LEFT")return JNt(d)(b,w,x);if(g==="RIGHT")return YNt(d)(b,w,x);const k=g==="UP"?!p():p(),S=r(jg(t)(b)),{counter:_}=d.getState(b),{rowCount:C}=fj({rowWidth:a,squareMargin:i,squareSide:s}),$=HNt(_,k?-1:1,C,S);return $==null?!1:XNt(d,$)(b,w,x)};return[Gk(t,{getEmojiGroups:r,maxItems:o,tooltipContentDOM:f.contentDOM,markName:e,squareSide:s,squareMargin:i,selectedEmojiSquareId:h,rowWidth:a,suggestTooltipKey:d}),Kn.plugins({key:d,markName:e,trigger:u,tooltipRenderOpts:{...n,tooltipDOMSpec:f},keybindings:{...ePt,left:"ArrowLeft",right:"ArrowRight"},onEnter:(g,b,w)=>{const x=r(jg(t)(g));if(x.flatMap($=>$.emojis).length===0)return WN(t)(g,b,w);const{counter:S}=d.getState(g),{item:_}=dj(S,x);if(!_)return WN(t)(g,b,w);const C=_[0];return w&&Mn(w,QNt(d)),Iy(t,C)(g,b,w)},onArrowDown:y("DOWN"),onArrowUp:y("UP"),onArrowLeft:y("LEFT"),onArrowRight:y("RIGHT")})]}}function _E(t){return e=>t.getState(e).suggestTooltipKey}function jg(t){return e=>{const n=_E(t)(e);return Kn.queryTriggerText(n)(e)}}function Iy(t,e){return(n,r,o)=>{const s=G(n,"emoji").create({emojiAlias:e}),i=_E(t)(n);return Kn.replaceSuggestMarkWith(i,s)(n,r,o)}}var VN=Object.freeze({__proto__:null,spec:tPt,plugins:nPt,commands:rPt,getSuggestTooltipKey:_E,queryTriggerText:jg,selectEmoji:Iy});const $E="@bangle.io/inline-emoji",pj=new Ee($E+"SuggestKey"),UN=D1($E)+"-emojiSuggest",lPt=[["grinning","",0],["smiley","",1],["smile","",2],["grin","",3],["laughing","",4],["satisfied","",4],["sweat_smile","",5],["rofl","",6],["joy","",7],["slightly_smiling_face","",8],["upside_down_face","",9],["wink","",10],["blush","",11],["innocent","",12],["smiling_face_with_three_hearts","",13],["heart_eyes","",14],["star_struck","",15],["kissing_heart","",16],["kissing","",17],["relaxed","",18],["kissing_closed_eyes","",19],["kissing_smiling_eyes","",20],["smiling_face_with_tear","",21],["yum","",22],["stuck_out_tongue","",23],["stuck_out_tongue_winking_eye","",24],["zany_face","",25],["stuck_out_tongue_closed_eyes","",26],["money_mouth_face","",27],["hugs","",28],["hand_over_mouth","",29],["shushing_face","",30],["thinking","",31],["zipper_mouth_face","",32],["raised_eyebrow","",33],["neutral_face","",34],["expressionless","",35],["no_mouth","",36],["smirk","",37],["unamused","",38],["roll_eyes","",39],["grimacing","",40],["lying_face","",41],["relieved","",42],["pensive","",43],["sleepy","",44],["drooling_face","",45],["sleeping","",46],["mask","",47],["face_with_thermometer","",48],["face_with_head_bandage","",49],["nauseated_face","",50],["vomiting_face","",51],["sneezing_face","",52],["hot_face","",53],["cold_face","",54],["woozy_face","",55],["dizzy_face","",56],["exploding_head","",57],["cowboy_hat_face","",58],["partying_face","",59],["disguised_face","",60],["sunglasses","",61],["nerd_face","",62],["monocle_face","",63],["confused","",64],["worried","",65],["slightly_frowning_face","",66],["frowning_face","",67],["open_mouth","",68],["hushed","",69],["astonished","",70],["flushed","",71],["pleading_face","",72],["frowning","",73],["anguished","",74],["fearful","",75],["cold_sweat","",76],["disappointed_relieved","",77],["cry","",78],["sob","",79],["scream","",80],["confounded","",81],["persevere","",82],["disappointed","",83],["sweat","",84],["weary","",85],["tired_face","",86],["yawning_face","",87],["triumph","",88],["rage","",89],["pout","",89],["angry","",90],["cursing_face","",91],["smiling_imp","",92],["imp","",93],["skull","",94],["skull_and_crossbones","",95],["hankey","",96],["poop","",96],["shit","",96],["clown_face","",97],["japanese_ogre","",98],["japanese_goblin","",99],["ghost","",100],["alien","",101],["space_invader","",102],["robot","",103],["smiley_cat","",104],["smile_cat","",105],["joy_cat","",106],["heart_eyes_cat","",107],["smirk_cat","",108],["kissing_cat","",109],["scream_cat","",110],["crying_cat_face","",111],["pouting_cat","",112],["see_no_evil","",113],["hear_no_evil","",114],["speak_no_evil","",115],["kiss","",116],["love_letter","",117],["cupid","",118],["gift_heart","",119],["sparkling_heart","",120],["heartpulse","",121],["heartbeat","",122],["revolving_hearts","",123],["two_hearts","",124],["heart_decoration","",125],["heavy_heart_exclamation","",126],["broken_heart","",127],["heart","",128],["orange_heart","",129],["yellow_heart","",130],["green_heart","",131],["blue_heart","",132],["purple_heart","",133],["brown_heart","",134],["black_heart","",135],["white_heart","",136],["100","",137],["anger","",138],["boom","",139],["collision","",139],["dizzy","",140],["sweat_drops","",141],["dash","",142],["hole","",143],["bomb","",144],["speech_balloon","",145],["eye_speech_bubble","",146],["left_speech_bubble","",147],["right_anger_bubble","",148],["thought_balloon","",149],["zzz","",150],["wave","",151],["raised_back_of_hand","",152],["raised_hand_with_fingers_splayed","",153],["hand","",154],["raised_hand","",154],["vulcan_salute","",155],["ok_hand","",156],["pinched_fingers","",157],["pinching_hand","",158],["v","",159],["crossed_fingers","",160],["love_you_gesture","",161],["metal","",162],["call_me_hand","",163],["point_left","",164],["point_right","",165],["point_up_2","",166],["middle_finger","",167],["fu","",167],["point_down","",168],["point_up","",169],["+1","",170],["thumbsup","",170],["-1","",171],["thumbsdown","",171],["fist_raised","",172],["fist","",172],["fist_oncoming","",173],["facepunch","",173],["punch","",173],["fist_left","",174],["fist_right","",175],["clap","",176],["raised_hands","",177],["open_hands","",178],["palms_up_together","",179],["handshake","",180],["pray","",181],["writing_hand","",182],["nail_care","",183],["selfie","",184],["muscle","",185],["mechanical_arm","",186],["mechanical_leg","",187],["leg","",188],["foot","",189],["ear","",190],["ear_with_hearing_aid","",191],["nose","",192],["brain","",193],["anatomical_heart","",194],["lungs","",195],["tooth","",196],["bone","",197],["eyes","",198],["eye","",199],["tongue","",200],["lips","",201],["baby","",202],["child","",203],["boy","",204],["girl","",205],["adult","",206],["blond_haired_person","",207],["man","",208],["bearded_person","",209],["red_haired_man","",210],["curly_haired_man","",211],["white_haired_man","",212],["bald_man","",213],["woman","",214],["red_haired_woman","",215],["person_red_hair","",216],["curly_haired_woman","",217],["person_curly_hair","",218],["white_haired_woman","",219],["person_white_hair","",220],["bald_woman","",221],["person_bald","",222],["blond_haired_woman","",223],["blonde_woman","",223],["blond_haired_man","",224],["older_adult","",225],["older_man","",226],["older_woman","",227],["frowning_person","",228],["frowning_man","",229],["frowning_woman","",230],["pouting_face","",231],["pouting_man","",232],["pouting_woman","",233],["no_good","",234],["no_good_man","",235],["ng_man","",235],["no_good_woman","",236],["ng_woman","",236],["ok_person","",237],["ok_man","",238],["ok_woman","",239],["tipping_hand_person","",240],["information_desk_person","",240],["tipping_hand_man","",241],["sassy_man","",241],["tipping_hand_woman","",242],["sassy_woman","",242],["raising_hand","",243],["raising_hand_man","",244],["raising_hand_woman","",245],["deaf_person","",246],["deaf_man","",247],["deaf_woman","",248],["bow","",249],["bowing_man","",250],["bowing_woman","",251],["facepalm","",252],["man_facepalming","",253],["woman_facepalming","",254],["shrug","",255],["man_shrugging","",256],["woman_shrugging","",257],["health_worker","",258],["man_health_worker","",259],["woman_health_worker","",260],["student","",261],["man_student","",262],["woman_student","",263],["teacher","",264],["man_teacher","",265],["woman_teacher","",266],["judge","",267],["man_judge","",268],["woman_judge","",269],["farmer","",270],["man_farmer","",271],["woman_farmer","",272],["cook","",273],["man_cook","",274],["woman_cook","",275],["mechanic","",276],["man_mechanic","",277],["woman_mechanic","",278],["factory_worker","",279],["man_factory_worker","",280],["woman_factory_worker","",281],["office_worker","",282],["man_office_worker","",283],["woman_office_worker","",284],["scientist","",285],["man_scientist","",286],["woman_scientist","",287],["technologist","",288],["man_technologist","",289],["woman_technologist","",290],["singer","",291],["man_singer","",292],["woman_singer","",293],["artist","",294],["man_artist","",295],["woman_artist","",296],["pilot","",297],["man_pilot","",298],["woman_pilot","",299],["astronaut","",300],["man_astronaut","",301],["woman_astronaut","",302],["firefighter","",303],["man_firefighter","",304],["woman_firefighter","",305],["police_officer","",306],["cop","",306],["policeman","",307],["policewoman","",308],["detective","",309],["male_detective","",310],["female_detective","",311],["guard","",312],["guardsman","",313],["guardswoman","",314],["ninja","",315],["construction_worker","",316],["construction_worker_man","",317],["construction_worker_woman","",318],["prince","",319],["princess","",320],["person_with_turban","",321],["man_with_turban","",322],["woman_with_turban","",323],["man_with_gua_pi_mao","",324],["woman_with_headscarf","",325],["person_in_tuxedo","",326],["man_in_tuxedo","",327],["woman_in_tuxedo","",328],["person_with_veil","",329],["man_with_veil","",330],["woman_with_veil","",331],["bride_with_veil","",331],["pregnant_woman","",332],["breast_feeding","",333],["woman_feeding_baby","",334],["man_feeding_baby","",335],["person_feeding_baby","",336],["angel","",337],["santa","",338],["mrs_claus","",339],["mx_claus","",340],["superhero","",341],["superhero_man","",342],["superhero_woman","",343],["supervillain","",344],["supervillain_man","",345],["supervillain_woman","",346],["mage","",347],["mage_man","",348],["mage_woman","",349],["fairy","",350],["fairy_man","",351],["fairy_woman","",352],["vampire","",353],["vampire_man","",354],["vampire_woman","",355],["merperson","",356],["merman","",357],["mermaid","",358],["elf","",359],["elf_man","",360],["elf_woman","",361],["genie","",362],["genie_man","",363],["genie_woman","",364],["zombie","",365],["zombie_man","",366],["zombie_woman","",367],["massage","",368],["massage_man","",369],["massage_woman","",370],["haircut","",371],["haircut_man","",372],["haircut_woman","",373],["walking","",374],["walking_man","",375],["walking_woman","",376],["standing_person","",377],["standing_man","",378],["standing_woman","",379],["kneeling_person","",380],["kneeling_man","",381],["kneeling_woman","",382],["person_with_probing_cane","",383],["man_with_probing_cane","",384],["woman_with_probing_cane","",385],["person_in_motorized_wheelchair","",386],["man_in_motorized_wheelchair","",387],["woman_in_motorized_wheelchair","",388],["person_in_manual_wheelchair","",389],["man_in_manual_wheelchair","",390],["woman_in_manual_wheelchair","",391],["runner","",392],["running","",392],["running_man","",393],["running_woman","",394],["woman_dancing","",395],["dancer","",395],["man_dancing","",396],["business_suit_levitating","",397],["dancers","",398],["dancing_men","",399],["dancing_women","",400],["sauna_person","",401],["sauna_man","",402],["sauna_woman","",403],["climbing","",404],["climbing_man","",405],["climbing_woman","",406],["person_fencing","",407],["horse_racing","",408],["skier","",409],["snowboarder","",410],["golfing","",411],["golfing_man","",412],["golfing_woman","",413],["surfer","",414],["surfing_man","",415],["surfing_woman","",416],["rowboat","",417],["rowing_man","",418],["rowing_woman","",419],["swimmer","",420],["swimming_man","",421],["swimming_woman","",422],["bouncing_ball_person","",423],["bouncing_ball_man","",424],["basketball_man","",424],["bouncing_ball_woman","",425],["basketball_woman","",425],["weight_lifting","",426],["weight_lifting_man","",427],["weight_lifting_woman","",428],["bicyclist","",429],["biking_man","",430],["biking_woman","",431],["mountain_bicyclist","",432],["mountain_biking_man","",433],["mountain_biking_woman","",434],["cartwheeling","",435],["man_cartwheeling","",436],["woman_cartwheeling","",437],["wrestling","",438],["men_wrestling","",439],["women_wrestling","",440],["water_polo","",441],["man_playing_water_polo","",442],["woman_playing_water_polo","",443],["handball_person","",444],["man_playing_handball","",445],["woman_playing_handball","",446],["juggling_person","",447],["man_juggling","",448],["woman_juggling","",449],["lotus_position","",450],["lotus_position_man","",451],["lotus_position_woman","",452],["bath","",453],["sleeping_bed","",454],["people_holding_hands","",455],["two_women_holding_hands","",456],["couple","",457],["two_men_holding_hands","",458],["couplekiss","",459],["couplekiss_man_woman","",460],["couplekiss_man_man","",461],["couplekiss_woman_woman","",462],["couple_with_heart","",463],["couple_with_heart_woman_man","",464],["couple_with_heart_man_man","",465],["couple_with_heart_woman_woman","",466],["family","",467],["family_man_woman_boy","",468],["family_man_woman_girl","",469],["family_man_woman_girl_boy","",470],["family_man_woman_boy_boy","",471],["family_man_woman_girl_girl","",472],["family_man_man_boy","",473],["family_man_man_girl","",474],["family_man_man_girl_boy","",475],["family_man_man_boy_boy","",476],["family_man_man_girl_girl","",477],["family_woman_woman_boy","",478],["family_woman_woman_girl","",479],["family_woman_woman_girl_boy","",480],["family_woman_woman_boy_boy","",481],["family_woman_woman_girl_girl","",482],["family_man_boy","",483],["family_man_boy_boy","",484],["family_man_girl","",485],["family_man_girl_boy","",486],["family_man_girl_girl","",487],["family_woman_boy","",488],["family_woman_boy_boy","",489],["family_woman_girl","",490],["family_woman_girl_boy","",491],["family_woman_girl_girl","",492],["speaking_head","",493],["bust_in_silhouette","",494],["busts_in_silhouette","",495],["people_hugging","",496],["footprints","",497],["monkey_face","",498],["monkey","",499],["gorilla","",500],["orangutan","",501],["dog","",502],["dog2","",503],["guide_dog","",504],["service_dog","",505],["poodle","",506],["wolf","",507],["fox_face","",508],["raccoon","",509],["cat","",510],["cat2","",511],["black_cat","",512],["lion","",513],["tiger","",514],["tiger2","",515],["leopard","",516],["horse","",517],["racehorse","",518],["unicorn","",519],["zebra","",520],["deer","",521],["bison","",522],["cow","",523],["ox","",524],["water_buffalo","",525],["cow2","",526],["pig","",527],["pig2","",528],["boar","",529],["pig_nose","",530],["ram","",531],["sheep","",532],["goat","",533],["dromedary_camel","",534],["camel","",535],["llama","",536],["giraffe","",537],["elephant","",538],["mammoth","",539],["rhinoceros","",540],["hippopotamus","",541],["mouse","",542],["mouse2","",543],["rat","",544],["hamster","",545],["rabbit","",546],["rabbit2","",547],["chipmunk","",548],["beaver","",549],["hedgehog","",550],["bat","",551],["bear","",552],["polar_bear","",553],["koala","",554],["panda_face","",555],["sloth","",556],["otter","",557],["skunk","",558],["kangaroo","",559],["badger","",560],["feet","",561],["paw_prints","",561],["turkey","",562],["chicken","",563],["rooster","",564],["hatching_chick","",565],["baby_chick","",566],["hatched_chick","",567],["bird","",568],["penguin","",569],["dove","",570],["eagle","",571],["duck","",572],["swan","",573],["owl","",574],["dodo","",575],["feather","",576],["flamingo","",577],["peacock","",578],["parrot","",579],["frog","",580],["crocodile","",581],["turtle","",582],["lizard","",583],["snake","",584],["dragon_face","",585],["dragon","",586],["sauropod","",587],["t-rex","",588],["whale","",589],["whale2","",590],["dolphin","",591],["flipper","",591],["seal","",592],["fish","",593],["tropical_fish","",594],["blowfish","",595],["shark","",596],["octopus","",597],["shell","",598],["snail","",599],["butterfly","",600],["bug","",601],["ant","",602],["bee","",603],["honeybee","",603],["beetle","",604],["lady_beetle","",605],["cricket","",606],["cockroach","",607],["spider","",608],["spider_web","",609],["scorpion","",610],["mosquito","",611],["fly","",612],["worm","",613],["microbe","",614],["bouquet","",615],["cherry_blossom","",616],["white_flower","",617],["rosette","",618],["rose","",619],["wilted_flower","",620],["hibiscus","",621],["sunflower","",622],["blossom","",623],["tulip","",624],["seedling","",625],["potted_plant","",626],["evergreen_tree","",627],["deciduous_tree","",628],["palm_tree","",629],["cactus","",630],["ear_of_rice","",631],["herb","",632],["shamrock","",633],["four_leaf_clover","",634],["maple_leaf","",635],["fallen_leaf","",636],["leaves","",637],["grapes","",638],["melon","",639],["watermelon","",640],["tangerine","",641],["orange","",641],["mandarin","",641],["lemon","",642],["banana","",643],["pineapple","",644],["mango","",645],["apple","",646],["green_apple","",647],["pear","",648],["peach","",649],["cherries","",650],["strawberry","",651],["blueberries","",652],["kiwi_fruit","",653],["tomato","",654],["olive","",655],["coconut","",656],["avocado","",657],["eggplant","",658],["potato","",659],["carrot","",660],["corn","",661],["hot_pepper","",662],["bell_pepper","",663],["cucumber","",664],["leafy_green","",665],["broccoli","",666],["garlic","",667],["onion","",668],["mushroom","",669],["peanuts","",670],["chestnut","",671],["bread","",672],["croissant","",673],["baguette_bread","",674],["flatbread","",675],["pretzel","",676],["bagel","",677],["pancakes","",678],["waffle","",679],["cheese","",680],["meat_on_bone","",681],["poultry_leg","",682],["cut_of_meat","",683],["bacon","",684],["hamburger","",685],["fries","",686],["pizza","",687],["hotdog","",688],["sandwich","",689],["taco","",690],["burrito","",691],["tamale","",692],["stuffed_flatbread","",693],["falafel","",694],["egg","",695],["fried_egg","",696],["shallow_pan_of_food","",697],["stew","",698],["fondue","",699],["bowl_with_spoon","",700],["green_salad","",701],["popcorn","",702],["butter","",703],["salt","",704],["canned_food","",705],["bento","",706],["rice_cracker","",707],["rice_ball","",708],["rice","",709],["curry","",710],["ramen","",711],["spaghetti","",712],["sweet_potato","",713],["oden","",714],["sushi","",715],["fried_shrimp","",716],["fish_cake","",717],["moon_cake","",718],["dango","",719],["dumpling","",720],["fortune_cookie","",721],["takeout_box","",722],["crab","",723],["lobster","",724],["shrimp","",725],["squid","",726],["oyster","",727],["icecream","",728],["shaved_ice","",729],["ice_cream","",730],["doughnut","",731],["cookie","",732],["birthday","",733],["cake","",734],["cupcake","",735],["pie","",736],["chocolate_bar","",737],["candy","",738],["lollipop","",739],["custard","",740],["honey_pot","",741],["baby_bottle","",742],["milk_glass","",743],["coffee","",744],["teapot","",745],["tea","",746],["sake","",747],["champagne","",748],["wine_glass","",749],["cocktail","",750],["tropical_drink","",751],["beer","",752],["beers","",753],["clinking_glasses","",754],["tumbler_glass","",755],["cup_with_straw","",756],["bubble_tea","",757],["beverage_box","",758],["mate","",759],["ice_cube","",760],["chopsticks","",761],["plate_with_cutlery","",762],["fork_and_knife","",763],["spoon","",764],["hocho","",765],["knife","",765],["amphora","",766],["earth_africa","",767],["earth_americas","",768],["earth_asia","",769],["globe_with_meridians","",770],["world_map","",771],["japan","",772],["compass","",773],["mountain_snow","",774],["mountain","",775],["volcano","",776],["mount_fuji","",777],["camping","",778],["beach_umbrella","",779],["desert","",780],["desert_island","",781],["national_park","",782],["stadium","",783],["classical_building","",784],["building_construction","",785],["bricks","",786],["rock","",787],["wood","",788],["hut","",789],["houses","",790],["derelict_house","",791],["house","",792],["house_with_garden","",793],["office","",794],["post_office","",795],["european_post_office","",796],["hospital","",797],["bank","",798],["hotel","",799],["love_hotel","",800],["convenience_store","",801],["school","",802],["department_store","",803],["factory","",804],["japanese_castle","",805],["european_castle","",806],["wedding","",807],["tokyo_tower","",808],["statue_of_liberty","",809],["church","",810],["mosque","",811],["hindu_temple","",812],["synagogue","",813],["shinto_shrine","",814],["kaaba","",815],["fountain","",816],["tent","",817],["foggy","",818],["night_with_stars","",819],["cityscape","",820],["sunrise_over_mountains","",821],["sunrise","",822],["city_sunset","",823],["city_sunrise","",824],["bridge_at_night","",825],["hotsprings","",826],["carousel_horse","",827],["ferris_wheel","",828],["roller_coaster","",829],["barber","",830],["circus_tent","",831],["steam_locomotive","",832],["railway_car","",833],["bullettrain_side","",834],["bullettrain_front","",835],["train2","",836],["metro","",837],["light_rail","",838],["station","",839],["tram","",840],["monorail","",841],["mountain_railway","",842],["train","",843],["bus","",844],["oncoming_bus","",845],["trolleybus","",846],["minibus","",847],["ambulance","",848],["fire_engine","",849],["police_car","",850],["oncoming_police_car","",851],["taxi","",852],["oncoming_taxi","",853],["car","",854],["red_car","",854],["oncoming_automobile","",855],["blue_car","",856],["pickup_truck","",857],["truck","",858],["articulated_lorry","",859],["tractor","",860],["racing_car","",861],["motorcycle","",862],["motor_scooter","",863],["manual_wheelchair","",864],["motorized_wheelchair","",865],["auto_rickshaw","",866],["bike","",867],["kick_scooter","",868],["skateboard","",869],["roller_skate","",870],["busstop","",871],["motorway","",872],["railway_track","",873],["oil_drum","",874],["fuelpump","",875],["rotating_light","",876],["traffic_light","",877],["vertical_traffic_light","",878],["stop_sign","",879],["construction","",880],["anchor","",881],["boat","",882],["sailboat","",882],["canoe","",883],["speedboat","",884],["passenger_ship","",885],["ferry","",886],["motor_boat","",887],["ship","",888],["airplane","",889],["small_airplane","",890],["flight_departure","",891],["flight_arrival","",892],["parachute","",893],["seat","",894],["helicopter","",895],["suspension_railway","",896],["mountain_cableway","",897],["aerial_tramway","",898],["artificial_satellite","",899],["rocket","",900],["flying_saucer","",901],["bellhop_bell","",902],["luggage","",903],["hourglass","",904],["hourglass_flowing_sand","",905],["watch","",906],["alarm_clock","",907],["stopwatch","",908],["timer_clock","",909],["mantelpiece_clock","",910],["clock12","",911],["clock1230","",912],["clock1","",913],["clock130","",914],["clock2","",915],["clock230","",916],["clock3","",917],["clock330","",918],["clock4","",919],["clock430","",920],["clock5","",921],["clock530","",922],["clock6","",923],["clock630","",924],["clock7","",925],["clock730","",926],["clock8","",927],["clock830","",928],["clock9","",929],["clock930","",930],["clock10","",931],["clock1030","",932],["clock11","",933],["clock1130","",934],["new_moon","",935],["waxing_crescent_moon","",936],["first_quarter_moon","",937],["moon","",938],["waxing_gibbous_moon","",938],["full_moon","",939],["waning_gibbous_moon","",940],["last_quarter_moon","",941],["waning_crescent_moon","",942],["crescent_moon","",943],["new_moon_with_face","",944],["first_quarter_moon_with_face","",945],["last_quarter_moon_with_face","",946],["thermometer","",947],["sunny","",948],["full_moon_with_face","",949],["sun_with_face","",950],["ringed_planet","",951],["star","",952],["star2","",953],["stars","",954],["milky_way","",955],["cloud","",956],["partly_sunny","",957],["cloud_with_lightning_and_rain","",958],["sun_behind_small_cloud","",959],["sun_behind_large_cloud","",960],["sun_behind_rain_cloud","",961],["cloud_with_rain","",962],["cloud_with_snow","",963],["cloud_with_lightning","",964],["tornado","",965],["fog","",966],["wind_face","",967],["cyclone","",968],["rainbow","",969],["closed_umbrella","",970],["open_umbrella","",971],["umbrella","",972],["parasol_on_ground","",973],["zap","",974],["snowflake","",975],["snowman_with_snow","",976],["snowman","",977],["comet","",978],["fire","",979],["droplet","",980],["ocean","",981],["jack_o_lantern","",982],["christmas_tree","",983],["fireworks","",984],["sparkler","",985],["firecracker","",986],["sparkles","",987],["balloon","",988],["tada","",989],["confetti_ball","",990],["tanabata_tree","",991],["bamboo","",992],["dolls","",993],["flags","",994],["wind_chime","",995],["rice_scene","",996],["red_envelope","",997],["ribbon","",998],["gift","",999],["reminder_ribbon","",1e3],["tickets","",1001],["ticket","",1002],["medal_military","",1003],["trophy","",1004],["medal_sports","",1005],["1st_place_medal","",1006],["2nd_place_medal","",1007],["3rd_place_medal","",1008],["soccer","",1009],["baseball","",1010],["softball","",1011],["basketball","",1012],["volleyball","",1013],["football","",1014],["rugby_football","",1015],["tennis","",1016],["flying_disc","",1017],["bowling","",1018],["cricket_game","",1019],["field_hockey","",1020],["ice_hockey","",1021],["lacrosse","",1022],["ping_pong","",1023],["badminton","",1024],["boxing_glove","",1025],["martial_arts_uniform","",1026],["goal_net","",1027],["golf","",1028],["ice_skate","",1029],["fishing_pole_and_fish","",1030],["diving_mask","",1031],["running_shirt_with_sash","",1032],["ski","",1033],["sled","",1034],["curling_stone","",1035],["dart","",1036],["yo_yo","",1037],["kite","",1038],["8ball","",1039],["crystal_ball","",1040],["magic_wand","",1041],["nazar_amulet","",1042],["video_game","",1043],["joystick","",1044],["slot_machine","",1045],["game_die","",1046],["jigsaw","",1047],["teddy_bear","",1048],["pi_ata","",1049],["nesting_dolls","",1050],["spades","",1051],["hearts","",1052],["diamonds","",1053],["clubs","",1054],["chess_pawn","",1055],["black_joker","",1056],["mahjong","",1057],["flower_playing_cards","",1058],["performing_arts","",1059],["framed_picture","",1060],["art","",1061],["thread","",1062],["sewing_needle","",1063],["yarn","",1064],["knot","",1065],["eyeglasses","",1066],["dark_sunglasses","",1067],["goggles","",1068],["lab_coat","",1069],["safety_vest","",1070],["necktie","",1071],["shirt","",1072],["tshirt","",1072],["jeans","",1073],["scarf","",1074],["gloves","",1075],["coat","",1076],["socks","",1077],["dress","",1078],["kimono","",1079],["sari","",1080],["one_piece_swimsuit","",1081],["swim_brief","",1082],["shorts","",1083],["bikini","",1084],["womans_clothes","",1085],["purse","",1086],["handbag","",1087],["pouch","",1088],["shopping","",1089],["school_satchel","",1090],["thong_sandal","",1091],["mans_shoe","",1092],["shoe","",1092],["athletic_shoe","",1093],["hiking_boot","",1094],["flat_shoe","",1095],["high_heel","",1096],["sandal","",1097],["ballet_shoes","",1098],["boot","",1099],["crown","",1100],["womans_hat","",1101],["tophat","",1102],["mortar_board","",1103],["billed_cap","",1104],["military_helmet","",1105],["rescue_worker_helmet","",1106],["prayer_beads","",1107],["lipstick","",1108],["ring","",1109],["gem","",1110],["mute","",1111],["speaker","",1112],["sound","",1113],["loud_sound","",1114],["loudspeaker","",1115],["mega","",1116],["postal_horn","",1117],["bell","",1118],["no_bell","",1119],["musical_score","",1120],["musical_note","",1121],["notes","",1122],["studio_microphone","",1123],["level_slider","",1124],["control_knobs","",1125],["microphone","",1126],["headphones","",1127],["radio","",1128],["saxophone","",1129],["accordion","",1130],["guitar","",1131],["musical_keyboard","",1132],["trumpet","",1133],["violin","",1134],["banjo","",1135],["drum","",1136],["long_drum","",1137],["iphone","",1138],["calling","",1139],["phone","",1140],["telephone","",1140],["telephone_receiver","",1141],["pager","",1142],["fax","",1143],["battery","",1144],["electric_plug","",1145],["computer","",1146],["desktop_computer","",1147],["printer","",1148],["keyboard","",1149],["computer_mouse","",1150],["trackball","",1151],["minidisc","",1152],["floppy_disk","",1153],["cd","",1154],["dvd","",1155],["abacus","",1156],["movie_camera","",1157],["film_strip","",1158],["film_projector","",1159],["clapper","",1160],["tv","",1161],["camera","",1162],["camera_flash","",1163],["video_camera","",1164],["vhs","",1165],["mag","",1166],["mag_right","",1167],["candle","",1168],["bulb","",1169],["flashlight","",1170],["izakaya_lantern","",1171],["lantern","",1171],["diya_lamp","",1172],["notebook_with_decorative_cover","",1173],["closed_book","",1174],["book","",1175],["open_book","",1175],["green_book","",1176],["blue_book","",1177],["orange_book","",1178],["books","",1179],["notebook","",1180],["ledger","",1181],["page_with_curl","",1182],["scroll","",1183],["page_facing_up","",1184],["newspaper","",1185],["newspaper_roll","",1186],["bookmark_tabs","",1187],["bookmark","",1188],["label","",1189],["moneybag","",1190],["coin","",1191],["yen","",1192],["dollar","",1193],["euro","",1194],["pound","",1195],["money_with_wings","",1196],["credit_card","",1197],["receipt","",1198],["chart","",1199],["email","",1200],["envelope","",1200],["e-mail","",1201],["incoming_envelope","",1202],["envelope_with_arrow","",1203],["outbox_tray","",1204],["inbox_tray","",1205],["package","",1206],["mailbox","",1207],["mailbox_closed","",1208],["mailbox_with_mail","",1209],["mailbox_with_no_mail","",1210],["postbox","",1211],["ballot_box","",1212],["pencil2","",1213],["black_nib","",1214],["fountain_pen","",1215],["pen","",1216],["paintbrush","",1217],["crayon","",1218],["memo","",1219],["pencil","",1219],["briefcase","",1220],["file_folder","",1221],["open_file_folder","",1222],["card_index_dividers","",1223],["date","",1224],["calendar","",1225],["spiral_notepad","",1226],["spiral_calendar","",1227],["card_index","",1228],["chart_with_upwards_trend","",1229],["chart_with_downwards_trend","",1230],["bar_chart","",1231],["clipboard","",1232],["pushpin","",1233],["round_pushpin","",1234],["paperclip","",1235],["paperclips","",1236],["straight_ruler","",1237],["triangular_ruler","",1238],["scissors","",1239],["card_file_box","",1240],["file_cabinet","",1241],["wastebasket","",1242],["lock","",1243],["unlock","",1244],["lock_with_ink_pen","",1245],["closed_lock_with_key","",1246],["key","",1247],["old_key","",1248],["hammer","",1249],["axe","",1250],["pick","",1251],["hammer_and_pick","",1252],["hammer_and_wrench","",1253],["dagger","",1254],["crossed_swords","",1255],["gun","",1256],["boomerang","",1257],["bow_and_arrow","",1258],["shield","",1259],["carpentry_saw","",1260],["wrench","",1261],["screwdriver","",1262],["nut_and_bolt","",1263],["gear","",1264],["clamp","",1265],["balance_scale","",1266],["probing_cane","",1267],["link","",1268],["chains","",1269],["hook","",1270],["toolbox","",1271],["magnet","",1272],["ladder","",1273],["alembic","",1274],["test_tube","",1275],["petri_dish","",1276],["dna","",1277],["microscope","",1278],["telescope","",1279],["satellite","",1280],["syringe","",1281],["drop_of_blood","",1282],["pill","",1283],["adhesive_bandage","",1284],["stethoscope","",1285],["door","",1286],["elevator","",1287],["mirror","",1288],["window","",1289],["bed","",1290],["couch_and_lamp","",1291],["chair","",1292],["toilet","",1293],["plunger","",1294],["shower","",1295],["bathtub","",1296],["mouse_trap","",1297],["razor","",1298],["lotion_bottle","",1299],["safety_pin","",1300],["broom","",1301],["basket","",1302],["roll_of_paper","",1303],["bucket","",1304],["soap","",1305],["toothbrush","",1306],["sponge","",1307],["fire_extinguisher","",1308],["shopping_cart","",1309],["smoking","",1310],["coffin","",1311],["headstone","",1312],["funeral_urn","",1313],["moyai","",1314],["placard","",1315],["atm","",1316],["put_litter_in_its_place","",1317],["potable_water","",1318],["wheelchair","",1319],["mens","",1320],["womens","",1321],["restroom","",1322],["baby_symbol","",1323],["wc","",1324],["passport_control","",1325],["customs","",1326],["baggage_claim","",1327],["left_luggage","",1328],["warning","",1329],["children_crossing","",1330],["no_entry","",1331],["no_entry_sign","",1332],["no_bicycles","",1333],["no_smoking","",1334],["do_not_litter","",1335],["non-potable_water","",1336],["no_pedestrians","",1337],["no_mobile_phones","",1338],["underage","",1339],["radioactive","",1340],["biohazard","",1341],["arrow_up","",1342],["arrow_upper_right","",1343],["arrow_right","",1344],["arrow_lower_right","",1345],["arrow_down","",1346],["arrow_lower_left","",1347],["arrow_left","",1348],["arrow_upper_left","",1349],["arrow_up_down","",1350],["left_right_arrow","",1351],["leftwards_arrow_with_hook","",1352],["arrow_right_hook","",1353],["arrow_heading_up","",1354],["arrow_heading_down","",1355],["arrows_clockwise","",1356],["arrows_counterclockwise","",1357],["back","",1358],["end","",1359],["on","",1360],["soon","",1361],["top","",1362],["place_of_worship","",1363],["atom_symbol","",1364],["om","",1365],["star_of_david","",1366],["wheel_of_dharma","",1367],["yin_yang","",1368],["latin_cross","",1369],["orthodox_cross","",1370],["star_and_crescent","",1371],["peace_symbol","",1372],["menorah","",1373],["six_pointed_star","",1374],["aries","",1375],["taurus","",1376],["gemini","",1377],["cancer","",1378],["leo","",1379],["virgo","",1380],["libra","",1381],["scorpius","",1382],["sagittarius","",1383],["capricorn","",1384],["aquarius","",1385],["pisces","",1386],["ophiuchus","",1387],["twisted_rightwards_arrows","",1388],["repeat","",1389],["repeat_one","",1390],["arrow_forward","",1391],["fast_forward","",1392],["next_track_button","",1393],["play_or_pause_button","",1394],["arrow_backward","",1395],["rewind","",1396],["previous_track_button","",1397],["arrow_up_small","",1398],["arrow_double_up","",1399],["arrow_down_small","",1400],["arrow_double_down","",1401],["pause_button","",1402],["stop_button","",1403],["record_button","",1404],["eject_button","",1405],["cinema","",1406],["low_brightness","",1407],["high_brightness","",1408],["signal_strength","",1409],["vibration_mode","",1410],["mobile_phone_off","",1411],["female_sign","",1412],["male_sign","",1413],["transgender_symbol","",1414],["heavy_multiplication_x","",1415],["heavy_plus_sign","",1416],["heavy_minus_sign","",1417],["heavy_division_sign","",1418],["infinity","",1419],["bangbang","",1420],["interrobang","",1421],["question","",1422],["grey_question","",1423],["grey_exclamation","",1424],["exclamation","",1425],["heavy_exclamation_mark","",1425],["wavy_dash","",1426],["currency_exchange","",1427],["heavy_dollar_sign","",1428],["medical_symbol","",1429],["recycle","",1430],["fleur_de_lis","",1431],["trident","",1432],["name_badge","",1433],["beginner","",1434],["o","",1435],["white_check_mark","",1436],["ballot_box_with_check","",1437],["heavy_check_mark","",1438],["x","",1439],["negative_squared_cross_mark","",1440],["curly_loop","",1441],["loop","",1442],["part_alternation_mark","",1443],["eight_spoked_asterisk","",1444],["eight_pointed_black_star","",1445],["sparkle","",1446],["copyright","",1447],["registered","",1448],["tm","",1449],["hash","#",1450],["asterisk","*",1451],["zero","0",1452],["one","1",1453],["two","2",1454],["three","3",1455],["four","4",1456],["five","5",1457],["six","6",1458],["seven","7",1459],["eight","8",1460],["nine","9",1461],["keycap_ten","",1462],["capital_abcd","",1463],["abcd","",1464],["1234","",1465],["symbols","",1466],["abc","",1467],["a","",1468],["ab","",1469],["b","",1470],["cl","",1471],["cool","",1472],["free","",1473],["information_source","",1474],["id","",1475],["m","",1476],["new","",1477],["ng","",1478],["o2","",1479],["ok","",1480],["parking","",1481],["sos","",1482],["up","",1483],["vs","",1484],["koko","",1485],["sa","",1486],["u6708","",1487],["u6709","",1488],["u6307","",1489],["ideograph_advantage","",1490],["u5272","",1491],["u7121","",1492],["u7981","",1493],["accept","",1494],["u7533","",1495],["u5408","",1496],["u7a7a","",1497],["congratulations","",1498],["secret","",1499],["u55b6","",1500],["u6e80","",1501],["red_circle","",1502],["orange_circle","",1503],["yellow_circle","",1504],["green_circle","",1505],["large_blue_circle","",1506],["purple_circle","",1507],["brown_circle","",1508],["black_circle","",1509],["white_circle","",1510],["red_square","",1511],["orange_square","",1512],["yellow_square","",1513],["green_square","",1514],["blue_square","",1515],["purple_square","",1516],["brown_square","",1517],["black_large_square","",1518],["white_large_square","",1519],["black_medium_square","",1520],["white_medium_square","",1521],["black_medium_small_square","",1522],["white_medium_small_square","",1523],["black_small_square","",1524],["white_small_square","",1525],["large_orange_diamond","",1526],["large_blue_diamond","",1527],["small_orange_diamond","",1528],["small_blue_diamond","",1529],["small_red_triangle","",1530],["small_red_triangle_down","",1531],["diamond_shape_with_a_dot_inside","",1532],["radio_button","",1533],["white_square_button","",1534],["black_square_button","",1535],["checkered_flag","",1536],["triangular_flag_on_post","",1537],["crossed_flags","",1538],["black_flag","",1539],["white_flag","",1540],["rainbow_flag","",1541],["transgender_flag","",1542],["pirate_flag","",1543],["ascension_island","",1544],["andorra","",1545],["united_arab_emirates","",1546],["afghanistan","",1547],["antigua_barbuda","",1548],["anguilla","",1549],["albania","",1550],["armenia","",1551],["angola","",1552],["antarctica","",1553],["argentina","",1554],["american_samoa","",1555],["austria","",1556],["australia","",1557],["aruba","",1558],["aland_islands","",1559],["azerbaijan","",1560],["bosnia_herzegovina","",1561],["barbados","",1562],["bangladesh","",1563],["belgium","",1564],["burkina_faso","",1565],["bulgaria","",1566],["bahrain","",1567],["burundi","",1568],["benin","",1569],["st_barthelemy","",1570],["bermuda","",1571],["brunei","",1572],["bolivia","",1573],["caribbean_netherlands","",1574],["brazil","",1575],["bahamas","",1576],["bhutan","",1577],["bouvet_island","",1578],["botswana","",1579],["belarus","",1580],["belize","",1581],["canada","",1582],["cocos_islands","",1583],["congo_kinshasa","",1584],["central_african_republic","",1585],["congo_brazzaville","",1586],["switzerland","",1587],["cote_divoire","",1588],["cook_islands","",1589],["chile","",1590],["cameroon","",1591],["cn","",1592],["colombia","",1593],["clipperton_island","",1594],["costa_rica","",1595],["cuba","",1596],["cape_verde","",1597],["curacao","",1598],["christmas_island","",1599],["cyprus","",1600],["czech_republic","",1601],["de","",1602],["diego_garcia","",1603],["djibouti","",1604],["denmark","",1605],["dominica","",1606],["dominican_republic","",1607],["algeria","",1608],["ceuta_melilla","",1609],["ecuador","",1610],["estonia","",1611],["egypt","",1612],["western_sahara","",1613],["eritrea","",1614],["es","",1615],["ethiopia","",1616],["eu","",1617],["european_union","",1617],["finland","",1618],["fiji","",1619],["falkland_islands","",1620],["micronesia","",1621],["faroe_islands","",1622],["fr","",1623],["gabon","",1624],["gb","",1625],["uk","",1625],["grenada","",1626],["georgia","",1627],["french_guiana","",1628],["guernsey","",1629],["ghana","",1630],["gibraltar","",1631],["greenland","",1632],["gambia","",1633],["guinea","",1634],["guadeloupe","",1635],["equatorial_guinea","",1636],["greece","",1637],["south_georgia_south_sandwich_islands","",1638],["guatemala","",1639],["guam","",1640],["guinea_bissau","",1641],["guyana","",1642],["hong_kong","",1643],["heard_mcdonald_islands","",1644],["honduras","",1645],["croatia","",1646],["haiti","",1647],["hungary","",1648],["canary_islands","",1649],["indonesia","",1650],["ireland","",1651],["israel","",1652],["isle_of_man","",1653],["india","",1654],["british_indian_ocean_territory","",1655],["iraq","",1656],["iran","",1657],["iceland","",1658],["it","",1659],["jersey","",1660],["jamaica","",1661],["jordan","",1662],["jp","",1663],["kenya","",1664],["kyrgyzstan","",1665],["cambodia","",1666],["kiribati","",1667],["comoros","",1668],["st_kitts_nevis","",1669],["north_korea","",1670],["kr","",1671],["kuwait","",1672],["cayman_islands","",1673],["kazakhstan","",1674],["laos","",1675],["lebanon","",1676],["st_lucia","",1677],["liechtenstein","",1678],["sri_lanka","",1679],["liberia","",1680],["lesotho","",1681],["lithuania","",1682],["luxembourg","",1683],["latvia","",1684],["libya","",1685],["morocco","",1686],["monaco","",1687],["moldova","",1688],["montenegro","",1689],["st_martin","",1690],["madagascar","",1691],["marshall_islands","",1692],["macedonia","",1693],["mali","",1694],["myanmar","",1695],["mongolia","",1696],["macau","",1697],["northern_mariana_islands","",1698],["martinique","",1699],["mauritania","",1700],["montserrat","",1701],["malta","",1702],["mauritius","",1703],["maldives","",1704],["malawi","",1705],["mexico","",1706],["malaysia","",1707],["mozambique","",1708],["namibia","",1709],["new_caledonia","",1710],["niger","",1711],["norfolk_island","",1712],["nigeria","",1713],["nicaragua","",1714],["netherlands","",1715],["norway","",1716],["nepal","",1717],["nauru","",1718],["niue","",1719],["new_zealand","",1720],["oman","",1721],["panama","",1722],["peru","",1723],["french_polynesia","",1724],["papua_new_guinea","",1725],["philippines","",1726],["pakistan","",1727],["poland","",1728],["st_pierre_miquelon","",1729],["pitcairn_islands","",1730],["puerto_rico","",1731],["palestinian_territories","",1732],["portugal","",1733],["palau","",1734],["paraguay","",1735],["qatar","",1736],["reunion","",1737],["romania","",1738],["serbia","",1739],["ru","",1740],["rwanda","",1741],["saudi_arabia","",1742],["solomon_islands","",1743],["seychelles","",1744],["sudan","",1745],["sweden","",1746],["singapore","",1747],["st_helena","",1748],["slovenia","",1749],["svalbard_jan_mayen","",1750],["slovakia","",1751],["sierra_leone","",1752],["san_marino","",1753],["senegal","",1754],["somalia","",1755],["suriname","",1756],["south_sudan","",1757],["sao_tome_principe","",1758],["el_salvador","",1759],["sint_maarten","",1760],["syria","",1761],["swaziland","",1762],["tristan_da_cunha","",1763],["turks_caicos_islands","",1764],["chad","",1765],["french_southern_territories","",1766],["togo","",1767],["thailand","",1768],["tajikistan","",1769],["tokelau","",1770],["timor_leste","",1771],["turkmenistan","",1772],["tunisia","",1773],["tonga","",1774],["tr","",1775],["trinidad_tobago","",1776],["tuvalu","",1777],["taiwan","",1778],["tanzania","",1779],["ukraine","",1780],["uganda","",1781],["us_outlying_islands","",1782],["united_nations","",1783],["us","",1784],["uruguay","",1785],["uzbekistan","",1786],["vatican_city","",1787],["st_vincent_grenadines","",1788],["venezuela","",1789],["british_virgin_islands","",1790],["us_virgin_islands","",1791],["vietnam","",1792],["vanuatu","",1793],["wallis_futuna","",1794],["samoa","",1795],["kosovo","",1796],["yemen","",1797],["mayotte","",1798],["south_africa","",1799],["zambia","",1800],["zimbabwe","",1801],["england","",1802],["scotland","",1803],["wales","",1804]],hj=lPt.map(t=>[t[0],t[1]]),HN=Object.fromEntries(hj);function cPt(){return m.jsx(uPt,{emojiSuggestKey:pj})}function uPt({emojiSuggestKey:t}){const e=At(),{tooltipContentDOM:n,getEmojiGroups:r,maxItems:o,squareSide:s,squareMargin:i,rowWidth:a,palettePadding:l,selectedEmojiSquareId:c,suggestTooltipKey:u}=Tc(t),{counter:d,triggerText:f,show:p}=Tc(u);return Co.createPortal(m.jsxs("div",{className:"shadow-2xl bg-colorBgLayerFloat",children:[m.jsx("div",{className:"bangle-emoji-suggest bg-colorBgLayerFloat text-colorNeutralText b-0",style:{padding:l},children:m.jsx("div",{style:{width:a,display:"flex",justifyContent:"center"},children:p&&m.jsx(dPt,{view:e,rowWidth:a,squareMargin:i,squareSide:s,maxItems:o,emojiSuggestKey:t,getEmojiGroups:r,triggerText:f,counter:d,selectedEmojiSquareId:c})})}),m.jsxs(Hr,{className:"bg-colorNeutralBgLayerFloat",children:[m.jsxs(Le,{children:[m.jsx("kbd",{className:"font-normal",children:""})," Navigate"]}),m.jsxs(Le,{children:[m.jsx("kbd",{className:"font-normal",children:"Enter"})," Select Emoji"]}),m.jsxs(Le,{children:[m.jsx("kbd",{className:"font-normal",children:"Esc"})," Dismiss"]})]})]}),n)}function dPt({view:t,rowWidth:e,squareMargin:n,squareSide:r,emojiSuggestKey:o,getEmojiGroups:s,triggerText:i,counter:a,selectedEmojiSquareId:l,maxItems:c}){const u=v.useMemo(()=>s(i),[s,i]),{containerWidth:d}=fj({rowWidth:e,squareMargin:n,squareSide:r}),{item:f}=dj(a,u),p=v.useCallback(h=>{Iy(o,h)(t.state,t.dispatch,t)},[t,o]);return v.useEffect(()=>{u.every(h=>h.emojis.length===0)&&Kn.removeSuggestMark(o)(t.state,t.dispatch,t)},[u,o,t]),m.jsx("div",{className:"bangle-emoji-suggest-container",style:{width:d},children:u.map(({name:h,emojis:y},g)=>m.jsxs("div",{className:"bangle-emoji-suggest-group",children:[h&&m.jsx("span",{children:h}),m.jsx("div",{children:y.slice(0,c).map(([b,w],x)=>m.jsx(fPt,{isSelected:(f==null?void 0:f[0])===b,emoji:w,emojiAlias:b,onSelectEmoji:p,selectedEmojiSquareId:l,style:{margin:n,width:r,height:r,lineHeight:r+"px",fontSize:Math.max(r-7,4)}},b))})]},h||g))})}function fPt({isSelected:t,emoji:e,emojiAlias:n,onSelectEmoji:r,style:o,selectedEmojiSquareId:s}){return m.jsx("button",{className:`bangle-emoji-square ${t?"bangle-is-selected":""}`,id:t?s:void 0,onClick:i=>{i.preventDefault(),r(n)},style:o,children:e})}const pPt=t=>t.dom.parentElement,hPt=500;function mPt(t=""){return[{name:"",emojis:hj.filter(([n])=>n?n.includes(t):!1).slice(0,hPt)}]}const gPt=Tt.create({name:$E,editor:{specs:[qN.spec({getEmoji:t=>HN[t]||""}),VN.spec({markName:UN})],plugins:[qN.plugins(),VN.plugins({key:pj,getEmojiGroups:t=>mPt(t),markName:UN,tooltipRenderOpts:{getScrollContainer:pPt,placement:"bottom"}})],markdownItPlugins:[[VNt,{defs:HN}]],ReactComponent:cPt}});function Ji(){return Ji=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ji.apply(this,arguments)}function yPt(t,e){if(t==null)return{};var n={},r=Object.keys(t),o,s;for(s=0;s<r.length;s++)o=r[s],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}var bPt=["bottom","height","left","right","top","width"],vPt=function(e,n){return e===void 0&&(e={}),n===void 0&&(n={}),bPt.some(function(r){return e[r]!==n[r]})},Ts=new Map,mj,wPt=function t(){var e=[];Ts.forEach(function(n,r){var o=r.getBoundingClientRect();vPt(o,n.rect)&&(n.rect=o,e.push(n))}),e.forEach(function(n){n.callbacks.forEach(function(r){return r(n.rect)})}),mj=window.requestAnimationFrame(t)};function xPt(t,e){return{observe:function(){var r=Ts.size===0;Ts.has(t)?Ts.get(t).callbacks.push(e):Ts.set(t,{rect:void 0,hasRectChanged:!1,callbacks:[e]}),r&&wPt()},unobserve:function(){var r=Ts.get(t);if(r){var o=r.callbacks.indexOf(e);o>=0&&r.callbacks.splice(o,1),r.callbacks.length||Ts.delete(t),Ts.size||cancelAnimationFrame(mj)}}}}var Fg=typeof window!="undefined"?P.useLayoutEffect:P.useEffect;function kPt(t,e){e===void 0&&(e={width:0,height:0});var n=P.useState(t.current),r=n[0],o=n[1],s=P.useReducer(_Pt,e),i=s[0],a=s[1],l=P.useRef(!1);return Fg(function(){t.current!==r&&o(t.current)}),Fg(function(){if(r&&!l.current){l.current=!0;var c=r.getBoundingClientRect();a({rect:c})}},[r]),P.useEffect(function(){if(r){var c=xPt(r,function(u){a({rect:u})});return c.observe(),function(){c.unobserve()}}},[r]),i}function _Pt(t,e){var n=e.rect;return t.height!==n.height||t.width!==n.width?n:t}var $Pt=function(){return 50},EPt=function(e){return e},SPt=function(e,n){var r=n?"offsetWidth":"offsetHeight";return e[r]},CPt=function(e){for(var n=Math.max(e.start-e.overscan,0),r=Math.min(e.end+e.overscan,e.size-1),o=[],s=n;s<=r;s++)o.push(s);return o};function TPt(t){var e,n=t.size,r=n===void 0?0:n,o=t.estimateSize,s=o===void 0?$Pt:o,i=t.overscan,a=i===void 0?1:i,l=t.paddingStart,c=l===void 0?0:l,u=t.paddingEnd,d=u===void 0?0:u,f=t.parentRef,p=t.horizontal,h=t.scrollToFn,y=t.useObserver,g=t.initialRect,b=t.onScrollElement,w=t.scrollOffsetFn,x=t.keyExtractor,k=x===void 0?EPt:x,S=t.measureSize,_=S===void 0?SPt:S,C=t.rangeExtractor,$=C===void 0?CPt:C,T=p?"width":"height",A=p?"scrollLeft":"scrollTop",N=P.useRef({scrollOffset:0,measurements:[]}),q=P.useState(0),O=q[0],E=q[1];N.current.scrollOffset=O;var D=y||kPt,R=D(f,g),j=R[T];N.current.outerSize=j;var we=P.useCallback(function(Re){f.current&&(f.current[A]=Re)},[f,A]),Oe=h||we;h=P.useCallback(function(Re){Oe(Re,we)},[we,Oe]);var ee=P.useState({}),z=ee[0],F=ee[1],B=P.useCallback(function(){return F({})},[]),W=P.useRef([]),K=P.useMemo(function(){var Re=W.current.length>0?Math.min.apply(Math,W.current):0;W.current=[];for(var Me=N.current.measurements.slice(0,Re),Ae=Re;Ae<r;Ae++){var dt=k(Ae),ft=z[dt],On=Me[Ae-1]?Me[Ae-1].end:c,In=typeof ft=="number"?ft:s(Ae),Rn=On+In;Me[Ae]={index:Ae,start:On,size:In,end:Rn,key:dt}}return Me},[s,z,c,r,k]),Ce=(((e=K[r-1])==null?void 0:e.end)||c)+d;N.current.measurements=K,N.current.totalSize=Ce;var Te=b?b.current:f.current,Se=P.useRef(w);Se.current=w,Fg(function(){if(!Te){E(0);return}var Re=function(Ae){var dt=Se.current?Se.current(Ae):Te[A];E(dt)};return Re(),Te.addEventListener("scroll",Re,{capture:!1,passive:!0}),function(){Te.removeEventListener("scroll",Re)}},[Te,A]);var gt=NPt(N.current),ws=gt.start,Gr=gt.end,Oo=P.useMemo(function(){return $({start:ws,end:Gr,overscan:a,size:K.length})},[ws,Gr,a,K.length,$]),be=P.useRef(_);be.current=_;var je=P.useMemo(function(){for(var Re=[],Me=function(On,In){var Rn=Oo[On],ji=K[Rn],Jr=Ji(Ji({},ji),{},{measureRef:function(Ip){if(Ip){var Dy=be.current(Ip,p);if(Dy!==Jr.size){var AE=N.current.scrollOffset;Jr.start<AE&&we(AE+(Dy-Jr.size)),W.current.push(Rn),F(function($j){var Ly;return Ji(Ji({},$j),{},(Ly={},Ly[Jr.key]=Dy,Ly))})}}}});Re.push(Jr)},Ae=0,dt=Oo.length;Ae<dt;Ae++)Me(Ae);return Re},[Oo,we,p,K]),Ie=P.useRef(!1);Fg(function(){Ie.current&&F({}),Ie.current=!0},[s]);var xs=P.useCallback(function(Re,Me){var Ae=Me===void 0?{}:Me,dt=Ae.align,ft=dt===void 0?"start":dt,On=N.current,In=On.scrollOffset,Rn=On.outerSize;ft==="auto"&&(Re<=In?ft="start":Re>=In+Rn?ft="end":ft="start"),ft==="start"?h(Re):ft==="end"?h(Re-Rn):ft==="center"&&h(Re-Rn/2)},[h]),Io=P.useCallback(function(Re,Me){var Ae=Me===void 0?{}:Me,dt=Ae.align,ft=dt===void 0?"auto":dt,On=yPt(Ae,["align"]),In=N.current,Rn=In.measurements,ji=In.scrollOffset,Jr=In.outerSize,ks=Rn[Math.max(0,Math.min(Re,r-1))];if(ks){if(ft==="auto")if(ks.end>=ji+Jr)ft="end";else if(ks.start<=ji)ft="start";else return;var Ip=ft==="center"?ks.start+ks.size/2:ft==="end"?ks.end:ks.start;xs(Ip,Ji({align:ft},On))}},[xs,r]),Zr=P.useCallback(function(){for(var Re=arguments.length,Me=new Array(Re),Ae=0;Ae<Re;Ae++)Me[Ae]=arguments[Ae];Io.apply(void 0,Me),requestAnimationFrame(function(){Io.apply(void 0,Me)})},[Io]);return{virtualItems:je,totalSize:Ce,scrollToOffset:xs,scrollToIndex:Zr,measure:B}}var APt=function(e,n,r,o){for(;e<=n;){var s=(e+n)/2|0,i=r(s);if(i<o)e=s+1;else if(i>o)n=s-1;else return s}return e>0?e-1:0};function NPt(t){for(var e=t.measurements,n=t.outerSize,r=t.scrollOffset,o=e.length-1,s=function(c){return e[c].start},i=APt(0,o,s,r),a=i;a<o&&e[a].end<r+n;)a++;return{start:i,end:a}}function PPt(t){const e=new Set,n=t.map(o=>jM(o)[1]);n.forEach(o=>{let s=o,i;for(;(i=s.lastIndexOf("/"))!==-1&&(s=s.substring(0,i),!e.has(s));)e.add(s)});const r=(o,s)=>{const i=o.split("/"),a=s.split("/"),l=Math.min(i.length,a.length);for(let c=0;c<l;c++){const u=i[c],d=a[c];if(u!==d&&u&&d&&u!==d)return!e.has(o)&&i[c+1]===void 0?1:!e.has(s)&&a[c+1]===void 0?-1:u.localeCompare(d)}return o.localeCompare(s)};return{dirSet:e,filesAndDirList:[...e,...n].sort(r)}}const OPt=2,IPt=8,RPt=8,MPt=typeof window=="undefined"?16:parseFloat(getComputedStyle(document.documentElement).fontSize),DPt=1.5*MPt;function LPt(){const{widescreen:t}=Qa(),{wsName:e,openedWsPaths:n,noteWsPaths:r=[]}=vn(),{dispatchSerialOperation:o}=zt(),{primaryWsPath:s}=n,i=s?he(s).filePath:void 0,a=v.useCallback(()=>{t||f$()},[t]),l=v.useCallback(c=>{o({name:pc,value:{path:c}})},[o]);return e?r.length===0?m.jsx("div",{className:"flex flex-col items-center justify-center h-full",children:m.jsx("span",{className:"text-sm font-extrabold bangle-io_textColorLighter",children:"  "})}):m.jsx(jPt,{wsName:e,files:r,activeFilePath:i,closeSidebar:a,createNewFile:l}):m.jsx("div",{className:"flex flex-col items-center justify-center h-full",children:m.jsx("span",{className:"text-sm font-extrabold cursor-pointer bangle-io_textColorLighter",onClick:()=>{cy(Lt.Workspace)}})})}const Lv={height:16,width:16};function jPt({wsName:t,files:e,activeFilePath:n,closeSidebar:r,createNewFile:o}){const{filesAndDirList:s,dirSet:i}=v.useMemo(()=>PPt(e),[e]);return!t||s.length===0?null:m.jsx(FPt,{wsName:t,filesAndDirList:s,dirSet:i,activeFilePath:n,closeSidebar:r,createNewFile:o})}const FPt=({wsName:t,filesAndDirList:e,dirSet:n,activeFilePath:r,closeSidebar:o,createNewFile:s})=>{const[i,a]=La("RenderTree6261:"+t,()=>e.filter(h=>n.has(h)&&h.split("/").length===OPt)),l=v.useRef(i);v.useEffect(()=>{l.current=i},[i]),v.useEffect(()=>{if(r){const p=l.current.filter(h=>!r.startsWith(h+"/"));p.length<l.current.length&&a(p)}},[r,a]);const c=P.useRef(null),u=v.useMemo(()=>e.filter(p=>!i.some(h=>p.startsWith(h+"/"))),[e,i]),d=TPt({size:u.length,parentRef:c,overscan:60,estimateSize:P.useCallback(()=>DPt,[]),keyExtractor:v.useCallback(p=>u[p],[u])}),f=d.virtualItems.map(p=>{const h=u[p.index],y=n.has(h),g=fp(t,h),b=h.split("/"),w=b.length,x=$t(b.pop()||"Unknown file name"),k=S=>{if(y){a(_=>_.includes(h)?_.filter(C=>C!==h):[..._,h]);return}S.metaKey?kp(g):S.shiftKey?Ba(g):tl(g),o()};return m.jsx(BPt,{virtualRow:p,path:h,isDir:y,wsPath:g,name:x,depth:w,isActive:r===h,isCollapsed:i.includes(h),createNewFile:s,onClick:k},h)});return m.jsx("div",{ref:c,style:{height:"100%",overflow:"auto"},children:m.jsx("div",{style:{height:`${d.totalSize*1.5}px`,width:"100%",position:"relative"},children:f})})};function BPt({virtualRow:t,path:e,isDir:n,wsPath:r,name:o,depth:s,isActive:i,isCollapsed:a,onClick:l,createNewFile:c}){const u=v.useRef(null);return v.useEffect(()=>{i&&(vM||u.current&&j1(u.current,!1))},[i]),m.jsx("div",{ref:u,style:{position:"absolute",top:0,left:0,width:"100%",height:`${t.size}px`,transform:`translateY(${t.start*1.4}px)`},children:m.jsx(Ic,{isActive:i,onClick:l,titleClassName:"text-base truncate select-none",style:{paddingLeft:s*RPt,paddingRight:IPt},item:{uid:r,showDividerAbove:!1,title:o,leftNode:m.jsx(rr,{onClick:async d=>{},children:n?a?m.jsx("svg",{class:"w-4 h-4 mt-1.5 mr-1",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"2 2 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:m.jsx("path",{d:"m9 18 6-6-6-6"})}):m.jsx("svg",{class:"w-4 h-4 mt-1 mr-1",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:m.jsx("path",{d:"m18 15-6-6-6 6"})}):null}),leftHoverNode:n?null:m.jsx(rr,{hint:"New file",onClick:async d=>{d.stopPropagation(),s===0?c():c(e+"/")},hintPos:"bottom-right",children:m.jsx(sN,{style:Lv})}),rightHoverNode:n?m.jsx(rr,{hint:"New file",onClick:async d=>{d.stopPropagation(),s===0?c():c(e+"/")},hintPos:"bottom-right",children:m.jsx(sN,{style:Lv})}):m.jsx(rr,{hint:"Delete file",hintPos:"bottom-right",onClick:async d=>{d.stopPropagation(),window.confirm(`    "${o}"? `)&&g$(r)},children:m.jsx(uu,{style:Lv})})}})})}function zPt(){return m.jsx(t8,{className:"note-browser flex flex-col h-full",children:m.jsx("div",{className:"my-1 ml-4 mt-3 mr-3",children:m.jsx(LPt,{})})})}const qPt="@bangle.io/note-browser",KN="Mod-e",WPt=Tt.create({name:qPt,application:{operations:[{name:"operation::@bangle.io/note-browser:toggle-note-browser",title:"Show/Hide Notes Browser",keybinding:KN,hidden:!0,keywords:["hide","note browser","note sidebar","notes sidebar","all notes","file","files","explorer"]}],sidebars:[{name:"sidebar::@bangle.io/note-browser:note-browser",title:" ",hint:`Note browser
`+Jc(KN),activitybarIcon:P.createElement(BSt,{}),ReactComponent:zPt}],operationHandler(){return{handle(t){switch(t.name){case"operation::@bangle.io/note-browser:toggle-note-browser":return p5("sidebar::@bangle.io/note-browser:note-browser"),!0;default:return!1}}}}}}),Ad=new Ee("note-outline_watchHeadingsPluginKey"),VPt=100,UPt=250,ax="operation::@bangle.io/note-outline:watch-headings-plugin-state-update",HPt=2500;function KPt(){const{focusedEditorId:t,primaryEditor:e}=c$(),{wsName:n}=vn(),[r,o]=v.useState(),s=v.useRef(0),i=v.useMemo(()=>r==null?void 0:r.find(c=>c.hasContentInsideViewport),[r]);GPt(i,s);const a=v.useCallback(()=>{var d;let c=t!=null&&((d=$f(t))==null?void 0:d.view.state);if(c||(c=e==null?void 0:e.view.state),!c){o(void 0);return}const u=Ad.getState(c);u&&o(u.headings)},[t,e]);N5(c=>{var u;if(c.name===ax){const d=(u=c.value)==null?void 0:u.editorId;return t==null||d!==t?!1:(a(),!0)}return!1},[a,t]);const l=v.useCallback(c=>{const u=t!=null&&$f(t);if(u){if(!u||u.destroyed)return;u.focusView();const{dispatch:d,state:f}=u.view,p=f.tr;s.current=Date.now(),d(p.setSelection(Q.near(p.doc.resolve(c.offset))).scrollIntoView())}},[t]);return v.useEffect(()=>{a()},[n,a]),m.jsxs("div",{className:"note-outline_container flex flex-col",children:[(!r||r.length===0)&&m.jsxs("span",{children:[" No headings found!",m.jsx("br",{}),m.jsx("span",{className:"font-light",children:"Create heading by typing # followed by a space."})]}),r==null?void 0:r.map((c,u)=>{let d="";const f=i===c;return f&&(d="note-outline_first-node-in-viewport"),c.isActive,m.jsx(qe,{variant:c.isActive?"solid":f?"soft":"transparent",tone:c.isActive?"promote":"neutral",ariaLabel:c.title,size:"sm",className:d,onPress:()=>{l(c)},justifyContent:"flex-start",style:{paddingLeft:12*(c.level-1),paddingTop:4,paddingBottom:4,whiteSpace:"nowrap"},text:m.jsx("span",{className:"pl-1",children:c.title||`<Empty heading-${c.level}>`})},c.title+u)})]})}function GPt(t,e){const n=v.useRef(!1),r=v.useCallback(()=>{if(Date.now()-e.current<HPt)return;const o=document.querySelector(".note-outline_container .note-outline_first-node-in-viewport");o instanceof HTMLElement&&Yc(()=>j1(o,!1)),n.current=!1},[e]);v.useEffect(()=>{let o=null;return n.current||(n.current=!0,o=F1(r)),()=>{o!=null&&ig(o),n.current=!1}},[t,r])}function jv(t){return g1.getState(t)}function ZPt(){let t={init(e,n){const r=jv(n);return r||console.warn("note-outline expects editorIntersectionObserverPluginState"),{headings:GN(n,r)}},apply(e,n,r,o){const s=e.getMeta(Ad),i=jv(o),a=i!==jv(r);return s||a?{...n,headings:GN(o,i)}:n}};return new xe({key:Ad,state:t,view(e){let n=A_(()=>{!e.isDestroyed&&e.hasFocus()&&e.dispatch(e.state.tr.setMeta(Ad,!0))},{wait:VPt,maxWait:UPt});return{update(r,o){const{state:s}=r;o!==s&&(s.doc.eq(o.doc)&&s.selection.eq(o.selection)||n())},destroy(){n.cancel()}}}})}function GN(t,e){const n=[];t.doc.forEach((o,s,i)=>{if(o.type.name==="heading"){const a=JPt(s,e),l={offset:s,level:o.attrs.level,title:o.textContent,isActive:!1,hasContentInsideViewport:a};n.push(l)}});const r=ZN(t.selection.from,n);if(r&&(r.isActive=!0),e&&!n.some(s=>s.hasContentInsideViewport)){const s=ZN(e.minStartPosition,n);s&&(s.hasContentInsideViewport=!0)}return n}function ZN(t,e){let n=1/0,r;for(const o of e){let s=t-o.offset;if(s>=0&&s<n&&(n=s,r=o),s<0)break}return r}function JPt(t,e){return e?t>=e.minStartPosition&&t<=e.maxStartPosition:!1}const JN="@bangle.io/note-outline",YPt=Tt.create({name:JN,editor:{plugins:[ZPt()],watchPluginStates:[{operation:ax,pluginKey:Ad}]},application:{operations:[{name:ax,title:"headings plugin state has updated",hidden:!0}],noteSidebarWidgets:[{name:`note-sidebar-widget::${JN}`,ReactComponent:KPt,title:"Outline"}]}}),EE="@bangle.io/note-tags",gj=D1(EE+"-paletteMark"),Vo=new Ee(EE+"-key"),ka="tag",XPt="#!$%^&*()+|~=`{}[]:\";'<>?,.@\\",QPt="#";let yj=/(?:^|\s+)(#\w[\w-/]*)(?![\w-/#!$%^&*()+|~=`{}\[\]:";\'<>?,.\\@])/g,bj=!1;try{yj=new RegExp("(?<![\\w-/#!$%^&*()+|~=`{}\\[\\]:\";\\'<>?,.\\\\@])#\\w[\\w-/]*(?![\\w-/#!$%^&*()+|~=`{}\\[\\]:\";\\'<>?,.\\\\@])","g")}catch(t){if(!(t instanceof Error))throw t;if(t.message==="Invalid regular expression: invalid group specifier name")bj=!0;else throw t}const eOt=yj,tOt=bj,nOt=500,rOt=t=>t.dom.parentElement;function oOt(){return()=>[Hc.createPlugin({name:ka,containerDOM:["span",{style:"display: inline-block; color: pink;",class:"note-tag-container"}]}),st({Space:YN("Space"),...Object.fromEntries(XPt.split("").map(t=>[t,YN(t)]))})]}function sOt(){return()=>[gE({key:Vo,markName:gj,tooltipRenderOpts:{getScrollContainer:rOt}})]}function YN(t){return(e,n,r)=>{if(sj(Vo)(e)){const o=TAt(Vo)(e),{$from:s}=e.selection;let i=s.parent.textBetween(Math.max(0,s.parentOffset-nOt),s.parentOffset,void 0,"");if(t==="Space"){if(i==="#")return!1;if(o==="")return Vt(Vo,e.schema.text("# "))(e,n,r);const a=e.schema.nodes[ka];return up(a,"tag nodeType must be defined"),Vt(Vo,a.create({tagValue:o}))(e,n,r)}return Vt(Vo,e.schema.text("#"+o+t))(e,n,r)}return!1}}function iOt(){const{toDOM:t,parseDOM:e}=k1(ka,{tag:"span",parsingPriority:52}),n={type:"node",name:ka,schema:{attrs:{tagValue:{default:"tag"}},inline:!0,group:"inline",selectable:!1,atom:!0,draggable:!0,toDOM:t,allowGapCursor:!0,parseDOM:e},markdown:{toMarkdown:(r,o)=>{const{tagValue:s}=o.attrs;r.text("#"+s,!1)},parseMarkdown:{note_tag:{block:ka,getAttrs:r=>typeof r.payload=="string"?{tagValue:r.payload}:{tagValue:void 0},noCloseToken:!0}}}};return[mE({markName:gj,trigger:QPt}),n]}function aOt(t){gD(t,{tokenName:"note_tag",regex:eOt,getTokenDetails:(e,n,r)=>{let o=!1;return tOt&&e[0]===" "&&(e=e.slice(1),o=!0),{payload:e.slice(1),markup:e.slice(1),whiteSpaceBefore:o}}})}const lOt={[ka]:({nodeViewRenderArg:t})=>m.jsx(cOt,{tagValue:t.node.attrs.tagValue})};function cOt({tagValue:t}){const{dispatchSerialOperation:e}=zt(),n=v.useCallback(()=>{s5(e,t)},[t,e]);return m.jsxs("span",{className:"B-note-tags_inline-note-tag",onClick:n,children:["#",t]})}const uOt=16;function dOt(t){const e=new Set;return t.descendants((n,r,o)=>{n.type.name==="tag"&&e.add(n.attrs.tagValue)}),e}async function fOt(t,e,n){let r=!1;n==null||n.addEventListener("abort",s=>{r=!0},{once:!0});const o=new Set;for(const s of t){if(r)throw new DOMException("Aborted","AbortError");const i=await e(s);if(r)throw new DOMException("Aborted","AbortError");i&&dOt(i).forEach(l=>{o.add(l)})}return[...o]}function pOt(t,e){const{noteWsPaths:n=[]}=vn(),[r,o]=v.useState([]);v.useEffect(()=>{const i=new AbortController;return e&&fOt(n,l=>h$(l).catch(c=>{}),i.signal).then(l=>{console.log("allTags",l),o(l)}).catch(l=>{if(!Ja(l))throw l}),()=>{i.abort()}},[n,e]);const s=uE(r,t,{limit:uOt,tiebreakers:[cE],selector:i=>i});return v.useMemo(()=>{let i=s.map(a=>a.item);return console.log("search items",i),i},[s])}const XN=t=>(t=t.trim(),(e,n,r)=>{const o=e.schema.nodes[ka];return t===""?!1:(up(o,"tag nodeType must be defined"),Vt(Vo,o.create({tagValue:t}))(e,n,r))});function hOt(){const{query:t,counter:e,tooltipContentDOM:n,isVisible:r}=yE(Vo),o=pOt(t,r),s=v.useMemo(()=>{if(t.length>0){const a={description:"",uid:"create-tag",title:'Create a tag "'+t+'"',editorExecuteCommand:()=>XN(t)},l=o.map(c=>({description:c,uid:"existing-tag-"+c,title:c,editorExecuteCommand:()=>XN(c)}));return o.includes(t)?l:[a,...l]}return[]},[t,o]),{getItemProps:i}=bE(Vo,s,e,void 0);return Co.createPortal(m.jsxs("div",{className:"shadow-2xl B-ui-components_inline-palette-wrapper flex flex-col bg-colorNeutralBgLayerFloat",children:[m.jsx("div",{className:"B-ui-components_inline-palette-items-wrapper tag-picker-inline-palette",children:t?s.map((a,l)=>m.jsx(Oc,{dataId:"blah",...i(a,l),className:"palette-row tag-picker-inline-palette-item",title:a.title},a.uid)):m.jsx(Oc,{dataId:"searchNote",className:"palette-row",title:" Search for a tag"})}),m.jsxs(Hr,{children:[m.jsxs(Le,{children:[m.jsx("kbd",{className:"font-normal",children:""})," Navigate"]}),m.jsxs(Le,{children:[m.jsx("kbd",{className:"font-normal",children:"Enter"})," Add a tag"]}),m.jsxs(Le,{children:[m.jsx("kbd",{className:"font-normal",children:"Esc"})," Dismiss"]})]})]}),n)}const mOt=Tt.create({name:EE,editor:{ReactComponent:hOt,specs:[iOt()],highPriorityPlugins:[sOt()],plugins:[oOt()],renderReactNodeView:lOt,markdownItPlugins:[aOt]}}),gOt=10,QN="operation::@bangle.io/search-notes:show-search-sidebar",Fv="sidebar::@bangle.io/search-notes:search-notes",yOt="@bangle.io/search-notes";async function bOt(t,e,n,{caseSensitive:r=!1,maxChars:o=75,perFileMatchMax:s=200,totalMatchMax:i=2e3}={}){return await Pr.abortable.abortableSearchWsForPmNode(t,n,e,[{nodeName:"tag",dataAttrName:"tagValue",printBefore:"#",queryIdentifier:"tag:"},{nodeName:"wikiLink",dataAttrName:"path",printBefore:"[[",printAfter:"]]",queryIdentifier:"backlink:"}],{caseSensitive:r,maxChars:o,perFileMatchMax:s,totalMatchMax:i,concurrency:gOt})}const vOt={searchQuery:"",externalInputChange:0,pendingSearch:!1,searchResults:null},wOt="slice::search-notes:main",Wn=hs([],{name:wOt,state:vOt}),xOt=Wn.action(function(e){return Wn.tx(n=>Wn.update(n,{searchQuery:e.query}))}),kOt=Wn.action(function(e){return Wn.tx(n=>Wn.update(n,r=>({searchQuery:e,externalInputChange:r.externalInputChange+1})))}),Yu=Wn.action(function(e){return Wn.tx(n=>Wn.update(n,e))}),_Ot=ye(function(e){uy(e),e.dispatch(Yu({searchResults:null,pendingSearch:!1}))}),$Ot=ye(function(e){const n=uy(e),{searchQuery:r}=Wn.track(e);if(!n)return;if(r===""){e.dispatch(Yu({searchResults:null,pendingSearch:!1}));return}e.dispatch(Yu({searchResults:null,pendingSearch:!0}));let o=new AbortController;bn(e,()=>{o.abort()}),bOt(o.signal,r,n).then(s=>{o.signal.aborted?console.warn("Search aborted",s):e.dispatch(Yu({searchResults:s,pendingSearch:!1}))}).catch(s=>{if(!Ja(s))throw e.dispatch(Yu({pendingSearch:!1})),s})}),EOt=ye(function(e){const{searchQuery:n}=Wn.track(e);if(!n)return;const r=n?new RegExp(n.replace(/[-[\]{}()*+?.,\\^$|]/g,"\\$&"),"i"):void 0;i5(r)}),SOt=[_Ot,$Ot,EOt],COt=({searchQuery:t,updateSearchQuery:e})=>{const n=v.useRef(null),r=v.useCallback(s=>{s.preventDefault(),e("")},[e]),o=v.useCallback(s=>{e(s.target.value)},[e]);return v.useEffect(()=>{var s;(s=n.current)==null||s.focus()},[]),m.jsx(J9,{label:"Search",ref:n,className:"w-full",showClear:!0,value:t,onClear:r,onChange:o,placeholder:""})};function TOt({highlightText:t}){return m.jsx("div",{className:"B-search-notes_highlight-text-container",children:t.map((e,n)=>m.jsx("span",{className:"B-search-notes_highlight-text text-sm",children:e},n))})}function AOt(t,e){const[n,r]=v.useState(new Set),o=v.useMemo(()=>t.map(i=>()=>{r(l=>{const c=new Set(l);return c.has(i)?c.delete(i):c.add(i),c})}),[t]),s=v.useCallback(i=>n.has(i),[n]);return v.useEffect(()=>{e>0&&r(()=>new Set(t))},[e,t]),{onClicks:o,isCollapsed:s}}function NOt({results:t,collapseAllCounter:e}){const{onClicks:n,isCollapsed:r}=AOt(t,e),{widescreen:o}=Qa(),{primaryWsPath:s}=vn(),[i,a]=v.useState();v.useEffect(()=>{let c=!1;return i&&s===i.wsPath&&setTimeout(()=>{Yc(()=>{const u=Ef();if(c||!u||u.destroyed)return;u.focusView();const{dispatch:d,state:f}=u.view;let p=f.tr;i.match.parentPos>=p.doc.content.size?p=p.setSelection(Q.atEnd(p.doc)):(p.doc.nodeAt(i.match.parentPos)&&(p=p.setSelection(ne.create(p.doc,i.match.parentPos))),setTimeout(()=>{if(!u.destroyed){const{dispatch:y,state:g}=u.view,b=g.tr;y(b.setSelection(Q.near(b.doc.resolve(i.match.parentPos))))}},300));try{d(p.scrollIntoView())}catch(h){}a(null)})},50),()=>{c=!0}},[i,s]);const l=NM(i);return m.jsx(m.Fragment,{children:t.map((c,u)=>{const d=He(c.uid);return m.jsxs(P.Fragment,{children:[m.jsx(Ic,{titleClassName:"text-sm font-bold",className:oe("B-search-notes_search-result-note-match pl-1 pr-3  select-none",s===c.uid&&"BU_active"),extraInfoClassName:"text-sm",extraInfoOnNewLine:!0,onClick:n[u],item:{uid:"search-notes-result-"+u,showDividerAbove:!1,title:tt(d).fileNameWithoutExt,extraInfo:tt(d).dirPath,leftNode:m.jsx(rr,{children:r(c)?m.jsx(nE,{style:eP}):m.jsx(eE,{style:eP})}),rightNode:m.jsx(rr,{className:"text-xs font-semibold",children:c.matches.length}),rightHoverNode:m.jsx(rr,{className:"text-xs font-semibold",children:c.matches.length})}}),!r(c)&&c.matches.map((f,p)=>m.jsx(N8,{wsPath:c.uid,className:oe("rounded-sm block B-search-notes_search-result-text-match ",s===c.uid&&(l==null?void 0:l.matchIndex)===p&&"B-search-notes_previously-clicked",p===0?"mt-3":"mt-4",p===c.matches.length-1?"pb-4 border-b-1 border-colorNeutralBorder":""),onClick:()=>{const h=Ef();o?h&&!h.destroyed&&a({wsPath:c.uid,match:f,matchIndex:p}):f$()},children:m.jsx(Ic,{className:"pl-3",titleClassName:"text-sm ",item:{uid:"search-result-text-match-"+p,title:m.jsx(TOt,{highlightText:f.match})}})},p))]},u)})})}const eP={height:16,width:16};function POt(){const{wsName:t}=vn(),[{pendingSearch:e,searchResults:n,searchQuery:r,externalInputChange:o},s]=Pn(Wn),[i,a]=v.useState(0),[l,c]=v.useState(r||""),[u,d]=v.useState(o),f=L1(l,{wait:30});return v.useEffect(()=>{u!==o?(d(o),c(r)):f!==r&&s(xOt({query:f}))},[o,r,f,u,s]),v.useEffect(()=>{a(0)},[f,t]),t?m.jsxs(t8,{className:"B-search-notes_search-notes px-4 py-4",children:[m.jsx(dN,{className:"",children:m.jsx(COt,{searchQuery:l,updateSearchQuery:c})}),m.jsxs(dN,{className:"flex flex-row justify-between pt-1 pb-2 text-xs",children:[n&&m.jsx("span",{className:"",children:n.length===0?" ":`: ${n.length}`}),n&&m.jsx(rr,{onClick:()=>{a(p=>p+1)}}),e&&m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"",children:"... "}),m.jsx("span",{className:"w-3 h-3 mr-2",children:m.jsx(z9,{})})]})]}),m.jsx(_Ct,{children:n&&m.jsx(NOt,{results:n,collapseAllCounter:i})})]}):m.jsx("div",{className:"flex flex-col items-center justify-center h-full",children:m.jsx("span",{className:"text-sm font-extrabold cursor-pointer text-colorNeutralTextSubdued",onClick:()=>{cy(Lt.Workspace)}})})}const tP="Mod-F",OOt=Tt.create({name:yOt,application:{nsmSlices:[Wn],nsmEffects:SOt,operations:[{name:QN,title:"Open search sidebar",keybinding:tP,hidden:!0},{name:hd,title:"Execute search",hidden:!0}],operationHandler(){function t(){if(el().sidebar===Fv){const n=document.querySelector('input[aria-label="Search"]');n==null||n.focus(),n==null||n.select()}else f5(Fv)}return{handle(e,n){const r=qh();switch(e.name){case QN:return t(),!0;case hd:{if(t(),typeof n!="string")throw new Error(`Invalid payload for ${hd} operation`);return r.dispatch(kOt(n)),!0}default:return!1}}}},sidebars:[{name:Fv,title:"  ",hint:`Search notes
`+Jc(tP),activitybarIcon:P.createElement(qSt,{}),ReactComponent:POt}]},editor:{}}),IOt=()=>{const t=new _5([gPt,txt,Ywt,XTt,Qwt,c$t,TNt,YPt,eNt,mOt,bAt,n2t,WPt,OOt,JTt,K2t]),e=new DK,n=new op({});return{extensionRegistry:t,storageEmitter:e,editorCollabMessageBus:n}};const ROt=v.createContext(null),Bv={didCatch:!1,error:null};let MOt=class extends v.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=Bv}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){const{error:e}=this.state;if(e!==null){for(var n,r,o=arguments.length,s=new Array(o),i=0;i<o;i++)s[i]=arguments[i];(n=(r=this.props).onReset)===null||n===void 0||n.call(r,{args:s,reason:"imperative-api"}),this.setState(Bv)}}componentDidCatch(e,n){var r,o;(r=(o=this.props).onError)===null||r===void 0||r.call(o,e,n)}componentDidUpdate(e,n){const{didCatch:r}=this.state,{resetKeys:o}=this.props;if(r&&n.error!==null&&DOt(e.resetKeys,o)){var s,i;(s=(i=this.props).onReset)===null||s===void 0||s.call(i,{next:o,prev:e.resetKeys,reason:"keys"}),this.setState(Bv)}}render(){const{children:e,fallbackRender:n,FallbackComponent:r,fallback:o}=this.props,{didCatch:s,error:i}=this.state;let a=e;if(s){const l={error:i,resetErrorBoundary:this.resetErrorBoundary};if(v.isValidElement(o))a=o;else if(typeof n=="function")a=n(l);else if(r)a=v.createElement(r,l);else throw i}return v.createElement(ROt.Provider,{value:{didCatch:s,error:i,resetErrorBoundary:this.resetErrorBoundary}},a)}};function DOt(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return t.length!==e.length||t.some((n,r)=>!Object.is(n,e[r]))}const{useEffect:LOt,useLayoutEffect:jOt,useRef:FOt,useInsertionEffect:BOt}=Bj,zOt=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined",vj=zOt?jOt:LOt,wj=BOt||vj,SE=t=>{const e=FOt([t,(...n)=>e[0](...n)]).current;return wj(()=>{e[0]=t}),e[1]},qOt=(t="",e=location.pathname)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",WOt=(t,e="")=>t[0]==="~"?t.slice(1):e+t,VOt="popstate",CE="pushState",TE="replaceState",UOt="hashchange",nP=[VOt,CE,TE,UOt],HOt=t=>{for(const e of nP)addEventListener(e,t);return()=>{for(const e of nP)removeEventListener(e,t)}},KOt=(t,e)=>jI.useSyncExternalStore(HOt,t,e),rP=()=>location.pathname,GOt=({ssrPath:t}={})=>KOt(rP,t?()=>t:rP),ZOt=(t,{replace:e=!1}={})=>history[e?TE:CE](null,"",t),JOt=(t={})=>[qOt(t.base,GOt(t)),SE((e,n)=>ZOt(WOt(e,t.base),n))];if(typeof history!="undefined")for(const t of[CE,TE]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}const lx={hook:JOt,matcher:FD(),base:""},xj=v.createContext(lx),Ry=()=>v.useContext(xj),My=t=>t.hook(t),YOt=()=>My(Ry()),XOt=t=>{const e=Ry(),[n]=My(e);return e.matcher(t,n)},QOt=v.createContext({params:{}}),eIt=({hook:t,matcher:e,ssrPath:n,base:r="",parent:o,children:s})=>{const i=(l,c=o||lx)=>(l.hook=t||c.hook,l.matcher=e||c.matcher,l.ssrPath=n||c.ssrPath,l.ownBase=r,l.parent=o,l),[a]=v.useState(()=>i({get base(){return(a.parent||lx).base+a.ownBase}}));return wj(()=>{i(a)}),v.createElement(xj.Provider,{value:a,children:s})},oP=(t,e)=>v.createElement(QOt.Provider,{value:{params:t},children:e}),hl=({path:t,match:e,component:n,children:r})=>{const o=XOt(t),[s,i]=e||o;return s?n?oP(i,v.createElement(n,{params:i})):oP(i,typeof r=="function"?r(i):r):null};v.forwardRef((t,e)=>{const n=Ry(),[,r]=My(n),{to:o,href:s=o,children:i,onClick:a}=t,l=SE(d=>{d.ctrlKey||d.metaKey||d.altKey||d.shiftKey||d.button!==0||(a&&a(d),d.defaultPrevented||(d.preventDefault(),r(o||s,t)))}),c={href:s[0]==="~"?s.slice(1):n.base+s,onClick:l,to:null,ref:e},u=v.isValidElement(i)?i:v.createElement("a",t);return v.cloneElement(u,c)});const cx=t=>Array.isArray(t)?[].concat(...t.map(e=>e&&e.type===v.Fragment?cx(e.props.children):cx(e))):[t],tIt=({children:t,location:e})=>{const n=Ry(),r=n.matcher,[o]=My(n);for(const s of cx(t)){let i=0;if(v.isValidElement(s)&&(i=s.props.path?r(s.props.path,e||o):[!0,{}])[0])return v.cloneElement(s,{match:i})}return null},sP=t=>{const{to:e,href:n=e}=t,[,r]=YOt(),o=SE(()=>r(e||n,t));return vj(()=>{o()},[]),null},rc={normal:{borderRadius:0,color:I.misc.activitybarText,padding:0},hover:{backgroundColor:I.misc.activitybarBtnBgPress},press:{backgroundColor:I.misc.activitybarBtnBgPress}},iP="ActionPalette",aP="Discord",lP="NewNote",cP="NewWorkspace",uP="NotesPalette",dP="ReportIssue",fP="SwitchWorkspace",pP="ToggleTheme",hP="Twitter",mP="Notion",gP="WhatsNewKey",yP="Exit";function kj({widescreen:t,operationKeybindings:e,sidebarItems:n,activeSidebar:r}){const[,o]=Pn(se),{dispatchSerialOperation:s}=zt(),i=v.useCallback(l=>{switch(l){case iP:{o(ci(Lt.Operation));break}case lP:{s({name:pc});break}case cP:{s({name:Na});break}case uP:{o(ci(Lt.Notes));break}case dP:{window.open("https://flent.ru/help","_blank");break}case fP:{o(ci(Lt.Workspace));break}case pP:{o(n5());break}case aP:{window.open("https://flent.ru","_blank");break}case hP:{window.open("https://t.me/flent_notes","_blank");break}case mP:{window.open("https://flent.ru/import/notion/","_blank");break}case yP:{window.open("https://flent.ru","");break}case gP:{o(l$({dialogName:af}));break}default:{const u=n==null?void 0:n.find(d=>d.name===l);u&&u.name!==r&&o(e5(u.name))}}},[r,s,o,n]),a=(n==null?void 0:n.map(l=>m.jsxs(Nt,{textValue:l.title,"aria-label":l.title,children:[l.title,P.cloneElement(l.activitybarIcon,{className:(l.activitybarIcon.props.className||"")+" w-5 h-5"})]},l.name)))||null;return m.jsxs(mCt,{buttonProps:{variant:"transparent",ariaLabel:"options menu",size:t?"lg":"sm",tone:"secondary",style:t?rc.normal:void 0,leftIcon:t?m.jsx(VSt,{}):m.jsx(USt,{}),onHoverStyle:rc.hover,onPressStyle:rc.press},menuProps:{ariaLabel:"options dropdown",placement:t?"right-start":"bottom-start"},onAction:i,children:[m.jsxs(El,{"aria-label":"misc section",children:[m.jsxs(Nt,{"aria-label":"new note",children:[" ",t&&m.jsx(wh,{rawKey:"Cmd-y"})]},lP),t&&m.jsx(Nt,{"aria-label":"new workspace",children:" "},cP)]}),a&&m.jsx(El,{"aria-label":"activitybar section",children:a}),m.jsxs(El,{"aria-label":"ui section",children:[t&&m.jsxs(Nt,{textValue:"notes palette","aria-label":"notes palette",children:[m.jsx("span",{children:""}),t&&m.jsx(wh,{rawKey:e[Bm]||""})]},uP),t&&m.jsxs(Nt,{"aria-label":"switch workspace",textValue:"switch workspace",children:[m.jsx("span",{children:""}),t&&m.jsx(wh,{rawKey:e[Fm]||""})]},fP),t&&m.jsxs(Nt,{textValue:"operation palette","aria-label":"operation palette",children:[m.jsx("span",{children:" "}),t&&m.jsx(wh,{rawKey:e[jm]||""})]},iP),m.jsx(Nt,{"aria-label":"Switch Dark/Light theme",children:"/ "},pP),m.jsx(Nt,{textValue:"","aria-label":"",children:m.jsx("span",{children:"  Notion"})},mP)]}),m.jsxs(El,{"aria-label":"links section",children:[m.jsxs(Nt,{textValue:"whats new","aria-label":"whats new",children:[m.jsx("span",{children:" ?"}),m.jsx(WSt,{className:"w-5 h-5"})]},gP),m.jsxs(Nt,{textValue:"","aria-label":"",children:[m.jsx("span",{children:""}),m.jsx(GSt,{className:"w-5 h-5"})]},dP),m.jsxs(Nt,{textValue:"follow","aria-label":"follow",children:[m.jsx("span",{children:"Flent  "}),m.jsx(HSt,{className:"w-5 h-5"})]},hP),m.jsxs(Nt,{textValue:"","aria-label":"",children:[m.jsx("span",{children:"Flent ( )"}),m.jsx(KSt,{className:"w-5 h-5"})]},aP)]}),m.jsx(El,{"aria-label":"links section",children:m.jsx(Nt,{textValue:"","aria-label":"",children:m.jsx("span",{children:""})},yP)})]})}function nIt(){const t=vs(),e=t.getSerialOperationKeybindingMapping(),{wsName:n}=et(Fe);Pn(ue);const r=t.getSidebars(),[{changelogHasUpdates:o,sidebar:s,widescreen:i},a]=Pn(se),l=r.filter(c=>c.activitybarIconShow?c.activitybarIconShow(n):!0).map(c=>{const u=s===c.name;return m.jsx(qe,{ariaLabel:c.hint,onPress:()=>{a(QD(c.name))},style:{...rc.normal,borderColor:u?I.color.promote.border:I.misc.activitybarBg},onPressStyle:rc.press,onHoverStyle:rc.hover,className:oe("border-l-2",u&&"BU_is-active"),variant:"transparent",size:"lg",leftIcon:c.activitybarIcon},c.name)});return m.jsxs("div",{"data-testid":"app-activitybar_activitybar",style:{backgroundColor:I.misc.activitybarBg,color:I.misc.activitybarText},className:"flex flex-col flex-grow gap-4 pt-2 pb-4 pr-2 pl-2",children:[m.jsx(kj,{operationKeybindings:e,widescreen:i}),m.jsx("div",{className:"flex-grow"}),l]})}function rIt(){const t=vs(),{wsName:e,primaryWsPath:n}=et(Fe),{editingAllowed:r}=et(re);return m.jsx(oIt,{primaryWsPath:n,wsName:e,showDone:r,extensionRegistry:t})}function oIt({primaryWsPath:t,wsName:e,showDone:n,extensionRegistry:r}){const{sidebar:o}=et(se),s=sr(),i=sr(),a=sr(),l=r.getSerialOperationKeybindingMapping(),c=r.getSidebars().filter(u=>u.activitybarIconShow?u.activitybarIconShow(e):!0);return m.jsx(m.Fragment,{children:m.jsxs("div",{"data-testid":"app-activitybar_activitybar-mobile",style:{backgroundColor:I.misc.activitybarBg},className:"flex flex-row px-2 items-center w-full select-none",children:[m.jsx("div",{className:"flex flex-row items-center flex-none",children:t?m.jsx(qe,{variant:"transparent",ariaLabel:"Go home",size:"md",leftIcon:m.jsx(H9,{}),onPress:()=>{e&&s(ou({wsName:e}))}}):null}),m.jsx("div",{className:"flex flex-row items-center shrink overflow-hidden",role:"button",children:m.jsx(qe,{variant:"transparent",ariaLabel:"files palette",size:"md",text:t?he(t).fileNameWithoutExt:e||"Flent",onPress:()=>{i(ci(Lt.Notes))}})}),m.jsx("div",{className:"flex flex-1"}),m.jsxs("div",{className:"flex flex-row items-center flex-none",children:[t&&m.jsx("div",{className:"mr-2",children:n?m.jsx(qe,{variant:"solid",tone:"promote",ariaLabel:"done editing",className:"capitalize",size:"sm",text:".",onPress:()=>{a(pg({focusOrBlur:!0,editingAllowed:!1}))}}):m.jsx(qe,{variant:"solid",ariaLabel:"edit",className:"capitalize",size:"sm",text:".",onPress:()=>{a(pg({focusOrBlur:!0,editingAllowed:!0}))}})}),m.jsx("div",{className:"mr-2",children:m.jsx(kj,{operationKeybindings:l,sidebarItems:c,activeSidebar:o||void 0,widescreen:!1})})]})]})})}function sIt({onDismiss:t,widgets:e}){return m.jsxs("div",{className:"flex flex-col flex-grow h-full overflow-y-scroll text-colorNeutralTextSubdued",children:[m.jsxs("div",{className:"flex flex-row justify-between px-2 mt-2",children:[m.jsx("span",{className:"font-bold self-center pl-2",children:" "}),m.jsx("span",{children:m.jsx(qe,{size:"sm",variant:"transparent",onPress:t,ariaLabel:"hide",tooltipPlacement:"bottom",leftIcon:m.jsx(nE,{})})})]}),m.jsx("div",{children:e.map(n=>m.jsxs("div",{className:"",children:[m.jsxs("div",{className:"flex flex-row justify-between px-2 mt-2",children:[m.jsx("span",{className:"ml-1 font-semibold",children:n.title}),m.jsx("div",{})]}),m.jsx("div",{className:"min-h-6 max-h-96 flex flex-col rounded-md p-1 mx-2 mt-1 overflow-y-auto bg-colorNeutralBgLayerTop border-neutral",children:m.jsx(n.ReactComponent,{})})]},n.name))})]})}function iIt({showNoteSidebar:t,widescreen:e,isNoteSidebarShown:n}){return null}function aIt(t,e){v.useEffect(()=>{let n;return!t&&e.current&&(n=lIt(e.current)),()=>{n==null||n()}},[t,e])}function lIt(t){const e=()=>{t.classList.add("B-ui-dhancha_down"),t.classList.remove("B-ui-dhancha_up")},n=()=>{t.classList.add("B-ui-dhancha_up"),t.classList.remove("B-ui-dhancha_down")},r=()=>{if(document.activeElement&&(document.activeElement.nodeName==="INPUT"||document.activeElement.nodeName==="TEXTAREA"))return;window.pageYOffset>10?e():n()},o={capture:!0,passive:!0};return document.removeEventListener("scroll",r,o),document.addEventListener("scroll",r,o),()=>{document.removeEventListener("scroll",r,o),n()}}function cIt({widescreen:t=!0,activitybar:e,workspaceSidebar:n,mainContent:r,noteSidebar:o}){const s=v.useRef(null);aIt(t,s);const i=m.jsx("main",{className:"B-ui-dhancha_main-content"+(t?" BU_widescreen":""),children:r});let a;return t?a=m.jsxs(m.Fragment,{children:[n&&m.jsx("header",{style:{width:I.misc.workspaceSidebarWidth},className:"z-5 flex-shrink-0 h-screen border-r-1 border-colorNeutralBorder",children:n}),i]}):a=m.jsx(m.Fragment,{children:n||i}),m.jsxs("div",{className:"B-ui-dhancha_container"+(t?" BU_widescreen":""),children:[m.jsx("div",{role:"navigation","aria-label":"Activity Bar",ref:s,className:"B-ui-dhancha_activitybar"+(t?" BU_widescreen":""),children:e}),a,t&&o&&m.jsx("aside",{className:"B-ui-dhancha_note-sidebar shrink-0 h-screen z-5 border-l-1 border-colorNeutralBorder",style:{width:I.misc.noteSidebarWidth},children:o})]})}function uIt({children:t}){return m.jsx("div",{className:"B-ui-dhancha_multi-column-main-content",children:t})}function dIt({onDismiss:t,sidebar:e,widescreen:n}){return m.jsxs("div",{"data-testid":"app-workspace-sidebar_workspace-sidebar",className:" flex flex-col flex-grow h-full border-1 border-l border-white smallscreen:min-h-screen",children:[m.jsx("div",{className:"absolute bottom-5 flex-row justify-between px-2 mt-3",children:m.jsx("span",{children:m.jsx(qe,{variant:"transparent",onPress:t,size:"sm",ariaLabel:"Hide "+e.title,tooltipPlacement:"bottom",leftIcon:n?m.jsx(H9,{}):m.jsx(uu,{})})})}),m.jsx(vCt,{children:m.jsx(e.ReactComponent,{})})]})}function fIt(){const[{dialogName:t},e]=Pn(se),n=vs(),r=t&&n.getDialog(t),o=v.useCallback(s=>{e(r5(s))},[e]);return r?P.createElement(r.ReactComponent,{onDismiss:o,dialogName:t}):(t&&console.error("Unknown dialogName ",t),null)}const pIt=8e3;function hIt(){const[{notifications:t},e]=Pn(mt);return PM(()=>{let n=Date.now(),r=t.filter(o=>o.transient&&o.createdAt&&pIt<n-o.createdAt).map(o=>o.uid);r.length>0&&e(hg(r))},[t,e],2e3),m.jsx("div",{className:"fixed bottom-0 right-0 z-50",children:t.map(n=>{var r;return m.jsx(gIt,{onDismiss:()=>{e(hg(n.uid))},title:n.title,content:(r=n.content)==null?void 0:r.split(`
`).map((o,s)=>m.jsx("span",{children:o},s)),severity:n.severity,buttons:n.buttons},n.uid)})})}const mIt={error:()=>m.jsx(q9,{className:"w-6 h-6 color-colorCriticalIcon"}),warning:()=>m.jsx(W9,{className:"w-6 h-6 color-colorCautionIcon"}),info:()=>m.jsx(V9,{className:"w-6 h-6 color-colorNeutralIcon"}),success:()=>m.jsx(U9,{className:"w-6 h-6 color-colorPositiveIcon"})};function gIt({content:t="",title:e,buttons:n,severity:r=J.INFO,onDismiss:o}){const{dispatchSerialOperation:s}=zt();return m.jsxs("div",{"data-testid":"app-entry_notification",className:"bg-colorBgLayerFloat w-96 relative p-2 mx-2 my-2 transition duration-100 ease-in-out shadow-xl rounded shadow-lg border-neutral",children:[m.jsxs("div",{className:"flex flex-col w-full",children:[m.jsxs("div",{className:"flex flex-row",children:[m.jsx("div",{className:"mr-2",children:mIt[r]()}),m.jsx("div",{className:"flex-grow",children:e}),m.jsx("div",{children:m.jsx(qe,{size:"xs",variant:Gs.TRANSPARENT,ariaLabel:"dismiss notification",leftIcon:m.jsx(uu,{}),onPress:()=>{o()}})})]}),m.jsx("div",{className:"w-full text-sm flex flex-col",children:typeof t=="string"?m.jsx("span",{children:t}):t})]}),m.jsx("div",{className:"flex flex-row-reverse w-full mt-3",children:n&&n.map((i,a)=>m.jsx(qe,{tooltipPlacement:"left",className:"ml-3",size:"sm",tone:r==="error"?"critical":r==="warning"?"caution":r==="success"?"positive":"secondary",variant:r==="info"?"soft":"solid",onPress:async()=>{i.dismissOnClick&&o(),s({name:i.operation})},ariaLabel:i.hint,text:i.title},a))})]})}function yIt(){const t=vs();return m.jsx(m.Fragment,{children:t.renderApplicationComponents()})}function bIt(){const t=mk();v.useEffect(()=>{F1(()=>{typeof window!="undefined"&&window.location.hash.includes("debug_pm")&&re.get(t.state).primaryEditor})},[t])}const vIt=C_?12:64,wIt=5;function xIt(){const[{openedWsPaths:t,wsName:e,noteWsPaths:n},r]=Pn(Fe),o=NM(t),{records:s,updateRecord:i}=xX({uid:"WorkspaceContextProvider/useRecentlyUsedWsPaths/1/"+(e||""),maxEntries:vIt,maxTimestampsPerEntry:wIt}),a=v.useCallback(l=>{l&&i(l)},[i]);v.useEffect(()=>{e&&(o&&!t.equal(o)&&t.forEachWsPath(l=>{o.has(l)||a(l)}),o||t.forEachWsPath(l=>{a(l)}))},[e,t,a,o]),v.useEffect(()=>{e&&Array.isArray(n)&&r(tvt({wsName:e,recentlyUsedWsPaths:s.filter(l=>Wr(l.key)).map(l=>{const{key:c}=l;return He(c)}).filter(l=>n.includes(l))}))},[n,r,e,s])}function kIt(){const{wsName:t,openedWsPaths:e}=et(Fe),{primaryWsPath:n}=e;v.useEffect(()=>{t?document.title=n?`${he(n).fileName} - Flent`:`${t} - Flent`:document.title="Flent",xM||(document.title=Yl+":"+document.title)},[n,t])}function _It(){const[t,e]=v.useState([]),n=sr();v.useEffect(()=>{let s=!1;return SD().then(i=>{s||e(i)}),()=>{s=!0}},[]);const{dispatchSerialOperation:r}=zt(),o=v.useCallback(s=>{n(ou({wsName:gr(s),replace:!0}))},[n]);return m.jsx(Ap,{title:" ",actions:m.jsx(m.Fragment,{children:m.jsx(qe,{ariaLabel:"new workspace",onPress:()=>{r({name:Na})},text:" "})}),children:t.length!==0?m.jsx($It,{workspaces:t,onClickWsName:o}):m.jsx("div",{className:"mb-3",children:"    "})})}function $It({workspaces:t,onClickWsName:e}){const[n]=v.useState(()=>x$.get());return m.jsx("div",{className:"mb-3","data-test":"landing-page",children:m.jsx("ul",{className:"my-2",children:t.sort((r,o)=>r.name===n?-1:o.name===n?1:r.name.localeCompare(o.name)).map((r,o)=>m.jsxs("li",{className:"flex items-center",children:[m.jsx("svg",{className:"w-4 h-4 mr-1.5",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:m.jsx("path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"})}),m.jsxs("button",{role:"link",onClick:s=>{e(r.name)},className:"py-1 hover:underline",children:[m.jsxs("span",{children:[r.name," "]}),r.name===n&&m.jsx("span",{className:"font-light italic text-colorNeutralTextSubdued",children:"()"})]})]},o))})})}function EIt(){const{dispatchSerialOperation:t}=zt(),e=sr();return m.jsx(Ap,{title:m.jsx("span",{className:"font-normal",children:m.jsx("span",{className:"pl-1",children:"404"})}),actions:m.jsxs(m.Fragment,{children:[m.jsx(qe,{ariaLabel:"open another workspace",text:" ",onPress:()=>{e(ci(Lt.Workspace))}}),m.jsx(qe,{ariaLabel:"new workspace",onPress:()=>{t({name:Na})},text:" "})]}),children:m.jsx("span",{children:"   "})})}function SIt({wsName:t}){const e=gr(decodeURIComponent(t||"")),[n,r]=v.useState(!1),o=sr(),s=sr(),[i,a]=v.useState();v.useEffect(()=>{let u=!1;return Zn(e).then(d=>{u||(d?a(d):o(HD({wsName:e})))},d=>{u||(s(_c({content:`Error reading workspace info for ${e}. ${d.message}`,title:"Error",severity:J.ERROR,uid:"workspace-info-read-error"+Date.now()})),console.error(d))}),()=>{u=!0}},[e,o,s]);const l=()=>{o(ou({wsName:e,replace:!0}))},c=async()=>{if(!i)throw new Error("workspace not found");return i.type!==Je.NativeFS||await bM(i.metadata.rootDirHandle)?(l(),!0):(r(!0),!1)};return v.useEffect(()=>{e||o(t$())},[o,e]),!e||!i?null:m.jsx(CIt,{permissionDenied:n,requestFSPermission:c,wsName:e})}function CIt({permissionDenied:t,requestFSPermission:e,wsName:n}){const{dialogName:r,paletteType:o}=et(se),s=!!o;return v.useEffect(()=>{let i=_M({Enter:()=>s||r?!1:(e(),!0)});return document.addEventListener("keydown",i),()=>{document.removeEventListener("keydown",i)}},[e,s,r]),m.jsx(Ap,{title:m.jsxs("span",{className:"font-normal",children:[m.jsx(_j,{wsName:n,emoji:t?"":""}),m.jsx("span",{className:"pl-1",children:t?"permission denied":"requires permission"})]}),actions:m.jsx(qe,{tone:"promote",ariaLabel:"grant disk read permission",onPress:()=>{e()},text:"Grant permission [Enter]"}),children:m.jsx("span",{children:"Flent         ."})})}function _j({wsName:t,emoji:e=""}){return m.jsx(m.Fragment,{children:m.jsxs("span",{className:"font-normal",children:[" ",m.jsx("span",{className:"font-bold",children:t})]})})}function TIt({wsName:t}){const{dispatchSerialOperation:e}=zt(),[,n]=Pn(se);return t=decodeURIComponent(t||""),m.jsx(Ap,{title:m.jsxs("span",{className:"font-normal",children:[t||"",m.jsx("span",{className:"pl-1",children:"  "})]}),actions:m.jsxs(m.Fragment,{children:[m.jsx(qe,{ariaLabel:"open another workspace",text:" ",onPress:()=>{n(ci(Lt.Workspace))}}),m.jsx(qe,{ariaLabel:"new workspace",text:" ",onPress:()=>{e({name:Na})}})]}),children:m.jsx("span",{children:"  "})})}const bP=3;function AIt({isActive:t,isSplitEditorOpen:e,onClose:n,onEnableEditing:r,onPressSecondaryEditor:o,openNotesPalette:s,showSplitEditor:i=!1,wsPath:a,editingDisabled:l}){let c=$t(tt(a).filePath);if(c.split("/").length>bP){let u=c.split("/").slice(-1*bP);u.unshift(""),c=u.join("/")}return c.length>50&&(c=""+c.slice(-1*50)),m.jsxs("div",{"data-testid":"app-editor-container_editorbar",className:"flex flex-row justify-between w-full pt-4 px-4",children:[l&&m.jsx(qe,{ariaLabel:"enable editing",text:"Enable Editing",className:"mx-4 my-4",size:"xs",tone:Ue.PROMOTE,onPress:r}),m.jsx("div",{className:"flex flex-row flex-1"}),m.jsxs("div",{className:"flex flex-row",children:[i&&m.jsx(qe,{size:"xs",variant:e?"soft":"transparent",onPress:o,className:oe("lg:mr-1",e?"BU_is-active":""),ariaLabel:e?"Close split screen":"Split screen",leftIcon:m.jsx(B9,{}),tooltipPlacement:"bottom"}),m.jsx(qe,{size:"xs",variant:"transparent",ariaLabel:"Close",onPress:n,leftIcon:m.jsx(uu,{})})]})]})}function NIt({className:t,onPress:e,editorIssue:n}){return m.jsx("div",{className:oe("relative w-full",t),children:m.jsx("div",{className:"absolute inset-x-0 mx-auto rounded-md w-full flex flex-col gap-1 items-center",children:m.jsx(OIt,{editorIssue:n,widescreen:!1,onPress:e})})})}const PIt={[J.ERROR]:()=>({component:m.jsx(q9,{})}),[J.WARNING]:()=>({component:m.jsx(W9,{})}),[J.INFO]:()=>({component:m.jsx(V9,{})}),[J.SUCCESS]:()=>({component:m.jsx(U9,{})})};function OIt({editorIssue:t,widescreen:e,onPress:n}){const{severity:r}=t;let o=r;o=t.title,o.length>50&&(o=o.slice(0,50)+"...");let s="neutral";switch(r){case J.ERROR:{s="critical";break}case J.WARNING:{s="caution";break}case J.INFO:{s="neutral";break}case J.SUCCESS:{s="positive";break}}return m.jsx(qe,{variant:"solid",tone:s,onPress:n,className:"capitalize truncate",size:"sm",leftIcon:PIt[r]().component,text:o,ariaLabel:"Editor encountered an issue"})}function vP({widescreen:t,editorId:e,wsPath:n,eternalVars:r}){const{noteExists:o,wsPath:s}=RIt(n),{openedWsPaths:i}=et(Fe),{editingAllowed:a,focusedEditorId:l}=et(re),{dispatchSerialOperation:c}=zt(),u=sr(),[,d]=Pn(se),f=!!i.secondaryWsPath,p=v.useCallback(()=>{c({name:Dm})},[c]),h=v.useCallback(()=>{c({name:Lm,value:e})},[c,e]),y=v.useCallback(()=>{d(ci(Lt.Notes))},[d]),{editorIssue:g,onPressEditorIssue:b}=IIt(s),w=v.useCallback(()=>{u(pg({editingAllowed:!0}))},[u]);let x;return o==="NOT_FOUND"?x=m.jsx("div",{className:"flex flex-col justify-center h-full px-3 align-middle",children:m.jsxs("h3",{className:"mb-8 text-xl font-bold leading-none sm:text-3xl lg:text-3xl",children:['  "',s?he(s).fileName:"",'"  ']})}):o==="NO_WS_PATH"?x=m.jsx("div",{children:"  "}):s&&(x=m.jsx(wE,{editorId:e,wsPath:s,eternalVars:r,className:`B-editor-container_editor B-editor-container_editor-${e}`})),m.jsxs("div",{className:oe("B-editor-container_editor-container","B-editor-container_editor-container-"+e,t&&"overflow-y-scroll","w-full h-full flex flex-col items-center"),style:{backgroundColor:I.misc.editorBg},children:[s&&m.jsxs("div",{className:"w-full sticky top-0 z-10",children:[t&&m.jsx(AIt,{isActive:l===e,wsPath:s,onClose:h,showSplitEditor:e===jn,onPressSecondaryEditor:p,isSplitEditorOpen:f,openNotesPalette:y,onEnableEditing:w,editingDisabled:!a}),g&&m.jsx(NIt,{className:t?"":"pt-3",editorIssue:g,onPress:b})]}),m.jsx("div",{className:oe("w-full smallscreen:min-h-screen"),style:{maxWidth:`min(${I.misc.pageMaxWidth}, 100vw)`,padding:I.misc.pagePadding},children:x})]})}function IIt(t){const[,e]=Pn(se),{editorIssues:n}=et(mt),r=t?n.find(i=>i.wsPath===t):void 0,{dispatchSerialOperation:o}=zt(),s=v.useCallback(()=>{if(!r)return;const{serialOperation:i}=r;i?o({name:i}):e(jvt({title:r.title,description:r.description}))},[e,o,r]);return{editorIssue:r,onPressEditorIssue:s}}function RIt(t){const[e,n]=v.useState(void 0),[r,o]=v.useState(t?"LOADING":"NO_WS_PATH"),s=Zc();return v.useEffect(()=>{t&&(o("LOADING"),abt(t).then(i=>{s.current||(o(i?"FOUND":"NOT_FOUND"),n(t))},i=>{})),t==null&&e&&(o("NO_WS_PATH"),n(void 0))},[t,e,s]),{noteExists:r,wsPath:e}}function MIt({wsPath:t,eternalVars:e}){const{fileNameWithoutExt:n}=he(t,!0),r=i1(),[o,s]=v.useState(!1),i=v.useCallback(()=>{r.dispatch(ur(l=>l.updateMiniEditorWsPath(void 0)))},[r]),a=v.useCallback(()=>{r.dispatch(ur(l=>l.updateMiniEditorWsPath(void 0))),r.dispatch(ur(l=>l.updatePrimaryWsPath(t)))},[t,r]);return m.jsxs("div",{"data-testid":"editor-container_mini-editor-wrapper",className:"fixed flex flex-col bottom-0 right-8 rounded drop-shadow-xl z-popup border-neutral",style:{width:I.misc.miniEditorWidth,background:I.misc.editorBg},children:[m.jsxs("div",{className:"flex flex-row w-full px-2 py-1 text-sm justify-between border-b-1 border-colorNeutralBorder",children:[m.jsx("div",{className:"font-semibold flex items-center flex-grow cursor-pointer truncate select-none",onClick:()=>{s(l=>!l)},children:m.jsx("span",{className:"truncate",children:n})}),m.jsxs("div",{className:"flex flex-row",children:[o?m.jsx(qe,{size:"xs",variant:"transparent",ariaLabel:"Maximize",onPress:()=>{s(l=>!l)},leftIcon:m.jsx(MSt,{})}):m.jsx(qe,{size:"xs",variant:"transparent",ariaLabel:"Minimize",leftIcon:m.jsx(eE,{}),onPress:()=>{s(l=>!l)}}),m.jsx(qe,{variant:"transparent",size:"xs",onPress:a,ariaLabel:"Expand to full screen",leftIcon:m.jsx(DSt,{})}),m.jsx(qe,{variant:"transparent",size:"xs",onPress:i,ariaLabel:"Close",leftIcon:m.jsx(uu,{})})]})]}),o?null:m.jsx("div",{className:"px-2 overflow-y-auto pl-6 B-editor-container_mini-editor",style:{height:"min(50vh, 600px)"},children:m.jsx(wE,{editorDisplayType:xi.Floating,editorId:fd,eternalVars:e,wsPath:t})})]})}const DIt=200;function LIt({wsPaths:t}){const e=mk();let n="";const r=v.useMemo(()=>t.map(o=>he(o)),[t]);return m.jsx("div",{className:"mb-1",children:m.jsx("ul",{children:r.map((o,s)=>{n=$t(o.fileName),n=function(a){const l=a.split(" ");return l.length>1&&l[l.length-1].length>=30&&l.pop(),l.join(" ")}(n),n=$t(o.fileName),n=function(a){const l=a.split(" ");return l.length>1&&l[l.length-1].length>=30&&l.pop(),l.join(" ")}(n);const i=44;return n=n.length>i?n.slice(0,i)+"...":n,o.dirPath,m.jsxs("li",{className:"flex items-center",children:[m.jsxs("svg",{className:"w-4 h-4 mr-1.5",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[m.jsx("path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}),m.jsx("path",{d:"M14 2v4a2 2 0 0 0 2 2h4"})]}),m.jsx("button",{role:"link",onClick:a=>{e.dispatch(ur(l=>l.updatePrimaryWsPath(o.wsPath)))},className:"py-1 hover:underline",children:m.jsxs("span",{children:[n," "]})})]},s)})})})}const wP=[];function jIt(){const{wsName:t,recentWsPaths:e=wP,noteWsPaths:n}=et(Fe),{dispatchSerialOperation:r}=zt();Pn(se);const o=Array.from(new Set([...e,...n||wP].slice(0,DIt)));return m.jsx(Ap,{dataTestId:"app-app-entry_pages-empty-editor-page",title:t&&m.jsx(_j,{wsName:t}),actions:m.jsx(m.Fragment,{children:m.jsx(qe,{ariaLabel:"create note",onPress:()=>{r({name:pc})},text:"+  "})}),children:o.length!==0?m.jsx(LIt,{wsPaths:o}):m.jsx("div",{className:"mb-3",children:"    "})})}function FIt(){const{widescreen:t}=et(se),e=sr(),{miniWsPath:n,openedWsPaths:r}=et(Fe),o=i1(),s=DD(o),{primaryWsPath:i,secondaryWsPath:a}=r;let l=null;return n&&t&&(l=m.jsx(MIt,{wsPath:n,eternalVars:s})),v.useEffect(()=>{n&&!t&&(e(_c({title:"Mini Editor is not available in small screens",uid:"mini-editor-not-available",severity:J.WARNING,transient:!0})),o.dispatch(ur(c=>c.updateMiniEditorWsPath(void 0))))},[o,n,e,t]),m.jsxs(m.Fragment,{children:[m.jsxs(uIt,{children:[!i&&!a&&m.jsx(jIt,{}),i&&m.jsx(vP,{widescreen:t,editorId:jn,wsPath:He(i),eternalVars:s}),t&&a&&m.jsx(vP,{widescreen:t,editorId:ri,wsPath:He(a),eternalVars:s})]}),l]})}function BIt(){return m.jsxs(tIt,{children:[m.jsx(hl,{path:"/ws/:wsName",children:m.jsx(FIt,{})}),m.jsx(hl,{path:"/ws-auth/:wsName",children:t=>(up(t.wsName,"wsName cannot be undefined"),m.jsx(SIt,{wsName:t.wsName}))}),m.jsx(hl,{path:"/ws-not-found/:wsName",children:t=>m.jsx(TIt,{wsName:t.wsName})}),m.jsx(hl,{path:"/ws-invalid-path/:wsName",children:m.jsx(EIt,{})}),m.jsx(hl,{path:"/landing",children:m.jsx(_It,{})}),m.jsx(hl,{path:"/",children:()=>x$.get()?m.jsx(sP,{to:"/landing"}):m.jsx(sP,{to:dR})})]})}let xP=!1;function zIt(){const{wsName:t}=et(Fe),[{widescreen:e,sidebar:n,noteSidebar:r},o]=Pn(se),s=vs();kIt();const i=s.getNoteSidebarWidgets(),a=n?s.getSidebars().find(d=>d.name===n):null,l=v.useCallback(()=>{o(t5())},[o]),c=v.useCallback(()=>{o(GT(!1))},[o]),u=v.useCallback(()=>{o(GT(!0))},[o]);return v.useEffect(()=>{t&&t!==Br&&!xP&&(async()=>{var p,h;if(typeof navigator=="undefined")return;xP=!0;let f=await((h=(p=navigator==null?void 0:navigator.storage)==null?void 0:p.persist)==null?void 0:h.call(p));console.debug(`storage.persist: ${f}`)})()},[t]),xIt(),bIt(),m.jsxs(m.Fragment,{children:[m.jsx(fIt,{}),m.jsx(yIt,{}),m.jsx(iIt,{isNoteSidebarShown:!!r,widescreen:e,showNoteSidebar:u}),m.jsx(cIt,{widescreen:e,activitybar:e?m.jsx(nIt,{}):m.jsx(rIt,{}),noteSidebar:r&&m.jsx(sIt,{onDismiss:c,widgets:i}),workspaceSidebar:a&&m.jsx(dIt,{onDismiss:l,sidebar:a,widescreen:e}),mainContent:m.jsx(BIt,{})}),m.jsx(hIt,{})]})}function qIt({error:t}){return m.jsx("div",{className:"w-full p-4",children:m.jsxs("div",{className:"w-full p-4 rounded-md B-ui-components_bangle-error-boundary",children:[m.jsx("div",{className:"w-full text-5xl text-center",children:""}),m.jsx("h1",{className:"w-full my-4 text-center",children:"- "}),m.jsx("div",{className:"w-full text-sm text-center",children:m.jsxs("div",{className:"w-full text-sm italic text-center",children:["Error: ",(t==null?void 0:t.name)+":"+(t==null?void 0:t.message)]})})]})})}const zv=Date.now(),WIt=24*60*60*1e3;function VIt(){const[t,e]=La("entry-lao-2",zv),[n,r]=La("entry-dau-2",0);v.useEffect(()=>{var o,s;n===3&&((o=window.fathom)==null||o.trackGoal("9MRJUARY",0)),n===5&&((s=window.fathom)==null||s.trackGoal("EWFOWT8V",0))},[n,r]),v.useEffect(()=>{var o;t&&zv-t>WIt&&(e(zv),r(s=>s+1),(o=window.fathom)==null||o.trackGoal("EC54OGMM",0))},[t,r,e])}function UIt(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:o,onRegisteredSW:s,onRegisterError:i}=t;let a,l,c;const u=async(f=!0)=>{await l,await(c==null?void 0:c())};async function d(){if("serviceWorker"in navigator){const{Workbox:f}=await _a(()=>import("./workbox-window.prod.es5-92a959d3.js"),[]);a=new f("/sw.js",{scope:"/",type:"classic"}),c=async()=>{await(a==null?void 0:a.messageSkipWaiting())};{let p=!1;const h=()=>{p=!0,a==null||a.addEventListener("controlling",y=>{y.isUpdate&&window.location.reload()}),n==null||n()};a.addEventListener("installed",y=>{typeof y.isUpdate=="undefined"?typeof y.isExternal!="undefined"?y.isExternal?h():!p&&(r==null||r()):y.isExternal?window.location.reload():!p&&(r==null||r()):y.isUpdate||r==null||r()}),a.addEventListener("waiting",h),a.addEventListener("externalwaiting",h)}a.register({immediate:e}).then(p=>{s?s("/sw.js",p):o==null||o(p)}).catch(p=>{i==null||i(p)})}}return l=d(),u}let kh;function HIt(){const[t,e]=v.useState(!1),[n,r]=v.useState(!1),[o]=v.useState(()=>UIt({immediate:!0,onOfflineReady(){r(!0)},onNeedRefresh(){e(!0)},onRegisterError(a){throw new Error(a)},onRegistered(a){kh&&(clearInterval(kh),kh=null),a&&(kh=setInterval(async()=>{await a.update()},eX))}})),s=v.useCallback(()=>{r(!1),e(!1)},[]);return{acceptPrompt:v.useCallback(()=>{o(!0)},[o]),closePrompt:s,needRefresh:t,offlineReady:n}}const qv="new-version-"+I1;function KIt(){const[t,e]=La("sw-show-offline",!1),[,n]=Pn(mt),{needRefresh:r,offlineReady:o,acceptPrompt:s,closePrompt:i}=HIt();return v.useEffect(()=>{o&&!t&&(e(!0),n(_c({uid:"offline-"+I1,severity:J.INFO,title:"Flent     ",transient:!0})))},[t,n,o,e]),N5(a=>a.name===dd?(n(hg(qv)),s(),!0):a.name===wk?(n(hg(qv)),i(),!0):!1,[s,n,i]),v.useEffect(()=>{r&&n(_c({severity:J.INFO,uid:qv,title:"Flent",content:"  ",buttons:[{title:"",hint:"    ",operation:dd},{title:"",hint:"    ",operation:dd}]}))},[s,r,i,n]),null}const GIt="watch_ui",ZIt="UI_THEME_CHANGED";function JIt(){const[t,e]=AM(GIt),[{colorScheme:n},r]=Pn(se),o=v.useRef(!0);return v.useEffect(()=>{o.current=!1},[]),v.useEffect(()=>{t&&r(Rvt(t.payload.colorScheme))},[r,t]),v.useEffect(()=>{!o.current&&n&&e({type:ZIt,tabName:T_,payload:{colorScheme:n}})},[e,n]),null}const YIt="watch_workspace",kP="FILE_TREE_CHANGED",_P=()=>{},$P=Qc(t=>t.sort((e,n)=>e.localeCompare(n)).join(","));function XIt(){const{wsName:t,wsPaths:e}=et(Fe),[n,r]=AM(YIt),o=v.useRef(!0),s=v.useRef(!1),i=i1();return v.useEffect(()=>{if(n){const{type:a,tabName:l,payload:c}=n;if(c.wsName!==t){_P("different wsName",c.wsName);return}switch(_P("received from",l,"type =",a,c.size),a){case kP:{if(e==null)break;(c.size!==e.length||c.lameHash!==$P(e))&&(i.dispatch(iy()),s.current=!0);break}default:throw new Error("Unknown watch workspace message type "+a)}}},[n,i,t,e]),v.useEffect(()=>{e&&s.current&&(s.current=!1,i.dispatch(ur(a=>{let l=a;return a.forEachWsPath(c=>{c&&!e.includes(He(c))&&(l=l.closeIfFound(c))}),l.optimizeSpace()},{replace:!0})))},[e,i]),v.useEffect(()=>{!o.current&&e&&t&&r({type:kP,tabName:T_,payload:{wsName:t,size:e.length,lameHash:$P(e)}})},[e,r,t]),v.useEffect(()=>{o.current=!1},[]),null}const QIt=()=>{const{location:t}=et(ue),{history:e}=et(_p),n=e&&w$(t,e)||"",r=v.useRef([]),o=e?e.navigate.bind(e):(...s)=>{r.current.push(s)};if(r.current.length>0&&e){for(const s of r.current)o(...s);r.current=[]}return[n,o]};function eRt({nsmStore:t}){return v.useEffect(()=>{const e=n=>{console.debug("before install prompt"),n.preventDefault()};return window.addEventListener("beforeinstallprompt",e),()=>{window.removeEventListener("beforeinstallprompt",e)}},[]),v.useEffect(()=>{const e=()=>{console.debug("appinstalled ")};return window.addEventListener("appinstalled",e),()=>{window.removeEventListener("appinstalled",e)}},[]),VIt(),m.jsx(P.StrictMode,{children:m.jsx(MOt,{FallbackComponent:qIt,children:m.jsx(eIt,{hook:QIt,matcher:BD,children:m.jsx(_6,{children:m.jsxs(qc.Provider,{value:t,children:[m.jsx(KIt,{}),m.jsx(XIt,{}),m.jsx(JIt,{}),m.jsx(E0t,{children:m.jsx(zIt,{})})]})})})})})}function tRt(){var t=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!t||!indexedDB.databases)return Promise.resolve();var e;return new Promise(function(n){var r=function(){return indexedDB.databases().finally(n)};e=setInterval(r,100),r()}).finally(function(){return clearInterval(e)})}console.debug("Polyfilling "+G5.length+" features.");let Bg=[...G5];wM&&Bg.push(tRt());Bg.push(ebt());function nRt(t){if(Bg.length===0){t();return}Promise.all(Bg).then(()=>{t()})}var CP;typeof window!==void 0&&Yl!=="local"&&((CP=window.Sentry)==null||CP.onLoad(function(){_a(()=>import("./SentryTracing-c362fee5.js"),["assets/SentryTracing-c362fee5.js","assets/hub-a01f0c8e.js"]).then(({Integrations:t})=>{window.Sentry.init({...XY,integrations:[new t.BrowserTracing]})})}),"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual"),window.simulateError=()=>{throw new Error("I am a simulated error")});nRt(async()=>{let t=0;const e=document.getElementById("root"),n=IOt(),r=new AbortController,o=Vwt(n,(s,i)=>{var a;try{if(s instanceof ge){EP(s,i,n);return}console.error("Unhandled naukar error",s.message),(a=window.Sentry)==null||a.captureException(s)}catch(l){console.error(l)}});mbt(o),r.signal.addEventListener("abort",()=>{V5(),o.destroy()},{once:!0}),window.addEventListener("unhandledrejection",s=>{var a;if(!s)return;const i=s==null?void 0:s.reason;if(i instanceof ge){if(EP(i,o,n)){s.preventDefault();return}console.warn("Unhandled Rejection at:",((a=s==null?void 0:s.reason)==null?void 0:a.stack)||s)}}),Co.render(P.createElement(eRt,{nsmStore:o,storeChanged:t++,eternalVars:n}),e)});function EP(t,e,n){return!!(oRt(t,e)||rRt(t,e,n))}function rRt(t,e,n){const r=ue.get(e.state).wsName;return r?(Zn(r).then(o=>{if(!o){console.log("Unable to find workspace info when handling error");return}const s=n.extensionRegistry.getOnStorageErrorHandlers(o.type);if(!s)throw new Error(`Unable to find storage error handler for workspace type ${o.type}`);if(!s(t)){console.error(t),e.dispatch(_c({severity:J.ERROR,title:t.name,content:t.message,uid:"storage-unable-to-handle"+Date.now()}));return}}),!0):(console.warn("Unable to handle error as wsName is not set"),!1)}function oRt(t,e,n){switch(t.code){case Ko.WorkspaceCreateNotAllowed:return!1;case Ko.WorkspaceDeleteNotAllowed:return!1;case Ko.WorkspaceNotFound:{const{wsName:o}=ue.get(e.state);return o?(e.dispatch(HD({wsName:o})),!0):!1}case Ko.FileRenameNotAllowed:return!1;default:return!1}}export{dbt as A,ge as B,Yn as C,tY as D,rn as E,gN as F,Wr as G,Br as H,e$ as I,sY as J,dRt as K,hbt as L,cRt as M,uRt as N,Yl as O,fRt as P,XY as Q,mr as R,Bt as S,IOt as T,fs as U,cwt as W,Xc as a,up as b,hs as c,Uk as d,Ar as e,og as f,PD as g,He as h,Ja as i,o1 as j,ye as k,tt as l,AD as m,q0t as n,RD as o,iRt as p,O8 as q,lW as r,ap as s,cp as t,pR as u,he as v,pW as w,fp as x,cE as y,bRt as z};
//# sourceMappingURL=index-5875a7cc.js.map
