{"version":3,"file":"wrap-worker-naukar-d6340d0c.js","sources":["../../app/worker-setup/setup/wrap-worker-naukar.ts"],"sourcesContent":["/// <reference path=\"../missing-types.d.ts\" />\n\nimport * as Comlink from 'comlink';\n\nimport { assertNonWorkerGlobalScope, sleep } from '@bangle.io/utils';\n\nassertNonWorkerGlobalScope();\n\nconst worker = new Worker(new URL('./worker.ts', import.meta.url), {\n  type: 'module',\n});\n\nexport const wrapper = Comlink.wrap(worker);\n\nexport const terminate = async () => {\n  console.warn('Terminating naukar worker');\n  wrapper[Comlink.releaseProxy]();\n  // wait for comlink to release proxy\n  // if we terminate immediately proxy is not released\n  await sleep(100);\n  worker.terminate();\n};\n"],"names":["assertNonWorkerGlobalScope","worker","wrapper","Comlink.wrap","terminate","Comlink.releaseProxy","sleep"],"mappings":"wDAMAA,IAEA,MAAMC,EAAS,IAAI,OAAO,IAAA,IAAA,6BAAA,KAAA,QAAA,EAAyC,CACjE,KAAM,QACR,CAAC,EAEYC,EAAUC,EAAaF,CAAM,EAE7BG,EAAY,SAAY,CACnC,QAAQ,KAAK,2BAA2B,EAChCF,EAAAG,CAAoB,IAG5B,MAAMC,EAAM,GAAG,EACfL,EAAO,UAAU,CACnB"}