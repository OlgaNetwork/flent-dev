var Oq=Object.defineProperty;var Iq=(t,e,n)=>e in t?Oq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ee=(t,e,n)=>(Iq(t,typeof e!="symbol"?e+"":e,n),n);/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jI=Symbol("Comlink.proxy"),Dq=Symbol("Comlink.endpoint"),Mq=Symbol("Comlink.releaseProxy"),_v=Symbol("Comlink.finalizer"),Og=Symbol("Comlink.thrown"),zI=t=>typeof t=="object"&&t!==null||typeof t=="function",Lq={canHandle:t=>zI(t)&&t[jI],serialize(t){const{port1:e,port2:n}=new MessageChannel;return i$(t,e),[n,[n]]},deserialize(t){return t.start(),zq(t)}},Fq={canHandle:t=>zI(t)&&Og in t,serialize({value:t}){let e;return t instanceof Error?e={isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:e={isError:!1,value:t},[e,[]]},deserialize(t){throw t.isError?Object.assign(new Error(t.value.message),t.value):t.value}},o$=new Map([["proxy",Lq],["throw",Fq]]);function Bq(t,e){for(const n of t)if(e===n||n==="*"||n instanceof RegExp&&n.test(e))return!0;return!1}function i$(t,e=globalThis,n=["*"]){e.addEventListener("message",function r(o){if(!o||!o.data)return;if(!Bq(n,o.origin)){console.warn(`Invalid origin '${o.origin}' for comlink proxy`);return}const{id:i,type:s,path:a}=Object.assign({path:[]},o.data),l=(o.data.argumentList||[]).map(Dl);let c;try{const u=a.slice(0,-1).reduce((f,p)=>f[p],t),d=a.reduce((f,p)=>f[p],t);switch(s){case"GET":c=d;break;case"SET":u[a.slice(-1)[0]]=Dl(o.data.value),c=!0;break;case"APPLY":c=d.apply(u,l);break;case"CONSTRUCT":{const f=new d(...l);c=HI(f)}break;case"ENDPOINT":{const{port1:f,port2:p}=new MessageChannel;i$(t,p),c=VI(f,[f])}break;case"RELEASE":c=void 0;break;default:return}}catch(u){c={value:u,[Og]:0}}Promise.resolve(c).catch(u=>({value:u,[Og]:0})).then(u=>{const[d,f]=u1(u);e.postMessage(Object.assign(Object.assign({},d),{id:i}),f),s==="RELEASE"&&(e.removeEventListener("message",r),qI(e),_v in t&&typeof t[_v]=="function"&&t[_v]())}).catch(u=>{const[d,f]=u1({value:new TypeError("Unserializable return value"),[Og]:0});e.postMessage(Object.assign(Object.assign({},d),{id:i}),f)})}),e.start&&e.start()}function jq(t){return t.constructor.name==="MessagePort"}function qI(t){jq(t)&&t.close()}function zq(t,e){return O_(t,[],e)}function Wm(t){if(t)throw new Error("Proxy has been released and is not useable")}function WI(t){return nu(t,{type:"RELEASE"}).then(()=>{qI(t)})}const l1=new WeakMap,c1="FinalizationRegistry"in globalThis&&new FinalizationRegistry(t=>{const e=(l1.get(t)||0)-1;l1.set(t,e),e===0&&WI(t)});function qq(t,e){const n=(l1.get(e)||0)+1;l1.set(e,n),c1&&c1.register(t,e,t)}function Wq(t){c1&&c1.unregister(t)}function O_(t,e=[],n=function(){}){let r=!1;const o=new Proxy(n,{get(i,s){if(Wm(r),s===Mq)return()=>{Wq(o),WI(t),r=!0};if(s==="then"){if(e.length===0)return{then:()=>o};const a=nu(t,{type:"GET",path:e.map(l=>l.toString())}).then(Dl);return a.then.bind(a)}return O_(t,[...e,s])},set(i,s,a){Wm(r);const[l,c]=u1(a);return nu(t,{type:"SET",path:[...e,s].map(u=>u.toString()),value:l},c).then(Dl)},apply(i,s,a){Wm(r);const l=e[e.length-1];if(l===Dq)return nu(t,{type:"ENDPOINT"}).then(Dl);if(l==="bind")return O_(t,e.slice(0,-1));const[c,u]=MT(a);return nu(t,{type:"APPLY",path:e.map(d=>d.toString()),argumentList:c},u).then(Dl)},construct(i,s){Wm(r);const[a,l]=MT(s);return nu(t,{type:"CONSTRUCT",path:e.map(c=>c.toString()),argumentList:a},l).then(Dl)}});return qq(o,t),o}function Uq(t){return Array.prototype.concat.apply([],t)}function MT(t){const e=t.map(u1);return[e.map(n=>n[0]),Uq(e.map(n=>n[1]))]}const UI=new WeakMap;function VI(t,e){return UI.set(t,e),t}function HI(t){return Object.assign(t,{[jI]:!0})}function u1(t){for(const[e,n]of o$)if(n.canHandle(t)){const[r,o]=n.serialize(t);return[{type:"HANDLER",name:e,value:r},o]}return[{type:"RAW",value:t},UI.get(t)||[]]}function Dl(t){switch(t.type){case"HANDLER":return o$.get(t.name).deserialize(t.value);case"RAW":return t.value}}function nu(t,e,n){return new Promise(r=>{const o=Vq();t.addEventListener("message",function i(s){!s.data||!s.data.id||s.data.id!==o||(t.removeEventListener("message",i),r(s.data))}),t.start&&t.start(),t.postMessage(Object.assign({id:o},e),n)})}function Vq(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}class lt extends Error{constructor({message:n,code:r,thrower:o}){super(n);ee(this,"code");ee(this,"thrower");if(Error.captureStackTrace)Error.captureStackTrace(this,lt);else{const s=new Error().stack;s&&(this.stack=s)}const i=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,i):this.__proto__=i,this.name=this.constructor.name,r&&(this.code=r),this.thrower=o}static fromJsonValue(n){const r=new lt({message:n.message,code:n.code||void 0,thrower:n.thrower||void 0});return r.name=n.name,n.stack&&(r.stack=n.stack),r}toJsonValue(){let n=this.message;return{name:this.name,message:n,thrower:this.thrower,code:this.code||null,stack:this.stack}}}o$.set("BaseError",{canHandle:t=>t instanceof lt,serialize:t=>[t.toJsonValue(),[]],deserialize:t=>lt.fromJsonValue(t)});const Hq=typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope,LT=[];typeof globalThis=="undefined"&&(typeof self!="undefined"?self.globalThis=self:typeof window!="undefined"?window.globalThis=window:typeof global!="undefined"&&(global.globalThis=global));Hq||typeof window!="undefined"&&!window.requestIdleCallback&&(console.debug("polyfilling idle callback"),window.requestIdleCallback=function(t,e){var n=Date.now();return setTimeout(function(){t({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-n))}})},typeof(e==null?void 0:e.timeout)=="number"?e.timeout:50)},window.cancelIdleCallback=function(t){clearTimeout(t)});var ai;(function(t){t.PING="PING",t.PONG="PONG",t.BROADCAST="BROADCAST"})(ai||(ai={}));class Dh{constructor(e={}){this._opts=e,this._destroyed=!1,this._listeners=new Map,this._seenMessages=new WeakSet}destroy(e){e==null?this._listeners.clear():this._listeners.delete(e),this._destroyed=!0}receiveMessages(e,n){if(this._destroyed)return()=>{};let r=this._listeners.get(e);return r||(r=new Set,this._listeners.set(e,r)),r.add(n),()=>{const o=this._listeners.get(e);o==null||o.delete(n),(o==null?void 0:o.size)===0&&this._listeners.delete(e)}}transmit(e){var n,r;if(this._seenMessages.has(e)||((r=(n=this._opts).debugFilterMessage)===null||r===void 0?void 0:r.call(n,e))===!1)return;if(this._seenMessages.add(e),e.type===ai.BROADCAST&&e.to!=null)throw new Error("Broadcast message must not have a `to` field");if(typeof e.to!="string"&&(e.type===ai.PING||e.type===ai.PONG))throw new Error("PING/PONG message must have a `to` field");const o=()=>{var i;let s=e.to?this._listeners.get(e.to)||new Set:new Set([...this._listeners.values()].flatMap(l=>[...l])),a=this._listeners.get(Dh.WILD_CARD)||new Set;(i=new Set([...a,...s]))===null||i===void 0||i.forEach(l=>{l(e)})};this._opts.debugSlowdown==null?o():setTimeout(o,this._opts.debugSlowdown)}}Dh.WILD_CARD=Symbol("WILD_CARD");const KI="@bangle.dev/collab-manager/MANAGER";var d1;(function(t){t.Timeout="NetworkingError.Timeout"})(d1||(d1={}));var Hu;(function(t){t.NewVersion="CollabManagerBroadCastType.NewVersion",t.ResetClient="CollabManagerBroadCastType.ResetClient"})(Hu||(Hu={}));var Jt;(function(t){t.ApplyFailed="CollabFail.ApplyFailed",t.DocumentNotFound="CollabFail.DocumentNotFound",t.HistoryNotAvailable="CollabFail.HistoryNotAvailable",t.IncorrectManager="CollabFail.IncorrectManager",t.InvalidVersion="CollabFail.InvalidVersion",t.ManagerDestroyed="CollabFail.ManagerDestroyed",t.OutdatedVersion="CollabFail.OutdatedVersion",t.ManagerUnresponsive="CollabFail.ManagerUnresponsive"})(Jt||(Jt={}));var Ur;(function(t){t.GetDocument="CollabClientRequestType.GetDocument",t.PullEvents="CollabClientRequestType.PullEvents",t.PushEvents="CollabClientRequestType.PushEvents"})(Ur||(Ur={}));const Kq=1e3;function Gq(t,{emitter:e,to:n,from:r,requestTimeout:o=Kq}){return new Promise((i,s)=>{const a=GI(),l=e.receiveMessages(r,u=>{if(!(u.type!==ai.PONG||u.id!==a))return clearTimeout(c),l(),i(u.messageBody)}),c=setTimeout(()=>{l(),s(new Error(d1.Timeout))},o);e.transmit({to:n,from:r,id:a,messageBody:t,type:ai.PING})})}function GI(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)+"-"+Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)+"-"+Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)}class Zq{constructor(e){var n;this._opts=e,this.getDocument=o=>{let i={type:Ur.GetDocument,body:o};return this._wrapRequest(Ur.GetDocument,i)},this.pullEvents=o=>{const i={type:Ur.PullEvents,body:o};return this._wrapRequest(Ur.PullEvents,i)},this.pushEvents=o=>{const i={type:Ur.PushEvents,body:o};return this._wrapRequest(Ur.PushEvents,i)},this.managerId=this._opts.managerId;const r=(n=this._opts.messageBus)===null||n===void 0?void 0:n.receiveMessages(this._opts.clientId,o=>{if(o.type!==ai.BROADCAST&&o.from!==this.managerId)return;const i=o.messageBody,{type:s}=i;if(i.body.docName===this._opts.docName)switch(s){case Hu.NewVersion:{this._opts.onNewVersion(i.body);return}case Hu.ResetClient:{this._opts.onResetClient(i.body);return}default:throw new Error(`Unknown message type: ${s}`)}});this._opts.signal.addEventListener("abort",()=>{r()},{once:!0})}async _wrapRequest(e,n){try{return await Gq(n,{from:this._opts.clientId,to:this.managerId,emitter:this._opts.messageBus,requestTimeout:this._opts.requestTimeout})}catch(r){if(r instanceof Error)switch(r.message){case d1.Timeout:return{body:Jt.ManagerUnresponsive,type:e,ok:!1};default:throw r}throw r}}}class Yq{constructor(e,n,r,o){this.managerId=e,this._collabMessageBus=n;const i=this._collabMessageBus.receiveMessages(e,async s=>{if(s.type!==ai.PING)return;const{id:a,messageBody:l}=s;let c=l||{};switch(c.type){case Ur.GetDocument:case Ur.PullEvents:case Ur.PushEvents:{let u=await r(c,a);this._collabMessageBus.transmit({from:e,to:s.from,type:ai.PONG,id:a,messageBody:u});break}}});o.addEventListener("abort",()=>{i()},{once:!0})}broadcast(e){this._collabMessageBus.transmit({from:this.managerId,to:void 0,type:ai.BROADCAST,id:GI(),messageBody:e})}}function Jq(){throw new Error("InternalAPI: Eternal vars not set")}var Xq=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Ws(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Qq(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var o=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return t[r]}})}),n}var ZI={exports:{}},At={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var FT=Object.getOwnPropertySymbols,eW=Object.prototype.hasOwnProperty,tW=Object.prototype.propertyIsEnumerable;function nW(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function rW(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(e).map(function(i){return e[i]});if(r.join("")!=="0123456789")return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(i){o[i]=i}),Object.keys(Object.assign({},o)).join("")==="abcdefghijklmnopqrst"}catch(i){return!1}}var YI=rW()?Object.assign:function(t,e){for(var n,r=nW(t),o,i=1;i<arguments.length;i++){n=Object(arguments[i]);for(var s in n)eW.call(n,s)&&(r[s]=n[s]);if(FT){o=FT(n);for(var a=0;a<o.length;a++)tW.call(n,o[a])&&(r[o[a]]=n[o[a]])}}return r};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s$=YI,Cd=60103,JI=60106;At.Fragment=60107;At.StrictMode=60108;At.Profiler=60114;var XI=60109,QI=60110,eD=60112;At.Suspense=60113;var tD=60115,nD=60116;if(typeof Symbol=="function"&&Symbol.for){var Xo=Symbol.for;Cd=Xo("react.element"),JI=Xo("react.portal"),At.Fragment=Xo("react.fragment"),At.StrictMode=Xo("react.strict_mode"),At.Profiler=Xo("react.profiler"),XI=Xo("react.provider"),QI=Xo("react.context"),eD=Xo("react.forward_ref"),At.Suspense=Xo("react.suspense"),tD=Xo("react.memo"),nD=Xo("react.lazy")}var BT=typeof Symbol=="function"&&Symbol.iterator;function oW(t){return t===null||typeof t!="object"?null:(t=BT&&t[BT]||t["@@iterator"],typeof t=="function"?t:null)}function Mh(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var rD={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},oD={};function Td(t,e,n){this.props=t,this.context=e,this.refs=oD,this.updater=n||rD}Td.prototype.isReactComponent={};Td.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error(Mh(85));this.updater.enqueueSetState(this,t,e,"setState")};Td.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function iD(){}iD.prototype=Td.prototype;function a$(t,e,n){this.props=t,this.context=e,this.refs=oD,this.updater=n||rD}var l$=a$.prototype=new iD;l$.constructor=a$;s$(l$,Td.prototype);l$.isPureReactComponent=!0;var c$={current:null},sD=Object.prototype.hasOwnProperty,aD={key:!0,ref:!0,__self:!0,__source:!0};function lD(t,e,n){var r,o={},i=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(i=""+e.key),e)sD.call(e,r)&&!aD.hasOwnProperty(r)&&(o[r]=e[r]);var a=arguments.length-2;if(a===1)o.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];o.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)o[r]===void 0&&(o[r]=a[r]);return{$$typeof:Cd,type:t,key:i,ref:s,props:o,_owner:c$.current}}function iW(t,e){return{$$typeof:Cd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function u$(t){return typeof t=="object"&&t!==null&&t.$$typeof===Cd}function sW(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var jT=/\/+/g;function xv(t,e){return typeof t=="object"&&t!==null&&t.key!=null?sW(""+t.key):e.toString(36)}function Ig(t,e,n,r,o){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Cd:case JI:s=!0}}if(s)return s=t,o=o(s),t=r===""?"."+xv(s,0):r,Array.isArray(o)?(n="",t!=null&&(n=t.replace(jT,"$&/")+"/"),Ig(o,e,n,"",function(c){return c})):o!=null&&(u$(o)&&(o=iW(o,n+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(jT,"$&/")+"/")+t)),e.push(o)),1;if(s=0,r=r===""?".":r+":",Array.isArray(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+xv(i,a);s+=Ig(i,e,n,l,o)}else if(l=oW(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+xv(i,a++),s+=Ig(i,e,n,l,o);else if(i==="object")throw e=""+t,Error(Mh(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e));return s}function Um(t,e,n){if(t==null)return t;var r=[],o=0;return Ig(t,r,"","",function(i){return e.call(n,i,o++)}),r}function aW(t){if(t._status===-1){var e=t._result;e=e(),t._status=0,t._result=e,e.then(function(n){t._status===0&&(n=n.default,t._status=1,t._result=n)},function(n){t._status===0&&(t._status=2,t._result=n)})}if(t._status===1)return t._result;throw t._result}var cD={current:null};function Us(){var t=cD.current;if(t===null)throw Error(Mh(321));return t}var lW={ReactCurrentDispatcher:cD,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:c$,IsSomeRendererActing:{current:!1},assign:s$};At.Children={map:Um,forEach:function(t,e,n){Um(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Um(t,function(){e++}),e},toArray:function(t){return Um(t,function(e){return e})||[]},only:function(t){if(!u$(t))throw Error(Mh(143));return t}};At.Component=Td;At.PureComponent=a$;At.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lW;At.cloneElement=function(t,e,n){if(t==null)throw Error(Mh(267,t));var r=s$({},t.props),o=t.key,i=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,s=c$.current),e.key!==void 0&&(o=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)sD.call(e,l)&&!aD.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Cd,type:t.type,key:o,ref:i,props:r,_owner:s}};At.createContext=function(t,e){return e===void 0&&(e=null),t={$$typeof:QI,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider={$$typeof:XI,_context:t},t.Consumer=t};At.createElement=lD;At.createFactory=function(t){var e=lD.bind(null,t);return e.type=t,e};At.createRef=function(){return{current:null}};At.forwardRef=function(t){return{$$typeof:eD,render:t}};At.isValidElement=u$;At.lazy=function(t){return{$$typeof:nD,_payload:{_status:-1,_result:t},_init:aW}};At.memo=function(t,e){return{$$typeof:tD,type:t,compare:e===void 0?null:e}};At.useCallback=function(t,e){return Us().useCallback(t,e)};At.useContext=function(t,e){return Us().useContext(t,e)};At.useDebugValue=function(){};At.useEffect=function(t,e){return Us().useEffect(t,e)};At.useImperativeHandle=function(t,e,n){return Us().useImperativeHandle(t,e,n)};At.useLayoutEffect=function(t,e){return Us().useLayoutEffect(t,e)};At.useMemo=function(t,e){return Us().useMemo(t,e)};At.useReducer=function(t,e,n){return Us().useReducer(t,e,n)};At.useRef=function(t){return Us().useRef(t)};At.useState=function(t){return Us().useState(t)};At.version="17.0.2";ZI.exports=At;var k=ZI.exports,H=Ws(k),cW=function(){function t(){this.keyToValue=new Map,this.valueToKey=new Map}return t.prototype.set=function(e,n){this.keyToValue.set(e,n),this.valueToKey.set(n,e)},t.prototype.getByKey=function(e){return this.keyToValue.get(e)},t.prototype.getByValue=function(e){return this.valueToKey.get(e)},t.prototype.clear=function(){this.keyToValue.clear(),this.valueToKey.clear()},t}(),uD=function(){function t(e){this.generateIdentifier=e,this.kv=new cW}return t.prototype.register=function(e,n){this.kv.getByValue(e)||(n||(n=this.generateIdentifier(e)),this.kv.set(n,e))},t.prototype.clear=function(){this.kv.clear()},t.prototype.getIdentifier=function(e){return this.kv.getByValue(e)},t.prototype.getValue=function(e){return this.kv.getByKey(e)},t}(),uW=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),dW=function(t){uW(e,t);function e(){var n=t.call(this,function(r){return r.name})||this;return n.classToAllowedProps=new Map,n}return e.prototype.register=function(n,r){typeof r=="object"?(r.allowProps&&this.classToAllowedProps.set(n,r.allowProps),t.prototype.register.call(this,n,r.identifier)):t.prototype.register.call(this,n,r)},e.prototype.getAllowedProps=function(n){return this.classToAllowedProps.get(n)},e}(uD),fW=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),o,i=[],s;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i};function pW(t){if("values"in Object)return Object.values(t);var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(t[n]);return e}function hW(t,e){var n=pW(t);if("find"in n)return n.find(e);for(var r=n,o=0;o<r.length;o++){var i=r[o];if(e(i))return i}}function Ku(t,e){Object.entries(t).forEach(function(n){var r=fW(n,2),o=r[0],i=r[1];return e(i,o)})}function Dg(t,e){return t.indexOf(e)!==-1}function zT(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(e(r))return r}}var mW=function(){function t(){this.transfomers={}}return t.prototype.register=function(e){this.transfomers[e.name]=e},t.prototype.findApplicable=function(e){return hW(this.transfomers,function(n){return n.isApplicable(e)})},t.prototype.findByName=function(e){return this.transfomers[e]},t}(),gW=function(t){return Object.prototype.toString.call(t).slice(8,-1)},dD=function(t){return typeof t=="undefined"},yW=function(t){return t===null},Cp=function(t){return typeof t!="object"||t===null||t===Object.prototype?!1:Object.getPrototypeOf(t)===null?!0:Object.getPrototypeOf(t)===Object.prototype},I_=function(t){return Cp(t)&&Object.keys(t).length===0},Za=function(t){return Array.isArray(t)},bW=function(t){return typeof t=="string"},vW=function(t){return typeof t=="number"&&!isNaN(t)},wW=function(t){return typeof t=="boolean"},_W=function(t){return t instanceof RegExp},Tp=function(t){return t instanceof Map},Ap=function(t){return t instanceof Set},fD=function(t){return gW(t)==="Symbol"},xW=function(t){return t instanceof Date&&!isNaN(t.valueOf())},kW=function(t){return t instanceof Error},qT=function(t){return typeof t=="number"&&isNaN(t)},$W=function(t){return wW(t)||yW(t)||dD(t)||vW(t)||bW(t)||fD(t)},SW=function(t){return typeof t=="bigint"},EW=function(t){return t===1/0||t===-1/0},CW=function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},TW=function(t){return t instanceof URL},pD=function(t){return t.replace(/\./g,"\\.")},kv=function(t){return t.map(String).map(pD).join(".")},Jf=function(t){for(var e=[],n="",r=0;r<t.length;r++){var o=t.charAt(r),i=o==="\\"&&t.charAt(r+1)===".";if(i){n+=".",r++;continue}var s=o===".";if(s){e.push(n),n="";continue}n+=o}var a=n;return e.push(a),e},D_=function(){return D_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},D_.apply(this,arguments)},M_=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),o,i=[],s;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},L_=function(t,e){for(var n=0,r=e.length,o=t.length;n<r;n++,o++)t[o]=e[n];return t};function Pi(t,e,n,r){return{isApplicable:t,annotation:e,transform:n,untransform:r}}var hD=[Pi(dD,"undefined",function(){return null},function(){}),Pi(SW,"bigint",function(t){return t.toString()},function(t){return typeof BigInt!="undefined"?BigInt(t):(console.error("Please add a BigInt polyfill."),t)}),Pi(xW,"Date",function(t){return t.toISOString()},function(t){return new Date(t)}),Pi(kW,"Error",function(t,e){var n={name:t.name,message:t.message};return e.allowedErrorProps.forEach(function(r){n[r]=t[r]}),n},function(t,e){var n=new Error(t.message);return n.name=t.name,n.stack=t.stack,e.allowedErrorProps.forEach(function(r){n[r]=t[r]}),n}),Pi(_W,"regexp",function(t){return""+t},function(t){var e=t.slice(1,t.lastIndexOf("/")),n=t.slice(t.lastIndexOf("/")+1);return new RegExp(e,n)}),Pi(Ap,"set",function(t){return L_([],M_(t.values()))},function(t){return new Set(t)}),Pi(Tp,"map",function(t){return L_([],M_(t.entries()))},function(t){return new Map(t)}),Pi(function(t){return qT(t)||EW(t)},"number",function(t){return qT(t)?"NaN":t>0?"Infinity":"-Infinity"},Number),Pi(function(t){return t===0&&1/t===-1/0},"number",function(){return"-0"},Number),Pi(TW,"URL",function(t){return t.toString()},function(t){return new URL(t)})];function Xy(t,e,n,r){return{isApplicable:t,annotation:e,transform:n,untransform:r}}var mD=Xy(function(t,e){if(fD(t)){var n=!!e.symbolRegistry.getIdentifier(t);return n}return!1},function(t,e){var n=e.symbolRegistry.getIdentifier(t);return["symbol",n]},function(t){return t.description},function(t,e,n){var r=n.symbolRegistry.getValue(e[1]);if(!r)throw new Error("Trying to deserialize unknown symbol");return r}),AW=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,Uint8ClampedArray].reduce(function(t,e){return t[e.name]=e,t},{}),gD=Xy(CW,function(t){return["typed-array",t.constructor.name]},function(t){return L_([],M_(t))},function(t,e){var n=AW[e[1]];if(!n)throw new Error("Trying to deserialize unknown typed array");return new n(t)});function yD(t,e){if(t!=null&&t.constructor){var n=!!e.classRegistry.getIdentifier(t.constructor);return n}return!1}var bD=Xy(yD,function(t,e){var n=e.classRegistry.getIdentifier(t.constructor);return["class",n]},function(t,e){var n=e.classRegistry.getAllowedProps(t.constructor);if(!n)return D_({},t);var r={};return n.forEach(function(o){r[o]=t[o]}),r},function(t,e,n){var r=n.classRegistry.getValue(e[1]);if(!r)throw new Error("Trying to deserialize unknown class - check https://github.com/blitz-js/superjson/issues/116#issuecomment-773996564");return Object.assign(Object.create(r.prototype),t)}),vD=Xy(function(t,e){return!!e.customTransformerRegistry.findApplicable(t)},function(t,e){var n=e.customTransformerRegistry.findApplicable(t);return["custom",n.name]},function(t,e){var n=e.customTransformerRegistry.findApplicable(t);return n.serialize(t)},function(t,e,n){var r=n.customTransformerRegistry.findByName(e[1]);if(!r)throw new Error("Trying to deserialize unknown custom value");return r.deserialize(t)}),NW=[bD,mD,vD,gD],WT=function(t,e){var n=zT(NW,function(o){return o.isApplicable(t,e)});if(n)return{value:n.transform(t,e),type:n.annotation(t,e)};var r=zT(hD,function(o){return o.isApplicable(t,e)});if(r)return{value:r.transform(t,e),type:r.annotation}},wD={};hD.forEach(function(t){wD[t.annotation]=t});var RW=function(t,e,n){if(Za(e))switch(e[0]){case"symbol":return mD.untransform(t,e,n);case"class":return bD.untransform(t,e,n);case"custom":return vD.untransform(t,e,n);case"typed-array":return gD.untransform(t,e,n);default:throw new Error("Unknown transformation: "+e)}else{var r=wD[e];if(!r)throw new Error("Unknown transformation: "+e);return r.untransform(t,n)}},fu=function(t,e){for(var n=t.keys();e>0;)n.next(),e--;return n.next().value};function _D(t){if(Dg(t,"__proto__"))throw new Error("__proto__ is not allowed as a property");if(Dg(t,"prototype"))throw new Error("prototype is not allowed as a property");if(Dg(t,"constructor"))throw new Error("constructor is not allowed as a property")}var PW=function(t,e){_D(e);for(var n=0;n<e.length;n++){var r=e[n];if(Ap(t))t=fu(t,+r);else if(Tp(t)){var o=+r,i=+e[++n]==0?"key":"value",s=fu(t,o);switch(i){case"key":t=s;break;case"value":t=t.get(s);break}}else t=t[r]}return t},F_=function(t,e,n){if(_D(e),e.length===0)return n(t);for(var r=t,o=0;o<e.length-1;o++){var i=e[o];if(Za(r)){var s=+i;r=r[s]}else if(Cp(r))r=r[i];else if(Ap(r)){var a=+i;r=fu(r,a)}else if(Tp(r)){var l=o===e.length-2;if(l)break;var a=+i,c=+e[++o]==0?"key":"value",u=fu(r,a);switch(c){case"key":r=u;break;case"value":r=r.get(u);break}}}var d=e[e.length-1];if(Za(r)?r[+d]=n(r[+d]):Cp(r)&&(r[d]=n(r[d])),Ap(r)){var f=fu(r,+d),p=n(f);f!==p&&(r.delete(f),r.add(p))}if(Tp(r)){var a=+e[e.length-2],h=fu(r,a),c=+d==0?"key":"value";switch(c){case"key":{var y=n(h);r.set(y,r.get(h)),y!==h&&r.delete(h);break}case"value":{r.set(h,n(r.get(h)));break}}}return t},xs=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),o,i=[],s;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},Ea=function(t,e){for(var n=0,r=e.length,o=t.length;n<r;n++,o++)t[o]=e[n];return t};function B_(t,e,n){if(n===void 0&&(n=[]),!!t){if(!Za(t)){Ku(t,function(s,a){return B_(s,e,Ea(Ea([],xs(n)),xs(Jf(a))))});return}var r=xs(t,2),o=r[0],i=r[1];i&&Ku(i,function(s,a){B_(s,e,Ea(Ea([],xs(n)),xs(Jf(a))))}),e(o,n)}}function OW(t,e,n){return B_(e,function(r,o){t=F_(t,o,function(i){return RW(i,r,n)})}),t}function IW(t,e){function n(s,a){var l=PW(t,Jf(a));s.map(Jf).forEach(function(c){t=F_(t,c,function(){return l})})}if(Za(e)){var r=xs(e,2),o=r[0],i=r[1];o.forEach(function(s){t=F_(t,Jf(s),function(){return t})}),i&&Ku(i,n)}else Ku(e,n);return t}var DW=function(t,e){return Cp(t)||Za(t)||Tp(t)||Ap(t)||yD(t,e)};function MW(t,e,n){var r=n.get(t);r?r.push(e):n.set(t,[e])}function LW(t,e){var n={},r=void 0;return t.forEach(function(o){if(!(o.length<=1)){e||(o=o.map(function(l){return l.map(String)}).sort(function(l,c){return l.length-c.length}));var i=xs(o),s=i[0],a=i.slice(1);s.length===0?r=a.map(kv):n[kv(s)]=a.map(kv)}}),r?I_(n)?[r]:[r,n]:I_(n)?void 0:n}var xD=function(t,e,n,r,o,i,s){var a;o===void 0&&(o=[]),i===void 0&&(i=[]),s===void 0&&(s=new Map);var l=$W(t);if(!l){MW(t,o,e);var c=s.get(t);if(c)return r?{transformedValue:null}:c}if(!DW(t,n)){var u=WT(t,n),d=u?{transformedValue:u.value,annotations:[u.type]}:{transformedValue:t};return l||s.set(t,d),d}if(Dg(i,t))return{transformedValue:null};var f=WT(t,n),p=(a=f==null?void 0:f.value)!==null&&a!==void 0?a:t,h=Za(p)?[]:{},y={};Ku(p,function(w,x){var $=xD(w,e,n,r,Ea(Ea([],xs(o)),[x]),Ea(Ea([],xs(i)),[t]),s);h[x]=$.transformedValue,Za($.annotations)?y[x]=$.annotations:Cp($.annotations)&&Ku($.annotations,function(S,I){y[pD(x)+"."+I]=S})});var m=I_(y)?{transformedValue:h,annotations:f?[f.type]:void 0}:{transformedValue:h,annotations:f?[f.type,y]:y};return l||s.set(t,m),m};function kD(t){return Object.prototype.toString.call(t).slice(8,-1)}function FW(t){if(kD(t)!=="Object")return!1;const e=Object.getPrototypeOf(t);return!!e&&e.constructor===Object&&e===Object.prototype}function UT(t){return kD(t)==="Array"}function BW(t,e,n,r,o){const i={}.propertyIsEnumerable.call(r,e)?"enumerable":"nonenumerable";i==="enumerable"&&(t[e]=n),o&&i==="nonenumerable"&&Object.defineProperty(t,e,{value:n,enumerable:!1,writable:!0,configurable:!0})}function j_(t,e={}){if(UT(t))return t.map(o=>j_(o,e));if(!FW(t))return t;const n=Object.getOwnPropertyNames(t),r=Object.getOwnPropertySymbols(t);return[...n,...r].reduce((o,i)=>{if(UT(e.props)&&!e.props.includes(i))return o;const s=t[i],a=j_(s,e);return BW(o,i,a,t,e.nonenumerable),o},{})}var Ml=function(){return Ml=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},Ml.apply(this,arguments)},jW=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),o,i=[],s;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},zW=function(t,e){for(var n=0,r=e.length,o=t.length;n<r;n++,o++)t[o]=e[n];return t},$D=function(){function t(e){var n=e===void 0?{}:e,r=n.dedupe,o=r===void 0?!1:r;this.classRegistry=new dW,this.symbolRegistry=new uD(function(i){var s;return(s=i.description)!==null&&s!==void 0?s:""}),this.customTransformerRegistry=new mW,this.allowedErrorProps=[],this.dedupe=o}return t.prototype.serialize=function(e){var n=new Map,r=xD(e,n,this,this.dedupe),o={json:r.transformedValue};r.annotations&&(o.meta=Ml(Ml({},o.meta),{values:r.annotations}));var i=LW(n,this.dedupe);return i&&(o.meta=Ml(Ml({},o.meta),{referentialEqualities:i})),o},t.prototype.deserialize=function(e){var n=e.json,r=e.meta,o=j_(n);return r!=null&&r.values&&(o=OW(o,r.values,this)),r!=null&&r.referentialEqualities&&(o=IW(o,r.referentialEqualities)),o},t.prototype.stringify=function(e){return JSON.stringify(this.serialize(e))},t.prototype.parse=function(e){return this.deserialize(JSON.parse(e))},t.prototype.registerClass=function(e,n){this.classRegistry.register(e,n)},t.prototype.registerSymbol=function(e,n){this.symbolRegistry.register(e,n)},t.prototype.registerCustom=function(e,n){this.customTransformerRegistry.register(Ml({name:n},e))},t.prototype.allowErrorProps=function(){for(var e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];(e=this.allowedErrorProps).push.apply(e,zW([],jW(n)))},t.defaultInstance=new t,t.serialize=t.defaultInstance.serialize.bind(t.defaultInstance),t.deserialize=t.defaultInstance.deserialize.bind(t.defaultInstance),t.stringify=t.defaultInstance.stringify.bind(t.defaultInstance),t.parse=t.defaultInstance.parse.bind(t.defaultInstance),t.registerClass=t.defaultInstance.registerClass.bind(t.defaultInstance),t.registerSymbol=t.defaultInstance.registerSymbol.bind(t.defaultInstance),t.registerCustom=t.defaultInstance.registerCustom.bind(t.defaultInstance),t.allowErrorProps=t.defaultInstance.allowErrorProps.bind(t.defaultInstance),t}(),qW=$D.serialize,WW=$D.deserialize;function f1(t){let e=UW(t);if(e.length>0)throw new Error(`assertSafeZodSchema: schema contains unsafe types: ${e.join(", ")}`);return t}const UW=t=>{let e=[];const n=r=>{const{typeName:o}=r._def;switch(o){case"ZodString":break;case"ZodNumber":break;case"ZodBoolean":break;case"ZodUndefined":break;case"ZodNull":break;case"ZodLiteral":break;case"ZodObject":{Object.values(r._def.shape()).forEach(s=>{n(s)});break}case"ZodArray":{n(r._def.type);break}case"ZodUnion":{r._def.options.map(s=>n(s));break}case"ZodOptional":{n(r._def.innerType);break}case"ZodNullable":{n(r._def.innerType);break}case"ZodTuple":{r._def.items.forEach(i=>n(i));break}case"ZodRecord":{n(r._def.keyType),n(r._def.valueType);break}case"ZodMap":{n(r._def.valueType),n(r._def.keyType);break}case"ZodSet":{n(r._def.valueType);break}case"ZodNativeEnum":{for(const[i,s]of Object.entries(r._def.values))typeof s!="number"&&typeof s!="string"&&e.push(`ZodNativeEnum: for ${i} only supports string, number and boolean`);break}case"ZodIntersection":{n(r._def.left),n(r._def.right);break}default:{e.push(o);break}}};return n(t),e};function SD(t,{dbKey:e,schema:n,serialize:r,deserialize:o}){return f1(n),{populate:(i,s)=>{const a=r(i);if(s[e]!==void 0)throw new Error(`DB key "${e}" already exists, it must be unique`);s[e]=qW(a)},retrieve:i=>{const s=i[e];if(s===void 0)return t.initialState;const a=WW(s);if(typeof a.version!="number")return console.error("Version number is not a number"),t.initialState;const l=n.safeParse(a.data);return l.success?o({version:a.version,data:l.data}):(console.error(l.error),t.initialState)}}}var ED={exports:{}},CD={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gu=k;function VW(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var HW=typeof Object.is=="function"?Object.is:VW,KW=Gu.useState,GW=Gu.useEffect,ZW=Gu.useLayoutEffect,YW=Gu.useDebugValue;function JW(t,e){var n=e(),r=KW({inst:{value:n,getSnapshot:e}}),o=r[0].inst,i=r[1];return ZW(function(){o.value=n,o.getSnapshot=e,$v(o)&&i({inst:o})},[t,n,e]),GW(function(){return $v(o)&&i({inst:o}),t(function(){$v(o)&&i({inst:o})})},[t]),YW(n),n}function $v(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!HW(t,n)}catch(r){return!0}}function XW(t,e){return e()}var QW=typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"?XW:JW;CD.useSyncExternalStore=Gu.useSyncExternalStore!==void 0?Gu.useSyncExternalStore:QW;ED.exports=CD;var eU=ED.exports,tU=Ws(eU);const{useSyncExternalStore:nU}=tU;function TD(t){function e(n){const r=k.useRef(),[o]=k.useState(()=>({subscribe:a=>{const l=t.effect(c=>{const u=n.track(c);r.current=u,a(),queueMicrotask(()=>{var d;((d=c._runInstance)==null?void 0:d._addTrackedCount)===0&&console.warn(`You forgot to destructure/access the tracked field from ${n.name}. This will not track any changes!.`)})});return()=>{t.unregisterEffect(l)}},getSnapshot:()=>{var a;return(a=r.current)!=null?a:n.get(t.state)}})),i=nU(o.subscribe,o.getSnapshot);return k.useDebugValue(i),i}return e}class AD{constructor(e,n){ee(this,"lastStateBeforeDestroy");ee(this,"dispatch",(e,n)=>{this._rootStore?this._rootStore.dispatch(e,{...n,debugInfo:this.name+(n!=null&&n.debugInfo?` (${n.debugInfo})`:"")}):console.error(`Cannot dispatch on a stale effect "${this.name}" run. This is likely a bug in your code.`)});ee(this,"_destroyed",!1);ee(this,"_rootStore");this.name=n,this._rootStore=e}get destroyed(){return this._destroyed}get state(){return this._rootStore?this._rootStore.state:(console.warn(`Trying to access store state of a destroyed store "${this.name}", this will give stale data and cause memory leaks.`),this.lastStateBeforeDestroy)}_destroy(){var e;this._destroyed||(this.lastStateBeforeDestroy=(e=this._rootStore)==null?void 0:e.state,this._rootStore=void 0,this._destroyed=!0)}}const Sv=new WeakMap;function d$(t){if(Sv.has(t))return Sv.get(t);const e={};for(const r of t)for(const o of r.dependencies){let i=e[o.sliceId];i||(i=new Set,e[o.sliceId]=i),i.add(r.sliceId)}const n=rU(e);return Sv.set(t,n),n}function rU(t){const e={},n=r=>{let o=e[r];if(o)return o;o=new Set,e[r]=o;const i=t[r];if(i)for(const s of i){o.add(s);for(const a of n(s))o.add(a)}return o};for(const r of Object.keys(t))n(r);return e}const oU=()=>({txCounter:0,actionIdCounters:Object.create(null),sliceIdCounters:Object.create(null)});let Cl=oU();class iU{createActionId(e,n=""){let r=`a_${n}[${e}]`;return e in Cl.actionIdCounters?`${r}${Cl.actionIdCounters[e]++}`:(Cl.actionIdCounters[e]=0,r)}createSliceId(e){return e in Cl.sliceIdCounters?`sl_${e}$${++Cl.sliceIdCounters[e]}`:(Cl.sliceIdCounters[e]=0,`sl_${e}$`)}createTransactionId(){return`tx_${Cl.txCounter++}`}}const f$=new iU;class ND{constructor(e){ee(this,"name");ee(this,"initialState");ee(this,"dependencies");ee(this,"sliceId");this.name=e.name,this.initialState=e.state,this.dependencies=e.dependencies,this.sliceId=e.sliceId||f$.createSliceId(e.name)}get(e){return e.resolve(this.sliceId)}query(e){return(n,...r)=>e(...r)(n)}update(e,n,r={}){const o=e.getSliceStateManager(this.sliceId).sliceState,i=typeof n=="function"?n(o):n;let s;return r.replace||i===o?s=i:s={...o,...i},{name:this.name,[q_]:s}}}const p$="DEBUG__DISPATCHER",h$="store-name";let RD=class z_{constructor(e,n){ee(this,"metadata",new Qy);ee(this,"txId",f$.createTransactionId());ee(this,"destroyed",!1);this.steps=e,this.opts=n}static create(e){const n={params:e.params,actionId:e.actionId,sourceSliceName:e.sourceSliceName,sourceSliceId:e.sourceSliceId,targetSliceName:e.name,targetSliceId:e.sourceSliceId};return new z_([n],{})}get isDestroyed(){return this.destroyed}append(e){return e.destroyed=!0,this.destroyed=!0,new z_([...this.steps,...e.steps],this.opts)}};class Qy{constructor(){ee(this,"_metadata",Object.create(null))}appendMetadata(e,n){let r=this.getMetadata(e);this.setMetadata(e,r?r+","+n:n)}fork(){const e=new Qy;return e._metadata={...this._metadata},e}getMetadata(e){return this._metadata[e]}setMetadata(e,n){this._metadata[e]=n}}const Ev=new Map;class PD{constructor(e){ee(this,"actionId");this.opts=e;const n=e.debugName||e.userCallback.name;if(this.actionId=f$.createActionId(e.slice.sliceId,n),Ev.has(this.actionId))throw new Error(`ActionId "${this.actionId}" can not already exist`);Ev.set(this.actionId,this)}getTransactionBuilder(){return(...e)=>this.opts.userCallback(...e).makeTxn({params:e,actionId:this.actionId,sliceId:this.opts.slice.sliceId,sliceName:this.opts.slice.name})}static _applyStep(e,n){const{actionId:r,targetSliceId:o,params:i}=n,s=Ev.get(r);if(!s)throw new Error(`ActionId "${r}" for Slice "${o}" does not exist`);const l=s.opts.userCallback(...i).opts.calcUserSliceState(e);return l!=null&&typeof l=="object"&&q_ in l?l[q_]:l}}class sU{constructor(e){this.opts=e}makeTxn(e){return RD.create({name:this.opts.name,params:e.params,actionId:e.actionId,sourceSliceId:e.sliceId,sourceSliceName:e.sliceName})}}let m$=class OD extends ND{constructor(e){super(e),this.opts=e}static create(e){return new OD(e)}simpleAction(e,n){return this.action(r=>this.tx(o=>this.update(o,i=>{if(!n)return r===i[e]?i:{...i,[e]:r};const s=n(r,o);return s===i[e]?i:s})),{name:`simpleAction(${e.toString()})`})}action(e,n){return new PD({slice:this,userCallback:e,debugName:n==null?void 0:n.name}).getTransactionBuilder()}track(e){return new Proxy(this.get(e.state),{get:(n,r)=>{const o=n[r];return e._addTrackedField(this,r,o),o}})}tx(e){return new sU({name:this.name,calcUserSliceState:e})}};function Ic(t,e){return m$.create({...e,dependencies:t})}class g$ extends ND{constructor(e){super(e),this.opts=e}static create(e){return new g$(e)}get(e){return e.resolve(this.sliceId,{skipDerivedData:!0})}selector(e,n={}){const r=new WeakMap,o=new WeakMap,i=n.equal;return typeof i=="function"?s=>lU(s,e,r,o,i):s=>aU(s,e,r)}slice(e){const n=Object.entries(e.derivedState),r=new WeakMap;return m$.create({...this.opts,sliceId:this.sliceId,calcDerivedState:i=>cU(i,n,r)})}}function y$(t,e){return g$.create({...e,dependencies:t})}function aU(t,e,n){if(n.has(t))return n.get(t);const r=e(t);return n.set(t,r),r}function lU(t,e,n,r,o){if(n.has(t))return n.get(t);const i=e(t);if(!r.has(t._storeStateKey))return r.set(t._storeStateKey,i),n.set(t,i),i;const s=r.get(t._storeStateKey);return o(i,s)?(n.set(t,s),s):(r.set(t._storeStateKey,i),n.set(t,i),i)}function cU(t,e,n){const r=Object.fromEntries(e.map(([i,s])=>[i,s(t)])),o=n.get(t._storeStateKey);return o&&dU(o,r)?o:(n.set(t._storeStateKey,r),r)}function uU(t){return t instanceof m$}function dU(t,e){if(Object.is(t,e))return!0;const n=Object.keys(t),r=Object.keys(e);return n.length!==r.length?!1:n.every(o=>Object.prototype.hasOwnProperty.call(e,o)&&Object.is(t[o],e[o]))}function fU(t){pU(t),hU(t),bU(t),yU(t)}function pU(t){for(const e of t){const n=e.dependencies;if(new Set(n.map(r=>r.sliceId)).size!==n.length)throw new Error(`Slice "${e.sliceId}" has duplicate dependencies: ${n.map(r=>r.sliceId).join(", ")}`)}}function hU(t){const e=mU(t.map(n=>n.sliceId));if(e)throw new Error("Duplicate slice ids "+e.join(", "))}function mU(t){const e=new Set(t);if(t.length!==e.size)return gU(t)}function gU(t){const e=new Set,n=new Set;for(const r of t)e.has(r)?n.add(r):e.add(r);return[...n]}function yU(t){const e=new Set,n=new Set,r=o=>{const i=o.sliceId;if(e.has(i))return!0;if(n.has(i))return!1;n.add(i),e.add(i);for(const s of o.dependencies)if(r(s))return!0;return e.delete(i),!1};for(const o of t)if(r(o)){const s=[...e];throw s.push(o.sliceId),new Error(`Circular dependency detected in slice "${o.sliceId}" with path ${s.join(" ->")}`)}}function bU(t){let e=new Set;for(const n of t){const r=n.dependencies;if(r!==void 0){const o=r.map(i=>i.sliceId);for(const i of o)if(!e.has(i))throw new Error(`Slice "${n.sliceId}" has a dependency on Slice "${i}" which is either not registered or is registered after this slice.`)}e.add(n.sliceId)}}const q_=Symbol("Updater"),ID=typeof window!="undefined"&&"requestIdleCallback"in window,vU="OPERATION_NAME",wU=15;class DD extends AD{constructor(n,r,o){super(n,r);ee(this,"cleanupRan",!1);ee(this,"_cleanupCallbacks",new Set);this.opts=o}_addCleanup(n){if(this.cleanupRan){console.warn(`Adding a new cleanup to ${this.name} as cleanups have already run`),n();return}this._cleanupCallbacks.add(n)}_runCleanup(){if(!this.cleanupRan){for(const n of this._cleanupCallbacks)try{n()}catch(r){console.error(r)}this.cleanupRan=!0}}}function pl(t){return e=>{const n=new WeakMap,r=e.name||"anonymous-operation";return _U(n,e,r,t)}}function _U(t,e,n,r){return(...o)=>{const i=a=>{let l=t.get(a);l||(l=new xU(e,r,n),t.set(a,l)),l.run(a,o)},s=new Qy;return s.appendMetadata(vU,n),{name:n,run:i,metadata:s}}}class xU{constructor(e,n={},r){ee(this,"opStore");this.operationCallback=e,this.opts=n,this.name=r}deferExecution(e,n){ID?window.requestIdleCallback(e,{timeout:n}):setTimeout(e,n)}run(e,n){this.scheduler(()=>{var o;(o=this.opStore)==null||o._runCleanup();const r=new DD(e,this.name,this.opts);this.opStore=r,this._run(r,n)})}scheduler(e){const n=typeof this.opts.maxWait=="number"?this.opts.maxWait:wU;this.opts.deferred?this.deferExecution(e,n):queueMicrotask(e)}async _run(e,n){var o,i;if(e.destroyed||(i=(o=this.opStore)==null?void 0:o._rootStore)!=null&&i.destroyed){console.warn(`Operation ${this.name} can not run after the store was destroyed`);return}const r=this.operationCallback(...n)(e);r instanceof Promise&&await r}}function Lh(t,e){var n;t instanceof DD?t._addCleanup(e):(n=t._runInstance)==null||n.addCleanup(e)}class kU extends AD{constructor(e,n,r){super(n,r),this._runInstance=e}_addTrackedField(e,n,r){var o;(o=this._runInstance)==null||o.addTrackedField(e,n,r)}_destroy(){this.destroyed||(this._runInstance=void 0,super._destroy())}}class b${constructor(e,n){ee(this,"effectStore");ee(this,"_cleanups",new Set);ee(this,"_dependencies",new Map);ee(this,"_addTrackedCount",0);this.rootStore=e,this.name=n,this.effectStore=new kU(this,e,this.name)}get dependencies(){return this._dependencies}addCleanup(e){this._cleanups.add(e)}addTrackedField(e,n,r){this._addTrackedCount++;const o=this._dependencies.get(e);if(o===void 0){this._dependencies.set(e,[{field:n,value:r}]);return}o.push({field:n,value:r})}newRun(){return this.effectStore.destroyed||this._cleanups.forEach(e=>{e()}),this.effectStore._destroy(),new b$(this.rootStore,this.name)}whatDependenciesStateChange(){for(const[e,n]of this._dependencies){const r=e.get(this.rootStore.state);for(const o of n)if(!Object.is(o.value,r[o.field]))return o.field}return!1}}const $U=15,SU=(t,e)=>{e.deferred?ID?window.requestIdleCallback(t,{timeout:e.maxWait}):setTimeout(t,e.maxWait):queueMicrotask(t)};class EU{constructor(e,n,r){ee(this,"runInstance");ee(this,"debug");ee(this,"destroyed",!1);ee(this,"pendingRun",!1);ee(this,"runCount",0);ee(this,"scheduler");ee(this,"name");this.callback=e,this.rootStore=n,this.opts=r,this.name=r.name||e.name||"anonymous",this.runInstance=new b$(n,this.name),this.debug=n.opts.debug,this.scheduler=n.opts.overrideEffectScheduler||r.scheduler}destroy(){this.destroyed||(this.runInstance=this.runInstance.newRun(),this.destroyed=!0)}run(e){return this.pendingRun||!this.shouldQueueRun(e)?!1:(this.pendingRun=!0,this.scheduler(()=>{this._run(),this.pendingRun=!1},this.opts),!0)}shouldQueueRun(e){if(this.destroyed)return!1;if(e===void 0)return!0;for(const n of this.runInstance.dependencies.keys())if(e.has(n))return!0;return this.runCount===0}_run(){var r;if(this.destroyed)return;let e="";if(this.runCount>0){const o=this.runInstance.whatDependenciesStateChange();if(o===!1)return;e=o}const n=this.runInstance;this.runInstance=n.newRun(),this.callback(this.runInstance.effectStore),(r=this.debug)==null||r.call(this,{type:this.opts.deferred?"UPDATE_EFFECT":"SYNC_UPDATE_EFFECT",name:this.name,changed:e}),this.runCount++}}function Ko(t,{deferred:e=!0,maxWait:n=$U,scheduler:r=SU}={}){return o=>new EU(t,o,{deferred:e,maxWait:n,scheduler:r})}class CU{constructor(e,n){ee(this,"slicesLookup");ee(this,"reverseDependencies",{});ee(this,"_effects",new Set);this._slices=e,this._opts=n,this.slicesLookup=Object.fromEntries(e.map(r=>[r.sliceId,r])),this.reverseDependencies=Object.fromEntries(Object.entries(d$(e)).map(([r,o])=>[r,new Set([...o].map(i=>this.slicesLookup[i]))]))}destroy(){for(const e of this._effects)e.destroy()}getAllSlicesChanged(e){var r;if(e===void 0)return;const n=new Set([...e]);for(const o of e)(r=this.reverseDependencies[o.sliceId])==null||r.forEach(i=>{n.add(i)});return n}registerEffect(e){if(this._effects.has(e))throw new Error(`Effect already registered ${e.name}`);this._effects.add(e),queueMicrotask(()=>{e.run()})}run(e){const n=this.getAllSlicesChanged(e);for(const r of this._effects)r.run(n)}unregisterEffect(e){e.destroy(),this._effects.delete(e)}}function TU(t){return{type:"OPERATION",operationId:t.name,dispatcher:t.metadata.getMetadata(p$),store:t.metadata.getMetadata(h$)}}function AU(t){let e={type:"TRANSACTION",sourceSlices:t.steps.length===1?t.steps[0].sourceSliceId:t.steps.map(n=>n.sourceSliceId),targetSlices:t.steps.length===1?t.steps[0].targetSliceId:t.steps.map(n=>n.targetSliceId),actionId:t.steps.length===1?t.steps[0].actionId:t.steps.map(n=>n.actionId),dispatcher:t.metadata.getMetadata(p$),store:t.metadata.getMetadata(h$),txId:t.txId,params:t.steps.length===1?t.steps[0].params:t.steps.map(n=>n.params)};return Object.fromEntries(Object.entries(e).filter(n=>n[1]!==void 0))}class NU{constructor(){ee(this,"_storeStateKey","StoreStateKey")}}function RU(t){const e=Object.fromEntries(t.slices.map(r=>[r.sliceId,r])),n=new NU;return{...t,slicesLookup:e,storeStateKey:n,reverseSliceDependencies:d$(t.slices)}}class p1{constructor(e,n){this.slice=e,this.sliceState=n}applyStep(e,n){const r=PD._applyStep(e,n);return this.sliceState===r?e:e._updateSliceStateManager(new p1(this.slice,r))}}class h1{constructor(e,n){ee(this,"resolveCache",{});this.sliceStateMap=e,this.config=n}static create(e){fU(e.slices);const n=Object.fromEntries(e.slices.map(o=>[o.sliceId,new p1(o,o.initialState)])),r=RU(e);if(e.stateOverride)for(const[o,i]of Object.entries(e.stateOverride)){const s=o;if(!n[s])throw new Error(`StoreState.create: slice with id "${s}" does not exist`);n[s]=new p1(r.slicesLookup[s],i)}return new h1(n,r)}applyTransaction(e){if(e.isDestroyed)throw new Error("StoreState.applyTransaction: cannot apply a destroyed transaction");return e.steps.reduce((n,r)=>n.getSliceStateManager(r.targetSliceId).applyStep(n,r),this)}getSliceState(e){return this.getSliceStateManager(e).sliceState}getSliceStateManager(e){const n=this.sliceStateMap[e];if(!n)throw new Error(`StoreState.resolveSliceState: slice with id "${e}" does not exist`);return n}resolve(e,{skipDerivedData:n}={}){const r=this.getSliceStateManager(e);if(!r.slice.opts.calcDerivedState||n)return r.sliceState;const o=this.resolveCache[e];if(o!==void 0)return o;const i=r.slice.opts.calcDerivedState(this),s={...r.sliceState,...i};return this.resolveCache[e]=s,s}_getChangedSlices(e){const n=[];return Object.values(this.sliceStateMap).forEach(r=>{var a;const o=r.slice,i=r.sliceState,s=(a=e.sliceStateMap[o.sliceId])==null?void 0:a.sliceState;i!==s&&n.push(r.slice)}),n}get _storeStateKey(){return this.config.storeStateKey}_updateSliceStateManager(e){return new h1({...this.sliceStateMap,[e.slice.sliceId]:e},this.config)}}const PU=(t,e,n)=>{const r=t.state.applyTransaction(n);e(r)},OU=(t,e)=>{e.run(t)};function MD(t){return e0.create(t)}class e0{constructor(e,n){ee(this,"updateState",e=>{const n=this._state;this._state=e,this.opts.manualEffectsTrigger||this._effectsManager.run(this._state._getChangedSlices(n))});ee(this,"dispatch",(e,n)=>{var r,o,i,s;if(!this._destroyed)if(e.metadata.setMetadata(h$,this.opts.storeName),n!=null&&n.debugInfo&&e.metadata.setMetadata(p$,n.debugInfo),e instanceof RD)(o=(r=this.opts).debug)==null||o.call(r,AU(e)),this._dispatchTxn(this,this.updateState,e);else{const a=e;(s=(i=this.opts).debug)==null||s.call(i,TU(e)),this._dispatchOperation(this,a)}});ee(this,"_abortController",new AbortController);ee(this,"_destroyed",!1);ee(this,"_dispatchOperation");ee(this,"_dispatchTxn");ee(this,"_effectsManager");ee(this,"_state");this.opts=e,this.config=n,this._state=h1.create(e),this._dispatchTxn=e.dispatchTransaction||PU,this._dispatchOperation=e.dispatchOperation||OU,this._effectsManager=new CU(this.opts.slices,{debug:this.opts.debug})}static create(e){const r={slicesLookup:Object.fromEntries(e.slices.map(o=>[o.sliceId,o])),reverseSliceDependencies:d$(e.slices)};return new e0(e,r)}get destroyed(){return this._destroyed}get destroySignal(){return this._abortController.signal}get name(){return this.opts.storeName}get state(){return this._state}destroy(){this._destroyed=!0,this._effectsManager.destroy(),this._abortController.abort()}effect(e,n={}){const r=Ko(e,n)(this);return this._effectsManager.registerEffect(r),r}operation(e,n){return pl(n)(e)}registerEffect(e){const n=e(this);return this._effectsManager.registerEffect(n),n}unregisterEffect(e){this._effectsManager.unregisterEffect(e)}runEffects(){this._effectsManager.run()}}function v$(t){const e=new WeakMap;return n=>{const r=n instanceof e0?n:n._rootStore;if(!r)throw new Error("Trying to access ref in a destroyed store "+n.name);let o=e.get(r);return o||(o={current:t()},e.set(r,o)),o}}var Nt;(function(t){t.assertEqual=o=>o;function e(o){}t.assertIs=e;function n(o){throw new Error}t.assertNever=n,t.arrayToEnum=o=>{const i={};for(const s of o)i[s]=s;return i},t.getValidEnumValues=o=>{const i=t.objectKeys(o).filter(a=>typeof o[o[a]]!="number"),s={};for(const a of i)s[a]=o[a];return t.objectValues(s)},t.objectValues=o=>t.objectKeys(o).map(function(i){return o[i]}),t.objectKeys=typeof Object.keys=="function"?o=>Object.keys(o):o=>{const i=[];for(const s in o)Object.prototype.hasOwnProperty.call(o,s)&&i.push(s);return i},t.find=(o,i)=>{for(const s of o)if(i(s))return s},t.isInteger=typeof Number.isInteger=="function"?o=>Number.isInteger(o):o=>typeof o=="number"&&isFinite(o)&&Math.floor(o)===o;function r(o,i=" | "){return o.map(s=>typeof s=="string"?`'${s}'`:s).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(o,i)=>typeof i=="bigint"?i.toString():i})(Nt||(Nt={}));var W_;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(W_||(W_={}));const Te=Nt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),wa=t=>{switch(typeof t){case"undefined":return Te.undefined;case"string":return Te.string;case"number":return isNaN(t)?Te.nan:Te.number;case"boolean":return Te.boolean;case"function":return Te.function;case"bigint":return Te.bigint;case"symbol":return Te.symbol;case"object":return Array.isArray(t)?Te.array:t===null?Te.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Te.promise:typeof Map!="undefined"&&t instanceof Map?Te.map:typeof Set!="undefined"&&t instanceof Set?Te.set:typeof Date!="undefined"&&t instanceof Date?Te.date:Te.object;default:return Te.unknown}},ve=Nt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),IU=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class li extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(i){return i.message},r={_errors:[]},o=i=>{for(const s of i.issues)if(s.code==="invalid_union")s.unionErrors.map(o);else if(s.code==="invalid_return_type")o(s.returnTypeError);else if(s.code==="invalid_arguments")o(s.argumentsError);else if(s.path.length===0)r._errors.push(n(s));else{let a=r,l=0;for(;l<s.path.length;){const c=s.path[l];l===s.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(n(s))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return o(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,Nt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const o of this.issues)o.path.length>0?(n[o.path[0]]=n[o.path[0]]||[],n[o.path[0]].push(e(o))):r.push(e(o));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}li.create=t=>new li(t);const Np=(t,e)=>{let n;switch(t.code){case ve.invalid_type:t.received===Te.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case ve.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Nt.jsonStringifyReplacer)}`;break;case ve.unrecognized_keys:n=`Unrecognized key(s) in object: ${Nt.joinValues(t.keys,", ")}`;break;case ve.invalid_union:n="Invalid input";break;case ve.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Nt.joinValues(t.options)}`;break;case ve.invalid_enum_value:n=`Invalid enum value. Expected ${Nt.joinValues(t.options)}, received '${t.received}'`;break;case ve.invalid_arguments:n="Invalid function arguments";break;case ve.invalid_return_type:n="Invalid function return type";break;case ve.invalid_date:n="Invalid date";break;case ve.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Nt.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case ve.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case ve.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case ve.custom:n="Invalid input";break;case ve.invalid_intersection_types:n="Intersection results could not be merged";break;case ve.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case ve.not_finite:n="Number must be finite";break;default:n=e.defaultError,Nt.assertNever(t)}return{message:n}};let LD=Np;function DU(t){LD=t}function m1(){return LD}const g1=t=>{const{data:e,path:n,errorMaps:r,issueData:o}=t,i=[...n,...o.path||[]],s={...o,path:i};let a="";const l=r.filter(c=>!!c).slice().reverse();for(const c of l)a=c(s,{data:e,defaultError:a}).message;return{...o,path:i,message:o.message||a}},MU=[];function Re(t,e){const n=g1({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,m1(),Np].filter(r=>!!r)});t.common.issues.push(n)}class yr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const o of n){if(o.status==="aborted")return et;o.status==="dirty"&&e.dirty(),r.push(o.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const o of n)r.push({key:await o.key,value:await o.value});return yr.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const o of n){const{key:i,value:s}=o;if(i.status==="aborted"||s.status==="aborted")return et;i.status==="dirty"&&e.dirty(),s.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof s.value!="undefined"||o.alwaysSet)&&(r[i.value]=s.value)}return{status:e.value,value:r}}}const et=Object.freeze({status:"aborted"}),FD=t=>({status:"dirty",value:t}),Rr=t=>({status:"valid",value:t}),U_=t=>t.status==="aborted",V_=t=>t.status==="dirty",Rp=t=>t.status==="valid",y1=t=>typeof Promise!="undefined"&&t instanceof Promise;var ze;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ze||(ze={}));class Qi{constructor(e,n,r,o){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=o}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const VT=(t,e)=>{if(Rp(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new li(t.common.issues);return this._error=n,this._error}}};function it(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:o}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:o}:{errorMap:(s,a)=>s.code!=="invalid_type"?{message:a.defaultError}:typeof a.data=="undefined"?{message:r!=null?r:a.defaultError}:{message:n!=null?n:a.defaultError},description:o}}class ut{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return wa(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:wa(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new yr,ctx:{common:e.parent.common,data:e.data,parsedType:wa(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(y1(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const o={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:wa(e)},i=this._parseSync({data:e,path:o.path,parent:o});return VT(o,i)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:wa(e)},o=this._parse({data:e,path:r.path,parent:r}),i=await(y1(o)?o:Promise.resolve(o));return VT(r,i)}refine(e,n){const r=o=>typeof n=="string"||typeof n=="undefined"?{message:n}:typeof n=="function"?n(o):n;return this._refinement((o,i)=>{const s=e(o),a=()=>i.addIssue({code:ve.custom,...r(o)});return typeof Promise!="undefined"&&s instanceof Promise?s.then(l=>l?!0:(a(),!1)):s?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,o)=>e(r)?!0:(o.addIssue(typeof n=="function"?n(r,o):n),!1))}_refinement(e){return new di({schema:this,typeName:He.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Os.create(this,this._def)}nullable(){return hc.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ci.create(this,this._def)}promise(){return Yu.create(this,this._def)}or(e){return Dp.create([this,e],this._def)}and(e){return Mp.create(this,e,this._def)}transform(e){return new di({...it(this._def),schema:this,typeName:He.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new zp({...it(this._def),innerType:this,defaultValue:n,typeName:He.ZodDefault})}brand(){return new jD({typeName:He.ZodBranded,type:this,...it(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new _1({...it(this._def),innerType:this,catchValue:n,typeName:He.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Fh.create(this,e)}readonly(){return k1.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const LU=/^c[^\s-]{8,}$/i,FU=/^[a-z][a-z0-9]*$/,BU=/^[0-9A-HJKMNP-TV-Z]{26}$/,jU=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,zU=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,qU="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Cv;const WU=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,UU=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,VU=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function HU(t,e){return!!((e==="v4"||!e)&&WU.test(t)||(e==="v6"||!e)&&UU.test(t))}class oi extends ut{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Te.string){const i=this._getOrReturnCtx(e);return Re(i,{code:ve.invalid_type,expected:Te.string,received:i.parsedType}),et}const r=new yr;let o;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(o=this._getOrReturnCtx(e,o),Re(o,{code:ve.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(o=this._getOrReturnCtx(e,o),Re(o,{code:ve.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const s=e.data.length>i.value,a=e.data.length<i.value;(s||a)&&(o=this._getOrReturnCtx(e,o),s?Re(o,{code:ve.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&Re(o,{code:ve.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")zU.test(e.data)||(o=this._getOrReturnCtx(e,o),Re(o,{validation:"email",code:ve.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")Cv||(Cv=new RegExp(qU,"u")),Cv.test(e.data)||(o=this._getOrReturnCtx(e,o),Re(o,{validation:"emoji",code:ve.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")jU.test(e.data)||(o=this._getOrReturnCtx(e,o),Re(o,{validation:"uuid",code:ve.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")LU.test(e.data)||(o=this._getOrReturnCtx(e,o),Re(o,{validation:"cuid",code:ve.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")FU.test(e.data)||(o=this._getOrReturnCtx(e,o),Re(o,{validation:"cuid2",code:ve.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")BU.test(e.data)||(o=this._getOrReturnCtx(e,o),Re(o,{validation:"ulid",code:ve.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch(s){o=this._getOrReturnCtx(e,o),Re(o,{validation:"url",code:ve.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(o=this._getOrReturnCtx(e,o),Re(o,{validation:"regex",code:ve.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(o=this._getOrReturnCtx(e,o),Re(o,{code:ve.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(o=this._getOrReturnCtx(e,o),Re(o,{code:ve.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(o=this._getOrReturnCtx(e,o),Re(o,{code:ve.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?VU(i).test(e.data)||(o=this._getOrReturnCtx(e,o),Re(o,{code:ve.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?HU(e.data,i.version)||(o=this._getOrReturnCtx(e,o),Re(o,{validation:"ip",code:ve.invalid_string,message:i.message}),r.dirty()):Nt.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(o=>e.test(o),{validation:n,code:ve.invalid_string,...ze.errToObj(r)})}_addCheck(e){return new oi({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ze.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ze.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ze.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ze.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ze.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ze.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ze.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ze.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)=="undefined"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...ze.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...ze.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...ze.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...ze.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...ze.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...ze.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...ze.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...ze.errToObj(n)})}nonempty(e){return this.min(1,ze.errToObj(e))}trim(){return new oi({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new oi({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new oi({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}oi.create=t=>{var e;return new oi({checks:[],typeName:He.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...it(t)})};function KU(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,o=n>r?n:r,i=parseInt(t.toFixed(o).replace(".","")),s=parseInt(e.toFixed(o).replace(".",""));return i%s/Math.pow(10,o)}class Ya extends ut{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Te.number){const i=this._getOrReturnCtx(e);return Re(i,{code:ve.invalid_type,expected:Te.number,received:i.parsedType}),et}let r;const o=new yr;for(const i of this._def.checks)i.kind==="int"?Nt.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Re(r,{code:ve.invalid_type,expected:"integer",received:"float",message:i.message}),o.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Re(r,{code:ve.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),o.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Re(r,{code:ve.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),o.dirty()):i.kind==="multipleOf"?KU(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),Re(r,{code:ve.not_multiple_of,multipleOf:i.value,message:i.message}),o.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Re(r,{code:ve.not_finite,message:i.message}),o.dirty()):Nt.assertNever(i);return{status:o.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,ze.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ze.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ze.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ze.toString(n))}setLimit(e,n,r,o){return new Ya({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:ze.toString(o)}]})}_addCheck(e){return new Ya({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ze.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ze.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ze.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ze.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ze.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ze.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:ze.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ze.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ze.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Nt.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Ya.create=t=>new Ya({checks:[],typeName:He.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...it(t)});class Ja extends ut{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==Te.bigint){const i=this._getOrReturnCtx(e);return Re(i,{code:ve.invalid_type,expected:Te.bigint,received:i.parsedType}),et}let r;const o=new yr;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Re(r,{code:ve.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),o.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Re(r,{code:ve.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),o.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Re(r,{code:ve.not_multiple_of,multipleOf:i.value,message:i.message}),o.dirty()):Nt.assertNever(i);return{status:o.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,ze.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ze.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ze.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ze.toString(n))}setLimit(e,n,r,o){return new Ja({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:ze.toString(o)}]})}_addCheck(e){return new Ja({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ze.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ze.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ze.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ze.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ze.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Ja.create=t=>{var e;return new Ja({checks:[],typeName:He.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...it(t)})};class Pp extends ut{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Te.boolean){const r=this._getOrReturnCtx(e);return Re(r,{code:ve.invalid_type,expected:Te.boolean,received:r.parsedType}),et}return Rr(e.data)}}Pp.create=t=>new Pp({typeName:He.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...it(t)});class fc extends ut{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Te.date){const i=this._getOrReturnCtx(e);return Re(i,{code:ve.invalid_type,expected:Te.date,received:i.parsedType}),et}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return Re(i,{code:ve.invalid_date}),et}const r=new yr;let o;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(o=this._getOrReturnCtx(e,o),Re(o,{code:ve.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(o=this._getOrReturnCtx(e,o),Re(o,{code:ve.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):Nt.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new fc({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:ze.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:ze.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}fc.create=t=>new fc({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:He.ZodDate,...it(t)});class b1 extends ut{_parse(e){if(this._getType(e)!==Te.symbol){const r=this._getOrReturnCtx(e);return Re(r,{code:ve.invalid_type,expected:Te.symbol,received:r.parsedType}),et}return Rr(e.data)}}b1.create=t=>new b1({typeName:He.ZodSymbol,...it(t)});class Op extends ut{_parse(e){if(this._getType(e)!==Te.undefined){const r=this._getOrReturnCtx(e);return Re(r,{code:ve.invalid_type,expected:Te.undefined,received:r.parsedType}),et}return Rr(e.data)}}Op.create=t=>new Op({typeName:He.ZodUndefined,...it(t)});class Ip extends ut{_parse(e){if(this._getType(e)!==Te.null){const r=this._getOrReturnCtx(e);return Re(r,{code:ve.invalid_type,expected:Te.null,received:r.parsedType}),et}return Rr(e.data)}}Ip.create=t=>new Ip({typeName:He.ZodNull,...it(t)});class Zu extends ut{constructor(){super(...arguments),this._any=!0}_parse(e){return Rr(e.data)}}Zu.create=t=>new Zu({typeName:He.ZodAny,...it(t)});class ec extends ut{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Rr(e.data)}}ec.create=t=>new ec({typeName:He.ZodUnknown,...it(t)});class Ms extends ut{_parse(e){const n=this._getOrReturnCtx(e);return Re(n,{code:ve.invalid_type,expected:Te.never,received:n.parsedType}),et}}Ms.create=t=>new Ms({typeName:He.ZodNever,...it(t)});class v1 extends ut{_parse(e){if(this._getType(e)!==Te.undefined){const r=this._getOrReturnCtx(e);return Re(r,{code:ve.invalid_type,expected:Te.void,received:r.parsedType}),et}return Rr(e.data)}}v1.create=t=>new v1({typeName:He.ZodVoid,...it(t)});class ci extends ut{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),o=this._def;if(n.parsedType!==Te.array)return Re(n,{code:ve.invalid_type,expected:Te.array,received:n.parsedType}),et;if(o.exactLength!==null){const s=n.data.length>o.exactLength.value,a=n.data.length<o.exactLength.value;(s||a)&&(Re(n,{code:s?ve.too_big:ve.too_small,minimum:a?o.exactLength.value:void 0,maximum:s?o.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:o.exactLength.message}),r.dirty())}if(o.minLength!==null&&n.data.length<o.minLength.value&&(Re(n,{code:ve.too_small,minimum:o.minLength.value,type:"array",inclusive:!0,exact:!1,message:o.minLength.message}),r.dirty()),o.maxLength!==null&&n.data.length>o.maxLength.value&&(Re(n,{code:ve.too_big,maximum:o.maxLength.value,type:"array",inclusive:!0,exact:!1,message:o.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((s,a)=>o.type._parseAsync(new Qi(n,s,n.path,a)))).then(s=>yr.mergeArray(r,s));const i=[...n.data].map((s,a)=>o.type._parseSync(new Qi(n,s,n.path,a)));return yr.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new ci({...this._def,minLength:{value:e,message:ze.toString(n)}})}max(e,n){return new ci({...this._def,maxLength:{value:e,message:ze.toString(n)}})}length(e,n){return new ci({...this._def,exactLength:{value:e,message:ze.toString(n)}})}nonempty(e){return this.min(1,e)}}ci.create=(t,e)=>new ci({type:t,minLength:null,maxLength:null,exactLength:null,typeName:He.ZodArray,...it(e)});function ru(t){if(t instanceof an){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Os.create(ru(r))}return new an({...t._def,shape:()=>e})}else return t instanceof ci?new ci({...t._def,type:ru(t.element)}):t instanceof Os?Os.create(ru(t.unwrap())):t instanceof hc?hc.create(ru(t.unwrap())):t instanceof es?es.create(t.items.map(e=>ru(e))):t}class an extends ut{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Nt.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==Te.object){const c=this._getOrReturnCtx(e);return Re(c,{code:ve.invalid_type,expected:Te.object,received:c.parsedType}),et}const{status:r,ctx:o}=this._processInputParams(e),{shape:i,keys:s}=this._getCached(),a=[];if(!(this._def.catchall instanceof Ms&&this._def.unknownKeys==="strip"))for(const c in o.data)s.includes(c)||a.push(c);const l=[];for(const c of s){const u=i[c],d=o.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new Qi(o,d,o.path,c)),alwaysSet:c in o.data})}if(this._def.catchall instanceof Ms){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of a)l.push({key:{status:"valid",value:u},value:{status:"valid",value:o.data[u]}});else if(c==="strict")a.length>0&&(Re(o,{code:ve.unrecognized_keys,keys:a}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of a){const d=o.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new Qi(o,d,o.path,u)),alwaysSet:u in o.data})}}return o.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const d=await u.key;c.push({key:d,value:await u.value,alwaysSet:u.alwaysSet})}return c}).then(c=>yr.mergeObjectSync(r,c)):yr.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return ze.errToObj,new an({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var o,i,s,a;const l=(s=(i=(o=this._def).errorMap)===null||i===void 0?void 0:i.call(o,n,r).message)!==null&&s!==void 0?s:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=ze.errToObj(e).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new an({...this._def,unknownKeys:"strip"})}passthrough(){return new an({...this._def,unknownKeys:"passthrough"})}extend(e){return new an({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new an({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:He.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new an({...this._def,catchall:e})}pick(e){const n={};return Nt.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new an({...this._def,shape:()=>n})}omit(e){const n={};return Nt.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new an({...this._def,shape:()=>n})}deepPartial(){return ru(this)}partial(e){const n={};return Nt.objectKeys(this.shape).forEach(r=>{const o=this.shape[r];e&&!e[r]?n[r]=o:n[r]=o.optional()}),new an({...this._def,shape:()=>n})}required(e){const n={};return Nt.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Os;)i=i._def.innerType;n[r]=i}}),new an({...this._def,shape:()=>n})}keyof(){return BD(Nt.objectKeys(this.shape))}}an.create=(t,e)=>new an({shape:()=>t,unknownKeys:"strip",catchall:Ms.create(),typeName:He.ZodObject,...it(e)});an.strictCreate=(t,e)=>new an({shape:()=>t,unknownKeys:"strict",catchall:Ms.create(),typeName:He.ZodObject,...it(e)});an.lazycreate=(t,e)=>new an({shape:t,unknownKeys:"strip",catchall:Ms.create(),typeName:He.ZodObject,...it(e)});class Dp extends ut{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function o(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const s=i.map(a=>new li(a.ctx.common.issues));return Re(n,{code:ve.invalid_union,unionErrors:s}),et}if(n.common.async)return Promise.all(r.map(async i=>{const s={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:s}),ctx:s}})).then(o);{let i;const s=[];for(const l of r){const c={...n,common:{...n.common,issues:[]},parent:null},u=l._parseSync({data:n.data,path:n.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:c}),c.common.issues.length&&s.push(c.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=s.map(l=>new li(l));return Re(n,{code:ve.invalid_union,unionErrors:a}),et}}get options(){return this._def.options}}Dp.create=(t,e)=>new Dp({options:t,typeName:He.ZodUnion,...it(e)});const Mg=t=>t instanceof Fp?Mg(t.schema):t instanceof di?Mg(t.innerType()):t instanceof Bp?[t.value]:t instanceof Xa?t.options:t instanceof jp?Object.keys(t.enum):t instanceof zp?Mg(t._def.innerType):t instanceof Op?[void 0]:t instanceof Ip?[null]:null;class t0 extends ut{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Te.object)return Re(n,{code:ve.invalid_type,expected:Te.object,received:n.parsedType}),et;const r=this.discriminator,o=n.data[r],i=this.optionsMap.get(o);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(Re(n,{code:ve.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),et)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const o=new Map;for(const i of n){const s=Mg(i.shape[e]);if(!s)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of s){if(o.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);o.set(a,i)}}return new t0({typeName:He.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:o,...it(r)})}}function H_(t,e){const n=wa(t),r=wa(e);if(t===e)return{valid:!0,data:t};if(n===Te.object&&r===Te.object){const o=Nt.objectKeys(e),i=Nt.objectKeys(t).filter(a=>o.indexOf(a)!==-1),s={...t,...e};for(const a of i){const l=H_(t[a],e[a]);if(!l.valid)return{valid:!1};s[a]=l.data}return{valid:!0,data:s}}else if(n===Te.array&&r===Te.array){if(t.length!==e.length)return{valid:!1};const o=[];for(let i=0;i<t.length;i++){const s=t[i],a=e[i],l=H_(s,a);if(!l.valid)return{valid:!1};o.push(l.data)}return{valid:!0,data:o}}else return n===Te.date&&r===Te.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Mp extends ut{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),o=(i,s)=>{if(U_(i)||U_(s))return et;const a=H_(i.value,s.value);return a.valid?((V_(i)||V_(s))&&n.dirty(),{status:n.value,value:a.data}):(Re(r,{code:ve.invalid_intersection_types}),et)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,s])=>o(i,s)):o(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Mp.create=(t,e,n)=>new Mp({left:t,right:e,typeName:He.ZodIntersection,...it(n)});class es extends ut{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Te.array)return Re(r,{code:ve.invalid_type,expected:Te.array,received:r.parsedType}),et;if(r.data.length<this._def.items.length)return Re(r,{code:ve.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),et;!this._def.rest&&r.data.length>this._def.items.length&&(Re(r,{code:ve.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((s,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new Qi(r,s,r.path,a)):null}).filter(s=>!!s);return r.common.async?Promise.all(i).then(s=>yr.mergeArray(n,s)):yr.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new es({...this._def,rest:e})}}es.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new es({items:t,typeName:He.ZodTuple,rest:null,...it(e)})};class Lp extends ut{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Te.object)return Re(r,{code:ve.invalid_type,expected:Te.object,received:r.parsedType}),et;const o=[],i=this._def.keyType,s=this._def.valueType;for(const a in r.data)o.push({key:i._parse(new Qi(r,a,r.path,a)),value:s._parse(new Qi(r,r.data[a],r.path,a))});return r.common.async?yr.mergeObjectAsync(n,o):yr.mergeObjectSync(n,o)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof ut?new Lp({keyType:e,valueType:n,typeName:He.ZodRecord,...it(r)}):new Lp({keyType:oi.create(),valueType:e,typeName:He.ZodRecord,...it(n)})}}class w1 extends ut{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Te.map)return Re(r,{code:ve.invalid_type,expected:Te.map,received:r.parsedType}),et;const o=this._def.keyType,i=this._def.valueType,s=[...r.data.entries()].map(([a,l],c)=>({key:o._parse(new Qi(r,a,r.path,[c,"key"])),value:i._parse(new Qi(r,l,r.path,[c,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of s){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return et;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of s){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return et;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}}}}w1.create=(t,e,n)=>new w1({valueType:e,keyType:t,typeName:He.ZodMap,...it(n)});class pc extends ut{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Te.set)return Re(r,{code:ve.invalid_type,expected:Te.set,received:r.parsedType}),et;const o=this._def;o.minSize!==null&&r.data.size<o.minSize.value&&(Re(r,{code:ve.too_small,minimum:o.minSize.value,type:"set",inclusive:!0,exact:!1,message:o.minSize.message}),n.dirty()),o.maxSize!==null&&r.data.size>o.maxSize.value&&(Re(r,{code:ve.too_big,maximum:o.maxSize.value,type:"set",inclusive:!0,exact:!1,message:o.maxSize.message}),n.dirty());const i=this._def.valueType;function s(l){const c=new Set;for(const u of l){if(u.status==="aborted")return et;u.status==="dirty"&&n.dirty(),c.add(u.value)}return{status:n.value,value:c}}const a=[...r.data.values()].map((l,c)=>i._parse(new Qi(r,l,r.path,c)));return r.common.async?Promise.all(a).then(l=>s(l)):s(a)}min(e,n){return new pc({...this._def,minSize:{value:e,message:ze.toString(n)}})}max(e,n){return new pc({...this._def,maxSize:{value:e,message:ze.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}pc.create=(t,e)=>new pc({valueType:t,minSize:null,maxSize:null,typeName:He.ZodSet,...it(e)});class $u extends ut{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Te.function)return Re(n,{code:ve.invalid_type,expected:Te.function,received:n.parsedType}),et;function r(a,l){return g1({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,m1(),Np].filter(c=>!!c),issueData:{code:ve.invalid_arguments,argumentsError:l}})}function o(a,l){return g1({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,m1(),Np].filter(c=>!!c),issueData:{code:ve.invalid_return_type,returnTypeError:l}})}const i={errorMap:n.common.contextualErrorMap},s=n.data;if(this._def.returns instanceof Yu){const a=this;return Rr(async function(...l){const c=new li([]),u=await a._def.args.parseAsync(l,i).catch(p=>{throw c.addIssue(r(l,p)),c}),d=await Reflect.apply(s,this,u);return await a._def.returns._def.type.parseAsync(d,i).catch(p=>{throw c.addIssue(o(d,p)),c})})}else{const a=this;return Rr(function(...l){const c=a._def.args.safeParse(l,i);if(!c.success)throw new li([r(l,c.error)]);const u=Reflect.apply(s,this,c.data),d=a._def.returns.safeParse(u,i);if(!d.success)throw new li([o(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new $u({...this._def,args:es.create(e).rest(ec.create())})}returns(e){return new $u({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new $u({args:e||es.create([]).rest(ec.create()),returns:n||ec.create(),typeName:He.ZodFunction,...it(r)})}}class Fp extends ut{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Fp.create=(t,e)=>new Fp({getter:t,typeName:He.ZodLazy,...it(e)});class Bp extends ut{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Re(n,{received:n.data,code:ve.invalid_literal,expected:this._def.value}),et}return{status:"valid",value:e.data}}get value(){return this._def.value}}Bp.create=(t,e)=>new Bp({value:t,typeName:He.ZodLiteral,...it(e)});function BD(t,e){return new Xa({values:t,typeName:He.ZodEnum,...it(e)})}class Xa extends ut{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Re(n,{expected:Nt.joinValues(r),received:n.parsedType,code:ve.invalid_type}),et}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return Re(n,{received:n.data,code:ve.invalid_enum_value,options:r}),et}return Rr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return Xa.create(e)}exclude(e){return Xa.create(this.options.filter(n=>!e.includes(n)))}}Xa.create=BD;class jp extends ut{_parse(e){const n=Nt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Te.string&&r.parsedType!==Te.number){const o=Nt.objectValues(n);return Re(r,{expected:Nt.joinValues(o),received:r.parsedType,code:ve.invalid_type}),et}if(n.indexOf(e.data)===-1){const o=Nt.objectValues(n);return Re(r,{received:r.data,code:ve.invalid_enum_value,options:o}),et}return Rr(e.data)}get enum(){return this._def.values}}jp.create=(t,e)=>new jp({values:t,typeName:He.ZodNativeEnum,...it(e)});class Yu extends ut{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Te.promise&&n.common.async===!1)return Re(n,{code:ve.invalid_type,expected:Te.promise,received:n.parsedType}),et;const r=n.parsedType===Te.promise?n.data:Promise.resolve(n.data);return Rr(r.then(o=>this._def.type.parseAsync(o,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Yu.create=(t,e)=>new Yu({type:t,typeName:He.ZodPromise,...it(e)});class di extends ut{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===He.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),o=this._def.effect||null,i={addIssue:s=>{Re(r,s),s.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),o.type==="preprocess"){const s=o.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(s).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:s,path:r.path,parent:r})}if(o.type==="refinement"){const s=a=>{const l=o.refinement(a,i);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?et:(a.status==="dirty"&&n.dirty(),s(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?et:(a.status==="dirty"&&n.dirty(),s(a.value).then(()=>({status:n.value,value:a.value}))))}if(o.type==="transform")if(r.common.async===!1){const s=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Rp(s))return s;const a=o.transform(s.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(s=>Rp(s)?Promise.resolve(o.transform(s.value,i)).then(a=>({status:n.value,value:a})):s);Nt.assertNever(o)}}di.create=(t,e,n)=>new di({schema:t,typeName:He.ZodEffects,effect:e,...it(n)});di.createWithPreprocess=(t,e,n)=>new di({schema:e,effect:{type:"preprocess",transform:t},typeName:He.ZodEffects,...it(n)});class Os extends ut{_parse(e){return this._getType(e)===Te.undefined?Rr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Os.create=(t,e)=>new Os({innerType:t,typeName:He.ZodOptional,...it(e)});class hc extends ut{_parse(e){return this._getType(e)===Te.null?Rr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}hc.create=(t,e)=>new hc({innerType:t,typeName:He.ZodNullable,...it(e)});class zp extends ut{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Te.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}zp.create=(t,e)=>new zp({innerType:t,typeName:He.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...it(e)});class _1 extends ut{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},o=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return y1(o)?o.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new li(r.common.issues)},input:r.data})})):{status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new li(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}_1.create=(t,e)=>new _1({innerType:t,typeName:He.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...it(e)});class x1 extends ut{_parse(e){if(this._getType(e)!==Te.nan){const r=this._getOrReturnCtx(e);return Re(r,{code:ve.invalid_type,expected:Te.nan,received:r.parsedType}),et}return{status:"valid",value:e.data}}}x1.create=t=>new x1({typeName:He.ZodNaN,...it(t)});const GU=Symbol("zod_brand");class jD extends ut{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Fh extends ut{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?et:i.status==="dirty"?(n.dirty(),FD(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const o=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?et:o.status==="dirty"?(n.dirty(),{status:"dirty",value:o.value}):this._def.out._parseSync({data:o.value,path:r.path,parent:r})}}static create(e,n){return new Fh({in:e,out:n,typeName:He.ZodPipeline})}}class k1 extends ut{_parse(e){const n=this._def.innerType._parse(e);return Rp(n)&&(n.value=Object.freeze(n.value)),n}}k1.create=(t,e)=>new k1({innerType:t,typeName:He.ZodReadonly,...it(e)});const zD=(t,e={},n)=>t?Zu.create().superRefine((r,o)=>{var i,s;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,l=(s=(i=a.fatal)!==null&&i!==void 0?i:n)!==null&&s!==void 0?s:!0,c=typeof a=="string"?{message:a}:a;o.addIssue({code:"custom",...c,fatal:l})}}):Zu.create(),ZU={object:an.lazycreate};var He;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(He||(He={}));const YU=(t,e={message:`Input not instance of ${t.name}`})=>zD(n=>n instanceof t,e),qD=oi.create,WD=Ya.create,JU=x1.create,XU=Ja.create,UD=Pp.create,QU=fc.create,eV=b1.create,tV=Op.create,nV=Ip.create,rV=Zu.create,oV=ec.create,iV=Ms.create,sV=v1.create,aV=ci.create,lV=an.create,cV=an.strictCreate,uV=Dp.create,dV=t0.create,fV=Mp.create,pV=es.create,hV=Lp.create,mV=w1.create,gV=pc.create,yV=$u.create,bV=Fp.create,vV=Bp.create,wV=Xa.create,_V=jp.create,xV=Yu.create,HT=di.create,kV=Os.create,$V=hc.create,SV=di.createWithPreprocess,EV=Fh.create,CV=()=>qD().optional(),TV=()=>WD().optional(),AV=()=>UD().optional(),NV={string:t=>oi.create({...t,coerce:!0}),number:t=>Ya.create({...t,coerce:!0}),boolean:t=>Pp.create({...t,coerce:!0}),bigint:t=>Ja.create({...t,coerce:!0}),date:t=>fc.create({...t,coerce:!0})},RV=et;var De=Object.freeze({__proto__:null,defaultErrorMap:Np,setErrorMap:DU,getErrorMap:m1,makeIssue:g1,EMPTY_PATH:MU,addIssueToContext:Re,ParseStatus:yr,INVALID:et,DIRTY:FD,OK:Rr,isAborted:U_,isDirty:V_,isValid:Rp,isAsync:y1,get util(){return Nt},get objectUtil(){return W_},ZodParsedType:Te,getParsedType:wa,ZodType:ut,ZodString:oi,ZodNumber:Ya,ZodBigInt:Ja,ZodBoolean:Pp,ZodDate:fc,ZodSymbol:b1,ZodUndefined:Op,ZodNull:Ip,ZodAny:Zu,ZodUnknown:ec,ZodNever:Ms,ZodVoid:v1,ZodArray:ci,ZodObject:an,ZodUnion:Dp,ZodDiscriminatedUnion:t0,ZodIntersection:Mp,ZodTuple:es,ZodRecord:Lp,ZodMap:w1,ZodSet:pc,ZodFunction:$u,ZodLazy:Fp,ZodLiteral:Bp,ZodEnum:Xa,ZodNativeEnum:jp,ZodPromise:Yu,ZodEffects:di,ZodTransformer:di,ZodOptional:Os,ZodNullable:hc,ZodDefault:zp,ZodCatch:_1,ZodNaN:x1,BRAND:GU,ZodBranded:jD,ZodPipeline:Fh,ZodReadonly:k1,custom:zD,Schema:ut,ZodSchema:ut,late:ZU,get ZodFirstPartyTypeKind(){return He},coerce:NV,any:rV,array:aV,bigint:XU,boolean:UD,date:QU,discriminatedUnion:dV,effect:HT,enum:wV,function:yV,instanceof:YU,intersection:fV,lazy:bV,literal:vV,map:mV,nan:JU,nativeEnum:_V,never:iV,null:nV,nullable:$V,number:WD,object:lV,oboolean:AV,onumber:TV,optional:kV,ostring:CV,pipeline:EV,preprocess:SV,promise:xV,record:hV,set:gV,strictObject:cV,string:qD,symbol:eV,transformer:HT,tuple:pV,undefined:tV,union:uV,unknown:oV,void:sV,NEVER:RV,ZodIssueCode:ve,quotelessJson:IU,ZodError:li});const PV=MD({storeName:"nsm-store-main",slices:[]}),Bh=H.createContext(PV);function Vs(t){const e=k.useContext(Bh);return TD(e)(t)}function w$(t){return k.useContext(Bh).dispatch}function OV(t){const e=k.useContext(Bh);return[TD(e)(t),e.dispatch]}function IV(t){return k.useContext(Bh)}function DV(){return k.useContext(Bh)}const $1="dialog::@bangle.io/core-extension:new-note-modal",K_="dialog::@bangle.io/core-extension:rename-note-modal",G_="dialog::@bangle.io/core-extension:changelog-modal",KT="dialog::@bangle.io/core-extension:new-workspace-dialog",VD="dialog::@bangle.io/core-extension:NEW_NATIVE_FS_DIALOG_NAME",HD="dialog::@bangle.io/core-extension:NEW_PRIVATE_FS_WORKSPACE_DIALOG_NAME",KD="dialog::@bangle.io/core-extension:NEW_BROWSER_WORKSPACE_DIALOG_NAME",Z_="dialog::@bangle.io/core-extension:reload-application-dialog",GD="dialog::@bangle.io/core-extension:generic_error_modal_name",S1="operation::@bangle.io/core-extension:CREATE_NATIVE_FS_WORKSPACE",E1="operation::@bangle.io/core-extension:CREATE_BROWSER_WORKSPACE",C1="operation::@bangle.io/core-extension:CREATE_PRIVATE_FS_WORKSPACE",MV="operation::@bangle.io/core-extension:SERVICE_WORKER_RELOAD",LV="operation::@bangle.io/core-extension:SERVICE_WORKER_DISMISS_UPDATE",qp="operation::@bangle.io/core-extension:CORE_OPERATIONS_OPEN_GITHUB_ISSUE",Y_="operation::@bangle.io/core-extension:REMOVE_ACTIVE_WORKSPACE",J_="operation::@bangle.io/core-extension:NEW_NOTE",GT="operation::@bangle.io/core-extension:NEW_WORKSPACE",ZT="operation::@bangle.io/core-extension:TOGGLE_EDITOR_SPLIT",YT="operation::@bangle.io/core-extension:OPEN_IN_MINI_EDITOR",JT="operation::@bangle.io/core-extension:CLOSE_MINI_EDITOR",XT="operation::@bangle.io/core-extension:CLOSE_EDITOR",QT="operation::@bangle.io/core-palettes:TOGGLE_OPERATION_PALETTE",eA="operation::@bangle.io/core-palettes:TOGGLE_WORKSPACE_PALETTE",tA="operation::@bangle.io/core-palettes:TOGGLE_NOTES_PALETTE";var Hs=(t=>(t.Heading="bangle-io-core-palettes/heading",t.Workspace="bangle-io-core-palettes/workspace",t.Question="bangle-io-core-palettes/question",t.Operation="bangle-io-core-palettes/operation",t.Notes="bangle-io-core-palettes/notes",t))(Hs||{});const zi=4,Es=0,Xf=1,Tv=2,Lg=3;var Ju=(t=>(t.Page="PAGE",t.Floating="Floating",t))(Ju||{});const Dc="bangle-help",FV="getting started.md",ff=`${Dc}:${FV}`,nA=f1(De.object({wsPath:De.string(),pendingWrite:De.boolean(),sha:De.union([De.string(),De.undefined()]),currentDiskSha:De.union([De.string(),De.undefined()]),lastKnownDiskSha:De.union([De.string(),De.undefined()]),currentDiskShaTimestamp:De.union([De.number(),De.undefined()])}));f1(De.object({wsName:De.string().optional(),openedFilesSha:De.record(nA)})),f1(De.object({wsPath:De.string(),info:nA.partial()}));const Fg="operation::@bangle.io/search-notes:execute-search",Ht={CAUTION:"caution",CRITICAL:"critical",NEUTRAL:"neutral",SECONDARY:"secondary",POSITIVE:"positive",PROMOTE:"promote"},Be={INFO:"info",WARNING:"warning",ERROR:"error",SUCCESS:"success"},tc={LIGHT:"light",DARK:"dark"},BV=De.nativeEnum(tc),_$={EMPTY_WORKSPACE_NEEDED:"EMPTY_WORKSPACE_NEEDED",EMPTY_WORKSPACE:"EMPTY_WORKSPACE"};var cn=(t=>(t.Help="helpfs",t.NativeFS="nativefs",t.Browser="browser",t.PrivateFS="privatefs",t.Github="github-storage",t))(cn||{});const Av="storage-on-change-emitter";function Hn(t){this.content=t}Hn.prototype={constructor:Hn,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,o=r.find(t),i=r.content.slice();return o==-1?i.push(n||t,e):(i[o+1]=e,n&&(i[o]=n)),new Hn(i)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Hn(n)},addToStart:function(t,e){return new Hn([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Hn(n)},addBefore:function(t,e,n){var r=this.remove(e),o=r.content.slice(),i=r.find(t);return o.splice(i==-1?o.length:i,0,e,n),new Hn(o)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Hn.from(t),t.size?new Hn(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Hn.from(t),t.size?new Hn(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Hn.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Hn.from=function(t){if(t instanceof Hn)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Hn(e)};function ZD(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let o=t.child(r),i=e.child(r);if(o==i){n+=o.nodeSize;continue}if(!o.sameMarkup(i))return n;if(o.isText&&o.text!=i.text){for(let s=0;o.text[s]==i.text[s];s++)n++;return n}if(o.content.size||i.content.size){let s=ZD(o.content,i.content,n+1);if(s!=null)return s}n+=o.nodeSize}}function YD(t,e,n,r){for(let o=t.childCount,i=e.childCount;;){if(o==0||i==0)return o==i?null:{a:n,b:r};let s=t.child(--o),a=e.child(--i),l=s.nodeSize;if(s==a){n-=l,r-=l;continue}if(!s.sameMarkup(a))return{a:n,b:r};if(s.isText&&s.text!=a.text){let c=0,u=Math.min(s.text.length,a.text.length);for(;c<u&&s.text[s.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(s.content.size||a.content.size){let c=YD(s.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class te{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,o=0,i){for(let s=0,a=0;a<n;s++){let l=this.content[s],c=a+l.nodeSize;if(c>e&&r(l,o+a,i||null,s)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,n-u),r,o+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,o){let i="",s=!0;return this.nodesBetween(e,n,(a,l)=>{a.isText?(i+=a.text.slice(Math.max(e,l)-l,n-l),s=!r):a.isLeaf?(o?i+=typeof o=="function"?o(a):o:a.type.spec.leafText&&(i+=a.type.spec.leafText(a)),s=!r):!s&&a.isBlock&&(i+=r,s=!0)},0),i}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,o=this.content.slice(),i=0;for(n.isText&&n.sameMarkup(r)&&(o[o.length-1]=n.withText(n.text+r.text),i=1);i<e.content.length;i++)o.push(e.content[i]);return new te(o,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],o=0;if(n>e)for(let i=0,s=0;s<n;i++){let a=this.content[i],l=s+a.nodeSize;l>e&&((s<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-s),Math.min(a.text.length,n-s)):a=a.cut(Math.max(0,e-s-1),Math.min(a.content.size,n-s-1))),r.push(a),o+=a.nodeSize),s=l}return new te(r,o)}cutByIndex(e,n){return e==n?te.empty:e==0&&n==this.content.length?this:new te(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let o=this.content.slice(),i=this.size+n.nodeSize-r.nodeSize;return o[e]=n,new te(o,i)}addToStart(e){return new te([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new te(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let o=this.content[n];e(o,r,n),r+=o.nodeSize}}findDiffStart(e,n=0){return ZD(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return YD(this,e,n,r)}findIndex(e,n=-1){if(e==0)return Vm(0,e);if(e==this.size)return Vm(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,o=0;;r++){let i=this.child(r),s=o+i.nodeSize;if(s>=e)return s==e||n>0?Vm(r+1,s):Vm(r,o);o=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return te.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new te(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return te.empty;let n,r=0;for(let o=0;o<e.length;o++){let i=e[o];r+=i.nodeSize,o&&i.isText&&e[o-1].sameMarkup(i)?(n||(n=e.slice(0,o)),n[n.length-1]=i.withText(n[n.length-1].text+i.text)):n&&n.push(i)}return new te(n||e,r)}static from(e){if(!e)return te.empty;if(e instanceof te)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new te([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}te.empty=new te([],0);const Nv={index:0,offset:0};function Vm(t,e){return Nv.index=t,Nv.offset=e,Nv}function T1(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!T1(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!T1(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}class Et{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let o=0;o<e.length;o++){let i=e[o];if(this.eq(i))return e;if(this.type.excludes(i.type))n||(n=e.slice(0,o));else{if(i.type.excludes(this.type))return e;!r&&i.type.rank>this.type.rank&&(n||(n=e.slice(0,o)),n.push(this),r=!0),n&&n.push(i)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&T1(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);return r.create(n.attrs)}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Et.none;if(e instanceof Et)return[e];let n=e.slice();return n.sort((r,o)=>r.type.rank-o.type.rank),n}}Et.none=[];class A1 extends Error{}let Se=class ou{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=XD(this.content,e+this.openStart,n);return r&&new ou(r,this.openStart,this.openEnd)}removeBetween(e,n){return new ou(JD(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return ou.empty;let r=n.openStart||0,o=n.openEnd||0;if(typeof r!="number"||typeof o!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new ou(te.fromJSON(e,n.content),r,o)}static maxOpen(e,n=!0){let r=0,o=0;for(let i=e.firstChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.firstChild)r++;for(let i=e.lastChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.lastChild)o++;return new ou(e,r,o)}};Se.empty=new Se(te.empty,0,0);function JD(t,e,n){let{index:r,offset:o}=t.findIndex(e),i=t.maybeChild(r),{index:s,offset:a}=t.findIndex(n);if(o==e||i.isText){if(a!=n&&!t.child(s).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return t.replaceChild(r,i.copy(JD(i.content,e-o-1,n-o-1)))}function XD(t,e,n,r){let{index:o,offset:i}=t.findIndex(e),s=t.maybeChild(o);if(i==e||s.isText)return r&&!r.canReplace(o,o,n)?null:t.cut(0,e).append(n).append(t.cut(e));let a=XD(s.content,e-i-1,n);return a&&t.replaceChild(o,s.copy(a))}function jV(t,e,n){if(n.openStart>t.depth)throw new A1("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new A1("Inconsistent open depths");return QD(t,e,n,0)}function QD(t,e,n,r){let o=t.index(r),i=t.node(r);if(o==e.index(r)&&r<t.depth-n.openStart){let s=QD(t,e,n,r+1);return i.copy(i.content.replaceChild(o,s))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let s=t.parent,a=s.content;return rc(s,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:s,end:a}=zV(n,t);return rc(i,t5(t,s,a,e,r))}else return rc(i,N1(t,e,r))}function e5(t,e){if(!e.type.compatibleContent(t.type))throw new A1("Cannot join "+e.type.name+" onto "+t.type.name)}function X_(t,e,n){let r=t.node(n);return e5(r,e.node(n)),r}function nc(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Qf(t,e,n,r){let o=(e||t).node(n),i=0,s=e?e.index(n):o.childCount;t&&(i=t.index(n),t.depth>n?i++:t.textOffset&&(nc(t.nodeAfter,r),i++));for(let a=i;a<s;a++)nc(o.child(a),r);e&&e.depth==n&&e.textOffset&&nc(e.nodeBefore,r)}function rc(t,e){return t.type.checkContent(e),t.copy(e)}function t5(t,e,n,r,o){let i=t.depth>o&&X_(t,e,o+1),s=r.depth>o&&X_(n,r,o+1),a=[];return Qf(null,t,o,a),i&&s&&e.index(o)==n.index(o)?(e5(i,s),nc(rc(i,t5(t,e,n,r,o+1)),a)):(i&&nc(rc(i,N1(t,e,o+1)),a),Qf(e,n,o,a),s&&nc(rc(s,N1(n,r,o+1)),a)),Qf(r,null,o,a),new te(a)}function N1(t,e,n){let r=[];if(Qf(null,t,n,r),t.depth>n){let o=X_(t,e,n+1);nc(rc(o,N1(t,e,n+1)),r)}return Qf(e,null,n,r),new te(r)}function zV(t,e){let n=e.depth-t.openStart,o=e.node(n).copy(t.content);for(let i=n-1;i>=0;i--)o=e.node(i).copy(te.from(o));return{start:o.resolveNoCache(t.openStart+n),end:o.resolveNoCache(o.content.size-t.openEnd-n)}}class Wp{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],o=e.child(n);return r?e.child(n).cut(r):o}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],o=n==0?0:this.path[n*3-1]+1;for(let i=0;i<e;i++)o+=r.child(i).nodeSize;return o}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return Et.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),o=e.maybeChild(n);if(!r){let a=r;r=o,o=a}let i=r.marks;for(var s=0;s<i.length;s++)i[s].type.spec.inclusive===!1&&(!o||!i[s].isInSet(o.marks))&&(i=i[s--].removeFromSet(i));return i}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,o=e.parent.maybeChild(e.index());for(var i=0;i<r.length;i++)r[i].type.spec.inclusive===!1&&(!o||!r[i].isInSet(o.marks))&&(r=r[i--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Up(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],o=0,i=n;for(let s=e;;){let{index:a,offset:l}=s.content.findIndex(i),c=i-l;if(r.push(s,a,o+l),!c||(s=s.child(a),s.isText))break;i=c-1,o+=l+1}return new Wp(n,r,i)}static resolveCached(e,n){for(let o=0;o<Rv.length;o++){let i=Rv[o];if(i.pos==n&&i.doc==e)return i}let r=Rv[Pv]=Wp.resolve(e,n);return Pv=(Pv+1)%qV,r}}let Rv=[],Pv=0,qV=12;class Up{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const WV=Object.create(null);let Hr=class Q_{constructor(e,n,r,o=Et.none){this.type=e,this.attrs=n,this.marks=o,this.content=r||te.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,o=0){this.content.nodesBetween(e,n,r,o,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,o){return this.content.textBetween(e,n,r,o)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&T1(this.attrs,n||e.defaultAttrs||WV)&&Et.sameSet(this.marks,r||Et.none)}copy(e=null){return e==this.content?this:new Q_(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Q_(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return Se.empty;let o=this.resolve(e),i=this.resolve(n),s=r?0:o.sharedDepth(n),a=o.start(s),c=o.node(s).content.cut(o.pos-a,i.pos-a);return new Se(c,o.depth-s,i.depth-s)}replace(e,n,r){return jV(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:o}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(o==e||n.isText)return n;e-=o+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}}resolve(e){return Wp.resolveCached(this,e)}resolveNoCache(e){return Wp.resolve(this,e)}rangeHasMark(e,n,r){let o=!1;return n>e&&this.nodesBetween(e,n,i=>(r.isInSet(i.marks)&&(o=!0),!o)),o}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),n5(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=te.empty,o=0,i=r.childCount){let s=this.contentMatchAt(e).matchFragment(r,o,i),a=s&&s.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=o;l<i;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,o){if(o&&!this.type.allowsMarks(o))return!1;let i=this.contentMatchAt(e).matchType(r),s=i&&i.matchFragment(this.content,n);return s?s.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content);let e=Et.none;for(let n=0;n<this.marks.length;n++)e=this.marks[n].addToSet(e);if(!Et.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r=null;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let o=te.fromJSON(e,n.content);return e.nodeType(n.type).create(n.attrs,o,r)}};Hr.prototype.text=void 0;class R1 extends Hr{constructor(e,n,r,o){if(super(e,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):n5(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new R1(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new R1(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function n5(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class mc{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new UV(e,n);if(r.next==null)return mc.empty;let o=r5(r);r.next&&r.err("Unexpected trailing text");let i=JV(YV(o));return XV(i,r),i}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let o=this;for(let i=n;o&&i<r;i++)o=o.matchType(e.child(i).type);return o}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let o=[this];function i(s,a){let l=s.matchFragment(e,r);if(l&&(!n||l.validEnd))return te.from(a.map(c=>c.createAndFill()));for(let c=0;c<s.next.length;c++){let{type:u,next:d}=s.next[c];if(!(u.isText||u.hasRequiredAttrs())&&o.indexOf(d)==-1){o.push(d);let f=i(d,a.concat(u));if(f)return f}}return null}return i(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let o=r.shift(),i=o.match;if(i.matchType(e)){let s=[];for(let a=o;a.type;a=a.via)s.push(a.type);return s.reverse()}for(let s=0;s<i.next.length;s++){let{type:a,next:l}=i.next[s];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!o.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:o}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let o=0;o<r.next.length;o++)e.indexOf(r.next[o].next)==-1&&n(r.next[o].next)}return n(this),e.map((r,o)=>{let i=o+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)i+=(s?", ":"")+r.next[s].type.name+"->"+e.indexOf(r.next[s].next);return i}).join(`
`)}}mc.empty=new mc(!0);class UV{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function r5(t){let e=[];do e.push(VV(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function VV(t){let e=[];do e.push(HV(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function HV(t){let e=ZV(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=KV(t,e);else break;return e}function rA(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function KV(t,e){let n=rA(t),r=n;return t.eat(",")&&(t.next!="}"?r=rA(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function GV(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let o=[];for(let i in n){let s=n[i];s.groups.indexOf(e)>-1&&o.push(s)}return o.length==0&&t.err("No node type or group '"+e+"' found"),o}function ZV(t){if(t.eat("(")){let e=r5(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=GV(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function YV(t){let e=[[]];return o(i(t,0),n()),e;function n(){return e.push([])-1}function r(s,a,l){let c={term:l,to:a};return e[s].push(c),c}function o(s,a){s.forEach(l=>l.to=a)}function i(s,a){if(s.type=="choice")return s.exprs.reduce((l,c)=>l.concat(i(c,a)),[]);if(s.type=="seq")for(let l=0;;l++){let c=i(s.exprs[l],a);if(l==s.exprs.length-1)return c;o(c,a=n())}else if(s.type=="star"){let l=n();return r(a,l),o(i(s.expr,l),l),[r(l)]}else if(s.type=="plus"){let l=n();return o(i(s.expr,a),l),o(i(s.expr,l),l),[r(l)]}else{if(s.type=="opt")return[r(a)].concat(i(s.expr,a));if(s.type=="range"){let l=a;for(let c=0;c<s.min;c++){let u=n();o(i(s.expr,l),u),l=u}if(s.max==-1)o(i(s.expr,l),l);else for(let c=s.min;c<s.max;c++){let u=n();r(l,u),o(i(s.expr,l),u),l=u}return[r(l)]}else{if(s.type=="name")return[r(a,void 0,s.value)];throw new Error("Unknown expr type")}}}}function o5(t,e){return e-t}function oA(t,e){let n=[];return r(e),n.sort(o5);function r(o){let i=t[o];if(i.length==1&&!i[0].term)return r(i[0].to);n.push(o);for(let s=0;s<i.length;s++){let{term:a,to:l}=i[s];!a&&n.indexOf(l)==-1&&r(l)}}}function JV(t){let e=Object.create(null);return n(oA(t,0));function n(r){let o=[];r.forEach(s=>{t[s].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<o.length;u++)o[u][0]==a&&(c=o[u][1]);oA(t,l).forEach(u=>{c||o.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let i=e[r.join(",")]=new mc(r.indexOf(t.length-1)>-1);for(let s=0;s<o.length;s++){let a=o[s][1].sort(o5);i.next.push({type:o[s][0],next:e[a.join(",")]||n(a)})}return i}}function XV(t,e){for(let n=0,r=[t];n<r.length;n++){let o=r[n],i=!o.validEnd,s=[];for(let a=0;a<o.next.length;a++){let{type:l,next:c}=o.next[a];s.push(l.name),i&&!(l.isText||l.hasRequiredAttrs())&&(i=!1),r.indexOf(c)==-1&&r.push(c)}i&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function i5(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function s5(t,e){let n=Object.create(null);for(let r in t){let o=e&&e[r];if(o===void 0){let i=t[r];if(i.hasDefault)o=i.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=o}return n}function a5(t){let e=Object.create(null);if(t)for(let n in t)e[n]=new QV(t[n]);return e}let iA=class l5{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=a5(r.attrs),this.defaultAttrs=i5(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==mc.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:s5(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Hr(this,this.computeAttrs(e),te.from(n),Et.setFrom(r))}createChecked(e=null,n,r){return n=te.from(n),this.checkContent(n),new Hr(this,this.computeAttrs(e),n,Et.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=te.from(n),n.size){let s=this.contentMatch.fillBefore(n);if(!s)return null;n=s.append(n)}let o=this.contentMatch.matchFragment(n),i=o&&o.fillBefore(te.empty,!0);return i?new Hr(this,e,n.append(i),Et.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:Et.none:e}static compile(e,n){let r=Object.create(null);e.forEach((i,s)=>r[i]=new l5(i,n,s));let o=n.spec.topNode||"doc";if(!r[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let i in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};class QV{constructor(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}get isRequired(){return!this.hasDefault}}class n0{constructor(e,n,r,o){this.name=e,this.rank=n,this.schema=r,this.spec=o,this.attrs=a5(o.attrs),this.excluded=null;let i=i5(this.attrs);this.instance=i?new Et(this,i):null}create(e=null){return!e&&this.instance?this.instance:new Et(this,s5(this.attrs,e))}static compile(e,n){let r=Object.create(null),o=0;return e.forEach((i,s)=>r[i]=new n0(i,o++,n,s)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}excludes(e){return this.excluded.indexOf(e)>-1}}class c5{constructor(e){this.cached=Object.create(null);let n=this.spec={};for(let o in e)n[o]=e[o];n.nodes=Hn.from(e.nodes),n.marks=Hn.from(e.marks||{}),this.nodes=iA.compile(this.spec.nodes,this),this.marks=n0.compile(this.spec.marks,this);let r=Object.create(null);for(let o in this.nodes){if(o in this.marks)throw new RangeError(o+" can not be both a node and a mark");let i=this.nodes[o],s=i.spec.content||"",a=i.spec.marks;i.contentMatch=r[s]||(r[s]=mc.parse(s,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.markSet=a=="_"?null:a?sA(this,a.split(" ")):a==""||!i.inlineContent?[]:null}for(let o in this.marks){let i=this.marks[o],s=i.spec.excludes;i.excluded=s==null?[i]:s==""?[]:sA(this,s.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,o){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof iA){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,o)}text(e,n){let r=this.nodes.text;return new R1(r,r.defaultAttrs,e,Et.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return Hr.fromJSON(this,e)}markFromJSON(e){return Et.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function sA(t,e){let n=[];for(let r=0;r<e.length;r++){let o=e[r],i=t.marks[o],s=i;if(i)n.push(i);else for(let a in t.marks){let l=t.marks[a];(o=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(o)>-1)&&n.push(s=l)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}class Xu{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[],n.forEach(r=>{r.tag?this.tags.push(r):r.style&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let o=e.nodes[r.node];return o.contentMatch.matchType(o)})}parse(e,n={}){let r=new lA(this,n,!1);return r.addAll(e,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new lA(this,n,!0);return r.addAll(e,n.from,n.to),Se.maxOpen(r.finish())}matchTag(e,n,r){for(let o=r?this.tags.indexOf(r)+1:0;o<this.tags.length;o++){let i=this.tags[o];if(nH(e,i.tag)&&(i.namespace===void 0||e.namespaceURI==i.namespace)&&(!i.context||n.matchesContext(i.context))){if(i.getAttrs){let s=i.getAttrs(e);if(s===!1)continue;i.attrs=s||void 0}return i}}}matchStyle(e,n,r,o){for(let i=o?this.styles.indexOf(o)+1:0;i<this.styles.length;i++){let s=this.styles[i],a=s.style;if(!(a.indexOf(e)!=0||s.context&&!r.matchesContext(s.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(s.getAttrs){let l=s.getAttrs(n);if(l===!1)continue;s.attrs=l||void 0}return s}}}static schemaRules(e){let n=[];function r(o){let i=o.priority==null?50:o.priority,s=0;for(;s<n.length;s++){let a=n[s];if((a.priority==null?50:a.priority)<i)break}n.splice(s,0,o)}for(let o in e.marks){let i=e.marks[o].spec.parseDOM;i&&i.forEach(s=>{r(s=cA(s)),s.mark||s.ignore||s.clearMark||(s.mark=o)})}for(let o in e.nodes){let i=e.nodes[o].spec.parseDOM;i&&i.forEach(s=>{r(s=cA(s)),s.node||s.ignore||s.mark||(s.node=o)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Xu(e,Xu.schemaRules(e)))}}const u5={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},eH={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},d5={ol:!0,ul:!0},P1=1,O1=2,ep=4;function aA(t,e,n){return e!=null?(e?P1:0)|(e==="full"?O1:0):t&&t.whitespace=="pre"?P1|O1:n&~ep}class Hm{constructor(e,n,r,o,i,s,a){this.type=e,this.attrs=n,this.marks=r,this.pendingMarks=o,this.solid=i,this.options=a,this.content=[],this.activeMarks=Et.none,this.stashMarks=[],this.match=s||(a&ep?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(te.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,o;return(o=r.findWrapping(e.type))?(this.match=r,o):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&P1)){let r=this.content[this.content.length-1],o;if(r&&r.isText&&(o=/[ \t\r\n\u000c]+$/.exec(r.text))){let i=r;r.text.length==o[0].length?this.content.pop():this.content[this.content.length-1]=i.withText(i.text.slice(0,i.text.length-o[0].length))}}let n=te.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(te.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}popFromStashMark(e){for(let n=this.stashMarks.length-1;n>=0;n--)if(e.eq(this.stashMarks[n]))return this.stashMarks.splice(n,1)[0]}applyPending(e){for(let n=0,r=this.pendingMarks;n<r.length;n++){let o=r[n];(this.type?this.type.allowsMarkType(o.type):oH(o.type,e))&&!o.isInSet(this.activeMarks)&&(this.activeMarks=o.addToSet(this.activeMarks),this.pendingMarks=o.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!u5.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class lA{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0;let o=n.topNode,i,s=aA(null,n.preserveWhitespace,0)|(r?ep:0);o?i=new Hm(o.type,o.attrs,Et.none,Et.none,!0,n.topMatch||o.type.contentMatch,s):r?i=new Hm(null,null,Et.none,Et.none,!0,null,s):i=new Hm(e.schema.topNodeType,null,Et.none,Et.none,!0,null,s),this.nodes=[i],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,n){let r=e.getAttribute("style");if(!r)return n();let o=this.readStyles(rH(r));if(!o)return;let[i,s]=o,a=this.top;for(let l=0;l<s.length;l++)this.removePendingMark(s[l],a);for(let l=0;l<i.length;l++)this.addPendingMark(i[l]);n();for(let l=0;l<i.length;l++)this.removePendingMark(i[l],a);for(let l=0;l<s.length;l++)this.addPendingMark(s[l])}addTextNode(e){let n=e.nodeValue,r=this.top;if(r.options&O1||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(r.options&P1)r.options&O1?n=n.replace(/\r\n?/g,`
`):n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let o=r.content[r.content.length-1],i=e.previousSibling;(!o||i&&i.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n)),this.findInText(e)}else this.findInside(e)}addElement(e,n){let r=e.nodeName.toLowerCase(),o;d5.hasOwnProperty(r)&&this.parser.normalizeLists&&tH(e);let i=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(o=this.parser.matchTag(e,this,n));if(i?i.ignore:eH.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!i||i.skip||i.closeParent){i&&i.closeParent?this.open=Math.max(0,this.open-1):i&&i.skip.nodeType&&(e=i.skip);let s,a=this.top,l=this.needsBlock;if(u5.hasOwnProperty(r))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),s=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}i&&i.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),s&&this.sync(a),this.needsBlock=l}else this.withStyleRules(e,()=>{this.addElementByRule(e,i,i.consuming===!1?o:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let n=Et.none,r=Et.none;for(let o=0;o<e.length;o+=2)for(let i=void 0;;){let s=this.parser.matchStyle(e[o],e[o+1],this,i);if(!s)break;if(s.ignore)return null;if(s.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(a=>{s.clearMark(a)&&(r=a.addToSet(r))}):n=this.parser.schema.marks[s.mark].create(s.attrs).addToSet(n),s.consuming===!1)i=s;else break}return[n,r]}addElementByRule(e,n,r){let o,i,s;n.node?(i=this.parser.schema.nodes[n.node],i.isLeaf?this.insertNode(i.create(n.attrs))||this.leafFallback(e):o=this.enter(i,n.attrs||null,n.preserveWhitespace)):(s=this.parser.schema.marks[n.mark].create(n.attrs),this.addPendingMark(s));let a=this.top;if(i&&i.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l)}o&&this.sync(a)&&this.open--,s&&this.removePendingMark(s,a)}addAll(e,n,r){let o=n||0;for(let i=n?e.childNodes[n]:e.firstChild,s=r==null?null:e.childNodes[r];i!=s;i=i.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(i);this.findAtPoint(e,o)}findPlace(e){let n,r;for(let o=this.open;o>=0;o--){let i=this.nodes[o],s=i.findWrapping(e);if(s&&(!n||n.length>s.length)&&(n=s,r=i,!s.length)||i.solid)break}if(!n)return!1;this.sync(r);for(let o=0;o<n.length;o++)this.enterInner(n[o],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let n=this.textblockFromContext();n&&this.enterInner(n)}if(this.findPlace(e)){this.closeExtra();let n=this.top;n.applyPending(e.type),n.match&&(n.match=n.match.matchType(e.type));let r=n.activeMarks;for(let o=0;o<e.marks.length;o++)(!n.type||n.type.allowsMarkType(e.marks[o].type))&&(r=e.marks[o].addToSet(r));return n.content.push(e.mark(r)),!0}return!1}enter(e,n,r){let o=this.findPlace(e.create(n));return o&&this.enterInner(e,n,!0,r),o}enterInner(e,n=null,r=!1,o){this.closeExtra();let i=this.top;i.applyPending(e),i.match=i.match&&i.match.matchType(e);let s=aA(e,o,i.options);i.options&ep&&i.content.length==0&&(s|=ep),this.nodes.push(new Hm(e,n,i.activeMarks,i.pendingMarks,r,null,s)),this.open++}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let n=this.open;n>=0;n--)if(this.nodes[n]==e)return this.open=n,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let o=r.length-1;o>=0;o--)e+=r[o].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let o=0;o<this.find.length;o++)this.find[o].pos==null&&e.nodeType==1&&e.contains(this.find[o].node)&&n.compareDocumentPosition(this.find[o].node)&(r?2:4)&&(this.find[o].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+(o?0:1),s=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=i;l--)if(s(a-1,l))return!0;return!1}else{let u=l>0||l==0&&o?this.nodes[l].type:r&&l>=i?r.node(l-i).type:null;if(!u||u.name!=c&&u.groups.indexOf(c)==-1)return!1;l--}}return!0};return s(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let n=iH(e,this.top.pendingMarks);n&&this.top.stashMarks.push(n),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,n){for(let r=this.open;r>=0;r--){let o=this.nodes[r];if(o.pendingMarks.lastIndexOf(e)>-1)o.pendingMarks=e.removeFromSet(o.pendingMarks);else{o.activeMarks=e.removeFromSet(o.activeMarks);let s=o.popFromStashMark(e);s&&o.type&&o.type.allowsMarkType(s.type)&&(o.activeMarks=s.addToSet(o.activeMarks))}if(o==n)break}}}function tH(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&d5.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function nH(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function rH(t){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,n,r=[];for(;n=e.exec(t);)r.push(n[1],n[2].trim());return r}function cA(t){let e={};for(let n in t)e[n]=t[n];return e}function oH(t,e){let n=e.schema.nodes;for(let r in n){let o=n[r];if(!o.allowsMarkType(t))continue;let i=[],s=a=>{i.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||i.indexOf(u)<0&&s(u))return!0}};if(s(o.contentMatch))return!0}}function iH(t,e){for(let n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}class Vr{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=Ov(n).createDocumentFragment());let o=r,i=[];return e.forEach(s=>{if(i.length||s.marks.length){let a=0,l=0;for(;a<i.length&&l<s.marks.length;){let c=s.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(i[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<i.length;)o=i.pop()[1];for(;l<s.marks.length;){let c=s.marks[l++],u=this.serializeMark(c,s.isInline,n);u&&(i.push([c,o]),o.appendChild(u.dom),o=u.contentDOM||u.dom)}}o.appendChild(this.serializeNodeInner(s,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:o}=Vr.renderSpec(Ov(n),this.nodes[e.type.name](e));if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,o)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let o=e.marks.length-1;o>=0;o--){let i=this.serializeMark(e.marks[o],e.isInline,n);i&&((i.contentDOM||i.dom).appendChild(r),r=i.dom)}return r}serializeMark(e,n,r={}){let o=this.marks[e.type.name];return o&&Vr.renderSpec(Ov(r),o(e,n))}static renderSpec(e,n,r=null){if(typeof n=="string")return{dom:e.createTextNode(n)};if(n.nodeType!=null)return{dom:n};if(n.dom&&n.dom.nodeType!=null)return n;let o=n[0],i=o.indexOf(" ");i>0&&(r=o.slice(0,i),o=o.slice(i+1));let s,a=r?e.createElementNS(r,o):e.createElement(o),l=n[1],c=1;if(l&&typeof l=="object"&&l.nodeType==null&&!Array.isArray(l)){c=2;for(let u in l)if(l[u]!=null){let d=u.indexOf(" ");d>0?a.setAttributeNS(u.slice(0,d),u.slice(d+1),l[u]):a.setAttribute(u,l[u])}}for(let u=c;u<n.length;u++){let d=n[u];if(d===0){if(u<n.length-1||u>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:f,contentDOM:p}=Vr.renderSpec(e,d,r);if(a.appendChild(f),p){if(s)throw new RangeError("Multiple content holes");s=p}}}return{dom:a,contentDOM:s}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Vr(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=uA(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return uA(e.marks)}}function uA(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Ov(t){return t.document||window.document}const f5=65535,p5=Math.pow(2,16);function sH(t,e){return t+e*p5}function dA(t){return t&f5}function aH(t){return(t-(t&f5))/p5}const h5=1,m5=2,Bg=4,g5=8;class ex{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&g5)>0}get deletedBefore(){return(this.delInfo&(h5|Bg))>0}get deletedAfter(){return(this.delInfo&(m5|Bg))>0}get deletedAcross(){return(this.delInfo&Bg)>0}}class ro{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&ro.empty)return ro.empty}recover(e){let n=0,r=dA(e);if(!this.inverted)for(let o=0;o<r;o++)n+=this.ranges[o*3+2]-this.ranges[o*3+1];return this.ranges[r*3]+n+aH(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let o=0,i=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?o:0);if(l>e)break;let c=this.ranges[a+i],u=this.ranges[a+s],d=l+c;if(e<=d){let f=c?e==l?-1:e==d?1:n:n,p=l+o+(f<0?0:u);if(r)return p;let h=e==(n<0?l:d)?null:sH(a/3,e-l),y=e==l?m5:e==d?h5:Bg;return(n<0?e!=l:e!=d)&&(y|=g5),new ex(p,y,h)}o+=u-c}return r?e+o:new ex(e+o,0,null)}touches(e,n){let r=0,o=dA(n),i=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+i],u=l+c;if(e<=u&&a==o*3)return!0;r+=this.ranges[a+s]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let o=0,i=0;o<this.ranges.length;o+=3){let s=this.ranges[o],a=s-(this.inverted?i:0),l=s+(this.inverted?0:i),c=this.ranges[o+n],u=this.ranges[o+r];e(a,a+c,l,l+u),i+=u-c}}invert(){return new ro(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?ro.empty:new ro(e<0?[0,-e,0]:[0,0,e])}}ro.empty=new ro([]);class Su{constructor(e=[],n,r=0,o=e.length){this.maps=e,this.mirror=n,this.from=r,this.to=o}slice(e=0,n=this.maps.length){return new Su(this.maps,this.mirror,e,n)}copy(){return new Su(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,n){this.to=this.maps.push(e),n!=null&&this.setMirror(this.maps.length-1,n)}appendMapping(e){for(let n=0,r=this.maps.length;n<e.maps.length;n++){let o=e.getMirror(n);this.appendMap(e.maps[n],o!=null&&o<n?r+o:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this.maps.length+e.maps.length;n>=0;n--){let o=e.getMirror(n);this.appendMap(e.maps[n].invert(),o!=null&&o>n?r-o-1:void 0)}}invert(){let e=new Su;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let o=0;for(let i=this.from;i<this.to;i++){let s=this.maps[i],a=s.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(i);if(l!=null&&l>i&&l<this.to){i=l,e=this.maps[l].recover(a.recover);continue}}o|=a.delInfo,e=a.pos}return r?e:new ex(e,o,null)}}const Iv=Object.create(null);class jn{getMap(){return ro.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Iv[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Iv)throw new RangeError("Duplicate use of step JSON ID "+e);return Iv[e]=n,n.prototype.jsonID=e,n}}class $n{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new $n(e,null)}static fail(e){return new $n(null,e)}static fromReplace(e,n,r,o){try{return $n.ok(e.replace(n,r,o))}catch(i){if(i instanceof A1)return $n.fail(i.message);throw i}}}function x$(t,e,n){let r=[];for(let o=0;o<t.childCount;o++){let i=t.child(o);i.content.size&&(i=i.copy(x$(i.content,e,i))),i.isInline&&(i=e(i,n,o)),r.push(i)}return te.fromArray(r)}class Ca extends jn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),o=r.node(r.sharedDepth(this.to)),i=new Se(x$(n.content,(s,a)=>!s.isAtom||!a.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),o),n.openStart,n.openEnd);return $n.fromReplace(e,this.from,this.to,i)}invert(){return new qi(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Ca(n.pos,r.pos,this.mark)}merge(e){return e instanceof Ca&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ca(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Ca(n.from,n.to,e.markFromJSON(n.mark))}}jn.jsonID("addMark",Ca);class qi extends jn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new Se(x$(n.content,o=>o.mark(this.mark.removeFromSet(o.marks)),e),n.openStart,n.openEnd);return $n.fromReplace(e,this.from,this.to,r)}invert(){return new Ca(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new qi(n.pos,r.pos,this.mark)}merge(e){return e instanceof qi&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new qi(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new qi(n.from,n.to,e.markFromJSON(n.mark))}}jn.jsonID("removeMark",qi);class Ta extends jn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return $n.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return $n.fromReplace(e,this.pos,this.pos+1,new Se(te.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let o=0;o<n.marks.length;o++)if(!n.marks[o].isInSet(r))return new Ta(this.pos,n.marks[o]);return new Ta(this.pos,this.mark)}}return new Qu(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Ta(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Ta(n.pos,e.markFromJSON(n.mark))}}jn.jsonID("addNodeMark",Ta);class Qu extends jn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return $n.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return $n.fromReplace(e,this.pos,this.pos+1,new Se(te.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Ta(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Qu(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Qu(n.pos,e.markFromJSON(n.mark))}}jn.jsonID("removeNodeMark",Qu);class Zn extends jn{constructor(e,n,r,o=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=o}apply(e){return this.structure&&tx(e,this.from,this.to)?$n.fail("Structure replace would overwrite content"):$n.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new ro([this.from,this.to-this.from,this.slice.size])}invert(e){return new Zn(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Zn(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(e){if(!(e instanceof Zn)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?Se.empty:new Se(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Zn(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?Se.empty:new Se(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Zn(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Zn(n.from,n.to,Se.fromJSON(e,n.slice),!!n.structure)}}jn.jsonID("replace",Zn);class Tn extends jn{constructor(e,n,r,o,i,s,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=i,this.insert=s,this.structure=a}apply(e){if(this.structure&&(tx(e,this.from,this.gapFrom)||tx(e,this.gapTo,this.to)))return $n.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return $n.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?$n.fromReplace(e,this.from,this.to,r):$n.fail("Content does not fit in gap")}getMap(){return new ro([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new Tn(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),o=e.map(this.gapFrom,-1),i=e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||o<n.pos||i>r.pos?null:new Tn(n.pos,r.pos,o,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Tn(n.from,n.to,n.gapFrom,n.gapTo,Se.fromJSON(e,n.slice),n.insert,!!n.structure)}}jn.jsonID("replaceAround",Tn);function tx(t,e,n){let r=t.resolve(e),o=n-e,i=r.depth;for(;o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(o>0){let s=r.node(i).maybeChild(r.indexAfter(i));for(;o>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,o--}}return!1}function lH(t,e,n,r){let o=[],i=[],s,a;t.doc.nodesBetween(e,n,(l,c,u)=>{if(!l.isInline)return;let d=l.marks;if(!r.isInSet(d)&&u.type.allowsMarkType(r.type)){let f=Math.max(c,e),p=Math.min(c+l.nodeSize,n),h=r.addToSet(d);for(let y=0;y<d.length;y++)d[y].isInSet(h)||(s&&s.to==f&&s.mark.eq(d[y])?s.to=p:o.push(s=new qi(f,p,d[y])));a&&a.to==f?a.to=p:i.push(a=new Ca(f,p,r))}}),o.forEach(l=>t.step(l)),i.forEach(l=>t.step(l))}function cH(t,e,n,r){let o=[],i=0;t.doc.nodesBetween(e,n,(s,a)=>{if(!s.isInline)return;i++;let l=null;if(r instanceof n0){let c=s.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(s.marks)&&(l=[r]):l=s.marks;if(l&&l.length){let c=Math.min(a+s.nodeSize,n);for(let u=0;u<l.length;u++){let d=l[u],f;for(let p=0;p<o.length;p++){let h=o[p];h.step==i-1&&d.eq(o[p].style)&&(f=h)}f?(f.to=c,f.step=i):o.push({style:d,from:Math.max(a,e),to:c,step:i})}}}),o.forEach(s=>t.step(new qi(s.from,s.to,s.style)))}function uH(t,e,n,r=n.contentMatch){let o=t.doc.nodeAt(e),i=[],s=e+1;for(let a=0;a<o.childCount;a++){let l=o.child(a),c=s+l.nodeSize,u=r.matchType(l.type);if(!u)i.push(new Zn(s,c,Se.empty));else{r=u;for(let d=0;d<l.marks.length;d++)n.allowsMarkType(l.marks[d].type)||t.step(new qi(s,c,l.marks[d]));if(l.isText&&!n.spec.code){let d,f=/\r?\n|\r/g,p;for(;d=f.exec(l.text);)p||(p=new Se(te.from(n.schema.text(" ",n.allowedMarks(l.marks))),0,0)),i.push(new Zn(s+d.index,s+d.index+d[0].length,p))}}s=c}if(!r.validEnd){let a=r.fillBefore(te.empty,!0);t.replace(s,s,new Se(a,0,0))}for(let a=i.length-1;a>=0;a--)t.step(i[a])}function dH(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Ad(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let o=t.$from.node(r),i=t.$from.index(r),s=t.$to.indexAfter(r);if(r<t.depth&&o.canReplace(i,s,n))return r;if(r==0||o.type.spec.isolating||!dH(o,i,s))break}return null}function fH(t,e,n){let{$from:r,$to:o,depth:i}=e,s=r.before(i+1),a=o.after(i+1),l=s,c=a,u=te.empty,d=0;for(let h=i,y=!1;h>n;h--)y||r.index(h)>0?(y=!0,u=te.from(r.node(h).copy(u)),d++):l--;let f=te.empty,p=0;for(let h=i,y=!1;h>n;h--)y||o.after(h+1)<o.end(h)?(y=!0,f=te.from(o.node(h).copy(f)),p++):c++;t.step(new Tn(l,c,s,a,new Se(u.append(f),d,p),u.size-d,!0))}function r0(t,e,n=null,r=t){let o=pH(t,e),i=o&&hH(r,e);return i?o.map(fA).concat({type:e,attrs:n}).concat(i.map(fA)):null}function fA(t){return{type:t,attrs:null}}function pH(t,e){let{parent:n,startIndex:r,endIndex:o}=t,i=n.contentMatchAt(r).findWrapping(e);if(!i)return null;let s=i.length?i[0]:e;return n.canReplaceWith(r,o,s)?i:null}function hH(t,e){let{parent:n,startIndex:r,endIndex:o}=t,i=n.child(r),s=e.contentMatch.findWrapping(i.type);if(!s)return null;let l=(s.length?s[s.length-1]:e).contentMatch;for(let c=r;l&&c<o;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:s}function mH(t,e,n){let r=te.empty;for(let s=n.length-1;s>=0;s--){if(r.size){let a=n[s].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=te.from(n[s].type.create(n[s].attrs,r))}let o=e.start,i=e.end;t.step(new Tn(o,i,o,i,new Se(r,0,0),n.length,!0))}function gH(t,e,n,r,o){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let i=t.steps.length;t.doc.nodesBetween(e,n,(s,a)=>{if(s.isTextblock&&!s.hasMarkup(r,o)&&yH(t.doc,t.mapping.slice(i).map(a),r)){t.clearIncompatible(t.mapping.slice(i).map(a,1),r);let l=t.mapping.slice(i),c=l.map(a,1),u=l.map(a+s.nodeSize,1);return t.step(new Tn(c,u,c+1,u-1,new Se(te.from(r.create(o,null,s.marks)),0,0),1,!0)),!1}})}function yH(t,e,n){let r=t.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}function bH(t,e,n,r,o){let i=t.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");n||(n=i.type);let s=n.create(r,null,o||i.marks);if(i.isLeaf)return t.replaceWith(e,e+i.nodeSize,s);if(!n.validContent(i.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Tn(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new Se(te.from(s),0,0),1,!0))}function tp(t,e,n=1,r){let o=t.resolve(e),i=o.depth-n,s=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!s.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let c=o.depth-1,u=n-2;c>i;c--,u--){let d=o.node(c),f=o.index(c);if(d.type.spec.isolating)return!1;let p=d.content.cutByIndex(f,d.childCount),h=r&&r[u+1];h&&(p=p.replaceChild(0,h.type.create(h.attrs)));let y=r&&r[u]||d;if(!d.canReplace(f+1,d.childCount)||!y.type.validContent(p))return!1}let a=o.indexAfter(i),l=r&&r[0];return o.node(i).canReplaceWith(a,a,l?l.type:o.node(i+1).type)}function vH(t,e,n=1,r){let o=t.doc.resolve(e),i=te.empty,s=te.empty;for(let a=o.depth,l=o.depth-n,c=n-1;a>l;a--,c--){i=te.from(o.node(a).copy(i));let u=r&&r[c];s=te.from(u?u.type.create(u.attrs,s):o.node(a).copy(s))}t.step(new Zn(e,e,new Se(i.append(s),n,n),!0))}function Nd(t,e){let n=t.resolve(e),r=n.index();return wH(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function wH(t,e){return!!(t&&e&&!t.isLeaf&&t.canAppend(e))}function _H(t,e,n){let r=new Zn(e-n,e+n,Se.empty,!0);t.step(r)}function xH(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let o=r.depth-1;o>=0;o--){let i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(let o=r.depth-1;o>=0;o--){let i=r.indexAfter(o);if(r.node(o).canReplaceWith(i,i,n))return r.after(o+1);if(i<r.node(o).childCount)return null}return null}function y5(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let o=n.content;for(let i=0;i<n.openStart;i++)o=o.firstChild.content;for(let i=1;i<=(n.openStart==0&&n.size?2:1);i++)for(let s=r.depth;s>=0;s--){let a=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,l=r.index(s)+(a>0?1:0),c=r.node(s),u=!1;if(i==1)u=c.canReplace(l,l,o);else{let d=c.contentMatchAt(l).findWrapping(o.firstChild.type);u=d&&c.canReplaceWith(l,l,d[0])}if(u)return a==0?r.pos:a<0?r.before(s+1):r.after(s+1)}return null}function k$(t,e,n=e,r=Se.empty){if(e==n&&!r.size)return null;let o=t.resolve(e),i=t.resolve(n);return b5(o,i,r)?new Zn(e,n,r):new kH(o,i,r).fit()}function b5(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class kH{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=te.empty;for(let o=0;o<=e.depth;o++){let i=e.node(o);this.frontier.push({type:i.type,match:i.contentMatchAt(e.indexAfter(o))})}for(let o=e.depth;o>0;o--)this.placed=te.from(e.node(o).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(e<0?this.$to:r.doc.resolve(e));if(!o)return null;let i=this.placed,s=r.depth,a=o.depth;for(;s&&a&&i.childCount==1;)i=i.firstChild.content,s--,a--;let l=new Se(i,s,a);return e>-1?new Tn(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new Zn(r.pos,o.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,o=this.unplaced.openEnd;r<e;r++){let i=n.firstChild;if(n.childCount>1&&(o=0),i.type.spec.isolating&&o<=r){e=r;break}n=i.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let o,i=null;r?(i=Dv(this.unplaced.content,r-1).firstChild,o=i.content):o=this.unplaced.content;let s=o.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,d=null;if(n==1&&(s?c.matchType(s.type)||(d=c.fillBefore(te.from(s),!1)):i&&l.compatibleContent(i.type)))return{sliceDepth:r,frontierDepth:a,parent:i,inject:d};if(n==2&&s&&(u=c.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:a,parent:i,wrap:u};if(i&&c.matchType(i.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,o=Dv(e,n);return!o.childCount||o.firstChild.isLeaf?!1:(this.unplaced=new Se(e,n+1,Math.max(r,o.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,o=Dv(e,n);if(o.childCount<=1&&n>0){let i=e.size-n<=n+o.size;this.unplaced=new Se(Ff(e,n-1,1),n-1,i?n-1:r)}else this.unplaced=new Se(Ff(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:o,wrap:i}){for(;this.depth>n;)this.closeFrontierNode();if(i)for(let y=0;y<i.length;y++)this.openFrontierNode(i[y]);let s=this.unplaced,a=r?r.content:s.content,l=s.openStart-e,c=0,u=[],{match:d,type:f}=this.frontier[n];if(o){for(let y=0;y<o.childCount;y++)u.push(o.child(y));d=d.matchFragment(o)}let p=a.size+e-(s.content.size-s.openEnd);for(;c<a.childCount;){let y=a.child(c),m=d.matchType(y.type);if(!m)break;c++,(c>1||l==0||y.content.size)&&(d=m,u.push(v5(y.mark(f.allowedMarks(y.marks)),c==1?l:0,c==a.childCount?p:-1)))}let h=c==a.childCount;h||(p=-1),this.placed=Bf(this.placed,n,te.from(u)),this.frontier[n].match=d,h&&p<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let y=0,m=a;y<p;y++){let w=m.lastChild;this.frontier.push({type:w.type,match:w.contentMatchAt(w.childCount)}),m=w.content}this.unplaced=h?e==0?Se.empty:new Se(Ff(s.content,e-1,1),e-1,p<0?s.openEnd:e-1):new Se(Ff(s.content,e,c),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!Mv(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,o=this.$to.after(r);for(;r>1&&o==this.$to.end(--r);)++o;return o}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:o}=this.frontier[n],i=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),s=Mv(e,n,o,r,i);if(s){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=Mv(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:n,fit:s,move:i?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Bf(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let o=e.node(r),i=o.type.contentMatch.fillBefore(o.content,!0,e.index(r));this.openFrontierNode(o.type,o.attrs,i)}return e}openFrontierNode(e,n=null,r){let o=this.frontier[this.depth];o.match=o.match.matchType(e),this.placed=Bf(this.placed,this.depth,te.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(te.empty,!0);n.childCount&&(this.placed=Bf(this.placed,this.frontier.length,n))}}function Ff(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Ff(t.firstChild.content,e-1,n)))}function Bf(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Bf(t.lastChild.content,e-1,n)))}function Dv(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function v5(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,v5(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(te.empty,!0)))),t.copy(r)}function Mv(t,e,n,r,o){let i=t.node(e),s=o?t.indexAfter(e):t.index(e);if(s==i.childCount&&!n.compatibleContent(i.type))return null;let a=r.fillBefore(i.content,!0,s);return a&&!$H(n,i.content,s)?a:null}function $H(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function SH(t){return t.spec.defining||t.spec.definingForContent}function EH(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let o=t.doc.resolve(e),i=t.doc.resolve(n);if(b5(o,i,r))return t.step(new Zn(e,n,r));let s=_5(o,t.doc.resolve(n));s[s.length-1]==0&&s.pop();let a=-(o.depth+1);s.unshift(a);for(let f=o.depth,p=o.pos-1;f>0;f--,p--){let h=o.node(f).type.spec;if(h.defining||h.definingAsContext||h.isolating)break;s.indexOf(f)>-1?a=f:o.before(f)==p&&s.splice(1,0,-f)}let l=s.indexOf(a),c=[],u=r.openStart;for(let f=r.content,p=0;;p++){let h=f.firstChild;if(c.push(h),p==r.openStart)break;f=h.content}for(let f=u-1;f>=0;f--){let p=c[f],h=SH(p.type);if(h&&!p.sameMarkup(o.node(Math.abs(a)-1)))u=f;else if(h||!p.type.isTextblock)break}for(let f=r.openStart;f>=0;f--){let p=(f+u+1)%(r.openStart+1),h=c[p];if(h)for(let y=0;y<s.length;y++){let m=s[(y+l)%s.length],w=!0;m<0&&(w=!1,m=-m);let x=o.node(m-1),$=o.index(m-1);if(x.canReplaceWith($,$,h.type,h.marks))return t.replace(o.before(m),w?i.after(m):n,new Se(w5(r.content,0,r.openStart,p),p,r.openEnd))}}let d=t.steps.length;for(let f=s.length-1;f>=0&&(t.replace(e,n,r),!(t.steps.length>d));f--){let p=s[f];p<0||(e=o.before(p),n=i.after(p))}}function w5(t,e,n,r,o){if(e<n){let i=t.firstChild;t=t.replaceChild(0,i.copy(w5(i.content,e+1,n,r,i)))}if(e>r){let i=o.contentMatchAt(0),s=i.fillBefore(t).append(t);t=s.append(i.matchFragment(s).fillBefore(te.empty,!0))}return t}function CH(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let o=xH(t.doc,e,r.type);o!=null&&(e=n=o)}t.replaceRange(e,n,new Se(te.from(r),0,0))}function TH(t,e,n){let r=t.doc.resolve(e),o=t.doc.resolve(n),i=_5(r,o);for(let s=0;s<i.length;s++){let a=i[s],l=s==i.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),o.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),o.indexAfter(a-1))))return t.delete(r.before(a),o.after(a))}for(let s=1;s<=r.depth&&s<=o.depth;s++)if(e-r.start(s)==r.depth-s&&n>r.end(s)&&o.end(s)-n!=o.depth-s)return t.delete(r.before(s),n);t.delete(e,n)}function _5(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let o=r;o>=0;o--){let i=t.start(o);if(i<t.pos-(t.depth-o)||e.end(o)>e.pos+(e.depth-o)||t.node(o).type.spec.isolating||e.node(o).type.spec.isolating)break;(i==e.start(o)||o==t.depth&&o==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&o&&e.start(o-1)==i-1)&&n.push(o)}return n}class Eu extends jn{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return $n.fail("No node at attribute step's position");let r=Object.create(null);for(let i in n.attrs)r[i]=n.attrs[i];r[this.attr]=this.value;let o=n.type.create(r,null,n.marks);return $n.fromReplace(e,this.pos,this.pos+1,new Se(te.from(o),0,n.isLeaf?0:1))}getMap(){return ro.empty}invert(e){return new Eu(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Eu(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Eu(n.pos,n.attr,n.value)}}jn.jsonID("attr",Eu);class Vp extends jn{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let o in e.attrs)n[o]=e.attrs[o];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return $n.ok(r)}getMap(){return ro.empty}invert(e){return new Vp(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Vp(n.attr,n.value)}}jn.jsonID("docAttr",Vp);let ed=class extends Error{};ed=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};ed.prototype=Object.create(Error.prototype);ed.prototype.constructor=ed;ed.prototype.name="TransformError";class x5{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Su}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new ed(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=Se.empty){let o=k$(this.doc,e,n,r);return o&&this.step(o),this}replaceWith(e,n,r){return this.replace(e,n,new Se(te.from(r),0,0))}delete(e,n){return this.replace(e,n,Se.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return EH(this,e,n,r),this}replaceRangeWith(e,n,r){return CH(this,e,n,r),this}deleteRange(e,n){return TH(this,e,n),this}lift(e,n){return fH(this,e,n),this}join(e,n=1){return _H(this,e,n),this}wrap(e,n){return mH(this,e,n),this}setBlockType(e,n=e,r,o=null){return gH(this,e,n,r,o),this}setNodeMarkup(e,n,r=null,o){return bH(this,e,n,r,o),this}setNodeAttribute(e,n,r){return this.step(new Eu(e,n,r)),this}setDocAttribute(e,n){return this.step(new Vp(e,n)),this}addNodeMark(e,n){return this.step(new Ta(e,n)),this}removeNodeMark(e,n){if(!(n instanceof Et)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n=n.isInSet(r.marks),!n)return this}return this.step(new Qu(e,n)),this}split(e,n=1,r){return vH(this,e,n,r),this}addMark(e,n,r){return lH(this,e,n,r),this}removeMark(e,n,r){return cH(this,e,n,r),this}clearIncompatible(e,n,r){return uH(this,e,n,r),this}}const Lv=Object.create(null);class Oe{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new k5(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=Se.empty){let r=n.content.lastChild,o=null;for(let a=0;a<n.openEnd;a++)o=r,r=r.lastChild;let i=e.steps.length,s=this.ranges;for(let a=0;a<s.length;a++){let{$from:l,$to:c}=s[a],u=e.mapping.slice(i);e.replaceRange(u.map(l.pos),u.map(c.pos),a?Se.empty:n),a==0&&mA(e,i,(r?r.isInline:o&&o.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,o=this.ranges;for(let i=0;i<o.length;i++){let{$from:s,$to:a}=o[i],l=e.mapping.slice(r),c=l.map(s.pos),u=l.map(a.pos);i?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),mA(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let o=e.parent.inlineContent?new We(e):iu(e.node(0),e.parent,e.pos,e.index(),n,r);if(o)return o;for(let i=e.depth-1;i>=0;i--){let s=n<0?iu(e.node(0),e.node(i),e.before(i+1),e.index(i),n,r):iu(e.node(0),e.node(i),e.after(i+1),e.index(i)+1,n,r);if(s)return s}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new io(e.node(0))}static atStart(e){return iu(e,e,0,0,1)||new io(e)}static atEnd(e){return iu(e,e,e.content.size,e.childCount,-1)||new io(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Lv[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Lv)throw new RangeError("Duplicate use of selection JSON ID "+e);return Lv[e]=n,n.prototype.jsonID=e,n}getBookmark(){return We.between(this.$anchor,this.$head).getBookmark()}}Oe.prototype.visible=!0;class k5{constructor(e,n){this.$from=e,this.$to=n}}let pA=!1;function hA(t){!pA&&!t.parent.inlineContent&&(pA=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class We extends Oe{constructor(e,n=e){hA(e),hA(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return Oe.near(r);let o=e.resolve(n.map(this.anchor));return new We(o.parent.inlineContent?o:r,r)}replace(e,n=Se.empty){if(super.replace(e,n),n==Se.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof We&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new o0(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new We(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let o=e.resolve(n);return new this(o,r==n?o:e.resolve(r))}static between(e,n,r){let o=e.pos-n.pos;if((!r||o)&&(r=o>=0?1:-1),!n.parent.inlineContent){let i=Oe.findFrom(n,r,!0)||Oe.findFrom(n,-r,!0);if(i)n=i.$head;else return Oe.near(n,r)}return e.parent.inlineContent||(o==0?e=n:(e=(Oe.findFrom(e,-r,!0)||Oe.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=o<0&&(e=n))),new We(e,n)}}Oe.jsonID("text",We);class o0{constructor(e,n){this.anchor=e,this.head=n}map(e){return new o0(e.map(this.anchor),e.map(this.head))}resolve(e){return We.between(e.resolve(this.anchor),e.resolve(this.head))}}class Me extends Oe{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:o}=n.mapResult(this.anchor),i=e.resolve(o);return r?Oe.near(i):new Me(i)}content(){return new Se(te.from(this.node),0,0)}eq(e){return e instanceof Me&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new $$(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Me(e.resolve(n.anchor))}static create(e,n){return new Me(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Me.prototype.visible=!1;Oe.jsonID("node",Me);class $${constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new o0(r,r):new $$(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&Me.isSelectable(r)?new Me(n):Oe.near(n)}}class io extends Oe{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=Se.empty){if(n==Se.empty){e.delete(0,e.doc.content.size);let r=Oe.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new io(e)}map(e){return new io(e)}eq(e){return e instanceof io}getBookmark(){return AH}}Oe.jsonID("all",io);const AH={map(){return this},resolve(t){return new io(t)}};function iu(t,e,n,r,o,i=!1){if(e.inlineContent)return We.create(t,n);for(let s=r-(o>0?0:1);o>0?s<e.childCount:s>=0;s+=o){let a=e.child(s);if(a.isAtom){if(!i&&Me.isSelectable(a))return Me.create(t,n-(o<0?a.nodeSize:0))}else{let l=iu(t,a,n+o,o<0?a.childCount:0,o,i);if(l)return l}n+=a.nodeSize*o}return null}function mA(t,e,n){let r=t.steps.length-1;if(r<e)return;let o=t.steps[r];if(!(o instanceof Zn||o instanceof Tn))return;let i=t.mapping.maps[r],s;i.forEach((a,l,c,u)=>{s==null&&(s=u)}),t.setSelection(Oe.near(t.doc.resolve(s),n))}const gA=1,Km=2,yA=4;class NH extends x5{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|gA)&~Km,this.storedMarks=null,this}get selectionSet(){return(this.updated&gA)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Km,this}ensureMarks(e){return Et.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Km)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~Km,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Et.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let o=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(o.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r==null?n:r,!e)return this.deleteRange(n,r);let i=this.storedMarks;if(!i){let s=this.doc.resolve(n);i=r==n?s.marks():s.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,o.text(e,i)),this.selection.empty||this.setSelection(Oe.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=yA,this}get scrolledIntoView(){return(this.updated&yA)>0}}function bA(t,e){return!e||!t?t:t.bind(e)}class jf{constructor(e,n,r){this.name=e,this.init=bA(n.init,r),this.apply=bA(n.apply,r)}}const RH=[new jf("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new jf("selection",{init(t,e){return t.selection||Oe.atStart(e.doc)},apply(t){return t.selection}}),new jf("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new jf("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Fv{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=RH.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new jf(r.key,r.spec.state,r))})}}class Aa{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let o=this.config.plugins[r];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),o=null;for(;;){let i=!1;for(let s=0;s<this.config.plugins.length;s++){let a=this.config.plugins[s];if(a.spec.appendTransaction){let l=o?o[s].n:0,c=o?o[s].state:this,u=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(u&&r.filterTransaction(u,s)){if(u.setMeta("appendedTransaction",e),!o){o=[];for(let d=0;d<this.config.plugins.length;d++)o.push(d<s?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),i=!0}o&&(o[s]={state:r,n:n.length})}}if(!i)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Aa(this.config),r=this.config.fields;for(let o=0;o<r.length;o++){let i=r[o];n[i.name]=i.apply(e,this[i.name],this,n)}return n}get tr(){return new NH(this)}static create(e){let n=new Fv(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Aa(n);for(let o=0;o<n.fields.length;o++)r[n.fields[o].name]=n.fields[o].init(e,r);return r}reconfigure(e){let n=new Fv(this.schema,e.plugins),r=n.fields,o=new Aa(n);for(let i=0;i<r.length;i++){let s=r[i].name;o[s]=this.hasOwnProperty(s)?this[s]:r[i].init(e,o)}return o}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let o=e[r],i=o.spec.state;i&&i.toJSON&&(n[r]=i.toJSON.call(o,this[o.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let o=new Fv(e.schema,e.plugins),i=new Aa(o);return o.fields.forEach(s=>{if(s.name=="doc")i.doc=Hr.fromJSON(e.schema,n.doc);else if(s.name=="selection")i.selection=Oe.fromJSON(i.doc,n.selection);else if(s.name=="storedMarks")n.storedMarks&&(i.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==s.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){i[s.name]=c.fromJSON.call(l,e,n[a],i);return}}i[s.name]=s.init(e,i)}}),i}}function $5(t,e,n){for(let r in t){let o=t[r];o instanceof Function?o=o.bind(e):r=="handleDOMEvents"&&(o=$5(o,e,{})),n[r]=o}return n}class ht{constructor(e){this.spec=e,this.props={},e.props&&$5(e.props,this,this.props),this.key=e.key?e.key.key:S5("plugin")}getState(e){return e[this.key]}}const Bv=Object.create(null);function S5(t){return t in Bv?t+"$"+ ++Bv[t]:(Bv[t]=0,t+"$")}class vt{constructor(e="key"){this.key=S5(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const E5=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function PH(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const OH=(t,e,n)=>{let r=PH(t,n);if(!r)return!1;let o=C5(r);if(!o){let s=r.blockRange(),a=s&&Ad(s);return a==null?!1:(e&&e(t.tr.lift(s,a).scrollIntoView()),!0)}let i=o.nodeBefore;if(!i.type.spec.isolating&&N5(t,o,e))return!0;if(r.parent.content.size==0&&(td(i,"end")||Me.isSelectable(i))){let s=k$(t.doc,r.before(),r.after(),Se.empty);if(s&&s.slice.size<s.to-s.from){if(e){let a=t.tr.step(s);a.setSelection(td(i,"end")?Oe.findFrom(a.doc.resolve(a.mapping.map(o.pos,-1)),-1):Me.create(a.doc,o.pos-i.nodeSize)),e(a.scrollIntoView())}return!0}}return i.isAtom&&o.depth==r.depth-1?(e&&e(t.tr.delete(o.pos-i.nodeSize,o.pos).scrollIntoView()),!0):!1};function td(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const IH=(t,e,n)=>{let{$head:r,empty:o}=t.selection,i=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;i=C5(r)}let s=i&&i.nodeBefore;return!s||!Me.isSelectable(s)?!1:(e&&e(t.tr.setSelection(Me.create(t.doc,i.pos-s.nodeSize)).scrollIntoView()),!0)};function C5(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function DH(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const MH=(t,e,n)=>{let r=DH(t,n);if(!r)return!1;let o=T5(r);if(!o)return!1;let i=o.nodeAfter;if(N5(t,o,e))return!0;if(r.parent.content.size==0&&(td(i,"start")||Me.isSelectable(i))){let s=k$(t.doc,r.before(),r.after(),Se.empty);if(s&&s.slice.size<s.to-s.from){if(e){let a=t.tr.step(s);a.setSelection(td(i,"start")?Oe.findFrom(a.doc.resolve(a.mapping.map(o.pos)),1):Me.create(a.doc,a.mapping.map(o.pos))),e(a.scrollIntoView())}return!0}}return i.isAtom&&o.depth==r.depth-1?(e&&e(t.tr.delete(o.pos,o.pos+i.nodeSize).scrollIntoView()),!0):!1},LH=(t,e,n)=>{let{$head:r,empty:o}=t.selection,i=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;i=T5(r)}let s=i&&i.nodeAfter;return!s||!Me.isSelectable(s)?!1:(e&&e(t.tr.setSelection(Me.create(t.doc,i.pos)).scrollIntoView()),!0)};function T5(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const FH=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function S$(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const A5=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let o=n.node(-1),i=n.indexAfter(-1),s=S$(o.contentMatchAt(i));if(!s||!o.canReplaceWith(i,i,s))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,s.createAndFill());l.setSelection(Oe.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},BH=(t,e)=>{let n=t.selection,{$from:r,$to:o}=n;if(n instanceof io||r.parent.inlineContent||o.parent.inlineContent)return!1;let i=S$(o.parent.contentMatchAt(o.indexAfter()));if(!i||!i.isTextblock)return!1;if(e){let s=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,a=t.tr.insert(s,i.createAndFill());a.setSelection(We.create(a.doc,s+1)),e(a.scrollIntoView())}return!0},jH=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let i=n.before();if(tp(t.doc,i))return e&&e(t.tr.split(i).scrollIntoView()),!0}let r=n.blockRange(),o=r&&Ad(r);return o==null?!1:(e&&e(t.tr.lift(r,o).scrollIntoView()),!0)};function zH(t){return(e,n)=>{let{$from:r,$to:o}=e.selection;if(e.selection instanceof Me&&e.selection.node.isBlock)return!r.parentOffset||!tp(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.parent.isBlock)return!1;if(n){let i=o.parentOffset==o.parent.content.size,s=e.tr;(e.selection instanceof We||e.selection instanceof io)&&s.deleteSelection();let a=r.depth==0?null:S$(r.node(-1).contentMatchAt(r.indexAfter(-1))),l=t&&t(o.parent,i),c=l?[l]:i&&a?[{type:a}]:void 0,u=tp(s.doc,s.mapping.map(r.pos),1,c);if(!c&&!u&&tp(s.doc,s.mapping.map(r.pos),1,a?[{type:a}]:void 0)&&(a&&(c=[{type:a}]),u=!0),u&&(s.split(s.mapping.map(r.pos),1,c),!i&&!r.parentOffset&&r.parent.type!=a)){let d=s.mapping.map(r.before()),f=s.doc.resolve(d);a&&r.node(-1).canReplaceWith(f.index(),f.index()+1,a)&&s.setNodeMarkup(s.mapping.map(r.before()),a)}n(s.scrollIntoView())}return!0}}const qH=zH(),WH=(t,e)=>(e&&e(t.tr.setSelection(new io(t.doc))),!0);function UH(t,e,n){let r=e.nodeBefore,o=e.nodeAfter,i=e.index();return!r||!o||!r.type.compatibleContent(o.type)?!1:!r.content.size&&e.parent.canReplace(i-1,i)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(i,i+1)||!(o.isTextblock||Nd(t.doc,e.pos))?!1:(n&&n(t.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0)}function N5(t,e,n){let r=e.nodeBefore,o=e.nodeAfter,i,s;if(r.type.spec.isolating||o.type.spec.isolating)return!1;if(UH(t,e,n))return!0;let a=e.parent.canReplace(e.index(),e.index()+1);if(a&&(i=(s=r.contentMatchAt(r.childCount)).findWrapping(o.type))&&s.matchType(i[0]||o.type).validEnd){if(n){let d=e.pos+o.nodeSize,f=te.empty;for(let y=i.length-1;y>=0;y--)f=te.from(i[y].create(null,f));f=te.from(r.copy(f));let p=t.tr.step(new Tn(e.pos-1,d,e.pos,d,new Se(f,1,0),i.length,!0)),h=d+2*i.length;Nd(p.doc,h)&&p.join(h),n(p.scrollIntoView())}return!0}let l=Oe.findFrom(e,1),c=l&&l.$from.blockRange(l.$to),u=c&&Ad(c);if(u!=null&&u>=e.depth)return n&&n(t.tr.lift(c,u).scrollIntoView()),!0;if(a&&td(o,"start",!0)&&td(r,"end")){let d=r,f=[];for(;f.push(d),!d.isTextblock;)d=d.lastChild;let p=o,h=1;for(;!p.isTextblock;p=p.firstChild)h++;if(d.canReplace(d.childCount,d.childCount,p.content)){if(n){let y=te.empty;for(let w=f.length-1;w>=0;w--)y=te.from(f[w].copy(y));let m=t.tr.step(new Tn(e.pos-f.length,e.pos+o.nodeSize,e.pos+h,e.pos+o.nodeSize-h,new Se(y,f.length,0),0,!0));n(m.scrollIntoView())}return!0}}return!1}function R5(t){return function(e,n){let r=e.selection,o=t<0?r.$from:r.$to,i=o.depth;for(;o.node(i).isInline;){if(!i)return!1;i--}return o.node(i).isTextblock?(n&&n(e.tr.setSelection(We.create(e.doc,t<0?o.start(i):o.end(i)))),!0):!1}}const VH=R5(-1),HH=R5(1);function KH(t,e=null){return function(n,r){let{$from:o,$to:i}=n.selection,s=o.blockRange(i),a=s&&r0(s,t,e);return a?(r&&r(n.tr.wrap(s,a).scrollIntoView()),!0):!1}}function nd(t,e=null){return function(n,r){let o=!1;for(let i=0;i<n.selection.ranges.length&&!o;i++){let{$from:{pos:s},$to:{pos:a}}=n.selection.ranges[i];n.doc.nodesBetween(s,a,(l,c)=>{if(o)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)o=!0;else{let u=n.doc.resolve(c),d=u.index();o=u.parent.canReplaceWith(d,d+1,t)}})}if(!o)return!1;if(r){let i=n.tr;for(let s=0;s<n.selection.ranges.length;s++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[s];i.setBlockType(a,l,t,e)}r(i.scrollIntoView())}return!0}}function GH(t,e,n){for(let r=0;r<e.length;r++){let{$from:o,$to:i}=e[r],s=o.depth==0?t.inlineContent&&t.type.allowsMarkType(n):!1;if(t.nodesBetween(o.pos,i.pos,a=>{if(s)return!1;s=a.inlineContent&&a.type.allowsMarkType(n)}),s)return!0}return!1}function Ks(t,e=null){return function(n,r){let{empty:o,$cursor:i,ranges:s}=n.selection;if(o&&!i||!GH(n.doc,s,t))return!1;if(r)if(i)t.isInSet(n.storedMarks||i.marks())?r(n.tr.removeStoredMark(t)):r(n.tr.addStoredMark(t.create(e)));else{let a=!1,l=n.tr;for(let c=0;!a&&c<s.length;c++){let{$from:u,$to:d}=s[c];a=n.doc.rangeHasMark(u.pos,d.pos,t)}for(let c=0;c<s.length;c++){let{$from:u,$to:d}=s[c];if(a)l.removeMark(u.pos,d.pos,t);else{let f=u.pos,p=d.pos,h=u.nodeAfter,y=d.nodeBefore,m=h&&h.isText?/^\s*/.exec(h.text)[0].length:0,w=y&&y.isText?/\s*$/.exec(y.text)[0].length:0;f+m<p&&(f+=m,p-=w),l.addMark(f,p,t.create(e))}}r(l.scrollIntoView())}return!0}}function ZH(t,e){return n=>{if(!n.isGeneric)return t(n);let r=[];for(let i=0;i<n.mapping.maps.length;i++){let s=n.mapping.maps[i];for(let a=0;a<r.length;a++)r[a]=s.map(r[a]);s.forEach((a,l,c,u)=>r.push(c,u))}let o=[];for(let i=0;i<r.length;i+=2){let s=r[i],a=r[i+1],l=n.doc.resolve(s),c=l.sharedDepth(a),u=l.node(c);for(let d=l.indexAfter(c),f=l.after(c+1);f<=a;++d){let p=u.maybeChild(d);if(!p)break;if(d&&o.indexOf(f)==-1){let h=u.child(d-1);h.type==p.type&&e(h,p)&&o.push(f)}f+=p.nodeSize}}o.sort((i,s)=>i-s);for(let i=o.length-1;i>=0;i--)Nd(n.doc,o[i])&&n.join(o[i]);t(n)}}function YH(t,e){let n=Array.isArray(e)?r=>e.indexOf(r.type.name)>-1:e;return(r,o,i)=>t(r,o&&ZH(o,n),i)}function uo(...t){return function(e,n,r){for(let o=0;o<t.length;o++)if(t[o](e,n,r))return!0;return!1}}let jv=uo(E5,OH,IH),vA=uo(E5,MH,LH);const ws={Enter:uo(FH,BH,jH,qH),"Mod-Enter":A5,Backspace:jv,"Mod-Backspace":jv,"Shift-Backspace":jv,Delete:vA,"Mod-Delete":vA,"Mod-a":WH},P5={"Ctrl-h":ws.Backspace,"Alt-Backspace":ws["Mod-Backspace"],"Ctrl-d":ws.Delete,"Ctrl-Alt-Backspace":ws["Mod-Delete"],"Alt-Delete":ws["Mod-Delete"],"Alt-d":ws["Mod-Delete"],"Ctrl-a":VH,"Ctrl-e":HH};for(let t in ws)P5[t]=ws[t];const JH=typeof navigator!="undefined"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os!="undefined"&&os.platform?os.platform()=="darwin":!1,XH=JH?P5:ws;function QH(t={}){return new ht({view(e){return new eK(e,t)}})}class eK{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(o=>{let i=s=>{this[o](s)};return e.dom.addEventListener(o,i),{name:o,handler:i}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r;if(n){let a=e.nodeBefore,l=e.nodeAfter;if(a||l){let c=this.editorView.nodeDOM(this.cursorPos-(a?a.nodeSize:0));if(c){let u=c.getBoundingClientRect(),d=a?u.bottom:u.top;a&&l&&(d=(d+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:u.left,right:u.right,top:d-this.width/2,bottom:d+this.width/2}}}}if(!r){let a=this.editorView.coordsAtPos(this.cursorPos);r={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}let o=this.editorView.dom.offsetParent;this.element||(this.element=o.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let i,s;if(!o||o==document.body&&getComputedStyle(o).position=="static")i=-pageXOffset,s=-pageYOffset;else{let a=o.getBoundingClientRect();i=a.left-o.scrollLeft,s=a.top-o.scrollTop}this.element.style.left=r.left-i+"px",this.element.style.top=r.top-s+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),o=r&&r.type.spec.disableDropCursor,i=typeof o=="function"?o(this.editorView,n,e):o;if(n&&!i){let s=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=y5(this.editorView.state.doc,s,this.editorView.dragging.slice);a!=null&&(s=a)}this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}var Qa={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},I1={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},tK=typeof navigator!="undefined"&&/Mac/.test(navigator.platform),nK=typeof navigator!="undefined"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Yn=0;Yn<10;Yn++)Qa[48+Yn]=Qa[96+Yn]=String(Yn);for(var Yn=1;Yn<=24;Yn++)Qa[Yn+111]="F"+Yn;for(var Yn=65;Yn<=90;Yn++)Qa[Yn]=String.fromCharCode(Yn+32),I1[Yn]=String.fromCharCode(Yn);for(var zv in Qa)I1.hasOwnProperty(zv)||(I1[zv]=Qa[zv]);function rK(t){var e=tK&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||nK&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?I1:Qa)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const oK=typeof navigator!="undefined"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function iK(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,o,i,s;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)?$/i.test(l))i=!0;else if(/^mod$/i.test(l))oK?s=!0:o=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),o&&(n="Ctrl-"+n),s&&(n="Meta-"+n),i&&(n="Shift-"+n),n}function sK(t){let e=Object.create(null);for(let n in t)e[iK(n)]=t[n];return e}function qv(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function en(t){return new ht({props:{handleKeyDown:E$(t)}})}function E$(t){let e=sK(t);return function(n,r){let o=rK(r),i,s=e[qv(o,r)];if(s&&s(n.state,n.dispatch,n))return!0;if(o.length==1&&o!=" "){if(r.shiftKey){let a=e[qv(o,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.shiftKey||r.altKey||r.metaKey||o.charCodeAt(0)>127)&&(i=Qa[r.keyCode])&&i!=o){let a=e[qv(i,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}const $r=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Hp=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let wA=null;const vs=function(t,e,n){let r=wA||(wA=document.createRange());return r.setEnd(t,n==null?t.nodeValue.length:n),r.setStart(t,e||0),r},gc=function(t,e,n,r){return n&&(_A(t,e,n,r,-1)||_A(t,e,n,r,1))},aK=/^(img|br|input|textarea|hr)$/i;function _A(t,e,n,r,o){for(;;){if(t==n&&e==r)return!0;if(e==(o<0?0:Bi(t))){let i=t.parentNode;if(!i||i.nodeType!=1||C$(t)||aK.test(t.nodeName)||t.contentEditable=="false")return!1;e=$r(t)+(o<0?0:1),t=i}else if(t.nodeType==1){if(t=t.childNodes[e+(o<0?-1:0)],t.contentEditable=="false")return!1;e=o<0?Bi(t):0}else return!1}}function Bi(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function lK(t,e,n){for(let r=e==0,o=e==Bi(t);r||o;){if(t==n)return!0;let i=$r(t);if(t=t.parentNode,!t)return!1;r=r&&i==0,o=o&&i==Bi(t)}}function C$(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const i0=function(t){return t.focusNode&&gc(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Ll(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function cK(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function uK(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:r.offset}}catch(r){}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:r.startOffset}}}const ts=typeof navigator!="undefined"?navigator:null,xA=typeof document!="undefined"?document:null,hl=ts&&ts.userAgent||"",nx=/Edge\/(\d+)/.exec(hl),O5=/MSIE \d/.exec(hl),rx=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(hl),Kr=!!(O5||rx||nx),Da=O5?document.documentMode:rx?+rx[1]:nx?+nx[1]:0,fi=!Kr&&/gecko\/(\d+)/i.test(hl);fi&&+(/Firefox\/(\d+)/.exec(hl)||[0,0])[1];const ox=!Kr&&/Chrome\/(\d+)/.exec(hl),dr=!!ox,dK=ox?+ox[1]:0,Pr=!Kr&&!!ts&&/Apple Computer/.test(ts.vendor),rd=Pr&&(/Mobile\/\w+/.test(hl)||!!ts&&ts.maxTouchPoints>2),ko=rd||(ts?/Mac/.test(ts.platform):!1),fK=ts?/Win/.test(ts.platform):!1,ti=/Android \d/.test(hl),jh=!!xA&&"webkitFontSmoothing"in xA.documentElement.style,pK=jh?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function hK(t){return{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function ms(t,e){return typeof t=="number"?t:t[e]}function mK(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function kA(t,e,n){let r=t.someProp("scrollThreshold")||0,o=t.someProp("scrollMargin")||5,i=t.dom.ownerDocument;for(let s=n||t.dom;s;s=Hp(s)){if(s.nodeType!=1)continue;let a=s,l=a==i.body,c=l?hK(i):mK(a),u=0,d=0;if(e.top<c.top+ms(r,"top")?d=-(c.top-e.top+ms(o,"top")):e.bottom>c.bottom-ms(r,"bottom")&&(d=e.bottom-e.top>c.bottom-c.top?e.top+ms(o,"top")-c.top:e.bottom-c.bottom+ms(o,"bottom")),e.left<c.left+ms(r,"left")?u=-(c.left-e.left+ms(o,"left")):e.right>c.right-ms(r,"right")&&(u=e.right-c.right+ms(o,"right")),u||d)if(l)i.defaultView.scrollBy(u,d);else{let f=a.scrollLeft,p=a.scrollTop;d&&(a.scrollTop+=d),u&&(a.scrollLeft+=u);let h=a.scrollLeft-f,y=a.scrollTop-p;e={left:e.left-h,top:e.top-y,right:e.right-h,bottom:e.bottom-y}}if(l||/^(fixed|sticky)$/.test(getComputedStyle(s).position))break}}function gK(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,o;for(let i=(e.left+e.right)/2,s=n+1;s<Math.min(innerHeight,e.bottom);s+=5){let a=t.root.elementFromPoint(i,s);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,o=l.top;break}}return{refDOM:r,refTop:o,stack:I5(t.dom)}}function I5(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Hp(r));return e}function yK({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;D5(n,r==0?0:r-e)}function D5(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:o,left:i}=t[n];r.scrollTop!=o+e&&(r.scrollTop=o+e),r.scrollLeft!=i&&(r.scrollLeft=i)}}let Kc=null;function bK(t){if(t.setActive)return t.setActive();if(Kc)return t.focus(Kc);let e=I5(t);t.focus(Kc==null?{get preventScroll(){return Kc={preventScroll:!0},!0}}:void 0),Kc||(Kc=!1,D5(e,0))}function M5(t,e){let n,r=2e8,o,i=0,s=e.top,a=e.top,l,c;for(let u=t.firstChild,d=0;u;u=u.nextSibling,d++){let f;if(u.nodeType==1)f=u.getClientRects();else if(u.nodeType==3)f=vs(u).getClientRects();else continue;for(let p=0;p<f.length;p++){let h=f[p];if(h.top<=s&&h.bottom>=a){s=Math.max(h.bottom,s),a=Math.min(h.top,a);let y=h.left>e.left?h.left-e.left:h.right<e.left?e.left-h.right:0;if(y<r){n=u,r=y,o=y&&n.nodeType==3?{left:h.right<e.left?h.right:h.left,top:e.top}:e,u.nodeType==1&&y&&(i=d+(e.left>=(h.left+h.right)/2?1:0));continue}}else h.top>e.top&&!l&&h.left<=e.left&&h.right>=e.left&&(l=u,c={left:Math.max(h.left,Math.min(h.right,e.left)),top:h.top});!n&&(e.left>=h.right&&e.top>=h.top||e.left>=h.left&&e.top>=h.bottom)&&(i=d+1)}}return!n&&l&&(n=l,o=c,r=0),n&&n.nodeType==3?vK(n,o):!n||r&&n.nodeType==1?{node:t,offset:i}:M5(n,o)}function vK(t,e){let n=t.nodeValue.length,r=document.createRange();for(let o=0;o<n;o++){r.setEnd(t,o+1),r.setStart(t,o);let i=da(r,1);if(i.top!=i.bottom&&T$(e,i))return{node:t,offset:o+(e.left>=(i.left+i.right)/2?1:0)}}return{node:t,offset:0}}function T$(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function wK(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function _K(t,e,n){let{node:r,offset:o}=M5(e,n),i=-1;if(r.nodeType==1&&!r.firstChild){let s=r.getBoundingClientRect();i=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return t.docView.posFromDOM(r,o,i)}function xK(t,e,n,r){let o=-1;for(let i=e,s=!1;i!=t.dom;){let a=t.docView.nearestDesc(i,!0);if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent&&!s||!a.contentDOM)){let l=a.dom.getBoundingClientRect();if(a.node.isBlock&&a.parent&&!s&&(s=!0,l.left>r.left||l.top>r.top?o=a.posBefore:(l.right<r.left||l.bottom<r.top)&&(o=a.posAfter)),!a.contentDOM&&o<0&&!a.node.isText)return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter}i=a.dom.parentNode}return o>-1?o:t.docView.posFromDOM(e,n,-1)}function L5(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let o=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),i=o;;){let s=t.childNodes[i];if(s.nodeType==1){let a=s.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(T$(e,c))return L5(s,e,c)}}if((i=(i+1)%r)==o)break}return t}function kK(t,e){let n=t.dom.ownerDocument,r,o=0,i=uK(n,e.left,e.top);i&&({node:r,offset:o}=i);let s=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!s||!t.dom.contains(s.nodeType!=1?s.parentNode:s)){let c=t.dom.getBoundingClientRect();if(!T$(e,c)||(s=L5(t.dom,e,c),!s))return null}if(Pr)for(let c=s;r&&c;c=Hp(c))c.draggable&&(r=void 0);if(s=wK(s,e),r){if(fi&&r.nodeType==1&&(o=Math.min(o,r.childNodes.length),o<r.childNodes.length)){let u=r.childNodes[o],d;u.nodeName=="IMG"&&(d=u.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&o++}let c;jh&&o&&r.nodeType==1&&(c=r.childNodes[o-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&o--,r==t.dom&&o==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(o==0||r.nodeType!=1||r.childNodes[o-1].nodeName!="BR")&&(a=xK(t,r,o,e))}a==null&&(a=_K(t,s,e));let l=t.docView.nearestDesc(s,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function $A(t){return t.top<t.bottom||t.left<t.right}function da(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if($A(r))return r}return Array.prototype.find.call(n,$A)||t.getBoundingClientRect()}const $K=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function F5(t,e,n){let{node:r,offset:o,atom:i}=t.docView.domFromPos(e,n<0?-1:1),s=jh||fi;if(r.nodeType==3)if(s&&($K.test(r.nodeValue)||(n<0?!o:o==r.nodeValue.length))){let l=da(vs(r,o,o),n);if(fi&&o&&/\s/.test(r.nodeValue[o-1])&&o<r.nodeValue.length){let c=da(vs(r,o-1,o-1),-1);if(c.top==l.top){let u=da(vs(r,o,o+1),-1);if(u.top!=l.top)return pf(u,u.left<c.left)}}return l}else{let l=o,c=o,u=n<0?1:-1;return n<0&&!o?(c++,u=-1):n>=0&&o==r.nodeValue.length?(l--,u=1):n<0?l--:c++,pf(da(vs(r,l,c),u),u<0)}if(!t.state.doc.resolve(e-(i||0)).parent.inlineContent){if(i==null&&o&&(n<0||o==Bi(r))){let l=r.childNodes[o-1];if(l.nodeType==1)return Wv(l.getBoundingClientRect(),!1)}if(i==null&&o<Bi(r)){let l=r.childNodes[o];if(l.nodeType==1)return Wv(l.getBoundingClientRect(),!0)}return Wv(r.getBoundingClientRect(),n>=0)}if(i==null&&o&&(n<0||o==Bi(r))){let l=r.childNodes[o-1],c=l.nodeType==3?vs(l,Bi(l)-(s?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return pf(da(c,1),!1)}if(i==null&&o<Bi(r)){let l=r.childNodes[o];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?vs(l,0,s?0:1):l.nodeType==1?l:null:null;if(c)return pf(da(c,-1),!0)}return pf(da(r.nodeType==3?vs(r):r,-n),n>=0)}function pf(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function Wv(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function B5(t,e,n){let r=t.state,o=t.root.activeElement;r!=e&&t.updateState(e),o!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),o!=t.dom&&o&&o.focus()}}function SK(t,e,n){let r=e.selection,o=n=="up"?r.$from:r.$to;return B5(t,e,()=>{let{node:i}=t.docView.domFromPos(o.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(i,!0);if(!a)break;if(a.node.isBlock){i=a.contentDOM||a.dom;break}i=a.dom.parentNode}let s=F5(t,o.pos,1);for(let a=i.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=vs(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(n=="up"?s.top-u.top>(u.bottom-s.top)*2:u.bottom-s.bottom>(s.bottom-u.top)*2))return!1}}return!0})}const EK=/[\u0590-\u08ac]/;function CK(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let o=r.parentOffset,i=!o,s=o==r.parent.content.size,a=t.domSelection();return!EK.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?i:s:B5(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:d}=t.domSelectionRange(),f=a.caretBidiLevel;a.modify("move",n,"character");let p=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:h,focusOffset:y}=t.domSelectionRange(),m=h&&!p.contains(h.nodeType==1?h:h.parentNode)||l==h&&c==y;try{a.collapse(u,d),l&&(l!=u||c!=d)&&a.extend&&a.extend(l,c)}catch(w){}return f!=null&&(a.caretBidiLevel=f),m})}let SA=null,EA=null,CA=!1;function TK(t,e,n){return SA==e&&EA==n?CA:(SA=e,EA=n,CA=n=="up"||n=="down"?SK(t,e,n):CK(t,e,n))}const Ro=0,TA=1,jl=2,ns=3;class zh{constructor(e,n,r,o){this.parent=e,this.children=n,this.dom=r,this.contentDOM=o,this.dirty=Ro,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let o=this.children[n];if(o==e)return r;r+=o.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let i,s;if(e==this.contentDOM)i=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.previousSibling}for(;i&&!((s=i.pmViewDesc)&&s.parent==this);)i=i.previousSibling;return i?this.posBeforeChild(s)+s.size:this.posAtStart}else{let i,s;if(e==this.contentDOM)i=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&!((s=i.pmViewDesc)&&s.parent==this);)i=i.nextSibling;return i?this.posBeforeChild(s):this.posAtEnd}let o;if(e==this.dom&&this.contentDOM)o=n>$r(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))o=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let i=e;;i=i.parentNode){if(i==this.dom){o=!1;break}if(i.previousSibling)break}if(o==null&&n==e.childNodes.length)for(let i=e;;i=i.parentNode){if(i==this.dom){o=!0;break}if(i.nextSibling)break}}return(o==null?r>0:o)?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,o=e;o;o=o.parentNode){let i=this.getDesc(o),s;if(i&&(!n||i.node))if(r&&(s=i.nodeDOM)&&!(s.nodeType==1?s.contains(e.nodeType==1?e:e.parentNode):s==e))r=!1;else return i}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let o=e;o;o=o.parentNode){let i=this.getDesc(o);if(i)return i.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let o=this.children[n],i=r+o.size;if(r==e&&i!=r){for(;!o.border&&o.children.length;)o=o.children[0];return o}if(e<i)return o.descAt(e-r-o.border);r=i}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,o=0;for(let i=0;r<this.children.length;r++){let s=this.children[r],a=i+s.size;if(a>e||s instanceof z5){o=e-i;break}i=a}if(o)return this.children[r].domFromPos(o-this.children[r].border,n);for(let i;r&&!(i=this.children[r-1]).size&&i instanceof j5&&i.side>=0;r--);if(n<=0){let i,s=!0;for(;i=r?this.children[r-1]:null,!(!i||i.dom.parentNode==this.contentDOM);r--,s=!1);return i&&n&&s&&!i.border&&!i.domAtom?i.domFromPos(i.size,n):{node:this.contentDOM,offset:i?$r(i.dom)+1:0}}else{let i,s=!0;for(;i=r<this.children.length?this.children[r]:null,!(!i||i.dom.parentNode==this.contentDOM);r++,s=!1);return i&&s&&!i.border&&!i.domAtom?i.domFromPos(0,n):{node:this.contentDOM,offset:i?$r(i.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let o=-1,i=-1;for(let s=r,a=0;;a++){let l=this.children[a],c=s+l.size;if(o==-1&&e<=c){let u=s+l.border;if(e>=u&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,u);e=s;for(let d=a;d>0;d--){let f=this.children[d-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){o=$r(f.dom)+1;break}e-=f.size}o==-1&&(o=0)}if(o>-1&&(c>n||a==this.children.length-1)){n=c;for(let u=a+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){i=$r(d.dom);break}n+=d.size}i==-1&&(i=this.contentDOM.childNodes.length);break}s=c}return{node:this.contentDOM,from:e,to:n,fromOffset:o,toOffset:i}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,o=!1){let i=Math.min(e,n),s=Math.max(e,n);for(let f=0,p=0;f<this.children.length;f++){let h=this.children[f],y=p+h.size;if(i>p&&s<y)return h.setSelection(e-p-h.border,n-p-h.border,r,o);p=y}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),c=r.getSelection(),u=!1;if((fi||Pr)&&e==n){let{node:f,offset:p}=a;if(f.nodeType==3){if(u=!!(p&&f.nodeValue[p-1]==`
`),u&&p==f.nodeValue.length)for(let h=f,y;h;h=h.parentNode){if(y=h.nextSibling){y.nodeName=="BR"&&(a=l={node:y.parentNode,offset:$r(y)+1});break}let m=h.pmViewDesc;if(m&&m.node&&m.node.isBlock)break}}else{let h=f.childNodes[p-1];u=h&&(h.nodeName=="BR"||h.contentEditable=="false")}}if(fi&&c.focusNode&&c.focusNode!=l.node&&c.focusNode.nodeType==1){let f=c.focusNode.childNodes[c.focusOffset];f&&f.contentEditable=="false"&&(o=!0)}if(!(o||u&&Pr)&&gc(a.node,a.offset,c.anchorNode,c.anchorOffset)&&gc(l.node,l.offset,c.focusNode,c.focusOffset))return;let d=!1;if((c.extend||e==n)&&!u){c.collapse(a.node,a.offset);try{e!=n&&c.extend(l.node,l.offset),d=!0}catch(f){}}if(!d){if(e>n){let p=a;a=l,l=p}let f=document.createRange();f.setEnd(l.node,l.offset),f.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(f)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,o=0;o<this.children.length;o++){let i=this.children[o],s=r+i.size;if(r==s?e<=s&&n>=r:e<s&&n>r){let a=r+i.border,l=s-i.border;if(e>=a&&n<=l){this.dirty=e==r||n==s?jl:TA,e==a&&n==l&&(i.contentLost||i.dom.parentNode!=this.contentDOM)?i.dirty=ns:i.markDirty(e-a,n-a);return}else i.dirty=i.dom==i.contentDOM&&i.dom.parentNode==this.contentDOM&&!i.children.length?jl:ns}r=s}this.dirty=jl}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?jl:TA;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class j5 extends zh{constructor(e,n,r,o){let i,s=n.type.toDOM;if(typeof s=="function"&&(s=s(r,()=>{if(!i)return o;if(i.parent)return i.parent.posBeforeChild(i)})),!n.type.spec.raw){if(s.nodeType!=1){let a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(e,[],s,null),this.widget=n,this.widget=n,i=this}matchesWidget(e){return this.dirty==Ro&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class AK extends zh{constructor(e,n,r,o){super(e,[],n,null),this.textDOM=r,this.text=o}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class yc extends zh{constructor(e,n,r,o){super(e,[],r,o),this.mark=n}static create(e,n,r,o){let i=o.nodeViews[n.type.name],s=i&&i(n,o,r);return(!s||!s.dom)&&(s=Vr.renderSpec(document,n.type.spec.toDOM(n,r))),new yc(e,n,s.dom,s.contentDOM||s.dom)}parseRule(){return this.dirty&ns||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=ns&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=Ro){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Ro}}slice(e,n,r){let o=yc.create(this.parent,this.mark,!0,r),i=this.children,s=this.size;n<s&&(i=ax(i,n,s,r)),e>0&&(i=ax(i,0,e,r));for(let a=0;a<i.length;a++)i[a].parent=o;return o.children=i,o}}class Ma extends zh{constructor(e,n,r,o,i,s,a,l,c){super(e,[],i,s),this.node=n,this.outerDeco=r,this.innerDeco=o,this.nodeDOM=a}static create(e,n,r,o,i,s){let a=i.nodeViews[n.type.name],l,c=a&&a(n,i,()=>{if(!l)return s;if(l.parent)return l.parent.posBeforeChild(l)},r,o),u=c&&c.dom,d=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:d}=Vr.renderSpec(document,n.type.spec.toDOM(n)));!d&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let f=u;return u=U5(u,r,n),c?l=new NK(e,n,r,o,u,d||null,f,c,i,s+1):n.isText?new s0(e,n,r,o,u,f,i):new Ma(e,n,r,o,u,d||null,f,i,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>te.empty)}return e}matchesNode(e,n,r){return this.dirty==Ro&&e.eq(this.node)&&sx(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,o=n,i=e.composing?this.localCompositionInfo(e,n):null,s=i&&i.pos>-1?i:null,a=i&&i.pos<0,l=new PK(this,s&&s.node,e);DK(this.node,this.innerDeco,(c,u,d)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!d&&l.syncToMarks(u==this.node.childCount?Et.none:this.node.child(u).marks,r,e),l.placeWidget(c,e,o)},(c,u,d,f)=>{l.syncToMarks(c.marks,r,e);let p;l.findNodeMatch(c,u,d,f)||a&&e.state.selection.from>o&&e.state.selection.to<o+c.nodeSize&&(p=l.findIndexWithChild(i.node))>-1&&l.updateNodeAt(c,u,d,p,e)||l.updateNextNode(c,u,d,e,f,o)||l.addNode(c,u,d,e,o),o+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==jl)&&(s&&this.protectLocalComposition(e,s),q5(this.contentDOM,this.children,e),rd&&MK(this.dom))}localCompositionInfo(e,n){let{from:r,to:o}=e.state.selection;if(!(e.state.selection instanceof We)||r<n||o>n+this.node.content.size)return null;let i=e.domSelectionRange(),s=LK(i.focusNode,i.focusOffset);if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let a=s.nodeValue,l=FK(this.node.content,a,r-n,o-n);return l<0?null:{node:s,pos:l,text:a}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:o}){if(this.getDesc(n))return;let i=n;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let s=new AK(this,i,n,o);e.input.compositionNodes.push(s),this.children=ax(this.children,r,r+o.length,e,s)}update(e,n,r,o){return this.dirty==ns||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,o),!0)}updateInner(e,n,r,o){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(o,this.posAtStart),this.dirty=Ro}updateOuterDeco(e){if(sx(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=W5(this.dom,this.nodeDOM,ix(this.outerDeco,this.node,n),ix(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function AA(t,e,n,r,o){U5(r,e,t);let i=new Ma(void 0,t,e,n,r,r,r,o,0);return i.contentDOM&&i.updateChildren(o,0),i}class s0 extends Ma{constructor(e,n,r,o,i,s,a){super(e,n,r,o,i,null,s,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,o){return this.dirty==ns||this.dirty!=Ro&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Ro||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,o.trackWrites==this.nodeDOM&&(o.trackWrites=null)),this.node=e,this.dirty=Ro,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let o=this.node.cut(e,n),i=document.createTextNode(o.text);return new s0(this.parent,o,this.outerDeco,this.innerDeco,i,i,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=ns)}get domAtom(){return!1}}class z5 extends zh{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Ro&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class NK extends Ma{constructor(e,n,r,o,i,s,a,l,c,u){super(e,n,r,o,i,s,a,c,u),this.spec=l}update(e,n,r,o){if(this.dirty==ns)return!1;if(this.spec.update){let i=this.spec.update(e,n,r);return i&&this.updateInner(e,n,r,o),i}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,o)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,o){this.spec.setSelection?this.spec.setSelection(e,n,r):super.setSelection(e,n,r,o)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function q5(t,e,n){let r=t.firstChild,o=!1;for(let i=0;i<e.length;i++){let s=e[i],a=s.dom;if(a.parentNode==t){for(;a!=r;)r=NA(r),o=!0;r=r.nextSibling}else o=!0,t.insertBefore(a,r);if(s instanceof yc){let l=r?r.previousSibling:t.lastChild;q5(s.contentDOM,s.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=NA(r),o=!0;o&&n.trackWrites==t&&(n.trackWrites=null)}const np=function(t){t&&(this.nodeName=t)};np.prototype=Object.create(null);const zl=[new np];function ix(t,e,n){if(t.length==0)return zl;let r=n?zl[0]:new np,o=[r];for(let i=0;i<t.length;i++){let s=t[i].type.attrs;if(s){s.nodeName&&o.push(r=new np(s.nodeName));for(let a in s){let l=s[a];l!=null&&(n&&o.length==1&&o.push(r=new np(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return o}function W5(t,e,n,r){if(n==zl&&r==zl)return e;let o=e;for(let i=0;i<r.length;i++){let s=r[i],a=n[i];if(i){let l;a&&a.nodeName==s.nodeName&&o!=t&&(l=o.parentNode)&&l.nodeName.toLowerCase()==s.nodeName||(l=document.createElement(s.nodeName),l.pmIsDeco=!0,l.appendChild(o),a=zl[0]),o=l}RK(o,a||zl[0],s)}return o}function RK(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],o=n.class?n.class.split(" ").filter(Boolean):[];for(let i=0;i<r.length;i++)o.indexOf(r[i])==-1&&t.classList.remove(r[i]);for(let i=0;i<o.length;i++)r.indexOf(o[i])==-1&&t.classList.add(o[i]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,o;for(;o=r.exec(e.style);)t.style.removeProperty(o[1])}n.style&&(t.style.cssText+=n.style)}}function U5(t,e,n){return W5(t,t,zl,ix(e,n,t.nodeType!=1))}function sx(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function NA(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class PK{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=OK(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let o=0,i=this.stack.length>>1,s=Math.min(i,e.length);for(;o<s&&(o==i-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&e[o].type.spec.spanning!==!1;)o++;for(;o<i;)this.destroyRest(),this.top.dirty=Ro,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[i])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=yc.create(this.top,e[i],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,i++}}findNodeMatch(e,n,r,o){let i=-1,s;if(o>=this.preMatch.index&&(s=this.preMatch.matches[o-this.preMatch.index]).parent==this.top&&s.matchesNode(e,n,r))i=this.top.children.indexOf(s,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){i=a;break}}return i<0?!1:(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(e,n,r,o,i){let s=this.top.children[o];return s.dirty==ns&&s.dom==s.contentDOM&&(s.dirty=jl),s.update(e,n,r,i)?(this.destroyBetween(this.index,o),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let o=this.index;o<this.top.children.length;o++)if(this.top.children[o]==r)return o}return-1}e=n}}updateNextNode(e,n,r,o,i,s){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof Ma){let c=this.preMatch.matched.get(l);if(c!=null&&c!=i)return!1;let u=l.dom,d,f=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=ns&&sx(n,l.outerDeco));if(!f&&l.update(e,n,r,o))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!f&&(d=this.recreateWrapper(l,e,n,r,o,s)))return this.top.children[this.index]=d,d.contentDOM&&(d.dirty=jl,d.updateChildren(o,s+1),d.dirty=Ro),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,o,i,s){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content))return null;let a=Ma.create(this.top,n,r,o,i,s);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,n,r,o,i){let s=Ma.create(this.top,e,n,r,o,i);s.contentDOM&&s.updateChildren(o,i+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(e,n,r){let o=this.index<this.top.children.length?this.top.children[this.index]:null;if(o&&o.matchesWidget(e)&&(e==o.widget||!o.widget.type.toDOM.parentNode))this.index++;else{let i=new j5(this.top,e,n,r);this.top.children.splice(this.index++,0,i),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof yc;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof s0)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Pr||dr)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let o=new z5(this.top,[],r,null);n!=this.top?n.children.push(o):n.children.splice(this.index++,0,o),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function OK(t,e){let n=e,r=n.children.length,o=t.childCount,i=new Map,s=[];e:for(;o>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof yc)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(o-1))break;--o,i.set(a,o),s.push(a)}}return{index:o,matched:i,matches:s.reverse()}}function IK(t,e){return t.type.side-e.type.side}function DK(t,e,n,r){let o=e.locals(t),i=0;if(o.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,o,e.forChild(i,u),c),i+=u.nodeSize}return}let s=0,a=[],l=null;for(let c=0;;){let u,d;for(;s<o.length&&o[s].to==i;){let m=o[s++];m.widget&&(u?(d||(d=[u])).push(m):u=m)}if(u)if(d){d.sort(IK);for(let m=0;m<d.length;m++)n(d[m],c,!!l)}else n(u,c,!!l);let f,p;if(l)p=-1,f=l,l=null;else if(c<t.childCount)p=c,f=t.child(c++);else break;for(let m=0;m<a.length;m++)a[m].to<=i&&a.splice(m--,1);for(;s<o.length&&o[s].from<=i&&o[s].to>i;)a.push(o[s++]);let h=i+f.nodeSize;if(f.isText){let m=h;s<o.length&&o[s].from<m&&(m=o[s].from);for(let w=0;w<a.length;w++)a[w].to<m&&(m=a[w].to);m<h&&(l=f.cut(m-i),f=f.cut(0,m-i),h=m,p=-1)}let y=f.isInline&&!f.isLeaf?a.filter(m=>!m.inline):a.slice();r(f,y,e.forChild(i,f),p),i=h}}function MK(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function LK(t,e){for(;;){if(t.nodeType==3)return t;if(t.nodeType==1&&e>0){if(t.childNodes.length>e&&t.childNodes[e].nodeType==3)return t.childNodes[e];t=t.childNodes[e-1],e=Bi(t)}else if(t.nodeType==1&&e<t.childNodes.length)t=t.childNodes[e],e=0;else return null}}function FK(t,e,n,r){for(let o=0,i=0;o<t.childCount&&i<=r;){let s=t.child(o++),a=i;if(i+=s.nodeSize,!s.isText)continue;let l=s.text;for(;o<t.childCount;){let c=t.child(o++);if(i+=c.nodeSize,!c.isText)break;l+=c.text}if(i>=n){if(i>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=n)return a+c;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function ax(t,e,n,r,o){let i=[];for(let s=0,a=0;s<t.length;s++){let l=t[s],c=a,u=a+=l.size;c>=n||u<=e?i.push(l):(c<e&&i.push(l.slice(0,e-c,r)),o&&(i.push(o),o=void 0),u>n&&i.push(l.slice(n-c,l.size,r)))}return i}function A$(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let o=t.docView.nearestDesc(n.focusNode),i=o&&o.size==0,s=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let a=r.resolve(s),l,c;if(i0(n)){for(l=a;o&&!o.node;)o=o.parent;let u=o.node;if(o&&u.isAtom&&Me.isSelectable(u)&&o.parent&&!(u.isInline&&lK(n.focusNode,n.focusOffset,o.dom))){let d=o.posBefore;c=new Me(s==d?a:r.resolve(d))}}else{let u=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(u<0)return null;l=r.resolve(u)}if(!c){let u=e=="pointer"||t.state.selection.head<a.pos&&!i?1:-1;c=N$(t,l,a,u)}return c}function V5(t){return t.editable?t.hasFocus():K5(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Is(t,e=!1){let n=t.state.selection;if(H5(t,n),!!V5(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&dr){let r=t.domSelectionRange(),o=t.domObserver.currentSelection;if(r.anchorNode&&o.anchorNode&&gc(r.anchorNode,r.anchorOffset,o.anchorNode,o.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)jK(t);else{let{anchor:r,head:o}=n,i,s;RA&&!(n instanceof We)&&(n.$from.parent.inlineContent||(i=PA(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(s=PA(t,n.to))),t.docView.setSelection(r,o,t.root,e),RA&&(i&&OA(i),s&&OA(s)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&BK(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const RA=Pr||dr&&dK<63;function PA(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),o=r<n.childNodes.length?n.childNodes[r]:null,i=r?n.childNodes[r-1]:null;if(Pr&&o&&o.contentEditable=="false")return Uv(o);if((!o||o.contentEditable=="false")&&(!i||i.contentEditable=="false")){if(o)return Uv(o);if(i)return Uv(i)}}function Uv(t){return t.contentEditable="true",Pr&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function OA(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function BK(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,o=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=o)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!V5(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function jK(t){let e=t.domSelection(),n=document.createRange(),r=t.cursorWrapper.dom,o=r.nodeName=="IMG";o?n.setEnd(r.parentNode,$r(r)+1):n.setEnd(r,0),n.collapse(!1),e.removeAllRanges(),e.addRange(n),!o&&!t.state.selection.visible&&Kr&&Da<=11&&(r.disabled=!0,r.disabled=!1)}function H5(t,e){if(e instanceof Me){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(IA(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else IA(t)}function IA(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function N$(t,e,n,r){return t.someProp("createSelectionBetween",o=>o(t,e,n))||We.between(e,n,r)}function DA(t){return t.editable&&!t.hasFocus()?!1:K5(t)}function K5(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch(n){return!1}}function zK(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return gc(e.node,e.offset,n.anchorNode,n.anchorOffset)}function lx(t,e){let{$anchor:n,$head:r}=t.selection,o=e>0?n.max(r):n.min(r),i=o.parent.inlineContent?o.depth?t.doc.resolve(e>0?o.after():o.before()):null:o;return i&&Oe.findFrom(i,e)}function ma(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function MA(t,e,n){let r=t.state.selection;if(r instanceof We)if(n.indexOf("s")>-1){let{$head:o}=r,i=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let s=t.state.doc.resolve(o.pos+i.nodeSize*(e<0?-1:1));return ma(t,new We(r.$anchor,s))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let o=lx(t.state,e);return o&&o instanceof Me?ma(t,o):!1}else if(!(ko&&n.indexOf("m")>-1)){let o=r.$head,i=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter,s;if(!i||i.isText)return!1;let a=e<0?o.pos-i.nodeSize:o.pos;return i.isAtom||(s=t.docView.descAt(a))&&!s.contentDOM?Me.isSelectable(i)?ma(t,new Me(e<0?t.state.doc.resolve(o.pos-i.nodeSize):o)):jh?ma(t,new We(t.state.doc.resolve(e<0?a:a+i.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Me&&r.node.isInline)return ma(t,new We(e>0?r.$to:r.$from));{let o=lx(t.state,e);return o?ma(t,o):!1}}}function D1(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function rp(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Gc(t,e){return e<0?qK(t):WK(t)}function qK(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let o,i,s=!1;for(fi&&n.nodeType==1&&r<D1(n)&&rp(n.childNodes[r],-1)&&(s=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(rp(a,-1))o=n,i=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(G5(n))break;{let a=n.previousSibling;for(;a&&rp(a,-1);)o=n.parentNode,i=$r(a),a=a.previousSibling;if(a)n=a,r=D1(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}s?cx(t,n,r):o&&cx(t,o,i)}function WK(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let o=D1(n),i,s;for(;;)if(r<o){if(n.nodeType!=1)break;let a=n.childNodes[r];if(rp(a,1))i=n,s=++r;else break}else{if(G5(n))break;{let a=n.nextSibling;for(;a&&rp(a,1);)i=a.parentNode,s=$r(a)+1,a=a.nextSibling;if(a)n=a,r=0,o=D1(n);else{if(n=n.parentNode,n==t.dom)break;r=o=0}}}i&&cx(t,i,s)}function G5(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function UK(t,e){for(;t&&e==t.childNodes.length&&!C$(t);)e=$r(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function VK(t,e){for(;t&&!e&&!C$(t);)e=$r(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function cx(t,e,n){if(e.nodeType!=3){let i,s;(s=UK(e,n))?(e=s,n=0):(i=VK(e,n))&&(e=i,n=i.nodeValue.length)}let r=t.domSelection();if(i0(r)){let i=document.createRange();i.setEnd(e,n),i.setStart(e,n),r.removeAllRanges(),r.addRange(i)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:o}=t;setTimeout(()=>{t.state==o&&Is(t)},50)}function LA(t,e){let n=t.state.doc.resolve(e);if(!(dr||fK)&&n.parent.inlineContent){let o=t.coordsAtPos(e);if(e>n.start()){let i=t.coordsAtPos(e-1),s=(i.top+i.bottom)/2;if(s>o.top&&s<o.bottom&&Math.abs(i.left-o.left)>1)return i.left<o.left?"ltr":"rtl"}if(e<n.end()){let i=t.coordsAtPos(e+1),s=(i.top+i.bottom)/2;if(s>o.top&&s<o.bottom&&Math.abs(i.left-o.left)>1)return i.left>o.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function FA(t,e,n){let r=t.state.selection;if(r instanceof We&&!r.empty||n.indexOf("s")>-1||ko&&n.indexOf("m")>-1)return!1;let{$from:o,$to:i}=r;if(!o.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let s=lx(t.state,e);if(s&&s instanceof Me)return ma(t,s)}if(!o.parent.inlineContent){let s=e<0?o:i,a=r instanceof io?Oe.near(s,e):Oe.findFrom(s,e);return a?ma(t,a):!1}return!1}function BA(t,e){if(!(t.state.selection instanceof We))return!0;let{$head:n,$anchor:r,empty:o}=t.state.selection;if(!n.sameParent(r))return!0;if(!o)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let i=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(i&&!i.isText){let s=t.state.tr;return e<0?s.delete(n.pos-i.nodeSize,n.pos):s.delete(n.pos,n.pos+i.nodeSize),t.dispatch(s),!0}return!1}function jA(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function HK(t){if(!Pr||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;jA(t,r,"true"),setTimeout(()=>jA(t,r,"false"),20)}return!1}function KK(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function GK(t,e){let n=e.keyCode,r=KK(e);if(n==8||ko&&n==72&&r=="c")return BA(t,-1)||Gc(t,-1);if(n==46&&!e.shiftKey||ko&&n==68&&r=="c")return BA(t,1)||Gc(t,1);if(n==13||n==27)return!0;if(n==37||ko&&n==66&&r=="c"){let o=n==37?LA(t,t.state.selection.from)=="ltr"?-1:1:-1;return MA(t,o,r)||Gc(t,o)}else if(n==39||ko&&n==70&&r=="c"){let o=n==39?LA(t,t.state.selection.from)=="ltr"?1:-1:1;return MA(t,o,r)||Gc(t,o)}else{if(n==38||ko&&n==80&&r=="c")return FA(t,-1,r)||Gc(t,-1);if(n==40||ko&&n==78&&r=="c")return HK(t)||FA(t,1,r)||Gc(t,1);if(r==(ko?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function Z5(t,e){t.someProp("transformCopied",p=>{e=p(e,t)});let n=[],{content:r,openStart:o,openEnd:i}=e;for(;o>1&&i>1&&r.childCount==1&&r.firstChild.childCount==1;){o--,i--;let p=r.firstChild;n.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),r=p.content}let s=t.someProp("clipboardSerializer")||Vr.fromSchema(t.state.schema),a=tM(),l=a.createElement("div");l.appendChild(s.serializeFragment(r,{document:a}));let c=l.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=eM[c.nodeName.toLowerCase()]);){for(let p=u.length-1;p>=0;p--){let h=a.createElement(u[p]);for(;l.firstChild;)h.appendChild(l.firstChild);l.appendChild(h),d++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${o} ${i}${d?` -${d}`:""} ${JSON.stringify(n)}`);let f=t.someProp("clipboardTextSerializer",p=>p(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:f}}function Y5(t,e,n,r,o){let i=o.parent.type.spec.code,s,a;if(!n&&!e)return null;let l=e&&(r||i||!n);if(l){if(t.someProp("transformPastedText",f=>{e=f(e,i||r,t)}),i)return e?new Se(te.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):Se.empty;let d=t.someProp("clipboardTextParser",f=>f(e,o,r,t));if(d)a=d;else{let f=o.marks(),{schema:p}=t.state,h=Vr.fromSchema(p);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(y=>{let m=s.appendChild(document.createElement("p"));y&&m.appendChild(h.serializeNode(p.text(y,f)))})}}else t.someProp("transformPastedHTML",d=>{n=d(n,t)}),s=JK(n),jh&&XK(s);let c=s&&s.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let f=s.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;s=f}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||Xu.fromSchema(t.state.schema)).parseSlice(s,{preserveWhitespace:!!(l||u),context:o,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!ZK.test(f.parentNode.nodeName)?{ignore:!0}:null}})),u)a=QK(zA(a,+u[1],+u[2]),u[4]);else if(a=Se.maxOpen(YK(a.content,o),!0),a.openStart||a.openEnd){let d=0,f=0;for(let p=a.content.firstChild;d<a.openStart&&!p.type.spec.isolating;d++,p=p.firstChild);for(let p=a.content.lastChild;f<a.openEnd&&!p.type.spec.isolating;f++,p=p.lastChild);a=zA(a,d,f)}return t.someProp("transformPasted",d=>{a=d(a,t)}),a}const ZK=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function YK(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let o=e.node(n).contentMatchAt(e.index(n)),i,s=[];if(t.forEach(a=>{if(!s)return;let l=o.findWrapping(a.type),c;if(!l)return s=null;if(c=s.length&&i.length&&X5(l,i,a,s[s.length-1],0))s[s.length-1]=c;else{s.length&&(s[s.length-1]=Q5(s[s.length-1],i.length));let u=J5(a,l);s.push(u),o=o.matchType(u.type),i=l}}),s)return te.from(s)}return t}function J5(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,te.from(t));return t}function X5(t,e,n,r,o){if(o<t.length&&o<e.length&&t[o]==e[o]){let i=X5(t,e,n,r.lastChild,o+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));if(r.contentMatchAt(r.childCount).matchType(o==t.length-1?n.type:t[o+1]))return r.copy(r.content.append(te.from(J5(n,t,o+1))))}}function Q5(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,Q5(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(te.empty,!0);return t.copy(n.append(r))}function ux(t,e,n,r,o,i){let s=e<0?t.firstChild:t.lastChild,a=s.content;return t.childCount>1&&(i=0),o<r-1&&(a=ux(a,e,n,r,o+1,i)),o>=n&&(a=e<0?s.contentMatchAt(0).fillBefore(a,i<=o).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(te.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,s.copy(a))}function zA(t,e,n){return e<t.openStart&&(t=new Se(ux(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new Se(ux(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const eM={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let qA=null;function tM(){return qA||(qA=document.implementation.createHTMLDocument("title"))}function JK(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=tM().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),o;if((o=r&&eM[r[1].toLowerCase()])&&(t=o.map(i=>"<"+i+">").join("")+t+o.map(i=>"</"+i+">").reverse().join("")),n.innerHTML=t,o)for(let i=0;i<o.length;i++)n=n.querySelector(o[i])||n;return n}function XK(t){let e=t.querySelectorAll(dr?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function QK(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch(a){return t}let{content:o,openStart:i,openEnd:s}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;o=te.from(l.create(r[a+1],o)),i++,s++}return new Se(o,i,s)}const Or={},Ir={},eG={touchstart:!0,touchmove:!0};class tG{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function nG(t){for(let e in Or){let n=Or[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{oG(t,r)&&!R$(t,r)&&(t.editable||!(r.type in Ir))&&n(t,r)},eG[e]?{passive:!0}:void 0)}Pr&&t.dom.addEventListener("input",()=>null),dx(t)}function Na(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function rG(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function dx(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>R$(t,r))})}function R$(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function oG(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function iG(t,e){!R$(t,e)&&Or[e.type]&&(t.editable||!(e.type in Ir))&&Or[e.type](t,e)}Ir.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!rM(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(ti&&dr&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),rd&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",o=>o(t,Ll(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||GK(t,n)?n.preventDefault():Na(t,"key")};Ir.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Ir.keypress=(t,e)=>{let n=e;if(rM(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||ko&&n.metaKey)return;if(t.someProp("handleKeyPress",o=>o(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof We)||!r.$from.sameParent(r.$to)){let o=String.fromCharCode(n.charCode);!/[\r\n]/.test(o)&&!t.someProp("handleTextInput",i=>i(t,r.$from.pos,r.$to.pos,o))&&t.dispatch(t.state.tr.insertText(o).scrollIntoView()),n.preventDefault()}};function a0(t){return{left:t.clientX,top:t.clientY}}function sG(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function P$(t,e,n,r,o){if(r==-1)return!1;let i=t.state.doc.resolve(r);for(let s=i.depth+1;s>0;s--)if(t.someProp(e,a=>s>i.depth?a(t,n,i.nodeAfter,i.before(s),o,!0):a(t,n,i.node(s),i.before(s),o,!1)))return!0;return!1}function Cu(t,e,n){t.focused||t.focus();let r=t.state.tr.setSelection(e);n=="pointer"&&r.setMeta("pointer",!0),t.dispatch(r)}function aG(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&Me.isSelectable(r)?(Cu(t,new Me(n),"pointer"),!0):!1}function lG(t,e){if(e==-1)return!1;let n=t.state.selection,r,o;n instanceof Me&&(r=n.node);let i=t.state.doc.resolve(e);for(let s=i.depth+1;s>0;s--){let a=s>i.depth?i.nodeAfter:i.node(s);if(Me.isSelectable(a)){r&&n.$from.depth>0&&s>=n.$from.depth&&i.before(n.$from.depth+1)==n.$from.pos?o=i.before(n.$from.depth):o=i.before(s);break}}return o!=null?(Cu(t,Me.create(t.state.doc,o),"pointer"),!0):!1}function cG(t,e,n,r,o){return P$(t,"handleClickOn",e,n,r)||t.someProp("handleClick",i=>i(t,e,r))||(o?lG(t,n):aG(t,n))}function uG(t,e,n,r){return P$(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",o=>o(t,e,r))}function dG(t,e,n,r){return P$(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",o=>o(t,e,r))||fG(t,n,r)}function fG(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Cu(t,We.create(r,0,r.content.size),"pointer"),!0):!1;let o=r.resolve(e);for(let i=o.depth+1;i>0;i--){let s=i>o.depth?o.nodeAfter:o.node(i),a=o.before(i);if(s.inlineContent)Cu(t,We.create(r,a+1,a+1+s.content.size),"pointer");else if(Me.isSelectable(s))Cu(t,Me.create(r,a),"pointer");else continue;return!0}}function O$(t){return M1(t)}const nM=ko?"metaKey":"ctrlKey";Or.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=O$(t),o=Date.now(),i="singleClick";o-t.input.lastClick.time<500&&sG(n,t.input.lastClick)&&!n[nM]&&(t.input.lastClick.type=="singleClick"?i="doubleClick":t.input.lastClick.type=="doubleClick"&&(i="tripleClick")),t.input.lastClick={time:o,x:n.clientX,y:n.clientY,type:i};let s=t.posAtCoords(a0(n));s&&(i=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new pG(t,s,n,!!r)):(i=="doubleClick"?uG:dG)(t,s.pos,s.inside,n)?n.preventDefault():Na(t,"pointer"))};class pG{constructor(e,n,r,o){this.view=e,this.pos=n,this.event=r,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[nM],this.allowDefault=r.shiftKey;let i,s;if(n.inside>-1)i=e.state.doc.nodeAt(n.inside),s=n.inside;else{let u=e.state.doc.resolve(n.pos);i=u.parent,s=u.depth?u.before():0}const a=o?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l?l.dom:null;let{selection:c}=e.state;(r.button==0&&i.type.spec.draggable&&i.type.spec.selectable!==!1||c instanceof Me&&c.from<=s&&c.to>s)&&(this.mightDrag={node:i,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&fi&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Na(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Is(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(a0(e))),this.updateAllowDefault(e),this.allowDefault||!n?Na(this.view,"pointer"):cG(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Pr&&this.mightDrag&&!this.mightDrag.node.isAtom||dr&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Cu(this.view,Oe.near(this.view.state.doc.resolve(n.pos)),"pointer"),e.preventDefault()):Na(this.view,"pointer")}move(e){this.updateAllowDefault(e),Na(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Or.touchstart=t=>{t.input.lastTouch=Date.now(),O$(t),Na(t,"pointer")};Or.touchmove=t=>{t.input.lastTouch=Date.now(),Na(t,"pointer")};Or.contextmenu=t=>O$(t);function rM(t,e){return t.composing?!0:Pr&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const hG=ti?5e3:-1;Ir.compositionstart=Ir.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),M1(t,!0),t.markCursor=null;else if(M1(t),fi&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let o=r.focusNode,i=r.focusOffset;o&&o.nodeType==1&&i!=0;){let s=i<0?o.lastChild:o.childNodes[i-1];if(!s)break;if(s.nodeType==3){t.domSelection().collapse(s,s.nodeValue.length);break}else o=s,i=-1}}t.input.composing=!0}oM(t,hG)};Ir.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,oM(t,20))};function oM(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>M1(t),e))}function iM(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=mG());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function mG(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function M1(t,e=!1){if(!(ti&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),iM(t),e||t.docView&&t.docView.dirty){let n=A$(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):t.updateState(t.state),!0}return!1}}function gG(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),o=document.createRange();o.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const od=Kr&&Da<15||rd&&pK<604;Or.copy=Ir.cut=(t,e)=>{let n=e,r=t.state.selection,o=n.type=="cut";if(r.empty)return;let i=od?null:n.clipboardData,s=r.content(),{dom:a,text:l}=Z5(t,s);i?(n.preventDefault(),i.clearData(),i.setData("text/html",a.innerHTML),i.setData("text/plain",l)):gG(t,a),o&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function yG(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function bG(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let o=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Kp(t,r.value,null,o,e):Kp(t,r.textContent,r.innerHTML,o,e)},50)}function Kp(t,e,n,r,o){let i=Y5(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,o,i||Se.empty)))return!0;if(!i)return!1;let s=yG(i),a=s?t.state.tr.replaceSelectionWith(s,r):t.state.tr.replaceSelection(i);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}Ir.paste=(t,e)=>{let n=e;if(t.composing&&!ti)return;let r=od?null:n.clipboardData,o=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Kp(t,r.getData("text/plain"),r.getData("text/html"),o,n)?n.preventDefault():bG(t,n)};class vG{constructor(e,n){this.slice=e,this.move=n}}const sM=ko?"altKey":"ctrlKey";Or.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let o=t.state.selection,i=o.empty?null:t.posAtCoords(a0(n));if(!(i&&i.pos>=o.from&&i.pos<=(o instanceof Me?o.to-1:o.to))){if(r&&r.mightDrag)t.dispatch(t.state.tr.setSelection(Me.create(t.state.doc,r.mightDrag.pos)));else if(n.target&&n.target.nodeType==1){let c=t.docView.nearestDesc(n.target,!0);c&&c.node.type.spec.draggable&&c!=t.docView&&t.dispatch(t.state.tr.setSelection(Me.create(t.state.doc,c.posBefore)))}}let s=t.state.selection.content(),{dom:a,text:l}=Z5(t,s);n.dataTransfer.clearData(),n.dataTransfer.setData(od?"Text":"text/html",a.innerHTML),n.dataTransfer.effectAllowed="copyMove",od||n.dataTransfer.setData("text/plain",l),t.dragging=new vG(s,!n[sM])};Or.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Ir.dragover=Ir.dragenter=(t,e)=>e.preventDefault();Ir.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let o=t.posAtCoords(a0(n));if(!o)return;let i=t.state.doc.resolve(o.pos),s=r&&r.slice;s?t.someProp("transformPasted",h=>{s=h(s,t)}):s=Y5(t,n.dataTransfer.getData(od?"Text":"text/plain"),od?null:n.dataTransfer.getData("text/html"),!1,i);let a=!!(r&&!n[sM]);if(t.someProp("handleDrop",h=>h(t,n,s||Se.empty,a))){n.preventDefault();return}if(!s)return;n.preventDefault();let l=s?y5(t.state.doc,i.pos,s):i.pos;l==null&&(l=i.pos);let c=t.state.tr;a&&c.deleteSelection();let u=c.mapping.map(l),d=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,f=c.doc;if(d?c.replaceRangeWith(u,u,s.content.firstChild):c.replaceRange(u,u,s),c.doc.eq(f))return;let p=c.doc.resolve(u);if(d&&Me.isSelectable(s.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(s.content.firstChild))c.setSelection(new Me(p));else{let h=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((y,m,w,x)=>h=x),c.setSelection(N$(t,p,c.doc.resolve(h)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};Or.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Is(t)},20))};Or.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Or.beforeinput=(t,e)=>{if(dr&&ti&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",i=>i(t,Ll(8,"Backspace")))))return;let{$cursor:o}=t.state.selection;o&&o.pos>0&&t.dispatch(t.state.tr.delete(o.pos-1,o.pos).scrollIntoView())},50)}};for(let t in Ir)Or[t]=Ir[t];function Gp(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class L1{constructor(e,n){this.toDOM=e,this.spec=n||oc,this.side=this.spec.side||0}map(e,n,r,o){let{pos:i,deleted:s}=e.mapResult(n.from+o,this.side<0?-1:1);return s?null:new pr(i-r,i-r,this)}valid(){return!0}eq(e){return this==e||e instanceof L1&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Gp(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class La{constructor(e,n){this.attrs=e,this.spec=n||oc}map(e,n,r,o){let i=e.map(n.from+o,this.spec.inclusiveStart?-1:1)-r,s=e.map(n.to+o,this.spec.inclusiveEnd?1:-1)-r;return i>=s?null:new pr(i,s,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof La&&Gp(this.attrs,e.attrs)&&Gp(this.spec,e.spec)}static is(e){return e.type instanceof La}destroy(){}}class I${constructor(e,n){this.attrs=e,this.spec=n||oc}map(e,n,r,o){let i=e.mapResult(n.from+o,1);if(i.deleted)return null;let s=e.mapResult(n.to+o,-1);return s.deleted||s.pos<=i.pos?null:new pr(i.pos-r,s.pos-r,this)}valid(e,n){let{index:r,offset:o}=e.content.findIndex(n.from),i;return o==n.from&&!(i=e.child(r)).isText&&o+i.nodeSize==n.to}eq(e){return this==e||e instanceof I$&&Gp(this.attrs,e.attrs)&&Gp(this.spec,e.spec)}destroy(){}}class pr{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new pr(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new pr(e,e,new L1(n,r))}static inline(e,n,r,o){return new pr(e,n,new La(r,o))}static node(e,n,r,o){return new pr(e,n,new I$(r,o))}get spec(){return this.type.spec}get inline(){return this.type instanceof La}get widget(){return this.type instanceof L1}}const su=[],oc={};class Xt{constructor(e,n){this.local=e.length?e:su,this.children=n.length?n:su}static create(e,n){return n.length?F1(n,e,0,oc):ar}find(e,n,r){let o=[];return this.findInner(e==null?0:e,n==null?1e9:n,o,0,r),o}findInner(e,n,r,o,i){for(let s=0;s<this.local.length;s++){let a=this.local[s];a.from<=n&&a.to>=e&&(!i||i(a.spec))&&r.push(a.copy(a.from+o,a.to+o))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<n&&this.children[s+1]>e){let a=this.children[s]+1;this.children[s+2].findInner(e-a,n-a,r,o+a,i)}}map(e,n,r){return this==ar||e.maps.length==0?this:this.mapInner(e,n,0,0,r||oc)}mapInner(e,n,r,o,i){let s;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,o);l&&l.type.valid(n,l)?(s||(s=[])).push(l):i.onRemove&&i.onRemove(this.local[a].spec)}return this.children.length?wG(this.children,s||[],e,n,r,o,i):s?new Xt(s.sort(ic),su):ar}add(e,n){return n.length?this==ar?Xt.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let o,i=0;e.forEach((a,l)=>{let c=l+r,u;if(u=lM(n,a,c)){for(o||(o=this.children.slice());i<o.length&&o[i]<l;)i+=3;o[i]==l?o[i+2]=o[i+2].addInner(a,u,c+1):o.splice(i,0,l,l+a.nodeSize,F1(u,a,c+1,oc)),i+=3}});let s=aM(i?cM(n):n,-r);for(let a=0;a<s.length;a++)s[a].type.valid(e,s[a])||s.splice(a--,1);return new Xt(s.length?this.local.concat(s).sort(ic):this.local,o||this.children)}remove(e){return e.length==0||this==ar?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,o=this.local;for(let i=0;i<r.length;i+=3){let s,a=r[i]+n,l=r[i+1]+n;for(let u=0,d;u<e.length;u++)(d=e[u])&&d.from>a&&d.to<l&&(e[u]=null,(s||(s=[])).push(d));if(!s)continue;r==this.children&&(r=this.children.slice());let c=r[i+2].removeInner(s,a+1);c!=ar?r[i+2]=c:(r.splice(i,3),i-=3)}if(o.length){for(let i=0,s;i<e.length;i++)if(s=e[i])for(let a=0;a<o.length;a++)o[a].eq(s,n)&&(o==this.local&&(o=this.local.slice()),o.splice(a--,1))}return r==this.children&&o==this.local?this:o.length||r.length?new Xt(o,r):ar}forChild(e,n){if(this==ar)return this;if(n.isLeaf)return Xt.empty;let r,o;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let i=e+1,s=i+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<s&&l.to>i&&l.type instanceof La){let c=Math.max(i,l.from)-i,u=Math.min(s,l.to)-i;c<u&&(o||(o=[])).push(l.copy(c,u))}}if(o){let a=new Xt(o.sort(ic),su);return r?new _a([a,r]):a}return r||ar}eq(e){if(this==e)return!0;if(!(e instanceof Xt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return D$(this.localsInner(e))}localsInner(e){if(this==ar)return su;if(e.inlineContent||!this.local.some(La.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof La||n.push(this.local[r]);return n}}Xt.empty=new Xt([],[]);Xt.removeOverlap=D$;const ar=Xt.empty;class _a{constructor(e){this.members=e}map(e,n){const r=this.members.map(o=>o.map(e,n,oc));return _a.from(r)}forChild(e,n){if(n.isLeaf)return Xt.empty;let r=[];for(let o=0;o<this.members.length;o++){let i=this.members[o].forChild(e,n);i!=ar&&(i instanceof _a?r=r.concat(i.members):r.push(i))}return _a.from(r)}eq(e){if(!(e instanceof _a)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let o=0;o<this.members.length;o++){let i=this.members[o].localsInner(e);if(i.length)if(!n)n=i;else{r&&(n=n.slice(),r=!1);for(let s=0;s<i.length;s++)n.push(i[s])}}return n?D$(r?n:n.sort(ic)):su}static from(e){switch(e.length){case 0:return ar;case 1:return e[0];default:return new _a(e.every(n=>n instanceof Xt)?e:e.reduce((n,r)=>n.concat(r instanceof Xt?r:r.members),[]))}}}function wG(t,e,n,r,o,i,s){let a=t.slice();for(let c=0,u=i;c<n.maps.length;c++){let d=0;n.maps[c].forEach((f,p,h,y)=>{let m=y-h-(p-f);for(let w=0;w<a.length;w+=3){let x=a[w+1];if(x<0||f>x+u-d)continue;let $=a[w]+u-d;p>=$?a[w+1]=f<=$?-2:-1:h>=o&&m&&(a[w]+=m,a[w+1]+=m)}d+=m}),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=n.map(t[c]+i),d=u-o;if(d<0||d>=r.content.size){l=!0;continue}let f=n.map(t[c+1]+i,-1),p=f-o,{index:h,offset:y}=r.content.findIndex(d),m=r.maybeChild(h);if(m&&y==d&&y+m.nodeSize==p){let w=a[c+2].mapInner(n,m,u+1,t[c]+i+1,s);w!=ar?(a[c]=d,a[c+1]=p,a[c+2]=w):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=_G(a,t,e,n,o,i,s),u=F1(c,r,0,s);e=u.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,f=0;d<u.children.length;d+=3){let p=u.children[d];for(;f<a.length&&a[f]<p;)f+=3;a.splice(f,0,u.children[d],u.children[d+1],u.children[d+2])}}return new Xt(e.sort(ic),a)}function aM(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let o=t[r];n.push(new pr(o.from+e,o.to+e,o.type))}return n}function _G(t,e,n,r,o,i,s){function a(l,c){for(let u=0;u<l.local.length;u++){let d=l.local[u].map(r,o,c);d?n.push(d):s.onRemove&&s.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+i+1);return n}function lM(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,o=null;for(let i=0,s;i<t.length;i++)(s=t[i])&&s.from>n&&s.to<r&&((o||(o=[])).push(s),t[i]=null);return o}function cM(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function F1(t,e,n,r){let o=[],i=!1;e.forEach((a,l)=>{let c=lM(t,a,l+n);if(c){i=!0;let u=F1(c,a,n+l+1,r);u!=ar&&o.push(l,l+a.nodeSize,u)}});let s=aM(i?cM(t):t,-n).sort(ic);for(let a=0;a<s.length;a++)s[a].type.valid(e,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||o.length?new Xt(s,o):ar}function ic(t,e){return t.from-e.from||t.to-e.to}function D$(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let o=n+1;o<e.length;o++){let i=e[o];if(i.from==r.from){i.to!=r.to&&(e==t&&(e=t.slice()),e[o]=i.copy(i.from,r.to),WA(e,o+1,i.copy(r.to,i.to)));continue}else{i.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,i.from),WA(e,o,r.copy(i.from,r.to)));break}}}return e}function WA(t,e,n){for(;e<t.length&&ic(n,t[e])>0;)e++;t.splice(e,0,n)}function Vv(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=ar&&e.push(r)}),t.cursorWrapper&&e.push(Xt.create(t.state.doc,[t.cursorWrapper.deco])),_a.from(e)}const xG={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},kG=Kr&&Da<=11;class $G{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class SG{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new $G,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let o=0;o<r.length;o++)this.queue.push(r[o]);Kr&&Da<=11&&r.some(o=>o.type=="childList"&&o.removedNodes.length||o.type=="characterData"&&o.oldValue.length>o.target.nodeValue.length)?this.flushSoon():this.flush()}),kG&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,xG)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(DA(this.view)){if(this.suppressingSelectionUpdates)return Is(this.view);if(Kr&&Da<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&gc(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let i=e.focusNode;i;i=Hp(i))n.add(i);for(let i=e.anchorNode;i;i=Hp(i))if(n.has(i)){r=i;break}let o=r&&this.view.docView.nearestDesc(r);if(o&&o.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),o=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&DA(e)&&!this.ignoreSelectionChange(r),i=-1,s=-1,a=!1,l=[];if(e.editable)for(let u=0;u<n.length;u++){let d=this.registerMutation(n[u],l);d&&(i=i<0?d.from:Math.min(d.from,i),s=s<0?d.to:Math.max(d.to,s),d.typeOver&&(a=!0))}if(fi&&l.length>1){let u=l.filter(d=>d.nodeName=="BR");if(u.length==2){let d=u[0],f=u[1];d.parentNode&&d.parentNode.parentNode==f.parentNode?f.remove():d.remove()}}let c=null;i<0&&o&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&i0(r)&&(c=A$(e))&&c.eq(Oe.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Is(e),this.currentSelection.set(r),e.scrollToSelection()):(i>-1||o)&&(i>-1&&(e.docView.markDirty(i,s),EG(e)),this.handleDOMChange(i,s,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Is(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++)n.push(e.addedNodes[u]);if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let o=e.previousSibling,i=e.nextSibling;if(Kr&&Da<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:d,nextSibling:f}=e.addedNodes[u];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(o=d),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(i=f)}let s=o&&o.parentNode==e.target?$r(o)+1:0,a=r.localPosFromDOM(e.target,s,-1),l=i&&i.parentNode==e.target?$r(i):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}}let UA=new WeakMap,VA=!1;function EG(t){if(!UA.has(t)&&(UA.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=fi,VA)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),VA=!0}}function CG(t){let e;function n(l){l.preventDefault(),l.stopImmediatePropagation(),e=l.getTargetRanges()[0]}t.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",n,!0);let r=e.startContainer,o=e.startOffset,i=e.endContainer,s=e.endOffset,a=t.domAtPos(t.state.selection.anchor);return gc(a.node,a.offset,i,s)&&([r,o,i,s]=[i,s,r,o]),{anchorNode:r,anchorOffset:o,focusNode:i,focusOffset:s}}function TG(t,e,n){let{node:r,fromOffset:o,toOffset:i,from:s,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),c,u=l.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],i0(l)||c.push({node:l.focusNode,offset:l.focusOffset})),dr&&t.input.lastKeyCode===8)for(let m=i;m>o;m--){let w=r.childNodes[m-1],x=w.pmViewDesc;if(w.nodeName=="BR"&&!x){i=m;break}if(!x||x.size)break}let d=t.state.doc,f=t.someProp("domParser")||Xu.fromSchema(t.state.schema),p=d.resolve(s),h=null,y=f.parse(r,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:o,to:i,preserveWhitespace:p.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:AG,context:p});if(c&&c[0].pos!=null){let m=c[0].pos,w=c[1]&&c[1].pos;w==null&&(w=m),h={anchor:m+s,head:w+s}}return{doc:y,sel:h,from:s,to:a}}function AG(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Pr&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Pr&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const NG=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function RG(t,e,n,r,o){let i=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let F=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,j=A$(t,F);if(j&&!t.state.selection.eq(j)){if(dr&&ti&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",ce=>ce(t,Ll(13,"Enter"))))return;let U=t.state.tr.setSelection(j);F=="pointer"?U.setMeta("pointer",!0):F=="key"&&U.scrollIntoView(),i&&U.setMeta("composition",i),t.dispatch(U)}return}let s=t.state.doc.resolve(e),a=s.sharedDepth(n);e=s.before(a+1),n=t.state.doc.resolve(n).after(a+1);let l=t.state.selection,c=TG(t,e,n),u=t.state.doc,d=u.slice(c.from,c.to),f,p;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(f=t.state.selection.to,p="end"):(f=t.state.selection.from,p="start"),t.input.lastKeyCode=null;let h=IG(d.content,c.doc.content,c.from,f,p);if((rd&&t.input.lastIOSEnter>Date.now()-225||ti)&&o.some(F=>F.nodeType==1&&!NG.test(F.nodeName))&&(!h||h.endA>=h.endB)&&t.someProp("handleKeyDown",F=>F(t,Ll(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!h)if(r&&l instanceof We&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))h={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let F=HA(t,t.state.doc,c.sel);if(F&&!F.eq(t.state.selection)){let j=t.state.tr.setSelection(F);i&&j.setMeta("composition",i),t.dispatch(j)}}return}if(dr&&t.cursorWrapper&&c.sel&&c.sel.anchor==t.cursorWrapper.deco.from&&c.sel.head==c.sel.anchor){let F=h.endB-h.start;c.sel={anchor:c.sel.anchor+F,head:c.sel.anchor+F}}t.input.domChangeCount++,t.state.selection.from<t.state.selection.to&&h.start==h.endB&&t.state.selection instanceof We&&(h.start>t.state.selection.from&&h.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?h.start=t.state.selection.from:h.endA<t.state.selection.to&&h.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(h.endB+=t.state.selection.to-h.endA,h.endA=t.state.selection.to)),Kr&&Da<=11&&h.endB==h.start+1&&h.endA==h.start&&h.start>c.from&&c.doc.textBetween(h.start-c.from-1,h.start-c.from+1)==" "&&(h.start--,h.endA--,h.endB--);let y=c.doc.resolveNoCache(h.start-c.from),m=c.doc.resolveNoCache(h.endB-c.from),w=u.resolve(h.start),x=y.sameParent(m)&&y.parent.inlineContent&&w.end()>=h.endA,$;if((rd&&t.input.lastIOSEnter>Date.now()-225&&(!x||o.some(F=>F.nodeName=="DIV"||F.nodeName=="P"))||!x&&y.pos<c.doc.content.size&&!y.sameParent(m)&&($=Oe.findFrom(c.doc.resolve(y.pos+1),1,!0))&&$.head==m.pos)&&t.someProp("handleKeyDown",F=>F(t,Ll(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>h.start&&OG(u,h.start,h.endA,y,m)&&t.someProp("handleKeyDown",F=>F(t,Ll(8,"Backspace")))){ti&&dr&&t.domObserver.suppressSelectionUpdates();return}dr&&ti&&h.endB==h.start&&(t.input.lastAndroidDelete=Date.now()),ti&&!x&&y.start()!=m.start()&&m.parentOffset==0&&y.depth==m.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==h.endA&&(h.endB-=2,m=c.doc.resolveNoCache(h.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(F){return F(t,Ll(13,"Enter"))})},20));let S=h.start,I=h.endA,E,L,T;if(x){if(y.pos==m.pos)Kr&&Da<=11&&y.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Is(t),20)),E=t.state.tr.delete(S,I),L=u.resolve(h.start).marksAcross(u.resolve(h.endA));else if(h.endA==h.endB&&(T=PG(y.parent.content.cut(y.parentOffset,m.parentOffset),w.parent.content.cut(w.parentOffset,h.endA-w.start()))))E=t.state.tr,T.type=="add"?E.addMark(S,I,T.mark):E.removeMark(S,I,T.mark);else if(y.parent.child(y.index()).isText&&y.index()==m.index()-(m.textOffset?0:1)){let F=y.parent.textBetween(y.parentOffset,m.parentOffset);if(t.someProp("handleTextInput",j=>j(t,S,I,F)))return;E=t.state.tr.insertText(F,S,I)}}if(E||(E=t.state.tr.replace(S,I,c.doc.slice(h.start-c.from,h.endB-c.from))),c.sel){let F=HA(t,E.doc,c.sel);F&&!(dr&&ti&&t.composing&&F.empty&&(h.start!=h.endB||t.input.lastAndroidDelete<Date.now()-100)&&(F.head==S||F.head==E.mapping.map(I)-1)||Kr&&F.empty&&F.head==S)&&E.setSelection(F)}L&&E.ensureMarks(L),i&&E.setMeta("composition",i),t.dispatch(E.scrollIntoView())}function HA(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:N$(t,e.resolve(n.anchor),e.resolve(n.head))}function PG(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,o=n,i=r,s,a,l;for(let u=0;u<r.length;u++)o=r[u].removeFromSet(o);for(let u=0;u<n.length;u++)i=n[u].removeFromSet(i);if(o.length==1&&i.length==0)a=o[0],s="add",l=u=>u.mark(a.addToSet(u.marks));else if(o.length==0&&i.length==1)a=i[0],s="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(te.from(c).eq(t))return{mark:a,type:s}}function OG(t,e,n,r,o){if(!r.parent.isTextblock||n-e<=o.pos-r.pos||Hv(r,!0,!1)<o.pos)return!1;let i=t.resolve(e);if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;let s=t.resolve(Hv(i,!0,!0));return!s.parent.isTextblock||s.pos>n||Hv(s,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function Hv(t,e,n){let r=t.depth,o=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,o++,e=!1;if(n){let i=t.node(r).maybeChild(t.indexAfter(r));for(;i&&!i.isLeaf;)i=i.firstChild,o++}return o}function IG(t,e,n,r,o){let i=t.findDiffStart(e,n);if(i==null)return null;let{a:s,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(o=="end"){let l=Math.max(0,i-Math.min(s,a));r-=s+l-i}if(s<i&&t.size<e.size){let l=r<=i&&r>=s?i-r:0;i-=l,a=i+(a-s),s=i}else if(a<i){let l=r<=i&&r>=a?i-r:0;i-=l,s=i+(s-a),a=i}return{start:i,endA:s,endB:a}}class uM{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new tG,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(JA),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=ZA(this),GA(this),this.nodeViews=YA(this),this.docView=AA(this.state.doc,KA(this),Vv(this),this.dom,this),this.domObserver=new SG(this,(r,o,i,s)=>RG(this,r,o,i,s)),this.domObserver.start(),nG(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&dx(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(JA),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){let r=this.state,o=!1,i=!1;e.storedMarks&&this.composing&&(iM(this),i=!0),this.state=e;let s=r.plugins!=e.plugins||this._props.plugins!=n.plugins;if(s||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let f=YA(this);MG(f,this.nodeViews)&&(this.nodeViews=f,o=!0)}(s||n.handleDOMEvents!=this._props.handleDOMEvents)&&dx(this),this.editable=ZA(this),GA(this);let a=Vv(this),l=KA(this),c=r.plugins!=e.plugins&&!r.doc.eq(e.doc)?"reset":e.scrollToSelection>r.scrollToSelection?"to selection":"preserve",u=o||!this.docView.matchesNode(e.doc,l,a);(u||!e.selection.eq(r.selection))&&(i=!0);let d=c=="preserve"&&i&&this.dom.style.overflowAnchor==null&&gK(this);if(i){this.domObserver.stop();let f=u&&(Kr||dr)&&!this.composing&&!r.selection.empty&&!e.selection.empty&&DG(r.selection,e.selection);if(u){let p=dr?this.trackWrites=this.domSelectionRange().focusNode:null;(o||!this.docView.update(e.doc,l,a,this))&&(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=AA(e.doc,l,a,this.dom,this)),p&&!this.trackWrites&&(f=!0)}f||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&zK(this))?Is(this,f):(H5(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(r),c=="reset"?this.dom.scrollTop=0:c=="to selection"?this.scrollToSelection():d&&yK(d)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof Me){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&kA(this,n.getBoundingClientRect(),e)}else kA(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}someProp(e,n){let r=this._props&&this._props[e],o;if(r!=null&&(o=n?n(r):r))return o;for(let s=0;s<this.directPlugins.length;s++){let a=this.directPlugins[s].props[e];if(a!=null&&(o=n?n(a):a))return o}let i=this.state.plugins;if(i)for(let s=0;s<i.length;s++){let a=i[s].props[e];if(a!=null&&(o=n?n(a):a))return o}}hasFocus(){if(Kr){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&bK(this.dom),Is(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return kK(this,e)}coordsAtPos(e,n=1){return F5(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let o=this.docView.posFromDOM(e,n,r);if(o==null)throw new RangeError("DOM position not inside the editor");return o}endOfTextblock(e,n){return TK(this,n||this.state,e)}pasteHTML(e,n){return Kp(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Kp(this,e,null,!0,n||new ClipboardEvent("paste"))}destroy(){this.docView&&(rG(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Vv(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return this.docView==null}dispatchEvent(e){return iG(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){return Pr&&this.root.nodeType===11&&cK(this.dom.ownerDocument)==this.dom?CG(this):this.domSelection()}domSelection(){return this.root.getSelection()}}function KA(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[pr.node(0,t.state.doc.content.size,e)]}function GA(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:pr.widget(t.state.selection.head,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function ZA(t){return!t.someProp("editable",e=>e(t.state)===!1)}function DG(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function YA(t){let e=Object.create(null);function n(r){for(let o in r)Object.prototype.hasOwnProperty.call(e,o)||(e[o]=r[o])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function MG(t,e){let n=0,r=0;for(let o in t){if(t[o]!=e[o])return!0;n++}for(let o in e)r++;return n!=r}function JA(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}class pn extends Oe{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return pn.valid(r)?new pn(r):Oe.near(r)}content(){return Se.empty}eq(e){return e instanceof pn&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new pn(e.resolve(n.pos))}getBookmark(){return new M$(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!LG(e)||!FG(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let o=n.contentMatchAt(e.index()).defaultType;return o&&o.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&pn.valid(e))return e;let o=e.pos,i=null;for(let s=e.depth;;s--){let a=e.node(s);if(n>0?e.indexAfter(s)<a.childCount:e.index(s)>0){i=a.child(n>0?e.indexAfter(s):e.index(s)-1);break}else if(s==0)return null;o+=n;let l=e.doc.resolve(o);if(pn.valid(l))return l}for(;;){let s=n>0?i.firstChild:i.lastChild;if(!s){if(i.isAtom&&!i.isText&&!Me.isSelectable(i)){e=e.doc.resolve(o+i.nodeSize*n),r=!1;continue e}break}i=s,o+=n;let a=e.doc.resolve(o);if(pn.valid(a))return a}return null}}}pn.prototype.visible=!1;pn.findFrom=pn.findGapCursorFrom;Oe.jsonID("gapcursor",pn);class M${constructor(e){this.pos=e}map(e){return new M$(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return pn.valid(n)?new pn(n):Oe.near(n)}}function LG(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n-1);;o=o.lastChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function FG(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n);;o=o.firstChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function BG(){return new ht({props:{decorations:WG,createSelectionBetween(t,e,n){return e.pos==n.pos&&pn.valid(n)?new pn(n):null},handleClick:zG,handleKeyDown:jG,handleDOMEvents:{beforeinput:qG}}})}const jG=E$({ArrowLeft:Gm("horiz",-1),ArrowRight:Gm("horiz",1),ArrowUp:Gm("vert",-1),ArrowDown:Gm("vert",1)});function Gm(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,o,i){let s=r.selection,a=e>0?s.$to:s.$from,l=s.empty;if(s instanceof We){if(!i.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=pn.findGapCursorFrom(a,e,l);return c?(o&&o(r.tr.setSelection(new pn(c))),!0):!1}}function zG(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!pn.valid(r))return!1;let o=t.posAtCoords({left:n.clientX,top:n.clientY});return o&&o.inside>-1&&Me.isSelectable(t.state.doc.nodeAt(o.inside))?!1:(t.dispatch(t.state.tr.setSelection(new pn(r))),!0)}function qG(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof pn))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let o=te.empty;for(let s=r.length-1;s>=0;s--)o=te.from(r[s].createAndFill(null,o));let i=t.state.tr.replace(n.pos,n.pos,new Se(o,0,0));return i.setSelection(We.near(i.doc.resolve(n.pos+1))),t.dispatch(i),!1}function WG(t){if(!(t.selection instanceof pn))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Xt.create(t.doc,[pr.widget(t.selection.head,e,{key:"gapcursor"})])}var B1=200,Mn=function(){};Mn.prototype.append=function(e){return e.length?(e=Mn.from(e),!this.length&&e||e.length<B1&&this.leafAppend(e)||this.length<B1&&e.leafPrepend(this)||this.appendInner(e)):this};Mn.prototype.prepend=function(e){return e.length?Mn.from(e).append(this):this};Mn.prototype.appendInner=function(e){return new UG(this,e)};Mn.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?Mn.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};Mn.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Mn.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};Mn.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var o=[];return this.forEach(function(i,s){return o.push(e(i,s))},n,r),o};Mn.from=function(e){return e instanceof Mn?e:e&&e.length?new dM(e):Mn.empty};var dM=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(o,i){return o==0&&i==this.length?this:new e(this.values.slice(o,i))},e.prototype.getInner=function(o){return this.values[o]},e.prototype.forEachInner=function(o,i,s,a){for(var l=i;l<s;l++)if(o(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(o,i,s,a){for(var l=i-1;l>=s;l--)if(o(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(o){if(this.length+o.length<=B1)return new e(this.values.concat(o.flatten()))},e.prototype.leafPrepend=function(o){if(this.length+o.length<=B1)return new e(o.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(Mn);Mn.empty=new dM([]);var UG=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,o,i,s){var a=this.left.length;if(o<a&&this.left.forEachInner(r,o,Math.min(i,a),s)===!1||i>a&&this.right.forEachInner(r,Math.max(o-a,0),Math.min(this.length,i)-a,s+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,o,i,s){var a=this.left.length;if(o>a&&this.right.forEachInvertedInner(r,o-a,Math.max(i,a)-a,s+a)===!1||i<a&&this.left.forEachInvertedInner(r,Math.min(o,a),i,s)===!1)return!1},e.prototype.sliceInner=function(r,o){if(r==0&&o==this.length)return this;var i=this.left.length;return o<=i?this.left.slice(r,o):r>=i?this.right.slice(r-i,o-i):this.left.slice(r,i).append(this.right.slice(0,o-i))},e.prototype.leafAppend=function(r){var o=this.right.leafAppend(r);if(o)return new e(this.left,o)},e.prototype.leafPrepend=function(r){var o=this.left.leafPrepend(r);if(o)return new e(o,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(Mn);const VG=500;class ri{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let o,i;n&&(o=this.remapping(r,this.items.length),i=o.maps.length);let s=e.tr,a,l,c=[],u=[];return this.items.forEach((d,f)=>{if(!d.step){o||(o=this.remapping(r,f+1),i=o.maps.length),i--,u.push(d);return}if(o){u.push(new Di(d.map));let p=d.step.map(o.slice(i)),h;p&&s.maybeStep(p).doc&&(h=s.mapping.maps[s.mapping.maps.length-1],c.push(new Di(h,void 0,void 0,c.length+u.length))),i--,h&&o.appendMap(h,i)}else s.maybeStep(d.step);if(d.selection)return a=o?d.selection.map(o.slice(i)):d.selection,l=new ri(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:s,selection:a}}addTransform(e,n,r,o){let i=[],s=this.eventCount,a=this.items,l=!o&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let d=e.steps[u].invert(e.docs[u]),f=new Di(e.mapping.maps[u],d,n),p;(p=l&&l.merge(f))&&(f=p,u?i.pop():a=a.slice(0,a.length-1)),i.push(f),n&&(s++,n=void 0),o||(l=f)}let c=s-r.depth;return c>KG&&(a=HG(a,c),s-=c),new ri(a.append(i),s)}remapping(e,n){let r=new Su;return this.items.forEach((o,i)=>{let s=o.mirrorOffset!=null&&i-o.mirrorOffset>=e?r.maps.length-o.mirrorOffset:void 0;r.appendMap(o.map,s)},e,n),r}addMaps(e){return this.eventCount==0?this:new ri(this.items.append(e.map(n=>new Di(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],o=Math.max(0,this.items.length-n),i=e.mapping,s=e.steps.length,a=this.eventCount;this.items.forEach(f=>{f.selection&&a--},o);let l=n;this.items.forEach(f=>{let p=i.getMirror(--l);if(p==null)return;s=Math.min(s,p);let h=i.maps[p];if(f.step){let y=e.steps[p].invert(e.docs[p]),m=f.selection&&f.selection.map(i.slice(l+1,p));m&&a++,r.push(new Di(h,y,m))}else r.push(new Di(h))},o);let c=[];for(let f=n;f<s;f++)c.push(new Di(i.maps[f]));let u=this.items.slice(0,o).append(c).append(r),d=new ri(u,a);return d.emptyItemCount()>VG&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,o=[],i=0;return this.items.forEach((s,a)=>{if(a>=e)o.push(s),s.selection&&i++;else if(s.step){let l=s.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let u=s.selection&&s.selection.map(n.slice(r));u&&i++;let d=new Di(c.invert(),l,u),f,p=o.length-1;(f=o.length&&o[p].merge(d))?o[p]=f:o.push(d)}}else s.map&&r--},this.items.length,0),new ri(Mn.from(o.reverse()),i)}}ri.empty=new ri(Mn.empty,0);function HG(t,e){let n;return t.forEach((r,o)=>{if(r.selection&&e--==0)return n=o,!1}),t.slice(n)}class Di{constructor(e,n,r,o){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=o}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new Di(n.getMap().invert(),n,this.selection)}}}class ga{constructor(e,n,r,o,i){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=o,this.prevComposition=i}}const KG=20;function GG(t,e,n,r){let o=n.getMeta(Fa),i;if(o)return o.historyState;n.getMeta(YG)&&(t=new ga(t.done,t.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(s&&s.getMeta(Fa))return s.getMeta(Fa).redo?new ga(t.done.addTransform(n,void 0,r,jg(e)),t.undone,XA(n.mapping.maps[n.steps.length-1]),t.prevTime,t.prevComposition):new ga(t.done,t.undone.addTransform(n,void 0,r,jg(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!s&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!ZG(n,t.prevRanges)),c=s?Kv(t.prevRanges,n.mapping):XA(n.mapping.maps[n.steps.length-1]);return new ga(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,jg(e)),ri.empty,c,n.time,a==null?t.prevComposition:a)}else return(i=n.getMeta("rebased"))?new ga(t.done.rebased(n,i),t.undone.rebased(n,i),Kv(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new ga(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),Kv(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function ZG(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,o)=>{for(let i=0;i<e.length;i+=2)r<=e[i+1]&&o>=e[i]&&(n=!0)}),n}function XA(t){let e=[];return t.forEach((n,r,o,i)=>e.push(o,i)),e}function Kv(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let o=e.map(t[r],1),i=e.map(t[r+1],-1);o<=i&&n.push(o,i)}return n}function fM(t,e,n,r){let o=jg(e),i=Fa.get(e).spec.config,s=(r?t.undone:t.done).popEvent(e,o);if(!s)return;let a=s.selection.resolve(s.transform.doc),l=(r?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,o),c=new ga(r?l:s.remaining,r?s.remaining:l,null,0,-1);n(s.transform.setSelection(a).setMeta(Fa,{redo:r,historyState:c}).scrollIntoView())}let Gv=!1,QA=null;function jg(t){let e=t.plugins;if(QA!=e){Gv=!1,QA=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){Gv=!0;break}}return Gv}const Fa=new vt("history"),YG=new vt("closeHistory");function JG(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new ht({key:Fa,state:{init(){return new ga(ri.empty,ri.empty,null,0,-1)},apply(e,n,r){return GG(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,o=r=="historyUndo"?pM:r=="historyRedo"?hM:null;return o?(n.preventDefault(),o(e.state,e.dispatch)):!1}}}})}const pM=(t,e)=>{let n=Fa.getState(t);return!n||n.done.eventCount==0?!1:(e&&fM(n,t,e,!1),!0)},hM=(t,e)=>{let n=Fa.getState(t);return!n||n.undone.eventCount==0?!1:(e&&fM(n,t,e,!0),!0)};class Gs{constructor(e,n){this.match=e,this.match=e,this.handler=typeof n=="string"?XG(n):n}}function XG(t){return function(e,n,r,o){let i=t;if(n[1]){let s=n[0].lastIndexOf(n[1]);i+=n[0].slice(s+n[1].length),r+=s;let a=r-o;a>0&&(i=n[0].slice(s-a,s)+i,r=o)}return e.tr.insertText(i,r,o)}}const QG=500;function eZ({rules:t}){let e=new ht({state:{init(){return null},apply(n,r){let o=n.getMeta(this);return o||(n.selectionSet||n.docChanged?null:r)}},props:{handleTextInput(n,r,o,i){return e3(n,r,o,i,t,e)},handleDOMEvents:{compositionend:n=>{setTimeout(()=>{let{$cursor:r}=n.state.selection;r&&e3(n,r.pos,r.pos,"",t,e)})}}},isInputRules:!0});return e}function e3(t,e,n,r,o,i){if(t.composing)return!1;let s=t.state,a=s.doc.resolve(e);if(a.parent.type.spec.code)return!1;let l=a.parent.textBetween(Math.max(0,a.parentOffset-QG),a.parentOffset,null,"")+r;for(let c=0;c<o.length;c++){let u=o[c].match.exec(l),d=u&&o[c].handler(s,u,e-(u[0].length-r.length),n);if(d)return t.dispatch(d.setMeta(i,{transform:d,from:e,to:n,text:r})),!0}return!1}const tZ=(t,e)=>{let n=t.plugins;for(let r=0;r<n.length;r++){let o=n[r],i;if(o.spec.isInputRules&&(i=o.getState(t))){if(e){let s=t.tr,a=i.transform;for(let l=a.steps.length-1;l>=0;l--)s.step(a.steps[l].invert(a.docs[l]));if(i.text){let l=s.doc.resolve(i.from).marks();s.replaceWith(i.from,i.to,t.schema.text(i.text,l))}else s.delete(i.from,i.to);e(s)}return!0}}return!1};function L$(t,e,n=null,r){return new Gs(t,(o,i,s,a)=>{let l=n instanceof Function?n(i):n,c=o.tr.delete(s,a),u=c.doc.resolve(s),d=u.blockRange(),f=d&&r0(d,e,l);if(!f)return null;c.wrap(d,f);let p=c.doc.resolve(s-1).nodeBefore;return p&&p.type==e&&Nd(c.doc,s-1)&&(!r||r(i,p))&&c.join(s-1),c})}function mM(t,e,n=null){return new Gs(t,(r,o,i,s)=>{let a=r.doc.resolve(i),l=n instanceof Function?n(o):n;return a.node(-1).canReplaceWith(a.index(-1),a.indexAfter(-1),e)?r.tr.delete(i,s).setBlockType(i,i,e,l):null})}function nZ(t,e=null){return function(n,r){let{$from:o,$to:i}=n.selection,s=o.blockRange(i),a=!1,l=s;if(!s)return!1;if(s.depth>=2&&o.node(s.depth-1).type.compatibleContent(t)&&s.startIndex==0){if(o.index(s.depth-1)==0)return!1;let u=n.doc.resolve(s.start-2);l=new Up(u,u,s.depth),s.endIndex<s.parent.childCount&&(s=new Up(o,n.doc.resolve(i.end(s.depth)),s.depth)),a=!0}let c=r0(l,t,e,s);return c?(r&&r(rZ(n.tr,s,c,a,t).scrollIntoView()),!0):!1}}function rZ(t,e,n,r,o){let i=te.empty;for(let u=n.length-1;u>=0;u--)i=te.from(n[u].type.create(n[u].attrs,i));t.step(new Tn(e.start-(r?2:0),e.end,e.start,e.end,new Se(i,0,0),n.length,!0));let s=0;for(let u=0;u<n.length;u++)n[u].type==o&&(s=u+1);let a=n.length-s,l=e.start+n.length-(r?2:0),c=e.parent;for(let u=e.startIndex,d=e.endIndex,f=!0;u<d;u++,f=!1)!f&&tp(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return t}function oZ(t){return function(e,n){let{$from:r,$to:o}=e.selection,i=r.blockRange(o,s=>s.childCount>0&&s.firstChild.type==t);return i?n?r.node(i.depth-1).type==t?iZ(e,n,t,i):sZ(e,n,i):!0:!1}}function iZ(t,e,n,r){let o=t.tr,i=r.end,s=r.$to.end(r.depth);i<s&&(o.step(new Tn(i-1,s,i,s,new Se(te.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Up(o.doc.resolve(r.$from.pos),o.doc.resolve(s),r.depth));const a=Ad(r);if(a==null)return!1;o.lift(r,a);let l=o.mapping.map(i,-1)-1;return Nd(o.doc,l)&&o.join(l),e(o.scrollIntoView()),!0}function sZ(t,e,n){let r=t.tr,o=n.parent;for(let p=n.end,h=n.endIndex-1,y=n.startIndex;h>y;h--)p-=o.child(h).nodeSize,r.delete(p-1,p+1);let i=r.doc.resolve(n.start),s=i.nodeAfter;if(r.mapping.map(n.end)!=n.start+i.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==o.childCount,c=i.node(-1),u=i.index(-1);if(!c.canReplace(u+(a?0:1),u+1,s.content.append(l?te.empty:te.from(o))))return!1;let d=i.pos,f=d+s.nodeSize;return r.step(new Tn(d-(a?1:0),f+(l?1:0),d+1,f-1,new Se((a?te.empty:te.from(o.copy(te.empty))).append(l?te.empty:te.from(o.copy(te.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function aZ(t){return function(e,n){let{$from:r,$to:o}=e.selection,i=r.blockRange(o,c=>c.childCount>0&&c.firstChild.type==t);if(!i)return!1;let s=i.startIndex;if(s==0)return!1;let a=i.parent,l=a.child(s-1);if(l.type!=t)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,u=te.from(c?t.create():null),d=new Se(te.from(t.create(null,te.from(a.type.create(null,u)))),c?3:1,0),f=i.start,p=i.end;n(e.tr.step(new Tn(f-(c?3:1),p,f,p,d,1,!0)).scrollIntoView())}return!0}}var fx,px;if(typeof WeakMap!="undefined"){let t=new WeakMap;fx=e=>t.get(e),px=(e,n)=>(t.set(e,n),n)}else{const t=[];let n=0;fx=r=>{for(let o=0;o<t.length;o+=2)if(t[o]==r)return t[o+1]},px=(r,o)=>(n==10&&(n=0),t[n++]=r,t[n++]=o)}var Sr=class{constructor(t,e,n,r){this.width=t,this.height=e,this.map=n,this.problems=r}findCell(t){for(let e=0;e<this.map.length;e++){const n=this.map[e];if(n!=t)continue;const r=e%this.width,o=e/this.width|0;let i=r+1,s=o+1;for(let a=1;i<this.width&&this.map[e+a]==n;a++)i++;for(let a=1;s<this.height&&this.map[e+this.width*a]==n;a++)s++;return{left:r,top:o,right:i,bottom:s}}throw new RangeError(`No cell with offset ${t} found`)}colCount(t){for(let e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError(`No cell with offset ${t} found`)}nextCell(t,e,n){const{left:r,right:o,top:i,bottom:s}=this.findCell(t);return e=="horiz"?(n<0?r==0:o==this.width)?null:this.map[i*this.width+(n<0?r-1:o)]:(n<0?i==0:s==this.height)?null:this.map[r+this.width*(n<0?i-1:s)]}rectBetween(t,e){const{left:n,right:r,top:o,bottom:i}=this.findCell(t),{left:s,right:a,top:l,bottom:c}=this.findCell(e);return{left:Math.min(n,s),top:Math.min(o,l),right:Math.max(r,a),bottom:Math.max(i,c)}}cellsInRect(t){const e=[],n={};for(let r=t.top;r<t.bottom;r++)for(let o=t.left;o<t.right;o++){const i=r*this.width+o,s=this.map[i];n[s]||(n[s]=!0,!(o==t.left&&o&&this.map[i-1]==s||r==t.top&&r&&this.map[i-this.width]==s)&&e.push(s))}return e}positionAt(t,e,n){for(let r=0,o=0;;r++){const i=o+n.child(r).nodeSize;if(r==t){let s=e+t*this.width;const a=(t+1)*this.width;for(;s<a&&this.map[s]<o;)s++;return s==a?i-1:this.map[s]}o=i}}static get(t){return fx(t)||px(t,lZ(t))}};function lZ(t){if(t.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+t.type.name);const e=cZ(t),n=t.childCount,r=[];let o=0,i=null;const s=[];for(let c=0,u=e*n;c<u;c++)r[c]=0;for(let c=0,u=0;c<n;c++){const d=t.child(c);u++;for(let h=0;;h++){for(;o<r.length&&r[o]!=0;)o++;if(h==d.childCount)break;const y=d.child(h),{colspan:m,rowspan:w,colwidth:x}=y.attrs;for(let $=0;$<w;$++){if($+c>=n){(i||(i=[])).push({type:"overlong_rowspan",pos:u,n:w-$});break}const S=o+$*e;for(let I=0;I<m;I++){r[S+I]==0?r[S+I]=u:(i||(i=[])).push({type:"collision",row:c,pos:u,n:m-I});const E=x&&x[I];if(E){const L=(S+I)%e*2,T=s[L];T==null||T!=E&&s[L+1]==1?(s[L]=E,s[L+1]=1):T==E&&s[L+1]++}}}o+=m,u+=y.nodeSize}const f=(c+1)*e;let p=0;for(;o<f;)r[o++]==0&&p++;p&&(i||(i=[])).push({type:"missing",row:c,n:p}),u++}const a=new Sr(e,n,r,i);let l=!1;for(let c=0;!l&&c<s.length;c+=2)s[c]!=null&&s[c+1]<n&&(l=!0);return l&&uZ(a,s,t),a}function cZ(t){let e=-1,n=!1;for(let r=0;r<t.childCount;r++){const o=t.child(r);let i=0;if(n)for(let s=0;s<r;s++){const a=t.child(s);for(let l=0;l<a.childCount;l++){const c=a.child(l);s+c.attrs.rowspan>r&&(i+=c.attrs.colspan)}}for(let s=0;s<o.childCount;s++){const a=o.child(s);i+=a.attrs.colspan,a.attrs.rowspan>1&&(n=!0)}e==-1?e=i:e!=i&&(e=Math.max(e,i))}return e}function uZ(t,e,n){t.problems||(t.problems=[]);const r={};for(let o=0;o<t.map.length;o++){const i=t.map[o];if(r[i])continue;r[i]=!0;const s=n.nodeAt(i);if(!s)throw new RangeError(`No cell with offset ${i} found`);let a=null;const l=s.attrs;for(let c=0;c<l.colspan;c++){const u=(o+c)%t.width,d=e[u*2];d!=null&&(!l.colwidth||l.colwidth[c]!=d)&&((a||(a=dZ(l)))[c]=d)}a&&t.problems.unshift({type:"colwidth mismatch",pos:i,colwidth:a})}}function dZ(t){if(t.colwidth)return t.colwidth.slice();const e=[];for(let n=0;n<t.colspan;n++)e.push(0);return e}function t3(t,e){if(typeof t=="string")return{};const n=t.getAttribute("data-colwidth"),r=n&&/^\d+(,\d+)*$/.test(n)?n.split(",").map(s=>Number(s)):null,o=Number(t.getAttribute("colspan")||1),i={colspan:o,rowspan:Number(t.getAttribute("rowspan")||1),colwidth:r&&r.length==o?r:null};for(const s in e){const a=e[s].getFromDOM,l=a&&a(t);l!=null&&(i[s]=l)}return i}function n3(t,e){const n={};t.attrs.colspan!=1&&(n.colspan=t.attrs.colspan),t.attrs.rowspan!=1&&(n.rowspan=t.attrs.rowspan),t.attrs.colwidth&&(n["data-colwidth"]=t.attrs.colwidth.join(","));for(const r in e){const o=e[r].setDOMAttr;o&&o(t.attrs[r],n)}return n}function fZ(t){const e=t.cellAttributes||{},n={colspan:{default:1},rowspan:{default:1},colwidth:{default:null}};for(const r in e)n[r]={default:e[r].default};return{table:{content:"table_row+",tableRole:"table",isolating:!0,group:t.tableGroup,parseDOM:[{tag:"table"}],toDOM(){return["table",["tbody",0]]}},table_row:{content:"(table_cell | table_header)*",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM(){return["tr",0]}},table_cell:{content:t.cellContent,attrs:n,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:r=>t3(r,e)}],toDOM(r){return["td",n3(r,e),0]}},table_header:{content:t.cellContent,attrs:n,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:r=>t3(r,e)}],toDOM(r){return["th",n3(r,e),0]}}}}function Ls(t){let e=t.cached.tableNodeTypes;if(!e){e=t.cached.tableNodeTypes={};for(const n in t.nodes){const r=t.nodes[n],o=r.spec.tableRole;o&&(e[o]=r)}}return e}var xa=new vt("selectingCells");function l0(t){for(let e=t.depth-1;e>0;e--)if(t.node(e).type.spec.tableRole=="row")return t.node(0).resolve(t.before(e+1));return null}function c0(t){const e=t.selection.$head;for(let n=e.depth;n>0;n--)if(e.node(n).type.spec.tableRole=="row")return!0;return!1}function F$(t){const e=t.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const n=l0(e.$head)||pZ(e.$head);if(n)return n;throw new RangeError(`No cell found around position ${e.head}`)}function pZ(t){for(let e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n)}for(let e=t.nodeBefore,n=t.pos;e;e=e.lastChild,n--){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n-e.nodeSize)}}function r3(t){return t.parent.type.spec.tableRole=="row"&&!!t.nodeAfter}function hZ(t){return t.node(0).resolve(t.pos+t.nodeAfter.nodeSize)}function B$(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function gM(t,e,n){const r=t.node(-1),o=Sr.get(r),i=t.start(-1),s=o.nextCell(t.pos-i,e,n);return s==null?null:t.node(0).resolve(i+s)}function id(t,e,n=1){const r={...t,colspan:t.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,n),r.colwidth.some(o=>o>0)||(r.colwidth=null)),r}var Vt=class extends Oe{constructor(t,e=t){const n=t.node(-1),r=Sr.get(n),o=t.start(-1),i=r.rectBetween(t.pos-o,e.pos-o),s=t.node(0),a=r.cellsInRect(i).filter(c=>c!=e.pos-o);a.unshift(e.pos-o);const l=a.map(c=>{const u=n.nodeAt(c);if(!u)throw RangeError(`No cell with offset ${c} found`);const d=o+c+1;return new k5(s.resolve(d),s.resolve(d+u.content.size))});super(l[0].$from,l[0].$to,l),this.$anchorCell=t,this.$headCell=e}map(t,e){const n=t.resolve(e.map(this.$anchorCell.pos)),r=t.resolve(e.map(this.$headCell.pos));if(r3(n)&&r3(r)&&B$(n,r)){const o=this.$anchorCell.node(-1)!=n.node(-1);return o&&this.isRowSelection()?Vt.rowSelection(n,r):o&&this.isColSelection()?Vt.colSelection(n,r):new Vt(n,r)}return We.between(n,r)}content(){const t=this.$anchorCell.node(-1),e=Sr.get(t),n=this.$anchorCell.start(-1),r=e.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),o={},i=[];for(let a=r.top;a<r.bottom;a++){const l=[];for(let c=a*e.width+r.left,u=r.left;u<r.right;u++,c++){const d=e.map[c];if(o[d])continue;o[d]=!0;const f=e.findCell(d);let p=t.nodeAt(d);if(!p)throw RangeError(`No cell with offset ${d} found`);const h=r.left-f.left,y=f.right-r.right;if(h>0||y>0){let m=p.attrs;if(h>0&&(m=id(m,0,h)),y>0&&(m=id(m,m.colspan-y,y)),f.left<r.left){if(p=p.type.createAndFill(m),!p)throw RangeError(`Could not create cell with attrs ${JSON.stringify(m)}`)}else p=p.type.create(m,p.content)}if(f.top<r.top||f.bottom>r.bottom){const m={...p.attrs,rowspan:Math.min(f.bottom,r.bottom)-Math.max(f.top,r.top)};f.top<r.top?p=p.type.createAndFill(m):p=p.type.create(m,p.content)}l.push(p)}i.push(t.child(a).copy(te.from(l)))}const s=this.isColSelection()&&this.isRowSelection()?t:i;return new Se(te.from(s),1,1)}replace(t,e=Se.empty){const n=t.steps.length,r=this.ranges;for(let i=0;i<r.length;i++){const{$from:s,$to:a}=r[i],l=t.mapping.slice(n);t.replace(l.map(s.pos),l.map(a.pos),i?Se.empty:e)}const o=Oe.findFrom(t.doc.resolve(t.mapping.slice(n).map(this.to)),-1);o&&t.setSelection(o)}replaceWith(t,e){this.replace(t,new Se(te.from(e),0,0))}forEachCell(t){const e=this.$anchorCell.node(-1),n=Sr.get(e),r=this.$anchorCell.start(-1),o=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r));for(let i=0;i<o.length;i++)t(e.nodeAt(o[i]),r+o[i])}isColSelection(){const t=this.$anchorCell.index(-1),e=this.$headCell.index(-1);if(Math.min(t,e)>0)return!1;const n=t+this.$anchorCell.nodeAfter.attrs.rowspan,r=e+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(n,r)==this.$headCell.node(-1).childCount}static colSelection(t,e=t){const n=t.node(-1),r=Sr.get(n),o=t.start(-1),i=r.findCell(t.pos-o),s=r.findCell(e.pos-o),a=t.node(0);return i.top<=s.top?(i.top>0&&(t=a.resolve(o+r.map[i.left])),s.bottom<r.height&&(e=a.resolve(o+r.map[r.width*(r.height-1)+s.right-1]))):(s.top>0&&(e=a.resolve(o+r.map[s.left])),i.bottom<r.height&&(t=a.resolve(o+r.map[r.width*(r.height-1)+i.right-1]))),new Vt(t,e)}isRowSelection(){const t=this.$anchorCell.node(-1),e=Sr.get(t),n=this.$anchorCell.start(-1),r=e.colCount(this.$anchorCell.pos-n),o=e.colCount(this.$headCell.pos-n);if(Math.min(r,o)>0)return!1;const i=r+this.$anchorCell.nodeAfter.attrs.colspan,s=o+this.$headCell.nodeAfter.attrs.colspan;return Math.max(i,s)==e.width}eq(t){return t instanceof Vt&&t.$anchorCell.pos==this.$anchorCell.pos&&t.$headCell.pos==this.$headCell.pos}static rowSelection(t,e=t){const n=t.node(-1),r=Sr.get(n),o=t.start(-1),i=r.findCell(t.pos-o),s=r.findCell(e.pos-o),a=t.node(0);return i.left<=s.left?(i.left>0&&(t=a.resolve(o+r.map[i.top*r.width])),s.right<r.width&&(e=a.resolve(o+r.map[r.width*(s.top+1)-1]))):(s.left>0&&(e=a.resolve(o+r.map[s.top*r.width])),i.right<r.width&&(t=a.resolve(o+r.map[r.width*(i.top+1)-1]))),new Vt(t,e)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(t,e){return new Vt(t.resolve(e.anchor),t.resolve(e.head))}static create(t,e,n=e){return new Vt(t.resolve(e),t.resolve(n))}getBookmark(){return new yM(this.$anchorCell.pos,this.$headCell.pos)}};Vt.prototype.visible=!1;Oe.jsonID("cell",Vt);var yM=class{constructor(t,e){this.anchor=t,this.head=e}map(t){return new yM(t.map(this.anchor),t.map(this.head))}resolve(t){const e=t.resolve(this.anchor),n=t.resolve(this.head);return e.parent.type.spec.tableRole=="row"&&n.parent.type.spec.tableRole=="row"&&e.index()<e.parent.childCount&&n.index()<n.parent.childCount&&B$(e,n)?new Vt(e,n):Oe.near(n,1)}};function mZ(t){if(!(t.selection instanceof Vt))return null;const e=[];return t.selection.forEachCell((n,r)=>{e.push(pr.node(r,r+n.nodeSize,{class:"selectedCell"}))}),Xt.create(t.doc,e)}function gZ({$from:t,$to:e}){if(t.pos==e.pos||t.pos<t.pos-6)return!1;let n=t.pos,r=e.pos,o=t.depth;for(;o>=0&&!(t.after(o+1)<t.end(o));o--,n++);for(let i=e.depth;i>=0&&!(e.before(i+1)>e.start(i));i--,r--);return n==r&&/row|table/.test(t.node(o).type.spec.tableRole)}function yZ({$from:t,$to:e}){let n,r;for(let o=t.depth;o>0;o--){const i=t.node(o);if(i.type.spec.tableRole==="cell"||i.type.spec.tableRole==="header_cell"){n=i;break}}for(let o=e.depth;o>0;o--){const i=e.node(o);if(i.type.spec.tableRole==="cell"||i.type.spec.tableRole==="header_cell"){r=i;break}}return n!==r&&e.parentOffset===0}function bZ(t,e,n){const r=(e||t).selection,o=(e||t).doc;let i,s;if(r instanceof Me&&(s=r.node.type.spec.tableRole)){if(s=="cell"||s=="header_cell")i=Vt.create(o,r.from);else if(s=="row"){const a=o.resolve(r.from+1);i=Vt.rowSelection(a,a)}else if(!n){const a=Sr.get(r.node),l=r.from+1,c=l+a.map[a.width*a.height-1];i=Vt.create(o,l+1,c)}}else r instanceof We&&gZ(r)?i=We.create(o,r.from):r instanceof We&&yZ(r)&&(i=We.create(o,r.$from.start(),r.$from.end()));return i&&(e||(e=t.tr)).setSelection(i),e}var vZ=new vt("fix-tables");function bM(t,e,n,r){const o=t.childCount,i=e.childCount;e:for(let s=0,a=0;s<i;s++){const l=e.child(s);for(let c=a,u=Math.min(o,s+3);c<u;c++)if(t.child(c)==l){a=c+1,n+=l.nodeSize;continue e}r(l,n),a<o&&t.child(a).sameMarkup(l)?bM(t.child(a),l,n+1,r):l.nodesBetween(0,l.content.size,r,n+1),n+=l.nodeSize}}function wZ(t,e){let n;const r=(o,i)=>{o.type.spec.tableRole=="table"&&(n=_Z(t,o,i,n))};return e?e.doc!=t.doc&&bM(e.doc,t.doc,0,r):t.doc.descendants(r),n}function _Z(t,e,n,r){const o=Sr.get(e);if(!o.problems)return r;r||(r=t.tr);const i=[];for(let l=0;l<o.height;l++)i.push(0);for(let l=0;l<o.problems.length;l++){const c=o.problems[l];if(c.type=="collision"){const u=e.nodeAt(c.pos);if(!u)continue;const d=u.attrs;for(let f=0;f<d.rowspan;f++)i[c.row+f]+=c.n;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,id(d,d.colspan-c.n,c.n))}else if(c.type=="missing")i[c.row]+=c.n;else if(c.type=="overlong_rowspan"){const u=e.nodeAt(c.pos);if(!u)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,{...u.attrs,rowspan:u.attrs.rowspan-c.n})}else if(c.type=="colwidth mismatch"){const u=e.nodeAt(c.pos);if(!u)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,{...u.attrs,colwidth:c.colwidth})}}let s,a;for(let l=0;l<i.length;l++)i[l]&&(s==null&&(s=l),a=l);for(let l=0,c=n+1;l<o.height;l++){const u=e.child(l),d=c+u.nodeSize,f=i[l];if(f>0){let p="cell";u.firstChild&&(p=u.firstChild.type.spec.tableRole);const h=[];for(let m=0;m<f;m++){const w=Ls(t.schema)[p].createAndFill();w&&h.push(w)}const y=(l==0||s==l-1)&&a==l?c+1:d-1;r.insert(r.mapping.map(y),h)}c=d}return r.setMeta(vZ,{fixTables:!0})}function xZ(t){if(!t.size)return null;let{content:e,openStart:n,openEnd:r}=t;for(;e.childCount==1&&(n>0&&r>0||e.child(0).type.spec.tableRole=="table");)n--,r--,e=e.child(0).content;const o=e.child(0),i=o.type.spec.tableRole,s=o.type.schema,a=[];if(i=="row")for(let l=0;l<e.childCount;l++){let c=e.child(l).content;const u=l?0:Math.max(0,n-1),d=l<e.childCount-1?0:Math.max(0,r-1);(u||d)&&(c=hx(Ls(s).row,new Se(c,u,d)).content),a.push(c)}else if(i=="cell"||i=="header_cell")a.push(n||r?hx(Ls(s).row,new Se(e,n,r)).content:e);else return null;return kZ(s,a)}function kZ(t,e){const n=[];for(let o=0;o<e.length;o++){const i=e[o];for(let s=i.childCount-1;s>=0;s--){const{rowspan:a,colspan:l}=i.child(s).attrs;for(let c=o;c<o+a;c++)n[c]=(n[c]||0)+l}}let r=0;for(let o=0;o<n.length;o++)r=Math.max(r,n[o]);for(let o=0;o<n.length;o++)if(o>=e.length&&e.push(te.empty),n[o]<r){const i=Ls(t).cell.createAndFill(),s=[];for(let a=n[o];a<r;a++)s.push(i);e[o]=e[o].append(te.from(s))}return{height:e.length,width:r,rows:e}}function hx(t,e){const n=t.createAndFill();return new x5(n).replace(0,n.content.size,e).doc}function $Z({width:t,height:e,rows:n},r,o){if(t!=r){const i=[],s=[];for(let a=0;a<n.length;a++){const l=n[a],c=[];for(let u=i[a]||0,d=0;u<r;d++){let f=l.child(d%l.childCount);u+f.attrs.colspan>r&&(f=f.type.createChecked(id(f.attrs,f.attrs.colspan,u+f.attrs.colspan-r),f.content)),c.push(f),u+=f.attrs.colspan;for(let p=1;p<f.attrs.rowspan;p++)i[a+p]=(i[a+p]||0)+f.attrs.colspan}s.push(te.from(c))}n=s,t=r}if(e!=o){const i=[];for(let s=0,a=0;s<o;s++,a++){const l=[],c=n[a%e];for(let u=0;u<c.childCount;u++){let d=c.child(u);s+d.attrs.rowspan>o&&(d=d.type.create({...d.attrs,rowspan:Math.max(1,o-d.attrs.rowspan)},d.content)),l.push(d)}i.push(te.from(l))}n=i,e=o}return{width:t,height:e,rows:n}}function SZ(t,e,n,r,o,i,s){const a=t.doc.type.schema,l=Ls(a);let c,u;if(o>e.width)for(let d=0,f=0;d<e.height;d++){const p=n.child(d);f+=p.nodeSize;const h=[];let y;p.lastChild==null||p.lastChild.type==l.cell?y=c||(c=l.cell.createAndFill()):y=u||(u=l.header_cell.createAndFill());for(let m=e.width;m<o;m++)h.push(y);t.insert(t.mapping.slice(s).map(f-1+r),h)}if(i>e.height){const d=[];for(let h=0,y=(e.height-1)*e.width;h<Math.max(e.width,o);h++){const m=h>=e.width?!1:n.nodeAt(e.map[y+h]).type==l.header_cell;d.push(m?u||(u=l.header_cell.createAndFill()):c||(c=l.cell.createAndFill()))}const f=l.row.create(null,te.from(d)),p=[];for(let h=e.height;h<i;h++)p.push(f);t.insert(t.mapping.slice(s).map(r+n.nodeSize-2),p)}return!!(c||u)}function o3(t,e,n,r,o,i,s,a){if(s==0||s==e.height)return!1;let l=!1;for(let c=o;c<i;c++){const u=s*e.width+c,d=e.map[u];if(e.map[u-e.width]==d){l=!0;const f=n.nodeAt(d),{top:p,left:h}=e.findCell(d);t.setNodeMarkup(t.mapping.slice(a).map(d+r),null,{...f.attrs,rowspan:s-p}),t.insert(t.mapping.slice(a).map(e.positionAt(s,h,n)),f.type.createAndFill({...f.attrs,rowspan:p+f.attrs.rowspan-s})),c+=f.attrs.colspan-1}}return l}function i3(t,e,n,r,o,i,s,a){if(s==0||s==e.width)return!1;let l=!1;for(let c=o;c<i;c++){const u=c*e.width+s,d=e.map[u];if(e.map[u-1]==d){l=!0;const f=n.nodeAt(d),p=e.colCount(d),h=t.mapping.slice(a).map(d+r);t.setNodeMarkup(h,null,id(f.attrs,s-p,f.attrs.colspan-(s-p))),t.insert(h+f.nodeSize,f.type.createAndFill(id(f.attrs,0,s-p))),c+=f.attrs.rowspan-1}}return l}function s3(t,e,n,r,o){let i=n?t.doc.nodeAt(n-1):t.doc;if(!i)throw new Error("No table found");let s=Sr.get(i);const{top:a,left:l}=r,c=l+o.width,u=a+o.height,d=t.tr;let f=0;function p(){if(i=n?d.doc.nodeAt(n-1):d.doc,!i)throw new Error("No table found");s=Sr.get(i),f=d.mapping.maps.length}SZ(d,s,i,n,c,u,f)&&p(),o3(d,s,i,n,l,c,a,f)&&p(),o3(d,s,i,n,l,c,u,f)&&p(),i3(d,s,i,n,a,u,l,f)&&p(),i3(d,s,i,n,a,u,c,f)&&p();for(let h=a;h<u;h++){const y=s.positionAt(h,l,i),m=s.positionAt(h,c,i);d.replace(d.mapping.slice(f).map(y+n),d.mapping.slice(f).map(m+n),new Se(o.rows[h-a],0,0))}p(),d.setSelection(new Vt(d.doc.resolve(n+s.positionAt(a,l,i)),d.doc.resolve(n+s.positionAt(u-1,c-1,i)))),e(d)}var EZ=E$({ArrowLeft:Zm("horiz",-1),ArrowRight:Zm("horiz",1),ArrowUp:Zm("vert",-1),ArrowDown:Zm("vert",1),"Shift-ArrowLeft":Ym("horiz",-1),"Shift-ArrowRight":Ym("horiz",1),"Shift-ArrowUp":Ym("vert",-1),"Shift-ArrowDown":Ym("vert",1),Backspace:Jm,"Mod-Backspace":Jm,Delete:Jm,"Mod-Delete":Jm});function zg(t,e,n){return n.eq(t.selection)?!1:(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function Zm(t,e){return(n,r,o)=>{if(!o)return!1;const i=n.selection;if(i instanceof Vt)return zg(n,r,Oe.near(i.$headCell,e));if(t!="horiz"&&!i.empty)return!1;const s=vM(o,t,e);if(s==null)return!1;if(t=="horiz")return zg(n,r,Oe.near(n.doc.resolve(i.head+e),e));{const a=n.doc.resolve(s),l=gM(a,t,e);let c;return l?c=Oe.near(l,1):e<0?c=Oe.near(n.doc.resolve(a.before(-1)),-1):c=Oe.near(n.doc.resolve(a.after(-1)),1),zg(n,r,c)}}}function Ym(t,e){return(n,r,o)=>{if(!o)return!1;const i=n.selection;let s;if(i instanceof Vt)s=i;else{const l=vM(o,t,e);if(l==null)return!1;s=new Vt(n.doc.resolve(l))}const a=gM(s.$headCell,t,e);return a?zg(n,r,new Vt(s.$anchorCell,a)):!1}}function Jm(t,e){const n=t.selection;if(!(n instanceof Vt))return!1;if(e){const r=t.tr,o=Ls(t.schema).cell.createAndFill().content;n.forEachCell((i,s)=>{i.content.eq(o)||r.replace(r.mapping.map(s+1),r.mapping.map(s+i.nodeSize-1),new Se(o,0,0))}),r.docChanged&&e(r)}return!0}function CZ(t,e){const n=t.state.doc,r=l0(n.resolve(e));return r?(t.dispatch(t.state.tr.setSelection(new Vt(r))),!0):!1}function TZ(t,e,n){if(!c0(t.state))return!1;let r=xZ(n);const o=t.state.selection;if(o instanceof Vt){r||(r={width:1,height:1,rows:[te.from(hx(Ls(t.state.schema).cell,n))]});const i=o.$anchorCell.node(-1),s=o.$anchorCell.start(-1),a=Sr.get(i).rectBetween(o.$anchorCell.pos-s,o.$headCell.pos-s);return r=$Z(r,a.right-a.left,a.bottom-a.top),s3(t.state,t.dispatch,s,a,r),!0}else if(r){const i=F$(t.state),s=i.start(-1);return s3(t.state,t.dispatch,s,Sr.get(i.node(-1)).findCell(i.pos-s),r),!0}else return!1}function AZ(t,e){var n;if(e.ctrlKey||e.metaKey)return;const r=a3(t,e.target);let o;if(e.shiftKey&&t.state.selection instanceof Vt)i(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&(o=l0(t.state.selection.$anchor))!=null&&((n=Zv(t,e))==null?void 0:n.pos)!=o.pos)i(o,e),e.preventDefault();else if(!r)return;function i(l,c){let u=Zv(t,c);const d=xa.getState(t.state)==null;if(!u||!B$(l,u))if(d)u=l;else return;const f=new Vt(l,u);if(d||!t.state.selection.eq(f)){const p=t.state.tr.setSelection(f);d&&p.setMeta(xa,l.pos),t.dispatch(p)}}function s(){t.root.removeEventListener("mouseup",s),t.root.removeEventListener("dragstart",s),t.root.removeEventListener("mousemove",a),xa.getState(t.state)!=null&&t.dispatch(t.state.tr.setMeta(xa,-1))}function a(l){const c=l,u=xa.getState(t.state);let d;if(u!=null)d=t.state.doc.resolve(u);else if(a3(t,c.target)!=r&&(d=Zv(t,e),!d))return s();d&&i(d,c)}t.root.addEventListener("mouseup",s),t.root.addEventListener("dragstart",s),t.root.addEventListener("mousemove",a)}function vM(t,e,n){if(!(t.state.selection instanceof We))return null;const{$head:r}=t.state.selection;for(let o=r.depth-1;o>=0;o--){const i=r.node(o);if((n<0?r.index(o):r.indexAfter(o))!=(n<0?0:i.childCount))return null;if(i.type.spec.tableRole=="cell"||i.type.spec.tableRole=="header_cell"){const a=r.before(o),l=e=="vert"?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(l)?a:null}}return null}function a3(t,e){for(;e&&e!=t.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e;return null}function Zv(t,e){const n=t.posAtCoords({left:e.clientX,top:e.clientY});return n&&n?l0(t.state.doc.resolve(n.pos)):null}new vt("tableColumnResizing");function wM(t){const e=t.selection,n=F$(t),r=n.node(-1),o=n.start(-1),i=Sr.get(r);return{...e instanceof Vt?i.rectBetween(e.$anchorCell.pos-o,e.$headCell.pos-o):i.findCell(n.pos-o),tableStart:o,map:i,table:r}}function NZ(t){return function(e,n){if(!c0(e))return!1;if(n){const r=Ls(e.schema),o=wM(e),i=e.tr,s=o.map.cellsInRect(t=="column"?{left:o.left,top:0,right:o.right,bottom:o.map.height}:t=="row"?{left:0,top:o.top,right:o.map.width,bottom:o.bottom}:o),a=s.map(l=>o.table.nodeAt(l));for(let l=0;l<s.length;l++)a[l].type==r.header_cell&&i.setNodeMarkup(o.tableStart+s[l],r.cell,a[l].attrs);if(i.steps.length==0)for(let l=0;l<s.length;l++)i.setNodeMarkup(o.tableStart+s[l],r.header_cell,a[l].attrs);n(i)}return!0}}function l3(t,e,n){const r=e.map.cellsInRect({left:0,top:0,right:t=="row"?e.map.width:1,bottom:t=="column"?e.map.height:1});for(let o=0;o<r.length;o++){const i=e.table.nodeAt(r[o]);if(i&&i.type!==n.header_cell)return!1}return!0}function j$(t,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?NZ(t):function(n,r){if(!c0(n))return!1;if(r){const o=Ls(n.schema),i=wM(n),s=n.tr,a=l3("row",i,o),l=l3("column",i,o),u=(t==="column"?a:t==="row"?l:!1)?1:0,d=t=="column"?{left:0,top:u,right:1,bottom:i.map.height}:t=="row"?{left:u,top:0,right:i.map.width,bottom:1}:i,f=t=="column"?l?o.cell:o.header_cell:t=="row"?a?o.cell:o.header_cell:o.cell;i.map.cellsInRect(d).forEach(p=>{const h=p+i.tableStart,y=s.doc.nodeAt(h);y&&s.setNodeMarkup(h,f,y.attrs)}),r(s)}return!0}}j$("row",{useDeprecatedLogic:!0});j$("column",{useDeprecatedLogic:!0});j$("cell",{useDeprecatedLogic:!0});function RZ(t,e){if(e<0){const n=t.nodeBefore;if(n)return t.pos-n.nodeSize;for(let r=t.index(-1)-1,o=t.before();r>=0;r--){const i=t.node(-1).child(r),s=i.lastChild;if(s)return o-1-s.nodeSize;o-=i.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;const n=t.node(-1);for(let r=t.indexAfter(-1),o=t.after();r<n.childCount;r++){const i=n.child(r);if(i.childCount)return o+1;o+=i.nodeSize}}return null}function c3(t){return function(e,n){if(!c0(e))return!1;const r=RZ(F$(e),t);if(r==null)return!1;if(n){const o=e.doc.resolve(r);n(e.tr.setSelection(We.between(o,hZ(o))).scrollIntoView())}return!0}}function PZ({allowTableNodeSelection:t=!1}={}){return new ht({key:xa,state:{init(){return null},apply(e,n){const r=e.getMeta(xa);if(r!=null)return r==-1?null:r;if(n==null||!e.docChanged)return n;const{deleted:o,pos:i}=e.mapping.mapResult(n);return o?null:i}},props:{decorations:mZ,handleDOMEvents:{mousedown:AZ},createSelectionBetween(e){return xa.getState(e.state)!=null?e.state.selection:null},handleTripleClick:CZ,handleKeyDown:EZ,handlePaste:TZ},appendTransaction(e,n,r){return bZ(r,wZ(r,n),t)}})}const u0=new vt("core-editor_intersectionObserverPlugin"),_M=new vt("EditorPluginMetadataKey"),xM=new vt("menuKey"),OZ=new vt("searchPluginKey");function Rd(t){const e=_M.getState(t);if(!e)throw new Error("EditorPluginMetadata cannot be undefined");return e}function kM(t,e,n){const r=t.getState(e),o=t.getState(n);return r!==o}const IZ=(t,e)=>n=>{Array.isArray(t)||(t=[t]);for(let r=0,o=t.length;r<o;r++){const i=An(t[r])(n.selection);if(i){const s=LZ(i.pos,e)(n);if(s!==n)return s}}return n},DZ=t=>e=>{if(yx(e.selection)){const{$from:n,$to:r}=e.selection;if(t instanceof te&&n.parent.canReplace(n.index(),n.indexAfter(),t)||n.parent.canReplaceWith(n.index(),n.indexAfter(),t.type))return j1(e.replaceWith(n.pos,r.pos,t).setSelection(new Me(e.doc.resolve(n.pos))))}return e},mx=(t,e=1)=>n=>{const r=Oe.findFrom(n.doc.resolve(t),e,!0);return r?n.setSelection(r):n},gx=t=>t.type&&t.type.spec.selectable,MZ=t=>gx(t)&&t.type.isLeaf,Yv=(t,e,n)=>MZ(t)?n.setSelection(new Me(n.doc.resolve(e))):mx(e)(n),qh=(t,e,n)=>r=>{const o=typeof e=="number",{$from:i}=r.selection,s=o?r.doc.resolve(e):yx(r.selection)?r.doc.resolve(i.pos+1):i,{parent:a}=s;if(yx(r.selection)&&n){const l=r;if(r=DZ(t)(r),l!==r)return r}if(BZ(a)){const l=r;if(r=IZ(a.type,t)(r),l!==r){const c=gx(t)?s.before(s.depth):s.pos;return Yv(t,c,r)}}if(u3(s,t)){r.insert(s.pos,t);const l=o?s.pos:gx(t)?r.selection.$anchor.pos-1:r.selection.$anchor.pos;return j1(Yv(t,l,r))}for(let l=s.depth;l>0;l--){const c=s.after(l),u=r.doc.resolve(c);if(u3(u,t))return r.insert(c,t),j1(Yv(t,c,r))}return r},yx=t=>t instanceof Me,$M=(t,e)=>Array.isArray(t)&&t.indexOf(e.type)>-1||e.type===t,j1=t=>Object.assign(Object.create(t),t).setTime(Date.now()),LZ=(t,e)=>n=>{const r=n.doc.nodeAt(t),o=n.doc.resolve(t);if(FZ(o,e)){n=n.replaceWith(t,t+r.nodeSize,e);const i=n.selection.$from.pos-1;return n=mx(Math.max(i,0),-1)(n),n=mx(n.selection.$from.start())(n),j1(n)}return n},FZ=(t,e)=>{const n=t.node(t.depth);return n&&n.type.validContent(e instanceof te?e:te.from(e))},u3=(t,e)=>{const n=t.index();return e instanceof te?t.parent.canReplace(n,n,e):e instanceof Hr?t.parent.canReplaceWith(n,n,e.type):!1},BZ=t=>!t||t.type.name==="paragraph"&&t.nodeSize===2,z$=t=>({$from:e})=>jZ(e,t),jZ=(t,e)=>{for(let n=t.depth;n>0;n--){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}},zZ=t=>e=>!!z$(t)(e),An=t=>e=>z$(n=>$M(t,n))(e),q$=t=>e=>zZ(n=>$M(t,n))(e),qZ=t=>{const{nodeBefore:e}=t.$from,n=Oe.findFrom(t.$from,-1);if(n&&e){const r=An(e.type)(n);return r?r.pos:n.$from.pos}},SM=(t,e=!0)=>{if(!t)throw new Error('Invalid "node" parameter');const n=[];return t.descendants((r,o)=>{if(n.push({node:r,pos:o}),!e)return!1}),n},d0=(t,e,n)=>{if(t){if(!e)throw new Error('Invalid "predicate" parameter')}else throw new Error('Invalid "node" parameter');return SM(t,n).filter(r=>e(r.node))},WZ=(t,e,n)=>d0(t,r=>r.type===e,n),Kn={mac:!1,ie:!1,ie_version:0,gecko:!1,chrome:!1,chrome_version:0,android:!1,ios:!1,webkit:!1};if(typeof navigator!="undefined"&&typeof document!="undefined"){const t=/Edge\/(\d+)/.exec(navigator.userAgent),e=/MSIE \d/.test(navigator.userAgent),n=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);Kn.mac=/Mac/.test(navigator.platform);let r=Kn.ie=!!(e||n||t);Kn.ie_version=e?document.documentMode||6:n?+n[1]:t?+t[1]:null,Kn.gecko=!r&&/gecko\/\d/i.test(navigator.userAgent),Kn.chrome=!r&&/Chrome\//.test(navigator.userAgent),Kn.chrome_version=parseInt((navigator.userAgent.match(/Chrome\/(\d{2})/)||[])[1]||"0",10),Kn.android=/Android \d/.test(navigator.userAgent),Kn.ios=!r&&/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),Kn.webkit=!r&&!!document.documentElement&&"WebkitAppearance"in document.documentElement.style}const UZ=Kn.chrome&&!Kn.android&&Kn.chrome_version>=58;let W$;try{W$="production"}catch(t){}const VZ=W$==="production",Wh=W$==="test";function Lt(t,e){if(t===void 0)throw new Error(`assertion failed: ${e}`)}function HZ(t,...e){const n=[t,...e];return function(o){return n.reduceRight((i,s)=>s(i),o)}}class Xm{constructor(e,n,r,o){this.start=e,this.end=n,this.match=r,this._sourceString=o}get subString(){return this._sourceString.slice(this.start,this.end)}}function f0(t,e){const n=[];let r=0,o;for(;o=t.exec(e);){const s=o.index,a=s+o[0].length;r!==s&&n.push(new Xm(r,s,!1,e)),n.push(new Xm(s,a,!0,e)),r=a}if(n.length===0)return[new Xm(0,e.length,!1,e)];const i=n[n.length-1]&&n[n.length-1].end;return i&&i!==e.length&&n.push(new Xm(i,e.length,!1,e)),n}function U$(t=10){return Math.random().toString(36).substring(2,15).slice(0,t)}function Qm(t,e,n){const r=setTimeout(t,n);e.addEventListener("abort",()=>{clearTimeout(r)},{once:!0})}function KZ(t=20){return new Promise(e=>setTimeout(e,t))}function EM(t,e){return Object.fromEntries(Object.entries(t).filter(([n,r])=>e(r,n)))}function _r(t){return Object.fromEntries(t.filter(e=>e[0]!=null))}function GZ(){let t=Promise.resolve();return{add(e){return new Promise((n,r)=>{const o=async()=>{try{return{rejected:!1,value:await e()}}catch(i){return{rejected:!0,value:i}}};t=t.then(()=>o().then(({value:i,rejected:s})=>{s?r(i):n(i)}))})}}}function ZZ(t){let e=[],n=null;const r=(...o)=>{e=o,!n&&(n=requestAnimationFrame(()=>{n=null,t(...e)}))};return r.cancel=()=>{n&&(cancelAnimationFrame(n),n=null)},r}const Po=Wh||VZ?()=>{}:console.warn.bind(console,"Warning in bangle.js:");function YZ(t,{tag:e="div",content:n,ignoreAttrs:r=[],parsingPriority:o=51}={}){const i=s=>JSON.stringify(EM(s.attrs||{},(a,l)=>!r.includes(l)));return{toDOM:s=>{const a=[e,{"data-bangle-name":t,"data-bangle-attrs":i(s)}];return n!==void 0&&(typeof n=="function"?a.push(n(s)):a.push(n)),a},parseDOM:[{priority:o,tag:`${e}[data-bangle-name="${t}"]`,getAttrs:s=>{const a=s.getAttribute("data-bangle-attrs");return a?JSON.parse(a):{}}}]}}function JZ(t){const{dom:e,contentDOM:n}=Vr.renderSpec(window.document,t);if(n)throw new Error("createElement does not support creating contentDOM");return e}class dt{static flatMap(e,n){if(dt.isLeft(e))return dt.left(e.left);if(dt.isRight(e))return n(e.right,{left:dt.left});throw new Error("Either.flatMap: unknown type")}static fold(e,n,r){if(dt.isLeft(e))return dt.left(n(e.left));if(dt.isRight(e))return dt.right(r(e.right));throw new Error("Either.fold: unknown type")}static isLeft(e){return e.type==="left"}static isRight(e){return e.type==="right"}static left(e){return{left:e,right:void 0,type:"left"}}static map(e,n){return dt.fold(e,r=>r,n)}static mapLeft(e,n){return dt.fold(e,n,r=>r)}static right(e){return{left:void 0,right:e,type:"right"}}static unwrap(e){if(dt.isLeft(e))return[e.left,void 0];if(dt.isRight(e))return[void 0,e.right];throw new Error("Either.unwrap: unknown type")}static value(e){if(dt.isLeft(e))return e.left;if(dt.isRight(e))return e.right;throw new Error("Either.value: unknown type")}}class XZ{constructor(){this._callbacks={}}destroy(){this._callbacks={}}emit(e,n){const r=this._callbacks[e];return r&&r.forEach(o=>o(n)),this}off(e,n){if(!arguments.length)this._callbacks={};else{const r=this._callbacks?this._callbacks[e]:null;r&&(n?this._callbacks[e]=r.filter(o=>o!==n):this._callbacks[e]=[])}return this}on(e,n){return this._callbacks[e]||(this._callbacks[e]=[]),this._callbacks[e].push(n),this}}function QZ(t,e,n){let r=[];return n.doc.nodesBetween(t,e,(o,i)=>{r=[...r,...o.marks.map(s=>({start:i,end:i+o.nodeSize,mark:s}))]}),r}function bc(t,e){return new Gs(t,(n,r,o,i)=>{const{tr:s}=n,a=r.length-1;let l=i,c=o;const u=r[a],d=r[0],f=r[a-1];if(u!=null&&d!=null&&f!=null){const p=o+d.indexOf(f),h=p+f.length-1,y=p+f.lastIndexOf(u),m=y+u.length;if(QZ(o,i,n).filter(x=>x.mark.type.excludes(e)).filter(x=>x.end>p).length)return null;m<h&&s.delete(m,h),y>p&&s.delete(p,y),c=p,l=c+u.length}return s.addMark(c,l,e.create()),s.removeStoredMark(e),s})}function vc(t,e,n){const r=(o,i)=>{const s=[];return o.forEach(a=>{if(a.isText){const{text:l,marks:c}=a;let u=0,d;const f=!!c.filter(p=>p.type.name==="link")[0];for(;!f&&(d=t.exec(l))!==null;)if(i&&i.type.allowsMarkType(e)&&d[1]){const p=d.index,h=p+d[0].length,y=p+d[0].indexOf(d[1]),m=y+d[1].length,w=n instanceof Function?n(d):n;p>0&&s.push(a.cut(u,p)),s.push(a.cut(y,m).mark(e.create(w).addToSet(a.marks))),u=h}u<l.length&&s.push(a.cut(u))}else s.push(a.copy(r(a.content,a)))}),te.fromArray(s)};return new ht({props:{transformPasted:o=>new Se(r(o.content),o.openStart,o.openEnd)}})}let eY=0,tY=Math.random(),nY=class extends WeakMap{get(e){let n=super.get(e);return n||(n=(eY++).toString()+"-"+tY,this.set(e,n),n)}};const Tu=new nY;class Pd extends Oe{}function no(t,e){requestAnimationFrame(()=>{e(t.state,t.dispatch,t)})}function mt(t,e){return(n,r,o)=>e==null||(Array.isArray(t)||(t=[t]),t.some(i=>!i(n,o)))?!1:e(n,r,o)||!1}function Uh(t){return e=>{const{from:n,$from:r,to:o,empty:i}=e.selection;return i?!!t.isInSet(e.tr.storedMarks||r.marks()):!!e.doc.rangeHasMark(n,o,t)}}const rY=(t,e)=>Number.isInteger(t)&&t>=0&&t<e.content.size,oY=(t,e)=>{const{bulletList:n,orderedList:r}=e;return[n,r].includes(t)};function iY(t,e){const{from:n,to:r}=t.selection;let o=[];t.doc.nodesBetween(n,r,s=>{o=[...o,...s.marks]});const i=o.find(s=>s.type.name===e.name);return i?i.attrs:{}}function CM(t){const e=n=>n.isText?!!n.textContent.trim():n.type.name!=="hardBreak";if(t.isInline)return e(t);if(t.isBlock&&(t.isLeaf||t.isAtom))return!0;if(!t.childCount)return!1;for(let n=0;n<t.childCount;n++){const r=t.child(n);if(CM(r))return!0}return!1}function sY(t){if(t&&t.textContent)return!1;if(!t||!t.childCount||t.childCount===1&&d3(t.firstChild))return!0;const e=[],n=[];return t.forEach(r=>{r.isInline?n.push(r):e.push(r)}),!n.length&&!e.filter(r=>!!r.childCount&&!(r.childCount===1&&d3(r.firstChild))||r.isAtom).length}function d3(t){return!t||t.type.name==="paragraph"&&!t.textContent&&!t.childCount}function TM(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function aY(t,e,n,r){return lY(t,e,n).filter(o=>o.type!==r).length===0}function lY(t,e,n){const r=[],o=cY(t,e).depth;let i=t.resolve(e.start(o));for(;i.pos<=n.start(n.depth);){const s=Math.min(i.depth,o),a=i.node(s);if(a&&r.push(a),s===0)break;let l=t.resolve(i.after(s));if(l.start(s)>=t.nodeSize-2)break;l.depth!==i.depth&&(l=t.resolve(l.pos+2)),l.depth?i=t.resolve(l.start(l.depth)):i=t.resolve(l.end(l.depth))}return r}function cY(t,e){const n=["blockquote","bulletList","orderedList"];if(e.depth===1)return e;let r=e.node(e.depth),o=e;for(;e.depth>=1;)e=t.resolve(e.before(e.depth)),r=e.node(e.depth),r&&n.indexOf(r.type.name)!==-1&&(o=e);return o}const f3=t=>{const{empty:e,$from:n}=t.selection;return e&&(n.parentOffset===0||t.selection instanceof Pd)},uY=(t,e)=>{let n=null,{from:r,to:o}=t.tr.selection;return t.doc.nodesBetween(r,o,(i,s,a)=>{if(i.isText||s<r||s>o||!a)return!0;i.marks.forEach(l=>{if(!a.type.allowsMarkType(l.type)||e&&!e.allowsMarkType(l.type)){const c=i.marks.filter(f=>f.type!==l.type),u=s>0?s-1:0;let d=t.doc.nodeAt(u);if(!d||d.isText)return;n=(n||t.tr).setNodeMarkup(u,void 0,i.attrs,c)}})},r),n},dY=(t,e,n)=>{let r=n.depth;const{bulletList:o,orderedList:i}=e.nodes;let s=t;s||({listItem:s}=e.nodes);for(let a=n.depth;a>0;a--){const l=n.node(a);if((l.type===o||l.type===i)&&(r=a),l.type!==o&&l.type!==i&&l.type!==s)break}return r-1};function fY(t,e){const n=[];for(let r=0;r<t.childCount;r++)n.push(e(t.child(r),r,t instanceof te?t:t.content));return n}const pY=t=>{const{$from:e}=t.selection;return e.depth>1?t.selection instanceof Pd&&e.parentOffset===0||e.index(e.depth-1)===0:!0};function hY(t,e){const n=AM(t.content,e);return new Se(n,t.openStart,t.openEnd)}function AM(t,e,n){const r=[];for(let o=0,i=t.childCount;o<i;o++){const s=t.child(o),a=s.isLeaf?e(s,n,o):e(s.copy(AM(s.content,e,s)),n,o);a&&(a instanceof te?r.push(...mY(a)):Array.isArray(a)?r.push(...a):r.push(a))}return te.fromArray(r)}function mY(t){return t.content}function Lo(t,e="above",n=!1,r){const o=e==="above",i=n?-1:void 0;return(s,a)=>{const l=o?s.selection.$from.before(i):s.selection.$from.after(i),c=t.createAndFill(r),u=s.tr;let d=qh(c,l)(s.tr);return u===d?!1:(a&&a(d.scrollIntoView()),!0)}}function V$(t,e,n,r){let o={start:-1,end:-1};return e.nodesBetween(n,r,(i,s)=>{if(o.start>-1)return!1;o.start===-1&&t.isInSet(i.marks)&&(o={start:s,end:s+Math.max(i.textContent.length,1)})}),o}function H$(t,e){return new ht({key:t,state:{init(){return e},apply(n,r){return r}}})}function gY(t){const e=document.createElement("div"),n=Vr.fromSchema(t.schema).serializeFragment(t.doc.content);return e.appendChild(n),e.innerHTML}function NM(t,e){return t&&(n=>{n.isGeneric&&e(n),t(n)})}function Ee(t,e){const n=t instanceof Aa?t.schema.nodes[e]:t.nodes[e];return Lt(n,`nodeType ${e} not found`),n}function br(t){const e=t instanceof Aa?t.schema.nodes.paragraph:t.nodes.paragraph;return Lt(e,"nodeType paragraph not found"),e}function yY(t,e){const{$from:n}=t.selection;let o=n.start(e),i=n.end(e);return We.create(t.doc,o,i)}function p0(t){return(e,n,r)=>{if(!e.selection.empty)return!1;const o=An(t)(e.selection);if(!o)return!1;const i=e.selection;let s=e.tr;s=s.setSelection(yY(e,o.depth)),n&&n(s),document.execCommand("copy");const a=r.state.tr;return n&&n(a.setSelection(Oe.near(a.doc.resolve(i.$from.pos)))),!0}}function h0(t){return(e,n)=>{if(!e.selection.empty)return!1;const r=An(t)(e.selection);if(!r||!r.node)return!1;let o=e.tr;return o=o.setSelection(Me.create(o.doc,r.pos)),n&&n(o),document.execCommand("cut"),!0}}function Zs(t,e){return e=Array.isArray(e)?e:[e],n=>{const r=An(t)(n.selection);if(!r)return!1;const o=r.depth-1;if(o<0)return!1;const i=n.selection.$from.node(o);return e.includes(i.type)}}function Fs(t,e="UP"){const n=e==="DOWN";return(r,o)=>{if(!r.selection.empty)return!1;const{$from:i}=r.selection,s=An(t)(r.selection);if(!s)return!1;const{node:a}=s,l=s.depth-1,c=i.node(l),u=i.start(l);if(a.type!==t)return!1;const d=fY(c,$=>$);let f=d.indexOf(a),p=n?f+1:f-1;if(p>=d.length||p<0)return!1;const h=d[p].nodeSize;[d[f],d[p]]=[d[p],d[f]];let y=r.tr,m=u,w=i.end(l);const x=new Se(te.fromArray(d),0,0);return y=y.step(new Zn(m,w,x,!1)),y=y.setSelection(Oe.near(y.doc.resolve(n?i.pos+h:i.pos-h))),o&&o(y.scrollIntoView()),!0}}function K$(t){return(e,n)=>{const r=An(t)(e.selection);if(!r)return!1;if(n){const{start:o}=r;n(e.tr.setSelection(We.create(e.doc,o)))}return!0}}function G$(t){return(e,n)=>{const r=An(t)(e.selection);if(!r)return!1;if(n){const{node:o,start:i}=r;n(e.tr.setSelection(We.create(e.doc,i+o.content.size)))}return!0}}const RM=vY,bY="doc";function vY({content:t="block+"}={}){return{type:"node",topNode:!0,name:bY,schema:{content:t}}}var PM=Object.freeze({__proto__:null,spec:RM});class Z${constructor(e,n){this.name=e,this.plugins=n}}const Y$="editorStateCounter",wY=kY,_Y=new vt(Y$),xY=new vt(Y$);function kY(){return()=>new Z$(Y$,[new ht({key:_Y,state:{init(t,e){return 0},apply(t,e,n,r){return t.docChanged?e+1:e}}}),new ht({key:xY,state:{init(t,e){return 0},apply(t,e,n,r){return r.selection.eq(n&&n.selection)?e:e+1}}})])}const OM=EY,$Y={undo:J$,redo:z1},IM={undo:"Mod-z",redo:"Mod-y",redoAlt:"Shift-Mod-z"},SY="history";function EY({historyOpts:t={},keybindings:e=IM}={}){return()=>new Z$(SY,[JG(t),e&&en(_r([[e.undo,J$()],[e.redo,z1()],[e.redoAlt,z1()]]))])}function J$(){return pM}function z1(){return hM}var CY=Object.freeze({__proto__:null,plugins:OM,commands:$Y,defaultKeys:IM,undo:J$,redo:z1});const DM=RY,TY=PY,AY={convertToParagraph:X$,jumpToStartOfParagraph:zM,jumpToEndOfParagraph:qM,queryIsParagraph:FM,queryIsTopLevelParagraph:LM,insertEmptyParagraphAbove:BM,insertEmptyParagraphBelow:jM},MM={jumpToEndOfParagraph:Kn.mac?"Ctrl-e":"Ctrl-End",jumpToStartOfParagraph:Kn.mac?"Ctrl-a":"Ctrl-Home",moveDown:"Alt-ArrowDown",moveUp:"Alt-ArrowUp",emptyCopy:"Mod-c",emptyCut:"Mod-x",insertEmptyParaAbove:"Mod-Shift-Enter",insertEmptyParaBelow:"Mod-Enter",convertToParagraph:"Ctrl-Shift-0"},NY="paragraph";function RY(){return{type:"node",name:NY,schema:{content:"inline*",group:"block",draggable:!1,parseDOM:[{tag:"p"}],toDOM:()=>["p",0]},markdown:{toMarkdown(t,e){t.renderInline(e),t.closeBlock(e)},parseMarkdown:{paragraph:{block:"paragraph"}}}}}function PY({keybindings:t=MM}={}){return({schema:e})=>{const n=br(e),r=Zs(n,Ee(e,"doc"));return[t&&en(_r([[t.convertToParagraph,X$()],[t.moveUp,mt(r,Fs(n,"UP"))],[t.moveDown,mt(r,Fs(n,"DOWN"))],[t.jumpToStartOfParagraph,K$(n)],[t.jumpToEndOfParagraph,G$(n)],[t.emptyCopy,mt(r,p0(n))],[t.emptyCut,mt(r,h0(n))],[t.insertEmptyParaAbove,mt(r,Lo(n,"above"))],[t.insertEmptyParaBelow,mt(r,Lo(n,"below"))]]))]}}function X$(){return(t,e)=>nd(br(t))(t,e)}function LM(){return t=>{const e=br(t);return Zs(e,Ee(t,"doc"))(t)}}function FM(){return t=>{const e=br(t);return!!An(e)(t.selection)}}function BM(){return(t,e,n)=>{const r=br(t);return mt(Zs(r,Ee(t,"doc")),Lo(r,"above"))(t,e,n)}}function jM(){return(t,e,n)=>{const r=br(t);return mt(Zs(r,Ee(t,"doc")),Lo(r,"below"))(t,e,n)}}function zM(){return(t,e)=>{const n=br(t);return K$(n)(t,e)}}function qM(){return(t,e)=>{const n=br(t);return G$(n)(t,e)}}var Vh=Object.freeze({__proto__:null,spec:DM,plugins:TY,commands:AY,defaultKeys:MM,convertToParagraph:X$,queryIsTopLevelParagraph:LM,queryIsParagraph:FM,insertEmptyParagraphAbove:BM,insertEmptyParagraphBelow:jM,jumpToStartOfParagraph:zM,jumpToEndOfParagraph:qM});const WM=IY,OY="text";function IY(){return{type:"node",name:OY,schema:{group:"inline"},markdown:{toMarkdown(t,e){t.text(e.text)}}}}var UM=Object.freeze({__proto__:null,spec:WM});function DY(t,e,{metadata:n,editorProps:r,defaultPlugins:o=!0,dropCursorOpts:i,transformPlugins:s=a=>a}={}){const l={schema:t.schema,specRegistry:t,metadata:n};let[c,u]=p3(e,l);if(o){let d=[];u.has("history")||d.push(OM()),u.has("editorStateCounter")||d.push(wY()),c=c.concat(p3(d,l)[0]),c=MY(c),c.push(en(XH),QH(i),BG())}if(r&&c.push(new ht({props:r})),c=c.filter(Boolean),c=s(c),c.some(d=>!(d instanceof ht)))throw Po("You are either using multiple versions of the library or not returning a Plugin class in your plugins. Investigate :",c.find(d=>!(d instanceof ht))),new Error("Invalid plugin");return LY(c,t),c}function MY(t,{inputRules:e=!0,undoInputRule:n=!0}={}){let r=[],o=[];return t.forEach(i=>{if(i instanceof Gs){o.push(i);return}r.push(i)}),e&&(t=[...r,eZ({rules:o})]),n&&t.push(en({Backspace:tZ})),t}function LY(t,e){const n=t.filter(o=>o.props&&o.props.nodeViews),r=new Map;for(const o of n)for(const i of Object.keys(o.props.nodeViews)){if(!e.schema.nodes[i])throw Po(`When loading your plugins, we found nodeView implementation for the node '${i}' did not have a corresponding spec. Check the plugin:`,o,"and your specRegistry",e),new Error(`NodeView validation failed. Spec for '${i}' not found.`);if(r.has(i))throw Po(`When loading your plugins, we found more than one nodeView implementation for the node '${i}'. Bangle can only have a single nodeView implementation, please check the following two plugins`,o,r.get(i)),new Error(`NodeView validation failed. Duplicate nodeViews for '${i}' found.`);r.set(i,o)}}function p3(t,e){const n=new Set,r=o=>{if(Array.isArray(o))return o.flatMap(i=>r(i)).filter(Boolean);if(o instanceof Z$){if(n.has(o.name))throw new Error(`Duplicate names of pluginGroups ${o.name} not allowed.`);return n.add(o.name),r(o.plugins)}if(typeof o=="function"){if(!e)throw new Error("Found a function but no payload");return r(o(e))}return o};return[r(t),n]}class Hh{constructor(e=[],{defaultSpecs:n=!0}={}){let r=jY(e);r.forEach(BY);const o=new Set(r.map(i=>i.name));if(r.length!==o.size)throw Po("The specRegistry has one or more specs with the same name",r),new Error("Duplicate spec error, please check your specRegistry");if(n){const i=[];o.has("paragraph")||i.unshift(DM()),o.has("text")||i.unshift(WM()),o.has("doc")||i.unshift(RM()),r=[...i,...r]}this._spec=r,this._schema=FY(this._spec),this._options=Object.fromEntries(this._spec.filter(i=>i.options).map(i=>[i.name,i.options]))}get options(){return this._options}get schema(){return this._schema}get spec(){return this._spec}}function FY(t){let e=[],n=[],r;for(const o of t)if(o.type==="node")e.push([o.name,o.schema]),o.topNode===!0&&(r=o.name);else if(o.type==="mark")n.push([o.name,o.schema]);else{let i=o;throw new Error("Unknown type: "+i.type)}return new c5({topNode:r,nodes:Object.fromEntries(e),marks:Object.fromEntries(n)})}function BY(t){if(!t.name)throw Po("The spec didn't have a name field",t),new Error("Invalid spec. Spec must have a name");if(!["node","mark"].includes(t.type))throw Po("The spec must be of type node, mark or component ",t),new Error("Invalid spec type");if(["node","mark"].includes(t.type)&&!t.schema)throw Po("The spec of type 'mark' or 'node' must have a schema field",t),new Error("Invalid spec schema")}function jY(t){const e=n=>Array.isArray(n)?n.flatMap(r=>e(r)).filter(r=>!!r):n==null||n===!1?[]:[n];return e(t)}class Q${constructor({specRegistry:e,specs:n,plugins:r=()=>[],initialValue:o,editorProps:i,pmStateOpts:s,pluginMetadata:a,dropCursorOpts:l}={}){if(n&&e)throw new Error("Cannot have both specs and specRegistry defined");e||(e=new Hh(n)),Array.isArray(r)&&console.warn("The use plugins as an array is deprecated, please pass a function which returns an array of plugins. Refer: https://bangle.dev/docs/api/core#bangleeditorstate"),this.specRegistry=e;const c=this.specRegistry.schema,u=DY(e,r,{editorProps:i,metadata:a,dropCursorOpts:l});this.pmState=Aa.create({schema:c,doc:zY({schema:c,content:o}),plugins:u,...s})}}const zY=({schema:t,content:e,parseOptions:n})=>{const r={type:"doc",content:[{type:"paragraph"}]};if(e==null)return t.nodeFromJSON(r);if(e instanceof Hr)return e;if(typeof e=="object")return t.nodeFromJSON(e);if(typeof e=="string"){const o=document.createElement("div");return o.innerHTML=e.trim(),Xu.fromSchema(t).parse(o,n)}};let VM=class{constructor(e,{focusOnInit:n=!0,state:r,pmViewOpts:o={}}){if(this.destroyed=!1,!(r instanceof Q$))throw new Error("state is required and must be an instance of BangleEditorState");this.view=new uM(e,{state:r.pmState,dispatchTransaction:i=>{const s=this.view.state.apply(i);this.view.updateState(s)},attributes:{class:"bangle-editor"},...o}),n&&this.focusView()}destroy(){if(!this.destroyed){if(this.view.isDestroyed){this.destroyed=!0;return}this.destroyed=!0,this.view.destroy()}}focusView(){Wh||this.view.hasFocus()||this.view.focus()}toHTMLString(){return gY(this.view.state)}};function h3(t){const{dom:e,contentDOM:n}=Vr.renderSpec(window.document,t);if(n)throw new Error("createElement does not support creating contentDOM");return e}function m0(t,{tag:e="div",content:n,ignoreAttrs:r=[],parsingPriority:o=51}={}){const i=s=>JSON.stringify(EM(s.attrs||{},(a,l)=>!r.includes(l)));return{toDOM:s=>{const a=[e,{"data-bangle-name":t,"data-bangle-attrs":i(s)}];return n!==void 0&&(typeof n=="function"?a.push(n(s)):a.push(n)),a},parseDOM:[{priority:o,tag:`${e}[data-bangle-name="${t}"]`,getAttrs:s=>{const a=s.getAttribute("data-bangle-attrs");return a?JSON.parse(a):{}}}]}}const bx=new WeakMap;class qY{constructor({node:e,view:n,getPos:r,decorations:o,containerDOM:i,contentDOM:s,renderHandlers:a=UY(n)},{selectionSensitive:l=!0}={}){if(this._node=e,this._view=n,this._getPos=r,this._decorations=o,this._selected=!1,!a)throw Po("It appears the view =",n," was not associated with renderHandlers. You are either using nodeViews accidentally or have incorrectly setup nodeViews"),new Error("You either did not pass the renderHandlers correct or it cannot find render handlers associated with the view.");if(this.renderHandlers=a,this.containerDOM=i,this.contentDOM=s,this.contentDOM&&this.contentDOM.classList.add("bangle-nv-content"),this.containerDOM&&this.containerDOM.classList.add("bangle-nv-container"),this._node.type.isAtom&&this.contentDOM)throw new Error("An atom node cannot have a contentDOM");this.opts={selectionSensitive:l},this.renderHandlers.create(this,this.getNodeViewProps())}get dom(){return this.containerDOM}getAttrs(){return this._node.attrs}getNodeViewProps(){return{node:this._node,view:this._view,getPos:this._getPos,decorations:this._decorations,selected:this._selected,attrs:this._node.attrs,updateAttrs:e=>{this._view.dispatch(VY(this._getPos(),this._node,e,this._view.state.tr))}}}}class Od extends qY{static createPlugin({name:e,containerDOM:n,contentDOM:r,renderHandlers:o}){return new ht({key:new vt(e+"NodeView"),props:{nodeViews:{[e]:(i,s,a,l)=>{const c=h3(n);let u;return r&&(u=h3(r)),new Od({node:i,view:s,getPos:a,decorations:l,containerDOM:c,contentDOM:u,renderHandlers:o})}}}})}deselectNode(){this.containerDOM.classList.remove("ProseMirror-selectednode"),this._selected=!1,this.renderHandlers.update(this,this.getNodeViewProps())}destroy(){this.renderHandlers.destroy(this,this.getNodeViewProps()),this.containerDOM=void 0,this.contentDOM=void 0}ignoreMutation(e){return this._node.type.isAtom?!0:!(e.type==="selection"||this.containerDOM.contains(e.target)||e.target===this.contentDOM)}selectNode(){this.containerDOM.classList.add("ProseMirror-selectednode"),this._selected=!0,this.renderHandlers.update(this,this.getNodeViewProps())}update(e,n){return this._node.type!==e.type?!1:(this._node===e&&this._decorations===n||(this._node=e,this._decorations=n,this.renderHandlers.update(this,this.getNodeViewProps())),!0)}}function WY(t,e){if(bx.has(t))throw new Error("It looks like renderHandlers were already set by someone else.");bx.set(t,e)}function UY(t){let e=t.dom.parentNode;return bx.get(e)}function VY(t,e,n,r){return t===void 0?r:r.setNodeMarkup(t,void 0,{...e.attrs,...n})}const HY=KY,Jv="markdownFrontMatter";function KY(){const t={type:"node",name:Jv,schema:{group:"frontMatter",atom:!0,isolating:!0,attrs:{data:{default:""}}},markdown:{toMarkdown(e,n){e.write(`---
`),e.text(n.attrs.data,!1),e.write(`
---`),e.closeBlock(n)},parseMarkdown:{front_matter:{block:Jv,getAttrs:e=>typeof e.meta=="string"?{data:e.meta}:null,noCloseToken:!0}}}};return t.schema={...t.schema,...m0(Jv,{tag:"div",content:e=>e.attrs.data,parsingPriority:52})},t}var GY=Object.freeze({__proto__:null,spec:HY});function ZY(t,e=n=>{}){var n=3,r="-",o=r.charCodeAt(0),i=r.length;function s(a,l,c,u){var d,f,p,h,y,m,w,x=!1,$=a.bMarks[l]+a.tShift[l],S=a.eMarks[l];if(l!==0||o!==a.src.charCodeAt(0))return!1;for(d=$+1;d<=S;d++)if(r[(d-$)%i]!==a.src[d]){w=d+1;break}if(p=Math.floor((d-$)/i),p<n)return!1;if(d-=(d-$)%i,u)return!0;for(f=l;f++,!(f>=c||a.src.slice($,S)==="..."||($=a.bMarks[f]+a.tShift[f],S=a.eMarks[f],$<S&&a.sCount[f]<a.blkIndent));)if(o===a.src.charCodeAt($)&&!(a.sCount[f]-a.blkIndent>=4)){for(d=$+1;d<=S&&r[(d-$)%i]===a.src[d];d++);if(!(Math.floor((d-$)/i)<p)&&(d-=(d-$)%i,d=a.skipSpaces(d),!(d<S))){x=!0;break}}return y=a.parentType,m=a.lineMax,a.parentType="container",a.lineMax=f,h=a.push("front_matter",null,0),h.hidden=!0,h.markup=a.src.slice(l,d),h.block=!0,h.map=[l,d],h.meta=a.src.slice(w,$-1),a.parentType=y,a.lineMax=m,a.line=f+(x?1:0),e(h.meta),!0}t.block.ruler.before("fence","front_matter",s,{alt:["paragraph","reference","blockquote","list"]})}const YY=[ZY],JY=eJ,XY=tJ,QY={queryIsBlockquoteActive:Kh,wrapInBlockquote:eS},HM={wrapIn:"Ctrl-ArrowRight",moveDown:"Alt-ArrowDown",moveUp:"Alt-ArrowUp",emptyCopy:"Mod-c",emptyCut:"Mod-x",insertEmptyParaAbove:"Mod-Shift-Enter",insertEmptyParaBelow:"Mod-Enter"},Zp="blockquote";function eJ(){return{type:"node",name:Zp,schema:{content:"block*",group:"block",defining:!0,draggable:!1,parseDOM:[{tag:"blockquote"}],toDOM:()=>["blockquote",0]},markdown:{toMarkdown:(t,e)=>{t.wrapBlock("> ",null,e,()=>t.renderContent(e))},parseMarkdown:{blockquote:{block:Zp}}}}}function tJ({markdownShortcut:t=!0,keybindings:e=HM}={}){return({schema:n})=>{const r=Ee(n,Zp);return[t&&L$(/^\s*>\s$/,r),e&&en(_r([[e.wrapIn,eS()],[e.moveUp,Fs(r,"UP")],[e.moveDown,Fs(r,"DOWN")],[e.emptyCopy,p0(r)],[e.emptyCut,h0(r)],[e.insertEmptyParaAbove,KM()],[e.insertEmptyParaBelow,GM()]]))]}}function Kh(){return t=>{const e=Ee(t,Zp);return!!An(e)(t.selection)}}function eS(){return mt(t=>!Kh()(t),(t,e,n)=>{const r=Ee(t,Zp);return KH(r)(t,e)})}function KM(){const t=Kh();return(e,n,r)=>{const o=br(e);return mt(t,Lo(o,"above",!0))(e,n,r)}}function GM(){const t=Kh();return(e,n,r)=>{const o=br(e);return mt(t,Lo(o,"below",!0))(e,n,r)}}var g0=Object.freeze({__proto__:null,spec:JY,plugins:XY,commands:QY,defaultKeys:HM,queryIsBlockquoteActive:Kh,wrapInBlockquote:eS,insertEmptyParaAbove:KM,insertEmptyParaBelow:GM});const nJ=sJ,rJ=aJ,oJ={toggleBold:tS,queryIsBoldActive:YM},ZM={toggleBold:"Mod-b"},el="bold",iJ=t=>{const e=t.marks[el];return Lt(e,`markType ${el} not found`),e};function sJ(){return{type:"mark",name:el,schema:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}],toDOM:()=>["strong",0]},markdown:{toMarkdown:{open:"**",close:"**",mixable:!0,expelEnclosingWhitespace:!0},parseMarkdown:{strong:{mark:el}}}}}function aJ({markdownShortcut:t=!0,keybindings:e=ZM}={}){return({schema:n})=>{const r=iJ(n);return[t&&vc(/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,r),t&&vc(/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,r),t&&bc(/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,r),t&&bc(/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,r),e&&en(_r([[e.toggleBold,tS()]]))]}}function tS(){return(t,e,n)=>{const r=t.schema.marks[el];return Lt(r,`markType ${el} not found`),Ks(r)(t,e)}}function YM(){return t=>{const e=t.schema.marks[el];return Lt(e,`markType ${el} not found`),Uh(e)(t)}}var y0=Object.freeze({__proto__:null,spec:nJ,plugins:rJ,commands:oJ,defaultKeys:ZM,toggleBold:tS,queryIsBoldActive:YM});const so=(t,e)=>t.type===Ee(e,"listItem")&&typeof t.attrs.todoChecked=="boolean",nS=(t,e,n,r)=>(so(n,e)&&(t=t.setNodeMarkup(r,void 0,Object.assign({},n.attrs,{todoChecked:null}))),t),Gh=(t,e,n,r)=>(n.type===Ee(e,"listItem")&&!so(n,e)&&(t=t.setNodeMarkup(r,void 0,Object.assign({},n.attrs,{todoChecked:!1}))),t),lJ=mt([JM,t=>XM(t).todos!==0],(t,e)=>{const{schema:n}=t;let r=t.tr;return rS(t,(o,i)=>{r=nS(r,n,o,i)}),e&&e(r),!0}),cJ=mt([JM,t=>{const{todos:e,lists:n}=XM(t);return e!==n}],(t,e)=>{let{tr:n,schema:r}=t;return rS(t,(o,i)=>{n=Gh(n,r,o,i)}),e&&e(n),!0});function uJ(t,e){return new Gs(t,function(n,r,o,i){const s=Ee(n,"listItem");var a=e instanceof Function?e(r):e,l=n.tr.delete(o,i),c=l.doc.resolve(o),u=c.blockRange(),d=u&&r0(u,s,a);if(!d)return null;l.wrap(u,d);var f=l.doc.resolve(o-1).nodeBefore;return f&&f.type===Ee(n,"bulletList")&&Nd(l.doc,o-1)&&f.lastChild&&so(f.lastChild,n.schema)&&l.join(o-1),l})}function rS(t,e){const{schema:n,selection:{$from:r,$to:o}}=t,i=r.blockRange(o,u=>u.childCount>0&&u.firstChild.type===Ee(n,"listItem"));if(!i)return;const{parent:s,startIndex:a,endIndex:l}=i;let c=i.$from.start(i.depth);for(let u=0;u<s.childCount;u++){const d=s.child(u);e(d,c),u>=a&&u<l-1&&d.nodesBetween(0,d.content.size,e,c+1),c+=d.nodeSize}}function JM(t){const{selection:e}=t,n=e.$from.node(-2),r=e.$to.node(-2);return n&&n.type===Ee(t,"bulletList")&&r&&r.type===Ee(t,"bulletList")}function XM(t){let e=0,n=0;const{schema:r}=t;return rS(t,(o,i)=>{o.type===Ee(r,"listItem")&&e++,so(o,r)&&n++}),{lists:e,todos:n}}function dJ(t,e,n,r){let{$from:o,$to:i}=n,s=t;s||(s=Ee(e,"listItem"));let a=o.blockRange(i,u=>!!u.childCount&&!!u.firstChild&&u.firstChild.type===s);if(!a||a.depth<2||o.node(a.depth-1).type!==s)return r;let l=a.end,c=i.end(a.depth);return l<c&&(r.step(new Tn(l-1,c,l,c,new Se(te.from(s.create(void 0,a.parent.copy())),1,0),1,!0)),a=new Up(r.doc.resolve(o.pos),r.doc.resolve(c),a.depth)),r.lift(a,Ad(a)).scrollIntoView()}function fJ(t,e,n,r,o,i){let s=t;s||(s=Ee(e,"listItem"));let a=!1;return i.doc.nodesBetween(n,r,(l,c)=>{if(!a&&l.type===s&&c>n){a=!0;let u=o+3;for(;u>o+2;){const d=i.doc.resolve(i.mapping.map(c));u=d.depth;const f=i.doc.resolve(i.mapping.map(c+l.content.size)),p=new We(d,f);i=dJ(s,e,p,i)}}}),i}function pJ(t,e,n){const{from:r,to:o}=e.selection,{paragraph:i}=e.schema.nodes,s=[];n.doc.nodesBetween(r,o,(a,l)=>{a.type===i&&s.push({node:a,pos:l})});for(let a=s.length-1;a>=0;a--){const l=s[a],c=n.doc.resolve(n.mapping.map(l.pos));if(c.depth>0){let u;l.node.textContent&&l.node.textContent.length>0?u=n.doc.resolve(n.mapping.map(l.pos+l.node.textContent.length)):u=n.doc.resolve(n.mapping.map(l.pos+1));const d=c.blockRange(u);d&&n.lift(d,dY(t,e.schema,c))}}return n}const hJ=4,QM=(t,e)=>{const{bulletList:n,orderedList:r}=e;let o=0;for(let i=t.depth-1;i>0;i--){const s=t.node(i);(s.type===n||s.type===r)&&(o+=1)}return o},mJ=(t,e)=>{const{$from:n}=t.selection,r=n.node(-2),o=n.node(-3);return r&&r.type===e||o&&o.type===e},gJ=t=>e=>{const{parent:n}=e.selection.$from;let r=t;r||({listItem:r}=e.schema.nodes);const{paragraph:o}=e.schema.nodes;return e.selection instanceof Pd?n.type===r:n.type===o&&q$(r)(e.selection)};function yJ(t,e){let n,r=e.tr.selection.$to.pos;do{const o=e.doc.resolve(r);if(n=QM(o,e.schema.nodes),n>hJ)return!1;r++}while(n>=t);return!0}const oS=t=>e=>{const{$from:n}=e.selection;let r=t;r||(r=Ee(e,"listItem"));const{paragraph:o}=e.schema.nodes;return e.selection instanceof Pd?n.parent.type===r:q$(r)(e.selection)&&n.parent.type===o},bJ=(t,e,n)=>{let r=t;const{bulletList:o,orderedList:i}=n;let s;for(let a=e.depth-1;a>0;a--){const l=e.node(a);if((l.type===o||l.type===i)&&(s=a),l.type!==o&&l.type!==i&&l.type!==r)break}return s};function vJ(t){const{$from:e}=t.selection,{bulletList:n,orderedList:r}=t.schema.nodes,o=t.doc.resolve(e.pos-1);let i=o?o.nodeBefore:null;return t.selection instanceof Pd&&(i=e.nodeBefore),!!i&&[n,r].indexOf(i.type)>-1}function b0(t,e,n){return(r,o,i)=>{const{selection:s}=r,a=s.$from.node(s.$from.depth-2),l=s.$to.node(s.$to.depth-2);if(!a||a.type.name!==t.name||!l||l.type.name!==t.name)return wJ(t,n)(r,o,i);{const c=e||Ee(r,"listItem"),u=bJ(c,s.$to,r.schema.nodes);let d=s.$to.pos;s instanceof Me&&s.node.type===c&&(d=s.$from.pos+s.node.firstChild.content.size);let f=r.tr,p=fJ(c,r,d,s.$to.end(u),u||0,f);return p=pJ(c,r,p),o&&o(p),!0}}}function wJ(t,e=!1){const n=r=>o=>{if(!o.isGeneric)return o;let i=[];for(let a=0;a<o.mapping.maps.length;a++){let l=o.mapping.maps[a];for(let c=0;c<i.length;c++)i[c]=l.map(i[c]);l.forEach((c,u,d,f)=>{i.push(d,f)})}const s=(a,l)=>a.type===Ee(r,"listItem")&&(l==null?void 0:l.type)===Ee(r,"bulletList");for(let a=0;a<i.length;a+=2){let l=i[a],c=i[a+1];o.doc.nodesBetween(l,c,(u,d,f)=>{d>=l&&d<c&&s(u,f)&&Gh(o,r,u,d)})}return o};return function(r,o,i){if(o&&o(r.tr.setSelection(xJ(r.doc,r.selection))),!i)return!1;r=i.state;const{$from:s,$to:a}=r.selection,l=aY(r.doc,s,a,t);if(mJ(r,t)&&l)return m3()(r,o);{l||(m3()(r,o),r=i.state);const c=uY(r,t);return c&&o&&(o(c),r=i.state),_J(t)(r,e?NM(o,n(r.schema)):o)}}}function _J(t,e){return YH(nZ(t,e),(n,r)=>n.type===r.type&&n.type===t)}function m3(){return function(t,e){const{tr:n}=t,{$from:r,$to:o}=t.selection;return n.doc.nodesBetween(r.pos,o.pos,(i,s)=>{if(i.isTextblock){const a=new Me(n.doc.resolve(n.mapping.map(s))),l=a.$from.blockRange(a.$to);if(!l||![Ee(t,"listItem")].includes(a.$from.parent.type))return!1;const c=l&&Ad(l);if(c==null)return!1;n.lift(l,c)}}),e&&e(n),!0}}function xJ(t,e){let{$from:n,$to:r}=e;const o=n.pos===r.pos;let i=n.pos,s=r.pos;if(o&&i===t.nodeSize-3)return e;if(n.nodeBefore&&!o){i++;let a=t.nodeAt(i);for(;!a||a&&!a.isText;)i++,a=t.nodeAt(i)}return s===i?new We(t.resolve(i)):new We(t.resolve(i),t.resolve(s))}function kJ(t){const e=n=>r=>{if(!r.isGeneric)return r;const o=r.selection.$from.blockRange(r.selection.$to,u=>u.childCount>0&&u.firstChild.type===Ee(n,"listItem"));if(!o||o.startIndex===0)return r;const i=so(o.parent.child(o.startIndex-1),n),{parent:s,startIndex:a,endIndex:l}=o;let c=0;for(let u=a;u<l;u++){const d=s.child(u),f=o.start+c;r=i?Gh(r,n,d,f):nS(r,n,d,f),c+=d.nodeSize}return r};return function(r,o){let i=t;if(i||(i=Ee(r,"listItem")),oS(i)(r)){const s=QM(r.selection.$from,r.schema.nodes);return yJ(s,r)&&aZ(i)(r,NM(o,e(r.schema))),!0}return!1}}function Yp(t){return function(e,n,r){let o=t;o||(o=Ee(e,"listItem"));const{$from:i,$to:s}=e.selection;if(!oS(o)(e))return!1;let a=i.blockRange(s,u=>u.childCount>0&&u.firstChild.type===o);if(!a)return!1;const l=so(e.selection.$from.node(-3),e.schema);if(n&&r){const u=e.selection.$from.node(-2),d=e.selection.$from.start(-2);let f=e.tr;for(const{node:p,pos:h}of SM(u,!1)){const y=h+d;y>=e.selection.$from.before(-1)&&y<e.selection.$to.after(-1)&&(l?Gh(f,e.schema,p,y):nS(f,e.schema,p,y))}n(f),e=r.state}return HZ($J(o,a),oZ)(o)(e,n,r)}}function $J(t,e){return n=>(r,o,i)=>n(r,a=>{const l=r.doc.resolve(e.start),c=r.doc.resolve(e.end),u=a.doc.resolve(a.mapping.map(e.end-1));u.nodeBefore&&u.nodeAfter&&u.nodeBefore.type===u.nodeAfter.type&&c.nodeAfter&&c.nodeAfter.type===t&&c.parent.type===l.parent.type&&a.join(u.pos),o&&o(a.scrollIntoView())},i)}const SJ=t=>(e,n,r)=>uo(mt([oS(t),f3,pY,gJ(t)],uo(AJ(t),Yp(t))),mt([f3,vJ],TJ(t)))(e,n,r);function EJ(t){return(e,n,r)=>{const{selection:o}=e;if(o.empty){const{$from:i}=o;let s=t;s||(s=Ee(e,"listItem"));const{codeBlock:a}=e.schema.nodes,l=i.node(i.depth),c=i.node(i.depth-1);if(c&&c.type===s){const u=CM(c);if(sY(l)&&!u){const d=i.node(i.depth-3);return so(d,e.schema)&&!so(c,e.schema)?Yp(Ee(e,"listItem"))(e,n,r):Yp(s)(e,n,r)}else if(!a||!q$(a)(o))return CJ(s,d=>so(d,e.schema)?{...d.attrs,todoChecked:!1}:d.attrs)(e,n)}}return!1}}function CJ(t,e){return function(n,r){const o=n.selection,i=o.$from,s=o.$to,a=o.node;if(a&&a.isBlock||i.depth<2||!i.sameParent(s))return!1;const l=i.node(-1);if(l.type!==t)return!1;if(l.content.content.length<=1&&i.parent.content.size===0&&l.content.size!==0){if(i.depth===2||i.node(-3).type!==t||i.index(-2)!==i.node(-2).childCount-1)return!1;if(r){let f=te.empty;const p=i.index(-1)>0;for(let y=i.depth-(p?1:2);y>=i.depth-3;y--)f=te.from(i.node(y).copy(f));f=f.append(te.from(t.createAndFill()));const h=n.tr.replace(i.before(p?void 0:-1),i.after(-3),new Se(f,p?3:2,2));h.setSelection(Oe.near(h.doc.resolve(i.pos+(p?3:2)))),r(h.scrollIntoView())}return!0}const c=s.pos===i.end()?l.contentMatchAt(0).defaultType:void 0,u=n.tr.delete(i.pos,s.pos),d=[e?{type:t,attrs:e(l)}:void 0,c&&{type:c}];return r&&r(u.split(i.pos,2,d).scrollIntoView()),!0}}function TJ(t){return(e,n)=>{let r=t;r||({listItem:r}=e.schema.nodes);const{$from:o}=e.selection,{paragraph:i,codeBlock:s,heading:a,bulletList:l,orderedList:c}=e.schema.nodes,u=e.selection instanceof Pd,d=u?e.doc.resolve(o.pos+1):o;let f=TM(d);if(!f)return!1;if(f.nodeBefore&&[l,c].indexOf(f.nodeBefore.type)>-1&&f.nodeAfter&&[i,s,a].indexOf(f.nodeAfter.type)>-1){let p=f.doc.resolve(f.pos-1);for(;p.parent.type!==i;)p=e.doc.resolve(p.pos-1);let{tr:h}=e;if(u){const m=qZ(h.selection);if(typeof m!="number")return!1;const w=f.nodeBefore.copy(f.nodeBefore.content.append(te.from(r.createChecked({},f.nodeAfter))));h.replaceWith(m,o.pos+f.nodeAfter.nodeSize,w)}else h=h.step(new Tn(p.pos,f.pos+f.nodeAfter.nodeSize,f.pos+1,f.pos+f.nodeAfter.nodeSize-1,e.tr.doc.slice(p.pos,f.pos),0,!0));let y=h.doc.resolve(h.mapping.map(f.pos+f.nodeAfter.nodeSize));return y.nodeBefore&&y.nodeAfter&&y.nodeBefore.type===y.nodeAfter.type&&[l,c].indexOf(y.nodeBefore.type)>-1&&(h=h.join(y.pos)),n&&n(h.scrollIntoView()),!0}return!1}}function AJ(t){return(e,n)=>{const{$from:r}=e.selection;let o=t;o||(o=Ee(e,"listItem"));const i=TM(r);if(!i||!i.nodeBefore||i.nodeBefore.type!==o)return!1;if(i.nodeBefore.childCount===1&&i.nodeBefore.firstChild.nodeSize<=2){const{tr:a}=e;return n&&n(a.delete(i.pos-i.nodeBefore.nodeSize,r.pos).scrollIntoView()),!0}return!1}}function NJ(t,e="UP"){const n=e==="DOWN";return mt([i=>{const s=An(t)(i.selection);if(!s)return!1;const a=s.node,{$from:l}=i.selection,c=l.node(s.depth-1),u=c&&c[n?"lastChild":"firstChild"];return!!(a&&u===a)}],(i,s,a)=>{let l=t;if(l||(l=Ee(i,"listItem")),!i.selection.empty)return!1;const c=z$(m=>oY(m.type,i.schema.nodes))(i.selection),u=An(l)(i.selection);if(!(c&&c.node)||!(u&&u.node))return!1;if(i.selection.$from.depth===3)return Yp(l)(i,s,a);let d=c.node.childCount===1?c:u,f=i.tr.delete(d.pos,d.pos+d.node.nodeSize),p=i.selection.$from.before(-3);if(n){let m=i.selection.$from.after(-3);p=m-d.node.nodeSize;let w=rY(m,i.doc)&&i.doc.nodeAt(m);w&&w.type===l&&(p+=w.nodeSize)}let h=u.node;const y=qh(h,p)(f);return y===f?!1:(s&&s(y),!0)})}function RJ(t,e){return(n,r)=>{const{$from:o}=n.selection,i=o.node(-1);if(i&&i.type===t){const{tr:s}=n,a=o.before(-1);if(e(i.attrs)!==i.attrs)return s.setNodeMarkup(a,void 0,e(i.attrs)),r&&r(s),!0}return!1}}function e4(t,e){for(;++e<t.length;){let n=t[e];if(n&&n.type!=="list_item_open")return n.hidden}return!1}const PJ=DJ,OJ=MJ,IJ={toggleBulletList:iS,queryIsBulletListActive:r4},t4={toggle:"Shift-Ctrl-8",toggleTodo:"Shift-Ctrl-7"},vx="bulletList";function DJ(){return{type:"node",name:vx,schema:{content:"listItem+",group:"block",parseDOM:[{tag:"ul"}],toDOM:()=>["ul",0],attrs:{tight:{default:!1}}},markdown:{toMarkdown(t,e){t.renderList(e,"  ",()=>"- ")},parseMarkdown:{bullet_list:{block:vx,getAttrs:(t,e,n)=>({tight:e4(e,n)})}}}}}function MJ({markdownShortcut:t=!0,todoMarkdownShortcut:e=!0,keybindings:n=t4}={}){return({schema:r})=>{const o=Ee(r,vx);return[n&&en(_r([[n.toggle,iS()],[n.toggleTodo,n4()]])),t&&L$(/^\s*([-+*])\s$/,o,void 0,(i,s)=>!(s.lastChild&&so(s.lastChild,r))),e&&uJ(/^\s*(\[ \])\s$/,{todoChecked:!1})]}}function iS(){return uo(lJ,(e,n,r)=>b0(Ee(e,"bulletList"),Ee(e,"listItem"))(e,n,r))}function n4(){return uo(cJ,(e,n,r)=>b0(Ee(e,"bulletList"),Ee(e,"listItem"),!0)(e,n,r))}function r4(){return t=>Zs(Ee(t,"listItem"),[Ee(t,"bulletList")])(t)}function LJ(){return t=>{const{schema:e}=t;return Zs(Ee(t,"listItem"),[Ee(t,"bulletList")])(t)&&so(t.selection.$from.node(-1),e)}}var Id=Object.freeze({__proto__:null,spec:PJ,plugins:OJ,commands:IJ,defaultKeys:t4,toggleBulletList:iS,toggleTodoList:n4,queryIsBulletListActive:r4,queryIsTodoListActive:LJ});const FJ=qJ,BJ=WJ,jJ={toggleCode:s4,queryIsCodeActive:a4},o4={toggleCode:"Mod-`"},To="code",zJ=t=>{const e=t.marks[To];return Lt(e,`markType ${To} not found`),e},sS=t=>{const e=t.schema.marks[To];return Lt(e,`markType ${To} not found`),e};function qJ(){return{type:"mark",name:To,schema:{excludes:"_",parseDOM:[{tag:To}],toDOM:()=>[To,0]},markdown:{toMarkdown:{open(t,e,n,r){return g3(n.child(r),-1)},close(t,e,n,r){return g3(n.child(r-1),1)},escape:!1},parseMarkdown:{code_inline:{mark:To,noCloseToken:!0}}}}}function WJ({markdownShortcut:t=!0,escapeAtEdge:e=!0,keybindings:n=o4}={}){return({schema:r})=>{const o=zJ(r),i=[s=>s.selection.empty&&s.selection.$cursor];return[t&&vc(/(?:`)([^`]+)(?:`)/g,o),t&&bc(/(?:`)([^`]+)(?:`)$/,o),n&&en(_r([[n.toggleCode,Ks(o)]])),e&&en({ArrowRight:mt(i,UJ),ArrowLeft:mt(i,VJ)})]}}const Xv=(t,e)=>{if(e<0||e>t.doc.content.size)return!1;const n=sS(t),r=t.doc.nodeAt(e);return r?r.marks.some(o=>o.type===n):!1};var UJ=(t,e)=>{const n=sS(t),r=t.selection.$cursor;let o=t.tr.storedMarks;const i=i4(t,n),s=t.doc.rangeHasMark(r.pos,r.pos,n),a=t.doc.rangeHasMark(r.pos,r.pos+1,n),l=!s&&a&&!(o&&o.length>0);if(!i&&l)return e&&e(t.tr.addStoredMark(n.create())),!0;const c=!s&&!a&&!(o&&o.length===0);return i&&c?(e&&e(t.tr.removeStoredMark(n)),!0):!1},VJ=(t,e)=>{const n=sS(t),r=i4(t,n),o=t.selection.$cursor,{storedMarks:i}=t.tr,s=Xv(t,o.pos),a=Xv(t,o.pos-1),l=Xv(t,o.pos-2),c=s&&!a&&Array.isArray(i),u=a&&!l&&(i===null||Array.isArray(i)&&!!i.length),d=(c&&Array.isArray(i)&&!i.length||!c&&i===null)&&!a&&l,f=!s&&a&&Array.isArray(i)&&!i.length;if(!r&&d){const h=t.tr.setSelection(Oe.near(t.doc.resolve(o.pos-1)));return e&&e(h.removeStoredMark(n)),!0}if(!r&&f)return e&&e(t.tr.addStoredMark(n.create())),!0;if(r&&u){const h=t.tr.setSelection(Oe.near(t.doc.resolve(o.pos-1)));return e&&e(h.addStoredMark(n.create())),!0}const p=o.index(o.depth-1)===0;return r&&(c||!o.nodeBefore&&p)?(e&&e(t.tr.removeStoredMark(n)),!0):!1};function g3(t,e){let n=/`+/g,r,o=0;if(t.isText)for(;r=n.exec(t.text);){let s=r[0];typeof s=="string"&&(o=Math.max(o,s.length))}let i=o>0&&e>0?" `":"`";for(let s=0;s<o;s++)i+="`";return o>0&&e<0&&(i+=" "),i}function i4(t,e){const{from:n,to:r,empty:o}=t.selection;if(o)return!!e.isInSet(t.tr.storedMarks||t.selection.$from.marks());let i=!1;return t.doc.nodesBetween(n,r,s=>{i=i||!!e.isInSet(s.marks)}),i}function s4(){return(t,e)=>{const n=t.schema.marks[To];return Lt(n,`markType ${To} not found`),Ks(n)(t,e)}}function a4(){return t=>{const e=t.schema.marks[To];return Lt(e,`markType ${To} not found`),Uh(e)(t)}}var v0=Object.freeze({__proto__:null,spec:FJ,plugins:BJ,commands:jJ,defaultKeys:o4,toggleCode:s4,queryIsCodeActive:a4});const HJ=ZJ,KJ=YJ,GJ={queryIsCodeActiveBlock:q1},l4={toCodeBlock:"Shift-Ctrl-\\",moveDown:"Alt-ArrowDown",moveUp:"Alt-ArrowUp",insertEmptyParaAbove:"Mod-Shift-Enter",insertEmptyParaBelow:"Mod-Enter"},op="codeBlock";function ZJ(){return{type:"node",name:op,schema:{attrs:{language:{default:""}},content:"text*",marks:"",group:"block",code:!0,defining:!0,draggable:!1,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:()=>["pre",["code",0]]},markdown:{toMarkdown(t,e){t.write("```"+(e.attrs.language||"")+`
`),t.text(e.textContent,!1),t.ensureNewLine(),t.write("```"),t.closeBlock(e)},parseMarkdown:{code_block:{block:op,noCloseToken:!0},fence:{block:op,getAttrs:t=>({language:t.info||""}),noCloseToken:!0}}}}}function YJ({markdownShortcut:t=!0,keybindings:e=l4}={}){return({schema:n})=>{const r=Ee(n,op);return[t&&mM(/^```$/,r),e&&en(_r([[e.toCodeBlock,nd(r)],[e.moveUp,Fs(r,"UP")],[e.moveDown,Fs(r,"DOWN")],[e.insertEmptyParaAbove,mt(q1(),Lo(br(n),"above",!1))],[e.insertEmptyParaBelow,mt(q1(),Lo(br(n),"below",!1))]]))]}}function q1(){return t=>{const e=Ee(t,op);return!!An(e)(t.selection)}}var aS=Object.freeze({__proto__:null,spec:HJ,plugins:KJ,commands:GJ,defaultKeys:l4,queryIsCodeActiveBlock:q1});const JJ=QJ,XJ=eX,c4={insert:"Shift-Enter"},u4="hardBreak";function QJ(){return{type:"node",name:u4,schema:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:()=>["br"]},markdown:{toMarkdown(t,e,n,r){for(let o=r+1;o<n.childCount;o++)if(n.child(o).type!==e.type){t.write(`\\
`);return}},parseMarkdown:{hardbreak:{node:"hardBreak"}}}}}function eX({keybindings:t=c4}={}){return({schema:e})=>{const n=Ee(e,u4),r=uo(A5,(o,i)=>(i&&i(o.tr.replaceSelectionWith(n.create()).scrollIntoView()),!0));return[t&&en(_r([[t.insert,r]]))]}}var lS=Object.freeze({__proto__:null,spec:JJ,plugins:XJ,defaultKeys:c4});const tX=iX,nX=sX,rX={toggleHeading:p4,queryIsHeadingActive:cS},d4={toH1:"Shift-Ctrl-1",toH2:"Shift-Ctrl-2",toH3:"Shift-Ctrl-3",toH4:"Shift-Ctrl-4",toH5:"Shift-Ctrl-5",toH6:"Shift-Ctrl-6",moveDown:"Alt-ArrowDown",moveUp:"Alt-ArrowUp",emptyCopy:"Mod-c",emptyCut:"Mod-x",insertEmptyParaAbove:"Mod-Shift-Enter",jumpToStartOfHeading:Kn.mac?"Ctrl-a":"Ctrl-Home",jumpToEndOfHeading:Kn.mac?"Ctrl-e":"Ctrl-End",insertEmptyParaBelow:"Mod-Enter",toggleCollapse:void 0},vr="heading",oX=[1,2,3,4,5,6],f4=t=>{const e=Ee(t,vr);return An(e)(t.selection)},y3=t=>{const e=parseInt(t,10);return Number.isNaN(e)?void 0:e};function iX({levels:t=oX}={}){if(t.some(n=>typeof n!="number"))throw new Error("levels must be number");const e={levels:t};return{type:"node",name:vr,schema:{attrs:{level:{default:1},collapseContent:{default:null}},content:"inline*",group:"block",defining:!0,draggable:!1,parseDOM:t.map(n=>({tag:`h${n}`,getAttrs:r=>{const o={level:y3(n)},i=r.getAttribute("data-bangle-attrs");if(!i)return o;const s=JSON.parse(i);return Object.assign({},o,s)}})),toDOM:n=>{const r=[`h${n.attrs.level}`,{},0];return n.attrs.collapseContent&&(r[1]["data-bangle-attrs"]=JSON.stringify({collapseContent:n.attrs.collapseContent}),r[1].class="bangle-heading-collapsed"),r}},markdown:{toMarkdown(n,r){n.write(n.repeat("#",r.attrs.level)+" "),n.renderInline(r),n.closeBlock(r)},parseMarkdown:{heading:{block:vr,getAttrs:n=>({level:y3(n.tag.slice(1))})}}},options:e}}function sX({markdownShortcut:t=!0,keybindings:e=d4}={}){return({schema:n,specRegistry:r})=>{const{levels:o}=r.options[vr],i=Ee(n,vr),s=Object.fromEntries(o.map(a=>[e[`toH${a}`],nd(i,{level:a})]));return[e&&en({...s,..._r([[e.moveUp,Fs(i,"UP")],[e.moveDown,Fs(i,"DOWN")],[e.jumpToStartOfHeading,K$(i)],[e.jumpToEndOfHeading,G$(i)],[e.emptyCopy,p0(i)],[e.emptyCut,h0(i)],[e.insertEmptyParaAbove,g4()],[e.insertEmptyParaBelow,y4()],[e.toggleCollapse,b4()]])}),...(t?o:[]).map(a=>mM(new RegExp(`^(#{1,${a}})\\s$`),i,()=>({level:a})))]}}function p4(t=3){return(e,n)=>{if(cS(t)(e)){const r=br(e);return nd(r)(e,n)}return nd(Ee(e,vr),{level:t})(e,n)}}function cS(t){return e=>{const n=An(Ee(e,vr))(e.selection);if(!n)return!1;const{node:r}=n;return t==null?!0:r.attrs.level===t}}function w0(){return t=>{const e=An(Ee(t,vr))(t.selection);return!e||!dS(e)?!1:!!e.node.attrs.collapseContent}}function h4(){return(t,e)=>{const n=An(Ee(t,vr))(t.selection);if(!n||!dS(n)||w0()(t))return!1;const o=cX(n.node,t.doc);if(!o)return!1;const{fragment:i,start:s,end:a}=o;let l=t.tr.replaceWith(s,a,Ee(t,vr).createChecked({...n.node.attrs,collapseContent:i.toJSON()},n.node.content));return t.selection instanceof We&&(l=l.setSelection(We.create(l.doc,t.selection.from))),e&&e(l),!0}}function m4(){return(t,e)=>{const n=An(Ee(t,vr))(t.selection);if(!n||!dS(n)||!w0()(t))return!1;const o=te.fromJSON(t.schema,n.node.attrs.collapseContent);let i=t.tr.replaceWith(n.pos,n.pos+n.node.nodeSize,te.fromArray([Ee(t,vr).createChecked({...n.node.attrs,collapseContent:null},n.node.content)]).append(o));return t.selection instanceof We&&(i=i.setSelection(We.create(i.doc,t.selection.from))),e&&e(i),!0}}function g4(){return mt(f4,(t,e,n)=>{const r=br(t);return Lo(r,"above",!1)(t,e,n)})}function y4(){return mt(f4,(t,e,n)=>{const r=br(t);return Lo(r,"below",!1)(t,e,n)})}function b4(){return(t,e)=>{const n=An(Ee(t,vr))(t.selection);return!n||n.depth!==1?!1:w0()(t)?m4()(t,e):h4()(t,e)}}function aX(){return(t,e)=>{const n=v4(t);let r=t.tr,o=0;for(const{node:i,pos:s}of n){let a=te.fromJSON(t.schema,uS(i.attrs.collapseContent));r=r.replaceWith(o+s,o+s+i.nodeSize,te.fromArray([Ee(t,vr).createChecked({...i.attrs,collapseContent:null},i.content)]).append(a)),o+=a.size}return t.selection instanceof We&&(r=r.setSelection(We.create(r.doc,t.selection.from))),e&&e(r),!0}}function v4(t){return d0(t.doc,e=>e.type===Ee(t,vr)&&!!e.attrs.collapseContent,!1)}function lX(t){return d0(t.doc,e=>e.type===Ee(t,vr),!1)}const uS=t=>{let e=[];return t.forEach(n=>{if(n.type==="heading"&&n.attrs.collapseContent){const r=n.attrs.collapseContent;e.push({...n,attrs:{...n.attrs,collapseContent:null}}),e.push(...uS(r))}else e.push(n)}),e};function dS(t){return t.depth===1}function cX(t,e){let n,r,o=!1;const i=a=>a.type!==t.type?!1:a.attrs.level<=t.attrs.level;return e.forEach((a,l,c)=>{if(!o){if(a===t){n={index:c,offset:l,node:a};return}if(n){if(i(a)){o=!0;return}a.content.size!==0&&(r={index:c,offset:l,node:a})}}}),r?{fragment:e.slice(n.offset+n.node.nodeSize,r.offset+r.node.nodeSize).content,start:n.offset,end:r.offset+r.node.nodeSize}:null}var Ao=Object.freeze({__proto__:null,spec:tX,plugins:nX,commands:rX,defaultKeys:d4,toggleHeading:p4,queryIsHeadingActive:cS,queryIsCollapseActive:w0,collapseHeading:h4,uncollapseHeading:m4,insertEmptyParaAbove:g4,insertEmptyParaBelow:y4,toggleHeadingCollapse:b4,uncollapseAllHeadings:aX,listCollapsedHeading:v4,listCollapsibleHeading:lX,flattenFragmentJSON:uS});const uX=fX,dX=pX,wx="horizontalRule";function fX(){return{type:"node",name:wx,schema:{group:"block",parseDOM:[{tag:"hr"}],toDOM:()=>["hr"]},markdown:{toMarkdown(t,e){t.write(e.attrs.markup||"---"),t.closeBlock(e)},parseMarkdown:{hr:{node:wx}}}}}function pX({markdownShortcut:t=!0}={}){return({schema:e})=>{const n=Ee(e,wx);return[t&&new Gs(/^(?:---|___\s|\*\*\*\s)$/,(r,o,i,s)=>{if(!o[0])return null;let a=r.tr.replaceWith(i-1,s,n.createChecked());const l=r.doc.resolve(i);let c=!1;return l.end()!=s?c=!1:l.after()==l.end(-1)?c=!0:c=r.doc.resolve(l.after()).nodeAfter.type===n,c?qh(br(r).createChecked(),a.mapping.map(l.after()))(a):a})]}}var fS=Object.freeze({__proto__:null,spec:uX,plugins:dX});function w4(t){var e=t.indexOf('"')===-1?'""':t.indexOf("'")===-1?"''":"()";return e[0]+t+e[1]}const hX=yX,mX=bX,gX={},ql="image";function yX(){return{type:"node",name:ql,schema:{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:t=>({src:t.getAttribute("src"),title:t.getAttribute("title"),alt:t.getAttribute("alt")})}],toDOM:t=>["img",t.attrs]},markdown:{toMarkdown(t,e){const n=t.esc(e.attrs.alt||""),r=t.esc(e.attrs.src)+(e.attrs.title?" "+w4(e.attrs.title):"");t.write(`![${n}](${r})`)},parseMarkdown:{image:{node:ql,getAttrs:t=>({src:t.attrGet("src"),title:t.attrGet("title")||null,alt:t.children[0]&&t.children[0].content||null})}}}}}function bX({handleDragAndDrop:t=!0,acceptFileType:e="image/*",createImageNodes:n=vX}={}){return({schema:r})=>{const o=Ee(r,ql);return[new Gs(/!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\)/,(i,s,a,l)=>{let[,c,u,d]=s;return u?(d||(d=c),i.tr.replaceWith(a,l,o.create({src:u,alt:c,title:d}))):null}),t&&new ht({key:new vt(ql+"-drop-paste"),props:{handleDOMEvents:{drop(i,s){const a=s;if(a.dataTransfer==null)return!1;const l=v3(a.dataTransfer,e,!0);if(!l||l.length===0)return!1;a.preventDefault();const c=i.posAtCoords({left:a.clientX,top:a.clientY});return n(l,Ee(i.state,ql),i).then(u=>{b3(i,c==null?void 0:c.pos,u)}),!0}},handlePaste:(i,s)=>{const a=s;if(!a.clipboardData)return!1;const l=v3(a.clipboardData,e,!0);return!l||l.length===0?!1:(n(l,Ee(i.state,ql),i).then(c=>{b3(i,i.state.selection.from,c)}),!0)}}})]}}async function vX(t,e,n){return(await Promise.all(t.map(o=>wX(o)))).map(o=>e.create({src:o}))}function b3(t,e,n){for(const r of n){const{tr:o}=t.state;let i=qh(r,e)(o);i!==o&&t.dispatch(i)}}function wX(t){return new Promise((e,n)=>{const r=new FileReader,o=s=>{const a=btoa(s.target.result);e(`data:${t.type};base64,${a}`)},i=s=>{e(s.target.result)};r.onerror=()=>{n(new Error("Error reading file"+t.name))},"readAsDataURL"in r?(r.onload=i,r.readAsDataURL(t)):(r.onload=o,r.readAsBinaryString(t))})}function v3(t,e,n){const r=_X(t.items,e,n),o=[];return r.forEach(i=>{const s=i&&i.getAsFile();s!=null&&o.push(s)}),o}function _X(t,e,n){const r=Array.from(t);let o;if(e==="")return o=r.filter(a=>a.kind==="file"),n?o:[o[0]];const i=e.toLowerCase().split(",").map(a=>a.split("/").map(l=>l.trim())).filter(a=>a.length===2),s=a=>{if(a.kind!=="file")return!1;const[l,c]=a.type.toLowerCase().split("/").map(u=>u.trim());for(const[u,d]of i)if(l===u&&(d==="*"||c===d))return!0;return!1};return o=o=r.filter(s),n===!1&&(o=[o[0]]),o}const xX=(t={})=>(e,n)=>{if(!(e.selection instanceof Me)||!e.selection.node)return!1;const{node:r}=e.selection;return r.type!==Ee(e,ql)?!1:(n&&n(e.tr.setNodeMarkup(e.selection.$from.pos,void 0,{...r.attrs,...t})),!0)};var _x=Object.freeze({__proto__:null,spec:hX,plugins:mX,commands:gX,updateImageNodeAttribute:xX});const kX=CX,$X=TX,SX={toggleItalic:x4,queryIsItalicActive:k4},_4={toggleItalic:"Mod-i"},tl="italic",EX=t=>{const e=t.marks[tl];return Lt(e,`markType ${tl} not found`),e};function CX(){return{type:"mark",name:tl,schema:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:()=>["em",0]},markdown:{toMarkdown:{open:"_",close:"_",mixable:!0,expelEnclosingWhitespace:!0},parseMarkdown:{em:{mark:tl}}}}}function TX({keybindings:t=_4}={}){return({schema:e})=>{const n=EX(e);return[vc(/_([^_]+)_/g,n),vc(/\*([^*]+)\*/g,n),bc(/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,n),bc(/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,n),t&&en(_r([[t.toggleItalic,Ks(n)]]))]}}function x4(){return(t,e,n)=>{const r=t.schema.marks[tl];return Lt(r,`markType ${tl} not found`),Ks(r)(t,e)}}function k4(){return t=>{const e=t.schema.marks[tl];return Lt(e,`markType ${tl} not found`),Uh(e)(t)}}var _0=Object.freeze({__proto__:null,spec:kX,plugins:$X,commands:SX,defaultKeys:_4,toggleItalic:x4,queryIsItalicActive:k4});const AX=PX,NX=OX,RX={createLink:pS,updateLink:S4,queryLinkAttrs:E4,queryIsLinkAllowedInRange:hS,queryIsLinkActive:C4,queryIsSelectionAroundLink:T4},W1="link",rs=t=>{const e=t.marks[W1];return Lt(e,`markType ${W1} not found`),e};function PX({openOnClick:t=!1}={}){return{type:"mark",name:W1,schema:{attrs:{href:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:e=>({href:e.getAttribute("href")})}],toDOM:e=>["a",{...e.attrs,rel:"noopener noreferrer nofollow"},0]},markdown:{toMarkdown:{open(e,n,r,o){return w3(n,r,o,1)?"<":"["},close(e,n,r,o){return w3(n,r,o,-1)?">":"]("+e.esc(n.attrs.href)+(n.attrs.title?" "+w4(n.attrs.title):"")+")"}},parseMarkdown:{link:{mark:"link",getAttrs:e=>({href:e.attrGet("href"),title:e.attrGet("title")||null})}}},options:{openOnClick:t}}}function OX(){return({schema:t,specRegistry:e})=>{const{openOnClick:n}=e.options[W1],r=rs(t);return[IX(r),DX(/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-zA-Z]{2,}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/g),MX(/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-zA-Z]{2,}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/g,r,o=>({href:o})),n&&new ht({props:{handleClick:(o,i,s)=>{const{schema:a}=o.state,l=iY(o.state,rs(a));return l.href&&s.target instanceof HTMLAnchorElement&&(s.stopPropagation(),window.open(l.href)),!1}}})]}}const $4=/(^|\s)(((http|https|ftp):\/\/)?(?:[^\s.:\/]+\.)+(?:aaa|aarp|abarth|abb|abbott|abbvie|abc|able|abogado|abudhabi|ac|academy|accenture|accountant|accountants|aco|actor|ad|adac|ads|adult|ae|aeg|aero|aetna|af|afamilycompany|afl|africa|ag|agakhan|agency|ai|aig|airbus|airforce|airtel|akdn|al|alfaromeo|alibaba|alipay|allfinanz|allstate|ally|alsace|alstom|am|amazon|americanexpress|americanfamily|amex|amfam|amica|amsterdam|analytics|android|anquan|anz|ao|aol|apartments|app|apple|aq|aquarelle|ar|arab|aramco|archi|army|arpa|art|arte|as|asda|asia|associates|at|athleta|attorney|au|auction|audi|audible|audio|auspost|author|auto|autos|avianca|aw|aws|ax|axa|az|azure|ba|baby|baidu|banamex|bananarepublic|band|bank|bar|barcelona|barclaycard|barclays|barefoot|bargains|baseball|basketball|bauhaus|bayern|bb|bbc|bbt|bbva|bcg|bcn|bd|be|beats|beauty|beer|bentley|berlin|best|bestbuy|bet|bf|bg|bh|bharti|bi|bible|bid|bike|bing|bingo|bio|biz|bj|black|blackfriday|blockbuster|blog|bloomberg|blue|bm|bms|bmw|bn|bnpparibas|bo|boats|boehringer|bofa|bom|bond|boo|book|booking|bosch|bostik|boston|bot|boutique|box|br|bradesco|bridgestone|broadway|broker|brother|brussels|bs|bt|budapest|bugatti|build|builders|business|buy|buzz|bv|bw|by|bz|bzh|ca|cab|cafe|cal|call|calvinklein|cam|camera|camp|cancerresearch|canon|capetown|capital|capitalone|car|caravan|cards|care|career|careers|cars|casa|case|cash|casino|cat|catering|catholic|cba|cbn|cbre|cbs|cc|cd|center|ceo|cern|cf|cfa|cfd|cg|ch|chanel|channel|charity|chase|chat|cheap|chintai|christmas|chrome|church|ci|cipriani|circle|cisco|citadel|citi|citic|city|cityeats|ck|cl|claims|cleaning|click|clinic|clinique|clothing|cloud|club|clubmed|cm|cn|co|coach|codes|coffee|college|cologne|com|comcast|commbank|community|company|compare|computer|comsec|condos|construction|consulting|contact|contractors|cooking|cookingchannel|cool|coop|corsica|country|coupon|coupons|courses|cpa|cr|credit|creditcard|creditunion|cricket|crown|crs|cruise|cruises|csc|cu|cuisinella|cv|cw|cx|cy|cymru|cyou|cz|dabur|dad|dance|data|date|dating|datsun|day|dclk|dds|de|deal|dealer|deals|degree|delivery|dell|deloitte|delta|democrat|dental|dentist|desi|design|dev|dhl|diamonds|diet|digital|direct|directory|discount|discover|dish|diy|dj|dk|dm|dnp|do|docs|doctor|dog|domains|dot|download|drive|dtv|dubai|duck|dunlop|dupont|durban|dvag|dvr|dz|earth|eat|ec|eco|edeka|edu|education|ee|eg|email|emerck|energy|engineer|engineering|enterprises|epson|equipment|er|ericsson|erni|es|esq|estate|et|etisalat|eu|eurovision|eus|events|exchange|expert|exposed|express|extraspace|fage|fail|fairwinds|faith|family|fan|fans|farm|farmers|fashion|fast|fedex|feedback|ferrari|ferrero|fi|fiat|fidelity|fido|film|final|finance|financial|fire|firestone|firmdale|fish|fishing|fit|fitness|fj|fk|flickr|flights|flir|florist|flowers|fly|fm|fo|foo|food|foodnetwork|football|ford|forex|forsale|forum|foundation|fox|fr|free|fresenius|frl|frogans|frontdoor|frontier|ftr|fujitsu|fun|fund|furniture|futbol|fyi|ga|gal|gallery|gallo|gallup|game|games|gap|garden|gay|gb|gbiz|gd|gdn|ge|gea|gent|genting|george|gf|gg|ggee|gh|gi|gift|gifts|gives|giving|gl|glade|glass|gle|global|globo|gm|gmail|gmbh|gmo|gmx|gn|godaddy|gold|goldpoint|golf|goo|goodyear|goog|google|gop|got|gov|gp|gq|gr|grainger|graphics|gratis|green|gripe|grocery|group|gs|gt|gu|guardian|gucci|guge|guide|guitars|guru|gw|gy|hair|hamburg|hangout|haus|hbo|hdfc|hdfcbank|health|healthcare|help|helsinki|here|hermes|hgtv|hiphop|hisamitsu|hitachi|hiv|hk|hkt|hm|hn|hockey|holdings|holiday|homedepot|homegoods|homes|homesense|honda|horse|hospital|host|hosting|hot|hoteles|hotels|hotmail|house|how|hr|hsbc|ht|hu|hughes|hyatt|hyundai|ibm|icbc|ice|icu|id|ie|ieee|ifm|ikano|il|im|imamat|imdb|immo|immobilien|in|inc|industries|infiniti|info|ing|ink|institute|insurance|insure|int|international|intuit|investments|io|ipiranga|iq|ir|irish|is|ismaili|ist|istanbul|it|itau|itv|jaguar|java|jcb|je|jeep|jetzt|jewelry|jio|jll|jm|jmp|jnj|jo|jobs|joburg|jot|joy|jp|jpmorgan|jprs|juegos|juniper|kaufen|kddi|ke|kerryhotels|kerrylogistics|kerryproperties|kfh|kg|kh|ki|kia|kim|kinder|kindle|kitchen|kiwi|km|kn|koeln|komatsu|kosher|kp|kpmg|kpn|kr|krd|kred|kuokgroup|kw|ky|kyoto|kz|la|lacaixa|lamborghini|lamer|lancaster|lancia|land|landrover|lanxess|lasalle|lat|latino|latrobe|law|lawyer|lb|lc|lds|lease|leclerc|lefrak|legal|lego|lexus|lgbt|li|lidl|life|lifeinsurance|lifestyle|lighting|like|lilly|limited|limo|lincoln|linde|link|lipsy|live|living|lixil|lk|llc|llp|loan|loans|locker|locus|loft|lol|london|lotte|lotto|love|lpl|lplfinancial|lr|ls|lt|ltd|ltda|lu|lundbeck|luxe|luxury|lv|ly|ma|macys|madrid|maif|maison|makeup|man|management|mango|map|market|marketing|markets|marriott|marshalls|maserati|mattel|mba|mc|mckinsey|md|me|med|media|meet|melbourne|meme|memorial|men|menu|merckmsd|mg|mh|miami|microsoft|mil|mini|mint|mit|mitsubishi|mk|ml|mlb|mls|mm|mma|mn|mo|mobi|mobile|moda|moe|moi|mom|monash|money|monster|mormon|mortgage|moscow|moto|motorcycles|mov|movie|mp|mq|mr|ms|msd|mt|mtn|mtr|mu|museum|mutual|mv|mw|mx|my|mz|na|nab|nagoya|name|natura|navy|nba|nc|ne|nec|net|netbank|netflix|network|neustar|new|news|next|nextdirect|nexus|nf|nfl|ng|ngo|nhk|ni|nico|nike|nikon|ninja|nissan|nissay|nl|no|nokia|northwesternmutual|norton|now|nowruz|nowtv|np|nr|nra|nrw|ntt|nu|nyc|nz|obi|observer|off|office|okinawa|olayan|olayangroup|oldnavy|ollo|om|omega|one|ong|onl|online|ooo|open|oracle|orange|org|organic|origins|osaka|otsuka|ott|ovh|pa|page|panasonic|paris|pars|partners|parts|party|passagens|pay|pccw|pe|pet|pf|pfizer|pg|ph|pharmacy|phd|philips|phone|photo|photography|photos|physio|pics|pictet|pictures|pid|pin|ping|pink|pioneer|pizza|pk|pl|place|play|playstation|plumbing|plus|pm|pn|pnc|pohl|poker|politie|porn|post|pr|pramerica|praxi|press|prime|pro|prod|productions|prof|progressive|promo|properties|property|protection|pru|prudential|ps|pt|pub|pw|pwc|py|qa|qpon|quebec|quest|qvc|racing|radio|raid|re|read|realestate|realtor|realty|recipes|red|redstone|redumbrella|rehab|reise|reisen|reit|reliance|ren|rent|rentals|repair|report|republican|rest|restaurant|review|reviews|rexroth|rich|richardli|ricoh|ril|rio|rip|rmit|ro|rocher|rocks|rodeo|rogers|room|rs|rsvp|ru|rugby|ruhr|run|rw|rwe|ryukyu|sa|saarland|safe|safety|sakura|sale|salon|samsclub|samsung|sandvik|sandvikcoromant|sanofi|sap|sarl|sas|save|saxo|sb|sbi|sbs|sc|sca|scb|schaeffler|schmidt|scholarships|school|schule|schwarz|science|scjohnson|scot|sd|se|search|seat|secure|security|seek|select|sener|services|ses|seven|sew|sex|sexy|sfr|sg|sh|shangrila|sharp|shaw|shell|shia|shiksha|shoes|shop|shopping|shouji|show|showtime|si|silk|sina|singles|site|sj|sk|ski|skin|sky|skype|sl|sling|sm|smart|smile|sn|sncf|so|soccer|social|softbank|software|sohu|solar|solutions|song|sony|soy|spa|space|sport|spot|sr|srl|ss|st|stada|staples|star|statebank|statefarm|stc|stcgroup|stockholm|storage|store|stream|studio|study|style|su|sucks|supplies|supply|support|surf|surgery|suzuki|sv|swatch|swiftcover|swiss|sx|sy|sydney|systems|sz|tab|taipei|talk|taobao|target|tatamotors|tatar|tattoo|tax|taxi|tc|tci|td|tdk|team|tech|technology|tel|temasek|tennis|teva|tf|tg|th|thd|theater|theatre|tiaa|tickets|tienda|tiffany|tips|tires|tirol|tj|tjmaxx|tjx|tk|tkmaxx|tl|tm|tmall|tn|to|today|tokyo|tools|top|toray|toshiba|total|tours|town|toyota|toys|tr|trade|trading|training|travel|travelchannel|travelers|travelersinsurance|trust|trv|tt|tube|tui|tunes|tushu|tv|tvs|tw|tz|ua|ubank|ubs|ug|uk|unicom|university|uno|uol|ups|us|uy|uz|va|vacations|vana|vanguard|vc|ve|vegas|ventures|verisign|versicherung|vet|vg|vi|viajes|video|vig|viking|villas|vin|vip|virgin|visa|vision|viva|vivo|vlaanderen|vn|vodka|volkswagen|volvo|vote|voting|voto|voyage|vu|vuelos|wales|walmart|walter|wang|wanggou|watch|watches|weather|weatherchannel|webcam|weber|website|wed|wedding|weibo|weir|wf|whoswho|wien|wiki|williamhill|win|windows|wine|winners|wme|wolterskluwer|woodside|work|works|world|wow|ws|wtc|wtf|xbox|xerox|xfinity|xihuan|xin|xn--11b4c3d|xn--1ck2e1b|xn--1qqw23a|xn--2scrj9c|xn--30rr7y|xn--3bst00m|xn--3ds443g|xn--3e0b707e|xn--3hcrj9c|xn--3oq18vl8pn36a|xn--3pxu8k|xn--42c2d9a|xn--45br5cyl|xn--45brj9c|xn--45q11c|xn--4dbrk0ce|xn--4gbrim|xn--54b7fta0cc|xn--55qw42g|xn--55qx5d|xn--5su34j936bgsg|xn--5tzm5g|xn--6frz82g|xn--6qq986b3xl|xn--80adxhks|xn--80ao21a|xn--80aqecdr1a|xn--80asehdb|xn--80aswg|xn--8y0a063a|xn--90a3ac|xn--90ae|xn--90ais|xn--9dbq2a|xn--9et52u|xn--9krt00a|xn--b4w605ferd|xn--bck1b9a5dre4c|xn--c1avg|xn--c2br7g|xn--cck2b3b|xn--cckwcxetd|xn--cg4bki|xn--clchc0ea0b2g2a9gcd|xn--czr694b|xn--czrs0t|xn--czru2d|xn--d1acj3b|xn--d1alf|xn--e1a4c|xn--eckvdtc9d|xn--efvy88h|xn--fct429k|xn--fhbei|xn--fiq228c5hs|xn--fiq64b|xn--fiqs8s|xn--fiqz9s|xn--fjq720a|xn--flw351e|xn--fpcrj9c3d|xn--fzc2c9e2c|xn--fzys8d69uvgm|xn--g2xx48c|xn--gckr3f0f|xn--gecrj9c|xn--gk3at1e|xn--h2breg3eve|xn--h2brj9c|xn--h2brj9c8c|xn--hxt814e|xn--i1b6b1a6a2e|xn--imr513n|xn--io0a7i|xn--j1aef|xn--j1amh|xn--j6w193g|xn--jlq480n2rg|xn--jlq61u9w7b|xn--jvr189m|xn--kcrx77d1x4a|xn--kprw13d|xn--kpry57d|xn--kput3i|xn--l1acc|xn--lgbbat1ad8j|xn--mgb9awbf|xn--mgba3a3ejt|xn--mgba3a4f16a|xn--mgba7c0bbn0a|xn--mgbaakc7dvf|xn--mgbaam7a8h|xn--mgbab2bd|xn--mgbah1a3hjkrd|xn--mgbai9azgqp6j|xn--mgbayh7gpa|xn--mgbbh1a|xn--mgbbh1a71e|xn--mgbc0a9azcg|xn--mgbca7dzdo|xn--mgbcpq6gpa1a|xn--mgberp4a5d4ar|xn--mgbgu82a|xn--mgbi4ecexp|xn--mgbpl2fh|xn--mgbt3dhd|xn--mgbtx2b|xn--mgbx4cd0ab|xn--mix891f|xn--mk1bu44c|xn--mxtq1m|xn--ngbc5azd|xn--ngbe9e0a|xn--ngbrx|xn--node|xn--nqv7f|xn--nqv7fs00ema|xn--nyqy26a|xn--o3cw4h|xn--ogbpf8fl|xn--otu796d|xn--p1acf|xn--p1ai|xn--pgbs0dh|xn--pssy2u|xn--q7ce6a|xn--q9jyb4c|xn--qcka1pmc|xn--qxa6a|xn--qxam|xn--rhqv96g|xn--rovu88b|xn--rvc1e0am3e|xn--s9brj9c|xn--ses554g|xn--t60b56a|xn--tckwe|xn--tiq49xqyj|xn--unup4y|xn--vermgensberater-ctb|xn--vermgensberatung-pwb|xn--vhquv|xn--vuq861b|xn--w4r85el8fhu5dnra|xn--w4rs40l|xn--wgbh1c|xn--wgbl6a|xn--xhq521b|xn--xkc2al3hye2a|xn--xkc2dl3a5ee0h|xn--y9a3aq|xn--yfro4i67o|xn--ygbi2ammx|xn--zfr164b|xxx|xyz|yachts|yahoo|yamaxun|yandex|ye|yodobashi|yoga|yokohama|you|youtube|yt|yun|za|zappos|zara|zero|zip|zm|zone|zuerich|zw))\s$/;function IX(t){return new Gs($4,(e,n,r,o)=>{if(!n[0])return null;const[i,s,a,l]=n;if(!s){let d=!1;if(e.doc.nodesBetween(r,o,f=>d?!1:t.isInSet(f.marks)?(d=!0,!1):!0),d)return null}const c=l?a:`http://${a}`,u=e.tr;return u.addMark(s&&s.length>0?r+1:r,o,t.create({href:c})),u.insertText(" ",o),u})}function DX(t){return new ht({props:{handlePaste:function(n,r){const o=r;if(!o.clipboardData)return!1;let i=o.clipboardData.getData("text/plain");const s=o.clipboardData.getData("text/html");if(!(i&&!s)||n.state.selection.empty)return!1;const{state:l,dispatch:c}=n,u=f0(t,i);return u.length===1&&u.every(f=>f.match)?pS(i)(l,c):!1}}})}function MX(t,e,n){return new ht({props:{transformPasted:function(o){return hY(o,i=>{if(!i.isText)return i;const s=i.text;return f0(t,s).map(({start:l,end:c,match:u,subString:d})=>{let f=i.cut(l,c);if(u){var p=n instanceof Function?n(d):n;f=f.mark(e.create(p).addToSet(i.marks))}return f})})}}})}function w3(t,e,n,r){if(t.attrs.title||!/^\w+:/.test(t.attrs.href))return!1;let o=e.child(n+(r<0?-1:0));if(!o.isText||o.text!==t.attrs.href||o.marks[o.marks.length-1]!==t)return!1;if(n===(r<0?1:e.childCount-1))return!0;let i=e.child(n+(r<0?-2:1));return!t.isInSet(i.marks)}function LX(t){return e=>{const n=e.doc.nodeAt(t);return!!n&&n.isText}}function _3(t,e,n){return n=n&&n.trim(),mt(r=>LX(t)(r),(r,o)=>{const i=rs(r.schema);let s=r.tr.removeMark(t,e,i);if(n){const a=rs(r.schema).create({href:n});s.addMark(t,e,a)}return o&&o(s),!0})}function pS(t){return mt(e=>hS(e.selection.$from.pos,e.selection.$to.pos)(e),(e,n)=>{const[r,o]=[e.selection.$from.pos,e.selection.$to.pos],i=rs(e.schema);let s=e.tr.removeMark(r,o,i);if(t.trim()){const a=rs(e.schema).create({href:t});s.addMark(r,o,a)}return n&&n(s),!0})}function S4(t){return(e,n)=>{if(!e.selection.empty)return _3(e.selection.$from.pos,e.selection.$to.pos,t)(e,n);const{$from:r}=e.selection,o=r.pos-r.textOffset,i=e.doc.nodeAt(o);let s=o;return i&&(s+=i.nodeSize),_3(o,s,t)(e,n)}}function E4(){return t=>{const{$from:e}=t.selection,n=e.pos-e.textOffset,r=t.doc.resolve(n),o=t.doc.nodeAt(n),{nodeAfter:i}=r;if(!i)return;const a=rs(t.schema).isInSet(i.marks||[]);if(a)return{href:a.attrs.href,text:o.textContent}}}function hS(t,e){return n=>{const r=n.doc.resolve(t),o=n.doc.resolve(e),i=rs(n.schema);if(r.parent===o.parent&&r.parent.isTextblock)return r.parent.type.allowsMarkType(i)}}function C4(){return t=>!!rs(t.schema).isInSet(t.selection.$from.marks())}function T4(){return t=>{const{$from:e,$to:n}=t.selection,r=e.nodeAfter;return!!r&&e.textOffset===0&&n.pos-e.pos===r.nodeSize&&!!rs(t.schema).isInSet(r.marks)}}var is=Object.freeze({__proto__:null,spec:AX,plugins:NX,commands:RX,URL_REGEX:$4,createLink:pS,updateLink:S4,queryLinkAttrs:E4,queryIsLinkAllowedInRange:hS,queryIsLinkActive:C4,queryIsSelectionAroundLink:T4});let FX=()=>{};function BX(t){const e=(i,s)=>s===void 0?!1:i.doc.resolve(s).parent.type.name==="bulletList",n=i=>{i.containerDOM.hasAttribute("data-bangle-is-todo")&&(i.containerDOM.removeAttribute("data-bangle-is-todo"),i.containerDOM.removeChild(i.containerDOM.firstChild))},r=(i,s,a)=>{if(a.containerDOM.hasAttribute("data-bangle-is-todo"))return;const l=o(i.todoChecked,c=>{s({todoChecked:c})});a.containerDOM.setAttribute("data-bangle-is-todo",""),a.containerDOM.prepend(l)},o=(i,s)=>{const a=JZ(["span",{contentEditable:!1},["input",{type:"checkbox"}]]),l=a.querySelector("input");return i&&l.setAttribute("checked",""),l.addEventListener("input",c=>{FX("change event",l.checked),s(l.checked)}),a};return Od.createPlugin({name:t,containerDOM:["li",{"data-bangle-name":t}],contentDOM:["span",{}],renderHandlers:{create:(i,{attrs:s,updateAttrs:a,getPos:l,view:c})=>{s.todoChecked!=null&&e(c.state,l())&&r(s,a,i),i.containerDOM.appendChild(i.contentDOM)},update:(i,{attrs:s,view:a,getPos:l,updateAttrs:c})=>{const{todoChecked:u}=s;if(u==null){n(i);return}if(!e(a.state,l()))return;r(s,c,i);const d=i.containerDOM.firstChild.firstChild;d.checked=u},destroy:()=>{}}})}const jX=WX,zX=UX,qX={indentListItem:mS,outdentListItem:gS,moveListItemUp:yS,moveListItemDown:bS},A4={toggleDone:Kn.mac?"Ctrl-Enter":"Ctrl-I",indent:"Tab",outdent:"Shift-Tab",moveDown:"Alt-ArrowDown",moveUp:"Alt-ArrowUp",emptyCopy:"Mod-c",emptyCut:"Mod-x",insertEmptyListAbove:"Mod-Shift-Enter",insertEmptyListBelow:"Mod-Enter"},Zi="listItem",qg=t=>{const e=Ee(t,Zi);return Zs(e,[Ee(t,"bulletList"),Ee(t,"orderedList")])};function WX(){const{toDOM:t,parseDOM:e}=YZ(Zi,{tag:"li",content:0});return{type:"node",name:Zi,schema:{content:"(paragraph) (paragraph | bulletList | orderedList)*",defining:!0,draggable:!0,attrs:{todoChecked:{default:null}},toDOM:t,parseDOM:e},markdown:{toMarkdown(n,r){r.attrs.todoChecked!=null&&n.write(r.attrs.todoChecked?"[x] ":"[ ] "),n.renderContent(r)},parseMarkdown:{list_item:{block:Zi,getAttrs:n=>{let r=null;const o=n.attrGet("isDone");return o==="yes"?r=!0:o==="no"&&(r=!1),{todoChecked:r}}}}}}}function UX({keybindings:t=A4,nodeView:e=!0}={}){return({schema:n})=>{const r=Ee(n,Zi);return[t&&en({[t.toggleDone]:mt(qg,RJ(Ee(n,"listItem"),o=>({...o,todoChecked:o.todoChecked==null?!1:!o.todoChecked}))),Backspace:SJ(r),Enter:EJ(r),..._r([[t.indent,mS()],[t.outdent,gS()],[t.moveUp,yS()],[t.moveDown,bS()],[t.emptyCut,mt(qg,h0(r))],[t.emptyCopy,mt(qg,p0(r))],[t.insertEmptyListAbove,R4()],[t.insertEmptyListBelow,P4()]])}),e&&BX(Zi)]}}function mS(){return(t,e)=>{const n=Ee(t,Zi);return kJ(n)(t,e)}}function gS(){return(t,e,n)=>{const r=Ee(t,Zi);return Yp(r)(t,e,n)}}const VX=t=>so(t.selection.$from.node(-1),t.schema);function N4(t){return(e,n,r)=>{const o=Ee(e,Zi),i=Zs(o,[Ee(e,"bulletList"),Ee(e,"orderedList")]);return mt(i,(a=>uo(Fs(o,a),(l,c,u)=>{const d=l.selection.$from.node(-3),f=so(d,l.schema);if(!NJ(o,a)(l,c,u))return!1;if(f&&c){const h=u.state;let{tr:y,schema:m}=h;y=Gh(y,m,h.selection.$from.node(-1),h.selection.$from.before(-1)),c(y)}return!0}))(t))(e,n,r)}}function yS(){return N4("UP")}function bS(){return N4("DOWN")}function vS(t=!0){return(e,n,r)=>{const o=Ee(e,Zi);return uo(mt(VX,Lo(o,t?"above":"below",!0,{todoChecked:!1})),mt(qg,Lo(o,t?"above":"below",!0)))(e,n,r)}}function R4(){return vS(!0)}function P4(){return vS(!1)}var Zh=Object.freeze({__proto__:null,spec:jX,plugins:zX,commands:qX,defaultKeys:A4,indentListItem:mS,outdentListItem:gS,moveListItemUp:yS,moveListItemDown:bS,insertEmptySiblingList:vS,insertEmptySiblingListAbove:R4,insertEmptySiblingListBelow:P4});const HX=ZX,KX=YX,GX={toggleOrderedList:I4,queryIsOrderedListActive:D4},O4={toggle:"Shift-Ctrl-9"},Jp="orderedList";function ZX(){return{type:"node",name:Jp,schema:{attrs:{order:{default:1},tight:{default:!1}},content:"listItem+",group:"block",parseDOM:[{tag:"ol",getAttrs:t=>({order:t.hasAttribute("start")?+t.getAttribute("start"):1})}],toDOM:t=>t.attrs.order===1?["ol",0]:["ol",{start:t.attrs.order},0]},markdown:{toMarkdown(t,e){let n=e.attrs.order||1,r=String(n+e.childCount-1).length,o=t.repeat(" ",r+2);t.renderList(e,o,i=>{let s=String(n+i);return t.repeat(" ",r-s.length)+s+". "})},parseMarkdown:{ordered_list:{block:Jp,getAttrs:(t,e,n)=>{var r;return{tight:e4(e,n),order:+((r=t.attrGet("start"))!==null&&r!==void 0?r:1)}}}}}}}function YX({keybindings:t=O4}={}){return({schema:e})=>{const n=Ee(e,Jp);return[L$(/^(1)[.)]\s$/,n,r=>({order:+r[1]}),(r,o)=>o.childCount+o.attrs.order===+r[1]),t&&en(_r([[t.toggle,b0(n)]]))]}}function I4(){return(t,e,n)=>b0(Ee(t,Jp),Ee(t,"listItem"))(t,e,n)}function D4(){return t=>Zs(Ee(t,"listItem"),[Ee(t,Jp)])(t)}var Dd=Object.freeze({__proto__:null,spec:HX,plugins:KX,commands:GX,defaultKeys:O4,toggleOrderedList:I4,queryIsOrderedListActive:D4});const JX=tQ,XX=nQ,QX={toggleStrike:L4,queryIsStrikeActive:F4},M4={toggleStrike:"Mod-d"},wc="strike",eQ=t=>{const e=t.marks[wc];return Lt(e,`markType ${wc} not found`),e};function tQ(){return{type:"mark",name:wc,schema:{parseDOM:[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",getAttrs:t=>t==="line-through"&&null}],toDOM:()=>["s",0]},markdown:{toMarkdown:{open:"~~",close:"~~",mixable:!0,expelEnclosingWhitespace:!0},parseMarkdown:{s:{mark:"strike"}}}}}function nQ({keybindings:t=M4}={}){return({schema:e})=>{const n=eQ(e);return[vc(/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,n),bc(/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,n),t&&en(_r([[t.toggleStrike,Ks(n)]]))]}}function L4(){return(t,e,n)=>{const r=t.schema.marks[wc];return Lt(r,`markType ${wc} not found`),Ks(r)(t,e)}}function F4(){return t=>{const e=t.schema.marks[wc];return Lt(e,`markType ${wc} not found`),Uh(e)(t)}}var wS=Object.freeze({__proto__:null,spec:JX,plugins:XX,commands:QX,defaultKeys:M4,toggleStrike:L4,queryIsStrikeActive:F4});const rQ=aQ,oQ=lQ,iQ={toggleUnderline:j4,queryIsUnderlineActive:z4},B4={toggleUnderline:"Mod-u"},nl="underline",sQ=t=>{const e=t.marks[nl];return Lt(e,`markType ${nl} not found`),e};function aQ(){return{type:"mark",name:nl,schema:{parseDOM:[{tag:"u"},{style:"text-decoration",getAttrs:t=>t===nl&&null}],toDOM:()=>["u",0]},markdown:{toMarkdown:{open:"_",close:"_",mixable:!0,expelEnclosingWhitespace:!0}}}}function lQ({keybindings:t=B4}={}){return({schema:e})=>{const n=sQ(e);return[bc(/~([^~]+)~$/,n),vc(/~([^~]+)~/g,n),t?en(_r([[t.toggleUnderline,Ks(n)]])):void 0]}}function j4(){return(t,e,n)=>{const r=t.schema.marks[nl];return Lt(r,`markType ${nl} not found`),Ks(r)(t,e)}}function z4(){return t=>{const e=t.schema.marks[nl];return Lt(e,`markType ${nl} not found`),Uh(e)(t)}}var _S=Object.freeze({__proto__:null,spec:rQ,plugins:oQ,commands:iQ,defaultKeys:B4,toggleUnderline:j4,queryIsUnderlineActive:z4});function cQ(t){const e=new Map;let n=0;return t.forEach(r=>{r.forEach((o,i,s)=>{if(s>n&&(n=s),!o)return;const a=o.textContent.length+2;e.has(s)||e.set(s,a),a>e.get(s)&&e.set(s,a)})}),Array.from({length:n+1},(r,o)=>e.get(o)||1)}const x0=fZ({tableGroup:"block",cellContent:"block+",cellAttributes:{align:{default:null,setDOMAttr(t,e){t!=null&&(e.style=(e.style||"")+`text-align: ${t};`)}},background:{default:null,getFromDOM(t){return t.style.backgroundColor||null},setDOMAttr(t,e){t&&(e.style=(e.style||"")+`background-color: ${t};`)}}}}),q4="table_header",W4=(t,e)=>{e.forEach(function(n,r,o){const i=t.esc;t.esc=(s,...a)=>(s=i.call(t,s,...a),s=s.replace(/\|/gi,"\\$&"),s),t.renderInline(n),t.esc=i})},uQ={name:"table",type:"node",schema:x0.table,markdown:{toMarkdown:(t,e)=>{t.flushClose(1),t.ensureNewLine(),t.write(`
`),t.renderContent(e)},parseMarkdown:{table:{block:"table"}}}},dQ={name:"table_cell",type:"node",schema:x0.table_cell,markdown:{toMarkdown:W4,parseMarkdown:{td:{block:"table_cell",getAttrs:t=>({align:t.align})}}}},fQ={name:q4,type:"node",schema:x0.table_header,markdown:{toMarkdown:W4,parseMarkdown:{th:{block:"table_header",getAttrs:t=>({align:t.align})}}}},pQ={name:"table_row",type:"node",schema:x0.table_row,markdown:{toMarkdown:(t,e,n)=>{var r;t.ensureNewLine();const o=cQ(n);e.forEach(function(i,s,a){a===0&&t.write("| "),t.render(i,e,a);const l=o[a]-2-i.textContent.length;t.write(" ".repeat(Math.max(0,l))),t.write(" |"),i!==e.lastChild&&t.write(" ")}),t.ensureNewLine(),((r=e.firstChild)===null||r===void 0?void 0:r.type.name)===q4&&e.forEach(function(i,s,a){a===0&&t.write("|");const{align:l}=i.attrs;switch(l){case"left":{t.write(":");const c=o[a]-1;t.write("-".repeat(Math.max(0,c)));break}case"center":{t.write(":");const c=o[a]-2;t.write("-".repeat(Math.max(0,c))),t.write(":");break}case"right":{const c=o[a]-1;t.write("-".repeat(Math.max(0,c))),t.write(":");break}default:{const c=o[a];t.write("-".repeat(Math.max(0,c)));break}}t.write("|")})},parseMarkdown:{tr:{block:"table_row"}}}},hQ=()=>[PZ(),en({Tab:c3(1),"Shift-Tab":c3(-1)})],mQ=(()=>{const t=Ao.spec();return t&&{...t,schema:{...t.schema||{},draggable:!0}}})(),gQ=[PM.spec({content:"frontMatter? block+"}),UM.spec(),Vh.spec(),g0.spec(),Id.spec(),aS.spec(),lS.spec(),mQ,fS.spec(),Zh.spec(),Dd.spec(),uQ,dQ,fQ,pQ,y0.spec(),v0.spec(),_0.spec(),wS.spec(),is.spec(),_S.spec(),GY.spec()],x3=new WeakSet;function U4(t,e,n){const r=e.receiveMessages(Dh.WILD_CARD,o=>{x3.has(o)||t.postMessage(o)});return n.addEventListener("abort",()=>{t.close(),r(),e.destroy()},{once:!0}),t.onmessage=({data:o})=>{x3.add(o),e.transmit(o)},e}var Yh=(t=>(t.FileRenameNotAllowed="WorkspaceInfoError.RenameNotAllowed",t.WorkspaceCreateNotAllowed="WorkspaceInfoError.WorkspaceCreateNotAllowed",t.WorkspaceDeleteNotAllowed="WorkspaceInfoError.WorkspaceDeleteNotAllowed",t.WorkspaceNotFound="WorkspaceInfoError.WorkspaceNotFound",t))(Yh||{});class xx{constructor({mtimeMs:e=new Date().getTime()}={}){ee(this,"mtimeMs");this.mtimeMs=e}}class V4{constructor(e){this.opts=e}async copy(){}async mkdirp(e){}async move(e,n){}async rmdir(){}_verifyFilePath(e){if(e.startsWith("/"))throw Error("BabyFs: filePath must not start with /")}_verifyFileType(e){if(!(e instanceof File))throw Error("BabyFs: Provided data is not of File type")}}class pi extends lt{}const H4="BABY_FS_FILE_ALREADY_EXISTS_ERROR",Bs="BABY_FS_FILE_NOT_FOUND_ERROR",K4="BABY_FS_UPSTREAM_ERROR",Jh="BABY_FS_NATIVE_BROWSER_PERMISSION_ERROR",k0="BABY_FS_NATIVE_BROWSER_USER_ABORTED_ERROR",yQ=(t,e)=>e.some(n=>t instanceof n);let k3,$3;function bQ(){return k3||(k3=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vQ(){return $3||($3=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const G4=new WeakMap,kx=new WeakMap,Z4=new WeakMap,Qv=new WeakMap,xS=new WeakMap;function wQ(t){const e=new Promise((n,r)=>{const o=()=>{t.removeEventListener("success",i),t.removeEventListener("error",s)},i=()=>{n(Ba(t.result)),o()},s=()=>{r(t.error),o()};t.addEventListener("success",i),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&G4.set(n,t)}).catch(()=>{}),xS.set(e,t),e}function _Q(t){if(kx.has(t))return;const e=new Promise((n,r)=>{const o=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",s),t.removeEventListener("abort",s)},i=()=>{n(),o()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",i),t.addEventListener("error",s),t.addEventListener("abort",s)});kx.set(t,e)}let $x={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return kx.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Z4.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ba(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function xQ(t){$x=t($x)}function kQ(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ew(this),e,...n);return Z4.set(r,e.sort?e.sort():[e]),Ba(r)}:vQ().includes(t)?function(...e){return t.apply(ew(this),e),Ba(G4.get(this))}:function(...e){return Ba(t.apply(ew(this),e))}}function $Q(t){return typeof t=="function"?kQ(t):(t instanceof IDBTransaction&&_Q(t),yQ(t,bQ())?new Proxy(t,$x):t)}function Ba(t){if(t instanceof IDBRequest)return wQ(t);if(Qv.has(t))return Qv.get(t);const e=$Q(t);return e!==t&&(Qv.set(t,e),xS.set(e,t)),e}const ew=t=>xS.get(t);function $0(t,e,{blocked:n,upgrade:r,blocking:o,terminated:i}={}){const s=indexedDB.open(t,e),a=Ba(s);return r&&s.addEventListener("upgradeneeded",l=>{r(Ba(s.result),l.oldVersion,l.newVersion,Ba(s.transaction),l)}),n&&s.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),o&&l.addEventListener("versionchange",c=>o(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const SQ=["get","getKey","getAll","getAllKeys","count"],EQ=["put","add","delete","clear"],tw=new Map;function S3(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(tw.get(e))return tw.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=EQ.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||SQ.includes(n)))return;const i=async function(s,...a){const l=this.transaction(s,o?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),o&&l.done]))[0]};return tw.set(e,i),i}xQ(t=>({...t,get:(e,n,r)=>S3(e,n)||t.get(e,n,r),has:(e,n)=>!!S3(e,n)||t.has(e,n)}));async function CQ(t,e){typeof e=="string"&&(e=e.split("/"));const n=async(r,o)=>{const[i,...s]=r;if(!i)throw new Error("parentName cannot be empty");if(r.length===1)return o.getFileHandle(i,{create:!0});const a=await o.getDirectoryHandle(i,{create:!0});return n(s,a)};if(e[0]!==t.name)throw new Error(`getFile Error: root parent ${e[0]} must be the rootDirHandle ${t.name}`);return n(e.slice(1),t)}function kS(t){return t.text?t.text():TQ(t)}function TQ(t){return new Promise(e=>{const n=new FileReader;n.addEventListener("loadend",r=>{var i;const o=(i=r.srcElement)==null?void 0:i.result;e(o)}),n.readAsText(t)})}async function AQ(t){const e={};return e.writable=!0,e.mode="readwrite",t.queryPermission?await t.queryPermission(e)==="granted":(console.debug("queryPermission not available, assuming permission"),!0)}async function Y4(t,{allowedFile:e=r=>!0,allowedDir:n=r=>!0}={}){return(async o=>{let i=[];for await(const s of o.values())if(s.kind==="file"&&e(s)&&i.push([o,s]),s.kind==="directory"&&n(s)){let a=await Y4(s,{allowedDir:n,allowedFile:e});a=a.map(l=>[o,...l]),i=i.concat(a)}return i.filter(s=>s.length>0)})(t)}function Wl(t,e){return t.catch(n=>Promise.reject(new U1({message:e,code:K4})))}const NQ="baby-idb-meta-3",eg="baby-idb-meta-store3";class RQ{constructor(){ee(this,"_db",()=>$0(NQ,1,{upgrade(e,n){switch(n){case 0:e.createObjectStore(eg)}}}))}async del(e){await Wl(this._db().then(n=>n.delete(eg,e)),"Error deleting metadata")}async get(e,n){const r=await Wl(this._db().then(o=>o.get(eg,e)),"Error reading metadata");return r==null?(await this.set(e,n),n):r}async set(e,n){await Wl(this._db().then(r=>r.put(eg,n,e)),"Error writing metadata")}async update(e,n,r){const o=await this.get(e,n),i=r(o);await this.set(e,i)}}const PQ="baby-idb-db-3",Zc="baby-idb-db-store-3";class OQ extends V4{constructor(n={}){super({allowedFile:n.allowedFile,allowedDir:()=>!0});ee(this,"_allowedFile",n=>!0);ee(this,"_db",()=>$0(PQ,1,{upgrade(n,r){n.objectStoreNames.contains(Zc)||n.createObjectStore(Zc)}}));ee(this,"_fileMetadata");n.allowedFile&&(this._allowedFile=n.allowedFile),this._fileMetadata=new RQ}async opendirRecursive(n){if(!n)throw new Error("dirPath must be defined");let r=await Wl(this._db().then(i=>i.getAllKeys(Zc)),"Error listing files");if(r==null&&(r=[]),!IQ(r))throw new Error("Keys in opendirRecursive must be array");return n&&!n.endsWith("/")&&(n+="/"),n?r.filter(i=>i.startsWith(n)):r}async readFile(n){this._verifyFilePath(n);let r=await Wl(this._db().then(o=>o.get(Zc,n)),"Error reading data");if(r==null)throw new U1({message:`File "${n}" not found`,code:Bs});return r}async readFileAsText(n){this._verifyFilePath(n);const r=await this.readFile(n);return await kS(r)}async rename(n,r){this._verifyFilePath(n),this._verifyFilePath(r);const o=await this.readFile(n);let i;try{i=await this.readFile(r)}catch(s){if(!(s instanceof pi)||s.code!==Bs)throw s}if(i)throw new U1({message:`Cannot rename; File "${n}" already exists`,code:H4});await this.writeFile(r,o),await this.unlink(n)}async stat(n){return this._verifyFilePath(n),await this.readFile(n),await this._fileMetadata.get(n,new xx)}async unlink(n){this._verifyFilePath(n),await Wl(this._db().then(r=>r.delete(Zc,n)),"Error deleting file"),await this._fileMetadata.del(n)}async writeFile(n,r){this._verifyFilePath(n),this._verifyFileType(r);const o=this._db().then(i=>i.put(Zc,r,n));await Wl(o,"Error writing data"),await this._fileMetadata.set(n,new xx)}}class U1 extends pi{}function IQ(t){return!(!Array.isArray(t)||!t.every(e=>typeof e=="string"))}const DQ="The user aborted a request.",MQ="The operation was aborted. ",LQ="Fetch is aborted";function Mc(t){return!!(t instanceof DOMException&&t.name==="AbortError"||t instanceof Error&&t.name==="AbortError"&&[DQ,MQ,LQ].includes(t.message))}const FQ=["node_modules",".git"];async function BQ(t,e){return jQ(`((postMessage) => {
      let work = ${t.toString()};

      return ({ data }) => {
        work(data)
          .then((result) => {
            postMessage({ done: true, result: result });
          })
          .catch((error) => {
            console.error(error);
            postMessage({ done: false, errorMessage: error.message });
          });
      };
    })`,e)}async function jQ(t,e,n=[]){let r=new Blob([`onmessage=${t}(postMessage)`],{type:"text/javascript"}),o=new Worker(URL.createObjectURL(r));const i=new Promise((a,l)=>{o.postMessage(e,n),o.onmessage=({data:c})=>{o.terminate(),c.done?a(c):l(new Error(c.errorMessage||"Invalid error message returned by worker"))},o.onerror=c=>{l(c),o.terminate()}});let s=null;return i.then(()=>{s&&clearTimeout(s)}),Promise.race([i,new Promise((a,l)=>{s=setTimeout(()=>{console.warn("sendToWorkerForWrite worker timed out"),l(new Error("sendToWorkerForWrite worker timed out")),o.terminate()},5e3)})])}const zQ=typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope;async function qQ(t,e,n){if(!(e instanceof File||e instanceof Blob))throw new Error("Not correct type of content");if(t.createWriter){const r=await t.createWriter();await r.write(0,e),await r.close();return}if(t.createWritable){const r=await t.createWritable();await r.write(e),await r.close();return}if(navigator&&navigator.storage&&"getDirectory"in navigator.storage&&WQ()){let r=n.map(o=>o.name);r.push(t.name),zQ?await E3({path:r,content:e}):await BQ(E3,{path:r,content:e});return}throw new Error("No write method available")}async function E3({path:t,content:e}){let r=await navigator.storage.getDirectory();for(const a of t.slice(0,t.length-1))if(r=await r.getDirectoryHandle(a,{create:!1}),!r)throw new Error(`Dir handle ${a} not found`);let o=await r.getFileHandle(t[t.length-1],{create:!1});if(!o)throw new Error(`File handle ${t.join("/")} not found`);const i=await o.createSyncAccessHandle();let s=await new Response(e).arrayBuffer();await i.write(s,{at:0}),await i.truncate(e.size),await i.flush(),await i.close()}function WQ(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}const C3=new WeakMap,J4=t=>t.name==="NotFoundError"&&t instanceof DOMException;function hf(t,e){return t.catch(n=>{if(n instanceof Oo)throw n;if(J4(n))throw new Oo({message:"The requested file was not found",code:Bs});return Promise.reject(new Oo({message:e,code:K4}))})}class X4 extends V4{constructor(n){super({allowedFile:n.allowedFile,allowedDir:n.allowedDir});ee(this,"_allowedDir");ee(this,"_allowedFile");ee(this,"_resolveFileHandle");ee(this,"_rootDirHandle");const{rootDirHandle:r,allowedFile:o=()=>!0,allowedDir:i=d=>!FQ.includes(d.name)}=n;if(this._rootDirHandle=r,!this._rootDirHandle)throw new Error("rootDirHandle must be provided");this._allowedFile=o,this._allowedDir=i,this._resolveFileHandle=UQ({allowedDir:i,allowedFile:o});const s=this.readFileAsText.bind(this),a=this.writeFile.bind(this),l=this.unlink.bind(this),c=this.rename.bind(this),u=this.opendirRecursive.bind(this);this.readFileAsText=(...d)=>hf(s(...d),"Unable to read file"),this.writeFile=(...d)=>hf(a(...d),"Unable to write file"),this.unlink=(...d)=>hf(l(...d),"Unable to unlink file"),this.rename=(...d)=>hf(c(...d),"Unable to rename file"),this.opendirRecursive=(...d)=>hf(u(...d),"Unable to open dir")}async opendirRecursive(n){if(!n)throw new Error("dirPath must be defined");await mf(this._rootDirHandle);const r=await Y4(this._rootDirHandle,{allowedFile:this._allowedFile,allowedDir:this._allowedDir});n.endsWith("/")||(n+="/");let o=r.map(i=>i.map(s=>s.name).join("/"));return o=n?o.filter(i=>i.startsWith(n)):o,o}async readFile(n){this._verifyFilePath(n),await mf(this._rootDirHandle,n);const{fileHandle:r}=await this._resolveFileHandle(this._rootDirHandle,n);return r.getFile()}async readFileAsText(n){this._verifyFilePath(n);const r=await this.readFile(n);return await kS(r)}async rename(n,r){this._verifyFilePath(n),this._verifyFilePath(r);const o=await this.readFile(n);let i;try{i=await this.readFile(r)}catch(s){if(!(s instanceof pi)||s.code!==Bs)throw s}if(i)throw new Oo({message:"Cannot rename as a file with the same name already exists",code:H4});await this.writeFile(r,o),await this.unlink(n)}async stat(n){await mf(this._rootDirHandle,n);const{fileHandle:r}=await this._resolveFileHandle(this._rootDirHandle,n),o=await r.getFile();return new xx({mtimeMs:o.lastModified})}async unlink(n){this._verifyFilePath(n),await mf(this._rootDirHandle,n);const{fileHandle:r,parentHandles:o}=await this._resolveFileHandle(this._rootDirHandle,n),i=o[o.length-1];await(i==null?void 0:i.removeEntry(r.name))}async writeFile(n,r){this._verifyFilePath(n),this._verifyFileType(r),await mf(this._rootDirHandle,n);let o,i=!1,s=[];try{({fileHandle:o,parentHandles:s}=await this._resolveFileHandle(this._rootDirHandle,n))}catch(a){if(a instanceof Oo&&a.code===Bs)i=!0;else throw a}if(i&&(await CQ(this._rootDirHandle,n),{fileHandle:o,parentHandles:s}=await this._resolveFileHandle(this._rootDirHandle,n)),!o)throw new Error("fileHandle must be defined");await qQ(o,r,s)}}class Oo extends pi{}async function mf(t,e=""){if(!await AQ(t))throw new Oo({message:`Permission rejected to read ${t.name}`,code:Jh})}function UQ({allowedDir:t=n=>!0,allowedFile:e=n=>!0}){const n=async(o,i)=>{const s=async()=>{let c=await HQ(i.values());c=c.filter(u=>{if(u.kind==="directory")return t(u);if(u.kind==="file")return e(u);throw new Error("Unknown kind of entry: "+u.kind)}),C3.set(i,c)},a=()=>{const c=C3.get(i);return c?c.find(d=>d.name===o):void 0};let l=a();return l||(await s(),a())},r=async(o,i,s,a)=>{if(i.kind!=="directory")throw new Error(`Cannot get Path "${o.join("/")}" as "${i.name}" is not a directory`);a.push(i);const[l,...c]=o;if(!l)throw new Error("Parent name must be defined");if(o.length===1)return i.getFileHandle(l,{create:!1}).catch(VQ(s));const u=await n(l,i);if(!u)throw new Oo({message:`File at "${s.join("/")}" not found`,code:Bs});return r(c,u,s,a)};return async(o,i)=>{if(typeof i=="string"&&(i=i.split("/")),i[0]!==o.name)throw new Error(`getFile Error: root parent ${i[0]} must be the rootDirHandle ${o.name}`);let s=[];return{fileHandle:await r(i.slice(1),o,i,s),parentHandles:s}}}function VQ(t){return e=>{throw J4(e)?new Oo({message:`File at "${t.join("/")}" not found`,code:Bs}):e}}async function HQ(t){const e=[];for await(const n of t)e.push(n);return e}async function KQ(){try{let t=await window.showDirectoryPicker();if(!await GQ(t))throw new Oo({message:"The permission to edit directory was denied",code:Jh});return t}catch(t){throw t instanceof Error?Mc(t)?new Oo({message:"The user aborted.",code:k0}):new Error(t.message):t}}async function GQ(t){const e={};return e.writable=!0,e.mode="readwrite",await t.requestPermission(e)==="granted"}function ZQ(){return typeof window!="undefined"&&"showOpenFilePicker"in window}var YQ=Object.defineProperty,JQ=(t,e,n)=>e in t?YQ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,nw=(t,e,n)=>(JQ(t,typeof e!="symbol"?e+"":e,n),n);const XQ=["appEnv","buildTime","commitHash","deployBranch","hot","netlifyBuildContext","nodeEnv","releaseId","releaseVersion","storybook"],QQ=["helpDocsVersion","changelogText"],eee=["writeSlowDown"];function rw(t,e,n){if(Object.keys(t).length!==e.length){const r=e.find(o=>!(o in t));throw console.log(Object.keys(t),e),new Error(`${n} has a missing key ${r}`)}for(const[r,o]of Object.entries(t)){if(!e.includes(r))throw new Error(`Unknown ${n} field: ${r}`);if(o===void 0)throw new Error(`${n} field ${r} is undefined`)}}let ow=class Sx{constructor(e={}){nw(this,"build"),nw(this,"app"),nw(this,"debug"),this.build=e.build||{},this.app=e.app||{},this.debug=e.debug||{}}static fromJSONString(e){const{build:n,app:r,debug:o}=JSON.parse(e);return new Sx({app:r,build:n,debug:o})}serialize(){const e={build:this.build,app:this.app,debug:this.debug};return JSON.stringify(e)}finalize(){return rw(this.build,XQ,"build"),rw(this.app,QQ,"app"),Object.keys(this.debug).length>0&&rw(this.debug,eee,"debug"),{app:this.app,build:this.build,debug:Object.keys(this.debug).length>0?this.debug:void 0}}merge(e){const n={...this.build,...e.build},r={...this.app,...e.app},o={...this.debug,...e.debug};return new Sx({build:n,app:r,debug:o})}print(e="config"){const n=i=>JSON.parse(JSON.stringify(i,(s,a)=>typeof a=="string"&&a.length>20?a.substring(0,20)+"...":a)),r=console.group?console.group:console.log,o=console.groupEnd?console.groupEnd:console.log;r(e),console.table(n(this.app)),console.table(n(this.build)),console.table(n(this.debug)),o()}};const tee=()=>{let t;try{let e=ow.fromJSONString('{"build":{"appEnv":"local","buildTime":"2024-09-09T16:29:23.856Z","commitHash":"ab7de7d","deployBranch":"local","hot":false,"netlifyBuildContext":"","nodeEnv":"production","releaseId":"0.1.22#undefined","releaseVersion":"0.1.22","storybook":false},"app":{"changelogText":"### 6 , 2024 \\n\\n- **Feature:**   .     .\\n\\n### 5 , 2024 \\n\\n-   Flent.ru\\n\\n","helpDocsVersion":"1.15.0"},"debug":{}}');const n=e.build.nodeEnv==="test";try{let r=globalThis.__BANGLE_INJECTED_CONFIG__||null;if(r){console.warn("injecting config!");const o=ow.fromJSONString(r);!n&&o.print("injected-config"),e=e.merge(ow.fromJSONString(r))}}catch(r){console.error(r)}!n&&e.print(),t=e.finalize()}catch(e){console.error(e)}if(!t)throw new Error("FinalConfig is not defined");return t.debug&&console.warn("FinalConfig: is using debug fields!"),t},nee=()=>{if(typeof navigator=="undefined")return"unknown";const t=navigator.userAgent;let e,n,r,o,i;return(o=t.indexOf("OPR/"))!==-1?(e="Opera",n=t.substring(o+4)):(o=t.indexOf("Opera"))!==-1?(e="Opera",(o=t.indexOf("Version"))!==-1?n=t.substring(o+8):n=t.substring(o+6)):(o=t.indexOf("MSIE"))!==-1?(e="Microsoft Internet Explorer",n=t.substring(o+5)):(o=t.indexOf("Chrome"))!==-1?(e="Chrome",n=t.substring(o+7)):(o=t.indexOf("Safari"))!==-1?(e="Safari",(o=t.indexOf("Version"))!==-1?n=t.substring(o+8):n=t.substring(o+7)):(o=t.indexOf("Firefox"))!==-1?(e="Firefox",n=t.substring(o+8)):(r=t.lastIndexOf(" ")+1)<(o=t.lastIndexOf("/"))?(e=t.substring(r,o),n=t.substring(o+1),e.toLowerCase()===e.toUpperCase()&&(e=navigator.appName)):(e=navigator.appName,n=""+parseFloat(navigator.appVersion)),(i=n.indexOf(";"))!==-1&&(n=n.substring(0,i)),(i=n.indexOf(" "))!==-1&&(n=n.substring(0,i)),`${e} ${n}`.toLocaleLowerCase()},S0=nee(),Q4=S0.includes("firefox");S0.includes("safari");S0.includes("chrome");function $S(t){var n;let e=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:{};if(e.navigator!=null){const r=((n=e.navigator.userAgentData)==null?void 0:n.platform)||e.navigator.platform;return t.test(r)}return!1}const ree=typeof navigator!="undefined"?/Android \d/.test(navigator.userAgent):!1,SS=$S(/^Mac/i),oee=$S(/^iPhone/i),iee=$S(/^iPad/i)||SS&&navigator.maxTouchPoints>1,see=oee||iee,e8=ree||see,Fo=tee(),Wg=Fo.build.appEnv;Fo.build.releaseVersion;const t8=Fo.build.releaseId,Ex=Fo.app.helpDocsVersion,aee="tab_"+fee(4);Fo.build.hot;const lee=Fo.app.changelogText;Fo.build.storybook;var BI;const Ra=(BI=Fo.debug)==null?void 0:BI.writeSlowDown,cee=Fo.build.nodeEnv==="test",uee={environment:Wg,dsn:"https://f1a3d53e530e465e8f74f847370b594b@o573373.ingest.sentry.io/5723848",integrations:[],release:t8,tracesSampleRate:Wg==="production"?.8:Wg==="staging"?1:0};Fo.build.nodeEnv!=="test"&&(console.log(Fo.build.appEnv+": using "+t8),console.table({tabId:aee,isWorkerContext:typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope}));if(!/^\d+\.\d+\.\d+/.test(Ex||""))throw new Error("Invalid HELP_DOCS_VERSION: "+Ex);const dee=759;function fee(t=10){return Math.random().toString(36).substring(2,15).slice(0,t)}function E0(t){let e=t;if(e instanceof lt)return{errorType:"BASE_ERROR",value:e.toJsonValue()};if(e instanceof Error)return{errorType:"ERROR",value:{message:e.message,name:e.name,stack:e.stack,thrower:e.thrower,code:e.code}};throw new Error("Unknown error type")}function C0(t){if(t.errorType==="ERROR")return Object.assign(new Error(t.value.message),t.value);if(t.errorType==="BASE_ERROR")return lt.fromJsonValue(t.value);throw new Error("Unknown error type")}const pee=(t,e,n,r)=>{if(n==="length"||n==="prototype"||n==="arguments"||n==="caller")return;const o=Object.getOwnPropertyDescriptor(t,n),i=Object.getOwnPropertyDescriptor(e,n);!hee(o,i)&&r||Object.defineProperty(t,n,i)},hee=function(t,e){return t===void 0||t.configurable||t.writable===e.writable&&t.enumerable===e.enumerable&&t.configurable===e.configurable&&(t.writable||t.value===e.value)},mee=(t,e)=>{const n=Object.getPrototypeOf(e);n!==Object.getPrototypeOf(t)&&Object.setPrototypeOf(t,n)},gee=(t,e)=>`/* Wrapped ${t}*/
${e}`,yee=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),bee=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),vee=(t,e,n)=>{const r=n===""?"":`with ${n.trim()}() `,o=gee.bind(null,r,e.toString());Object.defineProperty(o,"name",bee),Object.defineProperty(t,"toString",{...yee,value:o})};function wee(t,e,{ignoreNonConfigurable:n=!1}={}){const{name:r}=t;for(const o of Reflect.ownKeys(e))pee(t,e,o,n);return mee(t,e),vee(t,e,r),t}const n8=(t,e={})=>{if(typeof t!="function")throw new TypeError(`Expected the first argument to be a function, got \`${typeof t}\``);const{wait:n=0,maxWait:r=Number.POSITIVE_INFINITY,before:o=!1,after:i=!0}=e;if(!o&&!i)throw new Error("Both `before` and `after` are false, function wouldn't be called.");let s,a,l;const c=function(...u){const d=this,f=()=>{s=void 0,a&&(clearTimeout(a),a=void 0),i&&(l=t.apply(d,u))},p=()=>{a=void 0,s&&(clearTimeout(s),s=void 0),i&&(l=t.apply(d,u))},h=o&&!s;return clearTimeout(s),s=setTimeout(f,n),r>0&&r!==Number.POSITIVE_INFINITY&&!a&&(a=setTimeout(p,r)),h&&(l=t.apply(d,u)),l};return wee(c,t),c.cancel=()=>{s&&(clearTimeout(s),s=void 0),a&&(clearTimeout(a),a=void 0)},c};function _ee(t){return t[t.length-1]}function Xe(...t){let e="";for(const n of t)n&&(e+=n+" ");return e}function Xh(t=20){return new Promise(e=>setTimeout(e,t))}function xee(){if(typeof navigator=="undefined"||typeof window=="undefined")return!1;var t=!1;if("maxTouchPoints"in navigator)t=navigator.maxTouchPoints>0;else if("msMaxTouchPoints"in navigator)t=navigator.msMaxTouchPoints>0;else{var e=typeof window!="undefined"&&window.matchMedia&&window.matchMedia("(pointer:coarse)");if(e&&e.media==="(pointer:coarse)")t=!!e.matches;else if("orientation"in window)t=!0;else{var n=navigator.userAgent;t=/\b(BlackBerry|webOS|iPhone|IEMobile)\b/i.test(n)||/\b(Android|Windows Phone|iPad|iPod)\b/i.test(n)}}return t}const T0=xee();function kee(t,e){if(t.length!==e.length)return!1;const n=new Set(e);return t.every(r=>n.has(r))}const r8=n8;function $ee(t,e,n){return[...t.slice(0,e),n,...t.slice(e)]}function See(t){for(let e=t.parentNode;e;e=e.parentNode)if(e instanceof Element&&e.scrollHeight>e.clientHeight)return e}function o8(t=10){return Math.random().toString(36).substring(2,15).slice(0,t)}function Ys(t){if(t.aborted)throw new DOMException("AbortError","AbortError")}function Md(t,e){if(t===void 0)throw new Error(`assertion failed: ${e}`)}function Eee(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(!Object.prototype.hasOwnProperty.call(e,n[o])||!Object.is(t[n[o]],e[n[o]]))return!1;return!0}function A0(t){return t.replace(/[^a-z0-9]/g,function(e){let n=e.charCodeAt(0);return n===32?"-":n>=65&&n<=90?"_"+e.toLowerCase():"__"})}var Xp=(t=>(t.NewTab="NewTab",t.ShiftClick="ShiftClick",t.Click="Click",t))(Xp||{});function i8(t){return t.ctrlKey||t.metaKey||t.button&&t.button===1?"NewTab":t.shiftKey?"ShiftClick":"Click"}const Cee="useLocalStorage/1/";function ES(t,e){t=Cee+t;const[n,r]=k.useState(()=>T3(t,e)),o=k.useRef(e);k.useEffect(()=>{o.current=e},[e]),k.useEffect(()=>{const s=T3(t,o.current);r(s)},[t]);const i=k.useCallback(s=>{r(a=>{const l=s instanceof Function?s(a):s;try{s8(t,l)}catch(c){console.log(c)}return l})},[t]);return[n,i]}function T3(t,e){const n=()=>e instanceof Function?e():e;try{const r=Aee(t);if(r==null){const o=n();return s8(t,o),o}return r}catch(r){return console.log(r),Tee(t),n()}}function s8(t,e){window.localStorage.setItem(t,JSON.stringify({payload:e,time:Date.now()}))}function Tee(t){window.localStorage.removeItem(t)}function Aee(t){const e=window.localStorage.getItem(t);if(e==null)return;const n=JSON.parse(e);if(n!=null)return n.payload}function Nee(t,e,n){k.useEffect(()=>{const r=o=>{if(!t.current)return;if(typeof o.composedPath=="function"?o.composedPath().includes(t.current):t.current.contains(o.target)){n==null||n();return}e==null||e()};return document.addEventListener("click",r),()=>{document.removeEventListener("click",r)}},[t,e,n])}function Qh(){const t=k.useRef(!1);return k.useEffect(()=>()=>{t.current=!0},[]),t}function N0(t,e){const[n,r]=k.useState(t),o=k.useRef(e),i=k.useRef(t);i.current=t;const s=k.useMemo(()=>n8(()=>{r(i.current)},o.current),[]);return k.useEffect(()=>{s()},[t,s]),k.useEffect(()=>()=>{s.cancel()},[s]),n}function Ree(t){const e=k.useRef();return k.useEffect(()=>{e.current=t},[t]),e.current}function Pee(t,e,n){const r=k.useCallback(t,e);k.useEffect(()=>{let o=setInterval(r,n);return()=>{clearInterval(o)}},[r,n])}function em(t){return t.includes("Mod")&&(t=t.split("Mod").join(SS?"":"Ctrl")),t=t.split("-").map(e=>/^[A-Z]$/.test(e)?`Shift-${e.toLocaleLowerCase()}`:e).join("-"),t.includes("Shift")&&(t=t.split("Shift").join("")),t}class tg{constructor({key:e}){ee(this,"key");this.key=e}get displayValue(){return em(this.key)}}const Oee={toggleSecondaryEditor:new tg({key:"Mod-\\"}),toggleInlineCommandPalette:new tg({key:"Mod-/"}),newNote:new tg({key:"Ctrl-n"}),searchNotes:new tg({key:"Mod-F"})};function A3(t,e){return Math.floor(Math.random()*(e-t))+t}const N3=["amazing","ambitious","ample","amused","amusing","anchored","ancient","angelic","angry","anguished","animated","annual","another","antique","anxious","any","apprehensive","appropriate","apt","arctic","arid","aromatic","artistic","ashamed","assured","astonishing","athletic","attached","attentive","attractive","bewitched","big","big-hearted","biodegradable","bite-sized","bitter","black","black-and-white","bland","blank","blaring","bleak","blind","blissful","blond","blue","blushing","bogus","boiling","bold","bony","boring","bossy","both","bouncy","bountiful","bowed","brave","breakable","brief","bright","brilliant","brisk","broken","bronze","brown","bruised","bubbly","bulky","bumpy","buoyant","burdensome","burly","bustling","busy","buttery","buzzing","calculating","calm","candid","canine","capital","carefree","careful","careless","caring","cautious","cavernous","celebrated","charming","cheap","cheerful","cheery","chief","chilly","chubby","circular","classic","clean","clear","clear-cut","clever","close","closed","cloudy","clueless","clumsy","cluttered","coarse","cold","colorful","colorless","colossal","comfortable","common","compassionate","competent","complete","complex","complicated","composed","concerned","concrete","confused","conscious","considerate","constant","content","conventional","cooked","cool","cooperative","coordinated","corny","corrupt","costly","courageous","courteous","crafty","crazy","creamy","creative","creepy","criminal","crisp","critical","crooked","crowded","cruel","crushing","cuddly","cultivated","cultured","cumbersome","curly","curvy","cute","cylindrical","damaged","damp","dangerous","dapper","daring","darling","dark","dazzling","dead","deadly","deafening","dear","dearest","decent","decimal","decisive","deep","defenseless","defensive","defiant","deficient","definite","definitive","delayed","delectable","delicious","delightful","delirious","demanding","dense","dental","dependable","dependent","descriptive","deserted","detailed","determined","devoted","different","difficult","digital","diligent","dim","dimpled","dimwitted","direct","disastrous","discrete","disfigured","disgusting","disloyal","dismal","distant","downright","dreary","dirty","disguised","dishonest","dismal","distant","distinct","distorted","dizzy","early","easy","easy-going","ecstatic","edible","educated","elaborate","elastic","elated","elderly","electric","elegant","elementary","elliptical","embarrassed","embellished","eminent","emotional","empty","enchanted","enchanting","energetic","enlightened","enormous","enraged","entire","envious","equal","equatorial","essential","esteemed","ethical","euphoric","even","evergreen","everlasting","every","evil","exalted","excellent","exemplary","exhausted","excitable","excited","exciting","exotic","expensive","experienced","expert","extraneous","extroverted","extra-large","extra-small","fabulous","failing","faint","fair","faithful","fake","false","familiar","famous","fancy","fantastic","far","faraway","far-flung","far-off","fast","fat","fatal","fatherly","favorable","favorite","fearful","fearless","feisty","feline","female","feminine","few","fickle","filthy","fine","finished","firm","first","firsthand","fitting","fixed","flaky","flamboyant","flashy","flat","flawed","flawless","flickering","flimsy","flippant","flowery","fluffy","fluid","flustered","focused","fond","foolhardy","foolish","forceful","forked","formal","forsaken","forthright","fortunate","fragrant","frail","frank","frayed","free","French","fresh","frequent","friendly","frightened","frightening","frigid","frilly","frizzy","frivolous","front","frosty","frozen","frugal","fruitful","full","fumbling","functional","funny","fussy","fuzzy","gargantuan","gaseous","general","generous","gentle","genuine","giant","giddy","gigantic","gifted","giving","glamorous","glaring","glass","gleaming","gleeful","glistening","glittering","gloomy","glorious","glossy","glum","golden","good","good-natured","gorgeous","graceful","gracious","grand","grandiose","granular","grateful","grave","gray","great","greedy","green","gregarious","grim","grimy","gripping","grizzled","gross","grotesque","grouchy","grounded","growing","growling","grown","grubby","gruesome","grumpy","guilty","gullible","gummy","hairy","half","handmade","handsome","handy","happy","happy-go-lucky","hard","hard-to-find","harmful","harmless","harmonious","harsh","hasty","hateful","haunting","healthy","heartfelt","hearty","heavenly","heavy","hefty","helpful","helpless","hidden","hideous","high","high-level","hilarious","hoarse","hollow","homely","honest","honorable","honored","hopeful","horrible","hospitable","hot","huge","humble","humiliating","humming","humongous","hungry","hurtful","husky","icky","icy","ideal","idealistic","identical","idle","idiotic","idolized","ignorant","ill","illegal","ill-fated","ill-informed","illiterate","illustrious","imaginary","imaginative","immaculate","immaterial","immediate","immense","impassioned","impeccable","impartial","imperfect","imperturbable","impish","impolite","important","impossible","impractical","impressionable","impressive","improbable","impure","inborn","incomparable","incompatible","incomplete","inconsequential","incredible","indelible","inexperienced","indolent","infamous","infantile","infatuated","inferior","infinite","informal","innocent","insecure","insidious","insignificant","insistent","instructive","insubstantial","intelligent","intent","intentional","interesting","internal","international","intrepid","ironclad","irresponsible","irritating","itchy","jaded","jagged","jam-packed","jaunty","jealous","jittery","joint","jolly","jovial","joyful","joyous","jubilant","judicious","juicy","jumbo","junior","jumpy","juvenile","kaleidoscopic","keen","key","kind","kindhearted","kindly","klutzy","knobby","knotty","knowledgeable","knowing","known","kooky","kosher","lame","lanky","large","last","lasting","late","lavish","lawful","lazy","leading","lean","leafy","left","legal","legitimate","light","lighthearted","likable","likely","limited","limp","limping","linear","lined","liquid","little","live","lively","livid","loathsome","lone","lonely","long","long-term","loose","lopsided","lost","loud","lovable","lovely","loving","low","loyal","lucky","lumbering","luminous","lumpy","lustrous","luxurious","mad","made-up","magnificent","majestic","major","male","mammoth","married","marvelous","masculine","massive","mature","meager","mealy","mean","measly","meaty","medical","mediocre","medium","meek","mellow","melodic","memorable","menacing","merry","messy","metallic","mild","milky","mindless","miniature","minor","minty","miserable","miserly","misguided","misty","mixed","motionless","mountainous","muddy","muffled","multicolored","mundane","murky","mushy","musty","muted","mysterious","naive","narrow","nasty","natural","naughty","nautical","near","neat","necessary","needy","negative","neglected","negligible","neighboring","nervous","new","next","nice","nifty","nimble","nippy","nocturnal","noisy","nonstop","normal","notable","noted","noteworthy","novel","noxious","numb","nutritious","nutty","obedient","obese","oblong","oily","oblong","obvious","occasional","odd","oddball","offbeat","offensive","official","old","old-fashioned","only","open","optimal","optimistic","opulent","orange","orderly","organic","ornate","ornery","ordinary","original","other","our","outlying","outgoing","outlandish","outrageous","outstanding","oval","overcooked","overdue","overjoyed","overlooked","palatable","pale","paltry","parallel","parched","partial","passionate","past","pastel","peaceful","peppery","perfect","perfumed","periodic","perky","personal","pertinent","pesky","pessimistic","petty","phony","physical","piercing","pink","pitiful","plain","plaintive","plastic","playful","pleasant","pleased","pleasing","plump","plush","polished","polite","political","pointed","pointless","poised","poor","popular","portly","posh","positive","possible","potable","powerful","powerless","practical","precious","present","prestigious","pretty","precious","previous","pricey","prickly","primary","prime","pristine","private","prize","probable","productive","profitable","profuse","proper","proud","prudent","punctual","pungent","puny","pure","purple","pushy","putrid","puzzled","puzzling","quaint","qualified","quarrelsome","quarterly","queasy","querulous","questionable","quick","quick-witted","quiet","quintessential","quirky","quixotic","quizzical","radiant","ragged","rapid","rare","rash","raw","recent","reckless","rectangular","ready","real","realistic","reasonable","red","reflecting","regal","regular","reliable","relieved","remarkable","remorseful","remote","repentant","required","respectful","responsible","repulsive","revolving","rewarding","rich","rigid","short-term","showy","shrill","shy","sick","silent","silky","silly","silver","similar","simple","simplistic","sinful","single","sizzling","skeletal","skinny","sleepy","slight","slim","slimy","slippery","slow","slushy","small","smart","smoggy","smooth","smug","snappy","snarling","sneaky","sniveling","snoopy","sociable","soft","soggy","solid","somber","some","spherical","sophisticated","sore","sorrowful","soulful","splendid","spotless","spotted","spry","square","squeaky","squiggly","stable","staid","stained","stale","standard","starchy","stark","starry","steep","sticky","stiff","stimulating","stingy","stormy","straight","strange","steel","strict","strident","striking","striped","strong","studious","stunning","stupendous","stupid","sturdy","stylish","subdued","submissive","substantial","subtle","suburban","sudden","sugary","sunny","super","superb","superficial","superior","supportive","sure-footed","surprised","svelte","sweaty","sweet","sweltering","swift","sympathetic","tall","talkative","tame","tan","tangible","tart","tasty","tattered","taut","tedious","teeming","tempting","tender","tense","tepid","terrible","terrific","testy","thankful","that","these","thick","thin","third","thirsty","this","thorough","thorny","those","thoughtful","threadbare","thrifty","thunderous","tidy","tight","timely","tinted","tiny","tired","torn","total","tough","traumatic","treasured","tremendous","tragic","trained","tremendous","triangular","tricky","trifling","trim","trivial","troubled","true","trusting","trustworthy","trusty","truthful","tubby","turbulent","twin","ugly","ultimate","unacceptable","unaware","uncomfortable","uncommon","unconscious","understated","wet","which","whimsical","whirlwind","whispered","white","whole","whopping","wicked","wide","wide-eyed","wiggly","wild","willing","wilted","winding","windy","winged","wiry","wise","witty","wobbly","woeful","wonderful","wooden","woozy","wordy","worldly","worn","worried","worrisome","worse","worst","worthless","worthwhile","worthy","wrathful","wretched","writhing","wrong","yellow","yellowish","young","youthful","yummy","zany","zealous","zesty","zigzag","rocky"],R3=["people","history","way","art","world","information","map","family","government","health","system","computer","meat","year","thanks","music","person","reading","method","data","food","understanding","theory","law","bird","literature","problem","software","control","knowledge","power","ability","economics","love","internet","television","science","library","nature","fact","product","idea","temperature","investment","area","society","activity","story","industry","media","thing","oven","community","definition","safety","quality","development","language","management","player","variety","video","movie","organization","equipment","physics","analysis","policy","series","thought","basis","boyfriend","direction","strategy","technology","army","camera","freedom","paper","environment","child","instance","month","truth","marketing","university","writing","article","department","difference","goal","news","audience","fishing","growth","income","marriage","user","combination","failure","meaning","medicine","philosophy","teacher","communication","night","chemistry","disease","disk","energy","nation","road","role","soup","advertising","location","success","addition","apartment","education","math","moment","painting","politics","attention","decision","event","property","shopping","student","wood","competition","distribution","entertainment","office","population","president","unit","category","cigarette","context","introduction","opportunity","performance","driver","flight","length","magazine","newspaper","relationship","teaching","respect","sample","transportation","boring","charity","cousin","disaster","editor","efficiency","excitement","extent","feedback","guitar","homework","leader","mom","outcome","permission","presentation","promotion","reflection","refrigerator","resolution","revenue","session","singer","tennis","church","clothes","coffee","dinner","drawing","hair","hearing","initiative","judgment","lab","measurement","mode","mud","orange","poetry","police","possibility","procedure","queen","ratio","relation","restaurant","satisfaction","sector","signature","significance","song","tooth","town","vehicle","volume","wife","accident","airport","appointment","arrival","assumption","baseball","chapter","committee","conversation","database","enthusiasm","day","place","number","part","field","fish","back","process","heat","hand","experience","job","book","end","point","type","home","economy","value","body","market","guide","interest","state","radio","course","company","price","size","card","list","mind","trade","line","care","group","risk","word","fat","force","key","light","training","name","school","top","amount","level","order","practice","research","sense","service","piece","web","boss","sport","fun","house","page","term","test","answer","sound","focus","matter","kind","soil","board","craft","half","inside","outside","standard","bus","exchange","eye","fire","position","pressure","stress","advantage","benefit","box","frame","issue","step","cycle","face","item","metal","paint","review","room","screen","structure","view","account","ball","discipline","medium","share","balance","bit","black","bottom","choice","gift","impact","machine","shape","tool","wind","address","average","career","culture","morning","pot","sign","table","task","condition","contact","credit","egg","hope","ice","network","north","square","attempt","date","effect","link","post","star","red","strength","traffic","trip","vegetable","appeal","chart","gear","ideal","kitchen","land","log","mother","net","party","principle","relative","sale","season","signal","spirit","street","tree","wave","belt","bench","commission","copy","drop","minimum","path","progress","project","sea","south","status","stuff","ticket","tour","angle","blue","breakfast","confidence","daughter","degree","doctor","dot","dream","duty","essay","father","fee","finance","hour","juice","luck","milk","mouth","peace","pipe","stable","storm","substance","team","trick","afternoon","bat","beach","blank","catch","chain","consideration","tackle"];function a8(){return N3[A3(0,N3.length+1)]+"-"+R3[A3(0,R3.length+1)]}const R0=(t,e)=>typeof window!="undefined"?"scrollIntoViewIfNeeded"in document.body?t.scrollIntoViewIfNeeded(e):Iee(t,e):()=>{};let P3=0;const tm=typeof window!="undefined"&&window.requestAnimationFrame?window.requestAnimationFrame:function(t){var e=new Date().getTime(),n=Math.max(0,16-(e-P3)),r=window.setTimeout(function(){t(e+n)},n);return P3=e+n,r},CS=typeof window!="undefined"&&window.requestIdleCallback?window.requestIdleCallback:function(t){var e=Date.now();return setTimeout(function(){t({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-e))}})},1)},V1=typeof window!="undefined"&&window.cancelIdleCallback?window.cancelIdleCallback:function(t){clearTimeout(t)};function Iee(t,e){e=arguments.length===0?!0:!!e;var n=t.parentNode,r=window.getComputedStyle(n,null),o=parseInt(r.getPropertyValue("border-top-width")),i=parseInt(r.getPropertyValue("border-left-width")),s=t.offsetTop-n.offsetTop<n.scrollTop,a=t.offsetTop-n.offsetTop+t.clientHeight-o>n.scrollTop+n.clientHeight,l=t.offsetLeft-n.offsetLeft<n.scrollLeft,c=t.offsetLeft-n.offsetLeft+t.clientWidth-i>n.scrollLeft+n.clientWidth,u=s&&!a;(s||a)&&e&&(n.scrollTop=t.offsetTop-n.offsetTop-n.clientHeight/2-o+t.clientHeight/2),(l||c)&&e&&(n.scrollLeft=t.offsetLeft-n.offsetLeft-n.clientWidth/2-i+t.clientWidth/2),(s||a||l||c)&&!e&&t.scrollIntoView(u)}async function Dee(t){if(typeof navigator=="undefined"||!navigator.locks)return async()=>{};let e;const n=await new Promise((o,i)=>{e=navigator.locks.request(t,{ifAvailable:!0},async s=>{if(s===null){o(null);return}await new Promise(a=>{o(a)})}).catch(s=>{i(s)})});if(!n)return;const r=setTimeout(()=>{throw new Error(`Lock "${t}" held for too long! This is likely a bug.`)},60*1e3);return async()=>{n(),await e,clearTimeout(r)}}async function l8(){if(!(typeof navigator=="undefined"||!navigator.storage))return navigator.storage.getDirectory()}function c8(t=typeof window!="undefined"?window.innerWidth:void 0){return e8?!1:t?dee<=t:!1}function TS(){return typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope}function Mee(){return typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope?"worker":"window"}function Lee(){if(!TS())throw new Error("Script can only run in worker environment")}function Fee(){if(typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope)throw new Error("Script cannot run in worker environment")}function H1(t){return Array.from({length:t},()=>{})}class Bee{constructor(){ee(this,"rootMap",new WeakMap)}get([e,n]){var r;return(r=this.rootMap.get(e))==null?void 0:r.get(n)}has([e,n]){let r=this.rootMap.get(e);return r===void 0?!1:r.has(n)}set([e,n],r){let o=this.rootMap.get(e);o===void 0&&(o=new WeakMap,this.rootMap.set(e,o)),o.set(n,r)}}function jee(t){return t[t.length-1]}function zee(t){const e=new Bee;return(r,o)=>{let i=e.get([r,o]);return i!==void 0||(i=t(r,o),e.set([r,o],i)),i}}function nm(t,e){const n=new WeakMap;return o=>{if(n.has(o))return e&&console.debug(e,"cache hit"),n.get(o);e&&console.debug(e,"cache miss");let i=t(o);return n.set(o,i),i}}const u8=".md",AS=[u8];function qee(t){return AS.some(e=>t.endsWith(e))}function ss(t){return d8(t),t}function jt(t,e=!0){return e&&rm(t),t}function K1(t){t.includes("/")&&(t=t.slice(t.lastIndexOf("/")+1));const e=t.lastIndexOf(".");return e===-1?void 0:t.slice(e)}function Wee(t,e){return t.endsWith(e)?t:t+e}function NS(t){return Wee(t,u8)}function Cr(t){const e=t.lastIndexOf(".");return e===-1?t:t.slice(0,e)}function ft(t,e=!1){e||(rm(t),p8(t));const[n,r]=h8(t),o=r.split("/"),i=jee(o);if(typeof i!="string")throw new Error("fileName undefined");const s=o.slice(0,o.length-1).filter(Boolean).join("/");return{wsPath:t,wsName:n,filePath:r,dirPath:s,fileName:i,fileNameWithoutExt:Cr(i)}}function tn(t){const{wsName:e,fileName:n,filePath:r,dirPath:o,fileNameWithoutExt:i}=ft(t,!0);return{wsName:ss(e),fileName:n,filePath:r,dirPath:o,fileNameWithoutExt:i}}class Io extends lt{}function Uee(t){return!(!t||t.includes(":"))}function d8(t){if(t==="")throw new Io({message:'Invalid wsName "'+t+'" .'});if(t.includes(":"))throw new Io({message:'Invalid characters in  "'+t+'" .'})}function f8(t){if(!t||typeof t!="string"||t.split("/").some(o=>o.length===0))return!1;const[e,n,...r]=t.split(":");return!(r.length>0||!e||!n)}function RS(t){var n;if(!f8(t))return!1;const e=t.split("/");return!!((n=e[e.length-1])!=null&&n.includes("."))}function rm(t){if(t.split("/").some(o=>o.length===0))throw new Io({message:"Invalid path "+t});const[e,n,...r]=t.split(":");if(r.length>0)throw new Io({message:"Semicolon not allowed file path"});if(!f8(t))throw new Io({message:"Invalid wsPath "+t})}function p8(t){if(!RS(t))throw new Io({message:"Invalid wsPath "+t});rm(t)}function O3(t){if(p8(t),!mi(t))throw new Io({message:`Bangle.io support the following file extensions for notes: ${AS.join(", ")}`})}function mi(t){return t?qee(t):!1}function Vee(t){return t.replace(/[^\w\s-\.]/g,"")}function PS(t,e){if(t.includes(":"))throw new Io({message:'Invalid character ":" in  "'+t+'" .'});t.startsWith("./")&&(t=t.slice(2));const{wsName:n,dirPath:r}=tn(e);let o="https://bangle.io";r&&(o+="/"+r+"/");let i=new URL(t,o).pathname;return i.startsWith("/")&&(i=i.slice(1)),Ld(n,decodeURIComponent(i))}function Hee(t,e){return jt(PS(t,e))}const kr=t=>{const{wsName:e,filePath:n}=ft(t);return[e,n].join("/")};function OS(t){const[e,...n]=t.split("/");if(!(!e||e.includes(":")))return Qp(e,n.join("/"))}function h8(t){const[e,n]=t.split(":");if(!e)throw new Io({message:"Invalid wsName"});if(!n)throw new Io({message:"Invalid filePath"});return[e,n]}function Kee(t,e){const{wsName:n,dirPath:r}=tn(t);return Ld(n,`${r}/${e}`)}function Qp(t,e){return e.startsWith("/")&&(e=e.slice(1)),t+":"+e}function Ld(t,e){return e.startsWith("/")&&(e=e.slice(1)),jt(t+":"+e)}function Gee(t,e){return t.length===e.length&&t.every((n,r)=>n==null&&e[r]==null?!0:n===e[r])}class pu{constructor(e){if(this._wsPaths=e,e.length!==zi)throw new Error(`Only support ${zi} editors opened at a time`);for(const n of e)typeof n=="string"&&rm(n)}static createEmpty(){const e=H1(zi);return new pu(e)}static createFromArray(e){let n=Array.from({length:zi},(r,o)=>e[o]||void 0);return new pu(n)}get miniEditorWsPath(){var e;return(e=this._wsPaths[Tv])!=null?e:void 0}get miniEditorWsPath2(){var n;let e=(n=this._wsPaths[Tv])!=null?n:void 0;return e?jt(e,!1):void 0}get openCount(){let e=0;return this.forEachWsPath(n=>{n&&e++}),e}get popupEditorWsPath(){var e;return(e=this._wsPaths[Lg])!=null?e:void 0}get popupEditorWsPath2(){var n;let e=(n=this._wsPaths[Lg])!=null?n:void 0;return e?jt(e,!1):void 0}get primaryWsPath(){var e;return(e=this._wsPaths[Es])!=null?e:void 0}get primaryWsPath2(){var n;let e=(n=this._wsPaths[Es])!=null?n:void 0;return e?jt(e,!1):void 0}get secondaryWsPath(){var e;return(e=this._wsPaths[Xf])!=null?e:void 0}get secondaryWsPath2(){var n;let e=(n=this._wsPaths[Xf])!=null?n:void 0;return e?jt(e,!1):void 0}allBelongToSameWsName(e){if(!this.hasSomeOpenedWsPaths())return!0;const n=this.getWsNames();return e==null?n.length===1:n.length===1&&e===n[0]}closeAll(){let e=pu.createEmpty();return e.equal(this)?this:e}closeIfFound(e){return this.updateIfFound(e,void 0)}equal(e){return!!Gee(this._wsPaths,e._wsPaths)}find(e){let n=[];if(this.forEachWsPath((r,o)=>{r&&r===e&&n.push(o)}),n.length!==0)return n}forEachWsPath(e){this._wsPaths.forEach((n,r)=>{n&&e(n,r)})}getByIndex(e){if(e>=this._wsPaths.length)throw new Error("getByIndex: Out of bound operation");return this._wsPaths[e]}getByIndex2(e){let n=this.getByIndex(e);return n!=null?jt(n):void 0}getOneWsName(){const e=this.getWsNames()[0];return e==null?e:ss(e)}getWsNames(){let e=new Set;return this.forEachWsPath(n=>{n&&e.add(ft(n).wsName)}),[...e]}getWsPaths(){return Array.from(new Set(this.toArray().filter(e=>typeof e=="string")))}getWsPaths2(){return this.getWsPaths().map(e=>jt(e,!1))}has(e){return e==null?!1:this._wsPaths.includes(e)}hasSomeOpenedWsPaths(){return this._wsPaths.some(e=>e!=null)}optimizeSpace(){return this.tryUpgradeSecondary()}toArray(){return Array.from(this._wsPaths).map(e=>e||null)}tryUpgradeSecondary(){const{secondaryWsPath:e,primaryWsPath:n}=this;return e!=null&&n==null?this.updatePrimaryWsPath(e).updateSecondaryWsPath(void 0):this}update(e){const n=e;return n.equal(this)?this:n}updateAllWsPaths(e){const n=pu.createFromArray(e);return n.equal(this)?this:n}updateByIndex(e,n){if(e>=this._wsPaths.length)throw new Error("updateByIndex: Out of bound operation");const r=this._wsPaths.slice(0);return r[e]=n,this.updateAllWsPaths(r)}updateIfFound(e,n){let r=this;return this.forEachWsPath((o,i)=>{e===o&&(r=r.updateByIndex(i,n))}),r}updateMiniEditorWsPath(e){return this.updateByIndex(Tv,e)}updatePopupEditorWsPath(e){return this.updateByIndex(Lg,e)}updatePrimaryWsPath(e){return this.updateByIndex(Es,e)}updateSecondaryWsPath(e){return this.updateByIndex(Xf,e)}}var Ot={};const Zee="",Yee="",Jee="",Xee="",Qee="",ete="",tte="",nte="",rte="",ote="",ite="",ste="",ate="",lte="",cte="",ute="",dte="",fte="",pte="",hte="",mte="",gte="",yte="",bte="",vte="",wte="",_te="&",xte="&",kte="",$te="",Ste="",Ete="",Cte="",Tte="",Ate="",Nte="",Rte="",Pte="",Ote="",Ite="",Dte="",Mte="",Lte="",Fte="",Bte="",jte="",zte="",qte="",Wte="",Ute="",Vte="",Hte="",Kte="",Gte="",Zte="",Yte="",Jte="",Xte="",Qte="",ene="",tne="",nne="'",rne="",one="",ine="",sne="",ane="",lne="",cne="",une="",dne="*",fne="",pne="",hne="",mne="",gne="",yne="",bne="",vne="",wne="",_ne="",xne="",kne="",$ne="",Sne="",Ene="",Cne="",Tne="",Ane="",Nne="",Rne="",Pne="",One="",Ine="",Dne="",Mne="",Lne="",Fne="",Bne="",jne="",zne="",qne="",Wne="",Une="",Vne="",Hne="",Kne="",Gne="",Zne="",Yne="",Jne="",Xne="",Qne="",ere="",tre="",nre="",rre="",ore="",ire="",sre="",are="",lre="",cre="",ure="",dre="",fre="",pre="",hre="",mre="",gre="",yre="",bre="",vre="",wre="",_re="=",xre="",kre="",$re="",Sre="",Ere="",Cre="",Tre="",Are="",Nre="",Rre="",Pre="",Ore="",Ire="",Dre="",Mre="",Lre="",Fre="",Bre="",jre="",zre="",qre="",Wre="",Ure="",Vre="",Hre="",Kre="",Gre="",Zre="",Yre="",Jre="",Xre="",Qre="",eoe="",toe="",noe="",roe="",ooe="",ioe="",soe="",aoe="",loe="",coe="",uoe="",doe="",foe="",poe="",hoe="",moe="",goe="",yoe="",boe="",voe="",woe="",_oe="",xoe="",koe="",$oe="",Soe="",Eoe="",Coe="",Toe="",Aoe="",Noe="\\",Roe="",Poe="",Ooe="",Ioe="",Doe="",Moe="",Loe="",Foe="",Boe="",joe="",zoe="",qoe="",Woe="",Uoe="",Voe="",Hoe="",Koe="",Goe="",Zoe="",Yoe="",Joe="",Xoe="",Qoe="",eie="",tie="",nie="",rie="",oie="",iie="",sie="",aie="",lie="",cie="",uie="",die="",fie="",pie="",hie="",mie="",gie="",yie="",bie="",vie="",wie="",_ie="",xie="",kie="",$ie="",Sie="",Eie="",Cie="",Tie="",Aie="",Nie="",Rie="",Pie="",Oie="",Iie="",Die="",Mie="",Lie="",Fie="",Bie="",jie="",zie="",qie="",Wie="",Uie="",Vie="",Hie="",Kie="",Gie="",Zie=":",Yie="",Jie="",Xie="",Qie="",ese=",",tse="@",nse="",rse="",ose="",ise="",sse="",ase="",lse="",cse="",use="",dse="",fse="",pse="",hse="",mse="",gse="",yse="",bse="",vse="",wse="",_se="",xse="",kse="",$se="",Sse="",Ese="",Cse="",Tse="",Ase="",Nse="",Rse="",Pse="",Ose="",Ise="",Dse="",Mse="",Lse="",Fse="",Bse="",jse="",zse="",qse="",Wse="",Use="",Vse="",Hse="",Kse="",Gse="",Zse="",Yse="",Jse="",Xse="",Qse="",eae="",tae="",nae="",rae="",oae="",iae="",sae="",aae="",lae="",cae="",uae="",dae="",fae="",pae="",hae="",mae="",gae="",yae="",bae="",vae="",wae="",_ae="",xae="",kae="",$ae="",Sae="",Eae="",Cae="",Tae="",Aae="",Nae="",Rae="",Pae="",Oae="",Iae="",Dae="",Mae="",Lae="",Fae="",Bae="",jae="`",zae="",qae="",Wae="",Uae="",Vae="",Hae="",Kae="",Gae="",Zae="",Yae="",Jae="",Xae="",Qae="",ele="",tle="",nle="",rle="",ole="",ile="$",sle="",ale="",lle="",cle="",ule="",dle="",fle="",ple="",hle="",mle="",gle="",yle="",ble="",vle="",wle="",_le="",xle="",kle="",$le="",Sle="",Ele="",Cle="",Tle="",Ale="",Nle="",Rle="",Ple="",Ole="",Ile="",Dle="",Mle="",Lle="",Fle="",Ble="",jle="",zle="",qle="",Wle="",Ule="",Vle="",Hle="",Kle="",Gle="",Zle="",Yle="",Jle="",Xle="",Qle="",ece="",tce="",nce="",rce="",oce="",ice="",sce="",ace="",lce="",cce="",uce="",dce="",fce="",pce="",hce="",mce="",gce="",yce="",bce="",vce="",wce="",_ce="",xce="",kce="",$ce="",Sce="",Ece="",Cce="",Tce="",Ace="",Nce="",Rce="",Pce="",Oce="",Ice="",Dce="",Mce="",Lce="",Fce="",Bce="",jce="",zce="",qce="",Wce="",Uce="",Vce="",Hce="",Kce="",Gce="",Zce="",Yce="",Jce="",Xce="",Qce="",eue="",tue="",nue="",rue="",oue="",iue="",sue="",aue="",lue="",cue="",uue="",due="",fue="",pue="",hue="",mue="",gue="",yue="",bue="",vue="",wue="",_ue="=",xue="",kue="",$ue="",Sue="",Eue="",Cue="",Tue="",Aue="",Nue="",Rue="",Pue="",Oue="",Iue="",Due="",Mue="",Lue="",Fue="",Bue="",jue="",zue="",que="!",Wue="",Uue="",Vue="",Hue="",Kue="",Gue="",Zue="",Yue="",Jue="",Xue="",Que="",ede="",tde="",nde="",rde="",ode="",ide="",sde="fj",ade="",lde="",cde="",ude="",dde="",fde="",pde="",hde="",mde="",gde="",yde="",bde="",vde="",wde="",_de="",xde="",kde="",$de="",Sde="",Ede="",Cde="",Tde="",Ade="",Nde="",Rde="",Pde="",Ode="",Ide="",Dde="",Mde="",Lde="",Fde="",Bde="",jde="",zde="",qde="",Wde="",Ude="",Vde="",Hde="",Kde="",Gde="",Zde="",Yde="",Jde="",Xde="",Qde="",efe="",tfe="",nfe="",rfe="",ofe="",ife="",sfe="",afe="",lfe="",cfe="",ufe="",dfe="",ffe="",pfe="",hfe="",mfe="",gfe="",yfe="",bfe="",vfe="",wfe="",_fe="",xfe="",kfe="",$fe="",Sfe="",Efe="",Cfe="",Tfe="",Afe="",Nfe="",Rfe="",Pfe="",Ofe="",Ife="`",Dfe="",Mfe="",Lfe="",Ffe="",Bfe="",jfe="",zfe="",qfe="",Wfe="",Ufe="",Vfe="",Hfe="",Kfe="",Gfe="",Zfe=">",Yfe=">",Jfe="",Xfe="",Qfe="",epe="",tpe="",npe="",rpe="",ope="",ipe="",spe="",ape="",lpe="",cpe="",upe="",dpe="",fpe="",ppe="",hpe="",mpe="",gpe="",ype="",bpe="",vpe="",wpe="^",_pe="",xpe="",kpe="",$pe="",Spe="",Epe="",Cpe="",Tpe="",Ape="",Npe="",Rpe="",Ppe="",Ope="",Ipe="",Dpe="",Mpe="",Lpe="",Fpe="",Bpe="",jpe="",zpe="",qpe="",Wpe="",Upe="",Vpe="",Hpe="",Kpe="",Gpe="",Zpe="",Ype="",Jpe="",Xpe="",Qpe="",ehe="",the="",nhe="",rhe="",ohe="",ihe="",she="",ahe="",lhe="",che="",uhe="",dhe="",fhe="",phe="",hhe="",mhe="",ghe="",yhe="",bhe="",vhe="",whe="",_he="",xhe="",khe="",$he="",She="",Ehe="",Che="",The="",Ahe="",Nhe="",Rhe="",Phe="",Ohe="",Ihe="",Dhe="",Mhe="",Lhe="",Fhe="",Bhe="",jhe="",zhe="",qhe="",Whe="",Uhe="",Vhe="",Hhe="",Khe="",Ghe="",Zhe="",Yhe="",Jhe="",Xhe="",Qhe="",eme="",tme="",nme="",rme="",ome="",ime="",sme="",ame="",lme="",cme="",ume="",dme="",fme="",pme="",hme="",mme="",gme="",yme="",bme="",vme="",wme="",_me="",xme="",kme="",$me="",Sme="",Eme="",Cme="",Tme="",Ame="",Nme="",Rme="",Pme="",Ome="",Ime="",Dme="",Mme="",Lme="",Fme="",Bme="",jme="",zme="",qme="",Wme="",Ume="",Vme="",Hme="",Kme="",Gme="",Zme="",Yme="",Jme="",Xme="",Qme="",ege="",tge="",nge="",rge="",oge="",ige="",sge="",age="",lge="",cge="",uge="",dge="",fge="",pge="",hge="",mge="",gge="",yge="",bge="",vge="",wge="",_ge="",xge="",kge="",$ge="",Sge="",Ege="",Cge="",Tge="{",Age="[",Nge="",Rge="",Pge="",Oge="",Ige="",Dge="",Mge="",Lge="",Fge="{",Bge="",jge="",zge="",qge="",Wge="",Uge="",Vge="",Hge="",Kge="",Gge="",Zge="",Yge="",Jge="",Xge="",Qge="",e1e="",t1e="",n1e="",r1e="",o1e="",i1e="",s1e="",a1e="",l1e="",c1e="",u1e="",d1e="",f1e="",p1e="",h1e="",m1e="",g1e="",y1e="",b1e="",v1e="",w1e="",_1e="",x1e="",k1e="",$1e="",S1e="",E1e="",C1e="",T1e="",A1e="",N1e="",R1e="",P1e="",O1e="",I1e="",D1e="",M1e="",L1e="",F1e="",B1e="",j1e="",z1e="",q1e="",W1e="",U1e="",V1e="",H1e="",K1e="",G1e="",Z1e="",Y1e="",J1e="",X1e="",Q1e="",eye="",tye="",nye="",rye="",oye="",iye="",sye="",aye="",lye="",cye="",uye="",dye="",fye="",pye="",hye="",mye="",gye="",yye="",bye="",vye="",wye="",_ye="",xye="",kye="",$ye="",Sye="",Eye="",Cye="",Tye="",Aye="",Nye="",Rye="",Pye="",Oye="",Iye="",Dye="",Mye="",Lye="",Fye="",Bye="",jye="",zye="",qye="",Wye="",Uye="",Vye="",Hye="",Kye="",Gye="",Zye="",Yye="",Jye="",Xye="",Qye="_",e0e="",t0e="",n0e="",r0e="",o0e="",i0e="(",s0e="",a0e="",l0e="",c0e="",u0e="",d0e="",f0e="",p0e="",h0e="",m0e="",g0e="",y0e="",b0e="",v0e="",w0e="",_0e="[",x0e="",k0e="",$0e="",S0e="",E0e="",C0e="",T0e="<",A0e="<",N0e="",R0e="",P0e="",O0e="",I0e="",D0e="",M0e="",L0e="",F0e="",B0e="",j0e="",z0e="",q0e="",W0e="",U0e="",V0e="",H0e="",K0e="",G0e="",Z0e="",Y0e="",J0e="",X0e="",Q0e="",ebe="",tbe="",nbe="",rbe="",obe="",ibe="",sbe="",abe="",lbe="",cbe="",ube="",dbe="",fbe="*",pbe="",hbe="",mbe="",gbe="",ybe="",bbe="",vbe="",wbe="",_be="",xbe="",kbe="",$be="",Sbe="",Ebe="",Cbe="",Tbe="",Abe="",Nbe="",Rbe="",Pbe="",Obe="",Ibe="",Dbe="",Mbe="",Lbe="",Fbe="",Bbe="",jbe="",zbe="",qbe="",Wbe="",Ube="",Vbe="",Hbe="",Kbe="",Gbe="",Zbe="",Ybe="",Jbe="",Xbe="",Qbe="",eve="",tve="",nve="",rve="",ove="",ive="",sve="",ave="",lve="",cve="",uve="",dve="",fve="",pve="",hve="",mve="",gve="",yve="",bve="",vve="",wve="",_ve="",xve=`
`,kve="",$ve="",Sve="",Eve="",Cve="",Tve="",Ave="",Nve="",Rve="",Pve="",Ove="",Ive="",Dve="",Mve="",Lve="",Fve="",Bve="",jve="",zve="",qve="",Wve="",Uve="",Vve="",Hve="",Kve="",Gve="",Zve="",Yve="",Jve="",Xve="",Qve="",ewe="",twe="",nwe="",rwe="",owe="",iwe="",swe="",awe="",lwe="",cwe="",uwe="",dwe="",fwe="",pwe="",hwe="",mwe="",gwe="",ywe="",bwe="",vwe="",wwe="",_we="",xwe="",kwe="",$we="",Swe="",Ewe="",Cwe="",Twe="",Awe="",Nwe="",Rwe="",Pwe="",Owe="",Iwe="",Dwe="",Mwe="",Lwe="",Fwe="",Bwe="",jwe="",zwe="",qwe="",Wwe="",Uwe="",Vwe="",Hwe="",Kwe="",Gwe="",Zwe="",Ywe="",Jwe="",Xwe="",Qwe="",e_e="",t_e="",n_e="",r_e="",o_e="",i_e="",s_e="",a_e="",l_e="",c_e="",u_e="",d_e="",f_e="",p_e="",h_e="",m_e="",g_e="",y_e="",b_e="",v_e="",w_e="",__e="",x_e="",k_e="",$_e="",S_e="",E_e="",C_e="",T_e="",A_e="",N_e="",R_e="",P_e="",O_e="",I_e="",D_e="",M_e="",L_e="",F_e="",B_e="",j_e="",z_e="",q_e="",W_e="",U_e="",V_e="",H_e="",K_e="",G_e="",Z_e="",Y_e="",J_e="",X_e="",Q_e="",exe="",txe="",nxe="",rxe="",oxe="",ixe="",sxe="",axe="",lxe="",cxe="",uxe="",dxe="",fxe="",pxe="",hxe="",mxe="",gxe="",yxe="",bxe="",vxe="",wxe="",_xe="",xxe="",kxe="",$xe="",Sxe="",Exe="",Cxe="",Txe="",Axe="",Nxe="",Rxe="#",Pxe="",Oxe="",Ixe="",Dxe="",Mxe="",Lxe="",Fxe="",Bxe="",jxe=">",zxe="",qxe="",Wxe="",Uxe="",Vxe="<",Hxe="",Kxe="",Gxe="",Zxe="",Yxe="",Jxe="",Xxe="",Qxe="",eke="",tke="",nke="",rke="",oke="",ike="",ske="",ake="",lke="",cke="",uke="",dke="",fke="",pke="",hke="",mke="",gke="",yke="",bke="",vke="",wke="",_ke="",xke="",kke="",$ke="",Ske="",Eke="",Cke="",Tke="",Ake="",Nke="",Rke="",Pke="",Oke="",Ike="",Dke="",Mke="",Lke="",Fke="",Bke="",jke="",zke="",qke="",Wke="",Uke="",Vke="",Hke="",Kke="",Gke="",Zke="",Yke="",Jke="",Xke="",Qke="",e$e="",t$e="",n$e="",r$e="",o$e="",i$e="",s$e="",a$e="",l$e="",c$e="",u$e="",d$e="",f$e="",p$e="",h$e="",m$e="",g$e="",y$e="",b$e="",v$e="",w$e="",_$e="",x$e="",k$e="",$$e="",S$e="",E$e="",C$e="",T$e="",A$e="",N$e="",R$e="",P$e="%",O$e=".",I$e="",D$e="",M$e="",L$e="",F$e="",B$e="",j$e="",z$e="",q$e="",W$e="",U$e="",V$e="",H$e="",K$e="",G$e="",Z$e="",Y$e="",J$e="",X$e="",Q$e="",eSe="+",tSe="",nSe="",rSe="",oSe="",iSe="",sSe="",aSe="",lSe="",cSe="",uSe="",dSe="",fSe="",pSe="",hSe="",mSe="",gSe="",ySe="",bSe="",vSe="",wSe="",_Se="",xSe="",kSe="",$Se="",SSe="",ESe="",CSe="",TSe="",ASe="",NSe="",RSe="",PSe="",OSe="",ISe="",DSe="",MSe="",LSe="",FSe="",BSe="",jSe="",zSe="",qSe="",WSe="",USe="",VSe="",HSe="",KSe="",GSe="",ZSe="",YSe="",JSe="",XSe="",QSe="",eEe="",tEe="",nEe="",rEe="",oEe="",iEe="",sEe="",aEe="",lEe="",cEe="",uEe="?",dEe="",fEe='"',pEe='"',hEe="",mEe="",gEe="",yEe="",bEe="",vEe="",wEe="",_Ee="",xEe="",kEe="",$Ee="",SEe="",EEe="",CEe="",TEe="",AEe="",NEe="",REe="",PEe="",OEe="",IEe="",DEe="",MEe="",LEe="",FEe="",BEe="",jEe="",zEe="",qEe="",WEe="",UEe="",VEe="",HEe="",KEe="",GEe="",ZEe="}",YEe="]",JEe="",XEe="",QEe="",eCe="",tCe="",nCe="",rCe="",oCe="",iCe="}",sCe="",aCe="",lCe="",cCe="",uCe="",dCe="",fCe="",pCe="",hCe="",mCe="",gCe="",yCe="",bCe="",vCe="",wCe="",_Ce="",xCe="",kCe="",$Ce="",SCe="",ECe="",CCe="",TCe="",ACe="",NCe="",RCe="",PCe="",OCe="",ICe="",DCe="",MCe="",LCe="",FCe="",BCe="",jCe="",zCe="",qCe="",WCe="",UCe="",VCe="",HCe="",KCe="",GCe="",ZCe="",YCe="",JCe="",XCe="",QCe="",e2e="",t2e="",n2e="",r2e="",o2e="",i2e="",s2e="",a2e="",l2e="",c2e="",u2e="",d2e="",f2e="",p2e="",h2e="",m2e="",g2e="",y2e="",b2e="",v2e="",w2e="",_2e="",x2e="",k2e="",$2e="",S2e="",E2e="",C2e="",T2e="",A2e="",N2e=")",R2e="",P2e="",O2e="",I2e="",D2e="",M2e="",L2e="",F2e="",B2e="",j2e="]",z2e="",q2e="",W2e="",U2e="",V2e="",H2e="",K2e="",G2e="",Z2e="",Y2e="",J2e="",X2e="",Q2e="",eTe="",tTe="",nTe="",rTe="",oTe="",iTe="",sTe="",aTe="",lTe="",cTe="",uTe="",dTe="",fTe="",pTe="",hTe="",mTe="",gTe="",yTe="",bTe="",vTe="",wTe="",_Te="",xTe="",kTe="",$Te="",STe="",ETe="",CTe="",TTe=";",ATe="",NTe="",RTe="",PTe="",OTe="",ITe="",DTe="",MTe="",LTe="",FTe="",BTe="",jTe="",zTe="",qTe="",WTe="",UTe="",VTe="",HTe="",KTe="",GTe="",ZTe="",YTe="",JTe="",XTe="",QTe="",eAe="",tAe="",nAe="",rAe="",oAe="",iAe="",sAe="",aAe="",lAe="",cAe="",uAe="",dAe="",fAe="",pAe="",hAe="",mAe="",gAe="",yAe="",bAe="",vAe="",wAe="",_Ae="",xAe="",kAe="/",$Ae="",SAe="",EAe="",CAe="",TAe="",AAe="",NAe="",RAe="",PAe="",OAe="",IAe="",DAe="",MAe="",LAe="",FAe="",BAe="",jAe="",zAe="",qAe="",WAe="",UAe="",VAe="",HAe="",KAe="",GAe="",ZAe="",YAe="",JAe="",XAe="",QAe="",e3e="",t3e="",n3e="",r3e="",o3e="",i3e="",s3e="",a3e="",l3e="",c3e="",u3e="",d3e="",f3e="",p3e="",h3e="",m3e="",g3e="",y3e="",b3e="",v3e="",w3e="",_3e="",x3e="",k3e="",$3e="",S3e="",E3e="",C3e="",T3e="",A3e="",N3e="",R3e="",P3e="",O3e="",I3e="",D3e="",M3e="",L3e="",F3e="",B3e="",j3e="",z3e="",q3e="",W3e="",U3e="",V3e="",H3e="",K3e="",G3e="",Z3e="",Y3e="",J3e="",X3e="",Q3e="",eNe="",tNe="",nNe="",rNe="",oNe="",iNe="",sNe="",aNe="",lNe="",cNe="",uNe="",dNe="",fNe="",pNe="",hNe="",mNe="",gNe="",yNe="",bNe="",vNe="",wNe="",_Ne="",xNe="",kNe="",$Ne="",SNe="",ENe="",CNe="",TNe="	",ANe="",NNe="",RNe="",PNe="",ONe="",INe="",DNe="",MNe="",LNe="",FNe="",BNe="",jNe="",zNe="",qNe="",WNe="",UNe="",VNe="",HNe="",KNe="",GNe="",ZNe="",YNe="",JNe="",XNe="",QNe="",eRe="",tRe="",nRe="",rRe="",oRe="",iRe="",sRe="",aRe="",lRe="",cRe="",uRe="",dRe="",fRe="",pRe="",hRe="",mRe="",gRe="",yRe="",bRe="",vRe="",wRe="",_Re="",xRe="",kRe="",$Re="",SRe="",ERe="",CRe="",TRe="",ARe="",NRe="",RRe="",PRe="",ORe="",IRe="",DRe="",MRe="",LRe="",FRe="",BRe="",jRe="",zRe="",qRe="",WRe="",URe="",VRe="",HRe="",KRe="",GRe="",ZRe="",YRe="",JRe="",XRe="",QRe="",ePe="",tPe="",nPe="",rPe="",oPe="",iPe="",sPe="",aPe="",lPe="",cPe="",uPe="",dPe="",fPe="",pPe="",hPe="",mPe="",gPe="",yPe="",bPe="",vPe="",wPe="",_Pe="",xPe="",kPe="",$Pe="",SPe="",EPe="",CPe="",TPe="",APe="",NPe="",RPe="",PPe="_",OPe="",IPe="",DPe="",MPe="",LPe="",FPe="",BPe="",jPe="",zPe="",qPe="",WPe="",UPe="",VPe="",HPe="",KPe="",GPe="",ZPe="",YPe="",JPe="",XPe="",QPe="",eOe="",tOe="",nOe="",rOe="",oOe="",iOe="",sOe="",aOe="",lOe="",cOe="",uOe="",dOe="",fOe="",pOe="",hOe="",mOe="",gOe="",yOe="",bOe="",vOe="",wOe="",_Oe="",xOe="",kOe="",$Oe="",SOe="",EOe="",COe="",TOe="",AOe="",NOe="",ROe="",POe="",OOe="",IOe="",DOe="",MOe="",LOe="",FOe="",BOe="",jOe="",zOe="",qOe="",WOe="",UOe="",VOe="",HOe="",KOe="",GOe="",ZOe="",YOe="",JOe="",XOe="",QOe="",eIe="",tIe="",nIe="",rIe="",oIe="",iIe="",sIe="|",aIe="",lIe="|",cIe="",uIe="",dIe="|",fIe="",pIe="",hIe="",mIe="",gIe="",yIe="",bIe="",vIe="",wIe="",_Ie="",xIe="",kIe="",$Ie="",SIe="",EIe="",CIe="",TIe="",AIe="",NIe="",RIe="",PIe="",OIe="",IIe="",DIe="",MIe="",LIe="",FIe="",BIe="",jIe="",zIe="",qIe="",WIe="",UIe="",VIe="",HIe="",KIe="",GIe="",ZIe="",YIe="",JIe="",XIe="",QIe="",eDe="",tDe="",nDe="",rDe="",oDe="",iDe="",sDe="",aDe="",lDe="",cDe="",uDe="",dDe="",fDe="",pDe="",hDe="",mDe="",gDe="",yDe="",bDe="",vDe="",wDe="",_De="",xDe="",kDe="",$De="",SDe="",EDe="",CDe="",TDe="",ADe="",NDe="",RDe="",PDe="",ODe="",IDe="",DDe="",MDe="",LDe="",FDe="",BDe="",jDe="",zDe="",qDe="",WDe="",UDe="",VDe="",HDe="",KDe="",GDe="",ZDe="",YDe="",JDe="",XDe="",QDe="",e5e="",t5e="",n5e="",r5e="",o5e="",i5e="",s5e="",a5e="",l5e="",c5e="",u5e="",d5e="";var f5e={Aacute:Zee,aacute:Yee,Abreve:Jee,abreve:Xee,ac:Qee,acd:ete,acE:tte,Acirc:nte,acirc:rte,acute:ote,Acy:ite,acy:ste,AElig:ate,aelig:lte,af:cte,Afr:ute,afr:dte,Agrave:fte,agrave:pte,alefsym:hte,aleph:mte,Alpha:gte,alpha:yte,Amacr:bte,amacr:vte,amalg:wte,amp:_te,AMP:xte,andand:kte,And:$te,and:Ste,andd:Ete,andslope:Cte,andv:Tte,ang:Ate,ange:Nte,angle:Rte,angmsdaa:Pte,angmsdab:Ote,angmsdac:Ite,angmsdad:Dte,angmsdae:Mte,angmsdaf:Lte,angmsdag:Fte,angmsdah:Bte,angmsd:jte,angrt:zte,angrtvb:qte,angrtvbd:Wte,angsph:Ute,angst:Vte,angzarr:Hte,Aogon:Kte,aogon:Gte,Aopf:Zte,aopf:Yte,apacir:Jte,ap:Xte,apE:Qte,ape:ene,apid:tne,apos:nne,ApplyFunction:rne,approx:one,approxeq:ine,Aring:sne,aring:ane,Ascr:lne,ascr:cne,Assign:une,ast:dne,asymp:fne,asympeq:pne,Atilde:hne,atilde:mne,Auml:gne,auml:yne,awconint:bne,awint:vne,backcong:wne,backepsilon:_ne,backprime:xne,backsim:kne,backsimeq:$ne,Backslash:Sne,Barv:Ene,barvee:Cne,barwed:Tne,Barwed:Ane,barwedge:Nne,bbrk:Rne,bbrktbrk:Pne,bcong:One,Bcy:Ine,bcy:Dne,bdquo:Mne,becaus:Lne,because:Fne,Because:Bne,bemptyv:jne,bepsi:zne,bernou:qne,Bernoullis:Wne,Beta:Une,beta:Vne,beth:Hne,between:Kne,Bfr:Gne,bfr:Zne,bigcap:Yne,bigcirc:Jne,bigcup:Xne,bigodot:Qne,bigoplus:ere,bigotimes:tre,bigsqcup:nre,bigstar:rre,bigtriangledown:ore,bigtriangleup:ire,biguplus:sre,bigvee:are,bigwedge:lre,bkarow:cre,blacklozenge:ure,blacksquare:dre,blacktriangle:fre,blacktriangledown:pre,blacktriangleleft:hre,blacktriangleright:mre,blank:gre,blk12:yre,blk14:bre,blk34:vre,block:wre,bne:_re,bnequiv:xre,bNot:kre,bnot:$re,Bopf:Sre,bopf:Ere,bot:Cre,bottom:Tre,bowtie:Are,boxbox:Nre,boxdl:Rre,boxdL:Pre,boxDl:Ore,boxDL:Ire,boxdr:Dre,boxdR:Mre,boxDr:Lre,boxDR:Fre,boxh:Bre,boxH:jre,boxhd:zre,boxHd:qre,boxhD:Wre,boxHD:Ure,boxhu:Vre,boxHu:Hre,boxhU:Kre,boxHU:Gre,boxminus:Zre,boxplus:Yre,boxtimes:Jre,boxul:Xre,boxuL:Qre,boxUl:eoe,boxUL:toe,boxur:noe,boxuR:roe,boxUr:ooe,boxUR:ioe,boxv:soe,boxV:aoe,boxvh:loe,boxvH:coe,boxVh:uoe,boxVH:doe,boxvl:foe,boxvL:poe,boxVl:hoe,boxVL:moe,boxvr:goe,boxvR:yoe,boxVr:boe,boxVR:voe,bprime:woe,breve:_oe,Breve:xoe,brvbar:koe,bscr:$oe,Bscr:Soe,bsemi:Eoe,bsim:Coe,bsime:Toe,bsolb:Aoe,bsol:Noe,bsolhsub:Roe,bull:Poe,bullet:Ooe,bump:Ioe,bumpE:Doe,bumpe:Moe,Bumpeq:Loe,bumpeq:Foe,Cacute:Boe,cacute:joe,capand:zoe,capbrcup:qoe,capcap:Woe,cap:Uoe,Cap:Voe,capcup:Hoe,capdot:Koe,CapitalDifferentialD:Goe,caps:Zoe,caret:Yoe,caron:Joe,Cayleys:Xoe,ccaps:Qoe,Ccaron:eie,ccaron:tie,Ccedil:nie,ccedil:rie,Ccirc:oie,ccirc:iie,Cconint:sie,ccups:aie,ccupssm:lie,Cdot:cie,cdot:uie,cedil:die,Cedilla:fie,cemptyv:pie,cent:hie,centerdot:mie,CenterDot:gie,cfr:yie,Cfr:bie,CHcy:vie,chcy:wie,check:_ie,checkmark:xie,Chi:kie,chi:$ie,circ:Sie,circeq:Eie,circlearrowleft:Cie,circlearrowright:Tie,circledast:Aie,circledcirc:Nie,circleddash:Rie,CircleDot:Pie,circledR:Oie,circledS:Iie,CircleMinus:Die,CirclePlus:Mie,CircleTimes:Lie,cir:Fie,cirE:Bie,cire:jie,cirfnint:zie,cirmid:qie,cirscir:Wie,ClockwiseContourIntegral:Uie,CloseCurlyDoubleQuote:Vie,CloseCurlyQuote:Hie,clubs:Kie,clubsuit:Gie,colon:Zie,Colon:Yie,Colone:Jie,colone:Xie,coloneq:Qie,comma:ese,commat:tse,comp:nse,compfn:rse,complement:ose,complexes:ise,cong:sse,congdot:ase,Congruent:lse,conint:cse,Conint:use,ContourIntegral:dse,copf:fse,Copf:pse,coprod:hse,Coproduct:mse,copy:gse,COPY:yse,copysr:bse,CounterClockwiseContourIntegral:vse,crarr:wse,cross:_se,Cross:xse,Cscr:kse,cscr:$se,csub:Sse,csube:Ese,csup:Cse,csupe:Tse,ctdot:Ase,cudarrl:Nse,cudarrr:Rse,cuepr:Pse,cuesc:Ose,cularr:Ise,cularrp:Dse,cupbrcap:Mse,cupcap:Lse,CupCap:Fse,cup:Bse,Cup:jse,cupcup:zse,cupdot:qse,cupor:Wse,cups:Use,curarr:Vse,curarrm:Hse,curlyeqprec:Kse,curlyeqsucc:Gse,curlyvee:Zse,curlywedge:Yse,curren:Jse,curvearrowleft:Xse,curvearrowright:Qse,cuvee:eae,cuwed:tae,cwconint:nae,cwint:rae,cylcty:oae,dagger:iae,Dagger:sae,daleth:aae,darr:lae,Darr:cae,dArr:uae,dash:dae,Dashv:fae,dashv:pae,dbkarow:hae,dblac:mae,Dcaron:gae,dcaron:yae,Dcy:bae,dcy:vae,ddagger:wae,ddarr:_ae,DD:xae,dd:kae,DDotrahd:$ae,ddotseq:Sae,deg:Eae,Del:Cae,Delta:Tae,delta:Aae,demptyv:Nae,dfisht:Rae,Dfr:Pae,dfr:Oae,dHar:Iae,dharl:Dae,dharr:Mae,DiacriticalAcute:Lae,DiacriticalDot:Fae,DiacriticalDoubleAcute:Bae,DiacriticalGrave:jae,DiacriticalTilde:zae,diam:qae,diamond:Wae,Diamond:Uae,diamondsuit:Vae,diams:Hae,die:Kae,DifferentialD:Gae,digamma:Zae,disin:Yae,div:Jae,divide:Xae,divideontimes:Qae,divonx:ele,DJcy:tle,djcy:nle,dlcorn:rle,dlcrop:ole,dollar:ile,Dopf:sle,dopf:ale,Dot:lle,dot:cle,DotDot:ule,doteq:dle,doteqdot:fle,DotEqual:ple,dotminus:hle,dotplus:mle,dotsquare:gle,doublebarwedge:yle,DoubleContourIntegral:ble,DoubleDot:vle,DoubleDownArrow:wle,DoubleLeftArrow:_le,DoubleLeftRightArrow:xle,DoubleLeftTee:kle,DoubleLongLeftArrow:$le,DoubleLongLeftRightArrow:Sle,DoubleLongRightArrow:Ele,DoubleRightArrow:Cle,DoubleRightTee:Tle,DoubleUpArrow:Ale,DoubleUpDownArrow:Nle,DoubleVerticalBar:Rle,DownArrowBar:Ple,downarrow:Ole,DownArrow:Ile,Downarrow:Dle,DownArrowUpArrow:Mle,DownBreve:Lle,downdownarrows:Fle,downharpoonleft:Ble,downharpoonright:jle,DownLeftRightVector:zle,DownLeftTeeVector:qle,DownLeftVectorBar:Wle,DownLeftVector:Ule,DownRightTeeVector:Vle,DownRightVectorBar:Hle,DownRightVector:Kle,DownTeeArrow:Gle,DownTee:Zle,drbkarow:Yle,drcorn:Jle,drcrop:Xle,Dscr:Qle,dscr:ece,DScy:tce,dscy:nce,dsol:rce,Dstrok:oce,dstrok:ice,dtdot:sce,dtri:ace,dtrif:lce,duarr:cce,duhar:uce,dwangle:dce,DZcy:fce,dzcy:pce,dzigrarr:hce,Eacute:mce,eacute:gce,easter:yce,Ecaron:bce,ecaron:vce,Ecirc:wce,ecirc:_ce,ecir:xce,ecolon:kce,Ecy:$ce,ecy:Sce,eDDot:Ece,Edot:Cce,edot:Tce,eDot:Ace,ee:Nce,efDot:Rce,Efr:Pce,efr:Oce,eg:Ice,Egrave:Dce,egrave:Mce,egs:Lce,egsdot:Fce,el:Bce,Element:jce,elinters:zce,ell:qce,els:Wce,elsdot:Uce,Emacr:Vce,emacr:Hce,empty:Kce,emptyset:Gce,EmptySmallSquare:Zce,emptyv:Yce,EmptyVerySmallSquare:Jce,emsp13:Xce,emsp14:Qce,emsp:eue,ENG:tue,eng:nue,ensp:rue,Eogon:oue,eogon:iue,Eopf:sue,eopf:aue,epar:lue,eparsl:cue,eplus:uue,epsi:due,Epsilon:fue,epsilon:pue,epsiv:hue,eqcirc:mue,eqcolon:gue,eqsim:yue,eqslantgtr:bue,eqslantless:vue,Equal:wue,equals:_ue,EqualTilde:xue,equest:kue,Equilibrium:$ue,equiv:Sue,equivDD:Eue,eqvparsl:Cue,erarr:Tue,erDot:Aue,escr:Nue,Escr:Rue,esdot:Pue,Esim:Oue,esim:Iue,Eta:Due,eta:Mue,ETH:Lue,eth:Fue,Euml:Bue,euml:jue,euro:zue,excl:que,exist:Wue,Exists:Uue,expectation:Vue,exponentiale:Hue,ExponentialE:Kue,fallingdotseq:Gue,Fcy:Zue,fcy:Yue,female:Jue,ffilig:Xue,fflig:Que,ffllig:ede,Ffr:tde,ffr:nde,filig:rde,FilledSmallSquare:ode,FilledVerySmallSquare:ide,fjlig:sde,flat:ade,fllig:lde,fltns:cde,fnof:ude,Fopf:dde,fopf:fde,forall:pde,ForAll:hde,fork:mde,forkv:gde,Fouriertrf:yde,fpartint:bde,frac12:vde,frac13:wde,frac14:_de,frac15:xde,frac16:kde,frac18:$de,frac23:Sde,frac25:Ede,frac34:Cde,frac35:Tde,frac38:Ade,frac45:Nde,frac56:Rde,frac58:Pde,frac78:Ode,frasl:Ide,frown:Dde,fscr:Mde,Fscr:Lde,gacute:Fde,Gamma:Bde,gamma:jde,Gammad:zde,gammad:qde,gap:Wde,Gbreve:Ude,gbreve:Vde,Gcedil:Hde,Gcirc:Kde,gcirc:Gde,Gcy:Zde,gcy:Yde,Gdot:Jde,gdot:Xde,ge:Qde,gE:efe,gEl:tfe,gel:nfe,geq:rfe,geqq:ofe,geqslant:ife,gescc:sfe,ges:afe,gesdot:lfe,gesdoto:cfe,gesdotol:ufe,gesl:dfe,gesles:ffe,Gfr:pfe,gfr:hfe,gg:mfe,Gg:gfe,ggg:yfe,gimel:bfe,GJcy:vfe,gjcy:wfe,gla:_fe,gl:xfe,glE:kfe,glj:$fe,gnap:Sfe,gnapprox:Efe,gne:Cfe,gnE:Tfe,gneq:Afe,gneqq:Nfe,gnsim:Rfe,Gopf:Pfe,gopf:Ofe,grave:Ife,GreaterEqual:Dfe,GreaterEqualLess:Mfe,GreaterFullEqual:Lfe,GreaterGreater:Ffe,GreaterLess:Bfe,GreaterSlantEqual:jfe,GreaterTilde:zfe,Gscr:qfe,gscr:Wfe,gsim:Ufe,gsime:Vfe,gsiml:Hfe,gtcc:Kfe,gtcir:Gfe,gt:Zfe,GT:Yfe,Gt:Jfe,gtdot:Xfe,gtlPar:Qfe,gtquest:epe,gtrapprox:tpe,gtrarr:npe,gtrdot:rpe,gtreqless:ope,gtreqqless:ipe,gtrless:spe,gtrsim:ape,gvertneqq:lpe,gvnE:cpe,Hacek:upe,hairsp:dpe,half:fpe,hamilt:ppe,HARDcy:hpe,hardcy:mpe,harrcir:gpe,harr:ype,hArr:bpe,harrw:vpe,Hat:wpe,hbar:_pe,Hcirc:xpe,hcirc:kpe,hearts:$pe,heartsuit:Spe,hellip:Epe,hercon:Cpe,hfr:Tpe,Hfr:Ape,HilbertSpace:Npe,hksearow:Rpe,hkswarow:Ppe,hoarr:Ope,homtht:Ipe,hookleftarrow:Dpe,hookrightarrow:Mpe,hopf:Lpe,Hopf:Fpe,horbar:Bpe,HorizontalLine:jpe,hscr:zpe,Hscr:qpe,hslash:Wpe,Hstrok:Upe,hstrok:Vpe,HumpDownHump:Hpe,HumpEqual:Kpe,hybull:Gpe,hyphen:Zpe,Iacute:Ype,iacute:Jpe,ic:Xpe,Icirc:Qpe,icirc:ehe,Icy:the,icy:nhe,Idot:rhe,IEcy:ohe,iecy:ihe,iexcl:she,iff:ahe,ifr:lhe,Ifr:che,Igrave:uhe,igrave:dhe,ii:fhe,iiiint:phe,iiint:hhe,iinfin:mhe,iiota:ghe,IJlig:yhe,ijlig:bhe,Imacr:vhe,imacr:whe,image:_he,ImaginaryI:xhe,imagline:khe,imagpart:$he,imath:She,Im:Ehe,imof:Che,imped:The,Implies:Ahe,incare:Nhe,in:"",infin:Rhe,infintie:Phe,inodot:Ohe,intcal:Ihe,int:Dhe,Int:Mhe,integers:Lhe,Integral:Fhe,intercal:Bhe,Intersection:jhe,intlarhk:zhe,intprod:qhe,InvisibleComma:Whe,InvisibleTimes:Uhe,IOcy:Vhe,iocy:Hhe,Iogon:Khe,iogon:Ghe,Iopf:Zhe,iopf:Yhe,Iota:Jhe,iota:Xhe,iprod:Qhe,iquest:eme,iscr:tme,Iscr:nme,isin:rme,isindot:ome,isinE:ime,isins:sme,isinsv:ame,isinv:lme,it:cme,Itilde:ume,itilde:dme,Iukcy:fme,iukcy:pme,Iuml:hme,iuml:mme,Jcirc:gme,jcirc:yme,Jcy:bme,jcy:vme,Jfr:wme,jfr:_me,jmath:xme,Jopf:kme,jopf:$me,Jscr:Sme,jscr:Eme,Jsercy:Cme,jsercy:Tme,Jukcy:Ame,jukcy:Nme,Kappa:Rme,kappa:Pme,kappav:Ome,Kcedil:Ime,kcedil:Dme,Kcy:Mme,kcy:Lme,Kfr:Fme,kfr:Bme,kgreen:jme,KHcy:zme,khcy:qme,KJcy:Wme,kjcy:Ume,Kopf:Vme,kopf:Hme,Kscr:Kme,kscr:Gme,lAarr:Zme,Lacute:Yme,lacute:Jme,laemptyv:Xme,lagran:Qme,Lambda:ege,lambda:tge,lang:nge,Lang:rge,langd:oge,langle:ige,lap:sge,Laplacetrf:age,laquo:lge,larrb:cge,larrbfs:uge,larr:dge,Larr:fge,lArr:pge,larrfs:hge,larrhk:mge,larrlp:gge,larrpl:yge,larrsim:bge,larrtl:vge,latail:wge,lAtail:_ge,lat:xge,late:kge,lates:$ge,lbarr:Sge,lBarr:Ege,lbbrk:Cge,lbrace:Tge,lbrack:Age,lbrke:Nge,lbrksld:Rge,lbrkslu:Pge,Lcaron:Oge,lcaron:Ige,Lcedil:Dge,lcedil:Mge,lceil:Lge,lcub:Fge,Lcy:Bge,lcy:jge,ldca:zge,ldquo:qge,ldquor:Wge,ldrdhar:Uge,ldrushar:Vge,ldsh:Hge,le:Kge,lE:Gge,LeftAngleBracket:Zge,LeftArrowBar:Yge,leftarrow:Jge,LeftArrow:Xge,Leftarrow:Qge,LeftArrowRightArrow:e1e,leftarrowtail:t1e,LeftCeiling:n1e,LeftDoubleBracket:r1e,LeftDownTeeVector:o1e,LeftDownVectorBar:i1e,LeftDownVector:s1e,LeftFloor:a1e,leftharpoondown:l1e,leftharpoonup:c1e,leftleftarrows:u1e,leftrightarrow:d1e,LeftRightArrow:f1e,Leftrightarrow:p1e,leftrightarrows:h1e,leftrightharpoons:m1e,leftrightsquigarrow:g1e,LeftRightVector:y1e,LeftTeeArrow:b1e,LeftTee:v1e,LeftTeeVector:w1e,leftthreetimes:_1e,LeftTriangleBar:x1e,LeftTriangle:k1e,LeftTriangleEqual:$1e,LeftUpDownVector:S1e,LeftUpTeeVector:E1e,LeftUpVectorBar:C1e,LeftUpVector:T1e,LeftVectorBar:A1e,LeftVector:N1e,lEg:R1e,leg:P1e,leq:O1e,leqq:I1e,leqslant:D1e,lescc:M1e,les:L1e,lesdot:F1e,lesdoto:B1e,lesdotor:j1e,lesg:z1e,lesges:q1e,lessapprox:W1e,lessdot:U1e,lesseqgtr:V1e,lesseqqgtr:H1e,LessEqualGreater:K1e,LessFullEqual:G1e,LessGreater:Z1e,lessgtr:Y1e,LessLess:J1e,lesssim:X1e,LessSlantEqual:Q1e,LessTilde:eye,lfisht:tye,lfloor:nye,Lfr:rye,lfr:oye,lg:iye,lgE:sye,lHar:aye,lhard:lye,lharu:cye,lharul:uye,lhblk:dye,LJcy:fye,ljcy:pye,llarr:hye,ll:mye,Ll:gye,llcorner:yye,Lleftarrow:bye,llhard:vye,lltri:wye,Lmidot:_ye,lmidot:xye,lmoustache:kye,lmoust:$ye,lnap:Sye,lnapprox:Eye,lne:Cye,lnE:Tye,lneq:Aye,lneqq:Nye,lnsim:Rye,loang:Pye,loarr:Oye,lobrk:Iye,longleftarrow:Dye,LongLeftArrow:Mye,Longleftarrow:Lye,longleftrightarrow:Fye,LongLeftRightArrow:Bye,Longleftrightarrow:jye,longmapsto:zye,longrightarrow:qye,LongRightArrow:Wye,Longrightarrow:Uye,looparrowleft:Vye,looparrowright:Hye,lopar:Kye,Lopf:Gye,lopf:Zye,loplus:Yye,lotimes:Jye,lowast:Xye,lowbar:Qye,LowerLeftArrow:e0e,LowerRightArrow:t0e,loz:n0e,lozenge:r0e,lozf:o0e,lpar:i0e,lparlt:s0e,lrarr:a0e,lrcorner:l0e,lrhar:c0e,lrhard:u0e,lrm:d0e,lrtri:f0e,lsaquo:p0e,lscr:h0e,Lscr:m0e,lsh:g0e,Lsh:y0e,lsim:b0e,lsime:v0e,lsimg:w0e,lsqb:_0e,lsquo:x0e,lsquor:k0e,Lstrok:$0e,lstrok:S0e,ltcc:E0e,ltcir:C0e,lt:T0e,LT:A0e,Lt:N0e,ltdot:R0e,lthree:P0e,ltimes:O0e,ltlarr:I0e,ltquest:D0e,ltri:M0e,ltrie:L0e,ltrif:F0e,ltrPar:B0e,lurdshar:j0e,luruhar:z0e,lvertneqq:q0e,lvnE:W0e,macr:U0e,male:V0e,malt:H0e,maltese:K0e,Map:"",map:G0e,mapsto:Z0e,mapstodown:Y0e,mapstoleft:J0e,mapstoup:X0e,marker:Q0e,mcomma:ebe,Mcy:tbe,mcy:nbe,mdash:rbe,mDDot:obe,measuredangle:ibe,MediumSpace:sbe,Mellintrf:abe,Mfr:lbe,mfr:cbe,mho:ube,micro:dbe,midast:fbe,midcir:pbe,mid:hbe,middot:mbe,minusb:gbe,minus:ybe,minusd:bbe,minusdu:vbe,MinusPlus:wbe,mlcp:_be,mldr:xbe,mnplus:kbe,models:$be,Mopf:Sbe,mopf:Ebe,mp:Cbe,mscr:Tbe,Mscr:Abe,mstpos:Nbe,Mu:Rbe,mu:Pbe,multimap:Obe,mumap:Ibe,nabla:Dbe,Nacute:Mbe,nacute:Lbe,nang:Fbe,nap:Bbe,napE:jbe,napid:zbe,napos:qbe,napprox:Wbe,natural:Ube,naturals:Vbe,natur:Hbe,nbsp:Kbe,nbump:Gbe,nbumpe:Zbe,ncap:Ybe,Ncaron:Jbe,ncaron:Xbe,Ncedil:Qbe,ncedil:eve,ncong:tve,ncongdot:nve,ncup:rve,Ncy:ove,ncy:ive,ndash:sve,nearhk:ave,nearr:lve,neArr:cve,nearrow:uve,ne:dve,nedot:fve,NegativeMediumSpace:pve,NegativeThickSpace:hve,NegativeThinSpace:mve,NegativeVeryThinSpace:gve,nequiv:yve,nesear:bve,nesim:vve,NestedGreaterGreater:wve,NestedLessLess:_ve,NewLine:xve,nexist:kve,nexists:$ve,Nfr:Sve,nfr:Eve,ngE:Cve,nge:Tve,ngeq:Ave,ngeqq:Nve,ngeqslant:Rve,nges:Pve,nGg:Ove,ngsim:Ive,nGt:Dve,ngt:Mve,ngtr:Lve,nGtv:Fve,nharr:Bve,nhArr:jve,nhpar:zve,ni:qve,nis:Wve,nisd:Uve,niv:Vve,NJcy:Hve,njcy:Kve,nlarr:Gve,nlArr:Zve,nldr:Yve,nlE:Jve,nle:Xve,nleftarrow:Qve,nLeftarrow:ewe,nleftrightarrow:twe,nLeftrightarrow:nwe,nleq:rwe,nleqq:owe,nleqslant:iwe,nles:swe,nless:awe,nLl:lwe,nlsim:cwe,nLt:uwe,nlt:dwe,nltri:fwe,nltrie:pwe,nLtv:hwe,nmid:mwe,NoBreak:gwe,NonBreakingSpace:ywe,nopf:bwe,Nopf:vwe,Not:wwe,not:_we,NotCongruent:xwe,NotCupCap:kwe,NotDoubleVerticalBar:$we,NotElement:Swe,NotEqual:Ewe,NotEqualTilde:Cwe,NotExists:Twe,NotGreater:Awe,NotGreaterEqual:Nwe,NotGreaterFullEqual:Rwe,NotGreaterGreater:Pwe,NotGreaterLess:Owe,NotGreaterSlantEqual:Iwe,NotGreaterTilde:Dwe,NotHumpDownHump:Mwe,NotHumpEqual:Lwe,notin:Fwe,notindot:Bwe,notinE:jwe,notinva:zwe,notinvb:qwe,notinvc:Wwe,NotLeftTriangleBar:Uwe,NotLeftTriangle:Vwe,NotLeftTriangleEqual:Hwe,NotLess:Kwe,NotLessEqual:Gwe,NotLessGreater:Zwe,NotLessLess:Ywe,NotLessSlantEqual:Jwe,NotLessTilde:Xwe,NotNestedGreaterGreater:Qwe,NotNestedLessLess:e_e,notni:t_e,notniva:n_e,notnivb:r_e,notnivc:o_e,NotPrecedes:i_e,NotPrecedesEqual:s_e,NotPrecedesSlantEqual:a_e,NotReverseElement:l_e,NotRightTriangleBar:c_e,NotRightTriangle:u_e,NotRightTriangleEqual:d_e,NotSquareSubset:f_e,NotSquareSubsetEqual:p_e,NotSquareSuperset:h_e,NotSquareSupersetEqual:m_e,NotSubset:g_e,NotSubsetEqual:y_e,NotSucceeds:b_e,NotSucceedsEqual:v_e,NotSucceedsSlantEqual:w_e,NotSucceedsTilde:__e,NotSuperset:x_e,NotSupersetEqual:k_e,NotTilde:$_e,NotTildeEqual:S_e,NotTildeFullEqual:E_e,NotTildeTilde:C_e,NotVerticalBar:T_e,nparallel:A_e,npar:N_e,nparsl:R_e,npart:P_e,npolint:O_e,npr:I_e,nprcue:D_e,nprec:M_e,npreceq:L_e,npre:F_e,nrarrc:B_e,nrarr:j_e,nrArr:z_e,nrarrw:q_e,nrightarrow:W_e,nRightarrow:U_e,nrtri:V_e,nrtrie:H_e,nsc:K_e,nsccue:G_e,nsce:Z_e,Nscr:Y_e,nscr:J_e,nshortmid:X_e,nshortparallel:Q_e,nsim:exe,nsime:txe,nsimeq:nxe,nsmid:rxe,nspar:oxe,nsqsube:ixe,nsqsupe:sxe,nsub:axe,nsubE:lxe,nsube:cxe,nsubset:uxe,nsubseteq:dxe,nsubseteqq:fxe,nsucc:pxe,nsucceq:hxe,nsup:mxe,nsupE:gxe,nsupe:yxe,nsupset:bxe,nsupseteq:vxe,nsupseteqq:wxe,ntgl:_xe,Ntilde:xxe,ntilde:kxe,ntlg:$xe,ntriangleleft:Sxe,ntrianglelefteq:Exe,ntriangleright:Cxe,ntrianglerighteq:Txe,Nu:Axe,nu:Nxe,num:Rxe,numero:Pxe,numsp:Oxe,nvap:Ixe,nvdash:Dxe,nvDash:Mxe,nVdash:Lxe,nVDash:Fxe,nvge:Bxe,nvgt:jxe,nvHarr:zxe,nvinfin:qxe,nvlArr:Wxe,nvle:Uxe,nvlt:Vxe,nvltrie:Hxe,nvrArr:Kxe,nvrtrie:Gxe,nvsim:Zxe,nwarhk:Yxe,nwarr:Jxe,nwArr:Xxe,nwarrow:Qxe,nwnear:eke,Oacute:tke,oacute:nke,oast:rke,Ocirc:oke,ocirc:ike,ocir:ske,Ocy:ake,ocy:lke,odash:cke,Odblac:uke,odblac:dke,odiv:fke,odot:pke,odsold:hke,OElig:mke,oelig:gke,ofcir:yke,Ofr:bke,ofr:vke,ogon:wke,Ograve:_ke,ograve:xke,ogt:kke,ohbar:$ke,ohm:Ske,oint:Eke,olarr:Cke,olcir:Tke,olcross:Ake,oline:Nke,olt:Rke,Omacr:Pke,omacr:Oke,Omega:Ike,omega:Dke,Omicron:Mke,omicron:Lke,omid:Fke,ominus:Bke,Oopf:jke,oopf:zke,opar:qke,OpenCurlyDoubleQuote:Wke,OpenCurlyQuote:Uke,operp:Vke,oplus:Hke,orarr:Kke,Or:Gke,or:Zke,ord:Yke,order:Jke,orderof:Xke,ordf:Qke,ordm:e$e,origof:t$e,oror:n$e,orslope:r$e,orv:o$e,oS:i$e,Oscr:s$e,oscr:a$e,Oslash:l$e,oslash:c$e,osol:u$e,Otilde:d$e,otilde:f$e,otimesas:p$e,Otimes:h$e,otimes:m$e,Ouml:g$e,ouml:y$e,ovbar:b$e,OverBar:v$e,OverBrace:w$e,OverBracket:_$e,OverParenthesis:x$e,para:k$e,parallel:$$e,par:S$e,parsim:E$e,parsl:C$e,part:T$e,PartialD:A$e,Pcy:N$e,pcy:R$e,percnt:P$e,period:O$e,permil:I$e,perp:D$e,pertenk:M$e,Pfr:L$e,pfr:F$e,Phi:B$e,phi:j$e,phiv:z$e,phmmat:q$e,phone:W$e,Pi:U$e,pi:V$e,pitchfork:H$e,piv:K$e,planck:G$e,planckh:Z$e,plankv:Y$e,plusacir:J$e,plusb:X$e,pluscir:Q$e,plus:eSe,plusdo:tSe,plusdu:nSe,pluse:rSe,PlusMinus:oSe,plusmn:iSe,plussim:sSe,plustwo:aSe,pm:lSe,Poincareplane:cSe,pointint:uSe,popf:dSe,Popf:fSe,pound:pSe,prap:hSe,Pr:mSe,pr:gSe,prcue:ySe,precapprox:bSe,prec:vSe,preccurlyeq:wSe,Precedes:_Se,PrecedesEqual:xSe,PrecedesSlantEqual:kSe,PrecedesTilde:$Se,preceq:SSe,precnapprox:ESe,precneqq:CSe,precnsim:TSe,pre:ASe,prE:NSe,precsim:RSe,prime:PSe,Prime:OSe,primes:ISe,prnap:DSe,prnE:MSe,prnsim:LSe,prod:FSe,Product:BSe,profalar:jSe,profline:zSe,profsurf:qSe,prop:WSe,Proportional:USe,Proportion:VSe,propto:HSe,prsim:KSe,prurel:GSe,Pscr:ZSe,pscr:YSe,Psi:JSe,psi:XSe,puncsp:QSe,Qfr:eEe,qfr:tEe,qint:nEe,qopf:rEe,Qopf:oEe,qprime:iEe,Qscr:sEe,qscr:aEe,quaternions:lEe,quatint:cEe,quest:uEe,questeq:dEe,quot:fEe,QUOT:pEe,rAarr:hEe,race:mEe,Racute:gEe,racute:yEe,radic:bEe,raemptyv:vEe,rang:wEe,Rang:_Ee,rangd:xEe,range:kEe,rangle:$Ee,raquo:SEe,rarrap:EEe,rarrb:CEe,rarrbfs:TEe,rarrc:AEe,rarr:NEe,Rarr:REe,rArr:PEe,rarrfs:OEe,rarrhk:IEe,rarrlp:DEe,rarrpl:MEe,rarrsim:LEe,Rarrtl:FEe,rarrtl:BEe,rarrw:jEe,ratail:zEe,rAtail:qEe,ratio:WEe,rationals:UEe,rbarr:VEe,rBarr:HEe,RBarr:KEe,rbbrk:GEe,rbrace:ZEe,rbrack:YEe,rbrke:JEe,rbrksld:XEe,rbrkslu:QEe,Rcaron:eCe,rcaron:tCe,Rcedil:nCe,rcedil:rCe,rceil:oCe,rcub:iCe,Rcy:sCe,rcy:aCe,rdca:lCe,rdldhar:cCe,rdquo:uCe,rdquor:dCe,rdsh:fCe,real:pCe,realine:hCe,realpart:mCe,reals:gCe,Re:yCe,rect:bCe,reg:vCe,REG:wCe,ReverseElement:_Ce,ReverseEquilibrium:xCe,ReverseUpEquilibrium:kCe,rfisht:$Ce,rfloor:SCe,rfr:ECe,Rfr:CCe,rHar:TCe,rhard:ACe,rharu:NCe,rharul:RCe,Rho:PCe,rho:OCe,rhov:ICe,RightAngleBracket:DCe,RightArrowBar:MCe,rightarrow:LCe,RightArrow:FCe,Rightarrow:BCe,RightArrowLeftArrow:jCe,rightarrowtail:zCe,RightCeiling:qCe,RightDoubleBracket:WCe,RightDownTeeVector:UCe,RightDownVectorBar:VCe,RightDownVector:HCe,RightFloor:KCe,rightharpoondown:GCe,rightharpoonup:ZCe,rightleftarrows:YCe,rightleftharpoons:JCe,rightrightarrows:XCe,rightsquigarrow:QCe,RightTeeArrow:e2e,RightTee:t2e,RightTeeVector:n2e,rightthreetimes:r2e,RightTriangleBar:o2e,RightTriangle:i2e,RightTriangleEqual:s2e,RightUpDownVector:a2e,RightUpTeeVector:l2e,RightUpVectorBar:c2e,RightUpVector:u2e,RightVectorBar:d2e,RightVector:f2e,ring:p2e,risingdotseq:h2e,rlarr:m2e,rlhar:g2e,rlm:y2e,rmoustache:b2e,rmoust:v2e,rnmid:w2e,roang:_2e,roarr:x2e,robrk:k2e,ropar:$2e,ropf:S2e,Ropf:E2e,roplus:C2e,rotimes:T2e,RoundImplies:A2e,rpar:N2e,rpargt:R2e,rppolint:P2e,rrarr:O2e,Rrightarrow:I2e,rsaquo:D2e,rscr:M2e,Rscr:L2e,rsh:F2e,Rsh:B2e,rsqb:j2e,rsquo:z2e,rsquor:q2e,rthree:W2e,rtimes:U2e,rtri:V2e,rtrie:H2e,rtrif:K2e,rtriltri:G2e,RuleDelayed:Z2e,ruluhar:Y2e,rx:J2e,Sacute:X2e,sacute:Q2e,sbquo:eTe,scap:tTe,Scaron:nTe,scaron:rTe,Sc:oTe,sc:iTe,sccue:sTe,sce:aTe,scE:lTe,Scedil:cTe,scedil:uTe,Scirc:dTe,scirc:fTe,scnap:pTe,scnE:hTe,scnsim:mTe,scpolint:gTe,scsim:yTe,Scy:bTe,scy:vTe,sdotb:wTe,sdot:_Te,sdote:xTe,searhk:kTe,searr:$Te,seArr:STe,searrow:ETe,sect:CTe,semi:TTe,seswar:ATe,setminus:NTe,setmn:RTe,sext:PTe,Sfr:OTe,sfr:ITe,sfrown:DTe,sharp:MTe,SHCHcy:LTe,shchcy:FTe,SHcy:BTe,shcy:jTe,ShortDownArrow:zTe,ShortLeftArrow:qTe,shortmid:WTe,shortparallel:UTe,ShortRightArrow:VTe,ShortUpArrow:HTe,shy:KTe,Sigma:GTe,sigma:ZTe,sigmaf:YTe,sigmav:JTe,sim:XTe,simdot:QTe,sime:eAe,simeq:tAe,simg:nAe,simgE:rAe,siml:oAe,simlE:iAe,simne:sAe,simplus:aAe,simrarr:lAe,slarr:cAe,SmallCircle:uAe,smallsetminus:dAe,smashp:fAe,smeparsl:pAe,smid:hAe,smile:mAe,smt:gAe,smte:yAe,smtes:bAe,SOFTcy:vAe,softcy:wAe,solbar:_Ae,solb:xAe,sol:kAe,Sopf:$Ae,sopf:SAe,spades:EAe,spadesuit:CAe,spar:TAe,sqcap:AAe,sqcaps:NAe,sqcup:RAe,sqcups:PAe,Sqrt:OAe,sqsub:IAe,sqsube:DAe,sqsubset:MAe,sqsubseteq:LAe,sqsup:FAe,sqsupe:BAe,sqsupset:jAe,sqsupseteq:zAe,square:qAe,Square:WAe,SquareIntersection:UAe,SquareSubset:VAe,SquareSubsetEqual:HAe,SquareSuperset:KAe,SquareSupersetEqual:GAe,SquareUnion:ZAe,squarf:YAe,squ:JAe,squf:XAe,srarr:QAe,Sscr:e3e,sscr:t3e,ssetmn:n3e,ssmile:r3e,sstarf:o3e,Star:i3e,star:s3e,starf:a3e,straightepsilon:l3e,straightphi:c3e,strns:u3e,sub:d3e,Sub:f3e,subdot:p3e,subE:h3e,sube:m3e,subedot:g3e,submult:y3e,subnE:b3e,subne:v3e,subplus:w3e,subrarr:_3e,subset:x3e,Subset:k3e,subseteq:$3e,subseteqq:S3e,SubsetEqual:E3e,subsetneq:C3e,subsetneqq:T3e,subsim:A3e,subsub:N3e,subsup:R3e,succapprox:P3e,succ:O3e,succcurlyeq:I3e,Succeeds:D3e,SucceedsEqual:M3e,SucceedsSlantEqual:L3e,SucceedsTilde:F3e,succeq:B3e,succnapprox:j3e,succneqq:z3e,succnsim:q3e,succsim:W3e,SuchThat:U3e,sum:V3e,Sum:H3e,sung:K3e,sup1:G3e,sup2:Z3e,sup3:Y3e,sup:J3e,Sup:X3e,supdot:Q3e,supdsub:eNe,supE:tNe,supe:nNe,supedot:rNe,Superset:oNe,SupersetEqual:iNe,suphsol:sNe,suphsub:aNe,suplarr:lNe,supmult:cNe,supnE:uNe,supne:dNe,supplus:fNe,supset:pNe,Supset:hNe,supseteq:mNe,supseteqq:gNe,supsetneq:yNe,supsetneqq:bNe,supsim:vNe,supsub:wNe,supsup:_Ne,swarhk:xNe,swarr:kNe,swArr:$Ne,swarrow:SNe,swnwar:ENe,szlig:CNe,Tab:TNe,target:ANe,Tau:NNe,tau:RNe,tbrk:PNe,Tcaron:ONe,tcaron:INe,Tcedil:DNe,tcedil:MNe,Tcy:LNe,tcy:FNe,tdot:BNe,telrec:jNe,Tfr:zNe,tfr:qNe,there4:WNe,therefore:UNe,Therefore:VNe,Theta:HNe,theta:KNe,thetasym:GNe,thetav:ZNe,thickapprox:YNe,thicksim:JNe,ThickSpace:XNe,ThinSpace:QNe,thinsp:eRe,thkap:tRe,thksim:nRe,THORN:rRe,thorn:oRe,tilde:iRe,Tilde:sRe,TildeEqual:aRe,TildeFullEqual:lRe,TildeTilde:cRe,timesbar:uRe,timesb:dRe,times:fRe,timesd:pRe,tint:hRe,toea:mRe,topbot:gRe,topcir:yRe,top:bRe,Topf:vRe,topf:wRe,topfork:_Re,tosa:xRe,tprime:kRe,trade:$Re,TRADE:SRe,triangle:ERe,triangledown:CRe,triangleleft:TRe,trianglelefteq:ARe,triangleq:NRe,triangleright:RRe,trianglerighteq:PRe,tridot:ORe,trie:IRe,triminus:DRe,TripleDot:MRe,triplus:LRe,trisb:FRe,tritime:BRe,trpezium:jRe,Tscr:zRe,tscr:qRe,TScy:WRe,tscy:URe,TSHcy:VRe,tshcy:HRe,Tstrok:KRe,tstrok:GRe,twixt:ZRe,twoheadleftarrow:YRe,twoheadrightarrow:JRe,Uacute:XRe,uacute:QRe,uarr:ePe,Uarr:tPe,uArr:nPe,Uarrocir:rPe,Ubrcy:oPe,ubrcy:iPe,Ubreve:sPe,ubreve:aPe,Ucirc:lPe,ucirc:cPe,Ucy:uPe,ucy:dPe,udarr:fPe,Udblac:pPe,udblac:hPe,udhar:mPe,ufisht:gPe,Ufr:yPe,ufr:bPe,Ugrave:vPe,ugrave:wPe,uHar:_Pe,uharl:xPe,uharr:kPe,uhblk:$Pe,ulcorn:SPe,ulcorner:EPe,ulcrop:CPe,ultri:TPe,Umacr:APe,umacr:NPe,uml:RPe,UnderBar:PPe,UnderBrace:OPe,UnderBracket:IPe,UnderParenthesis:DPe,Union:MPe,UnionPlus:LPe,Uogon:FPe,uogon:BPe,Uopf:jPe,uopf:zPe,UpArrowBar:qPe,uparrow:WPe,UpArrow:UPe,Uparrow:VPe,UpArrowDownArrow:HPe,updownarrow:KPe,UpDownArrow:GPe,Updownarrow:ZPe,UpEquilibrium:YPe,upharpoonleft:JPe,upharpoonright:XPe,uplus:QPe,UpperLeftArrow:eOe,UpperRightArrow:tOe,upsi:nOe,Upsi:rOe,upsih:oOe,Upsilon:iOe,upsilon:sOe,UpTeeArrow:aOe,UpTee:lOe,upuparrows:cOe,urcorn:uOe,urcorner:dOe,urcrop:fOe,Uring:pOe,uring:hOe,urtri:mOe,Uscr:gOe,uscr:yOe,utdot:bOe,Utilde:vOe,utilde:wOe,utri:_Oe,utrif:xOe,uuarr:kOe,Uuml:$Oe,uuml:SOe,uwangle:EOe,vangrt:COe,varepsilon:TOe,varkappa:AOe,varnothing:NOe,varphi:ROe,varpi:POe,varpropto:OOe,varr:IOe,vArr:DOe,varrho:MOe,varsigma:LOe,varsubsetneq:FOe,varsubsetneqq:BOe,varsupsetneq:jOe,varsupsetneqq:zOe,vartheta:qOe,vartriangleleft:WOe,vartriangleright:UOe,vBar:VOe,Vbar:HOe,vBarv:KOe,Vcy:GOe,vcy:ZOe,vdash:YOe,vDash:JOe,Vdash:XOe,VDash:QOe,Vdashl:eIe,veebar:tIe,vee:nIe,Vee:rIe,veeeq:oIe,vellip:iIe,verbar:sIe,Verbar:aIe,vert:lIe,Vert:cIe,VerticalBar:uIe,VerticalLine:dIe,VerticalSeparator:fIe,VerticalTilde:pIe,VeryThinSpace:hIe,Vfr:mIe,vfr:gIe,vltri:yIe,vnsub:bIe,vnsup:vIe,Vopf:wIe,vopf:_Ie,vprop:xIe,vrtri:kIe,Vscr:$Ie,vscr:SIe,vsubnE:EIe,vsubne:CIe,vsupnE:TIe,vsupne:AIe,Vvdash:NIe,vzigzag:RIe,Wcirc:PIe,wcirc:OIe,wedbar:IIe,wedge:DIe,Wedge:MIe,wedgeq:LIe,weierp:FIe,Wfr:BIe,wfr:jIe,Wopf:zIe,wopf:qIe,wp:WIe,wr:UIe,wreath:VIe,Wscr:HIe,wscr:KIe,xcap:GIe,xcirc:ZIe,xcup:YIe,xdtri:JIe,Xfr:XIe,xfr:QIe,xharr:eDe,xhArr:tDe,Xi:nDe,xi:rDe,xlarr:oDe,xlArr:iDe,xmap:sDe,xnis:aDe,xodot:lDe,Xopf:cDe,xopf:uDe,xoplus:dDe,xotime:fDe,xrarr:pDe,xrArr:hDe,Xscr:mDe,xscr:gDe,xsqcup:yDe,xuplus:bDe,xutri:vDe,xvee:wDe,xwedge:_De,Yacute:xDe,yacute:kDe,YAcy:$De,yacy:SDe,Ycirc:EDe,ycirc:CDe,Ycy:TDe,ycy:ADe,yen:NDe,Yfr:RDe,yfr:PDe,YIcy:ODe,yicy:IDe,Yopf:DDe,yopf:MDe,Yscr:LDe,yscr:FDe,YUcy:BDe,yucy:jDe,yuml:zDe,Yuml:qDe,Zacute:WDe,zacute:UDe,Zcaron:VDe,zcaron:HDe,Zcy:KDe,zcy:GDe,Zdot:ZDe,zdot:YDe,zeetrf:JDe,ZeroWidthSpace:XDe,Zeta:QDe,zeta:e5e,zfr:t5e,Zfr:n5e,ZHcy:r5e,zhcy:o5e,zigrarr:i5e,zopf:s5e,Zopf:a5e,Zscr:l5e,zscr:c5e,zwj:u5e,zwnj:d5e},m8=f5e,om=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,ml={},I3={};function p5e(t){var e,n,r=I3[t];if(r)return r;for(r=I3[t]=[],e=0;e<128;e++)n=String.fromCharCode(e),/^[0-9a-z]$/i.test(n)?r.push(n):r.push("%"+("0"+e.toString(16).toUpperCase()).slice(-2));for(e=0;e<t.length;e++)r[t.charCodeAt(e)]=t[e];return r}function P0(t,e,n){var r,o,i,s,a,l="";for(typeof e!="string"&&(n=e,e=P0.defaultChars),typeof n=="undefined"&&(n=!0),a=p5e(e),r=0,o=t.length;r<o;r++){if(i=t.charCodeAt(r),n&&i===37&&r+2<o&&/^[0-9a-f]{2}$/i.test(t.slice(r+1,r+3))){l+=t.slice(r,r+3),r+=2;continue}if(i<128){l+=a[i];continue}if(i>=55296&&i<=57343){if(i>=55296&&i<=56319&&r+1<o&&(s=t.charCodeAt(r+1),s>=56320&&s<=57343)){l+=encodeURIComponent(t[r]+t[r+1]),r++;continue}l+="%EF%BF%BD";continue}l+=encodeURIComponent(t[r])}return l}P0.defaultChars=";/?:@&=+$,-_.!~*'()#";P0.componentChars="-_.!~*'()";var h5e=P0,D3={};function m5e(t){var e,n,r=D3[t];if(r)return r;for(r=D3[t]=[],e=0;e<128;e++)n=String.fromCharCode(e),r.push(n);for(e=0;e<t.length;e++)n=t.charCodeAt(e),r[n]="%"+("0"+n.toString(16).toUpperCase()).slice(-2);return r}function O0(t,e){var n;return typeof e!="string"&&(e=O0.defaultChars),n=m5e(e),t.replace(/(%[a-f0-9]{2})+/gi,function(r){var o,i,s,a,l,c,u,d="";for(o=0,i=r.length;o<i;o+=3){if(s=parseInt(r.slice(o+1,o+3),16),s<128){d+=n[s];continue}if((s&224)===192&&o+3<i&&(a=parseInt(r.slice(o+4,o+6),16),(a&192)===128)){u=s<<6&1984|a&63,u<128?d+="":d+=String.fromCharCode(u),o+=3;continue}if((s&240)===224&&o+6<i&&(a=parseInt(r.slice(o+4,o+6),16),l=parseInt(r.slice(o+7,o+9),16),(a&192)===128&&(l&192)===128)){u=s<<12&61440|a<<6&4032|l&63,u<2048||u>=55296&&u<=57343?d+="":d+=String.fromCharCode(u),o+=6;continue}if((s&248)===240&&o+9<i&&(a=parseInt(r.slice(o+4,o+6),16),l=parseInt(r.slice(o+7,o+9),16),c=parseInt(r.slice(o+10,o+12),16),(a&192)===128&&(l&192)===128&&(c&192)===128)){u=s<<18&1835008|a<<12&258048|l<<6&4032|c&63,u<65536||u>1114111?d+="":(u-=65536,d+=String.fromCharCode(55296+(u>>10),56320+(u&1023))),o+=9;continue}d+=""}return d})}O0.defaultChars=";/?:@&=+$,#";O0.componentChars="";var g5e=O0,y5e=function(e){var n="";return n+=e.protocol||"",n+=e.slashes?"//":"",n+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?n+="["+e.hostname+"]":n+=e.hostname||"",n+=e.port?":"+e.port:"",n+=e.pathname||"",n+=e.search||"",n+=e.hash||"",n};function G1(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}var b5e=/^([a-z0-9.+-]+:)/i,v5e=/:[0-9]*$/,w5e=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,_5e=["<",">",'"',"`"," ","\r",`
`,"	"],x5e=["{","}","|","\\","^","`"].concat(_5e),k5e=["'"].concat(x5e),M3=["%","/","?",";","#"].concat(k5e),L3=["/","?","#"],$5e=255,F3=/^[+a-z0-9A-Z_-]{0,63}$/,S5e=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,B3={javascript:!0,"javascript:":!0},j3={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function E5e(t,e){if(t&&t instanceof G1)return t;var n=new G1;return n.parse(t,e),n}G1.prototype.parse=function(t,e){var n,r,o,i,s,a=t;if(a=a.trim(),!e&&t.split("#").length===1){var l=w5e.exec(a);if(l)return this.pathname=l[1],l[2]&&(this.search=l[2]),this}var c=b5e.exec(a);if(c&&(c=c[0],o=c.toLowerCase(),this.protocol=c,a=a.substr(c.length)),(e||c||a.match(/^\/\/[^@\/]+@[^@\/]+/))&&(s=a.substr(0,2)==="//",s&&!(c&&B3[c])&&(a=a.substr(2),this.slashes=!0)),!B3[c]&&(s||c&&!j3[c])){var u=-1;for(n=0;n<L3.length;n++)i=a.indexOf(L3[n]),i!==-1&&(u===-1||i<u)&&(u=i);var d,f;for(u===-1?f=a.lastIndexOf("@"):f=a.lastIndexOf("@",u),f!==-1&&(d=a.slice(0,f),a=a.slice(f+1),this.auth=d),u=-1,n=0;n<M3.length;n++)i=a.indexOf(M3[n]),i!==-1&&(u===-1||i<u)&&(u=i);u===-1&&(u=a.length),a[u-1]===":"&&u--;var p=a.slice(0,u);a=a.slice(u),this.parseHost(p),this.hostname=this.hostname||"";var h=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!h){var y=this.hostname.split(/\./);for(n=0,r=y.length;n<r;n++){var m=y[n];if(m&&!m.match(F3)){for(var w="",x=0,$=m.length;x<$;x++)m.charCodeAt(x)>127?w+="x":w+=m[x];if(!w.match(F3)){var S=y.slice(0,n),I=y.slice(n+1),E=m.match(S5e);E&&(S.push(E[1]),I.unshift(E[2])),I.length&&(a=I.join(".")+a),this.hostname=S.join(".");break}}}}this.hostname.length>$5e&&(this.hostname=""),h&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}var L=a.indexOf("#");L!==-1&&(this.hash=a.substr(L),a=a.slice(0,L));var T=a.indexOf("?");return T!==-1&&(this.search=a.substr(T),a=a.slice(0,T)),a&&(this.pathname=a),j3[o]&&this.hostname&&!this.pathname&&(this.pathname=""),this};G1.prototype.parseHost=function(t){var e=v5e.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};var C5e=E5e;ml.encode=h5e;ml.decode=g5e;ml.format=y5e;ml.parse=C5e;var Tl={},iw,z3;function IS(){return z3||(z3=1,iw=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/),iw}var sw,q3;function DS(){return q3||(q3=1,sw=/[\0-\x1F\x7F-\x9F]/),sw}var aw,W3;function T5e(){return W3||(W3=1,aw=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/),aw}var lw,U3;function MS(){return U3||(U3=1,lw=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/),lw}var V3;function g8(){return V3||(V3=1,Tl.Any=IS(),Tl.Cc=DS(),Tl.Cf=T5e(),Tl.P=om,Tl.Z=MS()),Tl}(function(t){function e(P){return Object.prototype.toString.call(P)}function n(P){return e(P)==="[object String]"}var r=Object.prototype.hasOwnProperty;function o(P,ne){return r.call(P,ne)}function i(P){var ne=Array.prototype.slice.call(arguments,1);return ne.forEach(function(Q){if(Q){if(typeof Q!="object")throw new TypeError(Q+"must be object");Object.keys(Q).forEach(function(oe){P[oe]=Q[oe]})}}),P}function s(P,ne,Q){return[].concat(P.slice(0,ne),Q,P.slice(ne+1))}function a(P){return!(P>=55296&&P<=57343||P>=64976&&P<=65007||(P&65535)===65535||(P&65535)===65534||P>=0&&P<=8||P===11||P>=14&&P<=31||P>=127&&P<=159||P>1114111)}function l(P){if(P>65535){P-=65536;var ne=55296+(P>>10),Q=56320+(P&1023);return String.fromCharCode(ne,Q)}return String.fromCharCode(P)}var c=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,u=/&([a-z#][a-z0-9]{1,31});/gi,d=new RegExp(c.source+"|"+u.source,"gi"),f=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i,p=m8;function h(P,ne){var Q=0;return o(p,ne)?p[ne]:ne.charCodeAt(0)===35&&f.test(ne)&&(Q=ne[1].toLowerCase()==="x"?parseInt(ne.slice(2),16):parseInt(ne.slice(1),10),a(Q))?l(Q):P}function y(P){return P.indexOf("\\")<0?P:P.replace(c,"$1")}function m(P){return P.indexOf("\\")<0&&P.indexOf("&")<0?P:P.replace(d,function(ne,Q,oe){return Q||h(ne,oe)})}var w=/[&<>"]/,x=/[&<>"]/g,$={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function S(P){return $[P]}function I(P){return w.test(P)?P.replace(x,S):P}var E=/[.?*+^$[\]\\(){}|-]/g;function L(P){return P.replace(E,"\\$&")}function T(P){switch(P){case 9:case 32:return!0}return!1}function F(P){if(P>=8192&&P<=8202)return!0;switch(P){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}var j=om;function U(P){return j.test(P)}function ce(P){switch(P){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function W(P){return P=P.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(P=P.replace(//g,"")),P.toLowerCase().toUpperCase()}t.lib={},t.lib.mdurl=ml,t.lib.ucmicro=g8(),t.assign=i,t.isString=n,t.has=o,t.unescapeMd=y,t.unescapeAll=m,t.isValidEntityCode=a,t.fromCodePoint=l,t.escapeHtml=I,t.arrayReplaceAt=s,t.isSpace=T,t.isWhiteSpace=F,t.isMdAsciiPunct=ce,t.isPunctChar=U,t.escapeRE=L,t.normalizeReference=W})(Ot);var I0={},A5e=function(e,n,r){var o,i,s,a,l=-1,c=e.posMax,u=e.pos;for(e.pos=n+1,o=1;e.pos<c;){if(s=e.src.charCodeAt(e.pos),s===93&&(o--,o===0)){i=!0;break}if(a=e.pos,e.md.inline.skipToken(e),s===91){if(a===e.pos-1)o++;else if(r)return e.pos=u,-1}}return i&&(l=e.pos),e.pos=u,l},H3=Ot.unescapeAll,N5e=function(e,n,r){var o,i,s=0,a=n,l={ok:!1,pos:0,lines:0,str:""};if(e.charCodeAt(n)===60){for(n++;n<r;){if(o=e.charCodeAt(n),o===10)return l;if(o===62)return l.pos=n+1,l.str=H3(e.slice(a+1,n)),l.ok=!0,l;if(o===92&&n+1<r){n+=2;continue}n++}return l}for(i=0;n<r&&(o=e.charCodeAt(n),!(o===32||o<32||o===127));){if(o===92&&n+1<r){n+=2;continue}if(o===40&&i++,o===41){if(i===0)break;i--}n++}return a===n||i!==0||(l.str=H3(e.slice(a,n)),l.lines=s,l.pos=n,l.ok=!0),l},R5e=Ot.unescapeAll,P5e=function(e,n,r){var o,i,s=0,a=n,l={ok:!1,pos:0,lines:0,str:""};if(n>=r||(i=e.charCodeAt(n),i!==34&&i!==39&&i!==40))return l;for(n++,i===40&&(i=41);n<r;){if(o=e.charCodeAt(n),o===i)return l.pos=n+1,l.lines=s,l.str=R5e(e.slice(a+1,n)),l.ok=!0,l;o===10?s++:o===92&&n+1<r&&(n++,e.charCodeAt(n)===10&&s++),n++}return l};I0.parseLinkLabel=A5e;I0.parseLinkDestination=N5e;I0.parseLinkTitle=P5e;var O5e=Ot.assign,I5e=Ot.unescapeAll,_c=Ot.escapeHtml,cs={};cs.code_inline=function(t,e,n,r,o){var i=t[e];return"<code"+o.renderAttrs(i)+">"+_c(t[e].content)+"</code>"};cs.code_block=function(t,e,n,r,o){var i=t[e];return"<pre"+o.renderAttrs(i)+"><code>"+_c(t[e].content)+`</code></pre>
`};cs.fence=function(t,e,n,r,o){var i=t[e],s=i.info?I5e(i.info).trim():"",a="",l,c,u,d;return s&&(a=s.split(/\s+/g)[0]),n.highlight?l=n.highlight(i.content,a)||_c(i.content):l=_c(i.content),l.indexOf("<pre")===0?l+`
`:s?(c=i.attrIndex("class"),u=i.attrs?i.attrs.slice():[],c<0?u.push(["class",n.langPrefix+a]):u[c][1]+=" "+n.langPrefix+a,d={attrs:u},"<pre><code"+o.renderAttrs(d)+">"+l+`</code></pre>
`):"<pre><code"+o.renderAttrs(i)+">"+l+`</code></pre>
`};cs.image=function(t,e,n,r,o){var i=t[e];return i.attrs[i.attrIndex("alt")][1]=o.renderInlineAsText(i.children,n,r),o.renderToken(t,e,n)};cs.hardbreak=function(t,e,n){return n.xhtmlOut?`<br />
`:`<br>
`};cs.softbreak=function(t,e,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};cs.text=function(t,e){return _c(t[e].content)};cs.html_block=function(t,e){return t[e].content};cs.html_inline=function(t,e){return t[e].content};function Fd(){this.rules=O5e({},cs)}Fd.prototype.renderAttrs=function(e){var n,r,o;if(!e.attrs)return"";for(o="",n=0,r=e.attrs.length;n<r;n++)o+=" "+_c(e.attrs[n][0])+'="'+_c(e.attrs[n][1])+'"';return o};Fd.prototype.renderToken=function(e,n,r){var o,i="",s=!1,a=e[n];return a.hidden?"":(a.block&&a.nesting!==-1&&n&&e[n-1].hidden&&(i+=`
`),i+=(a.nesting===-1?"</":"<")+a.tag,i+=this.renderAttrs(a),a.nesting===0&&r.xhtmlOut&&(i+=" /"),a.block&&(s=!0,a.nesting===1&&n+1<e.length&&(o=e[n+1],(o.type==="inline"||o.hidden||o.nesting===-1&&o.tag===a.tag)&&(s=!1))),i+=s?`>
`:">",i)};Fd.prototype.renderInline=function(t,e,n){for(var r,o="",i=this.rules,s=0,a=t.length;s<a;s++)r=t[s].type,typeof i[r]!="undefined"?o+=i[r](t,s,e,n,this):o+=this.renderToken(t,s,e);return o};Fd.prototype.renderInlineAsText=function(t,e,n){for(var r="",o=0,i=t.length;o<i;o++)t[o].type==="text"?r+=t[o].content:t[o].type==="image"&&(r+=this.renderInlineAsText(t[o].children,e,n));return r};Fd.prototype.render=function(t,e,n){var r,o,i,s="",a=this.rules;for(r=0,o=t.length;r<o;r++)i=t[r].type,i==="inline"?s+=this.renderInline(t[r].children,e,n):typeof a[i]!="undefined"?s+=a[t[r].type](t,r,e,n,this):s+=this.renderToken(t,r,e,n);return s};var D5e=Fd;function gi(){this.__rules__=[],this.__cache__=null}gi.prototype.__find__=function(t){for(var e=0;e<this.__rules__.length;e++)if(this.__rules__[e].name===t)return e;return-1};gi.prototype.__compile__=function(){var t=this,e=[""];t.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(r){e.indexOf(r)<0&&e.push(r)})}),t.__cache__={},e.forEach(function(n){t.__cache__[n]=[],t.__rules__.forEach(function(r){r.enabled&&(n&&r.alt.indexOf(n)<0||t.__cache__[n].push(r.fn))})})};gi.prototype.at=function(t,e,n){var r=this.__find__(t),o=n||{};if(r===-1)throw new Error("Parser rule not found: "+t);this.__rules__[r].fn=e,this.__rules__[r].alt=o.alt||[],this.__cache__=null};gi.prototype.before=function(t,e,n,r){var o=this.__find__(t),i=r||{};if(o===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(o,0,{name:e,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};gi.prototype.after=function(t,e,n,r){var o=this.__find__(t),i=r||{};if(o===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(o+1,0,{name:e,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};gi.prototype.push=function(t,e,n){var r=n||{};this.__rules__.push({name:t,enabled:!0,fn:e,alt:r.alt||[]}),this.__cache__=null};gi.prototype.enable=function(t,e){Array.isArray(t)||(t=[t]);var n=[];return t.forEach(function(r){var o=this.__find__(r);if(o<0){if(e)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[o].enabled=!0,n.push(r)},this),this.__cache__=null,n};gi.prototype.enableOnly=function(t,e){Array.isArray(t)||(t=[t]),this.__rules__.forEach(function(n){n.enabled=!1}),this.enable(t,e)};gi.prototype.disable=function(t,e){Array.isArray(t)||(t=[t]);var n=[];return t.forEach(function(r){var o=this.__find__(r);if(o<0){if(e)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[o].enabled=!1,n.push(r)},this),this.__cache__=null,n};gi.prototype.getRules=function(t){return this.__cache__===null&&this.__compile__(),this.__cache__[t]||[]};var LS=gi,M5e=/\r\n?|\n/g,L5e=/\0/g,F5e=function(e){var n;n=e.src.replace(M5e,`
`),n=n.replace(L5e,""),e.src=n},B5e=function(e){var n;e.inlineMode?(n=new e.Token("inline","",0),n.content=e.src,n.map=[0,1],n.children=[],e.tokens.push(n)):e.md.block.parse(e.src,e.md,e.env,e.tokens)},j5e=function(e){var n=e.tokens,r,o,i;for(o=0,i=n.length;o<i;o++)r=n[o],r.type==="inline"&&e.md.inline.parse(r.content,e.md,e.env,r.children)},z5e=Ot.arrayReplaceAt;function q5e(t){return/^<a[>\s]/i.test(t)}function W5e(t){return/^<\/a\s*>/i.test(t)}var U5e=function(e){var n,r,o,i,s,a,l,c,u,d,f,p,h,y,m,w,x=e.tokens,$;if(e.md.options.linkify){for(r=0,o=x.length;r<o;r++)if(!(x[r].type!=="inline"||!e.md.linkify.pretest(x[r].content)))for(i=x[r].children,h=0,n=i.length-1;n>=0;n--){if(a=i[n],a.type==="link_close"){for(n--;i[n].level!==a.level&&i[n].type!=="link_open";)n--;continue}if(a.type==="html_inline"&&(q5e(a.content)&&h>0&&h--,W5e(a.content)&&h++),!(h>0)&&a.type==="text"&&e.md.linkify.test(a.content)){for(u=a.content,$=e.md.linkify.match(u),l=[],p=a.level,f=0,c=0;c<$.length;c++)y=$[c].url,m=e.md.normalizeLink(y),e.md.validateLink(m)&&(w=$[c].text,$[c].schema?$[c].schema==="mailto:"&&!/^mailto:/i.test(w)?w=e.md.normalizeLinkText("mailto:"+w).replace(/^mailto:/,""):w=e.md.normalizeLinkText(w):w=e.md.normalizeLinkText("http://"+w).replace(/^http:\/\//,""),d=$[c].index,d>f&&(s=new e.Token("text","",0),s.content=u.slice(f,d),s.level=p,l.push(s)),s=new e.Token("link_open","a",1),s.attrs=[["href",m]],s.level=p++,s.markup="linkify",s.info="auto",l.push(s),s=new e.Token("text","",0),s.content=w,s.level=p,l.push(s),s=new e.Token("link_close","a",-1),s.level=--p,s.markup="linkify",s.info="auto",l.push(s),f=$[c].lastIndex);f<u.length&&(s=new e.Token("text","",0),s.content=u.slice(f),s.level=p,l.push(s)),x[r].children=i=z5e(i,n,l)}}}},y8=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,V5e=/\((c|tm|r|p)\)/i,H5e=/\((c|tm|r|p)\)/ig,K5e={c:"",r:"",p:"",tm:""};function G5e(t,e){return K5e[e.toLowerCase()]}function Z5e(t){var e,n,r=0;for(e=t.length-1;e>=0;e--)n=t[e],n.type==="text"&&!r&&(n.content=n.content.replace(H5e,G5e)),n.type==="link_open"&&n.info==="auto"&&r--,n.type==="link_close"&&n.info==="auto"&&r++}function Y5e(t){var e,n,r=0;for(e=t.length-1;e>=0;e--)n=t[e],n.type==="text"&&!r&&y8.test(n.content)&&(n.content=n.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---([^-]|$)/mg,"$1$2").replace(/(^|\s)--(\s|$)/mg,"$1$2").replace(/(^|[^-\s])--([^-\s]|$)/mg,"$1$2")),n.type==="link_open"&&n.info==="auto"&&r--,n.type==="link_close"&&n.info==="auto"&&r++}var J5e=function(e){var n;if(e.md.options.typographer)for(n=e.tokens.length-1;n>=0;n--)e.tokens[n].type==="inline"&&(V5e.test(e.tokens[n].content)&&Z5e(e.tokens[n].children),y8.test(e.tokens[n].content)&&Y5e(e.tokens[n].children))},K3=Ot.isWhiteSpace,G3=Ot.isPunctChar,Z3=Ot.isMdAsciiPunct,X5e=/['"]/,Y3=/['"]/g,J3="";function ng(t,e,n){return t.substr(0,e)+n+t.substr(e+1)}function Q5e(t,e){var n,r,o,i,s,a,l,c,u,d,f,p,h,y,m,w,x,$,S,I,E;for(S=[],n=0;n<t.length;n++){for(r=t[n],l=t[n].level,x=S.length-1;x>=0&&!(S[x].level<=l);x--);if(S.length=x+1,r.type==="text"){o=r.content,s=0,a=o.length;e:for(;s<a&&(Y3.lastIndex=s,i=Y3.exec(o),!!i);){if(m=w=!0,s=i.index+1,$=i[0]==="'",u=32,i.index-1>=0)u=o.charCodeAt(i.index-1);else for(x=n-1;x>=0&&!(t[x].type==="softbreak"||t[x].type==="hardbreak");x--)if(t[x].type==="text"){u=t[x].content.charCodeAt(t[x].content.length-1);break}if(d=32,s<a)d=o.charCodeAt(s);else for(x=n+1;x<t.length&&!(t[x].type==="softbreak"||t[x].type==="hardbreak");x++)if(t[x].type==="text"){d=t[x].content.charCodeAt(0);break}if(f=Z3(u)||G3(String.fromCharCode(u)),p=Z3(d)||G3(String.fromCharCode(d)),h=K3(u),y=K3(d),y?m=!1:p&&(h||f||(m=!1)),h?w=!1:f&&(y||p||(w=!1)),d===34&&i[0]==='"'&&u>=48&&u<=57&&(w=m=!1),m&&w&&(m=!1,w=p),!m&&!w){$&&(r.content=ng(r.content,i.index,J3));continue}if(w){for(x=S.length-1;x>=0&&(c=S[x],!(S[x].level<l));x--)if(c.single===$&&S[x].level===l){c=S[x],$?(I=e.md.options.quotes[2],E=e.md.options.quotes[3]):(I=e.md.options.quotes[0],E=e.md.options.quotes[1]),r.content=ng(r.content,i.index,E),t[c.token].content=ng(t[c.token].content,c.pos,I),s+=E.length-1,c.token===n&&(s+=I.length-1),o=r.content,a=o.length,S.length=x;continue e}}m?S.push({token:n,pos:i.index,single:$,level:l}):w&&$&&(r.content=ng(r.content,i.index,J3))}}}}var eMe=function(e){var n;if(e.md.options.typographer)for(n=e.tokens.length-1;n>=0;n--)e.tokens[n].type!=="inline"||!X5e.test(e.tokens[n].content)||Q5e(e.tokens[n].children,e)};function Bd(t,e,n){this.type=t,this.tag=e,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}Bd.prototype.attrIndex=function(e){var n,r,o;if(!this.attrs)return-1;for(n=this.attrs,r=0,o=n.length;r<o;r++)if(n[r][0]===e)return r;return-1};Bd.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]};Bd.prototype.attrSet=function(e,n){var r=this.attrIndex(e),o=[e,n];r<0?this.attrPush(o):this.attrs[r]=o};Bd.prototype.attrGet=function(e){var n=this.attrIndex(e),r=null;return n>=0&&(r=this.attrs[n][1]),r};Bd.prototype.attrJoin=function(e,n){var r=this.attrIndex(e);r<0?this.attrPush([e,n]):this.attrs[r][1]=this.attrs[r][1]+" "+n};var D0=Bd,Cx=Ws(D0),tMe=D0;function b8(t,e,n){this.src=t,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=e}b8.prototype.Token=tMe;var nMe=b8,rMe=LS,cw=[["normalize",F5e],["block",B5e],["inline",j5e],["linkify",U5e],["replacements",J5e],["smartquotes",eMe]];function FS(){this.ruler=new rMe;for(var t=0;t<cw.length;t++)this.ruler.push(cw[t][0],cw[t][1])}FS.prototype.process=function(t){var e,n,r;for(r=this.ruler.getRules(""),e=0,n=r.length;e<n;e++)r[e](t)};FS.prototype.State=nMe;var oMe=FS,iMe=Ot.isSpace;function uw(t,e){var n=t.bMarks[e]+t.blkIndent,r=t.eMarks[e];return t.src.substr(n,r-n)}function X3(t){var e=[],n=0,r=t.length,o,i=0,s=0,a=!1,l=0;for(o=t.charCodeAt(n);n<r;)o===96?a?(a=!1,l=n):i%2===0&&(a=!0,l=n):o===124&&i%2===0&&!a&&(e.push(t.substring(s,n)),s=n+1),o===92?i++:i=0,n++,n===r&&a&&(a=!1,n=l+1),o=t.charCodeAt(n);return e.push(t.substring(s)),e}var sMe=function(e,n,r,o){var i,s,a,l,c,u,d,f,p,h,y,m;if(n+2>r||(c=n+1,e.sCount[c]<e.blkIndent)||e.sCount[c]-e.blkIndent>=4||(a=e.bMarks[c]+e.tShift[c],a>=e.eMarks[c])||(i=e.src.charCodeAt(a++),i!==124&&i!==45&&i!==58))return!1;for(;a<e.eMarks[c];){if(i=e.src.charCodeAt(a),i!==124&&i!==45&&i!==58&&!iMe(i))return!1;a++}for(s=uw(e,n+1),u=s.split("|"),p=[],l=0;l<u.length;l++){if(h=u[l].trim(),!h){if(l===0||l===u.length-1)continue;return!1}if(!/^:?-+:?$/.test(h))return!1;h.charCodeAt(h.length-1)===58?p.push(h.charCodeAt(0)===58?"center":"right"):h.charCodeAt(0)===58?p.push("left"):p.push("")}if(s=uw(e,n).trim(),s.indexOf("|")===-1||e.sCount[n]-e.blkIndent>=4||(u=X3(s.replace(/^\||\|$/g,"")),d=u.length,d>p.length))return!1;if(o)return!0;for(f=e.push("table_open","table",1),f.map=y=[n,0],f=e.push("thead_open","thead",1),f.map=[n,n+1],f=e.push("tr_open","tr",1),f.map=[n,n+1],l=0;l<u.length;l++)f=e.push("th_open","th",1),f.map=[n,n+1],p[l]&&(f.attrs=[["style","text-align:"+p[l]]]),f=e.push("inline","",0),f.content=u[l].trim(),f.map=[n,n+1],f.children=[],f=e.push("th_close","th",-1);for(f=e.push("tr_close","tr",-1),f=e.push("thead_close","thead",-1),f=e.push("tbody_open","tbody",1),f.map=m=[n+2,0],c=n+2;c<r&&!(e.sCount[c]<e.blkIndent||(s=uw(e,c).trim(),s.indexOf("|")===-1)||e.sCount[c]-e.blkIndent>=4);c++){for(u=X3(s.replace(/^\||\|$/g,"")),f=e.push("tr_open","tr",1),l=0;l<d;l++)f=e.push("td_open","td",1),p[l]&&(f.attrs=[["style","text-align:"+p[l]]]),f=e.push("inline","",0),f.content=u[l]?u[l].trim():"",f.children=[],f=e.push("td_close","td",-1);f=e.push("tr_close","tr",-1)}return f=e.push("tbody_close","tbody",-1),f=e.push("table_close","table",-1),y[1]=m[1]=c,e.line=c,!0},aMe=function(e,n,r){var o,i,s;if(e.sCount[n]-e.blkIndent<4)return!1;for(i=o=n+1;o<r;){if(e.isEmpty(o)){o++;continue}if(e.sCount[o]-e.blkIndent>=4){o++,i=o;continue}break}return e.line=i,s=e.push("code_block","code",0),s.content=e.getLines(n,i,4+e.blkIndent,!0),s.map=[n,e.line],!0},lMe=function(e,n,r,o){var i,s,a,l,c,u,d,f=!1,p=e.bMarks[n]+e.tShift[n],h=e.eMarks[n];if(e.sCount[n]-e.blkIndent>=4||p+3>h||(i=e.src.charCodeAt(p),i!==126&&i!==96)||(c=p,p=e.skipChars(p,i),s=p-c,s<3)||(d=e.src.slice(c,p),a=e.src.slice(p,h),i===96&&a.indexOf(String.fromCharCode(i))>=0))return!1;if(o)return!0;for(l=n;l++,!(l>=r||(p=c=e.bMarks[l]+e.tShift[l],h=e.eMarks[l],p<h&&e.sCount[l]<e.blkIndent));)if(e.src.charCodeAt(p)===i&&!(e.sCount[l]-e.blkIndent>=4)&&(p=e.skipChars(p,i),!(p-c<s)&&(p=e.skipSpaces(p),!(p<h)))){f=!0;break}return s=e.sCount[n],e.line=l+(f?1:0),u=e.push("fence","code",0),u.info=a,u.content=e.getLines(n+1,l,s,!0),u.markup=d,u.map=[n,e.line],!0},Q3=Ot.isSpace,cMe=function(e,n,r,o){var i,s,a,l,c,u,d,f,p,h,y,m,w,x,$,S,I,E,L,T,F=e.lineMax,j=e.bMarks[n]+e.tShift[n],U=e.eMarks[n];if(e.sCount[n]-e.blkIndent>=4||e.src.charCodeAt(j++)!==62)return!1;if(o)return!0;for(l=p=e.sCount[n]+j-(e.bMarks[n]+e.tShift[n]),e.src.charCodeAt(j)===32?(j++,l++,p++,i=!1,S=!0):e.src.charCodeAt(j)===9?(S=!0,(e.bsCount[n]+p)%4===3?(j++,l++,p++,i=!1):i=!0):S=!1,h=[e.bMarks[n]],e.bMarks[n]=j;j<U&&(s=e.src.charCodeAt(j),Q3(s));){s===9?p+=4-(p+e.bsCount[n]+(i?1:0))%4:p++;j++}for(y=[e.bsCount[n]],e.bsCount[n]=e.sCount[n]+1+(S?1:0),u=j>=U,x=[e.sCount[n]],e.sCount[n]=p-l,$=[e.tShift[n]],e.tShift[n]=j-e.bMarks[n],E=e.md.block.ruler.getRules("blockquote"),w=e.parentType,e.parentType="blockquote",T=!1,f=n+1;f<r&&(e.sCount[f]<e.blkIndent&&(T=!0),j=e.bMarks[f]+e.tShift[f],U=e.eMarks[f],!(j>=U));f++){if(e.src.charCodeAt(j++)===62&&!T){for(l=p=e.sCount[f]+j-(e.bMarks[f]+e.tShift[f]),e.src.charCodeAt(j)===32?(j++,l++,p++,i=!1,S=!0):e.src.charCodeAt(j)===9?(S=!0,(e.bsCount[f]+p)%4===3?(j++,l++,p++,i=!1):i=!0):S=!1,h.push(e.bMarks[f]),e.bMarks[f]=j;j<U&&(s=e.src.charCodeAt(j),Q3(s));){s===9?p+=4-(p+e.bsCount[f]+(i?1:0))%4:p++;j++}u=j>=U,y.push(e.bsCount[f]),e.bsCount[f]=e.sCount[f]+1+(S?1:0),x.push(e.sCount[f]),e.sCount[f]=p-l,$.push(e.tShift[f]),e.tShift[f]=j-e.bMarks[f];continue}if(u)break;for(I=!1,a=0,c=E.length;a<c;a++)if(E[a](e,f,r,!0)){I=!0;break}if(I){e.lineMax=f,e.blkIndent!==0&&(h.push(e.bMarks[f]),y.push(e.bsCount[f]),$.push(e.tShift[f]),x.push(e.sCount[f]),e.sCount[f]-=e.blkIndent);break}h.push(e.bMarks[f]),y.push(e.bsCount[f]),$.push(e.tShift[f]),x.push(e.sCount[f]),e.sCount[f]=-1}for(m=e.blkIndent,e.blkIndent=0,L=e.push("blockquote_open","blockquote",1),L.markup=">",L.map=d=[n,0],e.md.block.tokenize(e,n,f),L=e.push("blockquote_close","blockquote",-1),L.markup=">",e.lineMax=F,e.parentType=w,d[1]=e.line,a=0;a<$.length;a++)e.bMarks[a+n]=h[a],e.tShift[a+n]=$[a],e.sCount[a+n]=x[a],e.bsCount[a+n]=y[a];return e.blkIndent=m,!0},uMe=Ot.isSpace,dMe=function(e,n,r,o){var i,s,a,l,c=e.bMarks[n]+e.tShift[n],u=e.eMarks[n];if(e.sCount[n]-e.blkIndent>=4||(i=e.src.charCodeAt(c++),i!==42&&i!==45&&i!==95))return!1;for(s=1;c<u;){if(a=e.src.charCodeAt(c++),a!==i&&!uMe(a))return!1;a===i&&s++}return s<3?!1:(o||(e.line=n+1,l=e.push("hr","hr",0),l.map=[n,e.line],l.markup=Array(s+1).join(String.fromCharCode(i))),!0)},v8=Ot.isSpace;function eN(t,e){var n,r,o,i;return r=t.bMarks[e]+t.tShift[e],o=t.eMarks[e],n=t.src.charCodeAt(r++),n!==42&&n!==45&&n!==43||r<o&&(i=t.src.charCodeAt(r),!v8(i))?-1:r}function tN(t,e){var n,r=t.bMarks[e]+t.tShift[e],o=r,i=t.eMarks[e];if(o+1>=i||(n=t.src.charCodeAt(o++),n<48||n>57))return-1;for(;;){if(o>=i)return-1;if(n=t.src.charCodeAt(o++),n>=48&&n<=57){if(o-r>=10)return-1;continue}if(n===41||n===46)break;return-1}return o<i&&(n=t.src.charCodeAt(o),!v8(n))?-1:o}function fMe(t,e){var n,r,o=t.level+2;for(n=e+2,r=t.tokens.length-2;n<r;n++)t.tokens[n].level===o&&t.tokens[n].type==="paragraph_open"&&(t.tokens[n+2].hidden=!0,t.tokens[n].hidden=!0,n+=2)}var pMe=function(e,n,r,o){var i,s,a,l,c,u,d,f,p,h,y,m,w,x,$,S,I,E,L,T,F,j,U,ce,W,P,ne,Q,oe=!1,nt=!0;if(e.sCount[n]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[n]-e.listIndent>=4&&e.sCount[n]<e.blkIndent)return!1;if(o&&e.parentType==="paragraph"&&e.tShift[n]>=e.blkIndent&&(oe=!0),(U=tN(e,n))>=0){if(d=!0,W=e.bMarks[n]+e.tShift[n],w=Number(e.src.substr(W,U-W-1)),oe&&w!==1)return!1}else if((U=eN(e,n))>=0)d=!1;else return!1;if(oe&&e.skipSpaces(U)>=e.eMarks[n])return!1;if(m=e.src.charCodeAt(U-1),o)return!0;for(y=e.tokens.length,d?(Q=e.push("ordered_list_open","ol",1),w!==1&&(Q.attrs=[["start",w]])):Q=e.push("bullet_list_open","ul",1),Q.map=h=[n,0],Q.markup=String.fromCharCode(m),$=n,ce=!1,ne=e.md.block.ruler.getRules("list"),E=e.parentType,e.parentType="list";$<r;){for(j=U,x=e.eMarks[$],u=S=e.sCount[$]+U-(e.bMarks[n]+e.tShift[n]);j<x;){if(i=e.src.charCodeAt(j),i===9)S+=4-(S+e.bsCount[$])%4;else if(i===32)S++;else break;j++}if(s=j,s>=x?c=1:c=S-u,c>4&&(c=1),l=u+c,Q=e.push("list_item_open","li",1),Q.markup=String.fromCharCode(m),Q.map=f=[n,0],F=e.tight,T=e.tShift[n],L=e.sCount[n],I=e.listIndent,e.listIndent=e.blkIndent,e.blkIndent=l,e.tight=!0,e.tShift[n]=s-e.bMarks[n],e.sCount[n]=S,s>=x&&e.isEmpty(n+1)?e.line=Math.min(e.line+2,r):e.md.block.tokenize(e,n,r,!0),(!e.tight||ce)&&(nt=!1),ce=e.line-n>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=I,e.tShift[n]=T,e.sCount[n]=L,e.tight=F,Q=e.push("list_item_close","li",-1),Q.markup=String.fromCharCode(m),$=n=e.line,f[1]=$,s=e.bMarks[n],$>=r||e.sCount[$]<e.blkIndent||e.sCount[n]-e.blkIndent>=4)break;for(P=!1,a=0,p=ne.length;a<p;a++)if(ne[a](e,$,r,!0)){P=!0;break}if(P)break;if(d){if(U=tN(e,$),U<0)break}else if(U=eN(e,$),U<0)break;if(m!==e.src.charCodeAt(U-1))break}return d?Q=e.push("ordered_list_close","ol",-1):Q=e.push("bullet_list_close","ul",-1),Q.markup=String.fromCharCode(m),h[1]=$,e.line=$,e.parentType=E,nt&&fMe(e,y),!0},hMe=Ot.normalizeReference,rg=Ot.isSpace,mMe=function(e,n,r,o){var i,s,a,l,c,u,d,f,p,h,y,m,w,x,$,S,I=0,E=e.bMarks[n]+e.tShift[n],L=e.eMarks[n],T=n+1;if(e.sCount[n]-e.blkIndent>=4||e.src.charCodeAt(E)!==91)return!1;for(;++E<L;)if(e.src.charCodeAt(E)===93&&e.src.charCodeAt(E-1)!==92){if(E+1===L||e.src.charCodeAt(E+1)!==58)return!1;break}for(l=e.lineMax,$=e.md.block.ruler.getRules("reference"),h=e.parentType,e.parentType="reference";T<l&&!e.isEmpty(T);T++)if(!(e.sCount[T]-e.blkIndent>3)&&!(e.sCount[T]<0)){for(x=!1,u=0,d=$.length;u<d;u++)if($[u](e,T,l,!0)){x=!0;break}if(x)break}for(w=e.getLines(n,T,e.blkIndent,!1).trim(),L=w.length,E=1;E<L;E++){if(i=w.charCodeAt(E),i===91)return!1;if(i===93){p=E;break}else i===10?I++:i===92&&(E++,E<L&&w.charCodeAt(E)===10&&I++)}if(p<0||w.charCodeAt(p+1)!==58)return!1;for(E=p+2;E<L;E++)if(i=w.charCodeAt(E),i===10)I++;else if(!rg(i))break;if(y=e.md.helpers.parseLinkDestination(w,E,L),!y.ok||(c=e.md.normalizeLink(y.str),!e.md.validateLink(c)))return!1;for(E=y.pos,I+=y.lines,s=E,a=I,m=E;E<L;E++)if(i=w.charCodeAt(E),i===10)I++;else if(!rg(i))break;for(y=e.md.helpers.parseLinkTitle(w,E,L),E<L&&m!==E&&y.ok?(S=y.str,E=y.pos,I+=y.lines):(S="",E=s,I=a);E<L&&(i=w.charCodeAt(E),!!rg(i));)E++;if(E<L&&w.charCodeAt(E)!==10&&S)for(S="",E=s,I=a;E<L&&(i=w.charCodeAt(E),!!rg(i));)E++;return E<L&&w.charCodeAt(E)!==10||(f=hMe(w.slice(1,p)),!f)?!1:(o||(typeof e.env.references=="undefined"&&(e.env.references={}),typeof e.env.references[f]=="undefined"&&(e.env.references[f]={title:S,href:c}),e.parentType=h,e.line=n+I+1),!0)},nN=Ot.isSpace,gMe=function(e,n,r,o){var i,s,a,l,c=e.bMarks[n]+e.tShift[n],u=e.eMarks[n];if(e.sCount[n]-e.blkIndent>=4||(i=e.src.charCodeAt(c),i!==35||c>=u))return!1;for(s=1,i=e.src.charCodeAt(++c);i===35&&c<u&&s<=6;)s++,i=e.src.charCodeAt(++c);return s>6||c<u&&!nN(i)?!1:(o||(u=e.skipSpacesBack(u,c),a=e.skipCharsBack(u,35,c),a>c&&nN(e.src.charCodeAt(a-1))&&(u=a),e.line=n+1,l=e.push("heading_open","h"+String(s),1),l.markup="########".slice(0,s),l.map=[n,e.line],l=e.push("inline","",0),l.content=e.src.slice(c,u).trim(),l.map=[n,e.line],l.children=[],l=e.push("heading_close","h"+String(s),-1),l.markup="########".slice(0,s)),!0)},yMe=function(e,n,r){var o,i,s,a,l,c,u,d,f,p=n+1,h,y=e.md.block.ruler.getRules("paragraph");if(e.sCount[n]-e.blkIndent>=4)return!1;for(h=e.parentType,e.parentType="paragraph";p<r&&!e.isEmpty(p);p++)if(!(e.sCount[p]-e.blkIndent>3)){if(e.sCount[p]>=e.blkIndent&&(c=e.bMarks[p]+e.tShift[p],u=e.eMarks[p],c<u&&(f=e.src.charCodeAt(c),(f===45||f===61)&&(c=e.skipChars(c,f),c=e.skipSpaces(c),c>=u)))){d=f===61?1:2;break}if(!(e.sCount[p]<0)){for(i=!1,s=0,a=y.length;s<a;s++)if(y[s](e,p,r,!0)){i=!0;break}if(i)break}}return d?(o=e.getLines(n,p,e.blkIndent,!1).trim(),e.line=p+1,l=e.push("heading_open","h"+String(d),1),l.markup=String.fromCharCode(f),l.map=[n,e.line],l=e.push("inline","",0),l.content=o,l.map=[n,e.line-1],l.children=[],l=e.push("heading_close","h"+String(d),-1),l.markup=String.fromCharCode(f),e.parentType=h,!0):!1},bMe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","meta","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],M0={},vMe="[a-zA-Z_:][a-zA-Z0-9:._-]*",wMe="[^\"'=<>`\\x00-\\x20]+",_Me="'[^']*'",xMe='"[^"]*"',kMe="(?:"+wMe+"|"+_Me+"|"+xMe+")",$Me="(?:\\s+"+vMe+"(?:\\s*=\\s*"+kMe+")?)",w8="<[A-Za-z][A-Za-z0-9\\-]*"+$Me+"*\\s*\\/?>",_8="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",SMe="<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->",EMe="<[?].*?[?]>",CMe="<![A-Z]+\\s+[^>]*>",TMe="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",AMe=new RegExp("^(?:"+w8+"|"+_8+"|"+SMe+"|"+EMe+"|"+CMe+"|"+TMe+")"),NMe=new RegExp("^(?:"+w8+"|"+_8+")");M0.HTML_TAG_RE=AMe;M0.HTML_OPEN_CLOSE_TAG_RE=NMe;var RMe=bMe,PMe=M0.HTML_OPEN_CLOSE_TAG_RE,Yc=[[/^<(script|pre|style)(?=(\s|>|$))/i,/<\/(script|pre|style)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+RMe.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(PMe.source+"\\s*$"),/^$/,!1]],OMe=function(e,n,r,o){var i,s,a,l,c=e.bMarks[n]+e.tShift[n],u=e.eMarks[n];if(e.sCount[n]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(c)!==60)return!1;for(l=e.src.slice(c,u),i=0;i<Yc.length&&!Yc[i][0].test(l);i++);if(i===Yc.length)return!1;if(o)return Yc[i][2];if(s=n+1,!Yc[i][1].test(l)){for(;s<r&&!(e.sCount[s]<e.blkIndent);s++)if(c=e.bMarks[s]+e.tShift[s],u=e.eMarks[s],l=e.src.slice(c,u),Yc[i][1].test(l)){l.length!==0&&s++;break}}return e.line=s,a=e.push("html_block","",0),a.map=[n,s],a.content=e.getLines(n,s,e.blkIndent,!0),!0},IMe=function(e,n){var r,o,i,s,a,l,c=n+1,u=e.md.block.ruler.getRules("paragraph"),d=e.lineMax;for(l=e.parentType,e.parentType="paragraph";c<d&&!e.isEmpty(c);c++)if(!(e.sCount[c]-e.blkIndent>3)&&!(e.sCount[c]<0)){for(o=!1,i=0,s=u.length;i<s;i++)if(u[i](e,c,d,!0)){o=!0;break}if(o)break}return r=e.getLines(n,c,e.blkIndent,!1).trim(),e.line=c,a=e.push("paragraph_open","p",1),a.map=[n,e.line],a=e.push("inline","",0),a.content=r,a.map=[n,e.line],a.children=[],a=e.push("paragraph_close","p",-1),e.parentType=l,!0},x8=D0,L0=Ot.isSpace;function us(t,e,n,r){var o,i,s,a,l,c,u,d;for(this.src=t,this.md=e,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0,this.result="",i=this.src,d=!1,s=a=c=u=0,l=i.length;a<l;a++){if(o=i.charCodeAt(a),!d)if(L0(o)){c++,o===9?u+=4-u%4:u++;continue}else d=!0;(o===10||a===l-1)&&(o!==10&&a++,this.bMarks.push(s),this.eMarks.push(a),this.tShift.push(c),this.sCount.push(u),this.bsCount.push(0),d=!1,c=0,u=0,s=a+1)}this.bMarks.push(i.length),this.eMarks.push(i.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}us.prototype.push=function(t,e,n){var r=new x8(t,e,n);return r.block=!0,n<0&&this.level--,r.level=this.level,n>0&&this.level++,this.tokens.push(r),r};us.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]};us.prototype.skipEmptyLines=function(e){for(var n=this.lineMax;e<n&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e};us.prototype.skipSpaces=function(e){for(var n,r=this.src.length;e<r&&(n=this.src.charCodeAt(e),!!L0(n));e++);return e};us.prototype.skipSpacesBack=function(e,n){if(e<=n)return e;for(;e>n;)if(!L0(this.src.charCodeAt(--e)))return e+1;return e};us.prototype.skipChars=function(e,n){for(var r=this.src.length;e<r&&this.src.charCodeAt(e)===n;e++);return e};us.prototype.skipCharsBack=function(e,n,r){if(e<=r)return e;for(;e>r;)if(n!==this.src.charCodeAt(--e))return e+1;return e};us.prototype.getLines=function(e,n,r,o){var i,s,a,l,c,u,d,f=e;if(e>=n)return"";for(u=new Array(n-e),i=0;f<n;f++,i++){for(s=0,d=l=this.bMarks[f],f+1<n||o?c=this.eMarks[f]+1:c=this.eMarks[f];l<c&&s<r;){if(a=this.src.charCodeAt(l),L0(a))a===9?s+=4-(s+this.bsCount[f])%4:s++;else if(l-d<this.tShift[f])s++;else break;l++}s>r?u[i]=new Array(s-r+1).join(" ")+this.src.slice(l,c):u[i]=this.src.slice(l,c)}return u.join("")};us.prototype.Token=x8;var DMe=us,MMe=LS,og=[["table",sMe,["paragraph","reference"]],["code",aMe],["fence",lMe,["paragraph","reference","blockquote","list"]],["blockquote",cMe,["paragraph","reference","blockquote","list"]],["hr",dMe,["paragraph","reference","blockquote","list"]],["list",pMe,["paragraph","reference","blockquote"]],["reference",mMe],["heading",gMe,["paragraph","reference","blockquote"]],["lheading",yMe],["html_block",OMe,["paragraph","reference","blockquote"]],["paragraph",IMe]];function F0(){this.ruler=new MMe;for(var t=0;t<og.length;t++)this.ruler.push(og[t][0],og[t][1],{alt:(og[t][2]||[]).slice()})}F0.prototype.tokenize=function(t,e,n){for(var r,o,i=this.ruler.getRules(""),s=i.length,a=e,l=!1,c=t.md.options.maxNesting;a<n&&(t.line=a=t.skipEmptyLines(a),!(a>=n||t.sCount[a]<t.blkIndent));){if(t.level>=c){t.line=n;break}for(o=0;o<s&&(r=i[o](t,a,n,!1),!r);o++);t.tight=!l,t.isEmpty(t.line-1)&&(l=!0),a=t.line,a<n&&t.isEmpty(a)&&(l=!0,a++,t.line=a)}};F0.prototype.parse=function(t,e,n,r){var o;t&&(o=new this.State(t,e,n,r),this.tokenize(o,o.line,o.lineMax))};F0.prototype.State=DMe;var LMe=F0;function FMe(t){switch(t){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}var BMe=function(e,n){for(var r=e.pos;r<e.posMax&&!FMe(e.src.charCodeAt(r));)r++;return r===e.pos?!1:(n||(e.pending+=e.src.slice(e.pos,r)),e.pos=r,!0)},jMe=Ot.isSpace,zMe=function(e,n){var r,o,i=e.pos;if(e.src.charCodeAt(i)!==10)return!1;for(r=e.pending.length-1,o=e.posMax,n||(r>=0&&e.pending.charCodeAt(r)===32?r>=1&&e.pending.charCodeAt(r-1)===32?(e.pending=e.pending.replace(/ +$/,""),e.push("hardbreak","br",0)):(e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0)):e.push("softbreak","br",0)),i++;i<o&&jMe(e.src.charCodeAt(i));)i++;return e.pos=i,!0},qMe=Ot.isSpace,BS=[];for(var rN=0;rN<256;rN++)BS.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(t){BS[t.charCodeAt(0)]=1});var WMe=function(e,n){var r,o=e.pos,i=e.posMax;if(e.src.charCodeAt(o)!==92)return!1;if(o++,o<i){if(r=e.src.charCodeAt(o),r<256&&BS[r]!==0)return n||(e.pending+=e.src[o]),e.pos+=2,!0;if(r===10){for(n||e.push("hardbreak","br",0),o++;o<i&&(r=e.src.charCodeAt(o),!!qMe(r));)o++;return e.pos=o,!0}}return n||(e.pending+="\\"),e.pos++,!0},UMe=function(e,n){var r,o,i,s,a,l,c=e.pos,u=e.src.charCodeAt(c);if(u!==96)return!1;for(r=c,c++,o=e.posMax;c<o&&e.src.charCodeAt(c)===96;)c++;for(i=e.src.slice(r,c),s=a=c;(s=e.src.indexOf("`",a))!==-1;){for(a=s+1;a<o&&e.src.charCodeAt(a)===96;)a++;if(a-s===i.length)return n||(l=e.push("code_inline","code",0),l.markup=i,l.content=e.src.slice(c,s).replace(/\n/g," ").replace(/^ (.+) $/,"$1")),e.pos=a,!0}return n||(e.pending+=i),e.pos+=i.length,!0},B0={};B0.tokenize=function(e,n){var r,o,i,s,a,l=e.pos,c=e.src.charCodeAt(l);if(n||c!==126||(o=e.scanDelims(e.pos,!0),s=o.length,a=String.fromCharCode(c),s<2))return!1;for(s%2&&(i=e.push("text","",0),i.content=a,s--),r=0;r<s;r+=2)i=e.push("text","",0),i.content=a+a,e.delimiters.push({marker:c,length:0,jump:r,token:e.tokens.length-1,end:-1,open:o.can_open,close:o.can_close});return e.pos+=o.length,!0};function oN(t,e){var n,r,o,i,s,a=[],l=e.length;for(n=0;n<l;n++)o=e[n],o.marker===126&&o.end!==-1&&(i=e[o.end],s=t.tokens[o.token],s.type="s_open",s.tag="s",s.nesting=1,s.markup="~~",s.content="",s=t.tokens[i.token],s.type="s_close",s.tag="s",s.nesting=-1,s.markup="~~",s.content="",t.tokens[i.token-1].type==="text"&&t.tokens[i.token-1].content==="~"&&a.push(i.token-1));for(;a.length;){for(n=a.pop(),r=n+1;r<t.tokens.length&&t.tokens[r].type==="s_close";)r++;r--,n!==r&&(s=t.tokens[r],t.tokens[r]=t.tokens[n],t.tokens[n]=s)}}B0.postProcess=function(e){var n,r=e.tokens_meta,o=e.tokens_meta.length;for(oN(e,e.delimiters),n=0;n<o;n++)r[n]&&r[n].delimiters&&oN(e,r[n].delimiters)};var j0={};j0.tokenize=function(e,n){var r,o,i,s=e.pos,a=e.src.charCodeAt(s);if(n||a!==95&&a!==42)return!1;for(o=e.scanDelims(e.pos,a===42),r=0;r<o.length;r++)i=e.push("text","",0),i.content=String.fromCharCode(a),e.delimiters.push({marker:a,length:o.length,jump:r,token:e.tokens.length-1,end:-1,open:o.can_open,close:o.can_close});return e.pos+=o.length,!0};function iN(t,e){var n,r,o,i,s,a,l=e.length;for(n=l-1;n>=0;n--)r=e[n],!(r.marker!==95&&r.marker!==42)&&r.end!==-1&&(o=e[r.end],a=n>0&&e[n-1].end===r.end+1&&e[n-1].token===r.token-1&&e[r.end+1].token===o.token+1&&e[n-1].marker===r.marker,s=String.fromCharCode(r.marker),i=t.tokens[r.token],i.type=a?"strong_open":"em_open",i.tag=a?"strong":"em",i.nesting=1,i.markup=a?s+s:s,i.content="",i=t.tokens[o.token],i.type=a?"strong_close":"em_close",i.tag=a?"strong":"em",i.nesting=-1,i.markup=a?s+s:s,i.content="",a&&(t.tokens[e[n-1].token].content="",t.tokens[e[r.end+1].token].content="",n--))}j0.postProcess=function(e){var n,r=e.tokens_meta,o=e.tokens_meta.length;for(iN(e,e.delimiters),n=0;n<o;n++)r[n]&&r[n].delimiters&&iN(e,r[n].delimiters)};var VMe=Ot.normalizeReference,dw=Ot.isSpace,HMe=function(e,n){var r,o,i,s,a,l,c,u,d,f,p="",h=e.pos,y=e.posMax,m=e.pos,w=!0;if(e.src.charCodeAt(e.pos)!==91||(a=e.pos+1,s=e.md.helpers.parseLinkLabel(e,e.pos,!0),s<0))return!1;if(l=s+1,l<y&&e.src.charCodeAt(l)===40){for(w=!1,l++;l<y&&(o=e.src.charCodeAt(l),!(!dw(o)&&o!==10));l++);if(l>=y)return!1;for(m=l,c=e.md.helpers.parseLinkDestination(e.src,l,e.posMax),c.ok&&(p=e.md.normalizeLink(c.str),e.md.validateLink(p)?l=c.pos:p=""),m=l;l<y&&(o=e.src.charCodeAt(l),!(!dw(o)&&o!==10));l++);if(c=e.md.helpers.parseLinkTitle(e.src,l,e.posMax),l<y&&m!==l&&c.ok)for(d=c.str,l=c.pos;l<y&&(o=e.src.charCodeAt(l),!(!dw(o)&&o!==10));l++);else d="";(l>=y||e.src.charCodeAt(l)!==41)&&(w=!0),l++}if(w){if(typeof e.env.references=="undefined")return!1;if(l<y&&e.src.charCodeAt(l)===91?(m=l+1,l=e.md.helpers.parseLinkLabel(e,l),l>=0?i=e.src.slice(m,l++):l=s+1):l=s+1,i||(i=e.src.slice(a,s)),u=e.env.references[VMe(i)],!u)return e.pos=h,!1;p=u.href,d=u.title}return n||(e.pos=a,e.posMax=s,f=e.push("link_open","a",1),f.attrs=r=[["href",p]],d&&r.push(["title",d]),e.md.inline.tokenize(e),f=e.push("link_close","a",-1)),e.pos=l,e.posMax=y,!0},KMe=Ot.normalizeReference,fw=Ot.isSpace,GMe=function(e,n){var r,o,i,s,a,l,c,u,d,f,p,h,y,m="",w=e.pos,x=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91||(l=e.pos+2,a=e.md.helpers.parseLinkLabel(e,e.pos+1,!1),a<0))return!1;if(c=a+1,c<x&&e.src.charCodeAt(c)===40){for(c++;c<x&&(o=e.src.charCodeAt(c),!(!fw(o)&&o!==10));c++);if(c>=x)return!1;for(y=c,d=e.md.helpers.parseLinkDestination(e.src,c,e.posMax),d.ok&&(m=e.md.normalizeLink(d.str),e.md.validateLink(m)?c=d.pos:m=""),y=c;c<x&&(o=e.src.charCodeAt(c),!(!fw(o)&&o!==10));c++);if(d=e.md.helpers.parseLinkTitle(e.src,c,e.posMax),c<x&&y!==c&&d.ok)for(f=d.str,c=d.pos;c<x&&(o=e.src.charCodeAt(c),!(!fw(o)&&o!==10));c++);else f="";if(c>=x||e.src.charCodeAt(c)!==41)return e.pos=w,!1;c++}else{if(typeof e.env.references=="undefined")return!1;if(c<x&&e.src.charCodeAt(c)===91?(y=c+1,c=e.md.helpers.parseLinkLabel(e,c),c>=0?s=e.src.slice(y,c++):c=a+1):c=a+1,s||(s=e.src.slice(l,a)),u=e.env.references[KMe(s)],!u)return e.pos=w,!1;m=u.href,f=u.title}return n||(i=e.src.slice(l,a),e.md.inline.parse(i,e.md,e.env,h=[]),p=e.push("image","img",0),p.attrs=r=[["src",m],["alt",""]],p.children=h,p.content=i,f&&r.push(["title",f])),e.pos=c,e.posMax=x,!0},sN=/^<([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/,aN=/^<([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)>/,ZMe=function(e,n){var r,o,i,s,a,l,c=e.pos;return e.src.charCodeAt(c)!==60||(r=e.src.slice(c),r.indexOf(">")<0)?!1:aN.test(r)?(o=r.match(aN),s=o[0].slice(1,-1),a=e.md.normalizeLink(s),e.md.validateLink(a)?(n||(l=e.push("link_open","a",1),l.attrs=[["href",a]],l.markup="autolink",l.info="auto",l=e.push("text","",0),l.content=e.md.normalizeLinkText(s),l=e.push("link_close","a",-1),l.markup="autolink",l.info="auto"),e.pos+=o[0].length,!0):!1):sN.test(r)?(i=r.match(sN),s=i[0].slice(1,-1),a=e.md.normalizeLink("mailto:"+s),e.md.validateLink(a)?(n||(l=e.push("link_open","a",1),l.attrs=[["href",a]],l.markup="autolink",l.info="auto",l=e.push("text","",0),l.content=e.md.normalizeLinkText(s),l=e.push("link_close","a",-1),l.markup="autolink",l.info="auto"),e.pos+=i[0].length,!0):!1):!1},YMe=M0.HTML_TAG_RE;function JMe(t){var e=t|32;return e>=97&&e<=122}var XMe=function(e,n){var r,o,i,s,a=e.pos;return!e.md.options.html||(i=e.posMax,e.src.charCodeAt(a)!==60||a+2>=i)||(r=e.src.charCodeAt(a+1),r!==33&&r!==63&&r!==47&&!JMe(r))||(o=e.src.slice(a).match(YMe),!o)?!1:(n||(s=e.push("html_inline","",0),s.content=e.src.slice(a,a+o[0].length)),e.pos+=o[0].length,!0)},lN=m8,QMe=Ot.has,e4e=Ot.isValidEntityCode,cN=Ot.fromCodePoint,t4e=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,n4e=/^&([a-z][a-z0-9]{1,31});/i,r4e=function(e,n){var r,o,i,s=e.pos,a=e.posMax;if(e.src.charCodeAt(s)!==38)return!1;if(s+1<a){if(r=e.src.charCodeAt(s+1),r===35){if(i=e.src.slice(s).match(t4e),i)return n||(o=i[1][0].toLowerCase()==="x"?parseInt(i[1].slice(1),16):parseInt(i[1],10),e.pending+=e4e(o)?cN(o):cN(65533)),e.pos+=i[0].length,!0}else if(i=e.src.slice(s).match(n4e),i&&QMe(lN,i[1]))return n||(e.pending+=lN[i[1]]),e.pos+=i[0].length,!0}return n||(e.pending+="&"),e.pos++,!0};function uN(t,e){var n,r,o,i,s,a,l,c,u={},d=e.length;for(n=0;n<d;n++)if(o=e[n],o.length=o.length||0,!!o.close){for(u.hasOwnProperty(o.marker)||(u[o.marker]=[-1,-1,-1]),s=u[o.marker][o.length%3],a=-1,r=n-o.jump-1;r>s;r-=i.jump+1)if(i=e[r],i.marker===o.marker&&(a===-1&&(a=r),i.open&&i.end<0&&i.level===o.level&&(l=!1,(i.close||o.open)&&(i.length+o.length)%3===0&&(i.length%3!==0||o.length%3!==0)&&(l=!0),!l))){c=r>0&&!e[r-1].open?e[r-1].jump+1:0,o.jump=n-r+c,o.open=!1,i.end=n,i.jump=c,i.close=!1,a=-1;break}a!==-1&&(u[o.marker][(o.length||0)%3]=a)}}var o4e=function(e){var n,r=e.tokens_meta,o=e.tokens_meta.length;for(uN(e,e.delimiters),n=0;n<o;n++)r[n]&&r[n].delimiters&&uN(e,r[n].delimiters)},i4e=function(e){var n,r,o=0,i=e.tokens,s=e.tokens.length;for(n=r=0;n<s;n++)i[n].nesting<0&&o--,i[n].level=o,i[n].nesting>0&&o++,i[n].type==="text"&&n+1<s&&i[n+1].type==="text"?i[n+1].content=i[n].content+i[n+1].content:(n!==r&&(i[r]=i[n]),r++);n!==r&&(i.length=r)},jS=D0,dN=Ot.isWhiteSpace,fN=Ot.isPunctChar,pN=Ot.isMdAsciiPunct;function im(t,e,n,r){this.src=t,this.env=n,this.md=e,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[]}im.prototype.pushPending=function(){var t=new jS("text","",0);return t.content=this.pending,t.level=this.pendingLevel,this.tokens.push(t),this.pending="",t};im.prototype.push=function(t,e,n){this.pending&&this.pushPending();var r=new jS(t,e,n),o=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],o={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(o),r};im.prototype.scanDelims=function(t,e){var n=t,r,o,i,s,a,l,c,u,d,f=!0,p=!0,h=this.posMax,y=this.src.charCodeAt(t);for(r=t>0?this.src.charCodeAt(t-1):32;n<h&&this.src.charCodeAt(n)===y;)n++;return i=n-t,o=n<h?this.src.charCodeAt(n):32,c=pN(r)||fN(String.fromCharCode(r)),d=pN(o)||fN(String.fromCharCode(o)),l=dN(r),u=dN(o),u?f=!1:d&&(l||c||(f=!1)),l?p=!1:c&&(u||d||(p=!1)),e?(s=f,a=p):(s=f&&(!p||c),a=p&&(!f||d)),{can_open:s,can_close:a,length:i}};im.prototype.Token=jS;var s4e=im,hN=LS,pw=[["text",BMe],["newline",zMe],["escape",WMe],["backticks",UMe],["strikethrough",B0.tokenize],["emphasis",j0.tokenize],["link",HMe],["image",GMe],["autolink",ZMe],["html_inline",XMe],["entity",r4e]],hw=[["balance_pairs",o4e],["strikethrough",B0.postProcess],["emphasis",j0.postProcess],["text_collapse",i4e]];function sm(){var t;for(this.ruler=new hN,t=0;t<pw.length;t++)this.ruler.push(pw[t][0],pw[t][1]);for(this.ruler2=new hN,t=0;t<hw.length;t++)this.ruler2.push(hw[t][0],hw[t][1])}sm.prototype.skipToken=function(t){var e,n,r=t.pos,o=this.ruler.getRules(""),i=o.length,s=t.md.options.maxNesting,a=t.cache;if(typeof a[r]!="undefined"){t.pos=a[r];return}if(t.level<s)for(n=0;n<i&&(t.level++,e=o[n](t,!0),t.level--,!e);n++);else t.pos=t.posMax;e||t.pos++,a[r]=t.pos};sm.prototype.tokenize=function(t){for(var e,n,r=this.ruler.getRules(""),o=r.length,i=t.posMax,s=t.md.options.maxNesting;t.pos<i;){if(t.level<s)for(n=0;n<o&&(e=r[n](t,!1),!e);n++);if(e){if(t.pos>=i)break;continue}t.pending+=t.src[t.pos++]}t.pending&&t.pushPending()};sm.prototype.parse=function(t,e,n,r){var o,i,s,a=new this.State(t,e,n,r);for(this.tokenize(a),i=this.ruler2.getRules(""),s=i.length,o=0;o<s;o++)i[o](a)};sm.prototype.State=s4e;var a4e=sm,mw,mN;function l4e(){return mN||(mN=1,mw=function(t){var e={};e.src_Any=IS().source,e.src_Cc=DS().source,e.src_Z=MS().source,e.src_P=om.source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");var n="[><]";return e.src_pseudo_letter="(?:(?!"+n+"|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|"+n+"|"+e.src_ZPCc+")(?!-|_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-]).|\\[(?:(?!`+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-]).|\\.{2,4}[a-zA-Z0-9%/]|\\.(?!"+e.src_ZCc+"|[.]).|"+(t&&t["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+"\\,(?!"+e.src_ZCc+").|\\!(?!"+e.src_ZCc+"|[!]).|\\?(?!"+e.src_ZCc+"|[?]).)+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}),mw}function Tx(t){var e=Array.prototype.slice.call(arguments,1);return e.forEach(function(n){n&&Object.keys(n).forEach(function(r){t[r]=n[r]})}),t}function z0(t){return Object.prototype.toString.call(t)}function c4e(t){return z0(t)==="[object String]"}function u4e(t){return z0(t)==="[object Object]"}function d4e(t){return z0(t)==="[object RegExp]"}function gN(t){return z0(t)==="[object Function]"}function f4e(t){return t.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var k8={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function p4e(t){return Object.keys(t||{}).reduce(function(e,n){return e||k8.hasOwnProperty(n)},!1)}var h4e={"http:":{validate:function(t,e,n){var r=t.slice(e);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(t,e,n){var r=t.slice(e);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?e>=3&&t[e-3]===":"||e>=3&&t[e-3]==="/"?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(t,e,n){var r=t.slice(e);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},m4e="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",g4e="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function y4e(t){t.__index__=-1,t.__text_cache__=""}function b4e(t){return function(e,n){var r=e.slice(n);return t.test(r)?r.match(t)[0].length:0}}function yN(){return function(t,e){e.normalize(t)}}function Z1(t){var e=t.re=l4e()(t.__opts__),n=t.__tlds__.slice();t.onCompile(),t.__tlds_replaced__||n.push(m4e),n.push(e.src_xn),e.src_tlds=n.join("|");function r(a){return a.replace("%TLDS%",e.src_tlds)}e.email_fuzzy=RegExp(r(e.tpl_email_fuzzy),"i"),e.link_fuzzy=RegExp(r(e.tpl_link_fuzzy),"i"),e.link_no_ip_fuzzy=RegExp(r(e.tpl_link_no_ip_fuzzy),"i"),e.host_fuzzy_test=RegExp(r(e.tpl_host_fuzzy_test),"i");var o=[];t.__compiled__={};function i(a,l){throw new Error('(LinkifyIt) Invalid schema "'+a+'": '+l)}Object.keys(t.__schemas__).forEach(function(a){var l=t.__schemas__[a];if(l!==null){var c={validate:null,link:null};if(t.__compiled__[a]=c,u4e(l)){d4e(l.validate)?c.validate=b4e(l.validate):gN(l.validate)?c.validate=l.validate:i(a,l),gN(l.normalize)?c.normalize=l.normalize:l.normalize?i(a,l):c.normalize=yN();return}if(c4e(l)){o.push(a);return}i(a,l)}}),o.forEach(function(a){t.__compiled__[t.__schemas__[a]]&&(t.__compiled__[a].validate=t.__compiled__[t.__schemas__[a]].validate,t.__compiled__[a].normalize=t.__compiled__[t.__schemas__[a]].normalize)}),t.__compiled__[""]={validate:null,normalize:yN()};var s=Object.keys(t.__compiled__).filter(function(a){return a.length>0&&t.__compiled__[a]}).map(f4e).join("|");t.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+s+")","i"),t.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+s+")","ig"),t.re.pretest=RegExp("("+t.re.schema_test.source+")|("+t.re.host_fuzzy_test.source+")|@","i"),y4e(t)}function v4e(t,e){var n=t.__index__,r=t.__last_index__,o=t.__text_cache__.slice(n,r);this.schema=t.__schema__.toLowerCase(),this.index=n+e,this.lastIndex=r+e,this.raw=o,this.text=o,this.url=o}function bN(t,e){var n=new v4e(t,e);return t.__compiled__[n.schema].normalize(n,t),n}function Bo(t,e){if(!(this instanceof Bo))return new Bo(t,e);e||p4e(t)&&(e=t,t={}),this.__opts__=Tx({},k8,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=Tx({},h4e,t),this.__compiled__={},this.__tlds__=g4e,this.__tlds_replaced__=!1,this.re={},Z1(this)}Bo.prototype.add=function(e,n){return this.__schemas__[e]=n,Z1(this),this};Bo.prototype.set=function(e){return this.__opts__=Tx(this.__opts__,e),this};Bo.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;var n,r,o,i,s,a,l,c,u;if(this.re.schema_test.test(e)){for(l=this.re.schema_search,l.lastIndex=0;(n=l.exec(e))!==null;)if(i=this.testSchemaAt(e,n[2],l.lastIndex),i){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+i;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(c=e.search(this.re.host_fuzzy_test),c>=0&&(this.__index__<0||c<this.__index__)&&(r=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(s=r.index+r[1].length,(this.__index__<0||s<this.__index__)&&(this.__schema__="",this.__index__=s,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(u=e.indexOf("@"),u>=0&&(o=e.match(this.re.email_fuzzy))!==null&&(s=o.index+o[1].length,a=o.index+o[0].length,(this.__index__<0||s<this.__index__||s===this.__index__&&a>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=s,this.__last_index__=a))),this.__index__>=0};Bo.prototype.pretest=function(e){return this.re.pretest.test(e)};Bo.prototype.testSchemaAt=function(e,n,r){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(e,r,this):0};Bo.prototype.match=function(e){var n=0,r=[];this.__index__>=0&&this.__text_cache__===e&&(r.push(bN(this,n)),n=this.__last_index__);for(var o=n?e.slice(n):e;this.test(o);)r.push(bN(this,n)),o=o.slice(this.__last_index__),n+=this.__last_index__;return r.length?r:null};Bo.prototype.tlds=function(e,n){return e=Array.isArray(e)?e:[e],n?(this.__tlds__=this.__tlds__.concat(e).sort().filter(function(r,o,i){return r!==i[o-1]}).reverse(),Z1(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,Z1(this),this)};Bo.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),e.schema==="mailto:"&&!/^mailto:/i.test(e.url)&&(e.url="mailto:"+e.url)};Bo.prototype.onCompile=function(){};var w4e=Bo;const Au=2147483647,Wi=36,zS=1,eh=26,_4e=38,x4e=700,$8=72,S8=128,E8="-",k4e=/^xn--/,$4e=/[^\0-\x7F]/,S4e=/[\x2E\u3002\uFF0E\uFF61]/g,E4e={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},gw=Wi-zS,Ui=Math.floor,yw=String.fromCharCode;function ya(t){throw new RangeError(E4e[t])}function C4e(t,e){const n=[];let r=t.length;for(;r--;)n[r]=e(t[r]);return n}function C8(t,e){const n=t.split("@");let r="";n.length>1&&(r=n[0]+"@",t=n[1]),t=t.replace(S4e,".");const o=t.split("."),i=C4e(o,e).join(".");return r+i}function qS(t){const e=[];let n=0;const r=t.length;for(;n<r;){const o=t.charCodeAt(n++);if(o>=55296&&o<=56319&&n<r){const i=t.charCodeAt(n++);(i&64512)==56320?e.push(((o&1023)<<10)+(i&1023)+65536):(e.push(o),n--)}else e.push(o)}return e}const T8=t=>String.fromCodePoint(...t),T4e=function(t){return t>=48&&t<58?26+(t-48):t>=65&&t<91?t-65:t>=97&&t<123?t-97:Wi},vN=function(t,e){return t+22+75*(t<26)-((e!=0)<<5)},A8=function(t,e,n){let r=0;for(t=n?Ui(t/x4e):t>>1,t+=Ui(t/e);t>gw*eh>>1;r+=Wi)t=Ui(t/gw);return Ui(r+(gw+1)*t/(t+_4e))},WS=function(t){const e=[],n=t.length;let r=0,o=S8,i=$8,s=t.lastIndexOf(E8);s<0&&(s=0);for(let a=0;a<s;++a)t.charCodeAt(a)>=128&&ya("not-basic"),e.push(t.charCodeAt(a));for(let a=s>0?s+1:0;a<n;){const l=r;for(let u=1,d=Wi;;d+=Wi){a>=n&&ya("invalid-input");const f=T4e(t.charCodeAt(a++));f>=Wi&&ya("invalid-input"),f>Ui((Au-r)/u)&&ya("overflow"),r+=f*u;const p=d<=i?zS:d>=i+eh?eh:d-i;if(f<p)break;const h=Wi-p;u>Ui(Au/h)&&ya("overflow"),u*=h}const c=e.length+1;i=A8(r-l,c,l==0),Ui(r/c)>Au-o&&ya("overflow"),o+=Ui(r/c),r%=c,e.splice(r++,0,o)}return String.fromCodePoint(...e)},US=function(t){const e=[];t=qS(t);const n=t.length;let r=S8,o=0,i=$8;for(const l of t)l<128&&e.push(yw(l));const s=e.length;let a=s;for(s&&e.push(E8);a<n;){let l=Au;for(const u of t)u>=r&&u<l&&(l=u);const c=a+1;l-r>Ui((Au-o)/c)&&ya("overflow"),o+=(l-r)*c,r=l;for(const u of t)if(u<r&&++o>Au&&ya("overflow"),u===r){let d=o;for(let f=Wi;;f+=Wi){const p=f<=i?zS:f>=i+eh?eh:f-i;if(d<p)break;const h=d-p,y=Wi-p;e.push(yw(vN(p+h%y,0))),d=Ui(h/y)}e.push(yw(vN(d,0))),i=A8(o,c,a===s),o=0,++a}++o,++r}return e.join("")},N8=function(t){return C8(t,function(e){return k4e.test(e)?WS(e.slice(4).toLowerCase()):e})},R8=function(t){return C8(t,function(e){return $4e.test(e)?"xn--"+US(e):e})},A4e={version:"2.1.0",ucs2:{decode:qS,encode:T8},decode:WS,encode:US,toASCII:R8,toUnicode:N8};var N4e=Object.freeze({__proto__:null,decode:WS,default:A4e,encode:US,toASCII:R8,toUnicode:N8,ucs2decode:qS,ucs2encode:T8}),P8=Qq(N4e),R4e={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},P4e={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","text_collapse"]}}},O4e={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","text_collapse"]}}},ip=Ot,I4e=I0,D4e=D5e,M4e=oMe,L4e=LMe,F4e=a4e,B4e=w4e,Nu=ml,O8=P8,j4e={default:R4e,zero:P4e,commonmark:O4e},z4e=/^(vbscript|javascript|file|data):/,q4e=/^data:image\/(gif|png|jpeg|webp);/;function W4e(t){var e=t.trim().toLowerCase();return z4e.test(e)?!!q4e.test(e):!0}var I8=["http:","https:","mailto:"];function U4e(t){var e=Nu.parse(t,!0);if(e.hostname&&(!e.protocol||I8.indexOf(e.protocol)>=0))try{e.hostname=O8.toASCII(e.hostname)}catch(n){}return Nu.encode(Nu.format(e))}function V4e(t){var e=Nu.parse(t,!0);if(e.hostname&&(!e.protocol||I8.indexOf(e.protocol)>=0))try{e.hostname=O8.toUnicode(e.hostname)}catch(n){}return Nu.decode(Nu.format(e))}function jo(t,e){if(!(this instanceof jo))return new jo(t,e);e||ip.isString(t)||(e=t||{},t="default"),this.inline=new F4e,this.block=new L4e,this.core=new M4e,this.renderer=new D4e,this.linkify=new B4e,this.validateLink=W4e,this.normalizeLink=U4e,this.normalizeLinkText=V4e,this.utils=ip,this.helpers=ip.assign({},I4e),this.options={},this.configure(t),e&&this.set(e)}jo.prototype.set=function(t){return ip.assign(this.options,t),this};jo.prototype.configure=function(t){var e=this,n;if(ip.isString(t)&&(n=t,t=j4e[n],!t))throw new Error('Wrong `markdown-it` preset "'+n+'", check name');if(!t)throw new Error("Wrong `markdown-it` preset, can't be empty");return t.options&&e.set(t.options),t.components&&Object.keys(t.components).forEach(function(r){t.components[r].rules&&e[r].ruler.enableOnly(t.components[r].rules),t.components[r].rules2&&e[r].ruler2.enableOnly(t.components[r].rules2)}),this};jo.prototype.enable=function(t,e){var n=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(o){n=n.concat(this[o].ruler.enable(t,!0))},this),n=n.concat(this.inline.ruler2.enable(t,!0));var r=t.filter(function(o){return n.indexOf(o)<0});if(r.length&&!e)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};jo.prototype.disable=function(t,e){var n=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(o){n=n.concat(this[o].ruler.disable(t,!0))},this),n=n.concat(this.inline.ruler2.disable(t,!0));var r=t.filter(function(o){return n.indexOf(o)<0});if(r.length&&!e)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};jo.prototype.use=function(t){var e=[this].concat(Array.prototype.slice.call(arguments,1));return t.apply(t,e),this};jo.prototype.parse=function(t,e){if(typeof t!="string")throw new Error("Input data should be a String");var n=new this.core.State(t,this,e);return this.core.process(n),n.tokens};jo.prototype.render=function(t,e){return e=e||{},this.renderer.render(this.parse(t,e),this.options,e)};jo.prototype.parseInline=function(t,e){var n=new this.core.State(t,this,e);return n.inlineMode=!0,this.core.process(n),n.tokens};jo.prototype.renderInline=function(t,e){return e=e||{},this.renderer.render(this.parseInline(t,e),this.options,e)};var H4e=jo,K4e=H4e,G4e=Ws(K4e),It={};const Z4e="",Y4e="",J4e="",X4e="",Q4e="",e8e="",t8e="",n8e="",r8e="",o8e="",i8e="",s8e="",a8e="",l8e="",c8e="",u8e="",d8e="",f8e="",p8e="",h8e="",m8e="",g8e="",y8e="",b8e="",v8e="",w8e="",_8e="&",x8e="&",k8e="",$8e="",S8e="",E8e="",C8e="",T8e="",A8e="",N8e="",R8e="",P8e="",O8e="",I8e="",D8e="",M8e="",L8e="",F8e="",B8e="",j8e="",z8e="",q8e="",W8e="",U8e="",V8e="",H8e="",K8e="",G8e="",Z8e="",Y8e="",J8e="",X8e="",Q8e="",e6e="",t6e="",n6e="'",r6e="",o6e="",i6e="",s6e="",a6e="",l6e="",c6e="",u6e="",d6e="*",f6e="",p6e="",h6e="",m6e="",g6e="",y6e="",b6e="",v6e="",w6e="",_6e="",x6e="",k6e="",$6e="",S6e="",E6e="",C6e="",T6e="",A6e="",N6e="",R6e="",P6e="",O6e="",I6e="",D6e="",M6e="",L6e="",F6e="",B6e="",j6e="",z6e="",q6e="",W6e="",U6e="",V6e="",H6e="",K6e="",G6e="",Z6e="",Y6e="",J6e="",X6e="",Q6e="",e7e="",t7e="",n7e="",r7e="",o7e="",i7e="",s7e="",a7e="",l7e="",c7e="",u7e="",d7e="",f7e="",p7e="",h7e="",m7e="",g7e="",y7e="",b7e="",v7e="",w7e="",_7e="=",x7e="",k7e="",$7e="",S7e="",E7e="",C7e="",T7e="",A7e="",N7e="",R7e="",P7e="",O7e="",I7e="",D7e="",M7e="",L7e="",F7e="",B7e="",j7e="",z7e="",q7e="",W7e="",U7e="",V7e="",H7e="",K7e="",G7e="",Z7e="",Y7e="",J7e="",X7e="",Q7e="",eLe="",tLe="",nLe="",rLe="",oLe="",iLe="",sLe="",aLe="",lLe="",cLe="",uLe="",dLe="",fLe="",pLe="",hLe="",mLe="",gLe="",yLe="",bLe="",vLe="",wLe="",_Le="",xLe="",kLe="",$Le="",SLe="",ELe="",CLe="",TLe="",ALe="",NLe="\\",RLe="",PLe="",OLe="",ILe="",DLe="",MLe="",LLe="",FLe="",BLe="",jLe="",zLe="",qLe="",WLe="",ULe="",VLe="",HLe="",KLe="",GLe="",ZLe="",YLe="",JLe="",XLe="",QLe="",e9e="",t9e="",n9e="",r9e="",o9e="",i9e="",s9e="",a9e="",l9e="",c9e="",u9e="",d9e="",f9e="",p9e="",h9e="",m9e="",g9e="",y9e="",b9e="",v9e="",w9e="",_9e="",x9e="",k9e="",$9e="",S9e="",E9e="",C9e="",T9e="",A9e="",N9e="",R9e="",P9e="",O9e="",I9e="",D9e="",M9e="",L9e="",F9e="",B9e="",j9e="",z9e="",q9e="",W9e="",U9e="",V9e="",H9e="",K9e="",G9e="",Z9e=":",Y9e="",J9e="",X9e="",Q9e="",eFe=",",tFe="@",nFe="",rFe="",oFe="",iFe="",sFe="",aFe="",lFe="",cFe="",uFe="",dFe="",fFe="",pFe="",hFe="",mFe="",gFe="",yFe="",bFe="",vFe="",wFe="",_Fe="",xFe="",kFe="",$Fe="",SFe="",EFe="",CFe="",TFe="",AFe="",NFe="",RFe="",PFe="",OFe="",IFe="",DFe="",MFe="",LFe="",FFe="",BFe="",jFe="",zFe="",qFe="",WFe="",UFe="",VFe="",HFe="",KFe="",GFe="",ZFe="",YFe="",JFe="",XFe="",QFe="",eBe="",tBe="",nBe="",rBe="",oBe="",iBe="",sBe="",aBe="",lBe="",cBe="",uBe="",dBe="",fBe="",pBe="",hBe="",mBe="",gBe="",yBe="",bBe="",vBe="",wBe="",_Be="",xBe="",kBe="",$Be="",SBe="",EBe="",CBe="",TBe="",ABe="",NBe="",RBe="",PBe="",OBe="",IBe="",DBe="",MBe="",LBe="",FBe="",BBe="",jBe="`",zBe="",qBe="",WBe="",UBe="",VBe="",HBe="",KBe="",GBe="",ZBe="",YBe="",JBe="",XBe="",QBe="",eje="",tje="",nje="",rje="",oje="",ije="$",sje="",aje="",lje="",cje="",uje="",dje="",fje="",pje="",hje="",mje="",gje="",yje="",bje="",vje="",wje="",_je="",xje="",kje="",$je="",Sje="",Eje="",Cje="",Tje="",Aje="",Nje="",Rje="",Pje="",Oje="",Ije="",Dje="",Mje="",Lje="",Fje="",Bje="",jje="",zje="",qje="",Wje="",Uje="",Vje="",Hje="",Kje="",Gje="",Zje="",Yje="",Jje="",Xje="",Qje="",eze="",tze="",nze="",rze="",oze="",ize="",sze="",aze="",lze="",cze="",uze="",dze="",fze="",pze="",hze="",mze="",gze="",yze="",bze="",vze="",wze="",_ze="",xze="",kze="",$ze="",Sze="",Eze="",Cze="",Tze="",Aze="",Nze="",Rze="",Pze="",Oze="",Ize="",Dze="",Mze="",Lze="",Fze="",Bze="",jze="",zze="",qze="",Wze="",Uze="",Vze="",Hze="",Kze="",Gze="",Zze="",Yze="",Jze="",Xze="",Qze="",eqe="",tqe="",nqe="",rqe="",oqe="",iqe="",sqe="",aqe="",lqe="",cqe="",uqe="",dqe="",fqe="",pqe="",hqe="",mqe="",gqe="",yqe="",bqe="",vqe="",wqe="",_qe="=",xqe="",kqe="",$qe="",Sqe="",Eqe="",Cqe="",Tqe="",Aqe="",Nqe="",Rqe="",Pqe="",Oqe="",Iqe="",Dqe="",Mqe="",Lqe="",Fqe="",Bqe="",jqe="",zqe="",qqe="!",Wqe="",Uqe="",Vqe="",Hqe="",Kqe="",Gqe="",Zqe="",Yqe="",Jqe="",Xqe="",Qqe="",eWe="",tWe="",nWe="",rWe="",oWe="",iWe="",sWe="fj",aWe="",lWe="",cWe="",uWe="",dWe="",fWe="",pWe="",hWe="",mWe="",gWe="",yWe="",bWe="",vWe="",wWe="",_We="",xWe="",kWe="",$We="",SWe="",EWe="",CWe="",TWe="",AWe="",NWe="",RWe="",PWe="",OWe="",IWe="",DWe="",MWe="",LWe="",FWe="",BWe="",jWe="",zWe="",qWe="",WWe="",UWe="",VWe="",HWe="",KWe="",GWe="",ZWe="",YWe="",JWe="",XWe="",QWe="",eUe="",tUe="",nUe="",rUe="",oUe="",iUe="",sUe="",aUe="",lUe="",cUe="",uUe="",dUe="",fUe="",pUe="",hUe="",mUe="",gUe="",yUe="",bUe="",vUe="",wUe="",_Ue="",xUe="",kUe="",$Ue="",SUe="",EUe="",CUe="",TUe="",AUe="",NUe="",RUe="",PUe="",OUe="",IUe="`",DUe="",MUe="",LUe="",FUe="",BUe="",jUe="",zUe="",qUe="",WUe="",UUe="",VUe="",HUe="",KUe="",GUe="",ZUe=">",YUe=">",JUe="",XUe="",QUe="",eVe="",tVe="",nVe="",rVe="",oVe="",iVe="",sVe="",aVe="",lVe="",cVe="",uVe="",dVe="",fVe="",pVe="",hVe="",mVe="",gVe="",yVe="",bVe="",vVe="",wVe="^",_Ve="",xVe="",kVe="",$Ve="",SVe="",EVe="",CVe="",TVe="",AVe="",NVe="",RVe="",PVe="",OVe="",IVe="",DVe="",MVe="",LVe="",FVe="",BVe="",jVe="",zVe="",qVe="",WVe="",UVe="",VVe="",HVe="",KVe="",GVe="",ZVe="",YVe="",JVe="",XVe="",QVe="",eHe="",tHe="",nHe="",rHe="",oHe="",iHe="",sHe="",aHe="",lHe="",cHe="",uHe="",dHe="",fHe="",pHe="",hHe="",mHe="",gHe="",yHe="",bHe="",vHe="",wHe="",_He="",xHe="",kHe="",$He="",SHe="",EHe="",CHe="",THe="",AHe="",NHe="",RHe="",PHe="",OHe="",IHe="",DHe="",MHe="",LHe="",FHe="",BHe="",jHe="",zHe="",qHe="",WHe="",UHe="",VHe="",HHe="",KHe="",GHe="",ZHe="",YHe="",JHe="",XHe="",QHe="",eKe="",tKe="",nKe="",rKe="",oKe="",iKe="",sKe="",aKe="",lKe="",cKe="",uKe="",dKe="",fKe="",pKe="",hKe="",mKe="",gKe="",yKe="",bKe="",vKe="",wKe="",_Ke="",xKe="",kKe="",$Ke="",SKe="",EKe="",CKe="",TKe="",AKe="",NKe="",RKe="",PKe="",OKe="",IKe="",DKe="",MKe="",LKe="",FKe="",BKe="",jKe="",zKe="",qKe="",WKe="",UKe="",VKe="",HKe="",KKe="",GKe="",ZKe="",YKe="",JKe="",XKe="",QKe="",eGe="",tGe="",nGe="",rGe="",oGe="",iGe="",sGe="",aGe="",lGe="",cGe="",uGe="",dGe="",fGe="",pGe="",hGe="",mGe="",gGe="",yGe="",bGe="",vGe="",wGe="",_Ge="",xGe="",kGe="",$Ge="",SGe="",EGe="",CGe="",TGe="{",AGe="[",NGe="",RGe="",PGe="",OGe="",IGe="",DGe="",MGe="",LGe="",FGe="{",BGe="",jGe="",zGe="",qGe="",WGe="",UGe="",VGe="",HGe="",KGe="",GGe="",ZGe="",YGe="",JGe="",XGe="",QGe="",eZe="",tZe="",nZe="",rZe="",oZe="",iZe="",sZe="",aZe="",lZe="",cZe="",uZe="",dZe="",fZe="",pZe="",hZe="",mZe="",gZe="",yZe="",bZe="",vZe="",wZe="",_Ze="",xZe="",kZe="",$Ze="",SZe="",EZe="",CZe="",TZe="",AZe="",NZe="",RZe="",PZe="",OZe="",IZe="",DZe="",MZe="",LZe="",FZe="",BZe="",jZe="",zZe="",qZe="",WZe="",UZe="",VZe="",HZe="",KZe="",GZe="",ZZe="",YZe="",JZe="",XZe="",QZe="",eYe="",tYe="",nYe="",rYe="",oYe="",iYe="",sYe="",aYe="",lYe="",cYe="",uYe="",dYe="",fYe="",pYe="",hYe="",mYe="",gYe="",yYe="",bYe="",vYe="",wYe="",_Ye="",xYe="",kYe="",$Ye="",SYe="",EYe="",CYe="",TYe="",AYe="",NYe="",RYe="",PYe="",OYe="",IYe="",DYe="",MYe="",LYe="",FYe="",BYe="",jYe="",zYe="",qYe="",WYe="",UYe="",VYe="",HYe="",KYe="",GYe="",ZYe="",YYe="",JYe="",XYe="",QYe="_",eJe="",tJe="",nJe="",rJe="",oJe="",iJe="(",sJe="",aJe="",lJe="",cJe="",uJe="",dJe="",fJe="",pJe="",hJe="",mJe="",gJe="",yJe="",bJe="",vJe="",wJe="",_Je="[",xJe="",kJe="",$Je="",SJe="",EJe="",CJe="",TJe="<",AJe="<",NJe="",RJe="",PJe="",OJe="",IJe="",DJe="",MJe="",LJe="",FJe="",BJe="",jJe="",zJe="",qJe="",WJe="",UJe="",VJe="",HJe="",KJe="",GJe="",ZJe="",YJe="",JJe="",XJe="",QJe="",eXe="",tXe="",nXe="",rXe="",oXe="",iXe="",sXe="",aXe="",lXe="",cXe="",uXe="",dXe="",fXe="*",pXe="",hXe="",mXe="",gXe="",yXe="",bXe="",vXe="",wXe="",_Xe="",xXe="",kXe="",$Xe="",SXe="",EXe="",CXe="",TXe="",AXe="",NXe="",RXe="",PXe="",OXe="",IXe="",DXe="",MXe="",LXe="",FXe="",BXe="",jXe="",zXe="",qXe="",WXe="",UXe="",VXe="",HXe="",KXe="",GXe="",ZXe="",YXe="",JXe="",XXe="",QXe="",eQe="",tQe="",nQe="",rQe="",oQe="",iQe="",sQe="",aQe="",lQe="",cQe="",uQe="",dQe="",fQe="",pQe="",hQe="",mQe="",gQe="",yQe="",bQe="",vQe="",wQe="",_Qe="",xQe=`
`,kQe="",$Qe="",SQe="",EQe="",CQe="",TQe="",AQe="",NQe="",RQe="",PQe="",OQe="",IQe="",DQe="",MQe="",LQe="",FQe="",BQe="",jQe="",zQe="",qQe="",WQe="",UQe="",VQe="",HQe="",KQe="",GQe="",ZQe="",YQe="",JQe="",XQe="",QQe="",eet="",tet="",net="",ret="",oet="",iet="",set="",aet="",cet="",uet="",det="",fet="",pet="",het="",met="",get="",yet="",bet="",vet="",wet="",_et="",xet="",ket="",$et="",Eet="",Cet="",Tet="",Aet="",Net="",Ret="",Pet="",Oet="",Iet="",Det="",Met="",Let="",Fet="",Bet="",jet="",zet="",qet="",Wet="",Uet="",Vet="",Het="",Ket="",Get="",Zet="",Yet="",Jet="",Xet="",Qet="",ett="",ttt="",ntt="",rtt="",ott="",itt="",stt="",att="",ltt="",ctt="",utt="",dtt="",ftt="",ptt="",htt="",mtt="",gtt="",ytt="",btt="",vtt="",wtt="",_tt="",xtt="",ktt="",$tt="",Stt="",Ett="",Ctt="",Ttt="",Att="",Ntt="",Rtt="",Ptt="",Ott="",Itt="",Dtt="",Mtt="",Ltt="",Ftt="",Btt="",jtt="",ztt="",qtt="",Wtt="",Utt="",Vtt="",Htt="",Ktt="",Gtt="",Ztt="",Ytt="",Jtt="",Xtt="",Qtt="",ent="",tnt="",nnt="",rnt="",ont="",int="",snt="",ant="",lnt="",cnt="",unt="",dnt="",fnt="",pnt="",hnt="",mnt="",gnt="",ynt="",bnt="",vnt="",wnt="",_nt="",xnt="",knt="",$nt="",Snt="",Ent="",Cnt="",Tnt="",Ant="",Nnt="",Rnt="",Pnt="",Ont="#",Int="",Dnt="",Mnt="",Lnt="",Fnt="",Bnt="",jnt="",znt="",qnt=">",Wnt="",Unt="",Vnt="",Hnt="",Knt="<",Gnt="",Znt="",Ynt="",Jnt="",Xnt="",Qnt="",ert="",trt="",nrt="",rrt="",ort="",irt="",srt="",art="",lrt="",crt="",urt="",drt="",frt="",prt="",hrt="",mrt="",grt="",yrt="",brt="",vrt="",wrt="",_rt="",xrt="",krt="",$rt="",Srt="",Ert="",Crt="",Trt="",Art="",Nrt="",Rrt="",Prt="",Ort="",Irt="",Drt="",Mrt="",Lrt="",Frt="",Brt="",jrt="",zrt="",qrt="",Wrt="",Urt="",Vrt="",Hrt="",Krt="",Grt="",Zrt="",Yrt="",Jrt="",Xrt="",Qrt="",eot="",tot="",not="",rot="",oot="",iot="",sot="",aot="",lot="",cot="",uot="",dot="",fot="",pot="",hot="",mot="",got="",yot="",bot="",vot="",wot="",_ot="",xot="",kot="",$ot="",Sot="",Eot="",Cot="",Tot="",Aot="",Not="",Rot="",Pot="",Oot="",Iot="%",Dot=".",Mot="",Lot="",Fot="",Bot="",jot="",zot="",qot="",Wot="",Uot="",Vot="",Hot="",Kot="",Got="",Zot="",Yot="",Jot="",Xot="",Qot="",eit="",tit="",nit="+",rit="",oit="",iit="",sit="",ait="",lit="",cit="",uit="",dit="",fit="",pit="",hit="",mit="",git="",yit="",bit="",vit="",wit="",_it="",xit="",kit="",$it="",Sit="",Eit="",Cit="",Tit="",Ait="",Nit="",Rit="",Pit="",Oit="",Iit="",Dit="",Mit="",Lit="",Fit="",Bit="",jit="",zit="",qit="",Wit="",Uit="",Vit="",Hit="",Kit="",Git="",Zit="",Yit="",Jit="",Xit="",Qit="",est="",tst="",nst="",rst="",ost="",ist="",sst="",ast="",lst="",cst="",ust="",dst="",fst="?",pst="",hst='"',mst='"',gst="",yst="",bst="",vst="",wst="",_st="",xst="",kst="",$st="",Sst="",Est="",Cst="",Tst="",Ast="",Nst="",Rst="",Pst="",Ost="",Ist="",Dst="",Mst="",Lst="",Fst="",Bst="",jst="",zst="",qst="",Wst="",Ust="",Vst="",Hst="",Kst="",Gst="",Zst="",Yst="",Jst="}",Xst="]",Qst="",eat="",tat="",nat="",rat="",oat="",iat="",sat="",aat="}",lat="",cat="",uat="",dat="",fat="",pat="",hat="",mat="",gat="",yat="",bat="",vat="",wat="",_at="",xat="",kat="",$at="",Sat="",Eat="",Cat="",Tat="",Aat="",Nat="",Rat="",Pat="",Oat="",Iat="",Dat="",Mat="",Lat="",Fat="",Bat="",jat="",zat="",qat="",Wat="",Uat="",Vat="",Hat="",Kat="",Gat="",Zat="",Yat="",Jat="",Xat="",Qat="",elt="",tlt="",nlt="",rlt="",olt="",ilt="",slt="",alt="",llt="",clt="",ult="",dlt="",flt="",plt="",hlt="",mlt="",glt="",ylt="",blt="",vlt="",wlt="",_lt="",xlt="",klt="",$lt="",Slt="",Elt="",Clt="",Tlt="",Alt="",Nlt="",Rlt="",Plt=")",Olt="",Ilt="",Dlt="",Mlt="",Llt="",Flt="",Blt="",jlt="",zlt="",qlt="]",Wlt="",Ult="",Vlt="",Hlt="",Klt="",Glt="",Zlt="",Ylt="",Jlt="",Xlt="",Qlt="",ect="",tct="",nct="",rct="",oct="",ict="",sct="",act="",lct="",cct="",uct="",dct="",fct="",pct="",hct="",mct="",gct="",yct="",bct="",vct="",wct="",_ct="",xct="",kct="",$ct="",Sct="",Ect="",Cct="",Tct="",Act="",Nct=";",Rct="",Pct="",Oct="",Ict="",Dct="",Mct="",Lct="",Fct="",Bct="",jct="",zct="",qct="",Wct="",Uct="",Vct="",Hct="",Kct="",Gct="",Zct="",Yct="",Jct="",Xct="",Qct="",eut="",tut="",nut="",rut="",out="",iut="",sut="",aut="",lut="",cut="",uut="",dut="",fut="",put="",hut="",mut="",gut="",yut="",but="",vut="",wut="",_ut="",xut="",kut="",$ut="",Sut="/",Eut="",Cut="",Tut="",Aut="",Nut="",Rut="",Put="",Out="",Iut="",Dut="",Mut="",Lut="",Fut="",But="",jut="",zut="",qut="",Wut="",Uut="",Vut="",Hut="",Kut="",Gut="",Zut="",Yut="",Jut="",Xut="",Qut="",edt="",tdt="",ndt="",rdt="",odt="",idt="",sdt="",adt="",ldt="",cdt="",udt="",ddt="",fdt="",pdt="",hdt="",mdt="",gdt="",ydt="",bdt="",vdt="",wdt="",_dt="",xdt="",kdt="",$dt="",Sdt="",Edt="",Cdt="",Tdt="",Adt="",Ndt="",Rdt="",Pdt="",Odt="",Idt="",Ddt="",Mdt="",Ldt="",Fdt="",Bdt="",jdt="",zdt="",qdt="",Wdt="",Udt="",Vdt="",Hdt="",Kdt="",Gdt="",Zdt="",Ydt="",Jdt="",Xdt="",Qdt="",eft="",tft="",nft="",rft="",oft="",ift="",sft="",aft="",lft="",cft="",uft="",dft="",fft="",pft="",hft="",mft="",gft="",yft="",bft="",vft="",wft="",_ft="",xft="",kft="",$ft="",Sft="",Eft="",Cft="",Tft="",Aft="",Nft="	",Rft="",Pft="",Oft="",Ift="",Dft="",Mft="",Lft="",Fft="",Bft="",jft="",zft="",qft="",Wft="",Uft="",Vft="",Hft="",Kft="",Gft="",Zft="",Yft="",Jft="",Xft="",Qft="",ept="",tpt="",npt="",rpt="",opt="",ipt="",spt="",apt="",lpt="",cpt="",upt="",dpt="",fpt="",ppt="",hpt="",mpt="",gpt="",ypt="",bpt="",vpt="",wpt="",_pt="",xpt="",kpt="",$pt="",Spt="",Ept="",Cpt="",Tpt="",Apt="",Npt="",Rpt="",Ppt="",Opt="",Ipt="",Dpt="",Mpt="",Lpt="",Fpt="",Bpt="",jpt="",zpt="",qpt="",Wpt="",Upt="",Vpt="",Hpt="",Kpt="",Gpt="",Zpt="",Ypt="",Jpt="",Xpt="",Qpt="",eht="",tht="",nht="",rht="",oht="",iht="",sht="",aht="",lht="",cht="",uht="",dht="",fht="",pht="",hht="",mht="",ght="",yht="",bht="",vht="",wht="",_ht="",xht="",kht="",$ht="",Sht="",Eht="",Cht="",Tht="",Aht="",Nht="",Rht="",Pht="",Oht="",Iht="_",Dht="",Mht="",Lht="",Fht="",Bht="",jht="",zht="",qht="",Wht="",Uht="",Vht="",Hht="",Kht="",Ght="",Zht="",Yht="",Jht="",Xht="",Qht="",emt="",tmt="",nmt="",rmt="",omt="",imt="",smt="",amt="",lmt="",cmt="",umt="",dmt="",fmt="",pmt="",hmt="",mmt="",gmt="",ymt="",bmt="",vmt="",wmt="",_mt="",xmt="",kmt="",$mt="",Smt="",Emt="",Cmt="",Tmt="",Amt="",Nmt="",Rmt="",Pmt="",Omt="",Imt="",Dmt="",Mmt="",Lmt="",Fmt="",Bmt="",jmt="",zmt="",qmt="",Wmt="",Umt="",Vmt="",Hmt="",Kmt="",Gmt="",Zmt="",Ymt="",Jmt="",Xmt="",Qmt="",egt="",tgt="",ngt="",rgt="",ogt="",igt="",sgt="",agt="",lgt="|",cgt="",ugt="|",dgt="",fgt="",pgt="|",hgt="",mgt="",ggt="",ygt="",bgt="",vgt="",wgt="",_gt="",xgt="",kgt="",$gt="",Sgt="",Egt="",Cgt="",Tgt="",Agt="",Ngt="",Rgt="",Pgt="",Ogt="",Igt="",Dgt="",Mgt="",Lgt="",Fgt="",Bgt="",jgt="",zgt="",qgt="",Wgt="",Ugt="",Vgt="",Hgt="",Kgt="",Ggt="",Zgt="",Ygt="",Jgt="",Xgt="",Qgt="",e1t="",t1t="",n1t="",r1t="",o1t="",i1t="",s1t="",a1t="",l1t="",c1t="",u1t="",d1t="",f1t="",p1t="",h1t="",m1t="",g1t="",y1t="",b1t="",v1t="",w1t="",_1t="",x1t="",k1t="",$1t="",S1t="",E1t="",C1t="",T1t="",A1t="",N1t="",R1t="",P1t="",O1t="",I1t="",D1t="",M1t="",L1t="",F1t="",B1t="",j1t="",z1t="",q1t="",W1t="",U1t="",V1t="",H1t="",K1t="",G1t="",Z1t="",Y1t="",J1t="",X1t="",Q1t="",eyt="",tyt="",nyt="",ryt="",oyt="",iyt="",syt="",ayt="",lyt="",cyt="",uyt="",dyt="",fyt="",pyt="";var hyt={Aacute:Z4e,aacute:Y4e,Abreve:J4e,abreve:X4e,ac:Q4e,acd:e8e,acE:t8e,Acirc:n8e,acirc:r8e,acute:o8e,Acy:i8e,acy:s8e,AElig:a8e,aelig:l8e,af:c8e,Afr:u8e,afr:d8e,Agrave:f8e,agrave:p8e,alefsym:h8e,aleph:m8e,Alpha:g8e,alpha:y8e,Amacr:b8e,amacr:v8e,amalg:w8e,amp:_8e,AMP:x8e,andand:k8e,And:$8e,and:S8e,andd:E8e,andslope:C8e,andv:T8e,ang:A8e,ange:N8e,angle:R8e,angmsdaa:P8e,angmsdab:O8e,angmsdac:I8e,angmsdad:D8e,angmsdae:M8e,angmsdaf:L8e,angmsdag:F8e,angmsdah:B8e,angmsd:j8e,angrt:z8e,angrtvb:q8e,angrtvbd:W8e,angsph:U8e,angst:V8e,angzarr:H8e,Aogon:K8e,aogon:G8e,Aopf:Z8e,aopf:Y8e,apacir:J8e,ap:X8e,apE:Q8e,ape:e6e,apid:t6e,apos:n6e,ApplyFunction:r6e,approx:o6e,approxeq:i6e,Aring:s6e,aring:a6e,Ascr:l6e,ascr:c6e,Assign:u6e,ast:d6e,asymp:f6e,asympeq:p6e,Atilde:h6e,atilde:m6e,Auml:g6e,auml:y6e,awconint:b6e,awint:v6e,backcong:w6e,backepsilon:_6e,backprime:x6e,backsim:k6e,backsimeq:$6e,Backslash:S6e,Barv:E6e,barvee:C6e,barwed:T6e,Barwed:A6e,barwedge:N6e,bbrk:R6e,bbrktbrk:P6e,bcong:O6e,Bcy:I6e,bcy:D6e,bdquo:M6e,becaus:L6e,because:F6e,Because:B6e,bemptyv:j6e,bepsi:z6e,bernou:q6e,Bernoullis:W6e,Beta:U6e,beta:V6e,beth:H6e,between:K6e,Bfr:G6e,bfr:Z6e,bigcap:Y6e,bigcirc:J6e,bigcup:X6e,bigodot:Q6e,bigoplus:e7e,bigotimes:t7e,bigsqcup:n7e,bigstar:r7e,bigtriangledown:o7e,bigtriangleup:i7e,biguplus:s7e,bigvee:a7e,bigwedge:l7e,bkarow:c7e,blacklozenge:u7e,blacksquare:d7e,blacktriangle:f7e,blacktriangledown:p7e,blacktriangleleft:h7e,blacktriangleright:m7e,blank:g7e,blk12:y7e,blk14:b7e,blk34:v7e,block:w7e,bne:_7e,bnequiv:x7e,bNot:k7e,bnot:$7e,Bopf:S7e,bopf:E7e,bot:C7e,bottom:T7e,bowtie:A7e,boxbox:N7e,boxdl:R7e,boxdL:P7e,boxDl:O7e,boxDL:I7e,boxdr:D7e,boxdR:M7e,boxDr:L7e,boxDR:F7e,boxh:B7e,boxH:j7e,boxhd:z7e,boxHd:q7e,boxhD:W7e,boxHD:U7e,boxhu:V7e,boxHu:H7e,boxhU:K7e,boxHU:G7e,boxminus:Z7e,boxplus:Y7e,boxtimes:J7e,boxul:X7e,boxuL:Q7e,boxUl:eLe,boxUL:tLe,boxur:nLe,boxuR:rLe,boxUr:oLe,boxUR:iLe,boxv:sLe,boxV:aLe,boxvh:lLe,boxvH:cLe,boxVh:uLe,boxVH:dLe,boxvl:fLe,boxvL:pLe,boxVl:hLe,boxVL:mLe,boxvr:gLe,boxvR:yLe,boxVr:bLe,boxVR:vLe,bprime:wLe,breve:_Le,Breve:xLe,brvbar:kLe,bscr:$Le,Bscr:SLe,bsemi:ELe,bsim:CLe,bsime:TLe,bsolb:ALe,bsol:NLe,bsolhsub:RLe,bull:PLe,bullet:OLe,bump:ILe,bumpE:DLe,bumpe:MLe,Bumpeq:LLe,bumpeq:FLe,Cacute:BLe,cacute:jLe,capand:zLe,capbrcup:qLe,capcap:WLe,cap:ULe,Cap:VLe,capcup:HLe,capdot:KLe,CapitalDifferentialD:GLe,caps:ZLe,caret:YLe,caron:JLe,Cayleys:XLe,ccaps:QLe,Ccaron:e9e,ccaron:t9e,Ccedil:n9e,ccedil:r9e,Ccirc:o9e,ccirc:i9e,Cconint:s9e,ccups:a9e,ccupssm:l9e,Cdot:c9e,cdot:u9e,cedil:d9e,Cedilla:f9e,cemptyv:p9e,cent:h9e,centerdot:m9e,CenterDot:g9e,cfr:y9e,Cfr:b9e,CHcy:v9e,chcy:w9e,check:_9e,checkmark:x9e,Chi:k9e,chi:$9e,circ:S9e,circeq:E9e,circlearrowleft:C9e,circlearrowright:T9e,circledast:A9e,circledcirc:N9e,circleddash:R9e,CircleDot:P9e,circledR:O9e,circledS:I9e,CircleMinus:D9e,CirclePlus:M9e,CircleTimes:L9e,cir:F9e,cirE:B9e,cire:j9e,cirfnint:z9e,cirmid:q9e,cirscir:W9e,ClockwiseContourIntegral:U9e,CloseCurlyDoubleQuote:V9e,CloseCurlyQuote:H9e,clubs:K9e,clubsuit:G9e,colon:Z9e,Colon:Y9e,Colone:J9e,colone:X9e,coloneq:Q9e,comma:eFe,commat:tFe,comp:nFe,compfn:rFe,complement:oFe,complexes:iFe,cong:sFe,congdot:aFe,Congruent:lFe,conint:cFe,Conint:uFe,ContourIntegral:dFe,copf:fFe,Copf:pFe,coprod:hFe,Coproduct:mFe,copy:gFe,COPY:yFe,copysr:bFe,CounterClockwiseContourIntegral:vFe,crarr:wFe,cross:_Fe,Cross:xFe,Cscr:kFe,cscr:$Fe,csub:SFe,csube:EFe,csup:CFe,csupe:TFe,ctdot:AFe,cudarrl:NFe,cudarrr:RFe,cuepr:PFe,cuesc:OFe,cularr:IFe,cularrp:DFe,cupbrcap:MFe,cupcap:LFe,CupCap:FFe,cup:BFe,Cup:jFe,cupcup:zFe,cupdot:qFe,cupor:WFe,cups:UFe,curarr:VFe,curarrm:HFe,curlyeqprec:KFe,curlyeqsucc:GFe,curlyvee:ZFe,curlywedge:YFe,curren:JFe,curvearrowleft:XFe,curvearrowright:QFe,cuvee:eBe,cuwed:tBe,cwconint:nBe,cwint:rBe,cylcty:oBe,dagger:iBe,Dagger:sBe,daleth:aBe,darr:lBe,Darr:cBe,dArr:uBe,dash:dBe,Dashv:fBe,dashv:pBe,dbkarow:hBe,dblac:mBe,Dcaron:gBe,dcaron:yBe,Dcy:bBe,dcy:vBe,ddagger:wBe,ddarr:_Be,DD:xBe,dd:kBe,DDotrahd:$Be,ddotseq:SBe,deg:EBe,Del:CBe,Delta:TBe,delta:ABe,demptyv:NBe,dfisht:RBe,Dfr:PBe,dfr:OBe,dHar:IBe,dharl:DBe,dharr:MBe,DiacriticalAcute:LBe,DiacriticalDot:FBe,DiacriticalDoubleAcute:BBe,DiacriticalGrave:jBe,DiacriticalTilde:zBe,diam:qBe,diamond:WBe,Diamond:UBe,diamondsuit:VBe,diams:HBe,die:KBe,DifferentialD:GBe,digamma:ZBe,disin:YBe,div:JBe,divide:XBe,divideontimes:QBe,divonx:eje,DJcy:tje,djcy:nje,dlcorn:rje,dlcrop:oje,dollar:ije,Dopf:sje,dopf:aje,Dot:lje,dot:cje,DotDot:uje,doteq:dje,doteqdot:fje,DotEqual:pje,dotminus:hje,dotplus:mje,dotsquare:gje,doublebarwedge:yje,DoubleContourIntegral:bje,DoubleDot:vje,DoubleDownArrow:wje,DoubleLeftArrow:_je,DoubleLeftRightArrow:xje,DoubleLeftTee:kje,DoubleLongLeftArrow:$je,DoubleLongLeftRightArrow:Sje,DoubleLongRightArrow:Eje,DoubleRightArrow:Cje,DoubleRightTee:Tje,DoubleUpArrow:Aje,DoubleUpDownArrow:Nje,DoubleVerticalBar:Rje,DownArrowBar:Pje,downarrow:Oje,DownArrow:Ije,Downarrow:Dje,DownArrowUpArrow:Mje,DownBreve:Lje,downdownarrows:Fje,downharpoonleft:Bje,downharpoonright:jje,DownLeftRightVector:zje,DownLeftTeeVector:qje,DownLeftVectorBar:Wje,DownLeftVector:Uje,DownRightTeeVector:Vje,DownRightVectorBar:Hje,DownRightVector:Kje,DownTeeArrow:Gje,DownTee:Zje,drbkarow:Yje,drcorn:Jje,drcrop:Xje,Dscr:Qje,dscr:eze,DScy:tze,dscy:nze,dsol:rze,Dstrok:oze,dstrok:ize,dtdot:sze,dtri:aze,dtrif:lze,duarr:cze,duhar:uze,dwangle:dze,DZcy:fze,dzcy:pze,dzigrarr:hze,Eacute:mze,eacute:gze,easter:yze,Ecaron:bze,ecaron:vze,Ecirc:wze,ecirc:_ze,ecir:xze,ecolon:kze,Ecy:$ze,ecy:Sze,eDDot:Eze,Edot:Cze,edot:Tze,eDot:Aze,ee:Nze,efDot:Rze,Efr:Pze,efr:Oze,eg:Ize,Egrave:Dze,egrave:Mze,egs:Lze,egsdot:Fze,el:Bze,Element:jze,elinters:zze,ell:qze,els:Wze,elsdot:Uze,Emacr:Vze,emacr:Hze,empty:Kze,emptyset:Gze,EmptySmallSquare:Zze,emptyv:Yze,EmptyVerySmallSquare:Jze,emsp13:Xze,emsp14:Qze,emsp:eqe,ENG:tqe,eng:nqe,ensp:rqe,Eogon:oqe,eogon:iqe,Eopf:sqe,eopf:aqe,epar:lqe,eparsl:cqe,eplus:uqe,epsi:dqe,Epsilon:fqe,epsilon:pqe,epsiv:hqe,eqcirc:mqe,eqcolon:gqe,eqsim:yqe,eqslantgtr:bqe,eqslantless:vqe,Equal:wqe,equals:_qe,EqualTilde:xqe,equest:kqe,Equilibrium:$qe,equiv:Sqe,equivDD:Eqe,eqvparsl:Cqe,erarr:Tqe,erDot:Aqe,escr:Nqe,Escr:Rqe,esdot:Pqe,Esim:Oqe,esim:Iqe,Eta:Dqe,eta:Mqe,ETH:Lqe,eth:Fqe,Euml:Bqe,euml:jqe,euro:zqe,excl:qqe,exist:Wqe,Exists:Uqe,expectation:Vqe,exponentiale:Hqe,ExponentialE:Kqe,fallingdotseq:Gqe,Fcy:Zqe,fcy:Yqe,female:Jqe,ffilig:Xqe,fflig:Qqe,ffllig:eWe,Ffr:tWe,ffr:nWe,filig:rWe,FilledSmallSquare:oWe,FilledVerySmallSquare:iWe,fjlig:sWe,flat:aWe,fllig:lWe,fltns:cWe,fnof:uWe,Fopf:dWe,fopf:fWe,forall:pWe,ForAll:hWe,fork:mWe,forkv:gWe,Fouriertrf:yWe,fpartint:bWe,frac12:vWe,frac13:wWe,frac14:_We,frac15:xWe,frac16:kWe,frac18:$We,frac23:SWe,frac25:EWe,frac34:CWe,frac35:TWe,frac38:AWe,frac45:NWe,frac56:RWe,frac58:PWe,frac78:OWe,frasl:IWe,frown:DWe,fscr:MWe,Fscr:LWe,gacute:FWe,Gamma:BWe,gamma:jWe,Gammad:zWe,gammad:qWe,gap:WWe,Gbreve:UWe,gbreve:VWe,Gcedil:HWe,Gcirc:KWe,gcirc:GWe,Gcy:ZWe,gcy:YWe,Gdot:JWe,gdot:XWe,ge:QWe,gE:eUe,gEl:tUe,gel:nUe,geq:rUe,geqq:oUe,geqslant:iUe,gescc:sUe,ges:aUe,gesdot:lUe,gesdoto:cUe,gesdotol:uUe,gesl:dUe,gesles:fUe,Gfr:pUe,gfr:hUe,gg:mUe,Gg:gUe,ggg:yUe,gimel:bUe,GJcy:vUe,gjcy:wUe,gla:_Ue,gl:xUe,glE:kUe,glj:$Ue,gnap:SUe,gnapprox:EUe,gne:CUe,gnE:TUe,gneq:AUe,gneqq:NUe,gnsim:RUe,Gopf:PUe,gopf:OUe,grave:IUe,GreaterEqual:DUe,GreaterEqualLess:MUe,GreaterFullEqual:LUe,GreaterGreater:FUe,GreaterLess:BUe,GreaterSlantEqual:jUe,GreaterTilde:zUe,Gscr:qUe,gscr:WUe,gsim:UUe,gsime:VUe,gsiml:HUe,gtcc:KUe,gtcir:GUe,gt:ZUe,GT:YUe,Gt:JUe,gtdot:XUe,gtlPar:QUe,gtquest:eVe,gtrapprox:tVe,gtrarr:nVe,gtrdot:rVe,gtreqless:oVe,gtreqqless:iVe,gtrless:sVe,gtrsim:aVe,gvertneqq:lVe,gvnE:cVe,Hacek:uVe,hairsp:dVe,half:fVe,hamilt:pVe,HARDcy:hVe,hardcy:mVe,harrcir:gVe,harr:yVe,hArr:bVe,harrw:vVe,Hat:wVe,hbar:_Ve,Hcirc:xVe,hcirc:kVe,hearts:$Ve,heartsuit:SVe,hellip:EVe,hercon:CVe,hfr:TVe,Hfr:AVe,HilbertSpace:NVe,hksearow:RVe,hkswarow:PVe,hoarr:OVe,homtht:IVe,hookleftarrow:DVe,hookrightarrow:MVe,hopf:LVe,Hopf:FVe,horbar:BVe,HorizontalLine:jVe,hscr:zVe,Hscr:qVe,hslash:WVe,Hstrok:UVe,hstrok:VVe,HumpDownHump:HVe,HumpEqual:KVe,hybull:GVe,hyphen:ZVe,Iacute:YVe,iacute:JVe,ic:XVe,Icirc:QVe,icirc:eHe,Icy:tHe,icy:nHe,Idot:rHe,IEcy:oHe,iecy:iHe,iexcl:sHe,iff:aHe,ifr:lHe,Ifr:cHe,Igrave:uHe,igrave:dHe,ii:fHe,iiiint:pHe,iiint:hHe,iinfin:mHe,iiota:gHe,IJlig:yHe,ijlig:bHe,Imacr:vHe,imacr:wHe,image:_He,ImaginaryI:xHe,imagline:kHe,imagpart:$He,imath:SHe,Im:EHe,imof:CHe,imped:THe,Implies:AHe,incare:NHe,in:"",infin:RHe,infintie:PHe,inodot:OHe,intcal:IHe,int:DHe,Int:MHe,integers:LHe,Integral:FHe,intercal:BHe,Intersection:jHe,intlarhk:zHe,intprod:qHe,InvisibleComma:WHe,InvisibleTimes:UHe,IOcy:VHe,iocy:HHe,Iogon:KHe,iogon:GHe,Iopf:ZHe,iopf:YHe,Iota:JHe,iota:XHe,iprod:QHe,iquest:eKe,iscr:tKe,Iscr:nKe,isin:rKe,isindot:oKe,isinE:iKe,isins:sKe,isinsv:aKe,isinv:lKe,it:cKe,Itilde:uKe,itilde:dKe,Iukcy:fKe,iukcy:pKe,Iuml:hKe,iuml:mKe,Jcirc:gKe,jcirc:yKe,Jcy:bKe,jcy:vKe,Jfr:wKe,jfr:_Ke,jmath:xKe,Jopf:kKe,jopf:$Ke,Jscr:SKe,jscr:EKe,Jsercy:CKe,jsercy:TKe,Jukcy:AKe,jukcy:NKe,Kappa:RKe,kappa:PKe,kappav:OKe,Kcedil:IKe,kcedil:DKe,Kcy:MKe,kcy:LKe,Kfr:FKe,kfr:BKe,kgreen:jKe,KHcy:zKe,khcy:qKe,KJcy:WKe,kjcy:UKe,Kopf:VKe,kopf:HKe,Kscr:KKe,kscr:GKe,lAarr:ZKe,Lacute:YKe,lacute:JKe,laemptyv:XKe,lagran:QKe,Lambda:eGe,lambda:tGe,lang:nGe,Lang:rGe,langd:oGe,langle:iGe,lap:sGe,Laplacetrf:aGe,laquo:lGe,larrb:cGe,larrbfs:uGe,larr:dGe,Larr:fGe,lArr:pGe,larrfs:hGe,larrhk:mGe,larrlp:gGe,larrpl:yGe,larrsim:bGe,larrtl:vGe,latail:wGe,lAtail:_Ge,lat:xGe,late:kGe,lates:$Ge,lbarr:SGe,lBarr:EGe,lbbrk:CGe,lbrace:TGe,lbrack:AGe,lbrke:NGe,lbrksld:RGe,lbrkslu:PGe,Lcaron:OGe,lcaron:IGe,Lcedil:DGe,lcedil:MGe,lceil:LGe,lcub:FGe,Lcy:BGe,lcy:jGe,ldca:zGe,ldquo:qGe,ldquor:WGe,ldrdhar:UGe,ldrushar:VGe,ldsh:HGe,le:KGe,lE:GGe,LeftAngleBracket:ZGe,LeftArrowBar:YGe,leftarrow:JGe,LeftArrow:XGe,Leftarrow:QGe,LeftArrowRightArrow:eZe,leftarrowtail:tZe,LeftCeiling:nZe,LeftDoubleBracket:rZe,LeftDownTeeVector:oZe,LeftDownVectorBar:iZe,LeftDownVector:sZe,LeftFloor:aZe,leftharpoondown:lZe,leftharpoonup:cZe,leftleftarrows:uZe,leftrightarrow:dZe,LeftRightArrow:fZe,Leftrightarrow:pZe,leftrightarrows:hZe,leftrightharpoons:mZe,leftrightsquigarrow:gZe,LeftRightVector:yZe,LeftTeeArrow:bZe,LeftTee:vZe,LeftTeeVector:wZe,leftthreetimes:_Ze,LeftTriangleBar:xZe,LeftTriangle:kZe,LeftTriangleEqual:$Ze,LeftUpDownVector:SZe,LeftUpTeeVector:EZe,LeftUpVectorBar:CZe,LeftUpVector:TZe,LeftVectorBar:AZe,LeftVector:NZe,lEg:RZe,leg:PZe,leq:OZe,leqq:IZe,leqslant:DZe,lescc:MZe,les:LZe,lesdot:FZe,lesdoto:BZe,lesdotor:jZe,lesg:zZe,lesges:qZe,lessapprox:WZe,lessdot:UZe,lesseqgtr:VZe,lesseqqgtr:HZe,LessEqualGreater:KZe,LessFullEqual:GZe,LessGreater:ZZe,lessgtr:YZe,LessLess:JZe,lesssim:XZe,LessSlantEqual:QZe,LessTilde:eYe,lfisht:tYe,lfloor:nYe,Lfr:rYe,lfr:oYe,lg:iYe,lgE:sYe,lHar:aYe,lhard:lYe,lharu:cYe,lharul:uYe,lhblk:dYe,LJcy:fYe,ljcy:pYe,llarr:hYe,ll:mYe,Ll:gYe,llcorner:yYe,Lleftarrow:bYe,llhard:vYe,lltri:wYe,Lmidot:_Ye,lmidot:xYe,lmoustache:kYe,lmoust:$Ye,lnap:SYe,lnapprox:EYe,lne:CYe,lnE:TYe,lneq:AYe,lneqq:NYe,lnsim:RYe,loang:PYe,loarr:OYe,lobrk:IYe,longleftarrow:DYe,LongLeftArrow:MYe,Longleftarrow:LYe,longleftrightarrow:FYe,LongLeftRightArrow:BYe,Longleftrightarrow:jYe,longmapsto:zYe,longrightarrow:qYe,LongRightArrow:WYe,Longrightarrow:UYe,looparrowleft:VYe,looparrowright:HYe,lopar:KYe,Lopf:GYe,lopf:ZYe,loplus:YYe,lotimes:JYe,lowast:XYe,lowbar:QYe,LowerLeftArrow:eJe,LowerRightArrow:tJe,loz:nJe,lozenge:rJe,lozf:oJe,lpar:iJe,lparlt:sJe,lrarr:aJe,lrcorner:lJe,lrhar:cJe,lrhard:uJe,lrm:dJe,lrtri:fJe,lsaquo:pJe,lscr:hJe,Lscr:mJe,lsh:gJe,Lsh:yJe,lsim:bJe,lsime:vJe,lsimg:wJe,lsqb:_Je,lsquo:xJe,lsquor:kJe,Lstrok:$Je,lstrok:SJe,ltcc:EJe,ltcir:CJe,lt:TJe,LT:AJe,Lt:NJe,ltdot:RJe,lthree:PJe,ltimes:OJe,ltlarr:IJe,ltquest:DJe,ltri:MJe,ltrie:LJe,ltrif:FJe,ltrPar:BJe,lurdshar:jJe,luruhar:zJe,lvertneqq:qJe,lvnE:WJe,macr:UJe,male:VJe,malt:HJe,maltese:KJe,Map:"",map:GJe,mapsto:ZJe,mapstodown:YJe,mapstoleft:JJe,mapstoup:XJe,marker:QJe,mcomma:eXe,Mcy:tXe,mcy:nXe,mdash:rXe,mDDot:oXe,measuredangle:iXe,MediumSpace:sXe,Mellintrf:aXe,Mfr:lXe,mfr:cXe,mho:uXe,micro:dXe,midast:fXe,midcir:pXe,mid:hXe,middot:mXe,minusb:gXe,minus:yXe,minusd:bXe,minusdu:vXe,MinusPlus:wXe,mlcp:_Xe,mldr:xXe,mnplus:kXe,models:$Xe,Mopf:SXe,mopf:EXe,mp:CXe,mscr:TXe,Mscr:AXe,mstpos:NXe,Mu:RXe,mu:PXe,multimap:OXe,mumap:IXe,nabla:DXe,Nacute:MXe,nacute:LXe,nang:FXe,nap:BXe,napE:jXe,napid:zXe,napos:qXe,napprox:WXe,natural:UXe,naturals:VXe,natur:HXe,nbsp:KXe,nbump:GXe,nbumpe:ZXe,ncap:YXe,Ncaron:JXe,ncaron:XXe,Ncedil:QXe,ncedil:eQe,ncong:tQe,ncongdot:nQe,ncup:rQe,Ncy:oQe,ncy:iQe,ndash:sQe,nearhk:aQe,nearr:lQe,neArr:cQe,nearrow:uQe,ne:dQe,nedot:fQe,NegativeMediumSpace:pQe,NegativeThickSpace:hQe,NegativeThinSpace:mQe,NegativeVeryThinSpace:gQe,nequiv:yQe,nesear:bQe,nesim:vQe,NestedGreaterGreater:wQe,NestedLessLess:_Qe,NewLine:xQe,nexist:kQe,nexists:$Qe,Nfr:SQe,nfr:EQe,ngE:CQe,nge:TQe,ngeq:AQe,ngeqq:NQe,ngeqslant:RQe,nges:PQe,nGg:OQe,ngsim:IQe,nGt:DQe,ngt:MQe,ngtr:LQe,nGtv:FQe,nharr:BQe,nhArr:jQe,nhpar:zQe,ni:qQe,nis:WQe,nisd:UQe,niv:VQe,NJcy:HQe,njcy:KQe,nlarr:GQe,nlArr:ZQe,nldr:YQe,nlE:JQe,nle:XQe,nleftarrow:QQe,nLeftarrow:eet,nleftrightarrow:tet,nLeftrightarrow:net,nleq:ret,nleqq:oet,nleqslant:iet,nles:set,nless:aet,nLl:cet,nlsim:uet,nLt:det,nlt:fet,nltri:pet,nltrie:het,nLtv:met,nmid:get,NoBreak:yet,NonBreakingSpace:bet,nopf:vet,Nopf:wet,Not:_et,not:xet,NotCongruent:ket,NotCupCap:$et,NotDoubleVerticalBar:Eet,NotElement:Cet,NotEqual:Tet,NotEqualTilde:Aet,NotExists:Net,NotGreater:Ret,NotGreaterEqual:Pet,NotGreaterFullEqual:Oet,NotGreaterGreater:Iet,NotGreaterLess:Det,NotGreaterSlantEqual:Met,NotGreaterTilde:Let,NotHumpDownHump:Fet,NotHumpEqual:Bet,notin:jet,notindot:zet,notinE:qet,notinva:Wet,notinvb:Uet,notinvc:Vet,NotLeftTriangleBar:Het,NotLeftTriangle:Ket,NotLeftTriangleEqual:Get,NotLess:Zet,NotLessEqual:Yet,NotLessGreater:Jet,NotLessLess:Xet,NotLessSlantEqual:Qet,NotLessTilde:ett,NotNestedGreaterGreater:ttt,NotNestedLessLess:ntt,notni:rtt,notniva:ott,notnivb:itt,notnivc:stt,NotPrecedes:att,NotPrecedesEqual:ltt,NotPrecedesSlantEqual:ctt,NotReverseElement:utt,NotRightTriangleBar:dtt,NotRightTriangle:ftt,NotRightTriangleEqual:ptt,NotSquareSubset:htt,NotSquareSubsetEqual:mtt,NotSquareSuperset:gtt,NotSquareSupersetEqual:ytt,NotSubset:btt,NotSubsetEqual:vtt,NotSucceeds:wtt,NotSucceedsEqual:_tt,NotSucceedsSlantEqual:xtt,NotSucceedsTilde:ktt,NotSuperset:$tt,NotSupersetEqual:Stt,NotTilde:Ett,NotTildeEqual:Ctt,NotTildeFullEqual:Ttt,NotTildeTilde:Att,NotVerticalBar:Ntt,nparallel:Rtt,npar:Ptt,nparsl:Ott,npart:Itt,npolint:Dtt,npr:Mtt,nprcue:Ltt,nprec:Ftt,npreceq:Btt,npre:jtt,nrarrc:ztt,nrarr:qtt,nrArr:Wtt,nrarrw:Utt,nrightarrow:Vtt,nRightarrow:Htt,nrtri:Ktt,nrtrie:Gtt,nsc:Ztt,nsccue:Ytt,nsce:Jtt,Nscr:Xtt,nscr:Qtt,nshortmid:ent,nshortparallel:tnt,nsim:nnt,nsime:rnt,nsimeq:ont,nsmid:int,nspar:snt,nsqsube:ant,nsqsupe:lnt,nsub:cnt,nsubE:unt,nsube:dnt,nsubset:fnt,nsubseteq:pnt,nsubseteqq:hnt,nsucc:mnt,nsucceq:gnt,nsup:ynt,nsupE:bnt,nsupe:vnt,nsupset:wnt,nsupseteq:_nt,nsupseteqq:xnt,ntgl:knt,Ntilde:$nt,ntilde:Snt,ntlg:Ent,ntriangleleft:Cnt,ntrianglelefteq:Tnt,ntriangleright:Ant,ntrianglerighteq:Nnt,Nu:Rnt,nu:Pnt,num:Ont,numero:Int,numsp:Dnt,nvap:Mnt,nvdash:Lnt,nvDash:Fnt,nVdash:Bnt,nVDash:jnt,nvge:znt,nvgt:qnt,nvHarr:Wnt,nvinfin:Unt,nvlArr:Vnt,nvle:Hnt,nvlt:Knt,nvltrie:Gnt,nvrArr:Znt,nvrtrie:Ynt,nvsim:Jnt,nwarhk:Xnt,nwarr:Qnt,nwArr:ert,nwarrow:trt,nwnear:nrt,Oacute:rrt,oacute:ort,oast:irt,Ocirc:srt,ocirc:art,ocir:lrt,Ocy:crt,ocy:urt,odash:drt,Odblac:frt,odblac:prt,odiv:hrt,odot:mrt,odsold:grt,OElig:yrt,oelig:brt,ofcir:vrt,Ofr:wrt,ofr:_rt,ogon:xrt,Ograve:krt,ograve:$rt,ogt:Srt,ohbar:Ert,ohm:Crt,oint:Trt,olarr:Art,olcir:Nrt,olcross:Rrt,oline:Prt,olt:Ort,Omacr:Irt,omacr:Drt,Omega:Mrt,omega:Lrt,Omicron:Frt,omicron:Brt,omid:jrt,ominus:zrt,Oopf:qrt,oopf:Wrt,opar:Urt,OpenCurlyDoubleQuote:Vrt,OpenCurlyQuote:Hrt,operp:Krt,oplus:Grt,orarr:Zrt,Or:Yrt,or:Jrt,ord:Xrt,order:Qrt,orderof:eot,ordf:tot,ordm:not,origof:rot,oror:oot,orslope:iot,orv:sot,oS:aot,Oscr:lot,oscr:cot,Oslash:uot,oslash:dot,osol:fot,Otilde:pot,otilde:hot,otimesas:mot,Otimes:got,otimes:yot,Ouml:bot,ouml:vot,ovbar:wot,OverBar:_ot,OverBrace:xot,OverBracket:kot,OverParenthesis:$ot,para:Sot,parallel:Eot,par:Cot,parsim:Tot,parsl:Aot,part:Not,PartialD:Rot,Pcy:Pot,pcy:Oot,percnt:Iot,period:Dot,permil:Mot,perp:Lot,pertenk:Fot,Pfr:Bot,pfr:jot,Phi:zot,phi:qot,phiv:Wot,phmmat:Uot,phone:Vot,Pi:Hot,pi:Kot,pitchfork:Got,piv:Zot,planck:Yot,planckh:Jot,plankv:Xot,plusacir:Qot,plusb:eit,pluscir:tit,plus:nit,plusdo:rit,plusdu:oit,pluse:iit,PlusMinus:sit,plusmn:ait,plussim:lit,plustwo:cit,pm:uit,Poincareplane:dit,pointint:fit,popf:pit,Popf:hit,pound:mit,prap:git,Pr:yit,pr:bit,prcue:vit,precapprox:wit,prec:_it,preccurlyeq:xit,Precedes:kit,PrecedesEqual:$it,PrecedesSlantEqual:Sit,PrecedesTilde:Eit,preceq:Cit,precnapprox:Tit,precneqq:Ait,precnsim:Nit,pre:Rit,prE:Pit,precsim:Oit,prime:Iit,Prime:Dit,primes:Mit,prnap:Lit,prnE:Fit,prnsim:Bit,prod:jit,Product:zit,profalar:qit,profline:Wit,profsurf:Uit,prop:Vit,Proportional:Hit,Proportion:Kit,propto:Git,prsim:Zit,prurel:Yit,Pscr:Jit,pscr:Xit,Psi:Qit,psi:est,puncsp:tst,Qfr:nst,qfr:rst,qint:ost,qopf:ist,Qopf:sst,qprime:ast,Qscr:lst,qscr:cst,quaternions:ust,quatint:dst,quest:fst,questeq:pst,quot:hst,QUOT:mst,rAarr:gst,race:yst,Racute:bst,racute:vst,radic:wst,raemptyv:_st,rang:xst,Rang:kst,rangd:$st,range:Sst,rangle:Est,raquo:Cst,rarrap:Tst,rarrb:Ast,rarrbfs:Nst,rarrc:Rst,rarr:Pst,Rarr:Ost,rArr:Ist,rarrfs:Dst,rarrhk:Mst,rarrlp:Lst,rarrpl:Fst,rarrsim:Bst,Rarrtl:jst,rarrtl:zst,rarrw:qst,ratail:Wst,rAtail:Ust,ratio:Vst,rationals:Hst,rbarr:Kst,rBarr:Gst,RBarr:Zst,rbbrk:Yst,rbrace:Jst,rbrack:Xst,rbrke:Qst,rbrksld:eat,rbrkslu:tat,Rcaron:nat,rcaron:rat,Rcedil:oat,rcedil:iat,rceil:sat,rcub:aat,Rcy:lat,rcy:cat,rdca:uat,rdldhar:dat,rdquo:fat,rdquor:pat,rdsh:hat,real:mat,realine:gat,realpart:yat,reals:bat,Re:vat,rect:wat,reg:_at,REG:xat,ReverseElement:kat,ReverseEquilibrium:$at,ReverseUpEquilibrium:Sat,rfisht:Eat,rfloor:Cat,rfr:Tat,Rfr:Aat,rHar:Nat,rhard:Rat,rharu:Pat,rharul:Oat,Rho:Iat,rho:Dat,rhov:Mat,RightAngleBracket:Lat,RightArrowBar:Fat,rightarrow:Bat,RightArrow:jat,Rightarrow:zat,RightArrowLeftArrow:qat,rightarrowtail:Wat,RightCeiling:Uat,RightDoubleBracket:Vat,RightDownTeeVector:Hat,RightDownVectorBar:Kat,RightDownVector:Gat,RightFloor:Zat,rightharpoondown:Yat,rightharpoonup:Jat,rightleftarrows:Xat,rightleftharpoons:Qat,rightrightarrows:elt,rightsquigarrow:tlt,RightTeeArrow:nlt,RightTee:rlt,RightTeeVector:olt,rightthreetimes:ilt,RightTriangleBar:slt,RightTriangle:alt,RightTriangleEqual:llt,RightUpDownVector:clt,RightUpTeeVector:ult,RightUpVectorBar:dlt,RightUpVector:flt,RightVectorBar:plt,RightVector:hlt,ring:mlt,risingdotseq:glt,rlarr:ylt,rlhar:blt,rlm:vlt,rmoustache:wlt,rmoust:_lt,rnmid:xlt,roang:klt,roarr:$lt,robrk:Slt,ropar:Elt,ropf:Clt,Ropf:Tlt,roplus:Alt,rotimes:Nlt,RoundImplies:Rlt,rpar:Plt,rpargt:Olt,rppolint:Ilt,rrarr:Dlt,Rrightarrow:Mlt,rsaquo:Llt,rscr:Flt,Rscr:Blt,rsh:jlt,Rsh:zlt,rsqb:qlt,rsquo:Wlt,rsquor:Ult,rthree:Vlt,rtimes:Hlt,rtri:Klt,rtrie:Glt,rtrif:Zlt,rtriltri:Ylt,RuleDelayed:Jlt,ruluhar:Xlt,rx:Qlt,Sacute:ect,sacute:tct,sbquo:nct,scap:rct,Scaron:oct,scaron:ict,Sc:sct,sc:act,sccue:lct,sce:cct,scE:uct,Scedil:dct,scedil:fct,Scirc:pct,scirc:hct,scnap:mct,scnE:gct,scnsim:yct,scpolint:bct,scsim:vct,Scy:wct,scy:_ct,sdotb:xct,sdot:kct,sdote:$ct,searhk:Sct,searr:Ect,seArr:Cct,searrow:Tct,sect:Act,semi:Nct,seswar:Rct,setminus:Pct,setmn:Oct,sext:Ict,Sfr:Dct,sfr:Mct,sfrown:Lct,sharp:Fct,SHCHcy:Bct,shchcy:jct,SHcy:zct,shcy:qct,ShortDownArrow:Wct,ShortLeftArrow:Uct,shortmid:Vct,shortparallel:Hct,ShortRightArrow:Kct,ShortUpArrow:Gct,shy:Zct,Sigma:Yct,sigma:Jct,sigmaf:Xct,sigmav:Qct,sim:eut,simdot:tut,sime:nut,simeq:rut,simg:out,simgE:iut,siml:sut,simlE:aut,simne:lut,simplus:cut,simrarr:uut,slarr:dut,SmallCircle:fut,smallsetminus:put,smashp:hut,smeparsl:mut,smid:gut,smile:yut,smt:but,smte:vut,smtes:wut,SOFTcy:_ut,softcy:xut,solbar:kut,solb:$ut,sol:Sut,Sopf:Eut,sopf:Cut,spades:Tut,spadesuit:Aut,spar:Nut,sqcap:Rut,sqcaps:Put,sqcup:Out,sqcups:Iut,Sqrt:Dut,sqsub:Mut,sqsube:Lut,sqsubset:Fut,sqsubseteq:But,sqsup:jut,sqsupe:zut,sqsupset:qut,sqsupseteq:Wut,square:Uut,Square:Vut,SquareIntersection:Hut,SquareSubset:Kut,SquareSubsetEqual:Gut,SquareSuperset:Zut,SquareSupersetEqual:Yut,SquareUnion:Jut,squarf:Xut,squ:Qut,squf:edt,srarr:tdt,Sscr:ndt,sscr:rdt,ssetmn:odt,ssmile:idt,sstarf:sdt,Star:adt,star:ldt,starf:cdt,straightepsilon:udt,straightphi:ddt,strns:fdt,sub:pdt,Sub:hdt,subdot:mdt,subE:gdt,sube:ydt,subedot:bdt,submult:vdt,subnE:wdt,subne:_dt,subplus:xdt,subrarr:kdt,subset:$dt,Subset:Sdt,subseteq:Edt,subseteqq:Cdt,SubsetEqual:Tdt,subsetneq:Adt,subsetneqq:Ndt,subsim:Rdt,subsub:Pdt,subsup:Odt,succapprox:Idt,succ:Ddt,succcurlyeq:Mdt,Succeeds:Ldt,SucceedsEqual:Fdt,SucceedsSlantEqual:Bdt,SucceedsTilde:jdt,succeq:zdt,succnapprox:qdt,succneqq:Wdt,succnsim:Udt,succsim:Vdt,SuchThat:Hdt,sum:Kdt,Sum:Gdt,sung:Zdt,sup1:Ydt,sup2:Jdt,sup3:Xdt,sup:Qdt,Sup:eft,supdot:tft,supdsub:nft,supE:rft,supe:oft,supedot:ift,Superset:sft,SupersetEqual:aft,suphsol:lft,suphsub:cft,suplarr:uft,supmult:dft,supnE:fft,supne:pft,supplus:hft,supset:mft,Supset:gft,supseteq:yft,supseteqq:bft,supsetneq:vft,supsetneqq:wft,supsim:_ft,supsub:xft,supsup:kft,swarhk:$ft,swarr:Sft,swArr:Eft,swarrow:Cft,swnwar:Tft,szlig:Aft,Tab:Nft,target:Rft,Tau:Pft,tau:Oft,tbrk:Ift,Tcaron:Dft,tcaron:Mft,Tcedil:Lft,tcedil:Fft,Tcy:Bft,tcy:jft,tdot:zft,telrec:qft,Tfr:Wft,tfr:Uft,there4:Vft,therefore:Hft,Therefore:Kft,Theta:Gft,theta:Zft,thetasym:Yft,thetav:Jft,thickapprox:Xft,thicksim:Qft,ThickSpace:ept,ThinSpace:tpt,thinsp:npt,thkap:rpt,thksim:opt,THORN:ipt,thorn:spt,tilde:apt,Tilde:lpt,TildeEqual:cpt,TildeFullEqual:upt,TildeTilde:dpt,timesbar:fpt,timesb:ppt,times:hpt,timesd:mpt,tint:gpt,toea:ypt,topbot:bpt,topcir:vpt,top:wpt,Topf:_pt,topf:xpt,topfork:kpt,tosa:$pt,tprime:Spt,trade:Ept,TRADE:Cpt,triangle:Tpt,triangledown:Apt,triangleleft:Npt,trianglelefteq:Rpt,triangleq:Ppt,triangleright:Opt,trianglerighteq:Ipt,tridot:Dpt,trie:Mpt,triminus:Lpt,TripleDot:Fpt,triplus:Bpt,trisb:jpt,tritime:zpt,trpezium:qpt,Tscr:Wpt,tscr:Upt,TScy:Vpt,tscy:Hpt,TSHcy:Kpt,tshcy:Gpt,Tstrok:Zpt,tstrok:Ypt,twixt:Jpt,twoheadleftarrow:Xpt,twoheadrightarrow:Qpt,Uacute:eht,uacute:tht,uarr:nht,Uarr:rht,uArr:oht,Uarrocir:iht,Ubrcy:sht,ubrcy:aht,Ubreve:lht,ubreve:cht,Ucirc:uht,ucirc:dht,Ucy:fht,ucy:pht,udarr:hht,Udblac:mht,udblac:ght,udhar:yht,ufisht:bht,Ufr:vht,ufr:wht,Ugrave:_ht,ugrave:xht,uHar:kht,uharl:$ht,uharr:Sht,uhblk:Eht,ulcorn:Cht,ulcorner:Tht,ulcrop:Aht,ultri:Nht,Umacr:Rht,umacr:Pht,uml:Oht,UnderBar:Iht,UnderBrace:Dht,UnderBracket:Mht,UnderParenthesis:Lht,Union:Fht,UnionPlus:Bht,Uogon:jht,uogon:zht,Uopf:qht,uopf:Wht,UpArrowBar:Uht,uparrow:Vht,UpArrow:Hht,Uparrow:Kht,UpArrowDownArrow:Ght,updownarrow:Zht,UpDownArrow:Yht,Updownarrow:Jht,UpEquilibrium:Xht,upharpoonleft:Qht,upharpoonright:emt,uplus:tmt,UpperLeftArrow:nmt,UpperRightArrow:rmt,upsi:omt,Upsi:imt,upsih:smt,Upsilon:amt,upsilon:lmt,UpTeeArrow:cmt,UpTee:umt,upuparrows:dmt,urcorn:fmt,urcorner:pmt,urcrop:hmt,Uring:mmt,uring:gmt,urtri:ymt,Uscr:bmt,uscr:vmt,utdot:wmt,Utilde:_mt,utilde:xmt,utri:kmt,utrif:$mt,uuarr:Smt,Uuml:Emt,uuml:Cmt,uwangle:Tmt,vangrt:Amt,varepsilon:Nmt,varkappa:Rmt,varnothing:Pmt,varphi:Omt,varpi:Imt,varpropto:Dmt,varr:Mmt,vArr:Lmt,varrho:Fmt,varsigma:Bmt,varsubsetneq:jmt,varsubsetneqq:zmt,varsupsetneq:qmt,varsupsetneqq:Wmt,vartheta:Umt,vartriangleleft:Vmt,vartriangleright:Hmt,vBar:Kmt,Vbar:Gmt,vBarv:Zmt,Vcy:Ymt,vcy:Jmt,vdash:Xmt,vDash:Qmt,Vdash:egt,VDash:tgt,Vdashl:ngt,veebar:rgt,vee:ogt,Vee:igt,veeeq:sgt,vellip:agt,verbar:lgt,Verbar:cgt,vert:ugt,Vert:dgt,VerticalBar:fgt,VerticalLine:pgt,VerticalSeparator:hgt,VerticalTilde:mgt,VeryThinSpace:ggt,Vfr:ygt,vfr:bgt,vltri:vgt,vnsub:wgt,vnsup:_gt,Vopf:xgt,vopf:kgt,vprop:$gt,vrtri:Sgt,Vscr:Egt,vscr:Cgt,vsubnE:Tgt,vsubne:Agt,vsupnE:Ngt,vsupne:Rgt,Vvdash:Pgt,vzigzag:Ogt,Wcirc:Igt,wcirc:Dgt,wedbar:Mgt,wedge:Lgt,Wedge:Fgt,wedgeq:Bgt,weierp:jgt,Wfr:zgt,wfr:qgt,Wopf:Wgt,wopf:Ugt,wp:Vgt,wr:Hgt,wreath:Kgt,Wscr:Ggt,wscr:Zgt,xcap:Ygt,xcirc:Jgt,xcup:Xgt,xdtri:Qgt,Xfr:e1t,xfr:t1t,xharr:n1t,xhArr:r1t,Xi:o1t,xi:i1t,xlarr:s1t,xlArr:a1t,xmap:l1t,xnis:c1t,xodot:u1t,Xopf:d1t,xopf:f1t,xoplus:p1t,xotime:h1t,xrarr:m1t,xrArr:g1t,Xscr:y1t,xscr:b1t,xsqcup:v1t,xuplus:w1t,xutri:_1t,xvee:x1t,xwedge:k1t,Yacute:$1t,yacute:S1t,YAcy:E1t,yacy:C1t,Ycirc:T1t,ycirc:A1t,Ycy:N1t,ycy:R1t,yen:P1t,Yfr:O1t,yfr:I1t,YIcy:D1t,yicy:M1t,Yopf:L1t,yopf:F1t,Yscr:B1t,yscr:j1t,YUcy:z1t,yucy:q1t,yuml:W1t,Yuml:U1t,Zacute:V1t,zacute:H1t,Zcaron:K1t,zcaron:G1t,Zcy:Z1t,zcy:Y1t,Zdot:J1t,zdot:X1t,zeetrf:Q1t,ZeroWidthSpace:eyt,Zeta:tyt,zeta:nyt,zfr:ryt,Zfr:oyt,ZHcy:iyt,zhcy:syt,zigrarr:ayt,zopf:lyt,Zopf:cyt,Zscr:uyt,zscr:dyt,zwj:fyt,zwnj:pyt},D8=hyt;(function(t){function e(P){return Object.prototype.toString.call(P)}function n(P){return e(P)==="[object String]"}var r=Object.prototype.hasOwnProperty;function o(P,ne){return r.call(P,ne)}function i(P){var ne=Array.prototype.slice.call(arguments,1);return ne.forEach(function(Q){if(Q){if(typeof Q!="object")throw new TypeError(Q+"must be object");Object.keys(Q).forEach(function(oe){P[oe]=Q[oe]})}}),P}function s(P,ne,Q){return[].concat(P.slice(0,ne),Q,P.slice(ne+1))}function a(P){return!(P>=55296&&P<=57343||P>=64976&&P<=65007||(P&65535)===65535||(P&65535)===65534||P>=0&&P<=8||P===11||P>=14&&P<=31||P>=127&&P<=159||P>1114111)}function l(P){if(P>65535){P-=65536;var ne=55296+(P>>10),Q=56320+(P&1023);return String.fromCharCode(ne,Q)}return String.fromCharCode(P)}var c=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,u=/&([a-z#][a-z0-9]{1,31});/gi,d=new RegExp(c.source+"|"+u.source,"gi"),f=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i,p=D8;function h(P,ne){var Q;return o(p,ne)?p[ne]:ne.charCodeAt(0)===35&&f.test(ne)&&(Q=ne[1].toLowerCase()==="x"?parseInt(ne.slice(2),16):parseInt(ne.slice(1),10),a(Q))?l(Q):P}function y(P){return P.indexOf("\\")<0?P:P.replace(c,"$1")}function m(P){return P.indexOf("\\")<0&&P.indexOf("&")<0?P:P.replace(d,function(ne,Q,oe){return Q||h(ne,oe)})}var w=/[&<>"]/,x=/[&<>"]/g,$={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function S(P){return $[P]}function I(P){return w.test(P)?P.replace(x,S):P}var E=/[.?*+^$[\]\\(){}|-]/g;function L(P){return P.replace(E,"\\$&")}function T(P){switch(P){case 9:case 32:return!0}return!1}function F(P){if(P>=8192&&P<=8202)return!0;switch(P){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}var j=om;function U(P){return j.test(P)}function ce(P){switch(P){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function W(P){return P=P.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(P=P.replace(//g,"")),P.toLowerCase().toUpperCase()}t.lib={},t.lib.mdurl=ml,t.lib.ucmicro=g8(),t.assign=i,t.isString=n,t.has=o,t.unescapeMd=y,t.unescapeAll=m,t.isValidEntityCode=a,t.fromCodePoint=l,t.escapeHtml=I,t.arrayReplaceAt=s,t.isSpace=T,t.isWhiteSpace=F,t.isMdAsciiPunct=ce,t.isPunctChar=U,t.escapeRE=L,t.normalizeReference=W})(It);var q0={},myt=function(e,n,r){var o,i,s,a,l=-1,c=e.posMax,u=e.pos;for(e.pos=n+1,o=1;e.pos<c;){if(s=e.src.charCodeAt(e.pos),s===93&&(o--,o===0)){i=!0;break}if(a=e.pos,e.md.inline.skipToken(e),s===91){if(a===e.pos-1)o++;else if(r)return e.pos=u,-1}}return i&&(l=e.pos),e.pos=u,l},wN=It.unescapeAll,gyt=function(e,n,r){var o,i,s=n,a={ok:!1,pos:0,lines:0,str:""};if(e.charCodeAt(s)===60){for(s++;s<r;){if(o=e.charCodeAt(s),o===10||o===60)return a;if(o===62)return a.pos=s+1,a.str=wN(e.slice(n+1,s)),a.ok=!0,a;if(o===92&&s+1<r){s+=2;continue}s++}return a}for(i=0;s<r&&(o=e.charCodeAt(s),!(o===32||o<32||o===127));){if(o===92&&s+1<r){if(e.charCodeAt(s+1)===32)break;s+=2;continue}if(o===40&&(i++,i>32))return a;if(o===41){if(i===0)break;i--}s++}return n===s||i!==0||(a.str=wN(e.slice(n,s)),a.pos=s,a.ok=!0),a},yyt=It.unescapeAll,byt=function(e,n,r){var o,i,s=0,a=n,l={ok:!1,pos:0,lines:0,str:""};if(a>=r||(i=e.charCodeAt(a),i!==34&&i!==39&&i!==40))return l;for(a++,i===40&&(i=41);a<r;){if(o=e.charCodeAt(a),o===i)return l.pos=a+1,l.lines=s,l.str=yyt(e.slice(n+1,a)),l.ok=!0,l;if(o===40&&i===41)return l;o===10?s++:o===92&&a+1<r&&(a++,e.charCodeAt(a)===10&&s++),a++}return l};q0.parseLinkLabel=myt;q0.parseLinkDestination=gyt;q0.parseLinkTitle=byt;var vyt=It.assign,wyt=It.unescapeAll,xc=It.escapeHtml,ds={};ds.code_inline=function(t,e,n,r,o){var i=t[e];return"<code"+o.renderAttrs(i)+">"+xc(i.content)+"</code>"};ds.code_block=function(t,e,n,r,o){var i=t[e];return"<pre"+o.renderAttrs(i)+"><code>"+xc(t[e].content)+`</code></pre>
`};ds.fence=function(t,e,n,r,o){var i=t[e],s=i.info?wyt(i.info).trim():"",a="",l="",c,u,d,f,p;return s&&(d=s.split(/(\s+)/g),a=d[0],l=d.slice(2).join("")),n.highlight?c=n.highlight(i.content,a,l)||xc(i.content):c=xc(i.content),c.indexOf("<pre")===0?c+`
`:s?(u=i.attrIndex("class"),f=i.attrs?i.attrs.slice():[],u<0?f.push(["class",n.langPrefix+a]):(f[u]=f[u].slice(),f[u][1]+=" "+n.langPrefix+a),p={attrs:f},"<pre><code"+o.renderAttrs(p)+">"+c+`</code></pre>
`):"<pre><code"+o.renderAttrs(i)+">"+c+`</code></pre>
`};ds.image=function(t,e,n,r,o){var i=t[e];return i.attrs[i.attrIndex("alt")][1]=o.renderInlineAsText(i.children,n,r),o.renderToken(t,e,n)};ds.hardbreak=function(t,e,n){return n.xhtmlOut?`<br />
`:`<br>
`};ds.softbreak=function(t,e,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};ds.text=function(t,e){return xc(t[e].content)};ds.html_block=function(t,e){return t[e].content};ds.html_inline=function(t,e){return t[e].content};function jd(){this.rules=vyt({},ds)}jd.prototype.renderAttrs=function(e){var n,r,o;if(!e.attrs)return"";for(o="",n=0,r=e.attrs.length;n<r;n++)o+=" "+xc(e.attrs[n][0])+'="'+xc(e.attrs[n][1])+'"';return o};jd.prototype.renderToken=function(e,n,r){var o,i="",s=!1,a=e[n];return a.hidden?"":(a.block&&a.nesting!==-1&&n&&e[n-1].hidden&&(i+=`
`),i+=(a.nesting===-1?"</":"<")+a.tag,i+=this.renderAttrs(a),a.nesting===0&&r.xhtmlOut&&(i+=" /"),a.block&&(s=!0,a.nesting===1&&n+1<e.length&&(o=e[n+1],(o.type==="inline"||o.hidden||o.nesting===-1&&o.tag===a.tag)&&(s=!1))),i+=s?`>
`:">",i)};jd.prototype.renderInline=function(t,e,n){for(var r,o="",i=this.rules,s=0,a=t.length;s<a;s++)r=t[s].type,typeof i[r]!="undefined"?o+=i[r](t,s,e,n,this):o+=this.renderToken(t,s,e);return o};jd.prototype.renderInlineAsText=function(t,e,n){for(var r="",o=0,i=t.length;o<i;o++)t[o].type==="text"?r+=t[o].content:t[o].type==="image"?r+=this.renderInlineAsText(t[o].children,e,n):t[o].type==="softbreak"&&(r+=`
`);return r};jd.prototype.render=function(t,e,n){var r,o,i,s="",a=this.rules;for(r=0,o=t.length;r<o;r++)i=t[r].type,i==="inline"?s+=this.renderInline(t[r].children,e,n):typeof a[i]!="undefined"?s+=a[i](t,r,e,n,this):s+=this.renderToken(t,r,e,n);return s};var _yt=jd;function yi(){this.__rules__=[],this.__cache__=null}yi.prototype.__find__=function(t){for(var e=0;e<this.__rules__.length;e++)if(this.__rules__[e].name===t)return e;return-1};yi.prototype.__compile__=function(){var t=this,e=[""];t.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(r){e.indexOf(r)<0&&e.push(r)})}),t.__cache__={},e.forEach(function(n){t.__cache__[n]=[],t.__rules__.forEach(function(r){r.enabled&&(n&&r.alt.indexOf(n)<0||t.__cache__[n].push(r.fn))})})};yi.prototype.at=function(t,e,n){var r=this.__find__(t),o=n||{};if(r===-1)throw new Error("Parser rule not found: "+t);this.__rules__[r].fn=e,this.__rules__[r].alt=o.alt||[],this.__cache__=null};yi.prototype.before=function(t,e,n,r){var o=this.__find__(t),i=r||{};if(o===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(o,0,{name:e,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};yi.prototype.after=function(t,e,n,r){var o=this.__find__(t),i=r||{};if(o===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(o+1,0,{name:e,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};yi.prototype.push=function(t,e,n){var r=n||{};this.__rules__.push({name:t,enabled:!0,fn:e,alt:r.alt||[]}),this.__cache__=null};yi.prototype.enable=function(t,e){Array.isArray(t)||(t=[t]);var n=[];return t.forEach(function(r){var o=this.__find__(r);if(o<0){if(e)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[o].enabled=!0,n.push(r)},this),this.__cache__=null,n};yi.prototype.enableOnly=function(t,e){Array.isArray(t)||(t=[t]),this.__rules__.forEach(function(n){n.enabled=!1}),this.enable(t,e)};yi.prototype.disable=function(t,e){Array.isArray(t)||(t=[t]);var n=[];return t.forEach(function(r){var o=this.__find__(r);if(o<0){if(e)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[o].enabled=!1,n.push(r)},this),this.__cache__=null,n};yi.prototype.getRules=function(t){return this.__cache__===null&&this.__compile__(),this.__cache__[t]||[]};var VS=yi,xyt=/\r\n?|\n/g,kyt=/\0/g,$yt=function(e){var n;n=e.src.replace(xyt,`
`),n=n.replace(kyt,""),e.src=n},Syt=function(e){var n;e.inlineMode?(n=new e.Token("inline","",0),n.content=e.src,n.map=[0,1],n.children=[],e.tokens.push(n)):e.md.block.parse(e.src,e.md,e.env,e.tokens)},Eyt=function(e){var n=e.tokens,r,o,i;for(o=0,i=n.length;o<i;o++)r=n[o],r.type==="inline"&&e.md.inline.parse(r.content,e.md,e.env,r.children)},Cyt=It.arrayReplaceAt;function Tyt(t){return/^<a[>\s]/i.test(t)}function Ayt(t){return/^<\/a\s*>/i.test(t)}var Nyt=function(e){var n,r,o,i,s,a,l,c,u,d,f,p,h,y,m,w,x=e.tokens,$;if(e.md.options.linkify){for(r=0,o=x.length;r<o;r++)if(!(x[r].type!=="inline"||!e.md.linkify.pretest(x[r].content)))for(i=x[r].children,h=0,n=i.length-1;n>=0;n--){if(a=i[n],a.type==="link_close"){for(n--;i[n].level!==a.level&&i[n].type!=="link_open";)n--;continue}if(a.type==="html_inline"&&(Tyt(a.content)&&h>0&&h--,Ayt(a.content)&&h++),!(h>0)&&a.type==="text"&&e.md.linkify.test(a.content)){for(u=a.content,$=e.md.linkify.match(u),l=[],p=a.level,f=0,$.length>0&&$[0].index===0&&n>0&&i[n-1].type==="text_special"&&($=$.slice(1)),c=0;c<$.length;c++)y=$[c].url,m=e.md.normalizeLink(y),e.md.validateLink(m)&&(w=$[c].text,$[c].schema?$[c].schema==="mailto:"&&!/^mailto:/i.test(w)?w=e.md.normalizeLinkText("mailto:"+w).replace(/^mailto:/,""):w=e.md.normalizeLinkText(w):w=e.md.normalizeLinkText("http://"+w).replace(/^http:\/\//,""),d=$[c].index,d>f&&(s=new e.Token("text","",0),s.content=u.slice(f,d),s.level=p,l.push(s)),s=new e.Token("link_open","a",1),s.attrs=[["href",m]],s.level=p++,s.markup="linkify",s.info="auto",l.push(s),s=new e.Token("text","",0),s.content=w,s.level=p,l.push(s),s=new e.Token("link_close","a",-1),s.level=--p,s.markup="linkify",s.info="auto",l.push(s),f=$[c].lastIndex);f<u.length&&(s=new e.Token("text","",0),s.content=u.slice(f),s.level=p,l.push(s)),x[r].children=i=Cyt(i,n,l)}}}},M8=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,Ryt=/\((c|tm|r)\)/i,Pyt=/\((c|tm|r)\)/ig,Oyt={c:"",r:"",tm:""};function Iyt(t,e){return Oyt[e.toLowerCase()]}function Dyt(t){var e,n,r=0;for(e=t.length-1;e>=0;e--)n=t[e],n.type==="text"&&!r&&(n.content=n.content.replace(Pyt,Iyt)),n.type==="link_open"&&n.info==="auto"&&r--,n.type==="link_close"&&n.info==="auto"&&r++}function Myt(t){var e,n,r=0;for(e=t.length-1;e>=0;e--)n=t[e],n.type==="text"&&!r&&M8.test(n.content)&&(n.content=n.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),n.type==="link_open"&&n.info==="auto"&&r--,n.type==="link_close"&&n.info==="auto"&&r++}var Lyt=function(e){var n;if(e.md.options.typographer)for(n=e.tokens.length-1;n>=0;n--)e.tokens[n].type==="inline"&&(Ryt.test(e.tokens[n].content)&&Dyt(e.tokens[n].children),M8.test(e.tokens[n].content)&&Myt(e.tokens[n].children))},_N=It.isWhiteSpace,xN=It.isPunctChar,kN=It.isMdAsciiPunct,Fyt=/['"]/,$N=/['"]/g,SN="";function ig(t,e,n){return t.slice(0,e)+n+t.slice(e+1)}function Byt(t,e){var n,r,o,i,s,a,l,c,u,d,f,p,h,y,m,w,x,$,S,I,E;for(S=[],n=0;n<t.length;n++){for(r=t[n],l=t[n].level,x=S.length-1;x>=0&&!(S[x].level<=l);x--);if(S.length=x+1,r.type==="text"){o=r.content,s=0,a=o.length;e:for(;s<a&&($N.lastIndex=s,i=$N.exec(o),!!i);){if(m=w=!0,s=i.index+1,$=i[0]==="'",u=32,i.index-1>=0)u=o.charCodeAt(i.index-1);else for(x=n-1;x>=0&&!(t[x].type==="softbreak"||t[x].type==="hardbreak");x--)if(t[x].content){u=t[x].content.charCodeAt(t[x].content.length-1);break}if(d=32,s<a)d=o.charCodeAt(s);else for(x=n+1;x<t.length&&!(t[x].type==="softbreak"||t[x].type==="hardbreak");x++)if(t[x].content){d=t[x].content.charCodeAt(0);break}if(f=kN(u)||xN(String.fromCharCode(u)),p=kN(d)||xN(String.fromCharCode(d)),h=_N(u),y=_N(d),y?m=!1:p&&(h||f||(m=!1)),h?w=!1:f&&(y||p||(w=!1)),d===34&&i[0]==='"'&&u>=48&&u<=57&&(w=m=!1),m&&w&&(m=f,w=p),!m&&!w){$&&(r.content=ig(r.content,i.index,SN));continue}if(w){for(x=S.length-1;x>=0&&(c=S[x],!(S[x].level<l));x--)if(c.single===$&&S[x].level===l){c=S[x],$?(I=e.md.options.quotes[2],E=e.md.options.quotes[3]):(I=e.md.options.quotes[0],E=e.md.options.quotes[1]),r.content=ig(r.content,i.index,E),t[c.token].content=ig(t[c.token].content,c.pos,I),s+=E.length-1,c.token===n&&(s+=I.length-1),o=r.content,a=o.length,S.length=x;continue e}}m?S.push({token:n,pos:i.index,single:$,level:l}):w&&$&&(r.content=ig(r.content,i.index,SN))}}}}var jyt=function(e){var n;if(e.md.options.typographer)for(n=e.tokens.length-1;n>=0;n--)e.tokens[n].type!=="inline"||!Fyt.test(e.tokens[n].content)||Byt(e.tokens[n].children,e)},zyt=function(e){var n,r,o,i,s,a,l=e.tokens;for(n=0,r=l.length;n<r;n++)if(l[n].type==="inline"){for(o=l[n].children,s=o.length,i=0;i<s;i++)o[i].type==="text_special"&&(o[i].type="text");for(i=a=0;i<s;i++)o[i].type==="text"&&i+1<s&&o[i+1].type==="text"?o[i+1].content=o[i].content+o[i+1].content:(i!==a&&(o[a]=o[i]),a++);i!==a&&(o.length=a)}};function zd(t,e,n){this.type=t,this.tag=e,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}zd.prototype.attrIndex=function(e){var n,r,o;if(!this.attrs)return-1;for(n=this.attrs,r=0,o=n.length;r<o;r++)if(n[r][0]===e)return r;return-1};zd.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]};zd.prototype.attrSet=function(e,n){var r=this.attrIndex(e),o=[e,n];r<0?this.attrPush(o):this.attrs[r]=o};zd.prototype.attrGet=function(e){var n=this.attrIndex(e),r=null;return n>=0&&(r=this.attrs[n][1]),r};zd.prototype.attrJoin=function(e,n){var r=this.attrIndex(e);r<0?this.attrPush([e,n]):this.attrs[r][1]=this.attrs[r][1]+" "+n};var HS=zd,qyt=HS;function L8(t,e,n){this.src=t,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=e}L8.prototype.Token=qyt;var Wyt=L8,Uyt=VS,bw=[["normalize",$yt],["block",Syt],["inline",Eyt],["linkify",Nyt],["replacements",Lyt],["smartquotes",jyt],["text_join",zyt]];function KS(){this.ruler=new Uyt;for(var t=0;t<bw.length;t++)this.ruler.push(bw[t][0],bw[t][1])}KS.prototype.process=function(t){var e,n,r;for(r=this.ruler.getRules(""),e=0,n=r.length;e<n;e++)r[e](t)};KS.prototype.State=Wyt;var Vyt=KS,vw=It.isSpace;function ww(t,e){var n=t.bMarks[e]+t.tShift[e],r=t.eMarks[e];return t.src.slice(n,r)}function EN(t){var e=[],n=0,r=t.length,o,i=!1,s=0,a="";for(o=t.charCodeAt(n);n<r;)o===124&&(i?(a+=t.substring(s,n-1),s=n):(e.push(a+t.substring(s,n)),a="",s=n+1)),i=o===92,n++,o=t.charCodeAt(n);return e.push(a+t.substring(s)),e}var Hyt=function(e,n,r,o){var i,s,a,l,c,u,d,f,p,h,y,m,w,x,$,S,I,E;if(n+2>r||(u=n+1,e.sCount[u]<e.blkIndent)||e.sCount[u]-e.blkIndent>=4||(a=e.bMarks[u]+e.tShift[u],a>=e.eMarks[u])||(I=e.src.charCodeAt(a++),I!==124&&I!==45&&I!==58)||a>=e.eMarks[u]||(E=e.src.charCodeAt(a++),E!==124&&E!==45&&E!==58&&!vw(E))||I===45&&vw(E))return!1;for(;a<e.eMarks[u];){if(i=e.src.charCodeAt(a),i!==124&&i!==45&&i!==58&&!vw(i))return!1;a++}for(s=ww(e,n+1),d=s.split("|"),h=[],l=0;l<d.length;l++){if(y=d[l].trim(),!y){if(l===0||l===d.length-1)continue;return!1}if(!/^:?-+:?$/.test(y))return!1;y.charCodeAt(y.length-1)===58?h.push(y.charCodeAt(0)===58?"center":"right"):y.charCodeAt(0)===58?h.push("left"):h.push("")}if(s=ww(e,n).trim(),s.indexOf("|")===-1||e.sCount[n]-e.blkIndent>=4||(d=EN(s),d.length&&d[0]===""&&d.shift(),d.length&&d[d.length-1]===""&&d.pop(),f=d.length,f===0||f!==h.length))return!1;if(o)return!0;for(x=e.parentType,e.parentType="table",S=e.md.block.ruler.getRules("blockquote"),p=e.push("table_open","table",1),p.map=m=[n,0],p=e.push("thead_open","thead",1),p.map=[n,n+1],p=e.push("tr_open","tr",1),p.map=[n,n+1],l=0;l<d.length;l++)p=e.push("th_open","th",1),h[l]&&(p.attrs=[["style","text-align:"+h[l]]]),p=e.push("inline","",0),p.content=d[l].trim(),p.children=[],p=e.push("th_close","th",-1);for(p=e.push("tr_close","tr",-1),p=e.push("thead_close","thead",-1),u=n+2;u<r&&!(e.sCount[u]<e.blkIndent);u++){for($=!1,l=0,c=S.length;l<c;l++)if(S[l](e,u,r,!0)){$=!0;break}if($||(s=ww(e,u).trim(),!s)||e.sCount[u]-e.blkIndent>=4)break;for(d=EN(s),d.length&&d[0]===""&&d.shift(),d.length&&d[d.length-1]===""&&d.pop(),u===n+2&&(p=e.push("tbody_open","tbody",1),p.map=w=[n+2,0]),p=e.push("tr_open","tr",1),p.map=[u,u+1],l=0;l<f;l++)p=e.push("td_open","td",1),h[l]&&(p.attrs=[["style","text-align:"+h[l]]]),p=e.push("inline","",0),p.content=d[l]?d[l].trim():"",p.children=[],p=e.push("td_close","td",-1);p=e.push("tr_close","tr",-1)}return w&&(p=e.push("tbody_close","tbody",-1),w[1]=u),p=e.push("table_close","table",-1),m[1]=u,e.parentType=x,e.line=u,!0},Kyt=function(e,n,r){var o,i,s;if(e.sCount[n]-e.blkIndent<4)return!1;for(i=o=n+1;o<r;){if(e.isEmpty(o)){o++;continue}if(e.sCount[o]-e.blkIndent>=4){o++,i=o;continue}break}return e.line=i,s=e.push("code_block","code",0),s.content=e.getLines(n,i,4+e.blkIndent,!1)+`
`,s.map=[n,e.line],!0},Gyt=function(e,n,r,o){var i,s,a,l,c,u,d,f=!1,p=e.bMarks[n]+e.tShift[n],h=e.eMarks[n];if(e.sCount[n]-e.blkIndent>=4||p+3>h||(i=e.src.charCodeAt(p),i!==126&&i!==96)||(c=p,p=e.skipChars(p,i),s=p-c,s<3)||(d=e.src.slice(c,p),a=e.src.slice(p,h),i===96&&a.indexOf(String.fromCharCode(i))>=0))return!1;if(o)return!0;for(l=n;l++,!(l>=r||(p=c=e.bMarks[l]+e.tShift[l],h=e.eMarks[l],p<h&&e.sCount[l]<e.blkIndent));)if(e.src.charCodeAt(p)===i&&!(e.sCount[l]-e.blkIndent>=4)&&(p=e.skipChars(p,i),!(p-c<s)&&(p=e.skipSpaces(p),!(p<h)))){f=!0;break}return s=e.sCount[n],e.line=l+(f?1:0),u=e.push("fence","code",0),u.info=a,u.content=e.getLines(n+1,l,s,!0),u.markup=d,u.map=[n,e.line],!0},Zyt=It.isSpace,Yyt=function(e,n,r,o){var i,s,a,l,c,u,d,f,p,h,y,m,w,x,$,S,I,E,L,T,F=e.lineMax,j=e.bMarks[n]+e.tShift[n],U=e.eMarks[n];if(e.sCount[n]-e.blkIndent>=4||e.src.charCodeAt(j)!==62)return!1;if(o)return!0;for(h=[],y=[],x=[],$=[],E=e.md.block.ruler.getRules("blockquote"),w=e.parentType,e.parentType="blockquote",f=n;f<r&&(T=e.sCount[f]<e.blkIndent,j=e.bMarks[f]+e.tShift[f],U=e.eMarks[f],!(j>=U));f++){if(e.src.charCodeAt(j++)===62&&!T){for(l=e.sCount[f]+1,e.src.charCodeAt(j)===32?(j++,l++,i=!1,S=!0):e.src.charCodeAt(j)===9?(S=!0,(e.bsCount[f]+l)%4===3?(j++,l++,i=!1):i=!0):S=!1,p=l,h.push(e.bMarks[f]),e.bMarks[f]=j;j<U&&(s=e.src.charCodeAt(j),Zyt(s));){s===9?p+=4-(p+e.bsCount[f]+(i?1:0))%4:p++;j++}u=j>=U,y.push(e.bsCount[f]),e.bsCount[f]=e.sCount[f]+1+(S?1:0),x.push(e.sCount[f]),e.sCount[f]=p-l,$.push(e.tShift[f]),e.tShift[f]=j-e.bMarks[f];continue}if(u)break;for(I=!1,a=0,c=E.length;a<c;a++)if(E[a](e,f,r,!0)){I=!0;break}if(I){e.lineMax=f,e.blkIndent!==0&&(h.push(e.bMarks[f]),y.push(e.bsCount[f]),$.push(e.tShift[f]),x.push(e.sCount[f]),e.sCount[f]-=e.blkIndent);break}h.push(e.bMarks[f]),y.push(e.bsCount[f]),$.push(e.tShift[f]),x.push(e.sCount[f]),e.sCount[f]=-1}for(m=e.blkIndent,e.blkIndent=0,L=e.push("blockquote_open","blockquote",1),L.markup=">",L.map=d=[n,0],e.md.block.tokenize(e,n,f),L=e.push("blockquote_close","blockquote",-1),L.markup=">",e.lineMax=F,e.parentType=w,d[1]=e.line,a=0;a<$.length;a++)e.bMarks[a+n]=h[a],e.tShift[a+n]=$[a],e.sCount[a+n]=x[a],e.bsCount[a+n]=y[a];return e.blkIndent=m,!0},Jyt=It.isSpace,Xyt=function(e,n,r,o){var i,s,a,l,c=e.bMarks[n]+e.tShift[n],u=e.eMarks[n];if(e.sCount[n]-e.blkIndent>=4||(i=e.src.charCodeAt(c++),i!==42&&i!==45&&i!==95))return!1;for(s=1;c<u;){if(a=e.src.charCodeAt(c++),a!==i&&!Jyt(a))return!1;a===i&&s++}return s<3?!1:(o||(e.line=n+1,l=e.push("hr","hr",0),l.map=[n,e.line],l.markup=Array(s+1).join(String.fromCharCode(i))),!0)},F8=It.isSpace;function CN(t,e){var n,r,o,i;return r=t.bMarks[e]+t.tShift[e],o=t.eMarks[e],n=t.src.charCodeAt(r++),n!==42&&n!==45&&n!==43||r<o&&(i=t.src.charCodeAt(r),!F8(i))?-1:r}function TN(t,e){var n,r=t.bMarks[e]+t.tShift[e],o=r,i=t.eMarks[e];if(o+1>=i||(n=t.src.charCodeAt(o++),n<48||n>57))return-1;for(;;){if(o>=i)return-1;if(n=t.src.charCodeAt(o++),n>=48&&n<=57){if(o-r>=10)return-1;continue}if(n===41||n===46)break;return-1}return o<i&&(n=t.src.charCodeAt(o),!F8(n))?-1:o}function Qyt(t,e){var n,r,o=t.level+2;for(n=e+2,r=t.tokens.length-2;n<r;n++)t.tokens[n].level===o&&t.tokens[n].type==="paragraph_open"&&(t.tokens[n+2].hidden=!0,t.tokens[n].hidden=!0,n+=2)}var e0t=function(e,n,r,o){var i,s,a,l,c,u,d,f,p,h,y,m,w,x,$,S,I,E,L,T,F,j,U,ce,W,P,ne,Q=n,oe=!1,nt=!0;if(e.sCount[Q]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[Q]-e.listIndent>=4&&e.sCount[Q]<e.blkIndent)return!1;if(o&&e.parentType==="paragraph"&&e.sCount[Q]>=e.blkIndent&&(oe=!0),(j=TN(e,Q))>=0){if(d=!0,ce=e.bMarks[Q]+e.tShift[Q],w=Number(e.src.slice(ce,j-1)),oe&&w!==1)return!1}else if((j=CN(e,Q))>=0)d=!1;else return!1;if(oe&&e.skipSpaces(j)>=e.eMarks[Q])return!1;if(o)return!0;for(m=e.src.charCodeAt(j-1),y=e.tokens.length,d?(ne=e.push("ordered_list_open","ol",1),w!==1&&(ne.attrs=[["start",w]])):ne=e.push("bullet_list_open","ul",1),ne.map=h=[Q,0],ne.markup=String.fromCharCode(m),U=!1,P=e.md.block.ruler.getRules("list"),I=e.parentType,e.parentType="list";Q<r;){for(F=j,x=e.eMarks[Q],u=$=e.sCount[Q]+j-(e.bMarks[Q]+e.tShift[Q]);F<x;){if(i=e.src.charCodeAt(F),i===9)$+=4-($+e.bsCount[Q])%4;else if(i===32)$++;else break;F++}if(s=F,s>=x?c=1:c=$-u,c>4&&(c=1),l=u+c,ne=e.push("list_item_open","li",1),ne.markup=String.fromCharCode(m),ne.map=f=[Q,0],d&&(ne.info=e.src.slice(ce,j-1)),T=e.tight,L=e.tShift[Q],E=e.sCount[Q],S=e.listIndent,e.listIndent=e.blkIndent,e.blkIndent=l,e.tight=!0,e.tShift[Q]=s-e.bMarks[Q],e.sCount[Q]=$,s>=x&&e.isEmpty(Q+1)?e.line=Math.min(e.line+2,r):e.md.block.tokenize(e,Q,r,!0),(!e.tight||U)&&(nt=!1),U=e.line-Q>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=S,e.tShift[Q]=L,e.sCount[Q]=E,e.tight=T,ne=e.push("list_item_close","li",-1),ne.markup=String.fromCharCode(m),Q=e.line,f[1]=Q,Q>=r||e.sCount[Q]<e.blkIndent||e.sCount[Q]-e.blkIndent>=4)break;for(W=!1,a=0,p=P.length;a<p;a++)if(P[a](e,Q,r,!0)){W=!0;break}if(W)break;if(d){if(j=TN(e,Q),j<0)break;ce=e.bMarks[Q]+e.tShift[Q]}else if(j=CN(e,Q),j<0)break;if(m!==e.src.charCodeAt(j-1))break}return d?ne=e.push("ordered_list_close","ol",-1):ne=e.push("bullet_list_close","ul",-1),ne.markup=String.fromCharCode(m),h[1]=Q,e.line=Q,e.parentType=I,nt&&Qyt(e,y),!0},t0t=It.normalizeReference,sg=It.isSpace,n0t=function(e,n,r,o){var i,s,a,l,c,u,d,f,p,h,y,m,w,x,$,S,I=0,E=e.bMarks[n]+e.tShift[n],L=e.eMarks[n],T=n+1;if(e.sCount[n]-e.blkIndent>=4||e.src.charCodeAt(E)!==91)return!1;for(;++E<L;)if(e.src.charCodeAt(E)===93&&e.src.charCodeAt(E-1)!==92){if(E+1===L||e.src.charCodeAt(E+1)!==58)return!1;break}for(l=e.lineMax,$=e.md.block.ruler.getRules("reference"),h=e.parentType,e.parentType="reference";T<l&&!e.isEmpty(T);T++)if(!(e.sCount[T]-e.blkIndent>3)&&!(e.sCount[T]<0)){for(x=!1,u=0,d=$.length;u<d;u++)if($[u](e,T,l,!0)){x=!0;break}if(x)break}for(w=e.getLines(n,T,e.blkIndent,!1).trim(),L=w.length,E=1;E<L;E++){if(i=w.charCodeAt(E),i===91)return!1;if(i===93){p=E;break}else i===10?I++:i===92&&(E++,E<L&&w.charCodeAt(E)===10&&I++)}if(p<0||w.charCodeAt(p+1)!==58)return!1;for(E=p+2;E<L;E++)if(i=w.charCodeAt(E),i===10)I++;else if(!sg(i))break;if(y=e.md.helpers.parseLinkDestination(w,E,L),!y.ok||(c=e.md.normalizeLink(y.str),!e.md.validateLink(c)))return!1;for(E=y.pos,I+=y.lines,s=E,a=I,m=E;E<L;E++)if(i=w.charCodeAt(E),i===10)I++;else if(!sg(i))break;for(y=e.md.helpers.parseLinkTitle(w,E,L),E<L&&m!==E&&y.ok?(S=y.str,E=y.pos,I+=y.lines):(S="",E=s,I=a);E<L&&(i=w.charCodeAt(E),!!sg(i));)E++;if(E<L&&w.charCodeAt(E)!==10&&S)for(S="",E=s,I=a;E<L&&(i=w.charCodeAt(E),!!sg(i));)E++;return E<L&&w.charCodeAt(E)!==10||(f=t0t(w.slice(1,p)),!f)?!1:(o||(typeof e.env.references=="undefined"&&(e.env.references={}),typeof e.env.references[f]=="undefined"&&(e.env.references[f]={title:S,href:c}),e.parentType=h,e.line=n+I+1),!0)},r0t=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],W0={},o0t="[a-zA-Z_:][a-zA-Z0-9:._-]*",i0t="[^\"'=<>`\\x00-\\x20]+",s0t="'[^']*'",a0t='"[^"]*"',l0t="(?:"+i0t+"|"+s0t+"|"+a0t+")",c0t="(?:\\s+"+o0t+"(?:\\s*=\\s*"+l0t+")?)",B8="<[A-Za-z][A-Za-z0-9\\-]*"+c0t+"*\\s*\\/?>",j8="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",u0t="<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->",d0t="<[?][\\s\\S]*?[?]>",f0t="<![A-Z]+\\s+[^>]*>",p0t="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",h0t=new RegExp("^(?:"+B8+"|"+j8+"|"+u0t+"|"+d0t+"|"+f0t+"|"+p0t+")"),m0t=new RegExp("^(?:"+B8+"|"+j8+")");W0.HTML_TAG_RE=h0t;W0.HTML_OPEN_CLOSE_TAG_RE=m0t;var g0t=r0t,y0t=W0.HTML_OPEN_CLOSE_TAG_RE,Jc=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+g0t.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(y0t.source+"\\s*$"),/^$/,!1]],b0t=function(e,n,r,o){var i,s,a,l,c=e.bMarks[n]+e.tShift[n],u=e.eMarks[n];if(e.sCount[n]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(c)!==60)return!1;for(l=e.src.slice(c,u),i=0;i<Jc.length&&!Jc[i][0].test(l);i++);if(i===Jc.length)return!1;if(o)return Jc[i][2];if(s=n+1,!Jc[i][1].test(l)){for(;s<r&&!(e.sCount[s]<e.blkIndent);s++)if(c=e.bMarks[s]+e.tShift[s],u=e.eMarks[s],l=e.src.slice(c,u),Jc[i][1].test(l)){l.length!==0&&s++;break}}return e.line=s,a=e.push("html_block","",0),a.map=[n,s],a.content=e.getLines(n,s,e.blkIndent,!0),!0},AN=It.isSpace,v0t=function(e,n,r,o){var i,s,a,l,c=e.bMarks[n]+e.tShift[n],u=e.eMarks[n];if(e.sCount[n]-e.blkIndent>=4||(i=e.src.charCodeAt(c),i!==35||c>=u))return!1;for(s=1,i=e.src.charCodeAt(++c);i===35&&c<u&&s<=6;)s++,i=e.src.charCodeAt(++c);return s>6||c<u&&!AN(i)?!1:(o||(u=e.skipSpacesBack(u,c),a=e.skipCharsBack(u,35,c),a>c&&AN(e.src.charCodeAt(a-1))&&(u=a),e.line=n+1,l=e.push("heading_open","h"+String(s),1),l.markup="########".slice(0,s),l.map=[n,e.line],l=e.push("inline","",0),l.content=e.src.slice(c,u).trim(),l.map=[n,e.line],l.children=[],l=e.push("heading_close","h"+String(s),-1),l.markup="########".slice(0,s)),!0)},w0t=function(e,n,r){var o,i,s,a,l,c,u,d,f,p=n+1,h,y=e.md.block.ruler.getRules("paragraph");if(e.sCount[n]-e.blkIndent>=4)return!1;for(h=e.parentType,e.parentType="paragraph";p<r&&!e.isEmpty(p);p++)if(!(e.sCount[p]-e.blkIndent>3)){if(e.sCount[p]>=e.blkIndent&&(c=e.bMarks[p]+e.tShift[p],u=e.eMarks[p],c<u&&(f=e.src.charCodeAt(c),(f===45||f===61)&&(c=e.skipChars(c,f),c=e.skipSpaces(c),c>=u)))){d=f===61?1:2;break}if(!(e.sCount[p]<0)){for(i=!1,s=0,a=y.length;s<a;s++)if(y[s](e,p,r,!0)){i=!0;break}if(i)break}}return d?(o=e.getLines(n,p,e.blkIndent,!1).trim(),e.line=p+1,l=e.push("heading_open","h"+String(d),1),l.markup=String.fromCharCode(f),l.map=[n,e.line],l=e.push("inline","",0),l.content=o,l.map=[n,e.line-1],l.children=[],l=e.push("heading_close","h"+String(d),-1),l.markup=String.fromCharCode(f),e.parentType=h,!0):!1},_0t=function(e,n,r){var o,i,s,a,l,c,u=n+1,d=e.md.block.ruler.getRules("paragraph");for(c=e.parentType,e.parentType="paragraph";u<r&&!e.isEmpty(u);u++)if(!(e.sCount[u]-e.blkIndent>3)&&!(e.sCount[u]<0)){for(i=!1,s=0,a=d.length;s<a;s++)if(d[s](e,u,r,!0)){i=!0;break}if(i)break}return o=e.getLines(n,u,e.blkIndent,!1).trim(),e.line=u,l=e.push("paragraph_open","p",1),l.map=[n,e.line],l=e.push("inline","",0),l.content=o,l.map=[n,e.line],l.children=[],l=e.push("paragraph_close","p",-1),e.parentType=c,!0},z8=HS,U0=It.isSpace;function fs(t,e,n,r){var o,i,s,a,l,c,u,d;for(this.src=t,this.md=e,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0,this.result="",i=this.src,d=!1,s=a=c=u=0,l=i.length;a<l;a++){if(o=i.charCodeAt(a),!d)if(U0(o)){c++,o===9?u+=4-u%4:u++;continue}else d=!0;(o===10||a===l-1)&&(o!==10&&a++,this.bMarks.push(s),this.eMarks.push(a),this.tShift.push(c),this.sCount.push(u),this.bsCount.push(0),d=!1,c=0,u=0,s=a+1)}this.bMarks.push(i.length),this.eMarks.push(i.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}fs.prototype.push=function(t,e,n){var r=new z8(t,e,n);return r.block=!0,n<0&&this.level--,r.level=this.level,n>0&&this.level++,this.tokens.push(r),r};fs.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]};fs.prototype.skipEmptyLines=function(e){for(var n=this.lineMax;e<n&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e};fs.prototype.skipSpaces=function(e){for(var n,r=this.src.length;e<r&&(n=this.src.charCodeAt(e),!!U0(n));e++);return e};fs.prototype.skipSpacesBack=function(e,n){if(e<=n)return e;for(;e>n;)if(!U0(this.src.charCodeAt(--e)))return e+1;return e};fs.prototype.skipChars=function(e,n){for(var r=this.src.length;e<r&&this.src.charCodeAt(e)===n;e++);return e};fs.prototype.skipCharsBack=function(e,n,r){if(e<=r)return e;for(;e>r;)if(n!==this.src.charCodeAt(--e))return e+1;return e};fs.prototype.getLines=function(e,n,r,o){var i,s,a,l,c,u,d,f=e;if(e>=n)return"";for(u=new Array(n-e),i=0;f<n;f++,i++){for(s=0,d=l=this.bMarks[f],f+1<n||o?c=this.eMarks[f]+1:c=this.eMarks[f];l<c&&s<r;){if(a=this.src.charCodeAt(l),U0(a))a===9?s+=4-(s+this.bsCount[f])%4:s++;else if(l-d<this.tShift[f])s++;else break;l++}s>r?u[i]=new Array(s-r+1).join(" ")+this.src.slice(l,c):u[i]=this.src.slice(l,c)}return u.join("")};fs.prototype.Token=z8;var x0t=fs,k0t=VS,ag=[["table",Hyt,["paragraph","reference"]],["code",Kyt],["fence",Gyt,["paragraph","reference","blockquote","list"]],["blockquote",Yyt,["paragraph","reference","blockquote","list"]],["hr",Xyt,["paragraph","reference","blockquote","list"]],["list",e0t,["paragraph","reference","blockquote"]],["reference",n0t],["html_block",b0t,["paragraph","reference","blockquote"]],["heading",v0t,["paragraph","reference","blockquote"]],["lheading",w0t],["paragraph",_0t]];function V0(){this.ruler=new k0t;for(var t=0;t<ag.length;t++)this.ruler.push(ag[t][0],ag[t][1],{alt:(ag[t][2]||[]).slice()})}V0.prototype.tokenize=function(t,e,n){for(var r,o,i,s=this.ruler.getRules(""),a=s.length,l=e,c=!1,u=t.md.options.maxNesting;l<n&&(t.line=l=t.skipEmptyLines(l),!(l>=n||t.sCount[l]<t.blkIndent));){if(t.level>=u){t.line=n;break}for(i=t.line,o=0;o<a;o++)if(r=s[o](t,l,n,!1),r){if(i>=t.line)throw new Error("block rule didn't increment state.line");break}if(!r)throw new Error("none of the block rules matched");t.tight=!c,t.isEmpty(t.line-1)&&(c=!0),l=t.line,l<n&&t.isEmpty(l)&&(c=!0,l++,t.line=l)}};V0.prototype.parse=function(t,e,n,r){var o;t&&(o=new this.State(t,e,n,r),this.tokenize(o,o.line,o.lineMax))};V0.prototype.State=x0t;var $0t=V0;function S0t(t){switch(t){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}var E0t=function(e,n){for(var r=e.pos;r<e.posMax&&!S0t(e.src.charCodeAt(r));)r++;return r===e.pos?!1:(n||(e.pending+=e.src.slice(e.pos,r)),e.pos=r,!0)},C0t=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i,T0t=function(e,n){var r,o,i,s,a,l,c,u;return!e.md.options.linkify||e.linkLevel>0||(r=e.pos,o=e.posMax,r+3>o)||e.src.charCodeAt(r)!==58||e.src.charCodeAt(r+1)!==47||e.src.charCodeAt(r+2)!==47||(i=e.pending.match(C0t),!i)||(s=i[1],a=e.md.linkify.matchAtStart(e.src.slice(r-s.length)),!a)||(l=a.url,l.length<=s.length)||(l=l.replace(/\*+$/,""),c=e.md.normalizeLink(l),!e.md.validateLink(c))?!1:(n||(e.pending=e.pending.slice(0,-s.length),u=e.push("link_open","a",1),u.attrs=[["href",c]],u.markup="linkify",u.info="auto",u=e.push("text","",0),u.content=e.md.normalizeLinkText(l),u=e.push("link_close","a",-1),u.markup="linkify",u.info="auto"),e.pos+=l.length-s.length,!0)},A0t=It.isSpace,N0t=function(e,n){var r,o,i,s=e.pos;if(e.src.charCodeAt(s)!==10)return!1;if(r=e.pending.length-1,o=e.posMax,!n)if(r>=0&&e.pending.charCodeAt(r)===32)if(r>=1&&e.pending.charCodeAt(r-1)===32){for(i=r-1;i>=1&&e.pending.charCodeAt(i-1)===32;)i--;e.pending=e.pending.slice(0,i),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(s++;s<o&&A0t(e.src.charCodeAt(s));)s++;return e.pos=s,!0},R0t=It.isSpace,GS=[];for(var NN=0;NN<256;NN++)GS.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(t){GS[t.charCodeAt(0)]=1});var P0t=function(e,n){var r,o,i,s,a,l=e.pos,c=e.posMax;if(e.src.charCodeAt(l)!==92||(l++,l>=c))return!1;if(r=e.src.charCodeAt(l),r===10){for(n||e.push("hardbreak","br",0),l++;l<c&&(r=e.src.charCodeAt(l),!!R0t(r));)l++;return e.pos=l,!0}return s=e.src[l],r>=55296&&r<=56319&&l+1<c&&(o=e.src.charCodeAt(l+1),o>=56320&&o<=57343&&(s+=e.src[l+1],l++)),i="\\"+s,n||(a=e.push("text_special","",0),r<256&&GS[r]!==0?a.content=s:a.content=i,a.markup=i,a.info="escape"),e.pos=l+1,!0},O0t=function(e,n){var r,o,i,s,a,l,c,u,d=e.pos,f=e.src.charCodeAt(d);if(f!==96)return!1;for(r=d,d++,o=e.posMax;d<o&&e.src.charCodeAt(d)===96;)d++;if(i=e.src.slice(r,d),c=i.length,e.backticksScanned&&(e.backticks[c]||0)<=r)return n||(e.pending+=i),e.pos+=c,!0;for(l=d;(a=e.src.indexOf("`",l))!==-1;){for(l=a+1;l<o&&e.src.charCodeAt(l)===96;)l++;if(u=l-a,u===c)return n||(s=e.push("code_inline","code",0),s.markup=i,s.content=e.src.slice(d,a).replace(/\n/g," ").replace(/^ (.+) $/,"$1")),e.pos=l,!0;e.backticks[u]=a}return e.backticksScanned=!0,n||(e.pending+=i),e.pos+=c,!0},H0={};H0.tokenize=function(e,n){var r,o,i,s,a,l=e.pos,c=e.src.charCodeAt(l);if(n||c!==126||(o=e.scanDelims(e.pos,!0),s=o.length,a=String.fromCharCode(c),s<2))return!1;for(s%2&&(i=e.push("text","",0),i.content=a,s--),r=0;r<s;r+=2)i=e.push("text","",0),i.content=a+a,e.delimiters.push({marker:c,length:0,token:e.tokens.length-1,end:-1,open:o.can_open,close:o.can_close});return e.pos+=o.length,!0};function RN(t,e){var n,r,o,i,s,a=[],l=e.length;for(n=0;n<l;n++)o=e[n],o.marker===126&&o.end!==-1&&(i=e[o.end],s=t.tokens[o.token],s.type="s_open",s.tag="s",s.nesting=1,s.markup="~~",s.content="",s=t.tokens[i.token],s.type="s_close",s.tag="s",s.nesting=-1,s.markup="~~",s.content="",t.tokens[i.token-1].type==="text"&&t.tokens[i.token-1].content==="~"&&a.push(i.token-1));for(;a.length;){for(n=a.pop(),r=n+1;r<t.tokens.length&&t.tokens[r].type==="s_close";)r++;r--,n!==r&&(s=t.tokens[r],t.tokens[r]=t.tokens[n],t.tokens[n]=s)}}H0.postProcess=function(e){var n,r=e.tokens_meta,o=e.tokens_meta.length;for(RN(e,e.delimiters),n=0;n<o;n++)r[n]&&r[n].delimiters&&RN(e,r[n].delimiters)};var K0={};K0.tokenize=function(e,n){var r,o,i,s=e.pos,a=e.src.charCodeAt(s);if(n||a!==95&&a!==42)return!1;for(o=e.scanDelims(e.pos,a===42),r=0;r<o.length;r++)i=e.push("text","",0),i.content=String.fromCharCode(a),e.delimiters.push({marker:a,length:o.length,token:e.tokens.length-1,end:-1,open:o.can_open,close:o.can_close});return e.pos+=o.length,!0};function PN(t,e){var n,r,o,i,s,a,l=e.length;for(n=l-1;n>=0;n--)r=e[n],!(r.marker!==95&&r.marker!==42)&&r.end!==-1&&(o=e[r.end],a=n>0&&e[n-1].end===r.end+1&&e[n-1].marker===r.marker&&e[n-1].token===r.token-1&&e[r.end+1].token===o.token+1,s=String.fromCharCode(r.marker),i=t.tokens[r.token],i.type=a?"strong_open":"em_open",i.tag=a?"strong":"em",i.nesting=1,i.markup=a?s+s:s,i.content="",i=t.tokens[o.token],i.type=a?"strong_close":"em_close",i.tag=a?"strong":"em",i.nesting=-1,i.markup=a?s+s:s,i.content="",a&&(t.tokens[e[n-1].token].content="",t.tokens[e[r.end+1].token].content="",n--))}K0.postProcess=function(e){var n,r=e.tokens_meta,o=e.tokens_meta.length;for(PN(e,e.delimiters),n=0;n<o;n++)r[n]&&r[n].delimiters&&PN(e,r[n].delimiters)};var I0t=It.normalizeReference,_w=It.isSpace,D0t=function(e,n){var r,o,i,s,a,l,c,u,d,f="",p="",h=e.pos,y=e.posMax,m=e.pos,w=!0;if(e.src.charCodeAt(e.pos)!==91||(a=e.pos+1,s=e.md.helpers.parseLinkLabel(e,e.pos,!0),s<0))return!1;if(l=s+1,l<y&&e.src.charCodeAt(l)===40){for(w=!1,l++;l<y&&(o=e.src.charCodeAt(l),!(!_w(o)&&o!==10));l++);if(l>=y)return!1;if(m=l,c=e.md.helpers.parseLinkDestination(e.src,l,e.posMax),c.ok){for(f=e.md.normalizeLink(c.str),e.md.validateLink(f)?l=c.pos:f="",m=l;l<y&&(o=e.src.charCodeAt(l),!(!_w(o)&&o!==10));l++);if(c=e.md.helpers.parseLinkTitle(e.src,l,e.posMax),l<y&&m!==l&&c.ok)for(p=c.str,l=c.pos;l<y&&(o=e.src.charCodeAt(l),!(!_w(o)&&o!==10));l++);}(l>=y||e.src.charCodeAt(l)!==41)&&(w=!0),l++}if(w){if(typeof e.env.references=="undefined")return!1;if(l<y&&e.src.charCodeAt(l)===91?(m=l+1,l=e.md.helpers.parseLinkLabel(e,l),l>=0?i=e.src.slice(m,l++):l=s+1):l=s+1,i||(i=e.src.slice(a,s)),u=e.env.references[I0t(i)],!u)return e.pos=h,!1;f=u.href,p=u.title}return n||(e.pos=a,e.posMax=s,d=e.push("link_open","a",1),d.attrs=r=[["href",f]],p&&r.push(["title",p]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,d=e.push("link_close","a",-1)),e.pos=l,e.posMax=y,!0},M0t=It.normalizeReference,xw=It.isSpace,L0t=function(e,n){var r,o,i,s,a,l,c,u,d,f,p,h,y,m="",w=e.pos,x=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91||(l=e.pos+2,a=e.md.helpers.parseLinkLabel(e,e.pos+1,!1),a<0))return!1;if(c=a+1,c<x&&e.src.charCodeAt(c)===40){for(c++;c<x&&(o=e.src.charCodeAt(c),!(!xw(o)&&o!==10));c++);if(c>=x)return!1;for(y=c,d=e.md.helpers.parseLinkDestination(e.src,c,e.posMax),d.ok&&(m=e.md.normalizeLink(d.str),e.md.validateLink(m)?c=d.pos:m=""),y=c;c<x&&(o=e.src.charCodeAt(c),!(!xw(o)&&o!==10));c++);if(d=e.md.helpers.parseLinkTitle(e.src,c,e.posMax),c<x&&y!==c&&d.ok)for(f=d.str,c=d.pos;c<x&&(o=e.src.charCodeAt(c),!(!xw(o)&&o!==10));c++);else f="";if(c>=x||e.src.charCodeAt(c)!==41)return e.pos=w,!1;c++}else{if(typeof e.env.references=="undefined")return!1;if(c<x&&e.src.charCodeAt(c)===91?(y=c+1,c=e.md.helpers.parseLinkLabel(e,c),c>=0?s=e.src.slice(y,c++):c=a+1):c=a+1,s||(s=e.src.slice(l,a)),u=e.env.references[M0t(s)],!u)return e.pos=w,!1;m=u.href,f=u.title}return n||(i=e.src.slice(l,a),e.md.inline.parse(i,e.md,e.env,h=[]),p=e.push("image","img",0),p.attrs=r=[["src",m],["alt",""]],p.children=h,p.content=i,f&&r.push(["title",f])),e.pos=c,e.posMax=x,!0},F0t=/^([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,B0t=/^([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)$/,j0t=function(e,n){var r,o,i,s,a,l,c=e.pos;if(e.src.charCodeAt(c)!==60)return!1;for(a=e.pos,l=e.posMax;;){if(++c>=l||(s=e.src.charCodeAt(c),s===60))return!1;if(s===62)break}return r=e.src.slice(a+1,c),B0t.test(r)?(o=e.md.normalizeLink(r),e.md.validateLink(o)?(n||(i=e.push("link_open","a",1),i.attrs=[["href",o]],i.markup="autolink",i.info="auto",i=e.push("text","",0),i.content=e.md.normalizeLinkText(r),i=e.push("link_close","a",-1),i.markup="autolink",i.info="auto"),e.pos+=r.length+2,!0):!1):F0t.test(r)?(o=e.md.normalizeLink("mailto:"+r),e.md.validateLink(o)?(n||(i=e.push("link_open","a",1),i.attrs=[["href",o]],i.markup="autolink",i.info="auto",i=e.push("text","",0),i.content=e.md.normalizeLinkText(r),i=e.push("link_close","a",-1),i.markup="autolink",i.info="auto"),e.pos+=r.length+2,!0):!1):!1},z0t=W0.HTML_TAG_RE;function q0t(t){return/^<a[>\s]/i.test(t)}function W0t(t){return/^<\/a\s*>/i.test(t)}function U0t(t){var e=t|32;return e>=97&&e<=122}var V0t=function(e,n){var r,o,i,s,a=e.pos;return!e.md.options.html||(i=e.posMax,e.src.charCodeAt(a)!==60||a+2>=i)||(r=e.src.charCodeAt(a+1),r!==33&&r!==63&&r!==47&&!U0t(r))||(o=e.src.slice(a).match(z0t),!o)?!1:(n||(s=e.push("html_inline","",0),s.content=o[0],q0t(s.content)&&e.linkLevel++,W0t(s.content)&&e.linkLevel--),e.pos+=o[0].length,!0)},ON=D8,H0t=It.has,K0t=It.isValidEntityCode,IN=It.fromCodePoint,G0t=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,Z0t=/^&([a-z][a-z0-9]{1,31});/i,Y0t=function(e,n){var r,o,i,s,a=e.pos,l=e.posMax;if(e.src.charCodeAt(a)!==38||a+1>=l)return!1;if(r=e.src.charCodeAt(a+1),r===35){if(i=e.src.slice(a).match(G0t),i)return n||(o=i[1][0].toLowerCase()==="x"?parseInt(i[1].slice(1),16):parseInt(i[1],10),s=e.push("text_special","",0),s.content=K0t(o)?IN(o):IN(65533),s.markup=i[0],s.info="entity"),e.pos+=i[0].length,!0}else if(i=e.src.slice(a).match(Z0t),i&&H0t(ON,i[1]))return n||(s=e.push("text_special","",0),s.content=ON[i[1]],s.markup=i[0],s.info="entity"),e.pos+=i[0].length,!0;return!1};function DN(t){var e,n,r,o,i,s,a,l,c={},u=t.length;if(u){var d=0,f=-2,p=[];for(e=0;e<u;e++)if(r=t[e],p.push(0),(t[d].marker!==r.marker||f!==r.token-1)&&(d=e),f=r.token,r.length=r.length||0,!!r.close){for(c.hasOwnProperty(r.marker)||(c[r.marker]=[-1,-1,-1,-1,-1,-1]),i=c[r.marker][(r.open?3:0)+r.length%3],n=d-p[d]-1,s=n;n>i;n-=p[n]+1)if(o=t[n],o.marker===r.marker&&o.open&&o.end<0&&(a=!1,(o.close||r.open)&&(o.length+r.length)%3===0&&(o.length%3!==0||r.length%3!==0)&&(a=!0),!a)){l=n>0&&!t[n-1].open?p[n-1]+1:0,p[e]=e-n+l,p[n]=l,r.open=!1,o.end=e,o.close=!1,s=-1,f=-2;break}s!==-1&&(c[r.marker][(r.open?3:0)+(r.length||0)%3]=s)}}}var J0t=function(e){var n,r=e.tokens_meta,o=e.tokens_meta.length;for(DN(e.delimiters),n=0;n<o;n++)r[n]&&r[n].delimiters&&DN(r[n].delimiters)},X0t=function(e){var n,r,o=0,i=e.tokens,s=e.tokens.length;for(n=r=0;n<s;n++)i[n].nesting<0&&o--,i[n].level=o,i[n].nesting>0&&o++,i[n].type==="text"&&n+1<s&&i[n+1].type==="text"?i[n+1].content=i[n].content+i[n+1].content:(n!==r&&(i[r]=i[n]),r++);n!==r&&(i.length=r)},ZS=HS,MN=It.isWhiteSpace,LN=It.isPunctChar,FN=It.isMdAsciiPunct;function am(t,e,n,r){this.src=t,this.env=n,this.md=e,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}am.prototype.pushPending=function(){var t=new ZS("text","",0);return t.content=this.pending,t.level=this.pendingLevel,this.tokens.push(t),this.pending="",t};am.prototype.push=function(t,e,n){this.pending&&this.pushPending();var r=new ZS(t,e,n),o=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],o={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(o),r};am.prototype.scanDelims=function(t,e){var n=t,r,o,i,s,a,l,c,u,d,f=!0,p=!0,h=this.posMax,y=this.src.charCodeAt(t);for(r=t>0?this.src.charCodeAt(t-1):32;n<h&&this.src.charCodeAt(n)===y;)n++;return i=n-t,o=n<h?this.src.charCodeAt(n):32,c=FN(r)||LN(String.fromCharCode(r)),d=FN(o)||LN(String.fromCharCode(o)),l=MN(r),u=MN(o),u?f=!1:d&&(l||c||(f=!1)),l?p=!1:c&&(u||d||(p=!1)),e?(s=f,a=p):(s=f&&(!p||c),a=p&&(!f||d)),{can_open:s,can_close:a,length:i}};am.prototype.Token=ZS;var Q0t=am,BN=VS,kw=[["text",E0t],["linkify",T0t],["newline",N0t],["escape",P0t],["backticks",O0t],["strikethrough",H0.tokenize],["emphasis",K0.tokenize],["link",D0t],["image",L0t],["autolink",j0t],["html_inline",V0t],["entity",Y0t]],$w=[["balance_pairs",J0t],["strikethrough",H0.postProcess],["emphasis",K0.postProcess],["fragments_join",X0t]];function lm(){var t;for(this.ruler=new BN,t=0;t<kw.length;t++)this.ruler.push(kw[t][0],kw[t][1]);for(this.ruler2=new BN,t=0;t<$w.length;t++)this.ruler2.push($w[t][0],$w[t][1])}lm.prototype.skipToken=function(t){var e,n,r=t.pos,o=this.ruler.getRules(""),i=o.length,s=t.md.options.maxNesting,a=t.cache;if(typeof a[r]!="undefined"){t.pos=a[r];return}if(t.level<s){for(n=0;n<i;n++)if(t.level++,e=o[n](t,!0),t.level--,e){if(r>=t.pos)throw new Error("inline rule didn't increment state.pos");break}}else t.pos=t.posMax;e||t.pos++,a[r]=t.pos};lm.prototype.tokenize=function(t){for(var e,n,r,o=this.ruler.getRules(""),i=o.length,s=t.posMax,a=t.md.options.maxNesting;t.pos<s;){if(r=t.pos,t.level<a){for(n=0;n<i;n++)if(e=o[n](t,!1),e){if(r>=t.pos)throw new Error("inline rule didn't increment state.pos");break}}if(e){if(t.pos>=s)break;continue}t.pending+=t.src[t.pos++]}t.pending&&t.pushPending()};lm.prototype.parse=function(t,e,n,r){var o,i,s,a=new this.State(t,e,n,r);for(this.tokenize(a),i=this.ruler2.getRules(""),s=i.length,o=0;o<s;o++)i[o](a)};lm.prototype.State=Q0t;var ebt=lm,Sw,jN;function tbt(){return jN||(jN=1,Sw=function(t){var e={};t=t||{},e.src_Any=IS().source,e.src_Cc=DS().source,e.src_Z=MS().source,e.src_P=om.source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");var n="[><]";return e.src_pseudo_letter="(?:(?!"+n+"|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|"+n+"|"+e.src_ZPCc+")(?!"+(t["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+e.src_ZCc+"|[.]|$)|"+(t["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+e.src_ZCc+"|$)|;(?!"+e.src_ZCc+"|$)|\\!+(?!"+e.src_ZCc+"|[!]|$)|\\?(?!"+e.src_ZCc+"|[?]|$))+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}),Sw}function Ax(t){var e=Array.prototype.slice.call(arguments,1);return e.forEach(function(n){n&&Object.keys(n).forEach(function(r){t[r]=n[r]})}),t}function G0(t){return Object.prototype.toString.call(t)}function nbt(t){return G0(t)==="[object String]"}function rbt(t){return G0(t)==="[object Object]"}function obt(t){return G0(t)==="[object RegExp]"}function zN(t){return G0(t)==="[object Function]"}function ibt(t){return t.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var q8={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function sbt(t){return Object.keys(t||{}).reduce(function(e,n){return e||q8.hasOwnProperty(n)},!1)}var abt={"http:":{validate:function(t,e,n){var r=t.slice(e);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(t,e,n){var r=t.slice(e);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?e>=3&&t[e-3]===":"||e>=3&&t[e-3]==="/"?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(t,e,n){var r=t.slice(e);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},lbt="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",cbt="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function ubt(t){t.__index__=-1,t.__text_cache__=""}function dbt(t){return function(e,n){var r=e.slice(n);return t.test(r)?r.match(t)[0].length:0}}function qN(){return function(t,e){e.normalize(t)}}function Y1(t){var e=t.re=tbt()(t.__opts__),n=t.__tlds__.slice();t.onCompile(),t.__tlds_replaced__||n.push(lbt),n.push(e.src_xn),e.src_tlds=n.join("|");function r(a){return a.replace("%TLDS%",e.src_tlds)}e.email_fuzzy=RegExp(r(e.tpl_email_fuzzy),"i"),e.link_fuzzy=RegExp(r(e.tpl_link_fuzzy),"i"),e.link_no_ip_fuzzy=RegExp(r(e.tpl_link_no_ip_fuzzy),"i"),e.host_fuzzy_test=RegExp(r(e.tpl_host_fuzzy_test),"i");var o=[];t.__compiled__={};function i(a,l){throw new Error('(LinkifyIt) Invalid schema "'+a+'": '+l)}Object.keys(t.__schemas__).forEach(function(a){var l=t.__schemas__[a];if(l!==null){var c={validate:null,link:null};if(t.__compiled__[a]=c,rbt(l)){obt(l.validate)?c.validate=dbt(l.validate):zN(l.validate)?c.validate=l.validate:i(a,l),zN(l.normalize)?c.normalize=l.normalize:l.normalize?i(a,l):c.normalize=qN();return}if(nbt(l)){o.push(a);return}i(a,l)}}),o.forEach(function(a){t.__compiled__[t.__schemas__[a]]&&(t.__compiled__[a].validate=t.__compiled__[t.__schemas__[a]].validate,t.__compiled__[a].normalize=t.__compiled__[t.__schemas__[a]].normalize)}),t.__compiled__[""]={validate:null,normalize:qN()};var s=Object.keys(t.__compiled__).filter(function(a){return a.length>0&&t.__compiled__[a]}).map(ibt).join("|");t.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+s+")","i"),t.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+s+")","ig"),t.re.schema_at_start=RegExp("^"+t.re.schema_search.source,"i"),t.re.pretest=RegExp("("+t.re.schema_test.source+")|("+t.re.host_fuzzy_test.source+")|@","i"),ubt(t)}function fbt(t,e){var n=t.__index__,r=t.__last_index__,o=t.__text_cache__.slice(n,r);this.schema=t.__schema__.toLowerCase(),this.index=n+e,this.lastIndex=r+e,this.raw=o,this.text=o,this.url=o}function Nx(t,e){var n=new fbt(t,e);return t.__compiled__[n.schema].normalize(n,t),n}function fo(t,e){if(!(this instanceof fo))return new fo(t,e);e||sbt(t)&&(e=t,t={}),this.__opts__=Ax({},q8,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=Ax({},abt,t),this.__compiled__={},this.__tlds__=cbt,this.__tlds_replaced__=!1,this.re={},Y1(this)}fo.prototype.add=function(e,n){return this.__schemas__[e]=n,Y1(this),this};fo.prototype.set=function(e){return this.__opts__=Ax(this.__opts__,e),this};fo.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;var n,r,o,i,s,a,l,c,u;if(this.re.schema_test.test(e)){for(l=this.re.schema_search,l.lastIndex=0;(n=l.exec(e))!==null;)if(i=this.testSchemaAt(e,n[2],l.lastIndex),i){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+i;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(c=e.search(this.re.host_fuzzy_test),c>=0&&(this.__index__<0||c<this.__index__)&&(r=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(s=r.index+r[1].length,(this.__index__<0||s<this.__index__)&&(this.__schema__="",this.__index__=s,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(u=e.indexOf("@"),u>=0&&(o=e.match(this.re.email_fuzzy))!==null&&(s=o.index+o[1].length,a=o.index+o[0].length,(this.__index__<0||s<this.__index__||s===this.__index__&&a>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=s,this.__last_index__=a))),this.__index__>=0};fo.prototype.pretest=function(e){return this.re.pretest.test(e)};fo.prototype.testSchemaAt=function(e,n,r){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(e,r,this):0};fo.prototype.match=function(e){var n=0,r=[];this.__index__>=0&&this.__text_cache__===e&&(r.push(Nx(this,n)),n=this.__last_index__);for(var o=n?e.slice(n):e;this.test(o);)r.push(Nx(this,n)),o=o.slice(this.__last_index__),n+=this.__last_index__;return r.length?r:null};fo.prototype.matchAtStart=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return null;var n=this.re.schema_at_start.exec(e);if(!n)return null;var r=this.testSchemaAt(e,n[2],n[0].length);return r?(this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+r,Nx(this,0)):null};fo.prototype.tlds=function(e,n){return e=Array.isArray(e)?e:[e],n?(this.__tlds__=this.__tlds__.concat(e).sort().filter(function(r,o,i){return r!==i[o-1]}).reverse(),Y1(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,Y1(this),this)};fo.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),e.schema==="mailto:"&&!/^mailto:/i.test(e.url)&&(e.url="mailto:"+e.url)};fo.prototype.onCompile=function(){};var pbt=fo,hbt={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},mbt={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},gbt={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},sp=It,ybt=q0,bbt=_yt,vbt=Vyt,wbt=$0t,_bt=ebt,xbt=pbt,Ul=ml,W8=P8,kbt={default:hbt,zero:mbt,commonmark:gbt},$bt=/^(vbscript|javascript|file|data):/,Sbt=/^data:image\/(gif|png|jpeg|webp);/;function Ebt(t){var e=t.trim().toLowerCase();return $bt.test(e)?!!Sbt.test(e):!0}var U8=["http:","https:","mailto:"];function Cbt(t){var e=Ul.parse(t,!0);if(e.hostname&&(!e.protocol||U8.indexOf(e.protocol)>=0))try{e.hostname=W8.toASCII(e.hostname)}catch(n){}return Ul.encode(Ul.format(e))}function Tbt(t){var e=Ul.parse(t,!0);if(e.hostname&&(!e.protocol||U8.indexOf(e.protocol)>=0))try{e.hostname=W8.toUnicode(e.hostname)}catch(n){}return Ul.decode(Ul.format(e),Ul.decode.defaultChars+"%")}function zo(t,e){if(!(this instanceof zo))return new zo(t,e);e||sp.isString(t)||(e=t||{},t="default"),this.inline=new _bt,this.block=new wbt,this.core=new vbt,this.renderer=new bbt,this.linkify=new xbt,this.validateLink=Ebt,this.normalizeLink=Cbt,this.normalizeLinkText=Tbt,this.utils=sp,this.helpers=sp.assign({},ybt),this.options={},this.configure(t),e&&this.set(e)}zo.prototype.set=function(t){return sp.assign(this.options,t),this};zo.prototype.configure=function(t){var e=this,n;if(sp.isString(t)&&(n=t,t=kbt[n],!t))throw new Error('Wrong `markdown-it` preset "'+n+'", check name');if(!t)throw new Error("Wrong `markdown-it` preset, can't be empty");return t.options&&e.set(t.options),t.components&&Object.keys(t.components).forEach(function(r){t.components[r].rules&&e[r].ruler.enableOnly(t.components[r].rules),t.components[r].rules2&&e[r].ruler2.enableOnly(t.components[r].rules2)}),this};zo.prototype.enable=function(t,e){var n=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(o){n=n.concat(this[o].ruler.enable(t,!0))},this),n=n.concat(this.inline.ruler2.enable(t,!0));var r=t.filter(function(o){return n.indexOf(o)<0});if(r.length&&!e)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};zo.prototype.disable=function(t,e){var n=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(o){n=n.concat(this[o].ruler.disable(t,!0))},this),n=n.concat(this.inline.ruler2.disable(t,!0));var r=t.filter(function(o){return n.indexOf(o)<0});if(r.length&&!e)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};zo.prototype.use=function(t){var e=[this].concat(Array.prototype.slice.call(arguments,1));return t.apply(t,e),this};zo.prototype.parse=function(t,e){if(typeof t!="string")throw new Error("Input data should be a String");var n=new this.core.State(t,this,e);return this.core.process(n),n.tokens};zo.prototype.render=function(t,e){return e=e||{},this.renderer.render(this.parse(t,e),this.options,e)};zo.prototype.parseInline=function(t,e){var n=new this.core.State(t,this,e);return n.inlineMode=!0,this.core.process(n),n.tokens};zo.prototype.renderInline=function(t,e){return e=e||{},this.renderer.render(this.parseInline(t,e),this.options,e)};var Abt=zo,Nbt=Abt,Rbt=Ws(Nbt);const Pbt=new c5({nodes:{doc:{content:"block+"},paragraph:{content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM(){return["p",0]}},blockquote:{content:"block+",group:"block",parseDOM:[{tag:"blockquote"}],toDOM(){return["blockquote",0]}},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM(){return["div",["hr"]]}},heading:{attrs:{level:{default:1}},content:"(text | image)*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}],toDOM(t){return["h"+t.attrs.level,0]}},code_block:{content:"text*",group:"block",code:!0,defining:!0,marks:"",attrs:{params:{default:""}},parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:t=>({params:t.getAttribute("data-params")||""})}],toDOM(t){return["pre",t.attrs.params?{"data-params":t.attrs.params}:{},["code",0]]}},ordered_list:{content:"list_item+",group:"block",attrs:{order:{default:1},tight:{default:!1}},parseDOM:[{tag:"ol",getAttrs(t){return{order:t.hasAttribute("start")?+t.getAttribute("start"):1,tight:t.hasAttribute("data-tight")}}}],toDOM(t){return["ol",{start:t.attrs.order==1?null:t.attrs.order,"data-tight":t.attrs.tight?"true":null},0]}},bullet_list:{content:"list_item+",group:"block",attrs:{tight:{default:!1}},parseDOM:[{tag:"ul",getAttrs:t=>({tight:t.hasAttribute("data-tight")})}],toDOM(t){return["ul",{"data-tight":t.attrs.tight?"true":null},0]}},list_item:{content:"block+",defining:!0,parseDOM:[{tag:"li"}],toDOM(){return["li",0]}},text:{group:"inline"},image:{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs(t){return{src:t.getAttribute("src"),title:t.getAttribute("title"),alt:t.getAttribute("alt")}}}],toDOM(t){return["img",t.attrs]}},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM(){return["br"]}}},marks:{em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"},{style:"font-style=normal",clearMark:t=>t.type.name=="em"}],toDOM(){return["em"]}},strong:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name=="strong"},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}],toDOM(){return["strong"]}},link:{attrs:{href:{},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs(t){return{href:t.getAttribute("href"),title:t.getAttribute("title")}}}],toDOM(t){return["a",t.attrs]}},code:{parseDOM:[{tag:"code"}],toDOM(){return["code"]}}}});function Obt(t,e){if(t.isText&&e.isText&&Et.sameSet(t.marks,e.marks))return t.withText(t.text+e.text)}class Ibt{constructor(e,n){this.schema=e,this.tokenHandlers=n,this.stack=[{type:e.topNodeType,attrs:null,content:[],marks:Et.none}]}top(){return this.stack[this.stack.length-1]}push(e){this.stack.length&&this.top().content.push(e)}addText(e){if(!e)return;let n=this.top(),r=n.content,o=r[r.length-1],i=this.schema.text(e,n.marks),s;o&&(s=Obt(o,i))?r[r.length-1]=s:r.push(i)}openMark(e){let n=this.top();n.marks=e.addToSet(n.marks)}closeMark(e){let n=this.top();n.marks=e.removeFromSet(n.marks)}parseTokens(e){for(let n=0;n<e.length;n++){let r=e[n],o=this.tokenHandlers[r.type];if(!o)throw new Error("Token type `"+r.type+"` not supported by Markdown parser");o(this,r,e,n)}}addNode(e,n,r){let o=this.top(),i=e.createAndFill(n,r,o?o.marks:[]);return i?(this.push(i),i):null}openNode(e,n){this.stack.push({type:e,attrs:n,content:[],marks:Et.none})}closeNode(){let e=this.stack.pop();return this.addNode(e.type,e.attrs,e.content)}}function gf(t,e,n,r){return t.getAttrs?t.getAttrs(e,n,r):t.attrs instanceof Function?t.attrs(e):t.attrs}function Ew(t,e){return t.noCloseToken||e=="code_inline"||e=="code_block"||e=="fence"}function WN(t){return t[t.length-1]==`
`?t.slice(0,t.length-1):t}function Cw(){}function Dbt(t,e){let n=Object.create(null);for(let r in e){let o=e[r];if(o.block){let i=t.nodeType(o.block);Ew(o,r)?n[r]=(s,a,l,c)=>{s.openNode(i,gf(o,a,l,c)),s.addText(WN(a.content)),s.closeNode()}:(n[r+"_open"]=(s,a,l,c)=>s.openNode(i,gf(o,a,l,c)),n[r+"_close"]=s=>s.closeNode())}else if(o.node){let i=t.nodeType(o.node);n[r]=(s,a,l,c)=>s.addNode(i,gf(o,a,l,c))}else if(o.mark){let i=t.marks[o.mark];Ew(o,r)?n[r]=(s,a,l,c)=>{s.openMark(i.create(gf(o,a,l,c))),s.addText(WN(a.content)),s.closeMark(i)}:(n[r+"_open"]=(s,a,l,c)=>s.openMark(i.create(gf(o,a,l,c))),n[r+"_close"]=s=>s.closeMark(i))}else if(o.ignore)Ew(o,r)?n[r]=Cw:(n[r+"_open"]=Cw,n[r+"_close"]=Cw);else throw new RangeError("Unrecognized parsing spec "+JSON.stringify(o))}return n.text=(r,o)=>r.addText(o.content),n.inline=(r,o)=>r.parseTokens(o.children),n.softbreak=n.softbreak||(r=>r.addText(" ")),n}class V8{constructor(e,n,r){this.schema=e,this.tokenizer=n,this.tokens=r,this.tokenHandlers=Dbt(e,r)}parse(e,n={}){let r=new Ibt(this.schema,this.tokenHandlers),o;r.parseTokens(this.tokenizer.parse(e,n));do o=r.closeNode();while(r.stack.length);return o||this.schema.topNodeType.createAndFill()}}function UN(t,e){for(;++e<t.length;)if(t[e].type!="list_item_open")return t[e].hidden;return!1}new V8(Pbt,Rbt("commonmark",{html:!1}),{blockquote:{block:"blockquote"},paragraph:{block:"paragraph"},list_item:{block:"list_item"},bullet_list:{block:"bullet_list",getAttrs:(t,e,n)=>({tight:UN(e,n)})},ordered_list:{block:"ordered_list",getAttrs:(t,e,n)=>({order:+t.attrGet("start")||1,tight:UN(e,n)})},heading:{block:"heading",getAttrs:t=>({level:+t.tag.slice(1)})},code_block:{block:"code_block",noCloseToken:!0},fence:{block:"code_block",getAttrs:t=>({params:t.info||""}),noCloseToken:!0},hr:{node:"horizontal_rule"},image:{node:"image",getAttrs:t=>({src:t.attrGet("src"),title:t.attrGet("title")||null,alt:t.children[0]&&t.children[0].content||null})},hardbreak:{node:"hard_break"},em:{mark:"em"},strong:{mark:"strong"},link:{mark:"link",getAttrs:t=>({href:t.attrGet("href"),title:t.attrGet("title")||null})},code_inline:{mark:"code",noCloseToken:!0}});class Mbt{constructor(e,n,r={}){this.nodes=e,this.marks=n,this.options=r}serialize(e,n={}){n=Object.assign({},this.options,n);let r=new Lbt(this.nodes,this.marks,n);return r.renderContent(e),r.out}}class Lbt{constructor(e,n,r){this.nodes=e,this.marks=n,this.options=r,this.delim="",this.out="",this.closed=null,this.inAutolink=void 0,this.atBlockStart=!1,this.inTightList=!1,typeof this.options.tightLists=="undefined"&&(this.options.tightLists=!1),typeof this.options.hardBreakNodeName=="undefined"&&(this.options.hardBreakNodeName="hard_break")}flushClose(e=2){if(this.closed){if(this.atBlank()||(this.out+=`
`),e>1){let n=this.delim,r=/\s+$/.exec(n);r&&(n=n.slice(0,n.length-r[0].length));for(let o=1;o<e;o++)this.out+=n+`
`}this.closed=null}}wrapBlock(e,n,r,o){let i=this.delim;this.write(n!=null?n:e),this.delim+=e,o(),this.delim=i,this.closeBlock(r)}atBlank(){return/(^|\n)$/.test(this.out)}ensureNewLine(){this.atBlank()||(this.out+=`
`)}write(e){this.flushClose(),this.delim&&this.atBlank()&&(this.out+=this.delim),e&&(this.out+=e)}closeBlock(e){this.closed=e}text(e,n=!0){let r=e.split(`
`);for(let o=0;o<r.length;o++)this.write(),!n&&r[o][0]=="["&&/(^|[^\\])\!$/.test(this.out)&&(this.out=this.out.slice(0,this.out.length-1)+"\\!"),this.out+=n?this.esc(r[o],this.atBlockStart):r[o],o!=r.length-1&&(this.out+=`
`)}render(e,n,r){if(typeof n=="number")throw new Error("!");if(!this.nodes[e.type.name])throw new Error("Token type `"+e.type.name+"` not supported by Markdown renderer");this.nodes[e.type.name](this,e,n,r)}renderContent(e){e.forEach((n,r,o)=>this.render(n,e,o))}renderInline(e){this.atBlockStart=!0;let n=[],r="",o=(i,s,a)=>{let l=i?i.marks:[];i&&i.type.name===this.options.hardBreakNodeName&&(l=l.filter(h=>{if(a+1==e.childCount)return!1;let y=e.child(a+1);return h.isInSet(y.marks)&&(!y.isText||/\S/.test(y.text))}));let c=r;if(r="",i&&i.isText&&l.some(h=>{let y=this.marks[h.type.name];return y&&y.expelEnclosingWhitespace&&!h.isInSet(n)})){let[h,y,m]=/^(\s*)(.*)$/m.exec(i.text);y&&(c+=y,i=m?i.withText(m):null,i||(l=n))}if(i&&i.isText&&l.some(h=>{let y=this.marks[h.type.name];return y&&y.expelEnclosingWhitespace&&(a==e.childCount-1||!h.isInSet(e.child(a+1).marks))})){let[h,y,m]=/^(.*?)(\s*)$/m.exec(i.text);m&&(r=m,i=y?i.withText(y):null,i||(l=n))}let u=l.length?l[l.length-1]:null,d=u&&this.marks[u.type.name].escape===!1,f=l.length-(d?1:0);e:for(let h=0;h<f;h++){let y=l[h];if(!this.marks[y.type.name].mixable)break;for(let m=0;m<n.length;m++){let w=n[m];if(!this.marks[w.type.name].mixable)break;if(y.eq(w)){h>m?l=l.slice(0,m).concat(y).concat(l.slice(m,h)).concat(l.slice(h+1,f)):m>h&&(l=l.slice(0,h).concat(l.slice(h+1,m)).concat(y).concat(l.slice(m,f)));continue e}}}let p=0;for(;p<Math.min(n.length,f)&&l[p].eq(n[p]);)++p;for(;p<n.length;)this.text(this.markString(n.pop(),!1,e,a),!1);if(c&&this.text(c),i){for(;n.length<f;){let h=l[n.length];n.push(h),this.text(this.markString(h,!0,e,a),!1),this.atBlockStart=!1}d&&i.isText?this.text(this.markString(u,!0,e,a)+i.text+this.markString(u,!1,e,a+1),!1):this.render(i,e,a),this.atBlockStart=!1}i!=null&&i.isText&&i.nodeSize>0&&(this.atBlockStart=!1)};e.forEach(o),o(null,0,e.childCount),this.atBlockStart=!1}renderList(e,n,r){this.closed&&this.closed.type==e.type?this.flushClose(3):this.inTightList&&this.flushClose(1);let o=typeof e.attrs.tight!="undefined"?e.attrs.tight:this.options.tightLists,i=this.inTightList;this.inTightList=o,e.forEach((s,a,l)=>{l&&o&&this.flushClose(1),this.wrapBlock(n,r(l),e,()=>this.render(s,e,l))}),this.inTightList=i}esc(e,n=!1){return e=e.replace(/[`*\\~\[\]_]/g,(r,o)=>r=="_"&&o>0&&o+1<e.length&&e[o-1].match(/\w/)&&e[o+1].match(/\w/)?r:"\\"+r),n&&(e=e.replace(/^[\-*+>]/,"\\$&").replace(/^(\s*)(#{1,6})(\s|$)/,"$1\\$2$3").replace(/^(\s*\d+)\.\s/,"$1\\. ")),this.options.escapeExtraCharacters&&(e=e.replace(this.options.escapeExtraCharacters,"\\$&")),e}quote(e){let n=e.indexOf('"')==-1?'""':e.indexOf("'")==-1?"''":"()";return n[0]+e+n[1]}repeat(e,n){let r="";for(let o=0;o<n;o++)r+=e;return r}markString(e,n,r,o){let i=this.marks[e.type.name],s=n?i.open:i.close;return typeof s=="string"?s:s(this,e,r,o)}getEnclosingWhitespace(e){return{leading:(e.match(/^(\s+)/)||[void 0])[0],trailing:(e.match(/(\s+)$/)||[void 0])[0]}}}function H8(t,{tokenName:e,regex:n,getTokenDetails:r=o=>({payload:o.slice(1,-1),markup:""})}){const o=t.utils.arrayReplaceAt;t.core.ruler.push(e,i=>{var s,a,l,c,u,d=i.tokens,f=0;for(a=0,l=d.length;a<l;a++){let p=d[a];if(!(!p||p.type!=="inline"))for(c=p.children,s=c.length-1;s>=0;s--)u=c[s],u&&u.type==="text"&&f===0&&n.test(u.content)&&(p.children=c=o(c,s,Fbt(n,r,e)(u.content,u.level,i.Token)))}})}function Fbt(t,e,n){return(r,o,i)=>{var s,a=0,l=[];return r.replace(t,(c,...u)=>{const d=u[u.length-2];let{payload:f,markup:p,whiteSpaceAfter:h,whiteSpaceBefore:y}=e(c,d,r);if(d>a&&(s=new i("text","",0),s.content=r.slice(a,d),l.push(s)),y){let m=new i("text","",0);m.content=" ",l.push(m)}if(s=new i(n,"",0),s.markup=p,s.payload=f,l.push(s),h){let m=new i("text","",0);m.content=" ",l.push(m)}return a=d+c.length,""}),a<r.length&&(s=new i("text","",0),s.content=r.slice(a),l.push(s)),l}}function K8(t=new Hh){var e,n;const r=Object.fromEntries(t.spec.filter(s=>s.markdown&&s.markdown.parseMarkdown).flatMap(s=>{var a;return Object.entries(((a=s.markdown)===null||a===void 0?void 0:a.parseMarkdown)||{})}));let o={};for(const s of t.spec)s.type==="node"&&(!((e=s.markdown)===null||e===void 0)&&e.toMarkdown)&&(o[s.name]=s.markdown.toMarkdown);let i={};for(const s of t.spec)s.type==="mark"&&(!((n=s.markdown)===null||n===void 0)&&n.toMarkdown)&&(i[s.name]=s.markdown.toMarkdown);return{tokens:r,serializer:{node:o,mark:i}}}function Bbt(t,e={}){t.core.ruler.after("inline","tables",function(n){return n.tokens=VN(n.tokens,"tbody"),n.tokens=VN(n.tokens,"thead"),n.tokens=jbt(n.tokens),!1})}function VN(t,e){const n=e+"_open",r=e+"_close";let o=0;return t.filter(i=>(i.level=i.level-o,n===i.type&&o++,r===i.type&&o--,![n,r].includes(i.type)))}function jbt(t){return t.flatMap(e=>{if(["th_open","td_open"].includes(e.type)){if(e.attrs){const[,n]=e.attrs[0]||[];n&&(e.align=n.split(":")[1])}return[e,new Cx("paragraph_open","p",1)]}return["th_close","td_close"].includes(e.type)?[e,new Cx("paragraph_close","p",-1)]:e})}function zbt(t,e={}){const{todoListOpenType:n="bullet_list_open",todoListCloseType:r="bullet_list_close",todoItemCloseType:o="list_item_close",todoItemOpenName:i="list_item_open",isDoneAttrName:s="isDone"}=e;t.core.ruler.after("inline","gfm-todo-list",function(h){for(var y=h.tokens,m=0;m<y.length;m++)a(y,m)});function a(h,y){var m;if(((m=h[y])===null||m===void 0?void 0:m.type)!=="bullet_list_open")return;const w=c(h,y);if(w.filter(([$])=>$.type==="list_item_open").every(([$,S])=>!p(h,S)))return;if(w.some(([$])=>!$.type.startsWith("list_item_")))throw new Error("Expected all children to be of type list_item_*");const x=l(h,y);if(x===-1)throw new Error("Must have a closing token");h[y].type=n,h[x].type=r,w.forEach(([$])=>{$.type==="list_item_close"&&($.type=o),$.type==="list_item_open"&&($.type=i)}),w.filter(([$])=>$.type===i).forEach(([$,S])=>{const I=h[S+2];Lt(I,"inlineToken cannot be undefined"),I.children==null&&(I.children=[new Cx("text","",0)]);const E=I.children[0];Lt(E,"inlineTokenChild cannot be undefined");let L=null;if(f(E)){const F=typeof E.content=="string"?E.content.charAt(1):null;F&&["x","X"].includes(F)?L="yes":L="no"}const T=$.attrs;L&&(T?$.attrs=[[s,L],...T]:$.attrs=[[s,L]]),E.content=u(E.content),I.content=u(I.content)})}function l(h,y){var m,w;const x=((m=h[y])===null||m===void 0?void 0:m.type)||"";if(!x.endsWith("_open"))throw new Error("expect type to be _open");const $=x.split("_open").join("")+"_close";for(var S=(w=h[y])===null||w===void 0?void 0:w.level,I=y+1;I<h.length;I++)if(h[I].level===S&&h[I].type===$)return I;return-1}function c(h,y){const m=h[y];if(Lt(m,"parentOpen cannot be undefined"),!m.type.endsWith("_open"))throw new Error("Can only work with _open types");const w=m.type.split("_open").join("")+"_close",x=[];for(let $=y+1;$<h.length;$++){const S=h[$];if(S.level<m.level||S.level===m.level&&S.type===w)break;S.level===m.level+1&&x.push([S,$])}return x}function u(h){return d(h)?h.slice(4):h}function d(h){return h?h.startsWith("[ ] ")||h.startsWith("[x] ")||h.startsWith("[X] "):!1}function f(h){return d(h==null?void 0:h.content)}function p(h,y){function m($){return($==null?void 0:$.type)==="inline"}function w($){return($==null?void 0:$.type)==="paragraph_open"}function x($){return($==null?void 0:$.type)==="list_item_open"}return m(h[y+2])&&w(h[y+1])&&x(h[y])&&f(h[y+2])}}const G8=()=>G4e().use(zbt).use(Bbt);function Z8(t=new Hh,e=G8()){const{tokens:n}=K8(t);return new V8(t.schema,e,n)}const Y8=t=>{const{serializer:e}=K8(t);return new Mbt(e.node,e.mark)},{flattenFragmentJSON:qbt}=Ao,Wbt=()=>{let t,e;return n=>(n!==e&&(t=Y8(n)),t)},Ubt=()=>{const t=(o,i)=>{let s=G8();return i.forEach(a=>{Array.isArray(a)?s=s.use(...a):s=s.use(a)}),Z8(o,s)};let e,n,r;return(o,i)=>((o!==n||i!==r)&&(e=t(o,i),n=o,r=i),e)},Vbt=Ubt(),Hbt=Wbt(),Kbt=(t,e,n)=>{var o;const r=Vbt(e,n);return(o=r==null?void 0:r.parse(t))!=null?o:void 0},Gbt=(t,e)=>{var r;return t=Ybt(t,e),(r=Hbt(e))==null?void 0:r.serialize(t)};function Zbt(t,e){return d0(t,n=>n.type===e.schema.nodes.heading&&!!n.attrs.collapseContent,!1)}function Ybt(t,e){const n=new Set(Zbt(t,e).map(o=>o.node));if(n.size===0)return t;let r=te.empty;return t.forEach(o=>{if(!n.has(o)){r=r.append(te.from(o));return}r=r.append(te.from(e.schema.nodes.heading.createChecked({...o.attrs,collapseContent:null},o.content))).append(te.fromJSON(e.schema,qbt(o.attrs.collapseContent)))}),t=t.replace(0,t.content.size,new Se(r,0,0)),t}const Jbt={name:"markdown-format-provider",description:"Saves notes in Markdown format",extensions:["md"],serializeNote(t,e){return Gbt(t,e)||""},parseNote(t,e,n){return Kbt(t,e,n)}};function ks(t,e){return{key:t,value:e,lastModified:Date.now()}}class Xbt{constructor(e,n,r){this.dbName=e,this._storeName=n,this._openDb=r}async bulkDelete(e){const r=(await this._openDb()).transaction(this._storeName,"readwrite"),o=r.objectStore(this._storeName);let i=[];for(const s of e)i.push(o.delete(s));await Promise.all(i),await r.done}async bulkPutIfNotExists(e,n={}){const o=(await this._openDb()).transaction(this._storeName,"readwrite",n),i=o.objectStore(this._storeName);let s=[],a=[];for(const{key:l,value:c}of e)await i.get(l)?a.push(l):s.push(i.put(ks(l,c)));return await Promise.all(s),await o.done,{failed:a}}async bulkUpdateIfExists(e,n,r={}){const i=(await this._openDb()).transaction(this._storeName,"readwrite",r),s=i.objectStore(this._storeName);let a=[],l=[];for(const c of e){const u=await s.get(c);if(u){const d=ks(c,n(c,u.value));a.push(s.put(d))}else l.push(c)}return await Promise.all(a),await i.done,{failed:l}}async delete(e){await(await this._openDb()).delete(this._storeName,e)}async get(e){const r=await(await this._openDb()).get(this._storeName,e);return r==null?void 0:r.value}async getAll(){return(await(await this._openDb()).getAll(this._storeName)).map(r=>r.value)}openDb(){return this._openDb()}async put(e,n){const r=await this._openDb(),o=ks(e,n);await r.put(this._storeName,o)}async putIfNotExists(e,n,r={}){const i=(await this._openDb()).transaction(this._storeName,"readwrite",r),s=i.objectStore(this._storeName);if(await s.get(e))return await i.done,!1;{let l=ks(e,n);return await Promise.all([s.put(l),i.done]),!0}}async updateIfExists(e,n,r={}){const i=(await this._openDb()).transaction(this._storeName,"readwrite",r),s=i.objectStore(this._storeName),a=await s.get(e);if(a){let l=ks(e,n(a.value));return await Promise.all([s.put(l),i.done]),!0}else return await i.done,!1}}function YS(t,e,n){return new Xbt(t,e,n)}const J8="bangle-io-db",Qbt=2,sd="WorkspaceInfo",evt="DummyTable",X8="MiscTable",tvt=[sd,evt,X8];function Q8(){return $0(J8,Qbt,{upgrade(t,e){switch(e){case 0:{for(const n of tvt)t.createObjectStore(n,{keyPath:"key"});break}case 1:{t.createObjectStore(X8,{keyPath:"key"});break}}}})}function e6(){return Q8()}function t6(){return YS(J8,sd,Q8)}let Tw;const n6=()=>(Tw||(Tw={deleted:!1,metadata:{allowLocalChanges:!0},name:Dc,type:cn.Help,lastModified:Date.now()}),Tw);async function Js(t,{allowDeleted:e=!1,type:n}={}){let r=await t6().get(t).catch(o=>{console.warn("Error reading workspace info from db",o)});if(t===Dc&&(r=n6()),!(!e&&(r!=null&&r.deleted)))return n?r&&r.type===n?r:void 0:r}async function nvt(t,e){var n;return(n=await Js(t,e))==null?void 0:n.metadata}async function rvt(t,e){const n=await Js(t);return n?await r6(t,r=>({...n,...r,metadata:{...typeof e=="function"?e((r||n).metadata):e}})):!1}async function ovt(t){return[...(await t6().getAll()||[]).filter(n=>t!=null&&t.allowDeleted?!0:!n.deleted).filter(n=>t!=null&&t.type?n.type===t.type:!0),n6()].sort((n,r)=>n.name.localeCompare(r.name))}async function ivt(t,e){if(t===Dc)return!1;const r=(await e6()).transaction(sd,"readwrite"),o=r.objectStore(sd);if(await o.get(t))return!1;const s={...e,lastModified:Date.now()};return await Promise.all([o.put(ks(t,s)),r.done]),!0}async function r6(t,e){if(t===Dc)return!1;const r=(await e6()).transaction(sd,"readwrite"),o=r.objectStore(sd),i=await o.get(t);if(i){const s={...e(i.value),lastModified:Date.now()};return await Promise.all([o.put(ks(t,s)),r.done]),!0}return!1}const o6={};function Lc(t){const e=o6[t];if(!e)throw new Error(`No storage provider found for type ${t}`);return e}function svt(t,e){const n={specRegistry:e,readWorkspaceMetadata:async r=>await nvt(r)||{},updateWorkspaceMetadata:async(r,o)=>{await rvt(r,()=>o)}};o6[t.name]={provider:t,options:n}}function qd(t,e){if(!e)throw new lt({code:Yh.WorkspaceNotFound,message:`Workspace "${t}" not found`})}function i6(t,e,n){const{wsName:r,fileName:o}=tn(t),i=s6().serializeNote(e,n.specRegistry,o);return new File([i],o,{type:"text/plain"})}async function avt(t,e,n){const r=i6(t,n,e);await lvt(t,e,r)}async function lvt(t,e,n){const r=tn(t).wsName;Ra&&Ra>0&&(console.warn("Slowing down write by "+Ra+"ms"),await Xh(Ra));const o=await Js(r);qd(r,o);const{options:i,provider:s}=Lc(o.type);await s.createFile(t,n,i)}async function Z0(t,e){const n=await cvt(t);return n?(tn(t),s6().parseNote(n,e.specRegistry,e.markdownItPlugins)):void 0}function s6(t){let e=Jbt;if(!e)throw new Error("Note storage provider not found.");return e}async function JS(t){const e=tn(t).wsName,n=await Js(e);qd(e,n);const{options:r,provider:o}=Lc(n.type);return o.readFile(t,r)}async function cvt(t){const e=await JS(t);if(e)return kS(e)}async function uvt(t,e){const{wsName:n}=tn(t),{wsName:r}=tn(e);if(n!==r)throw new lt({code:Yh.FileRenameNotAllowed,message:`Cannot rename file ${t} to ${e} as they are in different workspaces`});const o=await Js(n);qd(n,o);const{options:i,provider:s}=Lc(o.type);await s.renameFile(t,e,i)}async function XS(t,e,n){const r=tn(t).wsName;Ra&&Ra>0&&(console.warn("Slowing down write by "+Ra+"ms"),await Xh(Ra));const o=await Js(r);qd(r,o);const{options:i,provider:s}=Lc(o.type);await s.writeFile(t,e,i,n)}async function dvt(t){const e=tn(t).wsName,n=await Js(e);qd(e,n);const{options:r,provider:o}=Lc(n.type);await o.deleteFile(t,r)}async function fvt(t,e){const n=await Js(t);qd(t,n);const{options:r,provider:o}=Lc(n.type);return(await o.listAllFiles(e,t,r)).filter(s=>{const a=RS(s);return a||console.warn(`Invalid file path ${s}`),a}).map(s=>jt(s))}async function pvt(t){if(!await r6(t,n=>({...n,deleted:!0})))throw new lt({code:Yh.WorkspaceDeleteNotAllowed,message:`Unable to delete workspace "${t}". It either is already deleted or is not allowed.`})}async function hvt(t,e,n){d8(t);const{provider:r}=Lc(e),o=await r.newWorkspaceMetadata(t,n)||{},i={deleted:!1,lastModified:Date.now(),name:t,type:e,metadata:o};if(!await ivt(t,i))throw new lt({code:Yh.WorkspaceCreateNotAllowed,message:`Unable to create workspace "${t}" as it either already exists or the operation is not allowed.`})}const mvt=new WeakMap;function gvt(t){var u;const{effects:e,eternalVars:n,onRefreshWorkspace:r,otherStoreParams:o,slices:i,type:s}=t;for(const d of n.extensionRegistry.getAllStorageProviders())d.onChange=f=>{n.storageEmitter.emit(Av,f)},svt(d,n.extensionRegistry.specRegistry);const a=(u=t.name)!=null?u:`bangle-store-${s}`,l=MD({storeName:a,slices:i,...o});mvt.set(l,n),e.forEach(d=>{l.registerEffect(d)});const c=d=>{(d.type==="delete"||d.type==="create"||d.type==="rename")&&(l.destroyed||r(l))};if(n.storageEmitter.on(Av,c),l.destroySignal.addEventListener("abort",()=>{n.storageEmitter.off(Av,c)},{once:!0}),t.registerWorker){if(s==="worker")throw new Error("Worker cannot register worker");t.registerWorker.setup(l).then(d=>{if(!t.registerWorker)return;const f=new MessageChannel;U4(f.port1,n.editorCollabMessageBus,l.destroySignal),d.__internal_register_main_cb(HI(t.registerWorker.api(l,n))),d.editor.registerCollabMessagePort(VI(f.port2,[f.port2]))})}return l}function gt(){throw new Error("Store not set")}De.union([De.literal("active"),De.literal("passive"),De.literal("hidden"),De.literal("frozen"),De.literal("terminated"),De.undefined()]);function yvt(t){for(var e=[],n=0;n<t.length;){var r=t[n];if(r==="*"||r==="+"||r==="?"){e.push({type:"MODIFIER",index:n,value:t[n++]});continue}if(r==="\\"){e.push({type:"ESCAPED_CHAR",index:n++,value:t[n++]});continue}if(r==="{"){e.push({type:"OPEN",index:n,value:t[n++]});continue}if(r==="}"){e.push({type:"CLOSE",index:n,value:t[n++]});continue}if(r===":"){for(var o="",i=n+1;i<t.length;){var s=t.charCodeAt(i);if(s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122||s===95){o+=t[i++];continue}break}if(!o)throw new TypeError("Missing parameter name at ".concat(n));e.push({type:"NAME",index:n,value:o}),n=i;continue}if(r==="("){var a=1,l="",i=n+1;if(t[i]==="?")throw new TypeError('Pattern cannot start with "?" at '.concat(i));for(;i<t.length;){if(t[i]==="\\"){l+=t[i++]+t[i++];continue}if(t[i]===")"){if(a--,a===0){i++;break}}else if(t[i]==="("&&(a++,t[i+1]!=="?"))throw new TypeError("Capturing groups are not allowed at ".concat(i));l+=t[i++]}if(a)throw new TypeError("Unbalanced pattern at ".concat(n));if(!l)throw new TypeError("Missing pattern at ".concat(n));e.push({type:"PATTERN",index:n,value:l}),n=i;continue}e.push({type:"CHAR",index:n,value:t[n++]})}return e.push({type:"END",index:n,value:""}),e}function bvt(t,e){e===void 0&&(e={});for(var n=yvt(t),r=e.prefixes,o=r===void 0?"./":r,i="[^".concat(au(e.delimiter||"/#?"),"]+?"),s=[],a=0,l=0,c="",u=function(E){if(l<n.length&&n[l].type===E)return n[l++].value},d=function(E){var L=u(E);if(L!==void 0)return L;var T=n[l],F=T.type,j=T.index;throw new TypeError("Unexpected ".concat(F," at ").concat(j,", expected ").concat(E))},f=function(){for(var E="",L;L=u("CHAR")||u("ESCAPED_CHAR");)E+=L;return E};l<n.length;){var p=u("CHAR"),h=u("NAME"),y=u("PATTERN");if(h||y){var m=p||"";o.indexOf(m)===-1&&(c+=m,m=""),c&&(s.push(c),c=""),s.push({name:h||a++,prefix:m,suffix:"",pattern:y||i,modifier:u("MODIFIER")||""});continue}var w=p||u("ESCAPED_CHAR");if(w){c+=w;continue}c&&(s.push(c),c="");var x=u("OPEN");if(x){var m=f(),$=u("NAME")||"",S=u("PATTERN")||"",I=f();d("CLOSE"),s.push({name:$||(S?a++:""),pattern:$&&!S?i:S,prefix:m,suffix:I,modifier:u("MODIFIER")||""});continue}d("END")}return s}function au(t){return t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function a6(t){return t&&t.sensitive?"":"i"}function vvt(t,e){if(!e)return t;for(var n=/\((?:\?<(.*?)>)?(?!\?)/g,r=0,o=n.exec(t.source);o;)e.push({name:o[1]||r++,prefix:"",suffix:"",modifier:"",pattern:""}),o=n.exec(t.source);return t}function wvt(t,e,n){var r=t.map(function(o){return l6(o,e,n).source});return new RegExp("(?:".concat(r.join("|"),")"),a6(n))}function _vt(t,e,n){return xvt(bvt(t,n),e,n)}function xvt(t,e,n){n===void 0&&(n={});for(var r=n.strict,o=r===void 0?!1:r,i=n.start,s=i===void 0?!0:i,a=n.end,l=a===void 0?!0:a,c=n.encode,u=c===void 0?function(j){return j}:c,d=n.delimiter,f=d===void 0?"/#?":d,p=n.endsWith,h=p===void 0?"":p,y="[".concat(au(h),"]|$"),m="[".concat(au(f),"]"),w=s?"^":"",x=0,$=t;x<$.length;x++){var S=$[x];if(typeof S=="string")w+=au(u(S));else{var I=au(u(S.prefix)),E=au(u(S.suffix));if(S.pattern)if(e&&e.push(S),I||E)if(S.modifier==="+"||S.modifier==="*"){var L=S.modifier==="*"?"?":"";w+="(?:".concat(I,"((?:").concat(S.pattern,")(?:").concat(E).concat(I,"(?:").concat(S.pattern,"))*)").concat(E,")").concat(L)}else w+="(?:".concat(I,"(").concat(S.pattern,")").concat(E,")").concat(S.modifier);else S.modifier==="+"||S.modifier==="*"?w+="((?:".concat(S.pattern,")").concat(S.modifier,")"):w+="(".concat(S.pattern,")").concat(S.modifier);else w+="(?:".concat(I).concat(E,")").concat(S.modifier)}}if(l)o||(w+="".concat(m,"?")),w+=n.endsWith?"(?=".concat(y,")"):"$";else{var T=t[t.length-1],F=typeof T=="string"?m.indexOf(T[T.length-1])>-1:T===void 0;o||(w+="(?:".concat(m,"(?=").concat(y,"))?")),F||(w+="(?=".concat(m,"|").concat(y,")"))}return new RegExp(w,a6(n))}function l6(t,e,n){return t instanceof RegExp?vvt(t,e):Array.isArray(t)?wvt(t,e,n):_vt(t,e,n)}function kvt(t=Svt){let e={};const n=r=>e[r]||(e[r]=t(r));return(r,o)=>{const{regexp:i,keys:s}=n(r||""),a=i.exec(o);return a?[!0,s.reduce((c,u,d)=>(c[u.name]=a[d+1],c),{})]:[!1,null]}}const HN=t=>t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),$vt=(t,e,n)=>{let r=t?"((?:[^\\/]+?)(?:\\/(?:[^\\/]+?))*)":"([^\\/]+?)";return e&&n&&(r="(?:\\/"+r+")"),r+(e?"?":"")},Svt=t=>{const e=/:([A-Za-z0-9_]+)([?+*]?)/g;let n=null,r=0,o=[],i="";for(;(n=e.exec(t))!==null;){const[s,a,l]=n,c=l==="+"||l==="*",u=l==="?"||l==="*",d=u&&t[n.index-1]==="/"?1:0,f=t.substring(r,n.index-d);o.push({name:a}),r=e.lastIndex,i+=HN(f)+$vt(c,u,d)}return i+=HN(t.substring(r)),{keys:o,regexp:new RegExp("^"+i+"(?:\\/)?$","i")}};De.object({pathname:De.string().optional(),search:De.string().optional()});const Evt=t=>{let e=[];const n=l6(t,e,{strict:!0,end:!1});return{keys:e,regexp:n}},Cvt=kvt(Evt);function c6(t){let{wsName:e,filePath:n}=ft(t);return e=encodeURIComponent(e),n=n.split("/").map(r=>encodeURIComponent(r)).join("/"),`/ws/${e}/${n}`}function u6(t){if(!t)return;const e=Y0(t);if(!e)return;let n=t.split("/").slice(3).map(r=>decodeURIComponent(r)).join("/");if(n.length!==0)return`${e}:${n}`}function QS(t){return`/ws/${encodeURIComponent(t)}`}function Y0(t){if(!t)return;const[e,n]=Cvt("/ws/:wsName",t);if(e){const{wsName:r}=n;return decodeURIComponent(r)}}function Tvt(t,e){const n=new URLSearchParams(e);return n.set("secondary",encodeURIComponent(t)),n.toString()}function d6(t){if(!t)return;const n=new URLSearchParams(t).get("secondary");if(n)return decodeURIComponent(n)}function Avt(t,e,n){let r=t.pathname,o=t.search||"";if(n.primaryWsPath2?r=c6(n.primaryWsPath2):r=QS(e),n.secondaryWsPath)o=Tvt(n.secondaryWsPath,o);else{const i=new URLSearchParams(t.search);i.delete("secondary"),o=i.toString()}return{pathname:r,search:o}}const Nvt={blockReload:!1,pendingNavigation:void 0,location:{pathname:void 0,search:void 0},lifeCycleState:{current:void 0,previous:void 0}},Rvt={...Nvt},Dr=y$([],{name:"bangle/page-slice",state:Rvt}),Pvt=Dr.selector(t=>{const{lifeCycleState:e}=Dr.get(t);return e.current}),Ovt=Dr.selector(t=>{const{location:e}=Dr.get(t);let n=Y0(e.pathname);if(n){if(!Uee(n)){console.warn("Invalid wsName",n);return}return ss(n)}}),Ivt=Dr.selector(t=>{const{location:e}=Dr.get(t);return u6(e.pathname)}),Dvt=Dr.selector(t=>{const{location:e}=Dr.get(t);return Y0(e.pathname)?d6(e.search):void 0}),Mvt=Dr.selector(t=>{const{location:e}=Dr.get(t),n=u6(e.pathname);if(n){if(!mi(n)){console.warn("Invalid primaryWsPath",n);return}return jt(n)}}),Lvt=Dr.selector(t=>{const{location:e}=Dr.get(t),r=Y0(e.pathname)?d6(e.search):void 0;if(r){if(!mi(r)){console.warn("Invalid secondaryWsPath",r);return}return jt(r)}}),Fvt=Dr.selector(t=>{const{lifeCycleState:e}=Dr.get(t),{current:n}=e;return n==="passive"||n==="hidden"||n==="terminated"}),zt=Dr.slice({derivedState:{currentPageLifeCycle:Pvt,wsName:Ovt,rawPrimaryWsPath:Ivt,rawSecondaryWsPath:Dvt,primaryWsPath:Mvt,secondaryWsPath:Lvt,isInactivePage:Fvt}});zt.action(function(){return zt.tx(e=>zt.update(e,n=>n))});zt.action(function(e){return zt.tx(n=>zt.update(n,{blockReload:e}))});zt.action(function({current:e,previous:n}){return zt.tx(r=>zt.update(r,{lifeCycleState:{current:e,previous:n}}))});zt.action(function(e){return zt.tx(n=>zt.update(n,{location:e}))});const cm=zt.action(function({location:e,replace:n=!1}){return zt.tx(r=>{if(typeof e=="string"){const[o,i]=e.split("?");return zt.update(r,{pendingNavigation:{location:{pathname:o,search:i},replaceHistory:n,preserve:!1}})}else return zt.update(r,{pendingNavigation:{location:e,replaceHistory:n,preserve:!0}})})});function KN({invalidWsName:t,replace:e}){return cm({location:`/ws-invalid-path/${encodeURIComponent(t)}`,replace:!1})}function f6({replace:t}={}){return cm({location:"/landing",replace:t})}function eE({wsName:t,replace:e}){return cm({location:QS(t),replace:e})}const Bvt=(t,e,n)=>{const r=new URLSearchParams([["error_code",e]]);return n&&jvt(n,r),cm({location:{pathname:`/ws-auth/${encodeURIComponent(t)}`,search:r.toString()},replace:!0})};function jvt(t,e){t.hasSomeOpenedWsPaths()&&e.append("ws_paths",JSON.stringify(t.toArray()))}const Aw=Ic([],{name:"bangle/slice-refresh-workspace",state:{refreshWorkspace:0}}),zvt=Aw.action(function(){return Aw.tx(e=>Aw.update(e,n=>({refreshWorkspace:n.refreshWorkspace+1})))});function qvt(t){let e;return t.forEachWsPath(n=>{e||n==null||mi(n)||(e=n)}),e?{valid:!1,invalidWsPath:e}:{valid:!0}}const Wvt={wsPaths:void 0,recentlyUsedWsPaths:void 0,miniEditorWsPath:void 0,popupEditorWsPath:void 0},Uvt={workspaceData:{}},um=(t,e,n)=>Mr.update(t,r=>{const o=r.workspaceData[e],i={...Wvt,...o,...n};return{workspaceData:{...r.workspaceData,[e]:i}}}),Vvt="nsm-slice-workspace",Wd=zt.query(()=>t=>zt.get(t).wsName),Hvt=zt.query(()=>t=>zt.get(t).primaryWsPath),Kvt=zt.query(()=>t=>zt.get(t).secondaryWsPath),Mr=y$([zt],{name:Vvt,state:Uvt}),Gvt=Mr.selector(t=>Wd(t)),Zvt=Mr.selector(t=>zt.get(t).primaryWsPath),p6=Mr.selector(t=>{var o;const e=Wd(t),{workspaceData:n}=Mr.get(t),r=e?(o=n[e])==null?void 0:o.miniEditorWsPath:void 0;if(r){if(!mi(r)){console.warn("Invalid miniPath",r);return}return r}}),Yvt=Mr.selector(t=>{var o;const e=Wd(t),{workspaceData:n}=Mr.get(t),r=e?(o=n[e])==null?void 0:o.popupEditorWsPath:void 0;if(r){if(!mi(r)){console.warn("Invalid popupPath",r);return}return r}}),Jvt=Mr.selector(t=>{const e=Hvt(t),n=Kvt(t),r=p6(t),o=Yvt(t);return pu.createEmpty().updatePrimaryWsPath(e).updateSecondaryWsPath(n).updateMiniEditorWsPath(r).updatePopupEditorWsPath(o)},{equal:(t,e)=>t.equal(e)}),Xvt=Mr.selector(t=>{var r;const e=Wd(t),{workspaceData:n}=Mr.get(t);if(e)return(r=n[e])==null?void 0:r.wsPaths}),Qvt=nm(t=>t.filter(e=>mi(e))),ewt=[],twt=Mr.selector(t=>{var o;const e=Wd(t),{workspaceData:n}=Mr.get(t);if(!e)return;const r=(o=n[e])==null?void 0:o.wsPaths;return r?Qvt(r):ewt}),nwt=Mr.selector(t=>{var r;const e=Wd(t),{workspaceData:n}=Mr.get(t);if(e)return(r=n[e])==null?void 0:r.recentlyUsedWsPaths}),Fn=Mr.slice({derivedState:{wsName:Gvt,primaryWsPath:Zvt,miniWsPath:p6,openedWsPaths:Jvt,wsPaths:Xvt,noteWsPaths:twt,recentWsPaths:nwt}});Fn.action(function({wsName:e,recentlyUsedWsPaths:n}){return Fn.tx(r=>um(r,e,{recentlyUsedWsPaths:n}))});Fn.action(function({wsName:e,wsPaths:n}){return Fn.tx(r=>um(r,e,{wsPaths:n}))});const rwt=Fn.action(function({mini:e,wsName:n,popup:r}){return Fn.tx(o=>um(o,n,{miniEditorWsPath:e,popupEditorWsPath:r}))});Fn.action(function({wsName:e,wsPath:n}){return Fn.tx(r=>um(r,e,{miniEditorWsPath:n}))});Fn.action(function({wsName:e,wsPath:n}){return Fn.tx(r=>um(r,e,{popupEditorWsPath:n}))});const J0=pl({deferred:!1}),Ud=J0(function(e,n={}){return r=>{const{openedWsPaths:o,wsName:i}=Fn.get(r.state),{location:s}=zt.get(r.state);if(e instanceof Function&&(e=e(o)),e.equal(o))return;const a=qvt(e),l=e.getOneWsName();if(!a.valid){r.dispatch(KN({invalidWsName:l||ss("unknown-ws"),...n}));return}if(!l){r.dispatch(f6(n));return}if(!e.allBelongToSameWsName(i)){console.error("Cannot have different wsNames"),r.dispatch(KN({invalidWsName:ss("unknown-ws"),...n}));return}if(o.primaryWsPath!==e.primaryWsPath||o.secondaryWsPath!==e.secondaryWsPath){const c=Avt(s,l,e);r.dispatch(cm({location:c,...n}));return}else{r.dispatch(rwt({mini:e.miniEditorWsPath2,popup:e.popupEditorWsPath2,wsName:l}));return}}}),owt=J0((t,e)=>n=>{n.dispatch(Ud(r=>r.updatePrimaryWsPath(t),e))}),iwt=J0((t,e)=>n=>{n.dispatch(Ud(r=>r.updateSecondaryWsPath(t),e))}),swt=t=>{typeof window!="undefined"&&window.open(c6(t))},h6=J0((t,e)=>n=>{const{openedWsPaths:r}=Fn.get(n.state);let o=r.closeIfFound(t);if(!o.hasSomeOpenedWsPaths()){n.dispatch(eE({wsName:tn(t).wsName,...e}));return}n.dispatch(Ud(o.optimizeSpace(),e))});function awt(t){return ovt({allowDeleted:t==null?void 0:t.allowDeleted})}function m6(t,e){return Js(t,{allowDeleted:e==null?void 0:e.allowDeleted})}const g6=(t,e,n)=>{gt().dispatch(Bvt(t,e,n))},X0=async(t,e,n)=>{await hvt(t,e,n),gt().dispatch(eE({wsName:t})),await Promise.resolve()},lwt=async t=>{await pvt(t);const e=gt();Fn.get(e.state).wsName===t&&(e.dispatch(f6({replace:!0})),await Promise.resolve())},cwt=De.record(De.union([De.undefined(),De.string(),De.number(),De.null()])),y6=(t,e)=>{const r=e.view.state.selection.toJSON();for(const o of Object.values(r))if(typeof o!="number"&&typeof o!="string"&&o!=null)throw new Error(`Invalid editor selection json value type: ${r}`);return{wsPath:Rd(e.view.state).wsPath,editorId:t,selectionJson:r}},uwt=(t,e)=>{var r;const n=(r=v6(t))==null?void 0:r.scrollTop;if(typeof n=="number")return{wsPath:Rd(e.state).wsPath,editorId:t,scrollPosition:n}};function dm(t){return t>=0&&t<zi}function b6(t){if(!dm(t))throw new Error("editorId is out of range or invalid")}function v6(t){const e=document.querySelector(".B-editor-container_editor-"+t);if(e)return See(e)}const dwt=De.array(De.union([De.undefined(),De.record(De.union([De.number(),De.null(),De.undefined()]))])).length(zi),fwt=De.array(De.union([De.undefined(),De.record(De.union([De.undefined(),cwt]))])).length(zi),pwt=De.object({selections:fwt,scrollPositions:dwt});class Ru{constructor({selections:e,scrollPositions:n}){ee(this,"selections");ee(this,"scrollPositions");this.selections=H1(zi).map((r,o)=>{let i=e[o];return i==null?void 0:i}),this.scrollPositions=H1(zi).map((r,o)=>{let i=n[o];return i==null?void 0:i})}static fromJsonObj(e){const{selections:n=[],scrollPositions:r=[]}=e;return new Ru({selections:n,scrollPositions:r})}getScrollPosition(e,n){var o;if(typeof n!="number")return;const r=(o=this.scrollPositions[n])==null?void 0:o[e];return r==null?void 0:r}getSelection(e,n){var o;if(typeof n!="number")return;const r=(o=this.selections[n])==null?void 0:o[e];return r==null?void 0:r}toJsonObj(){const e=this.selections,n=this.scrollPositions;return{selections:e,scrollPositions:n}}updateScrollPosition(e,n,r){if(typeof r!="number")return this;const o=[...this.scrollPositions];let i=o[r];return i||(i={}),o[r]=i,i[n]=e==null?void 0:e,new Ru({selections:this.selections,scrollPositions:o})}updateSelection(e,n,r){if(typeof r!="number")return this;const o=[...this.selections];let i=o[r];return i||(i={}),o[r]=i,i[n]=e==null?void 0:e,new Ru({selections:o,scrollPositions:this.scrollPositions})}}const Rx={focusedEditorId:void 0,mainEditors:H1(zi),editorConfig:Ru.fromJsonObj({selections:[],scrollPositions:[]}),primaryEditor:void 0,secondaryEditor:void 0,editingAllowed:c8(),editorOpenOrder:[],disableEditingCounter:void 0,searchQuery:void 0},rl=y$([zt],{name:"editor-manager-slice",state:Rx}),hwt=rl.selector(t=>{const{mainEditors:e}=rl.get(t);return e[Es]}),mwt=rl.selector(t=>{const{mainEditors:e}=rl.get(t);return e[Xf]}),gwt=rl.selector(t=>{const{editorOpenOrder:e,mainEditors:n}=rl.get(t),r=e[0],o=typeof r=="number"?n[r]:void 0;return typeof r=="number"&&o?{editorId:r,editor:o}:void 0},{equal:Eee}),st=rl.slice({derivedState:{primaryEditor:hwt,secondaryEditor:mwt,lastOpenedEditor:gwt}}),ywt=st.query((t,e)=>n=>{const r=v6(e),i=st.get(n).editorConfig.getScrollPosition(t,e);typeof i=="number"&&r&&(r.scrollTop=i)}),bwt=st.query(t=>e=>{var n,r;if(!xwt(e,o=>o.view.hasFocus())){if(t!=null){const o=Q0(e,t);if(o){o.focusView();return}}(r=(n=st.get(e).lastOpenedEditor)==null?void 0:n.editor)==null||r.focusView()}}),Q0=st.query(t=>e=>(b6(t),st.get(e).mainEditors[t])),vwt=st.query((t,e,n)=>r=>{b6(t);const o=st.get(r);if(!o)return;const i=o.editorConfig.getSelection(e,t);if(i){const s=typeof(i==null?void 0:i.anchor)=="number"?i.anchor:void 0,a=typeof(i==null?void 0:i.head)=="number"?i.head:void 0;let l=!1;s!=null&&a!=null&&(l=Math.max(s,a)>=n.content.size);let c=l?Oe.atEnd(n):wwt(n,i),{from:u}=c;return u>=n.content.size?c=Oe.atEnd(n):c=Oe.near(n.resolve(u)),c}});function wwt(t,e){try{return Oe.fromJSON(t,e)}catch(n){if(n instanceof RangeError)return Oe.atStart(t);throw n}}const _wt=st.query(t=>e=>{const{mainEditors:n}=st.get(e);for(const[r,o]of n.entries())o&&t(o,r)}),GN=1;SD(rl,{dbKey:"editorManagerSlice",schema:De.object({focusedEditorId:De.union([De.number(),De.undefined()]),editorConfig:pwt}),serialize:t=>{const{editorConfig:e,focusedEditorId:n}=st.get(t);let r=e;return _wt(t,(o,i)=>{var c;const{selectionJson:s,wsPath:a}=y6(i,o),l=(c=uwt(i,o.view))==null?void 0:c.scrollPosition;r=r.updateSelection(s,a,i),r=r.updateScrollPosition(l,a,i)}),{version:GN,data:{focusedEditorId:n,editorConfig:r.toJsonObj()}}},deserialize:({version:t,data:e})=>t<GN?Rx:{...Rx,focusedEditorId:e.focusedEditorId,editorConfig:Ru.fromJsonObj(e.editorConfig)}});const xwt=st.query(t=>e=>{const n=st.get(e);return kwt(n.mainEditors,t)});function kwt(t,e){return Array.from(t.entries()).some(([n,r])=>r?e(r,n):!1)}st.action(function(){return st.tx(e=>st.update(e,n=>n))});st.simpleAction("editingAllowed");const ZN=st.action(function({editorId:e,editor:n}){return st.tx(r=>st.update(r,o=>{if(!dm(e))return o;const i=[...o.mainEditors];i[e]=n;const s=[e,...o.editorOpenOrder].filter(a=>!!i[a]);return{mainEditors:i,editorOpenOrder:s}}))}),$wt=st.simpleAction("focusedEditorId",(t,e)=>typeof t=="number"&&!dm(t)?st.get(e):{focusedEditorId:t});st.action(function({editorId:e,wsPath:n,scrollPosition:r}){return st.tx(o=>st.update(o,i=>dm(e)?{editorConfig:i.editorConfig.updateScrollPosition(r,n,e)}:i))});st.action(function(){return st.tx(e=>st.update(e,n=>({disableEditingCounter:(n.disableEditingCounter||0)+1})))});const Swt=st.action(function({editorId:e,wsPath:n,selectionJson:r}){return st.tx(o=>dm(e)?st.update(o,i=>({editorConfig:i.editorConfig.updateSelection(r,n,e)})):st.get(o))}),Ewt=st.action(({focusOrBlur:t=!0,editingAllowed:e}={})=>st.tx(n=>t?st.update(n,r=>{const o=e!=null?e:!r.editingAllowed;for(const i of r.mainEditors)i!=null&&i.view.isDestroyed||(o?i==null||i.focusView():i==null||i.view.dom.blur(),queueMicrotask(()=>{i==null||i.view.dispatch(i.view.state.tr.setMeta("__activitybar_empty__",!0))}));return{editingAllowed:o}}):st.get(n))),Cwt=st.simpleAction("searchQuery"),Twt="search",Awt=Nwt;function Nwt({key:t=new vt(Twt),query:e,className:n="bangle-search-match",maxHighlights:r=1500}){function o(i,s){if(!s)return Xt.empty;const l=Rwt(i.doc,s,r).map(c=>pr.inline(c.pos+c.match.start,c.pos+c.match.end,{class:n}));return Xt.create(i.doc,l)}return()=>new ht({key:t,state:{init(i,s){return{query:e,decos:o(s,e)}},apply(i,s,a,l){const c=i.getMeta(t);if(c){const u=c.query;return{query:u,decos:o(l,u)}}return i.docChanged?{query:s.query,decos:o(l,s.query)}:s}},props:{decorations(i){var s;return((s=t.getState(i))===null||s===void 0?void 0:s.decos)||null}}})}function Rwt(t,e,n){let r=[],o=0,i;if(e instanceof RegExp){let s="g";e.ignoreCase&&(s+="i"),e.multiline&&(s+="m"),i=RegExp(e.source,s)}else i=RegExp(e,"g");return t.descendants((s,a)=>{if(n<=o)return!1;if(s.isText){const l=s.textContent,c=f0(i,l);for(const u of c)if(u.match){if(n<=o++)break;r.push({pos:a,match:u})}}}),r}function Pwt(t,e){return(n,r,o)=>(r&&r(n.tr.setMeta(t,{query:e}).setMeta("addToHistory",!1)),!0)}var Owt=Object.freeze({__proto__:null,plugins:Awt,updateSearchQuery:Pwt});const Px={changelogHasUpdates:!1,dialogName:void 0,dialogMetadata:void 0,noteSidebar:!1,paletteInitialQuery:void 0,paletteMetadata:void 0,paletteType:void 0,sidebar:void 0,colorScheme:Iwt(),widescreen:c8()};function Iwt(){return typeof window=="undefined"||!window.matchMedia?tc.LIGHT:window.matchMedia("(prefers-color-scheme: dark)").matches?tc.DARK:tc.LIGHT}const Ct=Ic([],{name:"bangle/ui-slice-main",state:Px}),Dwt=Ct.action(function(e){return Ct.tx(n=>Ct.update(n,r=>{let o=e===void 0?r.sidebar:e;return{sidebar:r.sidebar===o?void 0:o}}))}),Mwt=Ct.simpleAction("sidebar"),Lwt=Ct.action(function(){return Ct.tx(e=>Ct.update(e,()=>({sidebar:void 0})))}),Fwt=Ct.action(function(e,n){return Ct.tx(r=>Ct.update(r,()=>({paletteType:e,paletteInitialQuery:n})))}),Bwt=Ct.simpleAction("paletteType",(t,e)=>({paletteType:Ct.get(e).paletteType===t?void 0:t,paletteInitialQuery:void 0})),jwt=Ct.action(function(){return Ct.tx(e=>Ct.update(e,()=>({paletteType:void 0,paletteInitialQuery:"",paletteMetadata:{}})))}),zwt=Ct.action(function(){return Ct.tx(e=>Ct.update(e,n=>({colorScheme:n.colorScheme===tc.DARK?tc.LIGHT:tc.DARK})))});Ct.simpleAction("colorScheme");Ct.simpleAction("widescreen");const qwt=Ct.action(function(e){return Ct.tx(n=>Ct.update(n,()=>({dialogName:e.dialogName,dialogMetadata:e.metadata})))}),Wwt=Ct.simpleAction("dialogName",(t,e)=>{const n=Ct.get(e);return typeof t=="string"?t===n.dialogName?{dialogName:void 0,dialogMetadata:void 0}:n:{dialogName:void 0,dialogMetadata:void 0}});Ct.simpleAction("noteSidebar");const Uwt=Ct.simpleAction("changelogHasUpdates"),Vwt=Ct.action(function(){return Ct.tx(e=>Ct.update(e,n=>({noteSidebar:!n.noteSidebar})))}),YN=1;SD(Ct,{dbKey:"nsmUiSlice",schema:De.object({sidebar:De.union([De.string(),De.undefined()]),colorScheme:BV,noteSidebar:De.boolean()}),serialize:t=>{const{sidebar:e,colorScheme:n,noteSidebar:r}=Ct.get(t);return{version:YN,data:{sidebar:e===null?void 0:e,colorScheme:n,noteSidebar:r}}},deserialize:({version:t,data:e})=>t<YN?Px:{...Px,...e}});const J1=()=>{const t=gt();return st.get(t.state)};st.track.bind(st);function Hwt(t,e){t({name:Fg,value:`tag:${e}`})}function w6(){const{focusedEditorId:t,primaryEditor:e}=Vs(st);return k.useMemo(()=>({focusedEditorId:t,primaryEditor:e}),[t,e])}const Kwt=t=>{gt().dispatch(Cwt(t))};function X1(t){const e=gt();return Q0(e.state,t)}function Q1(){const t=gt();return Q0(t.state,Es)}function _6(){const t=gt();let e=st.get(t.state).focusedEditorId;if(typeof e=="number")return Fn.get(t.state).openedWsPaths.getByIndex2(e)}const Gwt=(...t)=>{gt().dispatch($wt(...t))};function Zwt(){gt().dispatch(Ewt())}function x6(){const t=gt();bwt(t.state)}function lg(t,e){const n=X1(t);if(!n)return!1;const r=n.view;return e(r.state,r.dispatch,r)}const Ywt={notifications:[],editorIssues:[]},Xn=Ic([],{name:"notificationSliceKey",state:Ywt}),k6=Xn.action(function(e){return Xn.tx(n=>Xn.update(n,r=>{const{editorIssues:o}=r,i=o.filter(s=>s.uid!==e.uid&&s.wsPath!==e.wsPath);return i.push(e),{editorIssues:i}}))}),Jwt=Xn.action(function(e){return Xn.tx(n=>Xn.update(n,r=>{const{editorIssues:o}=r;return o.find(i=>i.uid===e)?{editorIssues:o.filter(i=>i.uid!==e)}:r}))}),Xwt=Xn.action(function(e){return Xn.tx(n=>Xn.update(n,r=>{const{uid:o}=e;return r.notifications.find(i=>i.uid===o)?r:{notifications:[...r.notifications,e]}}))});Xn.action(function(){return Xn.tx(e=>Xn.update(e,{notifications:[]}))});Xn.action(function(e){return Xn.tx(n=>Xn.update(n,r=>{const o=r.notifications.filter(i=>!e.includes(i.uid));return o.length!==r.notifications.length?{notifications:o}:r}))});const Qwt=Xn.query(t=>e=>{const{editorIssues:n}=Xn.get(e);return n.find(r=>r.wsPath===t)});function Vd(){return Vs(Ct)}const fm=()=>{const t=gt();return Ct.get(t.state)},$6=()=>{gt().dispatch(Lwt())},tE=(...t)=>{gt().dispatch(Bwt(...t))},Pu=(...t)=>{gt().dispatch(Fwt(...t))},e_t=(...t)=>{gt().dispatch(jwt(...t))},t_t=(...t)=>{gt().dispatch(Mwt(...t))},n_t=(...t)=>{gt().dispatch(Dwt(...t))},r_t=(...t)=>{gt().dispatch(Vwt(...t))},o_t=(...t)=>{gt().dispatch(zwt(...t))},oo=(...t)=>{gt().dispatch(qwt(...t))},i_t=(...t)=>{gt().dispatch(Uwt(...t))},hi=(...t)=>{gt().dispatch(Wwt(...t))},bt=(...t)=>{gt().dispatch(Xwt(...t))},s_t=(...t)=>{gt().dispatch(k6(...t))},a_t=(...t)=>{gt().dispatch(Jwt(...t))},Nw=Object.create(null);function l_t(t){return t in Nw?t+"$"+ ++Nw[t]:(Nw[t]=0,t+"$")}class c_t{constructor(e){ee(this,"key");this.spec=e,this.key=e.key?e.key.key:l_t("slice")}getSliceState(e){return e.getSliceState(this.key)}}const JN=Symbol();class zn{constructor(e,n){ee(this,"name");ee(this,"editor");ee(this,"application");ee(this,"themes");if(n!==JN)throw new Error("Instantiate class via `Extension.create({})`");this.name=e.name,this.editor=e.editor,this.application=e.application,this.themes=e.themes}static create(e){var E;const{name:n}=e;if(!n)throw new Error("Extension: name is required");if(!/^[a-z0-9-_@/\.]+$/.test(n))throw new Error(`Extension "${n}": Extension's name can oly have the following characters "a..z" "0..9" "@" "." "-" and "_"`);const r=e.editor?Object.assign({},e.editor,{name:n}):void 0,o=e.application?Object.assign({},e.application,{name:n}):void 0,i=(E=e.themes)==null?void 0:E.map(L=>({...L,ownerExtension:n}));if(i){if(new Set(i.map(L=>L.name)).size!==i.length)throw new Error("Theme: names must be unique");for(const L of i){if(!L.name)throw new Error("Theme: name is required");if(!L.url)throw new Error("Theme: url is required");if(typeof L.url!="string")throw new Error('Theme: url must be of "string" type')}}const{specs:s,plugins:a,highPriorityPlugins:l,markdownItPlugins:c,renderReactNodeView:u}=r!=null?r:{};if(s&&!Array.isArray(s))throw new Error(`Extension "${n}": specs must be an array`);if(a&&!Array.isArray(a))throw new Error(`Extension "${n}": plugins must be an array`);if(l&&!Array.isArray(l))throw new Error(`Extension "${n}": highPriorityPlugins must be an array`);if(c&&!Array.isArray(c))throw new Error(`Extension "${n}": markdownItPlugins must be an array`);if(u&&Object.values(u).some(L=>typeof L!="function"))throw new Error(`Extension "${n}": renderReactNodeView must be an Object<string, function> where the function returns a react element`);const{operations:d,sidebars:f,dialogs:p,noteSidebarWidgets:h,slices:y,nsmSlices:m,nsmEffects:w,operationHandler:x,storageProvider:$,noteFormatProvider:S,onStorageError:I}=o!=null?o:{};if(x&&!d)throw new Error(`Extension "${n}": operationHandler is required when defining operations`);if(d){if(!d.every(L=>yf("operation",L.name)&&bf(n,L.name)))throw new Error(`Extension "${n}": An operation must have a name with the following schema operation::<extension_pkg_name:xyz. For example 'operation::@bangle.io/example:hello-world'`);if(d.length!==new Set(d.map(L=>L.name)).size)throw new Error(`Extension "${n}": Operation name must be unique`)}if(f){if(!Array.isArray(f))throw new Error(`Extension "${n}": sidebars must be an array`);if(!f.every(L=>{const T=yf("sidebar",L.name)&&bf(n,L.name),F=!!L.activitybarIcon,j=!!L.ReactComponent,U=typeof L.hint=="string";return T&&F&&F&&j&&U}))throw new Error(`Extension "${n}": Invalid sidebars config.`)}if(y&&!y.every(L=>L instanceof c_t&&yf("slice",L.key)&&bf(n,L.key)))throw new Error(`Extension "${n}": invalid slice. Slice key must be prefixed with extension name followed by a semicolon (:). For example, "new SliceKey('slice::my-extension-name:xyz')"`);if(m&&!m.every(L=>uU(L)&&L.name.startsWith(`slice::${XN(n)}:`)))throw new Error(`Extension "${n}": invalid slice name. Must start with ${`slice::${XN(n)}:`}`);if(w&&!w.every(L=>typeof L=="function"))throw new Error(`Extension "${n}": invalid slice effect.`);if(h&&!h.every(L=>yf("note-sidebar-widget",L.name)&&bf(n,L.name)))throw new Error(`Extension "${n}": Invalid note sidebar widget name. Example: "note-sidebar-widget::my-extension-name:xyz"`);if(p&&!p.every(L=>yf("dialog",L.name)&&bf(n,L.name)))throw new Error(`Extension "${n}" : Invalid dialog name. Example: "dialog::my-extension-name:xyz"`);if(S){if(typeof S.name!="string")throw new Error("Extension: noteFormatProvider must have a valid name");if(typeof S.description!="string")throw new Error("Extension: noteFormatProvider must have a description name");if(typeof S.parseNote!="function"||typeof S.serializeNote!="function")throw new Error("Extension: noteFormatProvider must have parseNote and serializeNote functions")}if($){if(typeof $.name!="string")throw new Error("Extension: Storage provider must have a valid name");if(typeof $.description!="string")throw new Error("Extension: Storage provider must have a valid description");if(typeof I!="function")throw new Error("Extension: onStorageError must be defined when storage provider is defined")}return new zn({name:n,editor:r,application:o,themes:i},JN)}}function yf(t,e){return t===S6(e).scheme}function bf(t,e){return t===S6(e).pkgName}function XN(t){return t.replace("@bangle.io/","")}function S6(t){if(t.includes("?"))throw new Error("Cannot have ? in the slug");const[e,n]=t.split("::"),[r,o]=(n==null?void 0:n.split(":"))||[];return{scheme:e,pkgName:r,path:o}}var E6={exports:{}},pm={};/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u_t=k,C6=60103;pm.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var QN=Symbol.for;C6=QN("react.element"),pm.Fragment=QN("react.fragment")}var d_t=u_t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,f_t=Object.prototype.hasOwnProperty,p_t={key:!0,ref:!0,__self:!0,__source:!0};function T6(t,e,n){var r,o={},i=null,s=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)f_t.call(e,r)&&!p_t.hasOwnProperty(r)&&(o[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)o[r]===void 0&&(o[r]=e[r]);return{$$typeof:C6,type:t,key:i,ref:s,props:o,_owner:d_t.current}}pm.jsx=T6;pm.jsxs=T6;E6.exports=pm;var _=E6.exports;function sr(t,e,n=!0){let r=t.filter(o=>!!o[e]);return n?r.flatMap(o=>o[e]):r.map(o=>o[e])}class A6{constructor(e=[],n=[]){ee(this,"specRegistry");ee(this,"markdownItPlugins");ee(this,"renderExtensionEditorComponents",()=>this._editorConfig.map(n=>{const{ReactComponent:r}=n;if(r)return _.jsx(r,{},n.name)}).filter(n=>!!n));ee(this,"renderApplicationComponents",()=>this._extensions.map(n=>{var o;const{ReactComponent:r}=(o=n.application)!=null?o:{};if(r)return _.jsx(r,{},n.name)}).filter(n=>!!n));ee(this,"registerSerialOperationHandler",e=>(this._serialOperationHandlers.add(e),()=>{this._serialOperationHandlers.delete(e)}));ee(this,"_dialogs");ee(this,"_editorConfig");ee(this,"_editorWatchPluginStates");ee(this,"_noteFormatProviders");ee(this,"_noteSidebarWidgets");ee(this,"_nsmEffects");ee(this,"_nsmSlices");ee(this,"_onStorageErrorHandlers");ee(this,"_operationHandlers");ee(this,"_operationKeybindingMapping");ee(this,"_registeredSerialOperations");ee(this,"_renderReactNodeViewLookup");ee(this,"_serialOperationHandlers");ee(this,"_sidebars");ee(this,"_slices");ee(this,"_storageProviders");ee(this,"_themes");this._extensions=e,this._validate(),this._editorConfig=e.map(i=>i.editor).filter(i=>!!i),this.specRegistry=new Hh([...sr(this._editorConfig,"specs")]),this.markdownItPlugins=[...n,...sr(this._editorConfig,"markdownItPlugins")],this._renderReactNodeViewLookup=Object.fromEntries(sr(this._editorConfig,"renderReactNodeView",!1).flatMap(i=>Object.entries(i))),this._themes=sr(e,"themes",!0);const r=e.map(i=>i.application).filter(i=>!!i);this._serialOperationHandlers=new Set,this._editorWatchPluginStates=sr(this._editorConfig,"watchPluginStates"),this._registeredSerialOperations=sr(r,"operations"),this._sidebars=sr(r,"sidebars"),vf(this._sidebars,"sidebars"),this._dialogs=sr(r,"dialogs"),vf(this._dialogs,"dialogs"),this._noteSidebarWidgets=sr(r,"noteSidebarWidgets"),vf(this._noteSidebarWidgets,"noteSidebarWidgets"),this._slices=sr(r,"slices"),this._nsmSlices=sr(r,"nsmSlices"),this._nsmEffects=sr(r,"nsmEffects"),this._operationHandlers=e.map(i=>{var s;return(s=i.application)==null?void 0:s.operationHandler}).filter(i=>i!=null),this._operationKeybindingMapping=this._getSerialOperationKeybindingMapping();const o=sr(r,"storageProvider");vf(o,"storageProviders"),this._storageProviders=Object.fromEntries(o.map(i=>[i.name,i])),this._noteFormatProviders=Object.fromEntries(sr(r,"noteFormatProvider").map(i=>[i.name,i])),this._onStorageErrorHandlers=Object.fromEntries(r.filter(i=>!!i.storageProvider&&!!i.onStorageError).map(i=>[i.storageProvider.name,i.onStorageError]))}getAllStorageProviders(){return Object.values(this._storageProviders)}getDialog(e){return this._dialogs.find(n=>n.name===e)}getEditorWatchPluginStates(){return this._editorWatchPluginStates}getNoteFormatProvider(e){return this._noteFormatProviders[e]}getNoteSidebarWidgets(){return this._noteSidebarWidgets}getNsmEffects(){return this._nsmEffects}getNsmSlices(){return this._nsmSlices}getOnStorageErrorHandlers(e){return this._onStorageErrorHandlers[e]}getOperationHandlers(){return this._operationHandlers}getPlugins(){return[...sr(this._editorConfig,"highPriorityPlugins"),...sr(this._editorConfig,"plugins")]}getRegisteredOperationKeybinding(e){var n;return(n=this._registeredSerialOperations.find(r=>r.name===e))==null?void 0:n.keybinding}getRegisteredOperations(){return this._registeredSerialOperations}getSerialOperationHandlers(){return this._serialOperationHandlers}getSerialOperationKeybindingMapping(){return this._operationKeybindingMapping}getSidebars(){return this._sidebars}getSlices(){return this._slices}getStorageProvider(e){return this._storageProviders[e]}getThemes(){return this._themes}isExtensionDefined(e){return this._extensions.some(n=>n.name===e)}renderReactNodeViews({nodeViewRenderArg:e}){var n,r;return(r=(n=this._renderReactNodeViewLookup)[e.node.type.name])==null?void 0:r.call(n,{nodeViewRenderArg:e})}_getSerialOperationKeybindingMapping(){const e=this.getRegisteredOperations().filter(n=>typeof n.keybinding=="string").map(n=>[n.name,n.keybinding]);return Object.fromEntries(e)}_validate(){vf(this._extensions,"extensions")}}function vf(t,e){if(new Set(t.map(n=>n.name)).size!==t.length)throw new Error(`In "${e}" there is an existing entity with same name.`)}const h_t=new A6([],[]),nE=Ic([],{name:"nsm-extension-registry",state:{extensionRegistry:h_t}});H.createContext(void 0);function rE(){const{extensionRegistry:t}=Vs(nE);return t}function m_t(t,e){return Hr.fromJSON(e.specRegistry.schema,{type:"doc",content:[{type:"heading",attrs:{level:1},content:[{type:"text",text:Cr(ft(t).fileName)}]},{type:"paragraph",content:[{type:"text",text:"Hello world!"}]}]})}function Xr(){return Vs(Fn)}function oE(t){return Fn.track(t).wsName}function N6(t){return zt.track(t).lifeCycleState}const g_t=nm(t=>{const e=Fn.get(t),{isInactivePage:n}=zt.get(t);return{...e,isInactivePage:n}}),Qn=()=>{const t=gt();return g_t(t.state)},R6=t=>{const e=gt(),{extensionRegistry:n}=nE.get(e.state);return Z0(t,n)},P6=async(t,e={})=>{const n=gt(),{extensionRegistry:r}=nE.get(n.state);if(await R6(t))throw new lt({message:`Cannot create. Note "${tn(t).fileName}" already exists.`});if(await avt(t,r,e.doc||m_t(t,r)),e.open)return I6(t,e.open)},y_t=async(t,e)=>{const n=gt(),{openedWsPaths:r,noteWsPaths:o}=Fn.get(n.state);if(o!=null&&o.includes(e))throw new lt({message:`Cannot rename. Note "${tn(e).fileName}" already exists.`});n.dispatch(h6(t)),await uvt(t,e),n.dispatch(Ud(r.updateIfFound(t,e)))},O6=t=>(gt().dispatch(h6(t)),dvt(t)),b_t=async(...t)=>{await XS(...t)},v_t=async(...t)=>await JS(...t),I6=(t,e="primary")=>{if(e==="primary"||e===!0)return Hd(t);if(e==="secondary")return ad(t);if(e==="newTab")return eb(t);if(e){let n=e;throw new Error(`Invalid openType: ${n}`)}else return},Hd=t=>{gt().dispatch(owt(t))},ad=t=>{gt().dispatch(iwt(t))},w_t=({wsName:t,type:e="replace"})=>{const n=gt();if(e==="newTab"&&typeof window!="undefined"){window.open(QS(t));return}n.dispatch(eE({wsName:t,replace:e==="replace"}))},eb=t=>{swt(t)},Vl=t=>{gt().dispatch(Ud(t))},eR=t=>{const e=gt(),n=Ud(r=>typeof t=="number"?r.updateByIndex(t,void 0).optimizeSpace():r.closeAll());e.dispatch(n)},iE=()=>{gt().dispatch(zvt(),{debugInfo:"refresh-nsm-api"})};console.debug.bind(console,"SerialOperationCotext");const __t=k.createContext({dispatchSerialOperation:()=>{}});function Xs(){return k.useContext(__t)}function x_t(t,e){const n=rE(),r=k.useCallback(t,e);k.useEffect(()=>{const o=n.registerSerialOperationHandler(r);return()=>{o()}},[r,n])}function sE(t,e,n=[]){const r=t.constructor();for(let o in t){const i=t[o],s=[...n,o];typeof i=="string"||typeof i=="number"||i==null?r[o]=e(i,s):typeof i=="object"&&!Array.isArray(i)?r[o]=sE(i,e,s):console.warn(`Skipping invalid key "${s.join(".")}". Should be a string, number, null or object. Received: "${Array.isArray(i)?"Array":typeof i}"`)}return r}const k_t={theme:"",uid:"",misc:{activitybarWidth:"",miniEditorWidth:"",noteSidebarWidth:"",noteTagsBg:"",noteTagsText:"",pageMaxWidth:"",pagePadding:"",workspaceSidebarWidth:"",activitybarBg:"",activitybarBtnBgPress:"",activitybarText:"",editorAttentionBg:"",editorBacklinkBg:"",editorBacklinkBgHover:"",editorBacklinkText:"",editorBg:"",editorCodeBg:"",kbdBg:"",kbdText:"",linkText:"",searchHighlightBg:""},border:{radius:{DEFAULT:"",none:"",sm:"",md:"",lg:"",xl:""},width:{DEFAULT:"",none:"",lg:"",md:""}},widescreenWidth:"",color:{neutral:{bgLayerTop:"",bgLayerMiddle:"",bgLayerBottom:"",bgLayerFloat:"",textDisabled:"",textSubdued:"",text:"",textStrong:"",textInverted:"",textFieldBg:"",textFieldText:"",textFieldBorder:"",...Xc()},secondary:Xc(),promote:Xc(),caution:Xc(),critical:Xc(),positive:Xc()},ringWidth:{DEFAULT:"",none:""},size:{xs:"",sm:"",md:"",lg:"",xl:"","2xl":"","3xl":"","4xl":"","5xl":"","6xl":"","7xl":"",prose:""},space:{0:"","0_5":"",1:"","1_5":"",2:"","2_5":"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",10:"",11:"",12:"",14:"",16:"",20:"",24:"",48:"",64:"",72:"",80:"",96:"",px:""},typography:{fontFamily:{sans:"",serif:"",mono:""},text:{xl:{height:"",size:""},lg:{height:"",size:""},base:{height:"",size:""},sm:{height:"",size:""},xs:{height:"",size:""},"2xl":{height:"",size:""},"3xl":{height:"",size:""}}}};function Xc(){return{iconDisabled:"",iconSubdued:"",icon:"",solid:"",solidText:"",solidStrong:"",solidStronger:"",solidSubdued:"",solidFaint:"",borderSubdued:"",border:"",borderStrong:""}}const D6={...k_t},J=sE(D6,(t,e)=>`var(${M6(e)})`);sE(D6,(t,e)=>M6(e));function M6(t){var n;const e=[(n=t[0])!=null?n:"",...t.slice(1).map(r=>$_t(r))].join("");if(/^[a-zA-Z0-9_-]*$/g.test(e))return`--BV-${e}`;throw new Error(`Invalid id ${e}`)}function $_t(t){var e;return((e=t[0])==null?void 0:e.toLocaleUpperCase())+t.slice(1)}function Ug(t){return gt()}function L6(t){return t.name===pi.name||t.name===U1.name}class F6{constructor(){ee(this,"name",cn.Browser);ee(this,"displayName","Browser Storage");ee(this,"description","Saves data in your browsers local storage");ee(this,"onChange",()=>{});ee(this,"_idb",new OQ)}async createFile(e,n,r){await this.writeFile(e,n,r),this.onChange({type:"create",wsPath:e})}async deleteFile(e,n){await this._idb.unlink(kr(e)),this.onChange({type:"delete",wsPath:e})}async fileExists(e,n){const r=kr(e);try{return await this._idb.stat(r),!0}catch(o){if(o instanceof pi&&o.code===Bs)return!1;throw o}}async fileStat(e,n){const r=kr(e),o=await this._idb.stat(r);return{ctime:o.mtimeMs,mtime:o.mtimeMs}}isSupported(){return globalThis.indexedDB!=null}async listAllFiles(e,n,r){let o=[];const i=await this._idb.opendirRecursive(n);return Ys(e),o=i.map(a=>OS(a)).filter(a=>!!a),o.sort((a,l)=>a.localeCompare(l))}async newWorkspaceMetadata(e,n){}parseError(e){try{return C0(JSON.parse(e))}catch(n){return}}async readFile(e,n){if(await this.fileExists(e,n))return this._idb.readFile(kr(e))}async renameFile(e,n,r){await this._idb.rename(kr(e),kr(n)),this.onChange({type:"rename",oldWsPath:e,newWsPath:n})}serializeError(e){return JSON.stringify(E0(e))}async writeFile(e,n,r){const o=kr(e);await this._idb.writeFile(o,n),this.onChange({type:"write",wsPath:e})}}function S_t(t){const e=kr(t);function n(i,s=!1){return fetch(`https://unpkg.com/flent-help@${Ex}/`+i).then(a=>{if(!a.ok){if(a.status===404)return null;throw new lt({message:`Encountered an error making request to unpkg.com ${a.status} ${a.statusText}`})}return a}).catch(a=>{if(a.message==="Failed to fetch"){console.error("Failed to fetch helpfs");return}throw a})}const r=e.split("/"),[,...o]=r;return n(o.join("/")).then(i=>i==null?void 0:i.blob()).then(i=>{if(!i)return;const s=r[r.length-1];return new File([i],s)})}class E_t{constructor(){ee(this,"name",cn.Help);ee(this,"displayName","Help documentation");ee(this,"description","");ee(this,"hidden",!0);ee(this,"onChange",()=>{});ee(this,"_idbProvider",new F6)}async createFile(e,n,r){await this.writeFile(e,n,r),this.onChange({type:"create",wsPath:e})}async deleteFile(e,n){e!==ff&&(await this._idbProvider.deleteFile(e,n),this.onChange({type:"delete",wsPath:e}))}async fileExists(e,n){return e===ff?!0:this._idbProvider.fileExists(e,n)}async fileStat(e,n){return this._idbProvider.fileStat(e,n)}isSupported(){return!0}async listAllFiles(e,n,r){return[...new Set([ff,...await this._idbProvider.listAllFiles(e,n,r)])]}async newWorkspaceMetadata(e,n){}parseError(e){try{return C0(JSON.parse(e))}catch(n){return}}async readFile(e,n){const r=await S_t(e);return r||this._idbProvider.readFile(e,n)}async renameFile(e,n,r){e!==ff&&(await this._idbProvider.renameFile(e,n,r),this.onChange({type:"rename",oldWsPath:e,newWsPath:n}))}serializeError(e){return JSON.stringify(E0(e))}async writeFile(e,n,r){e!==ff&&(await this._idbProvider.writeFile(e,n,r),this.onChange({type:"write",wsPath:e}))}}const B6=t=>t.endsWith(".md")||t.endsWith(".png");class j6{constructor(){ee(this,"onChange",()=>{})}async createFile(e,n,r){await this.writeFile(e,n,r),this.onChange({type:"create",wsPath:e})}async deleteFile(e,n){const{wsName:r}=ft(e);await(await this._getFs(r,n)).unlink(kr(e)),this.onChange({type:"delete",wsPath:e})}async fileExists(e,n){const r=kr(e),{wsName:o}=ft(e);try{return await(await this._getFs(o,n)).stat(r),!0}catch(i){if(i instanceof pi&&i.code===Bs)return!1;throw i}}async fileStat(e,n){const r=kr(e),{wsName:o}=ft(e),i=await(await this._getFs(o,n)).stat(r);return{ctime:i.mtimeMs,mtime:i.mtimeMs}}async listAllFiles(e,n,r){let o=[];const i=await(await this._getFs(n,r)).opendirRecursive(n);return Ys(e),o=i.map(a=>OS(a)).filter(a=>!!a),o.sort((a,l)=>a.localeCompare(l))}parseError(e){try{return C0(JSON.parse(e))}catch(n){return}}async readFile(e,n){if(!await this.fileExists(e,n))return;const{wsName:r}=ft(e);return(await this._getFs(r,n)).readFile(kr(e))}async renameFile(e,n,r){const{wsName:o}=ft(e);await(await this._getFs(o,r)).rename(kr(e),kr(n)),this.onChange({type:"rename",oldWsPath:e,newWsPath:n})}serializeError(e){return JSON.stringify(E0(e))}async writeFile(e,n,r){const o=kr(e),{wsName:i}=ft(e);await(await this._getFs(i,r)).writeFile(o,n),this.onChange({type:"write",wsPath:e})}}class C_t extends j6{constructor(){super(...arguments);ee(this,"name",cn.NativeFS);ee(this,"displayName","File system storage");ee(this,"description","Saves data in your file system");ee(this,"onChange",()=>{})}isSupported(){return!0}async newWorkspaceMetadata(n,r){const{rootDirHandle:o}=r;if(!o)throw new Error("rootDirHandle is necessary for creating nativefs workspace");return{rootDirHandle:o}}async _getFs(n,r){const o=(await r.readWorkspaceMetadata(n)).rootDirHandle;return new X4({rootDirHandle:o,allowedFile:({name:i})=>B6(i)})}}class T_t extends j6{constructor(){super(...arguments);ee(this,"name",cn.PrivateFS);ee(this,"displayName","Private file system storage");ee(this,"description","Saves data in your browsers file system storage");ee(this,"onChange",()=>{})}isSupported(){return!0}async newWorkspaceMetadata(){}async _getFs(n){const r=await l8();if(!r)throw new Error("PrivateFS is not available in this browser");const o=await r.getDirectoryHandle(n,{create:!0});return new X4({rootDirHandle:o,allowedFile:({name:i})=>B6(i)})}}const A_t="@bangle.io/browser-nativefs-storage",N_t=zn.create({name:A_t,application:{storageProvider:new C_t,onStorageError:t=>{if(t.code===Jh||t.code===k0){const e=Qn().wsName;if(e)return g6(e,t.code),!0}return t.name===Oo.name||t.name===pi.name?(console.debug(t.code,t.name,t.stack),bt({severity:Be.ERROR,title:"File system error",content:t.message,uid:"NativefsStorageProviderError"+Math.random(),buttons:[{title:"Report issue",hint:"Report an issue on Github",operation:qp}]}),!0):(console.log("nativefs didnt handle error",t.name,t.message),!1)}}}),R_t="@bangle.io/browser-privatefs-storage",P_t=zn.create({name:R_t,application:{slices:[],storageProvider:new T_t,onStorageError:t=>{if(t.code===Jh||t.code===k0){const e=Qn().wsName;if(e)return g6(e,t.code),!0}return t.name===Oo.name||t.name===pi.name?(console.debug(t.code,t.name,t.stack),bt({severity:Be.ERROR,title:"File system error",content:t.message,uid:"PrivateFSStorage"+Math.random(),buttons:[{title:"Report issue",hint:"Report an issue on Github",operation:qp}]}),!0):(console.log("nativefs didnt handle error",t.name,t.message),!1)}}}),O_t="@bangle.io/browser-storage",I_t=zn.create({name:O_t,application:{storageProvider:new F6,onStorageError:t=>L6(t)?(console.debug(t.code,t.name),bt({severity:Be.ERROR,title:"Error writing to browser storage",content:t.message,uid:t.code+""+Math.random()}),!0):(bt({severity:Be.ERROR,title:`Browser storage provider encountered an unknown error: ${t.name}`,uid:"unknown-error"+t.code||t.name+Math.random(),buttons:[]}),!1)}});var Gr="top",qo="bottom",Wo="right",Zr="left",aE="auto",hm=[Gr,qo,Wo,Zr],ld="start",th="end",D_t="clippingParents",z6="viewport",wf="popper",M_t="reference",tR=hm.reduce(function(t,e){return t.concat([e+"-"+ld,e+"-"+th])},[]),q6=[].concat(hm,[aE]).reduce(function(t,e){return t.concat([e,e+"-"+ld,e+"-"+th])},[]),L_t="beforeRead",F_t="read",B_t="afterRead",j_t="beforeMain",z_t="main",q_t="afterMain",W_t="beforeWrite",U_t="write",V_t="afterWrite",H_t=[L_t,F_t,B_t,j_t,z_t,q_t,W_t,U_t,V_t];function Yi(t){return t.split("-")[0]}function po(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function kc(t){var e=po(t).Element;return t instanceof e||t instanceof Element}function Do(t){var e=po(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function lE(t){if(typeof ShadowRoot=="undefined")return!1;var e=po(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}var sc=Math.max,ey=Math.min,cd=Math.round;function Ox(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function W6(){return!/^((?!chrome|android).)*safari/i.test(Ox())}function ud(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),o=1,i=1;e&&Do(t)&&(o=t.offsetWidth>0&&cd(r.width)/t.offsetWidth||1,i=t.offsetHeight>0&&cd(r.height)/t.offsetHeight||1);var s=kc(t)?po(t):window,a=s.visualViewport,l=!W6()&&n,c=(r.left+(l&&a?a.offsetLeft:0))/o,u=(r.top+(l&&a?a.offsetTop:0))/i,d=r.width/o,f=r.height/i;return{width:d,height:f,top:u,right:c+d,bottom:u+f,left:c,x:c,y:u}}function cE(t){var e=ud(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function U6(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&lE(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function as(t){return t?(t.nodeName||"").toLowerCase():null}function js(t){return po(t).getComputedStyle(t)}function K_t(t){return["table","td","th"].indexOf(as(t))>=0}function gl(t){return((kc(t)?t.ownerDocument:t.document)||window.document).documentElement}function tb(t){return as(t)==="html"?t:t.assignedSlot||t.parentNode||(lE(t)?t.host:null)||gl(t)}function nR(t){return!Do(t)||js(t).position==="fixed"?null:t.offsetParent}function G_t(t){var e=/firefox/i.test(Ox()),n=/Trident/i.test(Ox());if(n&&Do(t)){var r=js(t);if(r.position==="fixed")return null}var o=tb(t);for(lE(o)&&(o=o.host);Do(o)&&["html","body"].indexOf(as(o))<0;){var i=js(o);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||e&&i.willChange==="filter"||e&&i.filter&&i.filter!=="none")return o;o=o.parentNode}return null}function mm(t){for(var e=po(t),n=nR(t);n&&K_t(n)&&js(n).position==="static";)n=nR(n);return n&&(as(n)==="html"||as(n)==="body"&&js(n).position==="static")?e:n||G_t(t)||e}function uE(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function ap(t,e,n){return sc(t,ey(e,n))}function Z_t(t,e,n){var r=ap(t,e,n);return r>n?n:r}function V6(){return{top:0,right:0,bottom:0,left:0}}function H6(t){return Object.assign({},V6(),t)}function K6(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var Y_t=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,H6(typeof e!="number"?e:K6(e,hm))};function J_t(t){var e,n=t.state,r=t.name,o=t.options,i=n.elements.arrow,s=n.modifiersData.popperOffsets,a=Yi(n.placement),l=uE(a),c=[Zr,Wo].indexOf(a)>=0,u=c?"height":"width";if(!(!i||!s)){var d=Y_t(o.padding,n),f=cE(i),p=l==="y"?Gr:Zr,h=l==="y"?qo:Wo,y=n.rects.reference[u]+n.rects.reference[l]-s[l]-n.rects.popper[u],m=s[l]-n.rects.reference[l],w=mm(i),x=w?l==="y"?w.clientHeight||0:w.clientWidth||0:0,$=y/2-m/2,S=d[p],I=x-f[u]-d[h],E=x/2-f[u]/2+$,L=ap(S,E,I),T=l;n.modifiersData[r]=(e={},e[T]=L,e.centerOffset=L-E,e)}}function X_t(t){var e=t.state,n=t.options,r=n.element,o=r===void 0?"[data-popper-arrow]":r;o!=null&&(typeof o=="string"&&(o=e.elements.popper.querySelector(o),!o)||U6(e.elements.popper,o)&&(e.elements.arrow=o))}var G6={name:"arrow",enabled:!0,phase:"main",fn:J_t,effect:X_t,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},Q_t={left:"right",right:"left",bottom:"top",top:"bottom"};function Vg(t){return t.replace(/left|right|bottom|top/g,function(e){return Q_t[e]})}var ext={start:"end",end:"start"};function rR(t){return t.replace(/start|end/g,function(e){return ext[e]})}function dE(t){var e=po(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function fE(t){return ud(gl(t)).left+dE(t).scrollLeft}function txt(t,e){var n=po(t),r=gl(t),o=n.visualViewport,i=r.clientWidth,s=r.clientHeight,a=0,l=0;if(o){i=o.width,s=o.height;var c=W6();(c||!c&&e==="fixed")&&(a=o.offsetLeft,l=o.offsetTop)}return{width:i,height:s,x:a+fE(t),y:l}}function nxt(t){var e,n=gl(t),r=dE(t),o=(e=t.ownerDocument)==null?void 0:e.body,i=sc(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),s=sc(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),a=-r.scrollLeft+fE(t),l=-r.scrollTop;return js(o||n).direction==="rtl"&&(a+=sc(n.clientWidth,o?o.clientWidth:0)-i),{width:i,height:s,x:a,y:l}}function pE(t){var e=js(t),n=e.overflow,r=e.overflowX,o=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+r)}function Z6(t){return["html","body","#document"].indexOf(as(t))>=0?t.ownerDocument.body:Do(t)&&pE(t)?t:Z6(tb(t))}function lp(t,e){var n;e===void 0&&(e=[]);var r=Z6(t),o=r===((n=t.ownerDocument)==null?void 0:n.body),i=po(r),s=o?[i].concat(i.visualViewport||[],pE(r)?r:[]):r,a=e.concat(s);return o?a:a.concat(lp(tb(s)))}function Ix(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function rxt(t,e){var n=ud(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function oR(t,e,n){return e===z6?Ix(txt(t,n)):kc(e)?rxt(e,n):Ix(nxt(gl(t)))}function oxt(t){var e=lp(tb(t)),n=["absolute","fixed"].indexOf(js(t).position)>=0,r=n&&Do(t)?mm(t):t;return kc(r)?e.filter(function(o){return kc(o)&&U6(o,r)&&as(o)!=="body"}):[]}function ixt(t,e,n,r){var o=e==="clippingParents"?oxt(t):[].concat(e),i=[].concat(o,[n]),s=i[0],a=i.reduce(function(l,c){var u=oR(t,c,r);return l.top=sc(u.top,l.top),l.right=ey(u.right,l.right),l.bottom=ey(u.bottom,l.bottom),l.left=sc(u.left,l.left),l},oR(t,s,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function dd(t){return t.split("-")[1]}function Y6(t){var e=t.reference,n=t.element,r=t.placement,o=r?Yi(r):null,i=r?dd(r):null,s=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(o){case Gr:l={x:s,y:e.y-n.height};break;case qo:l={x:s,y:e.y+e.height};break;case Wo:l={x:e.x+e.width,y:a};break;case Zr:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var c=o?uE(o):null;if(c!=null){var u=c==="y"?"height":"width";switch(i){case ld:l[c]=l[c]-(e[u]/2-n[u]/2);break;case th:l[c]=l[c]+(e[u]/2-n[u]/2);break}}return l}function nh(t,e){e===void 0&&(e={});var n=e,r=n.placement,o=r===void 0?t.placement:r,i=n.strategy,s=i===void 0?t.strategy:i,a=n.boundary,l=a===void 0?D_t:a,c=n.rootBoundary,u=c===void 0?z6:c,d=n.elementContext,f=d===void 0?wf:d,p=n.altBoundary,h=p===void 0?!1:p,y=n.padding,m=y===void 0?0:y,w=H6(typeof m!="number"?m:K6(m,hm)),x=f===wf?M_t:wf,$=t.rects.popper,S=t.elements[h?x:f],I=ixt(kc(S)?S:S.contextElement||gl(t.elements.popper),l,u,s),E=ud(t.elements.reference),L=Y6({reference:E,element:$,strategy:"absolute",placement:o}),T=Ix(Object.assign({},$,L)),F=f===wf?T:E,j={top:I.top-F.top+w.top,bottom:F.bottom-I.bottom+w.bottom,left:I.left-F.left+w.left,right:F.right-I.right+w.right},U=t.modifiersData.offset;if(f===wf&&U){var ce=U[o];Object.keys(j).forEach(function(W){var P=[Wo,qo].indexOf(W)>=0?1:-1,ne=[Gr,qo].indexOf(W)>=0?"y":"x";j[W]+=ce[ne]*P})}return j}function sxt(t,e){e===void 0&&(e={});var n=e,r=n.placement,o=n.boundary,i=n.rootBoundary,s=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?q6:l,u=dd(r),d=u?a?tR:tR.filter(function(h){return dd(h)===u}):hm,f=d.filter(function(h){return c.indexOf(h)>=0});f.length===0&&(f=d);var p=f.reduce(function(h,y){return h[y]=nh(t,{placement:y,boundary:o,rootBoundary:i,padding:s})[Yi(y)],h},{});return Object.keys(p).sort(function(h,y){return p[h]-p[y]})}function axt(t){if(Yi(t)===aE)return[];var e=Vg(t);return[rR(t),e,rR(e)]}function lxt(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var o=n.mainAxis,i=o===void 0?!0:o,s=n.altAxis,a=s===void 0?!0:s,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,f=n.altBoundary,p=n.flipVariations,h=p===void 0?!0:p,y=n.allowedAutoPlacements,m=e.options.placement,w=Yi(m),x=w===m,$=l||(x||!h?[Vg(m)]:axt(m)),S=[m].concat($).reduce(function(he,be){return he.concat(Yi(be)===aE?sxt(e,{placement:be,boundary:u,rootBoundary:d,padding:c,flipVariations:h,allowedAutoPlacements:y}):be)},[]),I=e.rects.reference,E=e.rects.popper,L=new Map,T=!0,F=S[0],j=0;j<S.length;j++){var U=S[j],ce=Yi(U),W=dd(U)===ld,P=[Gr,qo].indexOf(ce)>=0,ne=P?"width":"height",Q=nh(e,{placement:U,boundary:u,rootBoundary:d,altBoundary:f,padding:c}),oe=P?W?Wo:Zr:W?qo:Gr;I[ne]>E[ne]&&(oe=Vg(oe));var nt=Vg(oe),xt=[];if(i&&xt.push(Q[ce]<=0),a&&xt.push(Q[oe]<=0,Q[nt]<=0),xt.every(function(he){return he})){F=U,T=!1;break}L.set(U,xt)}if(T)for(var Ae=h?3:1,ae=function(be){var Ie=S.find(function(Qe){var Ue=L.get(Qe);if(Ue)return Ue.slice(0,be).every(function(dn){return dn})});if(Ie)return F=Ie,"break"},fe=Ae;fe>0;fe--){var _e=ae(fe);if(_e==="break")break}e.placement!==F&&(e.modifiersData[r]._skip=!0,e.placement=F,e.reset=!0)}}var J6={name:"flip",enabled:!0,phase:"main",fn:lxt,requiresIfExists:["offset"],data:{_skip:!1}};function cxt(t,e,n){var r=Yi(t),o=[Zr,Gr].indexOf(r)>=0?-1:1,i=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,s=i[0],a=i[1];return s=s||0,a=(a||0)*o,[Zr,Wo].indexOf(r)>=0?{x:a,y:s}:{x:s,y:a}}function uxt(t){var e=t.state,n=t.options,r=t.name,o=n.offset,i=o===void 0?[0,0]:o,s=q6.reduce(function(u,d){return u[d]=cxt(d,e.rects,i),u},{}),a=s[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=s}var X6={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:uxt};function dxt(t){var e=t.state,n=t.name;e.modifiersData[n]=Y6({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var hE={name:"popperOffsets",enabled:!0,phase:"read",fn:dxt,data:{}};function fxt(t){return t==="x"?"y":"x"}function pxt(t){var e=t.state,n=t.options,r=t.name,o=n.mainAxis,i=o===void 0?!0:o,s=n.altAxis,a=s===void 0?!1:s,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,f=n.tether,p=f===void 0?!0:f,h=n.tetherOffset,y=h===void 0?0:h,m=nh(e,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),w=Yi(e.placement),x=dd(e.placement),$=!x,S=uE(w),I=fxt(S),E=e.modifiersData.popperOffsets,L=e.rects.reference,T=e.rects.popper,F=typeof y=="function"?y(Object.assign({},e.rects,{placement:e.placement})):y,j=typeof F=="number"?{mainAxis:F,altAxis:F}:Object.assign({mainAxis:0,altAxis:0},F),U=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,ce={x:0,y:0};if(E){if(i){var W,P=S==="y"?Gr:Zr,ne=S==="y"?qo:Wo,Q=S==="y"?"height":"width",oe=E[S],nt=oe+m[P],xt=oe-m[ne],Ae=p?-T[Q]/2:0,ae=x===ld?L[Q]:T[Q],fe=x===ld?-T[Q]:-L[Q],_e=e.elements.arrow,he=p&&_e?cE(_e):{width:0,height:0},be=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:V6(),Ie=be[P],Qe=be[ne],Ue=ap(0,L[Q],he[Q]),dn=$?L[Q]/2-Ae-Ue-Ie-j.mainAxis:ae-Ue-Ie-j.mainAxis,wi=$?-L[Q]/2+Ae+Ue+Qe+j.mainAxis:fe+Ue+Qe+j.mainAxis,go=e.elements.arrow&&mm(e.elements.arrow),Zo=go?S==="y"?go.clientTop||0:go.clientLeft||0:0,rt=(W=U==null?void 0:U[S])!=null?W:0,Tt=oe+dn-rt-Zo,wt=oe+wi-rt,_i=ap(p?ey(nt,Tt):nt,oe,p?sc(xt,wt):xt);E[S]=_i,ce[S]=_i-oe}if(a){var yo,bo=S==="x"?Gr:Zr,at=S==="x"?qo:Wo,$t=E[I],_t=I==="y"?"height":"width",Yt=$t+m[bo],rn=$t-m[at],Ft=[Gr,Zr].indexOf(w)!==-1,tr=(yo=U==null?void 0:U[I])!=null?yo:0,nr=Ft?Yt:$t-L[_t]-T[_t]-tr+j.altAxis,xi=Ft?$t+L[_t]+T[_t]-tr-j.altAxis:rn,rr=p&&Ft?Z_t(nr,$t,xi):ap(p?nr:Yt,$t,p?xi:rn);E[I]=rr,ce[I]=rr-$t}e.modifiersData[r]=ce}}var Q6={name:"preventOverflow",enabled:!0,phase:"main",fn:pxt,requiresIfExists:["offset"]};function hxt(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function mxt(t){return t===po(t)||!Do(t)?dE(t):hxt(t)}function gxt(t){var e=t.getBoundingClientRect(),n=cd(e.width)/t.offsetWidth||1,r=cd(e.height)/t.offsetHeight||1;return n!==1||r!==1}function yxt(t,e,n){n===void 0&&(n=!1);var r=Do(e),o=Do(e)&&gxt(e),i=gl(e),s=ud(t,o,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((as(e)!=="body"||pE(i))&&(a=mxt(e)),Do(e)?(l=ud(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):i&&(l.x=fE(i))),{x:s.left+a.scrollLeft-l.x,y:s.top+a.scrollTop-l.y,width:s.width,height:s.height}}function bxt(t){var e=new Map,n=new Set,r=[];t.forEach(function(i){e.set(i.name,i)});function o(i){n.add(i.name);var s=[].concat(i.requires||[],i.requiresIfExists||[]);s.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&o(l)}}),r.push(i)}return t.forEach(function(i){n.has(i.name)||o(i)}),r}function vxt(t){var e=bxt(t);return H_t.reduce(function(n,r){return n.concat(e.filter(function(o){return o.phase===r}))},[])}function wxt(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function _xt(t){var e=t.reduce(function(n,r){var o=n[r.name];return n[r.name]=o?Object.assign({},o,r,{options:Object.assign({},o.options,r.options),data:Object.assign({},o.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var iR={placement:"bottom",modifiers:[],strategy:"absolute"};function sR(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function e7(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,o=e.defaultOptions,i=o===void 0?iR:o;return function(a,l,c){c===void 0&&(c=i);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},iR,i),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],f=!1,p={state:u,setOptions:function(w){var x=typeof w=="function"?w(u.options):w;y(),u.options=Object.assign({},i,u.options,x),u.scrollParents={reference:kc(a)?lp(a):a.contextElement?lp(a.contextElement):[],popper:lp(l)};var $=vxt(_xt([].concat(r,u.options.modifiers)));return u.orderedModifiers=$.filter(function(S){return S.enabled}),h(),p.update()},forceUpdate:function(){if(!f){var w=u.elements,x=w.reference,$=w.popper;if(sR(x,$)){u.rects={reference:yxt(x,mm($),u.options.strategy==="fixed"),popper:cE($)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(j){return u.modifiersData[j.name]=Object.assign({},j.data)});for(var S=0;S<u.orderedModifiers.length;S++){if(u.reset===!0){u.reset=!1,S=-1;continue}var I=u.orderedModifiers[S],E=I.fn,L=I.options,T=L===void 0?{}:L,F=I.name;typeof E=="function"&&(u=E({state:u,options:T,name:F,instance:p})||u)}}}},update:wxt(function(){return new Promise(function(m){p.forceUpdate(),m(u)})}),destroy:function(){y(),f=!0}};if(!sR(a,l))return p;p.setOptions(c).then(function(m){!f&&c.onFirstUpdate&&c.onFirstUpdate(m)});function h(){u.orderedModifiers.forEach(function(m){var w=m.name,x=m.options,$=x===void 0?{}:x,S=m.effect;if(typeof S=="function"){var I=S({state:u,name:w,instance:p,options:$}),E=function(){};d.push(I||E)}})}function y(){d.forEach(function(m){return m()}),d=[]}return p}}var cg={passive:!0};function xxt(t){var e=t.state,n=t.instance,r=t.options,o=r.scroll,i=o===void 0?!0:o,s=r.resize,a=s===void 0?!0:s,l=po(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return i&&c.forEach(function(u){u.addEventListener("scroll",n.update,cg)}),a&&l.addEventListener("resize",n.update,cg),function(){i&&c.forEach(function(u){u.removeEventListener("scroll",n.update,cg)}),a&&l.removeEventListener("resize",n.update,cg)}}var t7={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:xxt,data:{}},kxt={top:"auto",right:"auto",bottom:"auto",left:"auto"};function $xt(t,e){var n=t.x,r=t.y,o=e.devicePixelRatio||1;return{x:cd(n*o)/o||0,y:cd(r*o)/o||0}}function aR(t){var e,n=t.popper,r=t.popperRect,o=t.placement,i=t.variation,s=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,d=t.isFixed,f=s.x,p=f===void 0?0:f,h=s.y,y=h===void 0?0:h,m=typeof u=="function"?u({x:p,y}):{x:p,y};p=m.x,y=m.y;var w=s.hasOwnProperty("x"),x=s.hasOwnProperty("y"),$=Zr,S=Gr,I=window;if(c){var E=mm(n),L="clientHeight",T="clientWidth";if(E===po(n)&&(E=gl(n),js(E).position!=="static"&&a==="absolute"&&(L="scrollHeight",T="scrollWidth")),E=E,o===Gr||(o===Zr||o===Wo)&&i===th){S=qo;var F=d&&E===I&&I.visualViewport?I.visualViewport.height:E[L];y-=F-r.height,y*=l?1:-1}if(o===Zr||(o===Gr||o===qo)&&i===th){$=Wo;var j=d&&E===I&&I.visualViewport?I.visualViewport.width:E[T];p-=j-r.width,p*=l?1:-1}}var U=Object.assign({position:a},c&&kxt),ce=u===!0?$xt({x:p,y},po(n)):{x:p,y};if(p=ce.x,y=ce.y,l){var W;return Object.assign({},U,(W={},W[S]=x?"0":"",W[$]=w?"0":"",W.transform=(I.devicePixelRatio||1)<=1?"translate("+p+"px, "+y+"px)":"translate3d("+p+"px, "+y+"px, 0)",W))}return Object.assign({},U,(e={},e[S]=x?y+"px":"",e[$]=w?p+"px":"",e.transform="",e))}function Sxt(t){var e=t.state,n=t.options,r=n.gpuAcceleration,o=r===void 0?!0:r,i=n.adaptive,s=i===void 0?!0:i,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:Yi(e.placement),variation:dd(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:o,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,aR(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,aR(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var n7={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Sxt,data:{}};function Ext(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},o=e.attributes[n]||{},i=e.elements[n];!Do(i)||!as(i)||(Object.assign(i.style,r),Object.keys(o).forEach(function(s){var a=o[s];a===!1?i.removeAttribute(s):i.setAttribute(s,a===!0?"":a)}))})}function Cxt(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var o=e.elements[r],i=e.attributes[r]||{},s=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),a=s.reduce(function(l,c){return l[c]="",l},{});!Do(o)||!as(o)||(Object.assign(o.style,a),Object.keys(i).forEach(function(l){o.removeAttribute(l)}))})}}var r7={name:"applyStyles",enabled:!0,phase:"write",fn:Ext,effect:Cxt,requires:["computeStyles"]},Txt=[t7,hE,n7,r7],Axt=e7({defaultModifiers:Txt});function nb(t=["div",{class:"bangle-tooltip",role:"tooltip"},["div",{class:"bangle-tooltip-content"},0]],e=!1){const{dom:n,contentDOM:r}=Vr.renderSpec(window.document,t);if(e&&!n.querySelector(".bangle-tooltip-arrow")){const o=Vr.renderSpec(window.document,["div",{class:"bangle-tooltip-arrow","data-popper-arrow":""}]);n.appendChild(o.dom)}return{dom:n,contentDOM:r}}const o7=Rxt,Nxt=typeof window=="undefined"?12:parseFloat(getComputedStyle(document.documentElement).fontSize);function Rxt({stateKey:t,renderOpts:{tooltipDOMSpec:e,placement:n="top",getReferenceElement:r,getScrollContainer:o=u=>u.dom.parentElement,onUpdateTooltip:i=(u,d,f)=>{},onHideTooltip:s=(u,d,f)=>{},tooltipOffset:a=()=>[0,.5*Nxt],fallbackPlacements:l=["bottom","top"],customPopperModifiers:c}}){const u=new ht({view:f=>new d(f)});class d{constructor(p){this.popperInstance=null,this._view=p;const{dom:h}=nb(e);this._tooltip=h,this._scrollContainerDOM=o(p),this._view.dom.parentNode.appendChild(this._tooltip);const y=t.getState(p.state);if(Pxt(y),y.show){this._showTooltip();return}}destroy(){this.popperInstance&&(this.popperInstance.destroy(),this.popperInstance=null),this._view.dom.parentNode.removeChild(this._tooltip)}update(p,h){const y=t.getState(p.state);y!==t.getState(h)&&(y.show?(i.call(this,p.state,p.dispatch,p),this._showTooltip()):this._hideTooltip())}_createPopperInstance(p){if(this.popperInstance)return;const h=this._tooltip.querySelector("[data-popper-arrow]"),y=[X6,Q6,J6,{name:"offset",options:{offset:m=>a(m)}},{name:"flip",options:{fallbackPlacements:l,padding:10}},{name:"preventOverflow",options:{boundary:this._scrollContainerDOM}},hE,h?G6:void 0,h?{name:"arrow",options:{element:h}}:void 0].filter(Boolean);this.popperInstance=Axt(r(p,this._tooltip,this._scrollContainerDOM),this._tooltip,{placement:n,modifiers:c?c(p,this._tooltip,this._scrollContainerDOM,y):y}),i.call(this,p.state,p.dispatch,p)}_hideTooltip(){this.popperInstance&&(this._tooltip.removeAttribute("data-show"),this.popperInstance.destroy(),this.popperInstance=null,s.call(this,this._view.state,this._view.dispatch,this._view))}_showTooltip(){this._tooltip.setAttribute("data-show",""),this._createPopperInstance(this._view),this.popperInstance.update()}}return u}function Pxt(t){if(typeof t.show!="boolean")throw Po('Tooltip must be controlled by a plugin having a boolean field "show" in its state, but received the state=',t),new Error('"show" field required.')}const Oxt=Mxt,Ixt={updateSelectionTooltipType:mE,hideSelectionTooltip:gE,queryIsSelectionTooltipActive:i7,querySelectionTooltipType:s7};let Dxt=()=>{};function Mxt({key:t=new vt("selectionTooltipPlugin"),calculateType:e=(r,o)=>r.selection.empty?null:"default",tooltipRenderOpts:n={}}){return()=>{const r=nb(n.tooltipDOMSpec);return[Lxt({key:t,tooltipDOMSpec:r,calculateType:e}),Fxt({stateKey:t}),o7({stateKey:t,renderOpts:{...n,getReferenceElement:Bxt,tooltipDOMSpec:r}})]}}function Lxt({key:t,calculateType:e,tooltipDOMSpec:n}){return new ht({key:t,state:{init:(r,o)=>{const i=e(o,null);return{type:i,tooltipContentDOM:n.contentDOM,show:typeof i=="string",calculateType:e}},apply:(r,o)=>{const i=r.getMeta(t);return i===void 0||i.type==null&&o.type==null?o:(Dxt("update tooltip state to ",i.type),{...o,type:i.type,show:typeof i.type=="string"})}}})}function Fxt({stateKey:t}){let e=!1;return new ht({props:{handleDOMEvents:{mousedown:(n,r)=>(e=!0,!1),mouseup:(n,r)=>(e=!1,Dx(t)(n.state,n.dispatch,n),!1)}},view(){return{update(n,r){const o=n.state;if(!(e||r===o)&&!(r&&r.doc.eq(o.doc)&&r.selection.eq(o.selection)))return Dx(t)(n.state,n.dispatch,n)}}}})}function Bxt(t){return{getBoundingClientRect:()=>{const{selection:e}=t.state;let{head:n,from:r}=e;const o=e instanceof Me?r:n,i=t.coordsAtPos(o);let{top:s,bottom:a,left:l,right:c}=i,u=c-l;if(e instanceof Me){const d=t.nodeDOM(o);u=d?d.clientWidth:u}return{width:u,height:a-s,top:s,right:c,bottom:a,left:l}}}}function Dx(t){return(e,n,r)=>{const o=t.getState(e),i=o.calculateType(e,o.type);return typeof i=="string"?mE(t,i)(e,n,r):i==null&&o.type!=null?gE(t)(e,n,r):!1}}function mE(t,e){return(n,r,o)=>(r&&r(n.tr.setMeta(t,{type:e}).setMeta("addToHistory",!1)),!0)}function gE(t){return(e,n,r)=>(n&&n(e.tr.setMeta(t,{type:null}).setMeta("addToHistory",!1)),!0)}function i7(t){return e=>{const n=t.getState(e);return!!(n&&typeof n.type=="string")}}function s7(t){return e=>{const n=t.getState(e);return n&&n.type}}var a7=Object.freeze({__proto__:null,plugins:Oxt,commands:Ixt,_syncTooltipOnUpdate:Dx,updateSelectionTooltipType:mE,hideSelectionTooltip:gE,queryIsSelectionTooltipActive:i7,querySelectionTooltipType:s7});const jxt="";function zxt(t,e,n){const r=new RegExp(`(^|[.!?\\s${jxt}])(${Wxt(n)})$`);return new Gs(r,(i,s)=>{const a=s[3]||s[2];if(!a)return null;const l=t.mark(e,{trigger:a}),{tr:c,selection:u}=i;if(a.length>1){const f=We.create(c.doc,u.from,u.from-a.length+1);c.setSelection(f)}const d=u.$from.marks();return c.replaceSelectionWith(t.text(a,[l,...d]),!1)})}const l7=/[\\^$.*+?()[\]{}|]/g,qxt=RegExp(l7.source);function Wxt(t){return t&&qxt.test(t)?t.replace(l7,"\\$&"):t||""}const Uxt=Kxt,Vxt=Gxt,Hxt={queryTriggerText:d7,queryIsSuggestTooltipActive:yE,replaceSuggestMarkWith:f7,incrementSuggestTooltipCounter:bE,decrementSuggestTooltipCounter:vE,resetSuggestTooltipCounter:p7},c7={select:"Enter",up:"ArrowUp",down:"ArrowDown",hide:"Escape",right:void 0,left:void 0};function Kxt({markName:t,trigger:e,markColor:n="#005893"}){return{name:t,type:"mark",schema:{inclusive:!0,excludes:"_",group:"suggestTriggerMarks",parseDOM:[{tag:`span[data-${t}]`}],toDOM:r=>["span",{"data-bangle-name":t,"data-suggest-trigger":r.attrs.trigger,style:`color: ${n}`}],attrs:{trigger:{default:e}}},markdown:{toMarkdown:{open:"",close:"",mixable:!0}}}}function Gxt({key:t=new vt("suggest_tooltip"),markName:e,trigger:n,tooltipRenderOpts:r,keybindings:o=c7,onEnter:i=(d,f,p)=>ty(t)(d,f,p),onArrowDown:s=bE(t),onArrowUp:a=vE(t),onEscape:l=(d,f,p)=>ty(t)(d,f,p),onArrowLeft:c,onArrowRight:u}){return({schema:d})=>{const f=yE(t);return[new ht({key:t,state:{init(p,h){return{trigger:n,markName:e,triggerText:"",show:!1,counter:0}},apply(p,h,y,m){const w=p.getMeta(t);if(w===void 0)return h;if(w.type==="RENDER_TOOLTIP")return{...h,triggerText:u7(m,e,n),show:!0};if(w.type==="HIDE_TOOLTIP")return h.show===!1?h:{...h,triggerText:"",show:!1,counter:0};if(w.type==="INCREMENT_COUNTER")return{...h,counter:h.counter+1};if(w.type==="RESET_COUNTER")return{...h,counter:0};if(w.type==="UPDATE_COUNTER")return{...h,counter:w.value};if(w.type==="DECREMENT_COUNTER")return{...h,counter:h.counter-1};throw new Error("Unknown type")}}}),o7({stateKey:t,renderOpts:{...r,getReferenceElement:Zxt(p=>{const h=d.marks[e];Lt(h,`markType ${e} not found`);const{selection:y}=p;return V$(h,p.doc,y.from-1,y.to)})}}),zxt(d,e,n),Yxt({trigger:n,markName:e,key:t}),o&&en(_r([[o.select,mt(f,i)],[o.up,mt(f,a)],[o.down,mt(f,s)],[o.left,mt(f,c)],[o.right,mt(f,u)],[o.hide,mt(f,l)]]))]}}function Zxt(t){return(e,n,r)=>({getBoundingClientRect:()=>{let o=e.state;const i=t(o),s=i.start>-1?i.start+1:0,a=e.coordsAtPos(s),l=e.coordsAtPos(i.end>-1?i.end:s);let{left:c,right:u}=a,{top:d,bottom:f}=l;const p=c,h=d,y=u-c,m=f-d;return new DOMRect(p,h,y,m)}})}function Yxt({key:t,trigger:e,markName:n}){return new ht({view(){return{update:(r,o)=>{const{state:i}=r;if(o===i||!i.selection.empty)return;const s=i.schema.marks[n];if(Lt(s,`markType ${n} not found`),o.doc.eq(i.doc)&&i.selection.eq(o&&o.selection)&&lR(i,s)===lR(o,s))return;const a=Jxt(n)(i);if(a&&!Xxt(i,s,e)){ty(t)(i,r.dispatch,r);return}if(!a){t.getState(i).show===!0&&ekt(t)(r.state,r.dispatch,r);return}Qxt(t)(r.state,r.dispatch,r)}}}})}function lR(t,e){return t&&t.storedMarks&&e.isInSet(t.storedMarks)}function Jxt(t){return e=>{const{from:n,to:r}=e.selection,o=e.schema.marks[t];return Lt(o,`markType ${t} not found`),e.doc.rangeHasMark(n-1,r,o)}}function Xxt(t,e,n){const{nodeBefore:r}=t.selection.$from;return!r||!e.isInSet(r.marks||[])?!1:(r.textContent||"").includes(n)}function Qxt(t){return(e,n,r)=>(n&&n(e.tr.setMeta(t,{type:"RENDER_TOOLTIP"}).setMeta("addToHistory",!1)),!0)}function ekt(t){return(e,n,r)=>(n&&n(e.tr.setMeta(t,{type:"HIDE_TOOLTIP"}).setMeta("addToHistory",!1)),!0)}function u7(t,e,n){const r=t.schema.marks[e];Lt(r,`markType ${e} not found`);const{nodeBefore:o}=t.selection.$from;return!o||!r.isInSet(o.marks||[])?"":(o.textContent||"").replace(/^([^\x00-\xFF]|[\s\n])+/g,"").replace(n,"")}function d7(t){return e=>{const{trigger:n,markName:r}=t.getState(e);return u7(e,r,n)}}function yE(t){return e=>t.getState(e)&&t.getState(e).show}function f7(t,e){return(n,r,o)=>{const{markName:i}=t.getState(n),{schema:s}=n,a=s.marks[i];Lt(a,`markType ${i} not found`);const{selection:l}=n,c=V$(a,n.doc,l.from-1,l.to);if(!c||c.start===-1)return!1;const d=(()=>{const{start:f,end:p}=c;let h=n.tr.removeStoredMark(a).replaceWith(f,p,te.empty);if(!e)return h;const y=e instanceof te;let m;try{m=e instanceof Hr||y?e:typeof e=="string"?n.schema.text(e):Hr.fromJSON(n.schema,e)}catch(w){return console.error(w),h}if(m.isText)h=h.replaceWith(f,f,m);else if(m.isBlock)h=qh(m)(h);else if(m.isInline||y){const w=y?m:te.fromArray([m,n.schema.text(" ")]);if(h=h.replaceWith(f,f,w),UZ){const x=document.getSelection();x&&x.empty()}return h=h.setSelection(Oe.near(h.doc.resolve(f+w.size))),h}return h})();return r&&(o==null||o.focus(),r(d)),!0}}function ty(t){return(e,n,r)=>{const{markName:o}=t.getState(e),{schema:i,selection:s}=e,a=i.marks[o];Lt(a,`markType ${o} not found`);const l=V$(a,e.doc,s.from-1,s.to),{start:c,end:u}=l;return c===-1&&e.storedMarks&&a.isInSet(e.storedMarks)?(n&&n(e.tr.removeStoredMark(a)),!0):c===-1?!1:(n&&n(e.tr.removeMark(c,u,a).removeStoredMark(a).setMeta("addToHistory",!1)),!0)}}function bE(t){return(e,n,r)=>(n&&n(e.tr.setMeta(t,{type:"INCREMENT_COUNTER"}).setMeta("addToHistory",!1)),!0)}function vE(t){return(e,n,r)=>(n&&n(e.tr.setMeta(t,{type:"DECREMENT_COUNTER"}).setMeta("addToHistory",!1)),!0)}function p7(t){return(e,n,r)=>(n&&n(e.tr.setMeta(t,{type:"RESET_COUNTER"}).setMeta("addToHistory",!1)),!0)}function tkt(t,e){return(n,r,o)=>(r&&r(n.tr.setMeta(t,{type:"UPDATE_COUNTER",value:e}).setMeta("addToHistory",!1)),!0)}var ho=Object.freeze({__proto__:null,spec:Uxt,plugins:Vxt,commands:Hxt,defaultKeys:c7,queryTriggerText:d7,queryIsSuggestTooltipActive:yE,replaceSuggestMarkWith:f7,removeSuggestMark:ty,incrementSuggestTooltipCounter:bE,decrementSuggestTooltipCounter:vE,resetSuggestTooltipCounter:p7,updateSuggestTooltipCounter:tkt}),h7={exports:{}},nkt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",rkt=nkt,okt=rkt;function m7(){}function g7(){}g7.resetWarningCache=m7;var ikt=function(){function t(r,o,i,s,a,l){if(l!==okt){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:g7,resetWarningCache:m7};return n.PropTypes=n,n};h7.exports=ikt();var skt=h7.exports,yt=Ws(skt),y7={exports:{}},Go={},b7={exports:{}},v7={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){var e,n,r,o;if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}if(typeof window=="undefined"||typeof MessageChannel!="function"){var l=null,c=null,u=function(){if(l!==null)try{var ae=t.unstable_now();l(!0,ae),l=null}catch(fe){throw setTimeout(u,0),fe}};e=function(ae){l!==null?setTimeout(e,0,ae):(l=ae,setTimeout(u,0))},n=function(ae,fe){c=setTimeout(ae,fe)},r=function(){clearTimeout(c)},t.unstable_shouldYield=function(){return!1},o=t.unstable_forceFrameRate=function(){}}else{var d=window.setTimeout,f=window.clearTimeout;if(typeof console!="undefined"){var p=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof p!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var h=!1,y=null,m=-1,w=5,x=0;t.unstable_shouldYield=function(){return t.unstable_now()>=x},o=function(){},t.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<ae?Math.floor(1e3/ae):5};var $=new MessageChannel,S=$.port2;$.port1.onmessage=function(){if(y!==null){var ae=t.unstable_now();x=ae+w;try{y(!0,ae)?S.postMessage(null):(h=!1,y=null)}catch(fe){throw S.postMessage(null),fe}}else h=!1},e=function(ae){y=ae,h||(h=!0,S.postMessage(null))},n=function(ae,fe){m=d(function(){ae(t.unstable_now())},fe)},r=function(){f(m),m=-1}}function I(ae,fe){var _e=ae.length;ae.push(fe);e:for(;;){var he=_e-1>>>1,be=ae[he];if(be!==void 0&&0<T(be,fe))ae[he]=fe,ae[_e]=be,_e=he;else break e}}function E(ae){return ae=ae[0],ae===void 0?null:ae}function L(ae){var fe=ae[0];if(fe!==void 0){var _e=ae.pop();if(_e!==fe){ae[0]=_e;e:for(var he=0,be=ae.length;he<be;){var Ie=2*(he+1)-1,Qe=ae[Ie],Ue=Ie+1,dn=ae[Ue];if(Qe!==void 0&&0>T(Qe,_e))dn!==void 0&&0>T(dn,Qe)?(ae[he]=dn,ae[Ue]=_e,he=Ue):(ae[he]=Qe,ae[Ie]=_e,he=Ie);else if(dn!==void 0&&0>T(dn,_e))ae[he]=dn,ae[Ue]=_e,he=Ue;else break e}}return fe}return null}function T(ae,fe){var _e=ae.sortIndex-fe.sortIndex;return _e!==0?_e:ae.id-fe.id}var F=[],j=[],U=1,ce=null,W=3,P=!1,ne=!1,Q=!1;function oe(ae){for(var fe=E(j);fe!==null;){if(fe.callback===null)L(j);else if(fe.startTime<=ae)L(j),fe.sortIndex=fe.expirationTime,I(F,fe);else break;fe=E(j)}}function nt(ae){if(Q=!1,oe(ae),!ne)if(E(F)!==null)ne=!0,e(xt);else{var fe=E(j);fe!==null&&n(nt,fe.startTime-ae)}}function xt(ae,fe){ne=!1,Q&&(Q=!1,r()),P=!0;var _e=W;try{for(oe(fe),ce=E(F);ce!==null&&(!(ce.expirationTime>fe)||ae&&!t.unstable_shouldYield());){var he=ce.callback;if(typeof he=="function"){ce.callback=null,W=ce.priorityLevel;var be=he(ce.expirationTime<=fe);fe=t.unstable_now(),typeof be=="function"?ce.callback=be:ce===E(F)&&L(F),oe(fe)}else L(F);ce=E(F)}if(ce!==null)var Ie=!0;else{var Qe=E(j);Qe!==null&&n(nt,Qe.startTime-fe),Ie=!1}return Ie}finally{ce=null,W=_e,P=!1}}var Ae=o;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ae){ae.callback=null},t.unstable_continueExecution=function(){ne||P||(ne=!0,e(xt))},t.unstable_getCurrentPriorityLevel=function(){return W},t.unstable_getFirstCallbackNode=function(){return E(F)},t.unstable_next=function(ae){switch(W){case 1:case 2:case 3:var fe=3;break;default:fe=W}var _e=W;W=fe;try{return ae()}finally{W=_e}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=Ae,t.unstable_runWithPriority=function(ae,fe){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var _e=W;W=ae;try{return fe()}finally{W=_e}},t.unstable_scheduleCallback=function(ae,fe,_e){var he=t.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?he+_e:he):_e=he,ae){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=_e+be,ae={id:U++,callback:fe,priorityLevel:ae,startTime:_e,expirationTime:be,sortIndex:-1},_e>he?(ae.sortIndex=_e,I(j,ae),E(F)===null&&ae===E(j)&&(Q?r():Q=!0,n(nt,_e-he))):(ae.sortIndex=be,I(F,ae),ne||P||(ne=!0,e(xt))),ae},t.unstable_wrapCallback=function(ae){var fe=W;return function(){var _e=W;W=fe;try{return ae.apply(this,arguments)}finally{W=_e}}}})(v7);b7.exports=v7;var akt=b7.exports;/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rb=k,nn=YI,Bn=akt;function we(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!rb)throw Error(we(227));var w7=new Set,rh={};function Fc(t,e){fd(t,e),fd(t+"Capture",e)}function fd(t,e){for(rh[t]=e,t=0;t<e.length;t++)w7.add(e[t])}var zs=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),lkt=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cR=Object.prototype.hasOwnProperty,uR={},dR={};function ckt(t){return cR.call(dR,t)?!0:cR.call(uR,t)?!1:lkt.test(t)?dR[t]=!0:(uR[t]=!0,!1)}function ukt(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function dkt(t,e,n,r){if(e===null||typeof e=="undefined"||ukt(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Fr(t,e,n,r,o,i,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=s}var er={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){er[t]=new Fr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];er[e]=new Fr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){er[t]=new Fr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){er[t]=new Fr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){er[t]=new Fr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){er[t]=new Fr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){er[t]=new Fr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){er[t]=new Fr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){er[t]=new Fr(t,5,!1,t.toLowerCase(),null,!1,!1)});var wE=/[\-:]([a-z])/g;function _E(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(wE,_E);er[e]=new Fr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(wE,_E);er[e]=new Fr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(wE,_E);er[e]=new Fr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){er[t]=new Fr(t,1,!1,t.toLowerCase(),null,!1,!1)});er.xlinkHref=new Fr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){er[t]=new Fr(t,1,!1,t.toLowerCase(),null,!0,!0)});function xE(t,e,n,r){var o=er.hasOwnProperty(e)?er[e]:null,i=o!==null?o.type===0:r?!1:!(!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N");i||(dkt(e,n,o,r)&&(n=null),r||o===null?ckt(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):o.mustUseProperty?t[o.propertyName]=n===null?o.type===3?!1:"":n:(e=o.attributeName,r=o.attributeNamespace,n===null?t.removeAttribute(e):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Bc=rb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zf=60103,Hl=60106,ka=60107,kE=60108,cp=60114,$E=60109,SE=60110,ob=60112,up=60113,ny=60120,ib=60115,EE=60116,CE=60121,TE=60128,_7=60129,AE=60130,Mx=60131;if(typeof Symbol=="function"&&Symbol.for){var In=Symbol.for;zf=In("react.element"),Hl=In("react.portal"),ka=In("react.fragment"),kE=In("react.strict_mode"),cp=In("react.profiler"),$E=In("react.provider"),SE=In("react.context"),ob=In("react.forward_ref"),up=In("react.suspense"),ny=In("react.suspense_list"),ib=In("react.memo"),EE=In("react.lazy"),CE=In("react.block"),In("react.scope"),TE=In("react.opaque.id"),_7=In("react.debug_trace_mode"),AE=In("react.offscreen"),Mx=In("react.legacy_hidden")}var fR=typeof Symbol=="function"&&Symbol.iterator;function _f(t){return t===null||typeof t!="object"?null:(t=fR&&t[fR]||t["@@iterator"],typeof t=="function"?t:null)}var Rw;function qf(t){if(Rw===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Rw=e&&e[1]||""}return`
`+Rw+t}var Pw=!1;function ug(t,e){if(!t||Pw)return"";Pw=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var o=l.stack.split(`
`),i=r.stack.split(`
`),s=o.length-1,a=i.length-1;1<=s&&0<=a&&o[s]!==i[a];)a--;for(;1<=s&&0<=a;s--,a--)if(o[s]!==i[a]){if(s!==1||a!==1)do if(s--,a--,0>a||o[s]!==i[a])return`
`+o[s].replace(" at new "," at ");while(1<=s&&0<=a);break}}}finally{Pw=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?qf(t):""}function fkt(t){switch(t.tag){case 5:return qf(t.type);case 16:return qf("Lazy");case 13:return qf("Suspense");case 19:return qf("SuspenseList");case 0:case 2:case 15:return t=ug(t.type,!1),t;case 11:return t=ug(t.type.render,!1),t;case 22:return t=ug(t.type._render,!1),t;case 1:return t=ug(t.type,!0),t;default:return""}}function Ou(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ka:return"Fragment";case Hl:return"Portal";case cp:return"Profiler";case kE:return"StrictMode";case up:return"Suspense";case ny:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case SE:return(t.displayName||"Context")+".Consumer";case $E:return(t._context.displayName||"Context")+".Provider";case ob:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case ib:return Ou(t.type);case CE:return Ou(t._render);case EE:e=t._payload,t=t._init;try{return Ou(t(e))}catch(n){}}return null}function ol(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function x7(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function pkt(t){var e=x7(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n!="undefined"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(s){r=""+s,i.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function dg(t){t._valueTracker||(t._valueTracker=pkt(t))}function k7(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=x7(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ry(t){if(t=t||(typeof document!="undefined"?document:void 0),typeof t=="undefined")return null;try{return t.activeElement||t.body}catch(e){return t.body}}function Lx(t,e){var n=e.checked;return nn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:t._wrapperState.initialChecked})}function pR(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ol(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function $7(t,e){e=e.checked,e!=null&&xE(t,"checked",e,!1)}function Fx(t,e){$7(t,e);var n=ol(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Bx(t,e.type,n):e.hasOwnProperty("defaultValue")&&Bx(t,e.type,ol(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function hR(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Bx(t,e,n){(e!=="number"||ry(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}function hkt(t){var e="";return rb.Children.forEach(t,function(n){n!=null&&(e+=n)}),e}function jx(t,e){return t=nn({children:void 0},e),(e=hkt(e.children))&&(t.children=e),t}function Iu(t,e,n,r){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ol(n),e=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,r&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function zx(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(we(91));return nn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function mR(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(we(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(we(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ol(n)}}function S7(t,e){var n=ol(e.value),r=ol(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function gR(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}var qx={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function E7(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wx(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?E7(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var fg,C7=function(t){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(e,n,r,o){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,o)})}:t}(function(t,e){if(t.namespaceURI!==qx.svg||"innerHTML"in t)t.innerHTML=e;else{for(fg=fg||document.createElement("div"),fg.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=fg.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function oh(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var dp={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mkt=["Webkit","ms","Moz","O"];Object.keys(dp).forEach(function(t){mkt.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),dp[e]=dp[t]})});function T7(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||dp.hasOwnProperty(t)&&dp[t]?(""+e).trim():e+"px"}function A7(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=T7(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,o):t[n]=o}}var gkt=nn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ux(t,e){if(e){if(gkt[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(we(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(we(60));if(!(typeof e.dangerouslySetInnerHTML=="object"&&"__html"in e.dangerouslySetInnerHTML))throw Error(we(61))}if(e.style!=null&&typeof e.style!="object")throw Error(we(62))}}function Vx(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function NE(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Hx=null,Du=null,Mu=null;function yR(t){if(t=ym(t)){if(typeof Hx!="function")throw Error(we(280));var e=t.stateNode;e&&(e=db(e),Hx(t.stateNode,t.type,e))}}function N7(t){Du?Mu?Mu.push(t):Mu=[t]:Du=t}function R7(){if(Du){var t=Du,e=Mu;if(Mu=Du=null,yR(t),e)for(t=0;t<e.length;t++)yR(e[t])}}function RE(t,e){return t(e)}function P7(t,e,n,r,o){return t(e,n,r,o)}function PE(){}var O7=RE,Kl=!1,Ow=!1;function OE(){(Du!==null||Mu!==null)&&(PE(),R7())}function ykt(t,e,n){if(Ow)return t(e,n);Ow=!0;try{return O7(t,e,n)}finally{Ow=!1,OE()}}function ih(t,e){var n=t.stateNode;if(n===null)return null;var r=db(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(we(231,e,typeof n));return n}var Kx=!1;if(zs)try{var xf={};Object.defineProperty(xf,"passive",{get:function(){Kx=!0}}),window.addEventListener("test",xf,xf),window.removeEventListener("test",xf,xf)}catch(t){Kx=!1}function bkt(t,e,n,r,o,i,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var fp=!1,oy=null,iy=!1,Gx=null,vkt={onError:function(t){fp=!0,oy=t}};function wkt(t,e,n,r,o,i,s,a,l){fp=!1,oy=null,bkt.apply(vkt,arguments)}function _kt(t,e,n,r,o,i,s,a,l){if(wkt.apply(this,arguments),fp){if(fp){var c=oy;fp=!1,oy=null}else throw Error(we(198));iy||(iy=!0,Gx=c)}}function jc(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&1026&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function I7(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function bR(t){if(jc(t)!==t)throw Error(we(188))}function xkt(t){var e=t.alternate;if(!e){if(e=jc(t),e===null)throw Error(we(188));return e!==t?null:t}for(var n=t,r=e;;){var o=n.return;if(o===null)break;var i=o.alternate;if(i===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return bR(o),t;if(i===r)return bR(o),e;i=i.sibling}throw Error(we(188))}if(n.return!==r.return)n=o,r=i;else{for(var s=!1,a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s){for(a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s)throw Error(we(189))}}if(n.alternate!==r)throw Error(we(190))}if(n.tag!==3)throw Error(we(188));return n.stateNode.current===n?t:e}function D7(t){if(t=xkt(t),!t)return null;for(var e=t;;){if(e.tag===5||e.tag===6)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function vR(t,e){for(var n=t.alternate;e!==null;){if(e===t||e===n)return!0;e=e.return}return!1}var M7,IE,L7,F7,Zx=!1,Vi=[],ja=null,za=null,qa=null,sh=new Map,ah=new Map,kf=[],wR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Yx(t,e,n,r,o){return{blockedOn:t,domEventName:e,eventSystemFlags:n|16,nativeEvent:o,targetContainers:[r]}}function _R(t,e){switch(t){case"focusin":case"focusout":ja=null;break;case"dragenter":case"dragleave":za=null;break;case"mouseover":case"mouseout":qa=null;break;case"pointerover":case"pointerout":sh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ah.delete(e.pointerId)}}function $f(t,e,n,r,o,i){return t===null||t.nativeEvent!==i?(t=Yx(e,n,r,o,i),e!==null&&(e=ym(e),e!==null&&IE(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function kkt(t,e,n,r,o){switch(e){case"focusin":return ja=$f(ja,t,e,n,r,o),!0;case"dragenter":return za=$f(za,t,e,n,r,o),!0;case"mouseover":return qa=$f(qa,t,e,n,r,o),!0;case"pointerover":var i=o.pointerId;return sh.set(i,$f(sh.get(i)||null,t,e,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,ah.set(i,$f(ah.get(i)||null,t,e,n,r,o)),!0}return!1}function $kt(t){var e=Gl(t.target);if(e!==null){var n=jc(e);if(n!==null){if(e=n.tag,e===13){if(e=I7(n),e!==null){t.blockedOn=e,F7(t.lanePriority,function(){Bn.unstable_runWithPriority(t.priority,function(){L7(n)})});return}}else if(e===3&&n.stateNode.hydrate){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Hg(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=FE(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n!==null)return e=ym(n),e!==null&&IE(e),t.blockedOn=n,!1;e.shift()}return!0}function xR(t,e,n){Hg(t)&&n.delete(e)}function Skt(){for(Zx=!1;0<Vi.length;){var t=Vi[0];if(t.blockedOn!==null){t=ym(t.blockedOn),t!==null&&M7(t);break}for(var e=t.targetContainers;0<e.length;){var n=FE(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n!==null){t.blockedOn=n;break}e.shift()}t.blockedOn===null&&Vi.shift()}ja!==null&&Hg(ja)&&(ja=null),za!==null&&Hg(za)&&(za=null),qa!==null&&Hg(qa)&&(qa=null),sh.forEach(xR),ah.forEach(xR)}function Sf(t,e){t.blockedOn===e&&(t.blockedOn=null,Zx||(Zx=!0,Bn.unstable_scheduleCallback(Bn.unstable_NormalPriority,Skt)))}function B7(t){function e(o){return Sf(o,t)}if(0<Vi.length){Sf(Vi[0],t);for(var n=1;n<Vi.length;n++){var r=Vi[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ja!==null&&Sf(ja,t),za!==null&&Sf(za,t),qa!==null&&Sf(qa,t),sh.forEach(e),ah.forEach(e),n=0;n<kf.length;n++)r=kf[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<kf.length&&(n=kf[0],n.blockedOn===null);)$kt(n),n.blockedOn===null&&kf.shift()}function pg(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var hu={animationend:pg("Animation","AnimationEnd"),animationiteration:pg("Animation","AnimationIteration"),animationstart:pg("Animation","AnimationStart"),transitionend:pg("Transition","TransitionEnd")},Iw={},j7={};zs&&(j7=document.createElement("div").style,"AnimationEvent"in window||(delete hu.animationend.animation,delete hu.animationiteration.animation,delete hu.animationstart.animation),"TransitionEvent"in window||delete hu.transitionend.transition);function sb(t){if(Iw[t])return Iw[t];if(!hu[t])return t;var e=hu[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in j7)return Iw[t]=e[n];return t}var z7=sb("animationend"),q7=sb("animationiteration"),W7=sb("animationstart"),U7=sb("transitionend"),V7=new Map,DE=new Map,Ekt=["abort","abort",z7,"animationEnd",q7,"animationIteration",W7,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",U7,"transitionEnd","waiting","waiting"];function ME(t,e){for(var n=0;n<t.length;n+=2){var r=t[n],o=t[n+1];o="on"+(o[0].toUpperCase()+o.slice(1)),DE.set(r,e),V7.set(r,o),Fc(o,[r])}}var Ckt=Bn.unstable_now;Ckt();var Ut=8;function lu(t){if(1&t)return Ut=15,1;if(2&t)return Ut=14,2;if(4&t)return Ut=13,4;var e=24&t;return e!==0?(Ut=12,e):t&32?(Ut=11,32):(e=192&t,e!==0?(Ut=10,e):t&256?(Ut=9,256):(e=3584&t,e!==0?(Ut=8,e):t&4096?(Ut=7,4096):(e=4186112&t,e!==0?(Ut=6,e):(e=62914560&t,e!==0?(Ut=5,e):t&67108864?(Ut=4,67108864):t&134217728?(Ut=3,134217728):(e=805306368&t,e!==0?(Ut=2,e):1073741824&t?(Ut=1,1073741824):(Ut=8,t))))))}function Tkt(t){switch(t){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function Akt(t){switch(t){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(we(358,t))}}function lh(t,e){var n=t.pendingLanes;if(n===0)return Ut=0;var r=0,o=0,i=t.expiredLanes,s=t.suspendedLanes,a=t.pingedLanes;if(i!==0)r=i,o=Ut=15;else if(i=n&134217727,i!==0){var l=i&~s;l!==0?(r=lu(l),o=Ut):(a&=i,a!==0&&(r=lu(a),o=Ut))}else i=n&~s,i!==0?(r=lu(i),o=Ut):a!==0&&(r=lu(a),o=Ut);if(r===0)return 0;if(r=31-il(r),r=n&((0>r?0:1<<r)<<1)-1,e!==0&&e!==r&&!(e&s)){if(lu(e),o<=Ut)return e;Ut=o}if(e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-il(e),o=1<<n,r|=t[n],e&=~o;return r}function H7(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function sy(t,e){switch(t){case 15:return 1;case 14:return 2;case 12:return t=cu(24&~e),t===0?sy(10,e):t;case 10:return t=cu(192&~e),t===0?sy(8,e):t;case 8:return t=cu(3584&~e),t===0&&(t=cu(4186112&~e),t===0&&(t=512)),t;case 2:return e=cu(805306368&~e),e===0&&(e=268435456),e}throw Error(we(358,t))}function cu(t){return t&-t}function Dw(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ab(t,e,n){t.pendingLanes|=e;var r=e-1;t.suspendedLanes&=r,t.pingedLanes&=r,t=t.eventTimes,e=31-il(e),t[e]=n}var il=Math.clz32?Math.clz32:Pkt,Nkt=Math.log,Rkt=Math.LN2;function Pkt(t){return t===0?32:31-(Nkt(t)/Rkt|0)|0}var Okt=Bn.unstable_UserBlockingPriority,Ikt=Bn.unstable_runWithPriority,Kg=!0;function Dkt(t,e,n,r){Kl||PE();var o=LE,i=Kl;Kl=!0;try{P7(o,t,e,n,r)}finally{(Kl=i)||OE()}}function Mkt(t,e,n,r){Ikt(Okt,LE.bind(null,t,e,n,r))}function LE(t,e,n,r){if(Kg){var o;if((o=(e&4)===0)&&0<Vi.length&&-1<wR.indexOf(t))t=Yx(null,t,e,n,r),Vi.push(t);else{var i=FE(t,e,n,r);if(i===null)o&&_R(t,r);else{if(o){if(-1<wR.indexOf(t)){t=Yx(i,t,e,n,r),Vi.push(t);return}if(kkt(i,t,e,n,r))return;_R(t,r)}iL(t,e,r,null,n)}}}}function FE(t,e,n,r){var o=NE(r);if(o=Gl(o),o!==null){var i=jc(o);if(i===null)o=null;else{var s=i.tag;if(s===13){if(o=I7(i),o!==null)return o;o=null}else if(s===3){if(i.stateNode.hydrate)return i.tag===3?i.stateNode.containerInfo:null;o=null}else i!==o&&(o=null)}}return iL(t,e,r,o,n),null}var Pa=null,BE=null,Gg=null;function K7(){if(Gg)return Gg;var t,e=BE,n=e.length,r,o="value"in Pa?Pa.value:Pa.textContent,i=o.length;for(t=0;t<n&&e[t]===o[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===o[i-r];r++);return Gg=o.slice(t,1<r?1-r:void 0)}function Zg(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function hg(){return!0}function kR(){return!1}function mo(t){function e(n,r,o,i,s){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?hg:kR,this.isPropagationStopped=kR,this}return nn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=hg)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=hg)},persist:function(){},isPersistent:hg}),e}var Kd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jE=mo(Kd),gm=nn({},Kd,{view:0,detail:0}),Lkt=mo(gm),Mw,Lw,Ef,lb=nn({},gm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zE,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ef&&(Ef&&t.type==="mousemove"?(Mw=t.screenX-Ef.screenX,Lw=t.screenY-Ef.screenY):Lw=Mw=0,Ef=t),Mw)},movementY:function(t){return"movementY"in t?t.movementY:Lw}}),$R=mo(lb),Fkt=nn({},lb,{dataTransfer:0}),Bkt=mo(Fkt),jkt=nn({},gm,{relatedTarget:0}),Fw=mo(jkt),zkt=nn({},Kd,{animationName:0,elapsedTime:0,pseudoElement:0}),qkt=mo(zkt),Wkt=nn({},Kd,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ukt=mo(Wkt),Vkt=nn({},Kd,{data:0}),SR=mo(Vkt),Hkt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kkt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gkt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zkt(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Gkt[t])?!!e[t]:!1}function zE(){return Zkt}var Ykt=nn({},gm,{key:function(t){if(t.key){var e=Hkt[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Zg(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Kkt[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zE,charCode:function(t){return t.type==="keypress"?Zg(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Zg(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Jkt=mo(Ykt),Xkt=nn({},lb,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ER=mo(Xkt),Qkt=nn({},gm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zE}),e$t=mo(Qkt),t$t=nn({},Kd,{propertyName:0,elapsedTime:0,pseudoElement:0}),n$t=mo(t$t),r$t=nn({},lb,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),o$t=mo(r$t),i$t=[9,13,27,32],qE=zs&&"CompositionEvent"in window,pp=null;zs&&"documentMode"in document&&(pp=document.documentMode);var s$t=zs&&"TextEvent"in window&&!pp,G7=zs&&(!qE||pp&&8<pp&&11>=pp),CR=String.fromCharCode(32),TR=!1;function Z7(t,e){switch(t){case"keyup":return i$t.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Y7(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var mu=!1;function a$t(t,e){switch(t){case"compositionend":return Y7(e);case"keypress":return e.which!==32?null:(TR=!0,CR);case"textInput":return t=e.data,t===CR&&TR?null:t;default:return null}}function l$t(t,e){if(mu)return t==="compositionend"||!qE&&Z7(t,e)?(t=K7(),Gg=BE=Pa=null,mu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return G7&&e.locale!=="ko"?null:e.data;default:return null}}var c$t={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function AR(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!c$t[t.type]:e==="textarea"}function J7(t,e,n,r){N7(r),e=ay(e,"onChange"),0<e.length&&(n=new jE("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var hp=null,ch=null;function u$t(t){nL(t,0)}function cb(t){var e=yu(t);if(k7(e))return t}function d$t(t,e){if(t==="change")return e}var X7=!1;if(zs){var Bw;if(zs){var jw="oninput"in document;if(!jw){var NR=document.createElement("div");NR.setAttribute("oninput","return;"),jw=typeof NR.oninput=="function"}Bw=jw}else Bw=!1;X7=Bw&&(!document.documentMode||9<document.documentMode)}function RR(){hp&&(hp.detachEvent("onpropertychange",Q7),ch=hp=null)}function Q7(t){if(t.propertyName==="value"&&cb(ch)){var e=[];if(J7(e,ch,t,NE(t)),t=u$t,Kl)t(e);else{Kl=!0;try{RE(t,e)}finally{Kl=!1,OE()}}}}function f$t(t,e,n){t==="focusin"?(RR(),hp=e,ch=n,hp.attachEvent("onpropertychange",Q7)):t==="focusout"&&RR()}function p$t(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return cb(ch)}function h$t(t,e){if(t==="click")return cb(e)}function m$t(t,e){if(t==="input"||t==="change")return cb(e)}function g$t(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var $o=typeof Object.is=="function"?Object.is:g$t,y$t=Object.prototype.hasOwnProperty;function uh(t,e){if($o(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!y$t.call(e,n[r])||!$o(t[n[r]],e[n[r]]))return!1;return!0}function PR(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function OR(t,e){var n=PR(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=PR(n)}}function eL(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?eL(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function IR(){for(var t=window,e=ry();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch(r){n=!1}if(n)t=e.contentWindow;else break;e=ry(t.document)}return e}function Jx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var b$t=zs&&"documentMode"in document&&11>=document.documentMode,gu=null,Xx=null,mp=null,Qx=!1;function DR(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Qx||gu==null||gu!==ry(r)||(r=gu,"selectionStart"in r&&Jx(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),mp&&uh(mp,r)||(mp=r,r=ay(Xx,"onSelect"),0<r.length&&(e=new jE("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=gu)))}ME("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);ME("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);ME(Ekt,2);for(var MR="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),zw=0;zw<MR.length;zw++)DE.set(MR[zw],0);fd("onMouseEnter",["mouseout","mouseover"]);fd("onMouseLeave",["mouseout","mouseover"]);fd("onPointerEnter",["pointerout","pointerover"]);fd("onPointerLeave",["pointerout","pointerover"]);Fc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Fc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Fc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Fc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Fc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Fc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tL=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wf));function LR(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,_kt(r,e,void 0,t),t.currentTarget=null}function nL(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],o=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&o.isPropagationStopped())break e;LR(o,a,c),i=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&o.isPropagationStopped())break e;LR(o,a,c),i=l}}}if(iy)throw t=Gx,iy=!1,Gx=null,t}function Kt(t,e){var n=aL(e),r=t+"__bubble";n.has(r)||(oL(e,t,2,!1),n.add(r))}var FR="_reactListening"+Math.random().toString(36).slice(2);function rL(t){t[FR]||(t[FR]=!0,w7.forEach(function(e){tL.has(e)||BR(e,!1,t,null),BR(e,!0,t,null)}))}function BR(t,e,n,r){var o=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,i=n;if(t==="selectionchange"&&n.nodeType!==9&&(i=n.ownerDocument),r!==null&&!e&&tL.has(t)){if(t!=="scroll")return;o|=2,i=r}var s=aL(i),a=t+"__"+(e?"capture":"bubble");s.has(a)||(e&&(o|=4),oL(i,t,o,e),s.add(a))}function oL(t,e,n,r){var o=DE.get(e);switch(o===void 0?2:o){case 0:o=Dkt;break;case 1:o=Mkt;break;default:o=LE}n=o.bind(null,e,n,t),o=void 0,!Kx||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),r?o!==void 0?t.addEventListener(e,n,{capture:!0,passive:o}):t.addEventListener(e,n,!0):o!==void 0?t.addEventListener(e,n,{passive:o}):t.addEventListener(e,n,!1)}function iL(t,e,n,r,o){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===o||a.nodeType===8&&a.parentNode===o)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===o||l.nodeType===8&&l.parentNode===o))return;s=s.return}for(;a!==null;){if(s=Gl(a),s===null)return;if(l=s.tag,l===5||l===6){r=i=s;continue e}a=a.parentNode}}r=r.return}ykt(function(){var c=i,u=NE(n),d=[];e:{var f=V7.get(t);if(f!==void 0){var p=jE,h=t;switch(t){case"keypress":if(Zg(n)===0)break e;case"keydown":case"keyup":p=Jkt;break;case"focusin":h="focus",p=Fw;break;case"focusout":h="blur",p=Fw;break;case"beforeblur":case"afterblur":p=Fw;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=$R;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Bkt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=e$t;break;case z7:case q7:case W7:p=qkt;break;case U7:p=n$t;break;case"scroll":p=Lkt;break;case"wheel":p=o$t;break;case"copy":case"cut":case"paste":p=Ukt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=ER}var y=(e&4)!==0,m=!y&&t==="scroll",w=y?f!==null?f+"Capture":null:f;y=[];for(var x=c,$;x!==null;){$=x;var S=$.stateNode;if($.tag===5&&S!==null&&($=S,w!==null&&(S=ih(x,w),S!=null&&y.push(dh(x,S,$)))),m)break;x=x.return}0<y.length&&(f=new p(f,h,null,n,u),d.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&!(e&16)&&(h=n.relatedTarget||n.fromElement)&&(Gl(h)||h[Gd]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(h=n.relatedTarget||n.toElement,p=c,h=h?Gl(h):null,h!==null&&(m=jc(h),h!==m||h.tag!==5&&h.tag!==6)&&(h=null)):(p=null,h=c),p!==h)){if(y=$R,S="onMouseLeave",w="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(y=ER,S="onPointerLeave",w="onPointerEnter",x="pointer"),m=p==null?f:yu(p),$=h==null?f:yu(h),f=new y(S,x+"leave",p,n,u),f.target=m,f.relatedTarget=$,S=null,Gl(u)===c&&(y=new y(w,x+"enter",h,n,u),y.target=$,y.relatedTarget=m,S=y),m=S,p&&h)t:{for(y=p,w=h,x=0,$=y;$;$=Qc($))x++;for($=0,S=w;S;S=Qc(S))$++;for(;0<x-$;)y=Qc(y),x--;for(;0<$-x;)w=Qc(w),$--;for(;x--;){if(y===w||w!==null&&y===w.alternate)break t;y=Qc(y),w=Qc(w)}y=null}else y=null;p!==null&&jR(d,f,p,y,!1),h!==null&&m!==null&&jR(d,m,h,y,!0)}}e:{if(f=c?yu(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var I=d$t;else if(AR(f))if(X7)I=m$t;else{I=p$t;var E=f$t}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(I=h$t);if(I&&(I=I(t,c))){J7(d,I,n,u);break e}E&&E(t,f,c),t==="focusout"&&(E=f._wrapperState)&&E.controlled&&f.type==="number"&&Bx(f,"number",f.value)}switch(E=c?yu(c):window,t){case"focusin":(AR(E)||E.contentEditable==="true")&&(gu=E,Xx=c,mp=null);break;case"focusout":mp=Xx=gu=null;break;case"mousedown":Qx=!0;break;case"contextmenu":case"mouseup":case"dragend":Qx=!1,DR(d,n,u);break;case"selectionchange":if(b$t)break;case"keydown":case"keyup":DR(d,n,u)}var L;if(qE)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else mu?Z7(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(G7&&n.locale!=="ko"&&(mu||T!=="onCompositionStart"?T==="onCompositionEnd"&&mu&&(L=K7()):(Pa=u,BE="value"in Pa?Pa.value:Pa.textContent,mu=!0)),E=ay(c,T),0<E.length&&(T=new SR(T,t,null,n,u),d.push({event:T,listeners:E}),L?T.data=L:(L=Y7(n),L!==null&&(T.data=L)))),(L=s$t?a$t(t,n):l$t(t,n))&&(c=ay(c,"onBeforeInput"),0<c.length&&(u=new SR("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=L))}nL(d,e)})}function dh(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ay(t,e){for(var n=e+"Capture",r=[];t!==null;){var o=t,i=o.stateNode;o.tag===5&&i!==null&&(o=i,i=ih(t,n),i!=null&&r.unshift(dh(t,i,o)),i=ih(t,e),i!=null&&r.push(dh(t,i,o))),t=t.return}return r}function Qc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function jR(t,e,n,r,o){for(var i=e._reactName,s=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,o?(l=ih(n,i),l!=null&&s.unshift(dh(n,l,a))):o||(l=ih(n,i),l!=null&&s.push(dh(n,l,a)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}function ly(){}var qw=null,Ww=null;function sL(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function ek(t,e){return t==="textarea"||t==="option"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var zR=typeof setTimeout=="function"?setTimeout:void 0,v$t=typeof clearTimeout=="function"?clearTimeout:void 0;function WE(t){t.nodeType===1?t.textContent="":t.nodeType===9&&(t=t.body,t!=null&&(t.textContent=""))}function Lu(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break}return t}function qR(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Uw=0;function w$t(t){return{$$typeof:TE,toString:t,valueOf:t}}var ub=Math.random().toString(36).slice(2),Oa="__reactFiber$"+ub,cy="__reactProps$"+ub,Gd="__reactContainer$"+ub,WR="__reactEvents$"+ub;function Gl(t){var e=t[Oa];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Gd]||n[Oa]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=qR(t);t!==null;){if(n=t[Oa])return n;t=qR(t)}return e}t=n,n=t.parentNode}return null}function ym(t){return t=t[Oa]||t[Gd],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function yu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(we(33))}function db(t){return t[cy]||null}function aL(t){var e=t[WR];return e===void 0&&(e=t[WR]=new Set),e}var tk=[],bu=-1;function yl(t){return{current:t}}function Zt(t){0>bu||(t.current=tk[bu],tk[bu]=null,bu--)}function mn(t,e){bu++,tk[bu]=t.current,t.current=e}var sl={},wr=yl(sl),Yr=yl(!1),$c=sl;function pd(t,e){var n=t.type.contextTypes;if(!n)return sl;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var o={},i;for(i in n)o[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function Jr(t){return t=t.childContextTypes,t!=null}function uy(){Zt(Yr),Zt(wr)}function UR(t,e,n){if(wr.current!==sl)throw Error(we(168));mn(wr,e),mn(Yr,n)}function lL(t,e,n){var r=t.stateNode;if(t=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(we(108,Ou(e)||"Unknown",o));return nn({},n,r)}function Yg(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||sl,$c=wr.current,mn(wr,t),mn(Yr,Yr.current),!0}function VR(t,e,n){var r=t.stateNode;if(!r)throw Error(we(169));n?(t=lL(t,e,$c),r.__reactInternalMemoizedMergedChildContext=t,Zt(Yr),Zt(wr),mn(wr,t)):Zt(Yr),mn(Yr,n)}var UE=null,ac=null,_$t=Bn.unstable_runWithPriority,VE=Bn.unstable_scheduleCallback,nk=Bn.unstable_cancelCallback,x$t=Bn.unstable_shouldYield,HR=Bn.unstable_requestPaint,rk=Bn.unstable_now,k$t=Bn.unstable_getCurrentPriorityLevel,fb=Bn.unstable_ImmediatePriority,cL=Bn.unstable_UserBlockingPriority,uL=Bn.unstable_NormalPriority,dL=Bn.unstable_LowPriority,fL=Bn.unstable_IdlePriority,Vw={},$$t=HR!==void 0?HR:function(){},_s=null,Jg=null,Hw=!1,KR=rk(),hr=1e4>KR?rk:function(){return rk()-KR};function hd(){switch(k$t()){case fb:return 99;case cL:return 98;case uL:return 97;case dL:return 96;case fL:return 95;default:throw Error(we(332))}}function pL(t){switch(t){case 99:return fb;case 98:return cL;case 97:return uL;case 96:return dL;case 95:return fL;default:throw Error(we(332))}}function Sc(t,e){return t=pL(t),_$t(t,e)}function fh(t,e,n){return t=pL(t),VE(t,e,n)}function ps(){if(Jg!==null){var t=Jg;Jg=null,nk(t)}hL()}function hL(){if(!Hw&&_s!==null){Hw=!0;var t=0;try{var e=_s;Sc(99,function(){for(;t<e.length;t++){var n=e[t];do n=n(!0);while(n!==null)}}),_s=null}catch(n){throw _s!==null&&(_s=_s.slice(t+1)),VE(fb,ps),n}finally{Hw=!1}}}var S$t=Bc.ReactCurrentBatchConfig;function Qo(t,e){if(t&&t.defaultProps){e=nn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var dy=yl(null),fy=null,vu=null,py=null;function HE(){py=vu=fy=null}function KE(t){var e=dy.current;Zt(dy),t.type._context._currentValue=e}function mL(t,e){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)===e){if(n===null||(n.childLanes&e)===e)break;n.childLanes|=e}else t.childLanes|=e,n!==null&&(n.childLanes|=e);t=t.return}}function Fu(t,e){fy=t,py=vu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ii=!0),t.firstContext=null)}function Uo(t,e){if(py!==t&&e!==!1&&e!==0)if((typeof e!="number"||e===1073741823)&&(py=t,e=1073741823),e={context:t,observedBits:e,next:null},vu===null){if(fy===null)throw Error(we(308));vu=e,fy.dependencies={lanes:0,firstContext:e,responders:null}}else vu=vu.next=e;return t._currentValue}var ba=!1;function GE(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function gL(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Wa(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ua(t,e){if(t=t.updateQueue,t!==null){t=t.shared;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}}function GR(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?o=i=s:i=i.next=s,n=n.next}while(n!==null);i===null?o=i=e:i=i.next=e}else o=i=e;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ph(t,e,n,r){var o=t.updateQueue;ba=!1;var i=o.firstBaseUpdate,s=o.lastBaseUpdate,a=o.shared.pending;if(a!==null){o.shared.pending=null;var l=a,c=l.next;l.next=null,s===null?i=c:s.next=c,s=l;var u=t.alternate;if(u!==null){u=u.updateQueue;var d=u.lastBaseUpdate;d!==s&&(d===null?u.firstBaseUpdate=c:d.next=c,u.lastBaseUpdate=l)}}if(i!==null){d=o.baseState,s=0,u=c=l=null;do{a=i.lane;var f=i.eventTime;if((r&a)===a){u!==null&&(u=u.next={eventTime:f,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var p=t,h=i;switch(a=e,f=n,h.tag){case 1:if(p=h.payload,typeof p=="function"){d=p.call(f,d,a);break e}d=p;break e;case 3:p.flags=p.flags&-4097|64;case 0:if(p=h.payload,a=typeof p=="function"?p.call(f,d,a):p,a==null)break e;d=nn({},d,a);break e;case 2:ba=!0}}i.callback!==null&&(t.flags|=32,a=o.effects,a===null?o.effects=[i]:a.push(i))}else f={eventTime:f,lane:a,tag:i.tag,payload:i.payload,callback:i.callback,next:null},u===null?(c=u=f,l=d):u=u.next=f,s|=a;if(i=i.next,i===null){if(a=o.shared.pending,a===null)break;i=a.next,a.next=null,o.lastBaseUpdate=a,o.shared.pending=null}}while(1);u===null&&(l=d),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=u,vm|=s,t.lanes=s,t.memoizedState=d}}function ZR(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(we(191,o));o.call(r)}}}var yL=new rb.Component().refs;function hy(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:nn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var pb={isMounted:function(t){return(t=t._reactInternals)?jc(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ao(),o=Va(t),i=Wa(r,o);i.payload=e,n!=null&&(i.callback=n),Ua(t,i),Ha(t,o,r)},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ao(),o=Va(t),i=Wa(r,o);i.tag=1,i.payload=e,n!=null&&(i.callback=n),Ua(t,i),Ha(t,o,r)},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ao(),r=Va(t),o=Wa(n,r);o.tag=2,e!=null&&(o.callback=e),Ua(t,o),Ha(t,r,n)}};function YR(t,e,n,r,o,i,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,s):e.prototype&&e.prototype.isPureReactComponent?!uh(n,r)||!uh(o,i):!0}function bL(t,e,n){var r=!1,o=sl,i=e.contextType;return typeof i=="object"&&i!==null?i=Uo(i):(o=Jr(e)?$c:wr.current,r=e.contextTypes,i=(r=r!=null)?pd(t,o):sl),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=pb,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=i),e}function JR(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&pb.enqueueReplaceState(e,e.state,null)}function ok(t,e,n,r){var o=t.stateNode;o.props=n,o.state=t.memoizedState,o.refs=yL,GE(t);var i=e.contextType;typeof i=="object"&&i!==null?o.context=Uo(i):(i=Jr(e)?$c:wr.current,o.context=pd(t,i)),ph(t,n,o,r),o.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(hy(t,e,i,n),o.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&pb.enqueueReplaceState(o,o.state,null),ph(t,n,o,r),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4)}var mg=Array.isArray;function Cf(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(we(309));var r=n.stateNode}if(!r)throw Error(we(147,t));var o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(i){var s=r.refs;s===yL&&(s=r.refs={}),i===null?delete s[o]:s[o]=i},e._stringRef=o,e)}if(typeof t!="string")throw Error(we(284));if(!n._owner)throw Error(we(290,t))}return t}function gg(t,e){if(t.type!=="textarea")throw Error(we(31,Object.prototype.toString.call(e)==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function vL(t){function e(m,w){if(t){var x=m.lastEffect;x!==null?(x.nextEffect=w,m.lastEffect=w):m.firstEffect=m.lastEffect=w,w.nextEffect=null,w.flags=8}}function n(m,w){if(!t)return null;for(;w!==null;)e(m,w),w=w.sibling;return null}function r(m,w){for(m=new Map;w!==null;)w.key!==null?m.set(w.key,w):m.set(w.index,w),w=w.sibling;return m}function o(m,w){return m=ll(m,w),m.index=0,m.sibling=null,m}function i(m,w,x){return m.index=x,t?(x=m.alternate,x!==null?(x=x.index,x<w?(m.flags=2,w):x):(m.flags=2,w)):w}function s(m){return t&&m.alternate===null&&(m.flags=2),m}function a(m,w,x,$){return w===null||w.tag!==6?(w=Jw(x,m.mode,$),w.return=m,w):(w=o(w,x),w.return=m,w)}function l(m,w,x,$){return w!==null&&w.elementType===x.type?($=o(w,x.props),$.ref=Cf(m,w,x),$.return=m,$):($=t1(x.type,x.key,x.props,null,m.mode,$),$.ref=Cf(m,w,x),$.return=m,$)}function c(m,w,x,$){return w===null||w.tag!==4||w.stateNode.containerInfo!==x.containerInfo||w.stateNode.implementation!==x.implementation?(w=Xw(x,m.mode,$),w.return=m,w):(w=o(w,x.children||[]),w.return=m,w)}function u(m,w,x,$,S){return w===null||w.tag!==7?(w=qu(x,m.mode,$,S),w.return=m,w):(w=o(w,x),w.return=m,w)}function d(m,w,x){if(typeof w=="string"||typeof w=="number")return w=Jw(""+w,m.mode,x),w.return=m,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case zf:return x=t1(w.type,w.key,w.props,null,m.mode,x),x.ref=Cf(m,null,w),x.return=m,x;case Hl:return w=Xw(w,m.mode,x),w.return=m,w}if(mg(w)||_f(w))return w=qu(w,m.mode,x,null),w.return=m,w;gg(m,w)}return null}function f(m,w,x,$){var S=w!==null?w.key:null;if(typeof x=="string"||typeof x=="number")return S!==null?null:a(m,w,""+x,$);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case zf:return x.key===S?x.type===ka?u(m,w,x.props.children,$,S):l(m,w,x,$):null;case Hl:return x.key===S?c(m,w,x,$):null}if(mg(x)||_f(x))return S!==null?null:u(m,w,x,$,null);gg(m,x)}return null}function p(m,w,x,$,S){if(typeof $=="string"||typeof $=="number")return m=m.get(x)||null,a(w,m,""+$,S);if(typeof $=="object"&&$!==null){switch($.$$typeof){case zf:return m=m.get($.key===null?x:$.key)||null,$.type===ka?u(w,m,$.props.children,S,$.key):l(w,m,$,S);case Hl:return m=m.get($.key===null?x:$.key)||null,c(w,m,$,S)}if(mg($)||_f($))return m=m.get(x)||null,u(w,m,$,S,null);gg(w,$)}return null}function h(m,w,x,$){for(var S=null,I=null,E=w,L=w=0,T=null;E!==null&&L<x.length;L++){E.index>L?(T=E,E=null):T=E.sibling;var F=f(m,E,x[L],$);if(F===null){E===null&&(E=T);break}t&&E&&F.alternate===null&&e(m,E),w=i(F,w,L),I===null?S=F:I.sibling=F,I=F,E=T}if(L===x.length)return n(m,E),S;if(E===null){for(;L<x.length;L++)E=d(m,x[L],$),E!==null&&(w=i(E,w,L),I===null?S=E:I.sibling=E,I=E);return S}for(E=r(m,E);L<x.length;L++)T=p(E,m,L,x[L],$),T!==null&&(t&&T.alternate!==null&&E.delete(T.key===null?L:T.key),w=i(T,w,L),I===null?S=T:I.sibling=T,I=T);return t&&E.forEach(function(j){return e(m,j)}),S}function y(m,w,x,$){var S=_f(x);if(typeof S!="function")throw Error(we(150));if(x=S.call(x),x==null)throw Error(we(151));for(var I=S=null,E=w,L=w=0,T=null,F=x.next();E!==null&&!F.done;L++,F=x.next()){E.index>L?(T=E,E=null):T=E.sibling;var j=f(m,E,F.value,$);if(j===null){E===null&&(E=T);break}t&&E&&j.alternate===null&&e(m,E),w=i(j,w,L),I===null?S=j:I.sibling=j,I=j,E=T}if(F.done)return n(m,E),S;if(E===null){for(;!F.done;L++,F=x.next())F=d(m,F.value,$),F!==null&&(w=i(F,w,L),I===null?S=F:I.sibling=F,I=F);return S}for(E=r(m,E);!F.done;L++,F=x.next())F=p(E,m,L,F.value,$),F!==null&&(t&&F.alternate!==null&&E.delete(F.key===null?L:F.key),w=i(F,w,L),I===null?S=F:I.sibling=F,I=F);return t&&E.forEach(function(U){return e(m,U)}),S}return function(m,w,x,$){var S=typeof x=="object"&&x!==null&&x.type===ka&&x.key===null;S&&(x=x.props.children);var I=typeof x=="object"&&x!==null;if(I)switch(x.$$typeof){case zf:e:{for(I=x.key,S=w;S!==null;){if(S.key===I){switch(S.tag){case 7:if(x.type===ka){n(m,S.sibling),w=o(S,x.props.children),w.return=m,m=w;break e}break;default:if(S.elementType===x.type){n(m,S.sibling),w=o(S,x.props),w.ref=Cf(m,S,x),w.return=m,m=w;break e}}n(m,S);break}else e(m,S);S=S.sibling}x.type===ka?(w=qu(x.props.children,m.mode,$,x.key),w.return=m,m=w):($=t1(x.type,x.key,x.props,null,m.mode,$),$.ref=Cf(m,w,x),$.return=m,m=$)}return s(m);case Hl:e:{for(S=x.key;w!==null;){if(w.key===S)if(w.tag===4&&w.stateNode.containerInfo===x.containerInfo&&w.stateNode.implementation===x.implementation){n(m,w.sibling),w=o(w,x.children||[]),w.return=m,m=w;break e}else{n(m,w);break}else e(m,w);w=w.sibling}w=Xw(x,m.mode,$),w.return=m,m=w}return s(m)}if(typeof x=="string"||typeof x=="number")return x=""+x,w!==null&&w.tag===6?(n(m,w.sibling),w=o(w,x),w.return=m,m=w):(n(m,w),w=Jw(x,m.mode,$),w.return=m,m=w),s(m);if(mg(x))return h(m,w,x,$);if(_f(x))return y(m,w,x,$);if(I&&gg(m,x),typeof x=="undefined"&&!S)switch(m.tag){case 1:case 22:case 0:case 11:case 15:throw Error(we(152,Ou(m.type)||"Component"))}return n(m,w)}}var my=vL(!0),wL=vL(!1),bm={},Ji=yl(bm),hh=yl(bm),mh=yl(bm);function Zl(t){if(t===bm)throw Error(we(174));return t}function ik(t,e){switch(mn(mh,e),mn(hh,t),mn(Ji,bm),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Wx(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Wx(e,t)}Zt(Ji),mn(Ji,e)}function md(){Zt(Ji),Zt(hh),Zt(mh)}function XR(t){Zl(mh.current);var e=Zl(Ji.current),n=Wx(e,t.type);e!==n&&(mn(hh,t),mn(Ji,n))}function ZE(t){hh.current===t&&(Zt(Ji),Zt(hh))}var hn=yl(0);function gy(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&64)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Cs=null,Ia=null,Xi=!1;function _L(t,e){var n=So(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.flags=8,t.lastEffect!==null?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function QR(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,!0):!1;case 13:return!1;default:return!1}}function sk(t){if(Xi){var e=Ia;if(e){var n=e;if(!QR(t,e)){if(e=Lu(n.nextSibling),!e||!QR(t,e)){t.flags=t.flags&-1025|2,Xi=!1,Cs=t;return}_L(Cs,n)}Cs=t,Ia=Lu(e.firstChild)}else t.flags=t.flags&-1025|2,Xi=!1,Cs=t}}function eP(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Cs=t}function yg(t){if(t!==Cs)return!1;if(!Xi)return eP(t),Xi=!0,!1;var e=t.type;if(t.tag!==5||e!=="head"&&e!=="body"&&!ek(e,t.memoizedProps))for(e=Ia;e;)_L(t,e),e=Lu(e.nextSibling);if(eP(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(we(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ia=Lu(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ia=null}}else Ia=Cs?Lu(t.stateNode.nextSibling):null;return!0}function Kw(){Ia=Cs=null,Xi=!1}var Bu=[];function YE(){for(var t=0;t<Bu.length;t++)Bu[t]._workInProgressVersionPrimary=null;Bu.length=0}var gp=Bc.ReactCurrentDispatcher,Mo=Bc.ReactCurrentBatchConfig,gh=0,vn=null,ur=null,Gn=null,yy=!1,yp=!1;function zr(){throw Error(we(321))}function JE(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!$o(t[n],e[n]))return!1;return!0}function XE(t,e,n,r,o,i){if(gh=i,vn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,gp.current=t===null||t.memoizedState===null?C$t:T$t,t=n(r,o),yp){i=0;do{if(yp=!1,!(25>i))throw Error(we(301));i+=1,Gn=ur=null,e.updateQueue=null,gp.current=A$t,t=n(r,o)}while(yp)}if(gp.current=_y,e=ur!==null&&ur.next!==null,gh=0,Gn=ur=vn=null,yy=!1,e)throw Error(we(300));return t}function Yl(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gn===null?vn.memoizedState=Gn=t:Gn=Gn.next=t,Gn}function zc(){if(ur===null){var t=vn.alternate;t=t!==null?t.memoizedState:null}else t=ur.next;var e=Gn===null?vn.memoizedState:Gn.next;if(e!==null)Gn=e,ur=t;else{if(t===null)throw Error(we(310));ur=t,t={memoizedState:ur.memoizedState,baseState:ur.baseState,baseQueue:ur.baseQueue,queue:ur.queue,next:null},Gn===null?vn.memoizedState=Gn=t:Gn=Gn.next=t}return Gn}function Hi(t,e){return typeof e=="function"?e(t):e}function Tf(t){var e=zc(),n=e.queue;if(n===null)throw Error(we(311));n.lastRenderedReducer=t;var r=ur,o=r.baseQueue,i=n.pending;if(i!==null){if(o!==null){var s=o.next;o.next=i.next,i.next=s}r.baseQueue=o=i,n.pending=null}if(o!==null){o=o.next,r=r.baseState;var a=s=i=null,l=o;do{var c=l.lane;if((gh&c)===c)a!==null&&(a=a.next={lane:0,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),r=l.eagerReducer===t?l.eagerState:t(r,l.action);else{var u={lane:c,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};a===null?(s=a=u,i=r):a=a.next=u,vn.lanes|=c,vm|=c}l=l.next}while(l!==null&&l!==o);a===null?i=r:a.next=s,$o(r,e.memoizedState)||(ii=!0),e.memoizedState=r,e.baseState=i,e.baseQueue=a,n.lastRenderedState=r}return[e.memoizedState,n.dispatch]}function Af(t){var e=zc(),n=e.queue;if(n===null)throw Error(we(311));n.lastRenderedReducer=t;var r=n.dispatch,o=n.pending,i=e.memoizedState;if(o!==null){n.pending=null;var s=o=o.next;do i=t(i,s.action),s=s.next;while(s!==o);$o(i,e.memoizedState)||(ii=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function tP(t,e,n){var r=e._getVersion;r=r(e._source);var o=e._workInProgressVersionPrimary;if(o!==null?t=o===r:(t=t.mutableReadLanes,(t=(gh&t)===t)&&(e._workInProgressVersionPrimary=r,Bu.push(e))),t)return n(e._source);throw Bu.push(e),Error(we(350))}function xL(t,e,n,r){var o=Tr;if(o===null)throw Error(we(349));var i=e._getVersion,s=i(e._source),a=gp.current,l=a.useState(function(){return tP(o,e,n)}),c=l[1],u=l[0];l=Gn;var d=t.memoizedState,f=d.refs,p=f.getSnapshot,h=d.source;d=d.subscribe;var y=vn;return t.memoizedState={refs:f,source:e,subscribe:r},a.useEffect(function(){f.getSnapshot=n,f.setSnapshot=c;var m=i(e._source);if(!$o(s,m)){m=n(e._source),$o(u,m)||(c(m),m=Va(y),o.mutableReadLanes|=m&o.pendingLanes),m=o.mutableReadLanes,o.entangledLanes|=m;for(var w=o.entanglements,x=m;0<x;){var $=31-il(x),S=1<<$;w[$]|=m,x&=~S}}},[n,e,r]),a.useEffect(function(){return r(e._source,function(){var m=f.getSnapshot,w=f.setSnapshot;try{w(m(e._source));var x=Va(y);o.mutableReadLanes|=x&o.pendingLanes}catch($){w(function(){throw $})}})},[e,r]),$o(p,n)&&$o(h,e)&&$o(d,r)||(t={pending:null,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:u},t.dispatch=c=tC.bind(null,vn,t),l.queue=t,l.baseQueue=null,u=tP(o,e,n),l.memoizedState=l.baseState=u),u}function kL(t,e,n){var r=zc();return xL(r,t,e,n)}function Nf(t){var e=Yl();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t=e.queue={pending:null,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:t},t=t.dispatch=tC.bind(null,vn,t),[e.memoizedState,t]}function by(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=vn.updateQueue,e===null?(e={lastEffect:null},vn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function nP(t){var e=Yl();return t={current:t},e.memoizedState=t}function vy(){return zc().memoizedState}function ak(t,e,n,r){var o=Yl();vn.flags|=t,o.memoizedState=by(1|e,n,void 0,r===void 0?null:r)}function QE(t,e,n,r){var o=zc();r=r===void 0?null:r;var i=void 0;if(ur!==null){var s=ur.memoizedState;if(i=s.destroy,r!==null&&JE(r,s.deps)){by(e,n,i,r);return}}vn.flags|=t,o.memoizedState=by(1|e,n,i,r)}function rP(t,e){return ak(516,4,t,e)}function wy(t,e){return QE(516,4,t,e)}function $L(t,e){return QE(4,2,t,e)}function SL(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function EL(t,e,n){return n=n!=null?n.concat([t]):null,QE(4,2,SL.bind(null,e,t),n)}function eC(){}function CL(t,e){var n=zc();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&JE(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function TL(t,e){var n=zc();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&JE(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function E$t(t,e){var n=hd();Sc(98>n?98:n,function(){t(!0)}),Sc(97<n?97:n,function(){var r=Mo.transition;Mo.transition=1;try{t(!1),e()}finally{Mo.transition=r}})}function tC(t,e,n){var r=ao(),o=Va(t),i={lane:o,action:n,eagerReducer:null,eagerState:null,next:null},s=e.pending;if(s===null?i.next=i:(i.next=s.next,s.next=i),e.pending=i,s=t.alternate,t===vn||s!==null&&s===vn)yp=yy=!0;else{if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,l=s(a,n);if(i.eagerReducer=s,i.eagerState=l,$o(l,a))return}catch(c){}finally{}Ha(t,o,r)}}var _y={readContext:Uo,useCallback:zr,useContext:zr,useEffect:zr,useImperativeHandle:zr,useLayoutEffect:zr,useMemo:zr,useReducer:zr,useRef:zr,useState:zr,useDebugValue:zr,useDeferredValue:zr,useTransition:zr,useMutableSource:zr,useOpaqueIdentifier:zr,unstable_isNewReconciler:!1},C$t={readContext:Uo,useCallback:function(t,e){return Yl().memoizedState=[t,e===void 0?null:e],t},useContext:Uo,useEffect:rP,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ak(4,2,SL.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ak(4,2,t,e)},useMemo:function(t,e){var n=Yl();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Yl();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t=r.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},t=t.dispatch=tC.bind(null,vn,t),[r.memoizedState,t]},useRef:nP,useState:Nf,useDebugValue:eC,useDeferredValue:function(t){var e=Nf(t),n=e[0],r=e[1];return rP(function(){var o=Mo.transition;Mo.transition=1;try{r(t)}finally{Mo.transition=o}},[t]),n},useTransition:function(){var t=Nf(!1),e=t[0];return t=E$t.bind(null,t[1]),nP(t),[t,e]},useMutableSource:function(t,e,n){var r=Yl();return r.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:t,subscribe:n},xL(r,t,e,n)},useOpaqueIdentifier:function(){if(Xi){var t=!1,e=w$t(function(){throw t||(t=!0,n("r:"+(Uw++).toString(36))),Error(we(355))}),n=Nf(e)[1];return!(vn.mode&2)&&(vn.flags|=516,by(5,function(){n("r:"+(Uw++).toString(36))},void 0,null)),e}return e="r:"+(Uw++).toString(36),Nf(e),e},unstable_isNewReconciler:!1},T$t={readContext:Uo,useCallback:CL,useContext:Uo,useEffect:wy,useImperativeHandle:EL,useLayoutEffect:$L,useMemo:TL,useReducer:Tf,useRef:vy,useState:function(){return Tf(Hi)},useDebugValue:eC,useDeferredValue:function(t){var e=Tf(Hi),n=e[0],r=e[1];return wy(function(){var o=Mo.transition;Mo.transition=1;try{r(t)}finally{Mo.transition=o}},[t]),n},useTransition:function(){var t=Tf(Hi)[0];return[vy().current,t]},useMutableSource:kL,useOpaqueIdentifier:function(){return Tf(Hi)[0]},unstable_isNewReconciler:!1},A$t={readContext:Uo,useCallback:CL,useContext:Uo,useEffect:wy,useImperativeHandle:EL,useLayoutEffect:$L,useMemo:TL,useReducer:Af,useRef:vy,useState:function(){return Af(Hi)},useDebugValue:eC,useDeferredValue:function(t){var e=Af(Hi),n=e[0],r=e[1];return wy(function(){var o=Mo.transition;Mo.transition=1;try{r(t)}finally{Mo.transition=o}},[t]),n},useTransition:function(){var t=Af(Hi)[0];return[vy().current,t]},useMutableSource:kL,useOpaqueIdentifier:function(){return Af(Hi)[0]},unstable_isNewReconciler:!1},N$t=Bc.ReactCurrentOwner,ii=!1;function qr(t,e,n,r){e.child=t===null?wL(e,null,n,r):my(e,t.child,n,r)}function oP(t,e,n,r,o){n=n.render;var i=e.ref;return Fu(e,o),r=XE(t,e,n,r,i,o),t!==null&&!ii?(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~o,Ts(t,e,o)):(e.flags|=1,qr(t,e,r,o),e.child)}function iP(t,e,n,r,o,i){if(t===null){var s=n.type;return typeof s=="function"&&!aC(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,AL(t,e,s,r,o,i)):(t=t1(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}return s=t.child,!(o&i)&&(o=s.memoizedProps,n=n.compare,n=n!==null?n:uh,n(o,r)&&t.ref===e.ref)?Ts(t,e,i):(e.flags|=1,t=ll(s,r),t.ref=e.ref,t.return=e,e.child=t)}function AL(t,e,n,r,o,i){if(t!==null&&uh(t.memoizedProps,r)&&t.ref===e.ref)if(ii=!1,(i&o)!==0)t.flags&16384&&(ii=!0);else return e.lanes=t.lanes,Ts(t,e,i);return lk(t,e,n,r,i)}function Gw(t,e,n){var r=e.pendingProps,o=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden"||r.mode==="unstable-defer-without-hiding")if(!(e.mode&4))e.memoizedState={baseLanes:0},vg(e,n);else if(n&1073741824)e.memoizedState={baseLanes:0},vg(e,i!==null?i.baseLanes:n);else return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t},vg(e,t),null;else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,vg(e,r);return qr(t,e,o,n),e.child}function NL(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=128)}function lk(t,e,n,r,o){var i=Jr(n)?$c:wr.current;return i=pd(e,i),Fu(e,o),n=XE(t,e,n,r,i,o),t!==null&&!ii?(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~o,Ts(t,e,o)):(e.flags|=1,qr(t,e,n,o),e.child)}function sP(t,e,n,r,o){if(Jr(n)){var i=!0;Yg(e)}else i=!1;if(Fu(e,o),e.stateNode===null)t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),bL(e,n,r),ok(e,n,r,o),r=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,c=n.contextType;typeof c=="object"&&c!==null?c=Uo(c):(c=Jr(n)?$c:wr.current,c=pd(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==c)&&JR(e,s,r,c),ba=!1;var f=e.memoizedState;s.state=f,ph(e,r,s,o),l=e.memoizedState,a!==r||f!==l||Yr.current||ba?(typeof u=="function"&&(hy(e,n,u,r),l=e.memoizedState),(a=ba||YR(e,n,a,r,f,l,c))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4)):(typeof s.componentDidMount=="function"&&(e.flags|=4),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4),r=!1)}else{s=e.stateNode,gL(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Qo(e.type,a),s.props=c,d=e.pendingProps,f=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=Uo(l):(l=Jr(n)?$c:wr.current,l=pd(e,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==d||f!==l)&&JR(e,s,r,l),ba=!1,f=e.memoizedState,s.state=f,ph(e,r,s,o);var h=e.memoizedState;a!==d||f!==h||Yr.current||ba?(typeof p=="function"&&(hy(e,n,p,r),h=e.memoizedState),(c=ba||YR(e,n,c,r,f,h,l))?(u||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,h,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,h,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=256)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=256),e.memoizedProps=r,e.memoizedState=h),s.props=r,s.state=h,s.context=l,r=c):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=256),r=!1)}return ck(t,e,n,r,i,o)}function ck(t,e,n,r,o,i){NL(t,e);var s=(e.flags&64)!==0;if(!r&&!s)return o&&VR(e,n,!1),Ts(t,e,i);r=e.stateNode,N$t.current=e;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=my(e,t.child,null,i),e.child=my(e,null,a,i)):qr(t,e,a,i),e.memoizedState=r.state,o&&VR(e,n,!0),e.child}function aP(t){var e=t.stateNode;e.pendingContext?UR(t,e.pendingContext,e.pendingContext!==e.context):e.context&&UR(t,e.context,!1),ik(t,e.containerInfo)}var bg={dehydrated:null,retryLane:0};function lP(t,e,n){var r=e.pendingProps,o=hn.current,i=!1,s;return(s=(e.flags&64)!==0)||(s=t!==null&&t.memoizedState===null?!1:(o&2)!==0),s?(i=!0,e.flags&=-65):t!==null&&t.memoizedState===null||r.fallback===void 0||r.unstable_avoidThisFallback===!0||(o|=1),mn(hn,o&1),t===null?(r.fallback!==void 0&&sk(e),t=r.children,o=r.fallback,i?(t=cP(e,t,o,n),e.child.memoizedState={baseLanes:n},e.memoizedState=bg,t):typeof r.unstable_expectedLoadTime=="number"?(t=cP(e,t,o,n),e.child.memoizedState={baseLanes:n},e.memoizedState=bg,e.lanes=33554432,t):(n=lC({mode:"visible",children:t},e.mode,n,null),n.return=e,e.child=n)):t.memoizedState!==null?i?(r=dP(t,e,r.children,r.fallback,n),i=e.child,o=t.child.memoizedState,i.memoizedState=o===null?{baseLanes:n}:{baseLanes:o.baseLanes|n},i.childLanes=t.childLanes&~n,e.memoizedState=bg,r):(n=uP(t,e,r.children,n),e.memoizedState=null,n):i?(r=dP(t,e,r.children,r.fallback,n),i=e.child,o=t.child.memoizedState,i.memoizedState=o===null?{baseLanes:n}:{baseLanes:o.baseLanes|n},i.childLanes=t.childLanes&~n,e.memoizedState=bg,r):(n=uP(t,e,r.children,n),e.memoizedState=null,n)}function cP(t,e,n,r){var o=t.mode,i=t.child;return e={mode:"hidden",children:e},!(o&2)&&i!==null?(i.childLanes=0,i.pendingProps=e):i=lC(e,o,0,null),n=qu(n,o,r,null),i.return=t,n.return=t,i.sibling=n,t.child=i,n}function uP(t,e,n,r){var o=t.child;return t=o.sibling,n=ll(o,{mode:"visible",children:n}),!(e.mode&2)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(t.nextEffect=null,t.flags=8,e.firstEffect=e.lastEffect=t),e.child=n}function dP(t,e,n,r,o){var i=e.mode,s=t.child;t=s.sibling;var a={mode:"hidden",children:n};return!(i&2)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=a,s=n.lastEffect,s!==null?(e.firstEffect=n.firstEffect,e.lastEffect=s,s.nextEffect=null):e.firstEffect=e.lastEffect=null):n=ll(s,a),t!==null?r=ll(t,r):(r=qu(r,i,o,null),r.flags|=2),r.return=e,n.return=e,n.sibling=r,e.child=n,r}function fP(t,e){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),mL(t.return,e)}function Zw(t,e,n,r,o,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o,lastEffect:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=o,s.lastEffect=i)}function pP(t,e,n){var r=e.pendingProps,o=r.revealOrder,i=r.tail;if(qr(t,e,r.children,n),r=hn.current,r&2)r=r&1|2,e.flags|=64;else{if(t!==null&&t.flags&64)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&fP(t,n);else if(t.tag===19)fP(t,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(mn(hn,r),!(e.mode&2))e.memoizedState=null;else switch(o){case"forwards":for(n=e.child,o=null;n!==null;)t=n.alternate,t!==null&&gy(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=e.child,e.child=null):(o=n.sibling,n.sibling=null),Zw(e,!1,o,n,i,e.lastEffect);break;case"backwards":for(n=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&gy(t)===null){e.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}Zw(e,!0,n,null,i,e.lastEffect);break;case"together":Zw(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function Ts(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),vm|=e.lanes,n&e.childLanes){if(t!==null&&e.child!==t.child)throw Error(we(153));if(e.child!==null){for(t=e.child,n=ll(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ll(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}return null}var RL,uk,PL,OL;RL=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};uk=function(){};PL=function(t,e,n,r){var o=t.memoizedProps;if(o!==r){t=e.stateNode,Zl(Ji.current);var i=null;switch(n){case"input":o=Lx(t,o),r=Lx(t,r),i=[];break;case"option":o=jx(t,o),r=jx(t,r),i=[];break;case"select":o=nn({},o,{value:void 0}),r=nn({},r,{value:void 0}),i=[];break;case"textarea":o=zx(t,o),r=zx(t,r),i=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ly)}Ux(n,r);var s;n=null;for(c in o)if(!r.hasOwnProperty(c)&&o.hasOwnProperty(c)&&o[c]!=null)if(c==="style"){var a=o[c];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(rh.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=o!=null?o[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(rh.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Kt("scroll",t),i||a===l||(i=[])):typeof l=="object"&&l!==null&&l.$$typeof===TE?l.toString():(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};OL=function(t,e,n,r){n!==r&&(e.flags|=4)};function Rf(t,e){if(!Xi)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function R$t(t,e,n){var r=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Jr(e.type)&&uy(),null;case 3:return md(),Zt(Yr),Zt(wr),YE(),r=e.stateNode,r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(yg(e)?e.flags|=4:r.hydrate||(e.flags|=256)),uk(e),null;case 5:ZE(e);var o=Zl(mh.current);if(n=e.type,t!==null&&e.stateNode!=null)PL(t,e,n,r,o),t.ref!==e.ref&&(e.flags|=128);else{if(!r){if(e.stateNode===null)throw Error(we(166));return null}if(t=Zl(Ji.current),yg(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Oa]=e,r[cy]=i,n){case"dialog":Kt("cancel",r),Kt("close",r);break;case"iframe":case"object":case"embed":Kt("load",r);break;case"video":case"audio":for(t=0;t<Wf.length;t++)Kt(Wf[t],r);break;case"source":Kt("error",r);break;case"img":case"image":case"link":Kt("error",r),Kt("load",r);break;case"details":Kt("toggle",r);break;case"input":pR(r,i),Kt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Kt("invalid",r);break;case"textarea":mR(r,i),Kt("invalid",r)}Ux(n,i),t=null;for(var s in i)i.hasOwnProperty(s)&&(o=i[s],s==="children"?typeof o=="string"?r.textContent!==o&&(t=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(t=["children",""+o]):rh.hasOwnProperty(s)&&o!=null&&s==="onScroll"&&Kt("scroll",r));switch(n){case"input":dg(r),hR(r,i,!0);break;case"textarea":dg(r),gR(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ly)}r=t,e.updateQueue=r,r!==null&&(e.flags|=4)}else{switch(s=o.nodeType===9?o:o.ownerDocument,t===qx.html&&(t=E7(n)),t===qx.html?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[Oa]=e,t[cy]=r,RL(t,e,!1,!1),e.stateNode=t,s=Vx(n,r),n){case"dialog":Kt("cancel",t),Kt("close",t),o=r;break;case"iframe":case"object":case"embed":Kt("load",t),o=r;break;case"video":case"audio":for(o=0;o<Wf.length;o++)Kt(Wf[o],t);o=r;break;case"source":Kt("error",t),o=r;break;case"img":case"image":case"link":Kt("error",t),Kt("load",t),o=r;break;case"details":Kt("toggle",t),o=r;break;case"input":pR(t,r),o=Lx(t,r),Kt("invalid",t);break;case"option":o=jx(t,r);break;case"select":t._wrapperState={wasMultiple:!!r.multiple},o=nn({},r,{value:void 0}),Kt("invalid",t);break;case"textarea":mR(t,r),o=zx(t,r),Kt("invalid",t);break;default:o=r}Ux(n,o);var a=o;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?A7(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&C7(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&oh(t,l):typeof l=="number"&&oh(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(rh.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Kt("scroll",t):l!=null&&xE(t,i,l,s))}switch(n){case"input":dg(t),hR(t,r,!1);break;case"textarea":dg(t),gR(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ol(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Iu(t,!!r.multiple,i,!1):r.defaultValue!=null&&Iu(t,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=ly)}sL(n,r)&&(e.flags|=4)}e.ref!==null&&(e.flags|=128)}return null;case 6:if(t&&e.stateNode!=null)OL(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(we(166));n=Zl(mh.current),Zl(Ji.current),yg(e)?(r=e.stateNode,n=e.memoizedProps,r[Oa]=e,r.nodeValue!==n&&(e.flags|=4)):(r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Oa]=e,e.stateNode=r)}return null;case 13:return Zt(hn),r=e.memoizedState,e.flags&64?(e.lanes=n,e):(r=r!==null,n=!1,t===null?e.memoizedProps.fallback!==void 0&&yg(e):n=t.memoizedState!==null,r&&!n&&e.mode&2&&(t===null&&e.memoizedProps.unstable_avoidThisFallback!==!0||hn.current&1?Jn===0&&(Jn=3):((Jn===0||Jn===3)&&(Jn=4),Tr===null||!(vm&134217727)&&!(Yd&134217727)||ju(Tr,gr))),(r||n)&&(e.flags|=4),null);case 4:return md(),uk(e),t===null&&rL(e.stateNode.containerInfo),null;case 10:return KE(e),null;case 17:return Jr(e.type)&&uy(),null;case 19:if(Zt(hn),r=e.memoizedState,r===null)return null;if(i=(e.flags&64)!==0,s=r.rendering,s===null)if(i)Rf(r,!1);else{if(Jn!==0||t!==null&&t.flags&64)for(t=e.child;t!==null;){if(s=gy(t),s!==null){for(e.flags|=64,Rf(r,!1),i=s.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),r.lastEffect===null&&(e.firstEffect=null),e.lastEffect=r.lastEffect,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=2,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null,s=i.alternate,s===null?(i.childLanes=0,i.lanes=t,i.child=null,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,t=s.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return mn(hn,hn.current&1|2),e.child}t=t.sibling}r.tail!==null&&hr()>gk&&(e.flags|=64,i=!0,Rf(r,!1),e.lanes=33554432)}else{if(!i)if(t=gy(s),t!==null){if(e.flags|=64,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Rf(r,!0),r.tail===null&&r.tailMode==="hidden"&&!s.alternate&&!Xi)return e=e.lastEffect=r.lastEffect,e!==null&&(e.nextEffect=null),null}else 2*hr()-r.renderingStartTime>gk&&n!==1073741824&&(e.flags|=64,i=!0,Rf(r,!1),e.lanes=33554432);r.isBackwards?(s.sibling=e.child,e.child=s):(n=r.last,n!==null?n.sibling=s:e.child=s,r.last=s)}return r.tail!==null?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=e.lastEffect,r.renderingStartTime=hr(),n.sibling=null,e=hn.current,mn(hn,i?e&1|2:e&1),n):null;case 23:case 24:return sC(),t!==null&&t.memoizedState!==null!=(e.memoizedState!==null)&&r.mode!=="unstable-defer-without-hiding"&&(e.flags|=4),null}throw Error(we(156,e.tag))}function P$t(t){switch(t.tag){case 1:Jr(t.type)&&uy();var e=t.flags;return e&4096?(t.flags=e&-4097|64,t):null;case 3:if(md(),Zt(Yr),Zt(wr),YE(),e=t.flags,e&64)throw Error(we(285));return t.flags=e&-4097|64,t;case 5:return ZE(t),null;case 13:return Zt(hn),e=t.flags,e&4096?(t.flags=e&-4097|64,t):null;case 19:return Zt(hn),null;case 4:return md(),null;case 10:return KE(t),null;case 23:case 24:return sC(),null;default:return null}}function nC(t,e){try{var n="",r=e;do n+=fkt(r),r=r.return;while(r);var o=n}catch(i){o=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:o}}function dk(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var O$t=typeof WeakMap=="function"?WeakMap:Map;function IL(t,e,n){n=Wa(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ky||(ky=!0,yk=r),dk(t,e)},n}function DL(t,e,n){n=Wa(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var o=e.value;n.payload=function(){return dk(t,e),r(o)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){typeof r!="function"&&(Ki===null?Ki=new Set([this]):Ki.add(this),dk(t,e));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}var I$t=typeof WeakSet=="function"?WeakSet:Set;function hP(t){var e=t.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(n){Ka(t,n)}else e.current=null}function D$t(t,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(e.flags&256&&t!==null){var n=t.memoizedProps,r=t.memoizedState;t=e.stateNode,e=t.getSnapshotBeforeUpdate(e.elementType===e.type?n:Qo(e.type,n),r),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:e.flags&256&&WE(e.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(we(163))}function M$t(t,e,n){switch(n.tag){case 0:case 11:case 15:case 22:if(e=n.updateQueue,e=e!==null?e.lastEffect:null,e!==null){t=e=e.next;do{if((t.tag&3)===3){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}if(e=n.updateQueue,e=e!==null?e.lastEffect:null,e!==null){t=e=e.next;do{var o=t;r=o.next,o=o.tag,o&4&&o&1&&(UL(n,t),U$t(n,t)),t=r}while(t!==e)}return;case 1:t=n.stateNode,n.flags&4&&(e===null?t.componentDidMount():(r=n.elementType===n.type?e.memoizedProps:Qo(n.type,e.memoizedProps),t.componentDidUpdate(r,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate))),e=n.updateQueue,e!==null&&ZR(n,e,t);return;case 3:if(e=n.updateQueue,e!==null){if(t=null,n.child!==null)switch(n.child.tag){case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}ZR(n,e,t)}return;case 5:t=n.stateNode,e===null&&n.flags&4&&sL(n.type,n.memoizedProps)&&t.focus();return;case 6:return;case 4:return;case 12:return;case 13:n.memoizedState===null&&(n=n.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&B7(n))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(we(163))}function mP(t,e){for(var n=t;;){if(n.tag===5){var r=n.stateNode;if(e)r=r.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var o=n.memoizedProps.style;o=o!=null&&o.hasOwnProperty("display")?o.display:null,r.style.display=T7("display",o)}}else if(n.tag===6)n.stateNode.nodeValue=e?"":n.memoizedProps;else if((n.tag!==23&&n.tag!==24||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function gP(t,e){if(ac&&typeof ac.onCommitFiberUnmount=="function")try{ac.onCommitFiberUnmount(UE,e)}catch(i){}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(t=e.updateQueue,t!==null&&(t=t.lastEffect,t!==null)){var n=t=t.next;do{var r=n,o=r.destroy;if(r=r.tag,o!==void 0)if(r&4)UL(e,n);else{r=e;try{o()}catch(i){Ka(r,i)}}n=n.next}while(n!==t)}break;case 1:if(hP(e),t=e.stateNode,typeof t.componentWillUnmount=="function")try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(i){Ka(e,i)}break;case 5:hP(e);break;case 4:ML(t,e)}}function yP(t){t.alternate=null,t.child=null,t.dependencies=null,t.firstEffect=null,t.lastEffect=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.return=null,t.updateQueue=null}function bP(t){return t.tag===5||t.tag===3||t.tag===4}function vP(t){e:{for(var e=t.return;e!==null;){if(bP(e))break e;e=e.return}throw Error(we(160))}var n=e;switch(e=n.stateNode,n.tag){case 5:var r=!1;break;case 3:e=e.containerInfo,r=!0;break;case 4:e=e.containerInfo,r=!0;break;default:throw Error(we(161))}n.flags&16&&(oh(e,""),n.flags&=-17);e:t:for(n=t;;){for(;n.sibling===null;){if(n.return===null||bP(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2)){n=n.stateNode;break e}}r?fk(t,n,e):pk(t,n,e)}function fk(t,e,n){var r=t.tag,o=r===5||r===6;if(o)t=o?t.stateNode:t.stateNode.instance,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ly));else if(r!==4&&(t=t.child,t!==null))for(fk(t,e,n),t=t.sibling;t!==null;)fk(t,e,n),t=t.sibling}function pk(t,e,n){var r=t.tag,o=r===5||r===6;if(o)t=o?t.stateNode:t.stateNode.instance,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(pk(t,e,n),t=t.sibling;t!==null;)pk(t,e,n),t=t.sibling}function ML(t,e){for(var n=e,r=!1,o,i;;){if(!r){r=n.return;e:for(;;){if(r===null)throw Error(we(160));switch(o=r.stateNode,r.tag){case 5:i=!1;break e;case 3:o=o.containerInfo,i=!0;break e;case 4:o=o.containerInfo,i=!0;break e}r=r.return}r=!0}if(n.tag===5||n.tag===6){e:for(var s=t,a=n,l=a;;)if(gP(s,l),l.child!==null&&l.tag!==4)l.child.return=l,l=l.child;else{if(l===a)break e;for(;l.sibling===null;){if(l.return===null||l.return===a)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}i?(s=o,a=n.stateNode,s.nodeType===8?s.parentNode.removeChild(a):s.removeChild(a)):o.removeChild(n.stateNode)}else if(n.tag===4){if(n.child!==null){o=n.stateNode.containerInfo,i=!0,n.child.return=n,n=n.child;continue}}else if(gP(t,n),n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return,n.tag===4&&(r=!1)}n.sibling.return=n.return,n=n.sibling}}function Yw(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do(r.tag&3)===3&&(t=r.destroy,r.destroy=void 0,t!==void 0&&t()),r=r.next;while(r!==n)}return;case 1:return;case 5:if(n=e.stateNode,n!=null){r=e.memoizedProps;var o=t!==null?t.memoizedProps:r;t=e.type;var i=e.updateQueue;if(e.updateQueue=null,i!==null){for(n[cy]=r,t==="input"&&r.type==="radio"&&r.name!=null&&$7(n,r),Vx(t,o),e=Vx(t,r),o=0;o<i.length;o+=2){var s=i[o],a=i[o+1];s==="style"?A7(n,a):s==="dangerouslySetInnerHTML"?C7(n,a):s==="children"?oh(n,a):xE(n,s,a,e)}switch(t){case"input":Fx(n,r);break;case"textarea":S7(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,i=r.value,i!=null?Iu(n,!!r.multiple,i,!1):t!==!!r.multiple&&(r.defaultValue!=null?Iu(n,!!r.multiple,r.defaultValue,!0):Iu(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(e.stateNode===null)throw Error(we(162));e.stateNode.nodeValue=e.memoizedProps;return;case 3:n=e.stateNode,n.hydrate&&(n.hydrate=!1,B7(n.containerInfo));return;case 12:return;case 13:e.memoizedState!==null&&(iC=hr(),mP(e.child,!0)),wP(e);return;case 19:wP(e);return;case 17:return;case 23:case 24:mP(e,e.memoizedState!==null);return}throw Error(we(163))}function wP(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new I$t),e.forEach(function(r){var o=K$t.bind(null,t,r);n.has(r)||(n.add(r),r.then(o,o))})}}function L$t(t,e){return t!==null&&(t=t.memoizedState,t===null||t.dehydrated!==null)?(e=e.memoizedState,e!==null&&e.dehydrated===null):!1}var F$t=Math.ceil,xy=Bc.ReactCurrentDispatcher,rC=Bc.ReactCurrentOwner,Je=0,Tr=null,Cn=null,gr=0,Ec=0,hk=yl(0),Jn=0,hb=null,Zd=0,vm=0,Yd=0,oC=0,mk=null,iC=0,gk=1/0;function Jd(){gk=hr()+500}var Pe=null,ky=!1,yk=null,Ki=null,al=!1,bp=null,Uf=90,bk=[],vk=[],Ds=null,vp=0,wk=null,Xg=-1,$s=0,Qg=0,wp=null,e1=!1;function ao(){return Je&48?hr():Xg!==-1?Xg:Xg=hr()}function Va(t){if(t=t.mode,!(t&2))return 1;if(!(t&4))return hd()===99?1:2;if($s===0&&($s=Zd),S$t.transition!==0){Qg!==0&&(Qg=mk!==null?mk.pendingLanes:0),t=$s;var e=4186112&~Qg;return e&=-e,e===0&&(t=4186112&~t,e=t&-t,e===0&&(e=8192)),e}return t=hd(),Je&4&&t===98?t=sy(12,$s):(t=Tkt(t),t=sy(t,$s)),t}function Ha(t,e,n){if(50<vp)throw vp=0,wk=null,Error(we(185));if(t=mb(t,e),t===null)return null;ab(t,e,n),t===Tr&&(Yd|=e,Jn===4&&ju(t,gr));var r=hd();e===1?Je&8&&!(Je&48)?_k(t):(Vo(t,n),Je===0&&(Jd(),ps())):(!(Je&4)||r!==98&&r!==99||(Ds===null?Ds=new Set([t]):Ds.add(t)),Vo(t,n)),mk=t}function mb(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}function Vo(t,e){for(var n=t.callbackNode,r=t.suspendedLanes,o=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-il(s),l=1<<a,c=i[a];if(c===-1){if(!(l&r)||l&o){c=e,lu(l);var u=Ut;i[a]=10<=u?c+250:6<=u?c+5e3:-1}}else c<=e&&(t.expiredLanes|=l);s&=~l}if(r=lh(t,t===Tr?gr:0),e=Ut,r===0)n!==null&&(n!==Vw&&nk(n),t.callbackNode=null,t.callbackPriority=0);else{if(n!==null){if(t.callbackPriority===e)return;n!==Vw&&nk(n)}e===15?(n=_k.bind(null,t),_s===null?(_s=[n],Jg=VE(fb,hL)):_s.push(n),n=Vw):e===14?n=fh(99,_k.bind(null,t)):(n=Akt(e),n=fh(n,LL.bind(null,t))),t.callbackPriority=e,t.callbackNode=n}}function LL(t){if(Xg=-1,Qg=$s=0,Je&48)throw Error(we(327));var e=t.callbackNode;if(bl()&&t.callbackNode!==e)return null;var n=lh(t,t===Tr?gr:0);if(n===0)return null;var r=n,o=Je;Je|=16;var i=zL();(Tr!==t||gr!==r)&&(Jd(),zu(t,r));do try{z$t();break}catch(a){jL(t,a)}while(1);if(HE(),xy.current=i,Je=o,Cn!==null?r=0:(Tr=null,gr=0,r=Jn),Zd&Yd)zu(t,0);else if(r!==0){if(r===2&&(Je|=64,t.hydrate&&(t.hydrate=!1,WE(t.containerInfo)),n=H7(t),n!==0&&(r=Vf(t,n))),r===1)throw e=hb,zu(t,0),ju(t,n),Vo(t,hr()),e;switch(t.finishedWork=t.current.alternate,t.finishedLanes=n,r){case 0:case 1:throw Error(we(345));case 2:Pl(t);break;case 3:if(ju(t,n),(n&62914560)===n&&(r=iC+500-hr(),10<r)){if(lh(t,0)!==0)break;if(o=t.suspendedLanes,(o&n)!==n){ao(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=zR(Pl.bind(null,t),r);break}Pl(t);break;case 4:if(ju(t,n),(n&4186112)===n)break;for(r=t.eventTimes,o=-1;0<n;){var s=31-il(n);i=1<<s,s=r[s],s>o&&(o=s),n&=~i}if(n=o,n=hr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*F$t(n/1960))-n,10<n){t.timeoutHandle=zR(Pl.bind(null,t),n);break}Pl(t);break;case 5:Pl(t);break;default:throw Error(we(329))}}return Vo(t,hr()),t.callbackNode===e?LL.bind(null,t):null}function ju(t,e){for(e&=~oC,e&=~Yd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-il(e),r=1<<n;t[n]=-1,e&=~r}}function _k(t){if(Je&48)throw Error(we(327));if(bl(),t===Tr&&t.expiredLanes&gr){var e=gr,n=Vf(t,e);Zd&Yd&&(e=lh(t,e),n=Vf(t,e))}else e=lh(t,0),n=Vf(t,e);if(t.tag!==0&&n===2&&(Je|=64,t.hydrate&&(t.hydrate=!1,WE(t.containerInfo)),e=H7(t),e!==0&&(n=Vf(t,e))),n===1)throw n=hb,zu(t,0),ju(t,e),Vo(t,hr()),n;return t.finishedWork=t.current.alternate,t.finishedLanes=e,Pl(t),Vo(t,hr()),null}function B$t(){if(Ds!==null){var t=Ds;Ds=null,t.forEach(function(e){e.expiredLanes|=24&e.pendingLanes,Vo(e,hr())})}ps()}function FL(t,e){var n=Je;Je|=1;try{return t(e)}finally{Je=n,Je===0&&(Jd(),ps())}}function BL(t,e){var n=Je;Je&=-2,Je|=8;try{return t(e)}finally{Je=n,Je===0&&(Jd(),ps())}}function vg(t,e){mn(hk,Ec),Ec|=e,Zd|=e}function sC(){Ec=hk.current,Zt(hk)}function zu(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,v$t(n)),Cn!==null)for(n=Cn.return;n!==null;){var r=n;switch(r.tag){case 1:r=r.type.childContextTypes,r!=null&&uy();break;case 3:md(),Zt(Yr),Zt(wr),YE();break;case 5:ZE(r);break;case 4:md();break;case 13:Zt(hn);break;case 19:Zt(hn);break;case 10:KE(r);break;case 23:case 24:sC()}n=n.return}Tr=t,Cn=ll(t.current,null),gr=Ec=Zd=e,Jn=0,hb=null,oC=Yd=vm=0}function jL(t,e){do{var n=Cn;try{if(HE(),gp.current=_y,yy){for(var r=vn.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}yy=!1}if(gh=0,Gn=ur=vn=null,yp=!1,rC.current=null,n===null||n.return===null){Jn=1,hb=e,Cn=null;break}e:{var i=t,s=n.return,a=n,l=e;if(e=gr,a.flags|=2048,a.firstEffect=a.lastEffect=null,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l;if(!(a.mode&2)){var u=a.alternate;u?(a.updateQueue=u.updateQueue,a.memoizedState=u.memoizedState,a.lanes=u.lanes):(a.updateQueue=null,a.memoizedState=null)}var d=(hn.current&1)!==0,f=s;do{var p;if(p=f.tag===13){var h=f.memoizedState;if(h!==null)p=h.dehydrated!==null;else{var y=f.memoizedProps;p=y.fallback===void 0?!1:y.unstable_avoidThisFallback!==!0?!0:!d}}if(p){var m=f.updateQueue;if(m===null){var w=new Set;w.add(c),f.updateQueue=w}else m.add(c);if(!(f.mode&2)){if(f.flags|=64,a.flags|=16384,a.flags&=-2981,a.tag===1)if(a.alternate===null)a.tag=17;else{var x=Wa(-1,1);x.tag=2,Ua(a,x)}a.lanes|=1;break e}l=void 0,a=e;var $=i.pingCache;if($===null?($=i.pingCache=new O$t,l=new Set,$.set(c,l)):(l=$.get(c),l===void 0&&(l=new Set,$.set(c,l))),!l.has(a)){l.add(a);var S=H$t.bind(null,i,c,a);c.then(S,S)}f.flags|=4096,f.lanes=e;break e}f=f.return}while(f!==null);l=Error((Ou(a.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}Jn!==5&&(Jn=2),l=nC(l,a),f=s;do{switch(f.tag){case 3:i=l,f.flags|=4096,e&=-e,f.lanes|=e;var I=IL(f,i,e);GR(f,I);break e;case 1:i=l;var E=f.type,L=f.stateNode;if(!(f.flags&64)&&(typeof E.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(Ki===null||!Ki.has(L)))){f.flags|=4096,e&=-e,f.lanes|=e;var T=DL(f,i,e);GR(f,T);break e}}f=f.return}while(f!==null)}WL(n)}catch(F){e=F,Cn===n&&n!==null&&(Cn=n=n.return);continue}break}while(1)}function zL(){var t=xy.current;return xy.current=_y,t===null?_y:t}function Vf(t,e){var n=Je;Je|=16;var r=zL();Tr===t&&gr===e||zu(t,e);do try{j$t();break}catch(o){jL(t,o)}while(1);if(HE(),Je=n,xy.current=r,Cn!==null)throw Error(we(261));return Tr=null,gr=0,Jn}function j$t(){for(;Cn!==null;)qL(Cn)}function z$t(){for(;Cn!==null&&!x$t();)qL(Cn)}function qL(t){var e=VL(t.alternate,t,Ec);t.memoizedProps=t.pendingProps,e===null?WL(t):Cn=e,rC.current=null}function WL(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&2048){if(n=P$t(e),n!==null){n.flags&=2047,Cn=n;return}t!==null&&(t.firstEffect=t.lastEffect=null,t.flags|=2048)}else{if(n=R$t(n,e,Ec),n!==null){Cn=n;return}if(n=e,n.tag!==24&&n.tag!==23||n.memoizedState===null||Ec&1073741824||!(n.mode&4)){for(var r=0,o=n.child;o!==null;)r|=o.lanes|o.childLanes,o=o.sibling;n.childLanes=r}t!==null&&!(t.flags&2048)&&(t.firstEffect===null&&(t.firstEffect=e.firstEffect),e.lastEffect!==null&&(t.lastEffect!==null&&(t.lastEffect.nextEffect=e.firstEffect),t.lastEffect=e.lastEffect),1<e.flags&&(t.lastEffect!==null?t.lastEffect.nextEffect=e:t.firstEffect=e,t.lastEffect=e))}if(e=e.sibling,e!==null){Cn=e;return}Cn=e=t}while(e!==null);Jn===0&&(Jn=5)}function Pl(t){var e=hd();return Sc(99,q$t.bind(null,t,e)),null}function q$t(t,e){do bl();while(bp!==null);if(Je&48)throw Error(we(327));var n=t.finishedWork;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(we(177));t.callbackNode=null;var r=n.lanes|n.childLanes,o=r,i=t.pendingLanes&~o;t.pendingLanes=o,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=o,t.mutableReadLanes&=o,t.entangledLanes&=o,o=t.entanglements;for(var s=t.eventTimes,a=t.expirationTimes;0<i;){var l=31-il(i),c=1<<l;o[l]=0,s[l]=-1,a[l]=-1,i&=~c}if(Ds!==null&&!(r&24)&&Ds.has(t)&&Ds.delete(t),t===Tr&&(Cn=Tr=null,gr=0),1<n.flags?n.lastEffect!==null?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,r!==null){if(o=Je,Je|=32,rC.current=null,qw=Kg,s=IR(),Jx(s)){if("selectionStart"in s)a={start:s.selectionStart,end:s.selectionEnd};else e:if(a=(a=s.ownerDocument)&&a.defaultView||window,(c=a.getSelection&&a.getSelection())&&c.rangeCount!==0){a=c.anchorNode,i=c.anchorOffset,l=c.focusNode,c=c.focusOffset;try{a.nodeType,l.nodeType}catch(F){a=null;break e}var u=0,d=-1,f=-1,p=0,h=0,y=s,m=null;t:for(;;){for(var w;y!==a||i!==0&&y.nodeType!==3||(d=u+i),y!==l||c!==0&&y.nodeType!==3||(f=u+c),y.nodeType===3&&(u+=y.nodeValue.length),(w=y.firstChild)!==null;)m=y,y=w;for(;;){if(y===s)break t;if(m===a&&++p===i&&(d=u),m===l&&++h===c&&(f=u),(w=y.nextSibling)!==null)break;y=m,m=y.parentNode}y=w}a=d===-1||f===-1?null:{start:d,end:f}}else a=null;a=a||{start:0,end:0}}else a=null;Ww={focusedElem:s,selectionRange:a},Kg=!1,wp=null,e1=!1,Pe=r;do try{W$t()}catch(F){if(Pe===null)throw Error(we(330));Ka(Pe,F),Pe=Pe.nextEffect}while(Pe!==null);wp=null,Pe=r;do try{for(s=t;Pe!==null;){var x=Pe.flags;if(x&16&&oh(Pe.stateNode,""),x&128){var $=Pe.alternate;if($!==null){var S=$.ref;S!==null&&(typeof S=="function"?S(null):S.current=null)}}switch(x&1038){case 2:vP(Pe),Pe.flags&=-3;break;case 6:vP(Pe),Pe.flags&=-3,Yw(Pe.alternate,Pe);break;case 1024:Pe.flags&=-1025;break;case 1028:Pe.flags&=-1025,Yw(Pe.alternate,Pe);break;case 4:Yw(Pe.alternate,Pe);break;case 8:a=Pe,ML(s,a);var I=a.alternate;yP(a),I!==null&&yP(I)}Pe=Pe.nextEffect}}catch(F){if(Pe===null)throw Error(we(330));Ka(Pe,F),Pe=Pe.nextEffect}while(Pe!==null);if(S=Ww,$=IR(),x=S.focusedElem,s=S.selectionRange,$!==x&&x&&x.ownerDocument&&eL(x.ownerDocument.documentElement,x)){for(s!==null&&Jx(x)&&($=s.start,S=s.end,S===void 0&&(S=$),"selectionStart"in x?(x.selectionStart=$,x.selectionEnd=Math.min(S,x.value.length)):(S=($=x.ownerDocument||document)&&$.defaultView||window,S.getSelection&&(S=S.getSelection(),a=x.textContent.length,I=Math.min(s.start,a),s=s.end===void 0?I:Math.min(s.end,a),!S.extend&&I>s&&(a=s,s=I,I=a),a=OR(x,I),i=OR(x,s),a&&i&&(S.rangeCount!==1||S.anchorNode!==a.node||S.anchorOffset!==a.offset||S.focusNode!==i.node||S.focusOffset!==i.offset)&&($=$.createRange(),$.setStart(a.node,a.offset),S.removeAllRanges(),I>s?(S.addRange($),S.extend(i.node,i.offset)):($.setEnd(i.node,i.offset),S.addRange($)))))),$=[],S=x;S=S.parentNode;)S.nodeType===1&&$.push({element:S,left:S.scrollLeft,top:S.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<$.length;x++)S=$[x],S.element.scrollLeft=S.left,S.element.scrollTop=S.top}Kg=!!qw,Ww=qw=null,t.current=n,Pe=r;do try{for(x=t;Pe!==null;){var E=Pe.flags;if(E&36&&M$t(x,Pe.alternate,Pe),E&128){$=void 0;var L=Pe.ref;if(L!==null){var T=Pe.stateNode;switch(Pe.tag){case 5:$=T;break;default:$=T}typeof L=="function"?L($):L.current=$}}Pe=Pe.nextEffect}}catch(F){if(Pe===null)throw Error(we(330));Ka(Pe,F),Pe=Pe.nextEffect}while(Pe!==null);Pe=null,$$t(),Je=o}else t.current=n;if(al)al=!1,bp=t,Uf=e;else for(Pe=r;Pe!==null;)e=Pe.nextEffect,Pe.nextEffect=null,Pe.flags&8&&(E=Pe,E.sibling=null,E.stateNode=null),Pe=e;if(r=t.pendingLanes,r===0&&(Ki=null),r===1?t===wk?vp++:(vp=0,wk=t):vp=0,n=n.stateNode,ac&&typeof ac.onCommitFiberRoot=="function")try{ac.onCommitFiberRoot(UE,n,void 0,(n.current.flags&64)===64)}catch(F){}if(Vo(t,hr()),ky)throw ky=!1,t=yk,yk=null,t;return Je&8||ps(),null}function W$t(){for(;Pe!==null;){var t=Pe.alternate;e1||wp===null||(Pe.flags&8?vR(Pe,wp)&&(e1=!0):Pe.tag===13&&L$t(t,Pe)&&vR(Pe,wp)&&(e1=!0));var e=Pe.flags;e&256&&D$t(t,Pe),!(e&512)||al||(al=!0,fh(97,function(){return bl(),null})),Pe=Pe.nextEffect}}function bl(){if(Uf!==90){var t=97<Uf?97:Uf;return Uf=90,Sc(t,V$t)}return!1}function U$t(t,e){bk.push(e,t),al||(al=!0,fh(97,function(){return bl(),null}))}function UL(t,e){vk.push(e,t),al||(al=!0,fh(97,function(){return bl(),null}))}function V$t(){if(bp===null)return!1;var t=bp;if(bp=null,Je&48)throw Error(we(331));var e=Je;Je|=32;var n=vk;vk=[];for(var r=0;r<n.length;r+=2){var o=n[r],i=n[r+1],s=o.destroy;if(o.destroy=void 0,typeof s=="function")try{s()}catch(l){if(i===null)throw Error(we(330));Ka(i,l)}}for(n=bk,bk=[],r=0;r<n.length;r+=2){o=n[r],i=n[r+1];try{var a=o.create;o.destroy=a()}catch(l){if(i===null)throw Error(we(330));Ka(i,l)}}for(a=t.current.firstEffect;a!==null;)t=a.nextEffect,a.nextEffect=null,a.flags&8&&(a.sibling=null,a.stateNode=null),a=t;return Je=e,ps(),!0}function _P(t,e,n){e=nC(n,e),e=IL(t,e,1),Ua(t,e),e=ao(),t=mb(t,1),t!==null&&(ab(t,1,e),Vo(t,e))}function Ka(t,e){if(t.tag===3)_P(t,t,e);else for(var n=t.return;n!==null;){if(n.tag===3){_P(n,t,e);break}else if(n.tag===1){var r=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ki===null||!Ki.has(r))){t=nC(e,t);var o=DL(n,t,1);if(Ua(n,o),o=ao(),n=mb(n,1),n!==null)ab(n,1,o),Vo(n,o);else if(typeof r.componentDidCatch=="function"&&(Ki===null||!Ki.has(r)))try{r.componentDidCatch(e,t)}catch(i){}break}}n=n.return}}function H$t(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ao(),t.pingedLanes|=t.suspendedLanes&n,Tr===t&&(gr&n)===n&&(Jn===4||Jn===3&&(gr&62914560)===gr&&500>hr()-iC?zu(t,0):oC|=n),Vo(t,e)}function K$t(t,e){var n=t.stateNode;n!==null&&n.delete(e),e=0,e===0&&(e=t.mode,e&2?e&4?($s===0&&($s=Zd),e=cu(62914560&~$s),e===0&&(e=4194304)):e=hd()===99?1:2:e=1),n=ao(),t=mb(t,e),t!==null&&(ab(t,e,n),Vo(t,n))}var VL;VL=function(t,e,n){var r=e.lanes;if(t!==null)if(t.memoizedProps!==e.pendingProps||Yr.current)ii=!0;else if(n&r)ii=!!(t.flags&16384);else{switch(ii=!1,e.tag){case 3:aP(e),Kw();break;case 5:XR(e);break;case 1:Jr(e.type)&&Yg(e);break;case 4:ik(e,e.stateNode.containerInfo);break;case 10:r=e.memoizedProps.value;var o=e.type._context;mn(dy,o._currentValue),o._currentValue=r;break;case 13:if(e.memoizedState!==null)return n&e.child.childLanes?lP(t,e,n):(mn(hn,hn.current&1),e=Ts(t,e,n),e!==null?e.sibling:null);mn(hn,hn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&64){if(r)return pP(t,e,n);e.flags|=64}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),mn(hn,hn.current),r)break;return null;case 23:case 24:return e.lanes=0,Gw(t,e,n)}return Ts(t,e,n)}else ii=!1;switch(e.lanes=0,e.tag){case 2:if(r=e.type,t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,o=pd(e,wr.current),Fu(e,n),o=XE(null,e,r,t,o,n),e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,Jr(r)){var i=!0;Yg(e)}else i=!1;e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,GE(e);var s=r.getDerivedStateFromProps;typeof s=="function"&&hy(e,r,s,t),o.updater=pb,e.stateNode=o,o._reactInternals=e,ok(e,r,t,n),e=ck(null,e,r,!0,i,n)}else e.tag=0,qr(null,e,o,n),e=e.child;return e;case 16:o=e.elementType;e:{switch(t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,i=o._init,o=i(o._payload),e.type=o,i=e.tag=Z$t(o),t=Qo(o,t),i){case 0:e=lk(null,e,o,t,n);break e;case 1:e=sP(null,e,o,t,n);break e;case 11:e=oP(null,e,o,t,n);break e;case 14:e=iP(null,e,o,Qo(o.type,t),r,n);break e}throw Error(we(306,o,""))}return e;case 0:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Qo(r,o),lk(t,e,r,o,n);case 1:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Qo(r,o),sP(t,e,r,o,n);case 3:if(aP(e),r=e.updateQueue,t===null||r===null)throw Error(we(282));if(r=e.pendingProps,o=e.memoizedState,o=o!==null?o.element:null,gL(t,e),ph(e,r,null,n),r=e.memoizedState.element,r===o)Kw(),e=Ts(t,e,n);else{if(o=e.stateNode,(i=o.hydrate)&&(Ia=Lu(e.stateNode.containerInfo.firstChild),Cs=e,i=Xi=!0),i){if(t=o.mutableSourceEagerHydrationData,t!=null)for(o=0;o<t.length;o+=2)i=t[o],i._workInProgressVersionPrimary=t[o+1],Bu.push(i);for(n=wL(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|1024,n=n.sibling}else qr(t,e,r,n),Kw();e=e.child}return e;case 5:return XR(e),t===null&&sk(e),r=e.type,o=e.pendingProps,i=t!==null?t.memoizedProps:null,s=o.children,ek(r,o)?s=null:i!==null&&ek(r,i)&&(e.flags|=16),NL(t,e),qr(t,e,s,n),e.child;case 6:return t===null&&sk(e),null;case 13:return lP(t,e,n);case 4:return ik(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=my(e,null,r,n):qr(t,e,r,n),e.child;case 11:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Qo(r,o),oP(t,e,r,o,n);case 7:return qr(t,e,e.pendingProps,n),e.child;case 8:return qr(t,e,e.pendingProps.children,n),e.child;case 12:return qr(t,e,e.pendingProps.children,n),e.child;case 10:e:{r=e.type._context,o=e.pendingProps,s=e.memoizedProps,i=o.value;var a=e.type._context;if(mn(dy,a._currentValue),a._currentValue=i,s!==null)if(a=s.value,i=$o(a,i)?0:(typeof r._calculateChangedBits=="function"?r._calculateChangedBits(a,i):1073741823)|0,i===0){if(s.children===o.children&&!Yr.current){e=Ts(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){s=a.child;for(var c=l.firstContext;c!==null;){if(c.context===r&&c.observedBits&i){a.tag===1&&(c=Wa(-1,n&-n),c.tag=2,Ua(a,c)),a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),mL(a.return,n),l.lanes|=n;break}c=c.next}}else s=a.tag===10&&a.type===e.type?null:a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===e){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}qr(t,e,o.children,n),e=e.child}return e;case 9:return o=e.type,i=e.pendingProps,r=i.children,Fu(e,n),o=Uo(o,i.unstable_observedBits),r=r(o),e.flags|=1,qr(t,e,r,n),e.child;case 14:return o=e.type,i=Qo(o,e.pendingProps),i=Qo(o.type,i),iP(t,e,o,i,r,n);case 15:return AL(t,e,e.type,e.pendingProps,r,n);case 17:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Qo(r,o),t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,Jr(r)?(t=!0,Yg(e)):t=!1,Fu(e,n),bL(e,r,o),ok(e,r,o,n),ck(null,e,r,!0,t,n);case 19:return pP(t,e,n);case 23:return Gw(t,e,n);case 24:return Gw(t,e,n)}throw Error(we(156,e.tag))};function G$t(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function So(t,e,n,r){return new G$t(t,e,n,r)}function aC(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Z$t(t){if(typeof t=="function")return aC(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ob)return 11;if(t===ib)return 14}return 2}function ll(t,e){var n=t.alternate;return n===null?(n=So(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function t1(t,e,n,r,o,i){var s=2;if(r=t,typeof t=="function")aC(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case ka:return qu(n.children,o,i,e);case _7:s=8,o|=16;break;case kE:s=8,o|=1;break;case cp:return t=So(12,n,e,o|8),t.elementType=cp,t.type=cp,t.lanes=i,t;case up:return t=So(13,n,e,o),t.type=up,t.elementType=up,t.lanes=i,t;case ny:return t=So(19,n,e,o),t.elementType=ny,t.lanes=i,t;case AE:return lC(n,o,i,e);case Mx:return t=So(24,n,e,o),t.elementType=Mx,t.lanes=i,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case $E:s=10;break e;case SE:s=9;break e;case ob:s=11;break e;case ib:s=14;break e;case EE:s=16,r=null;break e;case CE:s=22;break e}throw Error(we(130,t==null?t:typeof t,""))}return e=So(s,n,e,o),e.elementType=t,e.type=r,e.lanes=i,e}function qu(t,e,n,r){return t=So(7,t,r,e),t.lanes=n,t}function lC(t,e,n,r){return t=So(23,t,r,e),t.elementType=AE,t.lanes=n,t}function Jw(t,e,n){return t=So(6,t,null,e),t.lanes=n,t}function Xw(t,e,n){return e=So(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Y$t(t,e,n){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Dw(0),this.expirationTimes=Dw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dw(0),this.mutableSourceEagerHydrationData=null}function J$t(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Hl,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function $y(t,e,n,r){var o=e.current,i=ao(),s=Va(o);e:if(n){n=n._reactInternals;t:{if(jc(n)!==n||n.tag!==1)throw Error(we(170));var a=n;do{switch(a.tag){case 3:a=a.stateNode.context;break t;case 1:if(Jr(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break t}}a=a.return}while(a!==null);throw Error(we(171))}if(n.tag===1){var l=n.type;if(Jr(l)){n=lL(n,l,a);break e}}n=a}else n=sl;return e.context===null?e.context=n:e.pendingContext=n,e=Wa(i,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),Ua(o,e),Ha(o,s,i),s}function Qw(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function xP(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function cC(t,e){xP(t,e),(t=t.alternate)&&xP(t,e)}function X$t(){return null}function uC(t,e,n){var r=n!=null&&n.hydrationOptions!=null&&n.hydrationOptions.mutableSources||null;if(n=new Y$t(t,e,n!=null&&n.hydrate===!0),e=So(3,null,null,e===2?7:e===1?3:0),n.current=e,e.stateNode=n,GE(e),t[Gd]=n.current,rL(t.nodeType===8?t.parentNode:t),r)for(t=0;t<r.length;t++){e=r[t];var o=e._getVersion;o=o(e._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[e,o]:n.mutableSourceEagerHydrationData.push(e,o)}this._internalRoot=n}uC.prototype.render=function(t){$y(t,this._internalRoot,null,null)};uC.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;$y(null,t,null,function(){e[Gd]=null})};function wm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Q$t(t,e){if(e||(e=t?t.nodeType===9?t.documentElement:t.firstChild:null,e=!(!e||e.nodeType!==1||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new uC(t,0,e?{hydrate:!0}:void 0)}function gb(t,e,n,r,o){var i=n._reactRootContainer;if(i){var s=i._internalRoot;if(typeof o=="function"){var a=o;o=function(){var c=Qw(s);a.call(c)}}$y(e,s,t,o)}else{if(i=n._reactRootContainer=Q$t(n,r),s=i._internalRoot,typeof o=="function"){var l=o;o=function(){var c=Qw(s);l.call(c)}}BL(function(){$y(e,s,t,o)})}return Qw(s)}M7=function(t){if(t.tag===13){var e=ao();Ha(t,4,e),cC(t,4)}};IE=function(t){if(t.tag===13){var e=ao();Ha(t,67108864,e),cC(t,67108864)}};L7=function(t){if(t.tag===13){var e=ao(),n=Va(t);Ha(t,n,e),cC(t,n)}};F7=function(t,e){return e()};Hx=function(t,e,n){switch(e){case"input":if(Fx(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var o=db(r);if(!o)throw Error(we(90));k7(r),Fx(r,o)}}}break;case"textarea":S7(t,n);break;case"select":e=n.value,e!=null&&Iu(t,!!n.multiple,e,!1)}};RE=FL;P7=function(t,e,n,r,o){var i=Je;Je|=4;try{return Sc(98,t.bind(null,e,n,r,o))}finally{Je=i,Je===0&&(Jd(),ps())}};PE=function(){!(Je&49)&&(B$t(),bl())};O7=function(t,e){var n=Je;Je|=2;try{return t(e)}finally{Je=n,Je===0&&(Jd(),ps())}};function HL(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wm(e))throw Error(we(200));return J$t(t,e,null,n)}var eSt={Events:[ym,yu,db,N7,R7,bl,{current:!1}]},Pf={findFiberByHostInstance:Gl,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},tSt={bundleType:Pf.bundleType,version:Pf.version,rendererPackageName:Pf.rendererPackageName,rendererConfig:Pf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bc.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=D7(t),t===null?null:t.stateNode},findFiberByHostInstance:Pf.findFiberByHostInstance||X$t,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var wg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wg.isDisabled&&wg.supportsFiber)try{UE=wg.inject(tSt),ac=wg}catch(t){}}Go.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eSt;Go.createPortal=HL;Go.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(we(188)):Error(we(268,Object.keys(t)));return t=D7(e),t=t===null?null:t.stateNode,t};Go.flushSync=function(t,e){var n=Je;if(n&48)return t(e);Je|=1;try{if(t)return Sc(99,t.bind(null,e))}finally{Je=n,ps()}};Go.hydrate=function(t,e,n){if(!wm(e))throw Error(we(200));return gb(null,t,e,!0,n)};Go.render=function(t,e,n){if(!wm(e))throw Error(we(200));return gb(null,t,e,!1,n)};Go.unmountComponentAtNode=function(t){if(!wm(t))throw Error(we(40));return t._reactRootContainer?(BL(function(){gb(null,null,t,!1,function(){t._reactRootContainer=null,t[Gd]=null})}),!0):!1};Go.unstable_batchedUpdates=FL;Go.unstable_createPortal=function(t,e){return HL(t,e,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};Go.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!wm(n))throw Error(we(200));if(t==null||t._reactInternals===void 0)throw Error(we(38));return gb(t,e,n,!1,r)};Go.version="17.0.2";function KL(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(KL)}catch(t){console.error(t)}}KL(),y7.exports=Go;var dC=y7.exports,vl=Ws(dC);let e_=()=>{};const GL=new WeakMap,nSt=t=>({create:(e,n)=>{e_("create",Tu.get(e)),t(r=>[...r,e])},update:(e,n)=>{e_("update",Tu.get(e));const r=GL.get(e);r&&r()},destroy:e=>{e_("destroy",Tu.get(e)),t(n=>n.filter(r=>r!==e))}});function rSt(t){const[e,n]=k.useState([]);return k.useEffect(()=>{let r=!1;return WY(t.current,nSt(o=>{r||n(i=>o(i))})),()=>{r=!0}},[t]),e}let oSt=()=>{};class ZL extends H.Component{constructor(e){super(e),this.update=()=>{this.setState((n,r)=>({nodeViewProps:r.nodeView.getNodeViewProps()}))},this.attachToContentDOM=n=>{if(!n)return;const r=this.props.nodeView.contentDOM;n.contains(r)||(r.parentNode&&r.parentNode.removeChild(r),n.appendChild(r))},e.nodeViewUpdateStore.set(e.nodeView,this.update),this.state={nodeViewProps:this.props.nodeView.getNodeViewProps()}}getChildren(){return this.props.nodeView.contentDOM?this.state.nodeViewProps.node.isInline?H.createElement("span",{className:"bangle-nv-child-container",ref:this.attachToContentDOM}):H.createElement("div",{className:"bangle-nv-child-container",ref:this.attachToContentDOM}):null}render(){oSt("react rendering",Tu.get(this.props.nodeView));const e=this.props.renderNodeViews({...this.state.nodeViewProps,children:this.getChildren()});if(!e)throw Po("renderNodeView prop must return a react element for the node",this.state.nodeViewProps.node),new Error(`renderNodeView must handle rendering for node of type "${this.state.nodeViewProps.node.type.name}"`);return e}}ZL.propTypes={nodeView:yt.object.isRequired,renderNodeViews:yt.func.isRequired,nodeViewUpdateStore:yt.instanceOf(WeakMap).isRequired};const iSt={selected:yt.bool.isRequired,node:yt.instanceOf(Hr).isRequired,view:yt.instanceOf(uM).isRequired,getPos:yt.func.isRequired,decorations:yt.object.isRequired,attrs:yt.object.isRequired,updateAttrs:yt.func.isRequired};({...iSt,children:yt.oneOfType([yt.element,yt.arrayOf(yt.element)]).isRequired});const YL=H.createContext(null),fC=H.forwardRef(({id:t,state:e,children:n,focusOnInit:r=!0,pmViewOpts:o,renderNodeViews:i,className:s,style:a,onReady:l=()=>{}},c)=>{const u=k.useRef(null),d=k.useRef(l),f=k.useRef({state:e,focusOnInit:r,pmViewOpts:o}),[p,h]=k.useState(),y=rSt(u);if(k.useImperativeHandle(c,()=>p,[p]),k.useEffect(()=>{const m=new VM(u.current,f.current);return m.view._updatePluginWatcher=sSt(m),d.current(m),h(m),()=>{m.destroy()}},[c]),y.length>0&&i==null)throw new Error("When using nodeViews, you must provide renderNodeViews callback");return H.createElement(H.Fragment,null,H.createElement("div",{ref:u,id:t,className:s,style:a}),y.map(m=>vl.createPortal(H.createElement(ZL,{debugKey:Tu.get(m),nodeViewUpdateStore:GL,nodeView:m,renderNodeViews:i}),m.containerDOM,Tu.get(m))),p?H.createElement(YL.Provider,{value:p.view},n):null)}),sSt=t=>(e,n=!1)=>{if(t.destroyed)return;let r=t.view.state;const o=n?r.plugins.filter(i=>i!==e):[...r.plugins,e];r=r.reconfigure({plugins:o}),t.view.updateState(r)};fC.propTypes={id:yt.string,renderNodeViews:yt.func,onReady:yt.func,children:yt.oneOfType([yt.element,yt.arrayOf(yt.element)]),state:yt.instanceOf(Q$).isRequired,pmViewOpts:yt.object,className:yt.string,style:yt.object};function JL(t){if(t.plugins&&typeof t.plugins!="function")throw new Error("plugins error: plugins must be a function");const[e]=k.useState(()=>new Q$(t));return e}function gd(t,e=!1){const n=qn(),[r,o]=k.useState(t.getState(n.state));return k.useEffect(()=>{let i=o;e&&(i=ZZ(o));const s=aSt(t,i);return n._updatePluginWatcher(s),()=>{e&&i.cancel(),n._updatePluginWatcher(s,!0)}},[n,t,e]),r}function qn(){return k.useContext(YL)}function aSt(t,e){return new ht({key:new vt(`withPluginState_${t.key}`),view(){return{update(n,r){const{state:o}=n;if(r===o)return;const i=t.getState(o);i!==t.getState(r)&&e(i)}}}})}function Mi(t,e){return!!t.schema.nodes[e]||!!t.schema.marks[e]}const{queryIsSelectionTooltipActive:XL,querySelectionTooltipType:lSt,hideSelectionTooltip:pC,updateSelectionTooltipType:QL}=a7,cSt=dSt,uSt={focusFloatingMenuInput:yh,toggleLinkSubMenu:yb,updateFloatingTooltipType:QL,hideFloatingMenu:pC,queryIsMenuActive:XL},hC={hide:"Escape",toggleLink:"Meta-k"},e9=(t,e)=>{if(Mi(t,"link")&&(is.queryIsSelectionAroundLink()(t)||is.queryIsLinkActive()(t)))return"linkSubMenu";if(t.selection.empty)return null;if(t.selection instanceof Me)return"defaultMenu";const{from:n,to:r}=t.selection;return fSt(t.doc,n,r)?"defaultMenu":null};function dSt({key:t=new vt("floatingMenuPlugin"),keybindings:e=hC,tooltipRenderOpts:n={},calculateType:r=e9}={}){return[a7.plugins({key:t,calculateType:r,tooltipRenderOpts:n}),e?en(_r([[e.hide,mt(XL(t),pC(t))],[e.toggleLink,yb(t)]])):void 0]}function yb(t){return(e,n,r)=>{const o=lSt(t)(e);return Mi(e,"link")?e.selection.empty?(o==="linkSubMenu"&&no(r,yh(t)),!1):o==="linkSubMenu"?pC(t)(r.state,r.dispatch,r):(no(r,yh(t)),QL(t,"linkSubMenu")(r.state,r.dispatch,r)):!1}}function yh(t){return e=>{const r=t.getState(e).tooltipContentDOM.querySelector("input");return r?(r.focus(),!0):!1}}function fSt(t,e,n){let r=!1;return t.nodesBetween(e,n,(o,i)=>{if(r)return!1;if(o.isText){const s=i,a=i+o.text.length;if(!(e>=a||n<=s))return r=!0,!1}}),r}var t9=Object.freeze({__proto__:null,plugins:cSt,commands:uSt,defaultKeys:hC,defaultCalculateType:e9,toggleLinkSubMenu:yb,focusFloatingMenuInput:yh});const lo=({className:t="",children:e,isActive:n,isDisabled:r,hint:o,hintPos:i="top",hintBreakWhiteSpace:s=!0,onMouseDown:a})=>H.createElement("button",{type:"button","data-bangle-balloon-break":s,"aria-label":o,"data-bangle-balloon-pos":i,disabled:r,onMouseDown:a,className:`bangle-menu-button ${n?"active":""} ${t}`},e);lo.propTypes={onMouseDown:yt.func,children:yt.oneOfType([yt.string,yt.element,yt.arrayOf(yt.element)]).isRequired};function pSt(t){return H.createElement("svg",{viewBox:"-6 -5 24 24",xmlns:"http://www.w3.org/2000/svg",...t},H.createElement("path",{d:"M5.997 14H1.72c-.618 0-1.058-.138-1.323-.415C.132 13.308 0 12.867 0 12.262V1.738C0 1.121.135.676.406.406.676.136 1.114 0 1.719 0h4.536c.669 0 1.248.041 1.738.124.49.083.93.242 1.318.478a3.458 3.458 0 0 1 1.461 1.752c.134.366.2.753.2 1.16 0 1.401-.7 2.426-2.1 3.075 1.84.586 2.76 1.726 2.76 3.42 0 .782-.2 1.487-.602 2.114a3.61 3.61 0 0 1-1.623 1.39 5.772 5.772 0 0 1-1.471.377c-.554.073-1.2.11-1.939.11zm-.21-6.217h-2.95v4.087h3.046c1.916 0 2.874-.69 2.874-2.072 0-.707-.248-1.22-.745-1.537-.496-.319-1.238-.478-2.225-.478zM2.837 2.13v3.619h2.597c.707 0 1.252-.067 1.638-.2.385-.134.68-.389.883-.765.16-.267.239-.566.239-.897 0-.707-.252-1.176-.755-1.409-.503-.232-1.27-.348-2.301-.348H2.836z"}))}function hSt(t){return H.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",...t},H.createElement("path",{d:"M9.95263 16.9123L8.59323 18.3608L2.03082 12.2016L8.18994 5.63922L9.64826 7.00791L4.85783 12.112L9.95212 16.8932L9.95263 16.9123Z"}),H.createElement("path",{d:"M14.0474 16.9123L15.4068 18.3608L21.9692 12.2016L15.8101 5.63922L14.3517 7.00791L19.1422 12.112L14.0479 16.8932L14.0474 16.9123Z"}))}function mSt(){return H.createElement("svg",{style:{transform:"scale(1.4, 1.4)"},viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},H.createElement("path",{d:"M9 7H7V9H9V7Z"}),H.createElement("path",{d:"M7 13V11H9V13H7Z"}),H.createElement("path",{d:"M7 15V17H9V15H7Z"}),H.createElement("path",{d:"M11 15V17H17V15H11Z"}),H.createElement("path",{d:"M17 13V11H11V13H17Z"}),H.createElement("path",{d:"M17 7V9H11V7H17Z"}))}function gSt(t){return H.createElement("svg",{style:{transform:"scale(0.8, 0.8)"},viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",...t},H.createElement("path",{d:"M10.2426 16.3137L6 12.071L7.41421 10.6568L10.2426 13.4853L15.8995 7.8284L17.3137 9.24262L10.2426 16.3137Z"}),H.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1 5C1 2.79086 2.79086 1 5 1H19C21.2091 1 23 2.79086 23 5V19C23 21.2091 21.2091 23 19 23H5C2.79086 23 1 21.2091 1 19V5ZM5 3H19C20.1046 3 21 3.89543 21 5V19C21 20.1046 20.1046 21 19 21H5C3.89543 21 3 20.1046 3 19V5C3 3.89543 3.89543 3 5 3Z"}))}function ySt(t){return H.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",...t},H.createElement("path",{d:"M11.4903 5.45801H17.4903L16.7788 7.32716H14.7788L11.2212 16.6729H13.2212L12.5097 18.5421H6.5097L7.22122 16.6729H9.22122L12.7788 7.32716H10.7788L11.4903 5.45801Z"}))}function bSt({level:t,...e}){return H.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",...e},H.createElement("text",{x:"12",y:"12",stroke:"currentColor",textAnchor:"middle",alignmentBaseline:"central",dominantBaseline:"middle"},"H",t))}function vSt(t){return H.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",...t},H.createElement("text",{x:"12",y:"12",stroke:"currentColor",textAnchor:"middle",alignmentBaseline:"central",dominantBaseline:"middle"},"1."))}function wSt(t){return H.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",...t},H.createElement("path",{d:"M14.8284 12L16.2426 13.4142L19.071 10.5858C20.6331 9.02365 20.6331 6.49099 19.071 4.9289C17.509 3.3668 14.9763 3.3668 13.4142 4.9289L10.5858 7.75732L12 9.17154L14.8284 6.34311C15.6095 5.56206 16.8758 5.56206 17.6568 6.34311C18.4379 7.12416 18.4379 8.39049 17.6568 9.17154L14.8284 12Z"}),H.createElement("path",{d:"M12 14.8285L13.4142 16.2427L10.5858 19.0711C9.02372 20.6332 6.49106 20.6332 4.92896 19.0711C3.36686 17.509 3.36686 14.9764 4.92896 13.4143L7.75739 10.5858L9.1716 12L6.34317 14.8285C5.56212 15.6095 5.56212 16.8758 6.34317 17.6569C7.12422 18.4379 8.39055 18.4379 9.1716 17.6569L12 14.8285Z"}),H.createElement("path",{d:"M14.8285 10.5857C15.219 10.1952 15.219 9.56199 14.8285 9.17147C14.4379 8.78094 13.8048 8.78094 13.4142 9.17147L9.1716 13.4141C8.78107 13.8046 8.78107 14.4378 9.1716 14.8283C9.56212 15.2188 10.1953 15.2188 10.5858 14.8283L14.8285 10.5857Z"}))}function _St(t){return H.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",...t},H.createElement("path",{d:"M10.2426 16.3137L6 12.071L7.41421 10.6568L10.2426 13.4853L15.8995 7.8284L17.3137 9.24262L10.2426 16.3137Z"}),H.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1 12C1 5.92487 5.92487 1 12 1C18.0751 1 23 5.92487 23 12C23 18.0751 18.0751 23 12 23C5.92487 23 1 18.0751 1 12ZM12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21Z"}))}function xSt(t){return H.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",style:{transform:"scale(1.1, 1.1)"},...t},H.createElement("path",{d:"M15.6396 7.02527H12.0181V5.02527H19.0181V12.0253H17.0181V8.47528L12.1042 13.3892L10.6899 11.975L15.6396 7.02527Z"}),H.createElement("path",{d:"M10.9819 6.97473H4.98193V18.9747H16.9819V12.9747H14.9819V16.9747H6.98193V8.97473H10.9819V6.97473Z"}))}function kSt(t){return H.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",...t},H.createElement("path",{d:"M16.34 9.32a1 1 0 10-1.36-1.46l-2.93 2.73-2.73-2.93a1 1 0 00-1.46 1.36l2.73 2.93-2.93 2.73a1 1 0 101.36 1.46l2.93-2.73 2.73 2.93a1 1 0 101.46-1.36l-2.73-2.93 2.93-2.73z"}),H.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1 12a11 11 0 1122 0 11 11 0 01-22 0zm11 9a9 9 0 110-18 9 9 0 010 18z"}))}function yd({className:t="",children:e}){return H.createElement("div",{className:`bangle-menu-group  ${t}`},e)}function n9({getIsTop:t=()=>!0}){const e=qn(),n=is.queryLinkAttrs()(e.state),r=n&&n.href||"";return H.createElement($St,{key:r,originalHref:r,view:e,getIsTop:t})}function $St({getIsTop:t,view:e,originalHref:n=""}){const[r,o]=k.useState(n),i=k.useRef(null),s=()=>{is.updateLink(r)(e.state,e.dispatch),e.focus()};return H.createElement("span",{className:"bangle-link-menu"},H.createElement("input",{value:r,ref:i,onKeyDown:a=>{if(a.key==="Enter"){a.preventDefault(),s(),e.focus();return}const l=t();if(l&&a.key==="ArrowDown"){a.preventDefault(),e.focus();return}if(!l&&a.key==="ArrowUp"){a.preventDefault(),e.focus();return}if(a.key==="Escape"){a.preventDefault(),e.focus();return}},onChange:a=>{o(a.target.value),a.preventDefault()}}),H.createElement(yd,null,H.createElement(lo,{hint:"Visit",onMouseDown:a=>{a.preventDefault(),window.open(r,"_blank")}},H.createElement(xSt,null))),r===n?H.createElement(lo,{hint:"Clear",onMouseDown:a=>{a.preventDefault(),is.updateLink()(e.state,e.dispatch),e.focus()}},H.createElement(kSt,null)):H.createElement(lo,{hint:"Save",onMouseDown:a=>{a.preventDefault(),s(),e.focus()}},H.createElement(_St,null)))}function bh({className:t="",children:e,...n}){return H.createElement("div",{className:`bangle-menu ${t}`,...n},e)}const{defaultKeys:SSt,queryIsOrderedListActive:ESt,toggleOrderedList:CSt}=Dd,{defaultKeys:TSt,queryIsItalicActive:ASt,toggleItalic:kP}=_0,{defaultKeys:NSt,queryIsBoldActive:RSt,toggleBold:$P}=y0,{defaultKeys:PSt,queryIsCodeActive:OSt,toggleCode:SP}=v0,{defaultKeys:ISt,queryIsHeadingActive:DSt,toggleHeading:EP}=Ao,{createLink:CP,queryIsLinkActive:MSt}=is,{defaultKeys:r9,queryIsBulletListActive:LSt,queryIsTodoListActive:o9,toggleBulletList:FSt,toggleTodoList:BSt}=Id;function i9({hint:t=`Bold
`+NSt.toggleBold,hintPos:e="top",children:n=H.createElement(pSt,null),...r}){const o=qn(),i=k.useCallback(s=>{s.preventDefault(),$P()(o.state,o.dispatch,o)&&o.dispatch&&o.focus()},[o]);return H.createElement(lo,{...r,hintPos:e,onMouseDown:i,hint:t,isActive:RSt()(o.state),isDisabled:!o.editable||!$P()(o.state)},n)}function s9({hint:t=`Italic
`+TSt.toggleItalic,hintPos:e="top",children:n=H.createElement(ySt,null),...r}){const o=qn(),i=k.useCallback(s=>{s.preventDefault(),kP()(o.state,o.dispatch,o)&&o.dispatch&&o.focus()},[o]);return H.createElement(lo,{...r,hintPos:e,onMouseDown:i,hint:t,isActive:ASt()(o.state),isDisabled:!o.editable||!kP()(o.state)},n)}function a9({hint:t=`Code
`+PSt.toggleCode,hintPos:e="top",children:n=H.createElement(hSt,null),...r}){const o=qn(),i=k.useCallback(s=>{s.preventDefault(),SP()(o.state,o.dispatch,o)&&o.dispatch&&o.focus()},[o]);return H.createElement(lo,{...r,hintPos:e,onMouseDown:i,hint:t,isActive:OSt()(o.state),isDisabled:!o.editable||!SP()(o.state)},n)}function l9({hint:t=`BulletList
`+r9.toggle,hintPos:e="top",children:n=H.createElement(mSt,null),...r}){const o=qn(),i=k.useCallback(s=>{s.preventDefault(),FSt()(o.state,o.dispatch,o)&&o.dispatch&&o.focus()},[o]);return H.createElement(lo,{...r,hintPos:e,onMouseDown:i,hint:t,isDisabled:!o.editable,isActive:LSt()(o.state)&&!o9()(o.state)},n)}function jSt({hint:t=`OrderedList
`+SSt.toggle,hintPos:e="top",children:n=H.createElement(vSt,null),...r}){const o=qn(),i=k.useCallback(s=>{s.preventDefault(),CSt()(o.state,o.dispatch,o)&&o.dispatch&&o.focus()},[o]);return H.createElement(lo,{...r,hintPos:e,onMouseDown:i,hint:t,isDisabled:!o.editable,isActive:ESt()(o.state)},n)}function c9({hint:t=`TodoList
`+r9.toggleTodo,hintPos:e="top",children:n=H.createElement(gSt,null),...r}){const o=qn(),i=k.useCallback(s=>{s.preventDefault(),BSt()(o.state,o.dispatch,o)&&o.dispatch&&o.focus()},[o]);return H.createElement(lo,{...r,hintPos:e,onMouseDown:i,hint:t,isDisabled:!o.editable,isActive:o9()(o.state)},n)}function vh({level:t,hint:e=`Heading${t}
`+ISt["toH"+t],hintPos:n="top",children:r=H.createElement(bSt,{level:t}),...o}){const i=qn(),s=k.useCallback(a=>{a.preventDefault(),EP(t)(i.state,i.dispatch,i)&&i.dispatch&&i.focus()},[i,t]);return H.createElement(lo,{...o,hintPos:n,onMouseDown:s,hint:e,isActive:DSt(t)(i.state),isDisabled:!i.editable||!EP(t)(i.state)},r)}vh.propTypes={level:yt.number.isRequired};function mC({hint:t=`Link
`+hC.toggleLink,hintPos:e="top",children:n=H.createElement(wSt,null),menuKey:r}){const o=qn(),i=k.useCallback(s=>{s.preventDefault(),mt(l=>CP("")(l),(l,c,u)=>(c&&(yb(r)(u.state,u.dispatch,u),no(u,yh(r))),!0))(o.state,o.dispatch,o)&&o.dispatch&&o.focus()},[o,r]);return H.createElement(lo,{onMouseDown:i,hint:t,hintPos:e,isActive:MSt()(o.state),isDisabled:!o.editable||!CP("")(o.state)},n)}mC.propTypes={menuKey:yt.instanceOf(vt).isRequired};function gC({menuKey:t,renderMenuType:e=({type:n,menuKey:r,editorState:o})=>n==="defaultMenu"?H.createElement(bh,null,H.createElement(yd,null,Mi(o,"bold")&&H.createElement(i9,null),Mi(o,"italic")&&H.createElement(s9,null),Mi(o,"code")&&H.createElement(a9,null),Mi(o,"link")&&H.createElement(mC,{menuKey:r})),H.createElement(yd,null,Mi(o,"heading")&&H.createElement(vh,{level:2}),Mi(o,"heading")&&H.createElement(vh,{level:3}),Mi(o,"bulletList")&&H.createElement(l9,null),Mi(o,"bulletList")&&H.createElement(c9,null))):n==="linkSubMenu"?H.createElement(bh,null,H.createElement(n9,null)):null}){const n=gd(t),r=qn(),o=e({type:n.type,menuKey:t,editorState:r.state});return o?vl.createPortal(o,n.tooltipContentDOM):null}gC.propTypes={menuKey:yt.instanceOf(vt).isRequired,renderMenuType:yt.func};yt.func.isRequired,yt.instanceOf(VM);const zSt=qSt;function qSt(){return en({"Ctrl-Shift-5":t_("medium"),"Ctrl-Shift-6":t_("utc"),"Ctrl-Shift-4":t_("short")})}function t_(t){return function(e,n){let{$from:r}=e.selection,o=r.index();if(!r.parent.canReplaceWith(o,o,e.schema.nodes.text))return!1;if(n){let i;t==="medium"&&(i=""+new Intl.DateTimeFormat("default",{dateStyle:"medium",timeStyle:"medium",hour12:!1}).format(new Date().getTime())),t==="utc"&&(i=""+new Date().toISOString()),t==="short"&&(i=""+new Intl.DateTimeFormat("default",{dateStyle:"medium",hour12:!1}).format(new Date().getTime())),n(e.tr.replaceSelectionWith(e.schema.text(i)))}return!0}}var WSt=Object.freeze({__proto__:null,plugins:zSt});const USt=HSt,VSt="trailing_node_addon";function HSt({node:t="paragraph",notAfter:e=["paragraph"]}={}){const n=new vt(VSt);return({schema:r})=>{const o=Object.entries(r.nodes).map(([,s])=>s).filter(s=>e.includes(s.name)),i=new WeakMap;return[new ht({key:n,view:()=>({update:s=>{const{state:a}=s,{incorrectNodeAtEnd:l}=n.getState(a);if(!l||i.has(s.state))return;const{doc:c,schema:u,tr:d}=s.state,f=u.nodes[t];Lt(f,`Node ${t} not found in schema`);const p=d.insert(c.content.size,f.create());i.set(s.state,!0),s.dispatch(p)}}),state:{init:(s,a)=>{const l=a.tr.doc.lastChild;return{incorrectNodeAtEnd:l?!o.includes(l.type):!1}},apply:(s,a)=>{if(!s.docChanged)return a;const l=s.doc.lastChild;return{incorrectNodeAtEnd:l?!o.includes(l.type):!1}}}})]}}var KSt=Object.freeze({__proto__:null,plugins:USt});const u9=new WeakMap,TP=new WeakMap;var AP=0;const GSt=typeof window!="undefined"&&window.requestAnimationFrame?window.requestAnimationFrame:function(t){var e=new Date().getTime(),n=Math.max(0,16-(e-AP)),r=window.setTimeout(function(){t(e+n)},n);return AP=e+n,r},ZSt=typeof window!="undefined"&&window.cancelAnimationFrame?window.cancelAnimationFrame:function(t){clearTimeout(t)};function YSt({pluginKey:t,intersectionObserverOpts:e}){return new ht({key:t,state:{init(n,r){return{minStartPosition:0,maxStartPosition:r.doc.content.size}},apply(n,r,o,i){const s=n.getMeta(t);if(s){let{minStartPosition:a,maxStartPosition:l}=s;return a=Math.max(0,s.minStartPosition),l=Math.min(i.doc.content.size,s.maxStartPosition),a===r.minStartPosition&&l===r.maxStartPosition?r:{minStartPosition:Math.max(0,s.minStartPosition),maxStartPosition:Math.min(i.doc.content.size,s.maxStartPosition)}}return r}},view(n){if(typeof window=="undefined")return{};let r=new Set,o;const i=()=>{let u={minStartPosition:n.state.doc.content.size,maxStartPosition:0},d=0;r.forEach(p=>{const h=u9.get(p),y=TP.get(p);typeof y=="number"&&y>0&&(d++,typeof h=="number"&&(h<u.minStartPosition&&(u.minStartPosition=h),h>u.maxStartPosition&&(u.maxStartPosition=h)))});const f=o&&o.maxStartPosition===u.maxStartPosition&&o.minStartPosition===u.minStartPosition;d>0&&!f&&(n.dispatch(n.state.tr.setMeta(t,u)),o=u)},s=(u,d)=>{n.isDestroyed||(u.forEach(f=>{TP.set(f.target,f.intersectionRatio)}),i())};let a=XSt()?new IntersectionObserver(s,e):void 0,l=()=>{const u=JSt(n);r.forEach(d=>{u.has(d)||a==null||a.unobserve(d)}),u.forEach(d=>{r.has(d)||a==null||a.observe(d)}),r=u,i()},c=null;return{destroy(){c!==null&&cancelAnimationFrame(c),a==null||a.disconnect(),r.clear()},update(u,d){const{state:f}=u;d!==f&&(c!==null&&ZSt(c),c=GSt(l))}}}})}function JSt(t){const e=t.docView;let n=new Set;for(let r=0,o=0;r<e.children.length;r++){let i=e.children[r];for(;!i.border&&i.children.length;)i=i.children[0];const s=i.nodeDOM;s instanceof Element&&(u9.set(s,o),n.add(s)),o=o+i.size}return n}function XSt(){return typeof window!="undefined"&&"IntersectionObserver"in window}const QSt="@bangle.io/core-editor";function eEt(){const t=new vt(QSt+":active_node");return new ht({key:t,state:{init:(e,n)=>NP(n),apply:(e,n,r,o)=>e.selectionSet?NP(o):n},props:{decorations(e){return t.getState(e)}}})}function NP(t){const e=t.selection,n=e.$from,r=e.empty?[pr.node(n.before(),n.after(),{class:"B-editor-common_selected-node"})]:[];return Xt.create(t.doc,r)}class d9{constructor(e,n,r){this.step=e,this.inverted=n,this.origin=r}}function tEt(t,e,n){for(let o=t.length-1;o>=0;o--)n.step(t[o].inverted);for(let o=0;o<e.length;o++)n.step(e[o]);let r=[];for(let o=0,i=t.length;o<t.length;o++){let s=t[o].step.map(n.mapping.slice(i));i--,s&&!n.maybeStep(s).failed&&(n.mapping.setMirror(i,n.steps.length-1),r.push(new d9(s,s.invert(n.docs[n.docs.length-1]),t[o].origin)))}return r}class Sy{constructor(e,n){this.version=e,this.unconfirmed=n}}function nEt(t){let e=[];for(let n=0;n<t.steps.length;n++)e.push(new d9(t.steps[n],t.steps[n].invert(t.docs[n]),t));return e}const As=new vt("collab");function rEt(t={}){let e={version:t.version||0,clientID:t.clientID==null?Math.floor(Math.random()*4294967295):t.clientID};return new ht({key:As,state:{init:()=>new Sy(e.version,[]),apply(n,r){let o=n.getMeta(As);return o||(n.docChanged?new Sy(r.version,r.unconfirmed.concat(nEt(n))):r)}},config:e,historyPreserveItems:!0})}function oEt(t,e,n,r={}){let o=As.getState(t),i=o.version+e.length,s=As.get(t).spec.config.clientID,a=0;for(;a<n.length&&n[a]==s;)++a;let l=o.unconfirmed.slice(a);if(e=a?e.slice(a):e,!e.length)return t.tr.setMeta(As,new Sy(i,l));let c=l.length,u=t.tr;if(c)l=tEt(l,e,u);else{for(let f=0;f<e.length;f++)u.step(e[f]);l=[]}let d=new Sy(i,l);return r&&r.mapSelectionBackward&&t.selection instanceof We&&(u.setSelection(We.between(u.doc.resolve(u.mapping.map(t.selection.anchor,-1)),u.doc.resolve(u.mapping.map(t.selection.head,-1)),-1)),u.updated&=-2),u.setMeta("rebased",c).setMeta("addToHistory",!1).setMeta(As,d)}function yC(t){let e=As.getState(t);return e.unconfirmed.length==0?null:{version:e.version,steps:e.unconfirmed.map(n=>n.step),clientID:As.get(t).spec.config.clientID,get origins(){return this._origins||(this._origins=e.unconfirmed.map(n=>n.origin))}}}function bd(t){return As.getState(t).version}const RP=15,iEt=5,Li=new vt("bangle.dev/collab-client"),Wu=new vt("bangle.dev/collabMonitorKey");var Ge;(function(t){t.Fatal="FATAL_EVENT",t.HardReset="HARD_RESET_EVENT",t.InitDoc="INIT_DOC_EVENT",t.InitError="INIT_ERROR_EVENT",t.Pull="PULL_EVENT",t.Push="PUSH_EVENT",t.PushPullError="PUSH_PULL_ERROR_EVENT",t.Ready="READY_EVENT",t.Restart="RESTART_EVENT"})(Ge||(Ge={}));var Fi;(function(t){t.InitialDocLoadFailed="INITIAL_DOC_LOAD_FAILED",t.StuckInInfiniteLoop="STUCK_IN_INFINITE_LOOP",t.IncorrectManager="INCORRECT_MANAGER",t.HistoryNotAvailable="HISTORY_NOT_AVAILABLE",t.DocumentNotFound="DOCUMENT_NOT_FOUND",t.UnexpectedState="UNEXPECTED_STATE"})(Fi||(Fi={}));var Ho;(function(t){t.Fatal="FATAL_STATE",t.Init="INIT_STATE",t.InitDoc="INIT_DOC_STATE",t.InitError="INIT_ERROR_STATE",t.Pull="PULL_STATE",t.Push="PUSH_STATE",t.PushPullError="PUSH_PULL_ERROR_STATE",t.Ready="READY_STATE"})(Ho||(Ho={}));function sEt(t,e,n){if(t.isDestroyed)return;const r=(e.steps?e.steps:[]).map(i=>jn.fromJSON(t.state.schema,i)),o=e.clientIDs?e.clientIDs:[];if(r.length===0){n("no steps",e,"version",bd(t.state));return}try{const i=oEt(t.state,r,o).setMeta("addToHistory",!1).setMeta("bangle.dev/isRemote",!0),s=t.state.apply(i);t.updateState(s)}catch(i){return console.error(i),!1}return n("after apply version",bd(t.state)),!0}function aEt(t,e,n,r){if(t.isDestroyed)return;const o=t.state.selection instanceof We?t.state.selection:void 0;let i=lEt(t.state,e,n);const s=r||o;if(s){let{from:a}=s;a>=i.doc.content.size?i=i.setSelection(Oe.atEnd(i.doc)):i=i.setSelection(Oe.near(i.doc.resolve(a)))}try{const a=t.state.apply(i.setMeta("bangle.dev/isRemote",!0));t.updateState(a)}catch(a){return console.error(a),!1}return!0}function lEt(t,e,n){const{schema:r,tr:o}=t,i=e instanceof Hr?e.content:(e.content||[]).map(a=>r.nodeFromJSON(a));if(!(Array.isArray(i)?i.length>0:!!i))return o;if(o.setMeta("addToHistory",!1),o.replaceWith(0,t.doc.nodeSize-2,i),o.setSelection(Oe.atStart(o.doc)),typeof n!==void 0){const a={version:n,unconfirmed:[]};o.setMeta("collab$",a)}return o}function Ga(t){var e;return(e=Li.getState(t))===null||e===void 0?void 0:e.collabState}function cEt(){return t=>{const e=Ga(t);if(e!=null&&e.isFatalState())return e.state}}function uEt(){return t=>Ga(t)}function f9(){return(t,e)=>{const n=Ga(t);return n==null||n.dispatchCollabPluginEvent({signal:new AbortController().signal,collabEvent:{type:Ge.HardReset},debugInfo:"hard-reset"})(t,e),!0}}function p9(t){return(e,n)=>{const r=Wu.getState(e);if(!r)return!1;if(r.serverVersion!==t){const o={serverVersion:t};return n==null||n(e.tr.setMeta(Wu,o)),!0}return!1}}function dEt(){return(t,e)=>{const n=Ga(t);return n!=null&&n.isReadyState()?(n==null||n.dispatch(new AbortController().signal,t,e,{type:Ge.Push},"onLocalChanges"),!0):!1}}function h9(){return t=>{var e;const n=(e=Wu.getState(t))===null||e===void 0?void 0:e.serverVersion;return typeof n=="number"&&bd(t)<n}}function fEt(){return(t,e)=>{const n=Ga(t);return n!=null&&n.isReadyState()?(n.dispatch(new AbortController().signal,t,e,{type:Ge.Pull},"collabMonitorKey(outdated-local-version)"),!0):!1}}function pEt(){return t=>{var e;const n=(e=Li.getState(t))===null||e===void 0?void 0:e.previousStates;return n?n.filter(r=>r.isTaggedError).length>iEt:!1}}class wl{constructor(){this.isEditingBlocked=!1,this.isTaggedError=!1,this.createdAt=Date.now()}dispatchCollabPluginEvent(e){return(n,r)=>e.signal.aborted?!1:(r==null||r(n.tr.setMeta(Li,e)),!0)}isFatalState(){return this instanceof _m}isReadyState(){return this instanceof bb}}class _m extends wl{constructor(e,n){super(),this.state=e,this.debugInfo=n,this.isEditingBlocked=!0,this.isTaggedError=!0,this.name=Ho.Fatal}dispatch(e,n,r,o,i){return this.dispatchCollabPluginEvent({signal:e,collabEvent:o,debugInfo:i})(n,r)}async runAction({signal:e,clientInfo:n,logger:r}){e.aborted||r(`Freezing document(${n.docName}) to prevent further edits due to FatalState`)}transition(e,n){return this}}class Ey extends wl{constructor(e={},n){super(),this.state=e,this.debugInfo=n,this.isEditingBlocked=!0,this.name=Ho.Init,this.clientCreatedAt=Date.now()}dispatch(e,n,r,o,i){return this.dispatchCollabPluginEvent({signal:e,collabEvent:o,debugInfo:i})(n,r)}async runAction({clientInfo:e,signal:n,view:r}){if(n.aborted)return;const{docName:o,userId:i,clientCom:s}=e,a="initStateAction:";if(typeof e.warmupTime=="number"&&(await KZ(e.warmupTime),n.aborted))return;const l=await s.getDocument({clientCreatedAt:this.clientCreatedAt,docName:o,userId:i});if(n.aborted)return;if(!l.ok){this.dispatch(n,r.state,r.dispatch,{type:Ge.InitError,payload:{failure:l.body}},a);return}const{doc:c,managerId:u,version:d}=l.body;this.dispatch(n,r.state,r.dispatch,{type:Ge.InitDoc,payload:{doc:r.state.schema.nodeFromJSON(c),version:d,managerId:u,selection:void 0}},a)}transition(e,n){const r=e.type;if(r===Ge.InitDoc){const{payload:o}=e;return new hEt({initialDoc:o.doc,initialSelection:o.selection,initialVersion:o.version,managerId:o.managerId,clientCreatedAt:this.clientCreatedAt},n)}else{if(r===Ge.InitError)return new xk({failure:e.payload.failure},n);console.debug("@bangle.dev/collab-client Ignoring event"+r);return}}}class hEt extends wl{constructor(e,n){super(),this.state=e,this.debugInfo=n,this.isEditingBlocked=!0,this.name=Ho.InitDoc}dispatch(e,n,r,o,i){return this.dispatchCollabPluginEvent({signal:e,collabEvent:o,debugInfo:i})(n,r)}async runAction({signal:e,view:n}){if(e.aborted)return;const{initialDoc:r,initialVersion:o,initialSelection:i}=this.state;e.aborted||(aEt(n,r,o,i)===!1?this.dispatch(e,n.state,n.dispatch,{type:Ge.Fatal,payload:{message:"Failed to load initial doc",errorCode:Fi.InitialDocLoadFailed}}):this.dispatch(e,n.state,n.dispatch,{type:Ge.Ready},`runAction:${this.name}`))}transition(e,n){const r=e.type;if(r===Ge.Ready)return new bb(this.state,n);if(r===Ge.Fatal)return new _m({message:e.payload.message,errorCode:e.payload.errorCode},n);console.debug("@bangle.dev/collab-client Ignoring event"+r)}}class xk extends wl{constructor(e,n){super(),this.state=e,this.debugInfo=n,this.isEditingBlocked=!0,this.isTaggedError=!0,this.name=Ho.InitError}dispatch(e,n,r,o,i){return this.dispatchCollabPluginEvent({signal:e,collabEvent:o,debugInfo:i})(n,r)}async runAction(e){await m9({...e,collabState:this})}transition(e,n){const r=e.type;if(r===Ge.Restart)return new Ey(void 0,n);if(r===Ge.Fatal)return new _m({message:e.payload.message,errorCode:e.payload.errorCode},n);console.debug("@bangle.dev/collab-client Ignoring event"+r)}}class bb extends wl{constructor(e,n){super(),this.state=e,this.debugInfo=n,this.name=Ho.Ready}dispatch(e,n,r,o,i){return this.dispatchCollabPluginEvent({signal:e,collabEvent:o,debugInfo:i})(n,r)}async runAction({signal:e,view:n}){if(e.aborted)return;const r=`runActions:${this.name}`;e.aborted||(h9()(n.state)?this.dispatch(e,n.state,n.dispatch,{type:Ge.Pull},r+"(outdated-local-version)"):yC(n.state)&&this.dispatch(e,n.state,n.dispatch,{type:Ge.Push},r+"(sendable-steps)"))}transition(e,n){const r=e.type;if(r===Ge.Push)return new mEt(this.state,n);if(r===Ge.Pull)return new bC(this.state,n);console.debug("@bangle.dev/collab-client Ignoring event"+r)}}class mEt extends wl{constructor(e,n){super(),this.state=e,this.debugInfo=n,this.name=Ho.Push}dispatch(e,n,r,o,i){return this.dispatchCollabPluginEvent({signal:e,collabEvent:o,debugInfo:i})(n,r)}async runAction({clientInfo:e,signal:n,view:r}){if(n.aborted)return;const{docName:o,userId:i,clientCom:s}=e,a="pushStateAction:",l=yC(r.state);if(!l){this.dispatch(n,r.state,r.dispatch,{type:Ge.Ready},a+"(no steps):");return}const{managerId:c}=this.state,u=await s.pushEvents({clientCreatedAt:this.state.clientCreatedAt,version:bd(r.state),steps:l?l.steps.map(d=>d.toJSON()):[],clientID:(l?l.clientID:0)+"",docName:o,userId:i,managerId:c});n.aborted||(u.ok?this.dispatch(n,r.state,r.dispatch,{type:Ge.Pull},a):this.dispatch(n,r.state,r.dispatch,{type:Ge.PushPullError,payload:{failure:u.body}},a))}transition(e,n){const r=e.type;if(r===Ge.Ready)return new bb(this.state,n);if(r===Ge.Pull)return new bC(this.state,n);if(r===Ge.PushPullError)return new wu({failure:e.payload.failure,initDocState:this.state},n);console.debug("@bangle.dev/collab-client Ignoring event"+r)}}class bC extends wl{constructor(e,n){super(),this.state=e,this.debugInfo=n,this.name=Ho.Pull}dispatch(e,n,r,o,i){return this.dispatchCollabPluginEvent({signal:e,collabEvent:o,debugInfo:i})(n,r)}async runAction({clientInfo:e,logger:n,signal:r,view:o}){if(r.aborted)return;const{docName:i,userId:s,clientCom:a}=e,{managerId:l}=this.state,c=await a.pullEvents({clientCreatedAt:this.state.clientCreatedAt,version:bd(o.state),docName:i,userId:s,managerId:l});if(r.aborted)return;const u="pullStateAction:";c.ok?sEt(o,c.body,n)===!1?this.dispatch(r,o.state,o.dispatch,{type:Ge.PushPullError,payload:{failure:Jt.ApplyFailed}},u+"(local-apply-failed)"):(p9(c.body.version)(o.state,o.dispatch),this.dispatch(r,o.state,o.dispatch,{type:Ge.Ready},u)):this.dispatch(r,o.state,o.dispatch,{type:Ge.PushPullError,payload:{failure:c.body}},u)}transition(e,n){const r=e.type;return r===Ge.Ready?new bb(this.state,n):r===Ge.PushPullError?new wu({failure:e.payload.failure,initDocState:this.state},n):void 0}}class wu extends wl{constructor(e,n){super(),this.state=e,this.debugInfo=n,this.isTaggedError=!0,this.name=Ho.PushPullError}dispatch(e,n,r,o,i){return this.dispatchCollabPluginEvent({signal:e,collabEvent:o,debugInfo:i})(n,r)}async runAction(e){await m9({...e,collabState:this})}transition(e,n){const r=e.type;if(r===Ge.Restart)return new Ey(void 0,n);if(r===Ge.Pull)return new bC(this.state.initDocState,n);if(r===Ge.Fatal)return new _m({message:e.payload.message,errorCode:e.payload.errorCode},n);console.debug("@bangle.dev/collab-client Ignoring event"+r)}}const m9=async({clientInfo:t,view:e,logger:n,signal:r,collabState:o})=>{if(r.aborted)return;const i=o.state.failure;n("Handling failure=",i,"currentState=",o.name);const s=`pushPullErrorStateAction(${i}):`;if(pEt()(e.state)){o.dispatch(r,e.state,e.dispatch,{type:Ge.Fatal,payload:{message:"Stuck in error loop, last failure: "+i,errorCode:Fi.StuckInInfiniteLoop}},s);return}switch(i){case Jt.InvalidVersion:{Qm(()=>{r.aborted||o.dispatch(r,e.state,e.dispatch,{type:Ge.Restart},s)},r,t.cooldownTime);return}case Jt.IncorrectManager:{o.dispatch(r,e.state,e.dispatch,{type:Ge.Fatal,payload:{message:"Incorrect manager",errorCode:Fi.IncorrectManager}},s);return}case Jt.HistoryNotAvailable:{o.dispatch(r,e.state,e.dispatch,{type:Ge.Fatal,payload:{message:"History/Server not available",errorCode:Fi.HistoryNotAvailable}},s);return}case Jt.DocumentNotFound:{n("Document not found"),o.dispatch(r,e.state,e.dispatch,{type:Ge.Fatal,payload:{message:"Document not found",errorCode:Fi.DocumentNotFound}},s);return}case Jt.OutdatedVersion:{o instanceof wu?o.dispatch(r,e.state,e.dispatch,{type:Ge.Pull},s):o.dispatch(r,e.state,e.dispatch,{type:Ge.Fatal,payload:{message:`Cannot handle ${i} in state=${o.name}`,errorCode:Fi.UnexpectedState}},s);return}case Jt.ManagerDestroyed:{Qm(()=>{r.aborted||(o instanceof wu?o.dispatch(r,e.state,e.dispatch,{type:Ge.Pull},s):o instanceof xk&&o.dispatch(r,e.state,e.dispatch,{type:Ge.Restart},s))},r,t.cooldownTime);return}case Jt.ApplyFailed:{o instanceof wu?Qm(()=>{r.aborted||o.dispatch(r,e.state,e.dispatch,{type:Ge.Pull},s)},r,t.cooldownTime):o.dispatch(r,e.state,e.dispatch,{type:Ge.Fatal,payload:{message:`Cannot handle ${i} in state=${o.name}`,errorCode:Fi.UnexpectedState}},s);return}case Jt.ManagerUnresponsive:{Qm(()=>{r.aborted||(o instanceof wu?o.dispatch(r,e.state,e.dispatch,{type:Ge.Pull},s):o instanceof xk&&o.dispatch(r,e.state,e.dispatch,{type:Ge.Restart},s))},r,t.cooldownTime);return}default:throw new Error(`Unknown failure ${i}`)}},gEt=!0;let yEt=!Wh&&gEt?console.debug.bind(console,"collab-client:"):()=>{};const PP={serverVersion:void 0},bEt=500,vEt=1e3;function wEt({requestTimeout:t,clientID:e,collabMessageBus:n,docName:r,managerId:o,cooldownTime:i,userId:s,warmupTime:a}){const l=c=>(...u)=>{var d;return yEt(`${e}:version=${bd(c)}:debugInfo=${(d=Li.getState(c))===null||d===void 0?void 0:d.collabState.debugInfo}`,...u)};return[new ht({key:Li,filterTransaction(c,u){var d;return c.getMeta(Li)||c.getMeta(Wu)||c.getMeta("bangle.dev/isRemote")?!0:c.docChanged&&((d=Ga(u))===null||d===void 0?void 0:d.isEditingBlocked)===!0?(console.debug("@bangle.dev/collab-client blocking transaction"),!1):!0},state:{init(){return{collabState:new Ey,previousStates:[],infiniteTransitionGuard:{counter:0,lastChecked:0}}},apply(c,u,d,f){const p=c.getMeta(Li);if(p===void 0||!p.collabEvent)return u;if(p.collabEvent.type===Ge.HardReset)return l(f)("apply state HARD RESET, newStateName=",Ho.Init,"oldStateName=",u.collabState.name),{collabState:new Ey(void 0,"(HardReset)"),previousStates:[],infiniteTransitionGuard:{counter:0,lastChecked:0}};if(u.infiniteTransitionGuard.counter++,u.infiniteTransitionGuard.counter%bEt===0){if(Date.now()-u.infiniteTransitionGuard.lastChecked<=vEt)return queueMicrotask(()=>{throw new Error("Stuck in infinite transitions. Last few states: "+u.previousStates.map(y=>y.name+(y.debugInfo?`:${y.debugInfo}`:"")).join(", ").slice(0,5))}),{collabState:new _m({message:"Infinite transitions",errorCode:Fi.StuckInInfiniteLoop},"(stuck in infinite transitions)"),previousStates:[u.collabState,...u.previousStates],infiniteTransitionGuard:{counter:0,lastChecked:0}};u.infiniteTransitionGuard.lastChecked=Date.now(),u.infiniteTransitionGuard.counter=0}const h=u.collabState.transition(p.collabEvent,p.debugInfo);if(!h)return u;if(h.name!==u.collabState.name){l(f)("apply state, newStateName=",h.name,`debugInfo=${h.debugInfo}`,"oldStateName=",u.collabState.name);let y=[u.collabState,...u.previousStates];return y.length>RP&&(y=y.slice(0,RP)),{...u,collabState:h,previousStates:y}}return l(f)(`applyState IGNORE EVENT ${p.collabEvent.type} due to self transition`,`debugInfo=${p.debugInfo}`),u}},view(c){let u=new AbortController,d=new AbortController,f=new Zq({clientId:e,managerId:o,docName:r,messageBus:n,signal:d.signal,requestTimeout:t,onNewVersion:({version:y})=>{p9(y)(c.state,c.dispatch)},onResetClient(){f9()(c.state,c.dispatch)}});const p=Li.getState(c.state),h={clientID:e,docName:r,cooldownTime:i,clientCom:f,managerId:o,userId:s,warmupTime:a};return p&&p.collabState.runAction({clientInfo:h,view:c,signal:u.signal,logger:l(c.state)}),{destroy(){u.abort(),d.abort()},update(y,m){var w;const x=Li.getState(y.state);(x==null?void 0:x.collabState)!==((w=Li.getState(m))===null||w===void 0?void 0:w.collabState)&&x&&(u.abort(),u=new AbortController,x.collabState.runAction({clientInfo:h,view:y,signal:u.signal,logger:l(y.state)}))}}}}),new ht({key:Wu,props:{attributes:c=>{var u;return{class:((u=Ga(c))===null||u===void 0?void 0:u.isEditingBlocked)?"bangle-collab-frozen":"bangle-collab-active"}}},state:{init:(c,u)=>PP,apply:(c,u,d,f)=>{var p;const h=c.getMeta(Wu);return h?(l(f)("collabMonitorKey received tr",h),{...u,...h}):((p=Ga(f))===null||p===void 0?void 0:p.name)===Ho.Init?PP:u}},view(c){const u=d=>{h9()(d.state)?fEt()(d.state,d.dispatch):yC(d.state)&&dEt()(d.state,d.dispatch)};return u(c),{update(d){u(d)}}}})]}const _Et=kEt,xEt={queryFatalError:cEt,hardResetClient:f9,queryCollabState:uEt};function kEt({requestTimeout:t,clientID:e="client-"+U$(),collabMessageBus:n,docName:r,managerId:o=KI,cooldownTime:i=100,warmupTime:s=0}){const a="user-"+e;return[rEt({clientID:e}),wEt({requestTimeout:t,clientID:e,collabMessageBus:n,docName:r,managerId:o,cooldownTime:i,userId:a,warmupTime:s})]}var OP=Object.freeze({__proto__:null,plugins:_Et,commands:xEt});function $Et({metadata:t}){return[OP.plugins({docName:t.wsPath,clientID:"client-"+t.editorId+"-"+U$(4),collabMessageBus:t.collabMessageBus,cooldownTime:550,requestTimeout:1e3,warmupTime:20}),new ht({key:new vt("collab state"),view(){let e=null;return{destroy(){e!=null&&clearTimeout(e)},update:n=>{const r=OP.commands.queryFatalError()(n.state);if(r){const{wsPath:o,nsmStore:i}=Rd(n.state);console.warn(r),Qwt(i.state,o)||(e=setTimeout(()=>{n.isDestroyed||i.dispatch(k6({wsPath:o,title:"Editor crashed!",description:`Please manually save your work and then try reloading the application. Error - ${r.message}`,severity:Be.ERROR,uid:o8()}))},300))}}}}})]}const SEt="collapsible_heading_deco";function EEt(){const t=new vt(SEt);return[new ht({key:t,state:{init(e,n){return DP(n)},apply(e,n,r,o){return!e.docChanged&&!kM(u0,o,r)?n:DP(o)}},props:{decorations(e){return t.getState(e)}}})]}function IP(t,e){const n=u0.getState(e);return n?t.filter(o=>o.pos>=n.minStartPosition&&o.pos<=n.maxStartPosition):t}function DP(t){const e=new Set(IP(Ao.listCollapsedHeading(t),t).map(i=>i.node)),n=IP(Ao.listCollapsibleHeading(t),t).filter(i=>i.node.content.size>0).map(i=>({...i,collapsed:e.has(i.node)}));function r(i,s){let a=document.createElementNS("http://www.w3.org/2000/svg",i);for(var l in s)a.setAttributeNS(null,l,s[l]);return a}const o=n.map(i=>pr.widget(i.pos+1,s=>{let a=document.createElement("span");a.className="B-editor-common_deco-collapse-positioner";const l=document.createElement("span");l.className="B-editor-common_deco-collapse",a.appendChild(l);const c=r("svg",{viewBox:"0 0 24 24"});return c.addEventListener("click",function(u){const d=s.state.tr;s.dispatch(d.setSelection(Oe.near(d.doc.resolve(i.pos)))),Ao.toggleHeadingCollapse()(s.state)&&(Ao.toggleHeadingCollapse()(s.state,s.dispatch,s),u.preventDefault())}),l.appendChild(c),c.setAttribute("class","B-editor-common_deco-collapse-child"),c.appendChild(r("path",{d:i.collapsed?"M10.5858 6.34317L12 4.92896L19.0711 12L12 19.0711L10.5858 17.6569L16.2427 12L10.5858 6.34317Z":"M6.34317 7.75732L4.92896 9.17154L12 16.2426L19.0711 9.17157L17.6569 7.75735L12 13.4142L6.34317 7.75732Z"})),a},{key:i.pos+(i.collapsed?"true":"false")}));return Xt.create(t.doc,o)}const CEt=function(){return new ht({props:{editable(){return J1().editingAllowed}}})};function TEt(){return Owt.plugins({query:void 0,key:OZ,className:"B-search-notes_bangle-search-match"})}const AEt=function(){return new ht({props:{handleDOMEvents:{focus:(e,n)=>{const{editorId:r}=Rd(e.state);return r!=null&&Gwt(r),!1}}}})},NEt=t=>t.dom.parentElement,{queryIsSelectionAroundLink:REt,queryIsLinkActive:PEt}=is,OEt=()=>{Fee();const t=[y0.plugins(),v0.plugins(),_0.plugins(),wS.plugins(),is.plugins(),_S.plugins(),Vh.plugins(),g0.plugins(),Id.plugins(),aS.plugins(),lS.plugins(),Ao.plugins({keybindings:{...Ao.defaultKeys,toggleCollapse:"Shift-Meta-1",toH4:void 0,toH5:void 0,toH6:void 0}}),fS.plugins(),Zh.plugins(),Dd.plugins(),CY.plugins(),hQ()];return[typeof window!="undefined"&&YSt({pluginKey:u0,intersectionObserverOpts:{root:window.document.body,rootMargin:"0px",threshold:0}}),t9.plugins({key:xM,tooltipRenderOpts:{getScrollContainer:NEt},calculateType:(e,n)=>e.selection instanceof Me?null:REt()(e)||PEt()(e)?"linkSubMenu":e.selection.empty?null:"defaultMenu"}),...t,KSt.plugins(),WSt.plugins(),new ht({props:{scrollMargin:Math.floor(window.innerHeight/4)}}),eEt(),CEt,AEt,IEt(),$Et,EEt(),TEt()]};function IEt(){return en({Tab:t=>!0,"Meta-s":t=>!0})}function DEt(){const t=k.useCallback(({type:e,menuKey:n})=>e==="defaultMenu"?_.jsxs(bh,{children:[_.jsxs(yd,{children:[_.jsx(i9,{}),_.jsx(s9,{}),_.jsx(a9,{}),_.jsx(mC,{menuKey:n})]}),_.jsxs(yd,{children:[_.jsx(vh,{level:2}),_.jsx(vh,{level:3}),_.jsx(l9,{}),_.jsx(c9,{}),_.jsx(jSt,{})]})]}):e==="linkSubMenu"?_.jsx(bh,{children:_.jsx(n9,{})}):null,[]);return _.jsx(gC,{menuKey:xM,renderMenuType:t})}const MEt="@bangle.io/core-editor",LEt=zn.create({name:MEt,editor:{specs:gQ,plugins:[OEt],ReactComponent:DEt,markdownItPlugins:YY},application:{slices:[],operations:[{name:"operation::@bangle.io/core-editor:collapse-heading",title:"Editor: Collapse heading",hidden:!0},{name:"operation::@bangle.io/core-editor:uncollapse-all-heading",title:"Editor: Uncollapse all headings",hidden:!0},{name:"operation::@bangle.io/core-editor:move-list-up",title:"Editor: Move list up",hidden:!0},{name:"operation::@bangle.io/core-editor:move-list-down",title:"Editor: Move list down",hidden:!0}],operationHandler(){const{toggleHeadingCollapse:t,uncollapseAllHeadings:e}=Ao,{moveListItemUp:n,moveListItemDown:r}=Zh;return{handle(o){switch(o.name){case"operation::@bangle.io/core-editor:collapse-heading":return lg(Es,t()),!0;case"operation::@bangle.io/core-editor:uncollapse-all-heading":return lg(Es,e()),!0;case"operation::@bangle.io/core-editor:move-list-up":return lg(Es,n()),!0;case"operation::@bangle.io/core-editor:move-list-down":return lg(Es,r()),!0;default:return}}}}}}),FEt="@bangle.io/core-extension",MP="operation::@bangle.io/core-extension:RENAME_ACTIVE_NOTE",LP="operation::@bangle.io/core-extension:NOTE_TOGGLE_SIDEBAR",FP="operation::@bangle.io/core-extension:TOGGLE_UI_COLOR_SCHEME",BP="operation::@bangle.io/core-extension:DOWNLOAD_WORKSPACE_COPY",jP="operation::@bangle.io/core-extension:NEW_WORKSPACE_FROM_BACKUP",zP="operation::@bangle.io/core-extension:DELETE_ACTIVE_NOTE";function vb(t,e,n){let[r,o]=k.useState(t||e),i=k.useRef(t!==void 0),s=t!==void 0;k.useEffect(()=>{let c=i.current;c!==s&&console.warn(`WARN: A component changed from ${c?"controlled":"uncontrolled"} to ${s?"controlled":"uncontrolled"}.`),i.current=s},[s]);let a=s?t:r,l=k.useCallback((c,...u)=>{let d=(f,...p)=>{n&&(Object.is(a,f)||n(f,...p)),s||(a=f)};typeof c=="function"?(console.warn("We can not support a function callback. See Github Issues for details https://github.com/adobe/react-spectrum/issues/2320"),o((p,...h)=>{let y=c(s?a:p,...h);return d(y,...u),s?p:y})):(s||o(c),d(c,...u))},[s,a,n]);return[a,l]}const Cy={prefix:String(Math.round(Math.random()*1e10)),current:0},g9=H.createContext(Cy),BEt=H.createContext(!1);let jEt=!!(typeof window!="undefined"&&window.document&&window.document.createElement),n_=new WeakMap;function zEt(t=!1){let e=k.useContext(g9),n=k.useRef(null);if(n.current===null&&!t){var r,o;let i=(r=H.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||r===void 0||(o=r.ReactCurrentOwner)===null||o===void 0?void 0:o.current;if(i){let s=n_.get(i);s==null?n_.set(i,{id:e.current,state:i.memoizedState}):i.memoizedState!==s.state&&(e.current=s.id,n_.delete(i))}n.current=++e.current}return n.current}function qEt(t){let e=k.useContext(g9);e===Cy&&!jEt&&console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server.");let n=zEt(!!t),r=`react-aria${e.prefix}`;return t||`${r}-${n}`}function WEt(t){let e=H.useId(),[n]=k.useState(vC()),r=n?"react-aria":`react-aria${Cy.prefix}`;return t||`${r}-${e}`}const UEt=typeof H.useId=="function"?WEt:qEt;function VEt(){return!1}function HEt(){return!0}function KEt(t){return()=>{}}function vC(){return typeof H.useSyncExternalStore=="function"?H.useSyncExternalStore(KEt,VEt,HEt):k.useContext(BEt)}function y9(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=y9(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function b9(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=y9(t))&&(r&&(r+=" "),r+=e);return r}const Ln=typeof document!="undefined"?H.useLayoutEffect:()=>{};function Eo(t){const e=k.useRef(null);return Ln(()=>{e.current=t},[t]),k.useCallback((...n)=>{const r=e.current;return r(...n)},[])}function GEt(t){let[e,n]=k.useState(t),r=k.useRef(null),o=Eo(()=>{let s=r.current.next();if(s.done){r.current=null;return}e===s.value?o():n(s.value)});Ln(()=>{r.current&&o()});let i=Eo(s=>{r.current=s(e),o()});return[e,i]}let Ty=new Map;function cl(t){let[e,n]=k.useState(t),r=k.useRef(null),o=UEt(e),i=k.useCallback(s=>{r.current=s},[]);return Ty.set(o,i),Ln(()=>{let s=o;return()=>{Ty.delete(s)}},[o]),k.useEffect(()=>{let s=r.current;s&&(r.current=null,n(s))}),o}function ZEt(t,e){if(t===e)return t;let n=Ty.get(t);if(n)return n(e),e;let r=Ty.get(e);return r?(r(t),t):e}function wh(t=[]){let e=cl(),[n,r]=GEt(e),o=k.useCallback(()=>{r(function*(){yield e,yield document.getElementById(e)?e:void 0})},[e,r]);return Ln(o,[e,o,...t]),n}function _h(...t){return(...e)=>{for(let n of t)typeof n=="function"&&n(...e)}}function Sn(...t){let e={...t[0]};for(let n=1;n<t.length;n++){let r=t[n];for(let o in r){let i=e[o],s=r[o];typeof i=="function"&&typeof s=="function"&&o[0]==="o"&&o[1]==="n"&&o.charCodeAt(2)>=65&&o.charCodeAt(2)<=90?e[o]=_h(i,s):(o==="className"||o==="UNSAFE_className")&&typeof i=="string"&&typeof s=="string"?e[o]=b9(i,s):o==="id"&&i&&s?e.id=ZEt(i,s):e[o]=s!==void 0?s:i}}return e}const YEt=new Set(["id"]),JEt=new Set(["aria-label","aria-labelledby","aria-describedby","aria-details"]),XEt=new Set(["href","target","rel","download","ping","referrerPolicy"]),QEt=/^(data-.*)$/;function Xd(t,e={}){let{labelable:n,isLink:r,propNames:o}=e,i={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(YEt.has(s)||n&&JEt.has(s)||r&&XEt.has(s)||o!=null&&o.has(s)||QEt.test(s))&&(i[s]=t[s]);return i}function Ns(t){if(eCt())t.focus({preventScroll:!0});else{let e=tCt(t);t.focus(),nCt(e)}}let _g=null;function eCt(){if(_g==null){_g=!1;try{var t=document.createElement("div");t.focus({get preventScroll(){return _g=!0,!0}})}catch(e){}}return _g}function tCt(t){for(var e=t.parentNode,n=[],r=document.scrollingElement||document.documentElement;e instanceof HTMLElement&&e!==r;)(e.offsetHeight<e.scrollHeight||e.offsetWidth<e.scrollWidth)&&n.push({element:e,scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}),e=e.parentNode;return r instanceof HTMLElement&&n.push({element:r,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft}),n}function nCt(t){for(let{element:e,scrollTop:n,scrollLeft:r}of t)e.scrollTop=n,e.scrollLeft=r}function wb(t){var e;return typeof window=="undefined"||window.navigator==null?!1:((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.brands.some(n=>t.test(n.brand)))||t.test(window.navigator.userAgent)}function wC(t){var e;return typeof window!="undefined"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function ul(){return wC(/^Mac/i)}function rCt(){return wC(/^iPhone/i)}function v9(){return wC(/^iPad/i)||ul()&&navigator.maxTouchPoints>1}function _b(){return rCt()||v9()}function n1(){return ul()||_b()}function w9(){return wb(/AppleWebKit/i)&&!oCt()}function oCt(){return wb(/Chrome/i)}function _9(){return wb(/Android/i)}function iCt(){return wb(/Firefox/i)}const sCt=k.createContext({isNative:!0,open:lCt});function _C(){return k.useContext(sCt)}function Cc(t,e,n=!0){var r,o;let{metaKey:i,ctrlKey:s,altKey:a,shiftKey:l}=e;iCt()&&(!((r=window.event)===null||r===void 0||(o=r.type)===null||o===void 0)&&o.startsWith("key"))&&t.target==="_blank"&&(ul()?i=!0:s=!0);let c=w9()&&ul()&&!v9()?new KeyboardEvent("keydown",{keyIdentifier:"Enter",metaKey:i,ctrlKey:s,altKey:a,shiftKey:l}):new MouseEvent("click",{metaKey:i,ctrlKey:s,altKey:a,shiftKey:l,bubbles:!0,cancelable:!0});Cc.isOpening=n,Ns(t),t.dispatchEvent(c),Cc.isOpening=!1}Cc.isOpening=!1;function aCt(t,e){if(t instanceof HTMLAnchorElement)e(t);else if(t.hasAttribute("data-href")){let n=document.createElement("a");n.href=t.getAttribute("data-href"),t.hasAttribute("data-target")&&(n.target=t.getAttribute("data-target")),t.hasAttribute("data-rel")&&(n.rel=t.getAttribute("data-rel")),t.hasAttribute("data-download")&&(n.download=t.getAttribute("data-download")),t.hasAttribute("data-ping")&&(n.ping=t.getAttribute("data-ping")),t.hasAttribute("data-referrer-policy")&&(n.referrerPolicy=t.getAttribute("data-referrer-policy")),t.appendChild(n),e(n),t.removeChild(n)}}function lCt(t,e){aCt(t,n=>Cc(n,e))}let uu=new Map,kk=new Set;function qP(){if(typeof window=="undefined")return;let t=n=>{let r=uu.get(n.target);r||(r=new Set,uu.set(n.target,r),n.target.addEventListener("transitioncancel",e)),r.add(n.propertyName)},e=n=>{let r=uu.get(n.target);if(r&&(r.delete(n.propertyName),r.size===0&&(n.target.removeEventListener("transitioncancel",e),uu.delete(n.target)),uu.size===0)){for(let o of kk)o();kk.clear()}};document.body.addEventListener("transitionrun",t),document.body.addEventListener("transitionend",e)}typeof document!="undefined"&&(document.readyState!=="loading"?qP():document.addEventListener("DOMContentLoaded",qP));function x9(t){requestAnimationFrame(()=>{uu.size===0?t():kk.add(t)})}function k9(){let t=k.useRef(new Map),e=k.useCallback((o,i,s,a)=>{let l=a!=null&&a.once?(...c)=>{t.current.delete(s),s(...c)}:s;t.current.set(s,{type:i,eventTarget:o,fn:l,options:a}),o.addEventListener(i,s,a)},[]),n=k.useCallback((o,i,s,a)=>{var l;let c=((l=t.current.get(s))===null||l===void 0?void 0:l.fn)||s;o.removeEventListener(i,c,a),t.current.delete(s)},[]),r=k.useCallback(()=>{t.current.forEach((o,i)=>{n(o.eventTarget,o.type,i,o.options)})},[n]);return k.useEffect(()=>r,[r]),{addGlobalListener:e,removeGlobalListener:n,removeAllGlobalListeners:r}}function Ay(t,e){let{id:n,"aria-label":r,"aria-labelledby":o}=t;return n=cl(n),o&&r?o=[...new Set([n,...o.trim().split(/\s+/)])].join(" "):o&&(o=o.trim().split(/\s+/).join(" ")),!r&&!o&&e&&(r=e),{id:n,"aria-label":r,"aria-labelledby":o}}function $9(t,e){Ln(()=>{if(t&&t.ref&&e)return t.ref.current=e.current,()=>{t.ref.current=null}})}function Ny(t){for(Ry(t)&&(t=t.parentElement);t&&!Ry(t);)t=t.parentElement;return t||document.scrollingElement||document.documentElement}function Ry(t){let e=window.getComputedStyle(t);return/(auto|scroll)/.test(e.overflow+e.overflowX+e.overflowY)}let cCt=0;const r_=new Map;function uCt(t){let[e,n]=k.useState(void 0);return Ln(()=>{if(!t)return;let r=r_.get(t);if(r)n(r.element.id);else{let o=`react-aria-description-${cCt++}`;n(o);let i=document.createElement("div");i.id=o,i.style.display="none",i.textContent=t,document.body.appendChild(i),r={refCount:0,element:i},r_.set(t,r)}return r.refCount++,()=>{--r.refCount===0&&(r.element.remove(),r_.delete(t))}},[t]),{"aria-describedby":t?e:void 0}}function dCt(t,e,n,r){let o=Eo(n),i=n==null;k.useEffect(()=>{if(i)return;let s=t.current;return s.addEventListener(e,o,r),()=>{s.removeEventListener(e,o,r)}},[t,e,r,i,o])}function S9(t,e){let n=WP(t,e,"left"),r=WP(t,e,"top"),o=e.offsetWidth,i=e.offsetHeight,s=t.scrollLeft,a=t.scrollTop,{borderTopWidth:l,borderLeftWidth:c}=getComputedStyle(t),u=t.scrollLeft+parseInt(c,10),d=t.scrollTop+parseInt(l,10),f=u+t.clientWidth,p=d+t.clientHeight;n<=s?s=n-parseInt(c,10):n+o>f&&(s+=n+o-f),r<=d?a=r-parseInt(l,10):r+i>p&&(a+=r+i-p),t.scrollLeft=s,t.scrollTop=a}function WP(t,e,n){const r=n==="left"?"offsetLeft":"offsetTop";let o=0;for(;e.offsetParent&&(o+=e[r],e.offsetParent!==t);){if(e.offsetParent.contains(t)){o-=t[r];break}e=e.offsetParent}return o}function UP(t,e){if(document.contains(t)){let s=document.scrollingElement||document.documentElement;if(window.getComputedStyle(s).overflow==="hidden"){let l=Ny(t);for(;t&&l&&t!==s&&l!==s;)S9(l,t),t=l,l=Ny(t)}else{var n;let{left:l,top:c}=t.getBoundingClientRect();t==null||(n=t.scrollIntoView)===null||n===void 0||n.call(t,{block:"nearest"});let{left:u,top:d}=t.getBoundingClientRect();if(Math.abs(l-u)>1||Math.abs(c-d)>1){var r,o,i;e==null||(r=e.containingElement)===null||r===void 0||(o=r.scrollIntoView)===null||o===void 0||o.call(r,{block:"center",inline:"center"}),(i=t.scrollIntoView)===null||i===void 0||i.call(t,{block:"nearest"})}}}}function $k(t){return t.mozInputSource===0&&t.isTrusted?!0:_9()&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function fCt(t){return!_9()&&t.width===0&&t.height===0||t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType==="mouse"}function pCt(t,e,n){let r=k.useRef(e),o=Eo(()=>{n&&n(r.current)});k.useEffect(()=>{var i;let s=t==null||(i=t.current)===null||i===void 0?void 0:i.form;return s==null||s.addEventListener("reset",o),()=>{s==null||s.removeEventListener("reset",o)}},[t,o])}function hCt(t,e){return e.get?e.get.call(t):e.value}function E9(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function mCt(t,e){var n=E9(t,e,"get");return hCt(t,n)}function gCt(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function yCt(t,e,n){gCt(t,e),e.set(t,n)}function bCt(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}function VP(t,e,n){var r=E9(t,e,"set");return bCt(t,r,n),n}let _u="default",Sk="",r1=new WeakMap;function HP(t){_b()?(_u==="default"&&(Sk=document.documentElement.style.webkitUserSelect,document.documentElement.style.webkitUserSelect="none"),_u="disabled"):(t instanceof HTMLElement||t instanceof SVGElement)&&(r1.set(t,t.style.userSelect),t.style.userSelect="none")}function xg(t){if(_b()){if(_u!=="disabled")return;_u="restoring",setTimeout(()=>{x9(()=>{_u==="restoring"&&(document.documentElement.style.webkitUserSelect==="none"&&(document.documentElement.style.webkitUserSelect=Sk||""),Sk="",_u="default")})},300)}else if((t instanceof HTMLElement||t instanceof SVGElement)&&t&&r1.has(t)){let e=r1.get(t);t.style.userSelect==="none"&&(t.style.userSelect=e),t.getAttribute("style")===""&&t.removeAttribute("style"),r1.delete(t)}}const C9=H.createContext(null);C9.displayName="PressResponderContext";function vCt(t){let e=k.useContext(C9);if(e){let{register:n,...r}=e;t=Sn(r,t),n()}return $9(e,t.ref),t}var kg=new WeakMap;class $g{continuePropagation(){VP(this,kg,!1)}get shouldStopPropagation(){return mCt(this,kg)}constructor(e,n,r){yCt(this,kg,{writable:!0,value:void 0}),VP(this,kg,!0),this.type=e,this.pointerType=n,this.target=r.currentTarget,this.shiftKey=r.shiftKey,this.metaKey=r.metaKey,this.ctrlKey=r.ctrlKey,this.altKey=r.altKey}}const KP=Symbol("linkClicked");function xC(t){let{onPress:e,onPressChange:n,onPressStart:r,onPressEnd:o,onPressUp:i,isDisabled:s,isPressed:a,preventFocusOnPress:l,shouldCancelOnPointerExit:c,allowTextSelectionOnPress:u,ref:d,...f}=vCt(t),[p,h]=k.useState(!1),y=k.useRef({isPressed:!1,ignoreEmulatedMouseEvents:!1,ignoreClickAfterPress:!1,didFirePressStart:!1,isTriggeringEvent:!1,activePointerId:null,target:null,isOverTarget:!1,pointerType:null}),{addGlobalListener:m,removeAllGlobalListeners:w}=k9(),x=Eo((T,F)=>{let j=y.current;if(s||j.didFirePressStart)return;let U=!0;if(j.isTriggeringEvent=!0,r){let ce=new $g("pressstart",F,T);r(ce),U=ce.shouldStopPropagation}return n&&n(!0),j.isTriggeringEvent=!1,j.didFirePressStart=!0,h(!0),U}),$=Eo((T,F,j=!0)=>{let U=y.current;if(!U.didFirePressStart)return;U.ignoreClickAfterPress=!0,U.didFirePressStart=!1,U.isTriggeringEvent=!0;let ce=!0;if(o){let W=new $g("pressend",F,T);o(W),ce=W.shouldStopPropagation}if(n&&n(!1),h(!1),e&&j&&!s){let W=new $g("press",F,T);e(W),ce&&(ce=W.shouldStopPropagation)}return U.isTriggeringEvent=!1,ce}),S=Eo((T,F)=>{let j=y.current;if(!s){if(i){j.isTriggeringEvent=!0;let U=new $g("pressup",F,T);return i(U),j.isTriggeringEvent=!1,U.shouldStopPropagation}return!0}}),I=Eo(T=>{let F=y.current;F.isPressed&&(F.isOverTarget&&$(gs(F.target,T),F.pointerType,!1),F.isPressed=!1,F.isOverTarget=!1,F.activePointerId=null,F.pointerType=null,w(),u||xg(F.target))}),E=Eo(T=>{c&&I(T)}),L=k.useMemo(()=>{let T=y.current,F={onKeyDown(U){if(o_(U.nativeEvent,U.currentTarget)&&U.currentTarget.contains(U.target)){ZP(U.target,U.key)&&U.preventDefault();let ce=!0;!T.isPressed&&!U.repeat&&(T.target=U.currentTarget,T.isPressed=!0,ce=x(U,"keyboard"),m(document,"keyup",j,!1)),ce&&U.stopPropagation(),U.metaKey&&ul()&&T.metaKeyEvents.set(U.key,U.nativeEvent)}else U.key==="Meta"&&(T.metaKeyEvents=new Map)},onKeyUp(U){o_(U.nativeEvent,U.currentTarget)&&!U.repeat&&U.currentTarget.contains(U.target)&&S(gs(T.target,U),"keyboard")},onClick(U){if(!(U&&!U.currentTarget.contains(U.target))&&U&&U.button===0&&!T.isTriggeringEvent&&!Cc.isOpening){let ce=!0;if(s&&U.preventDefault(),!T.ignoreClickAfterPress&&!T.ignoreEmulatedMouseEvents&&!T.isPressed&&(T.pointerType==="virtual"||$k(U.nativeEvent))){!s&&!l&&Ns(U.currentTarget);let W=x(U,"virtual"),P=S(U,"virtual"),ne=$(U,"virtual");ce=W&&P&&ne}T.ignoreEmulatedMouseEvents=!1,T.ignoreClickAfterPress=!1,ce&&U.stopPropagation()}}},j=U=>{var ce;if(T.isPressed&&o_(U,T.target)){var W;ZP(U.target,U.key)&&U.preventDefault();let P=U.target,ne=$(gs(T.target,U),"keyboard",T.target.contains(P));w(),ne&&U.stopPropagation(),U.key!=="Enter"&&kC(T.target)&&T.target.contains(P)&&!U[KP]&&(U[KP]=!0,Cc(T.target,U,!1)),T.isPressed=!1,(W=T.metaKeyEvents)===null||W===void 0||W.delete(U.key)}else if(U.key==="Meta"&&(!((ce=T.metaKeyEvents)===null||ce===void 0)&&ce.size)){let P=T.metaKeyEvents;T.metaKeyEvents=null;for(let ne of P.values())T.target.dispatchEvent(new KeyboardEvent("keyup",ne))}};if(typeof PointerEvent!="undefined"){F.onPointerDown=P=>{if(P.button!==0||!P.currentTarget.contains(P.target))return;if(fCt(P.nativeEvent)){T.pointerType="virtual";return}i_(P.currentTarget)&&P.preventDefault(),T.pointerType=P.pointerType;let ne=!0;T.isPressed||(T.isPressed=!0,T.isOverTarget=!0,T.activePointerId=P.pointerId,T.target=P.currentTarget,!s&&!l&&Ns(P.currentTarget),u||HP(T.target),ne=x(P,T.pointerType),m(document,"pointermove",U,!1),m(document,"pointerup",ce,!1),m(document,"pointercancel",W,!1)),ne&&P.stopPropagation()},F.onMouseDown=P=>{P.currentTarget.contains(P.target)&&P.button===0&&(i_(P.currentTarget)&&P.preventDefault(),P.stopPropagation())},F.onPointerUp=P=>{!P.currentTarget.contains(P.target)||T.pointerType==="virtual"||P.button===0&&eu(P,P.currentTarget)&&S(P,T.pointerType||P.pointerType)};let U=P=>{P.pointerId===T.activePointerId&&(eu(P,T.target)?T.isOverTarget||(T.isOverTarget=!0,x(gs(T.target,P),T.pointerType)):T.isOverTarget&&(T.isOverTarget=!1,$(gs(T.target,P),T.pointerType,!1),E(P)))},ce=P=>{P.pointerId===T.activePointerId&&T.isPressed&&P.button===0&&(eu(P,T.target)?$(gs(T.target,P),T.pointerType):T.isOverTarget&&$(gs(T.target,P),T.pointerType,!1),T.isPressed=!1,T.isOverTarget=!1,T.activePointerId=null,T.pointerType=null,w(),u||xg(T.target))},W=P=>{I(P)};F.onDragStart=P=>{P.currentTarget.contains(P.target)&&I(P)}}else{F.onMouseDown=W=>{if(W.button!==0||!W.currentTarget.contains(W.target))return;if(i_(W.currentTarget)&&W.preventDefault(),T.ignoreEmulatedMouseEvents){W.stopPropagation();return}T.isPressed=!0,T.isOverTarget=!0,T.target=W.currentTarget,T.pointerType=$k(W.nativeEvent)?"virtual":"mouse",!s&&!l&&Ns(W.currentTarget),x(W,T.pointerType)&&W.stopPropagation(),m(document,"mouseup",U,!1)},F.onMouseEnter=W=>{if(!W.currentTarget.contains(W.target))return;let P=!0;T.isPressed&&!T.ignoreEmulatedMouseEvents&&(T.isOverTarget=!0,P=x(W,T.pointerType)),P&&W.stopPropagation()},F.onMouseLeave=W=>{if(!W.currentTarget.contains(W.target))return;let P=!0;T.isPressed&&!T.ignoreEmulatedMouseEvents&&(T.isOverTarget=!1,P=$(W,T.pointerType,!1),E(W)),P&&W.stopPropagation()},F.onMouseUp=W=>{W.currentTarget.contains(W.target)&&!T.ignoreEmulatedMouseEvents&&W.button===0&&S(W,T.pointerType||"mouse")};let U=W=>{if(W.button===0){if(T.isPressed=!1,w(),T.ignoreEmulatedMouseEvents){T.ignoreEmulatedMouseEvents=!1;return}eu(W,T.target)?$(gs(T.target,W),T.pointerType):T.isOverTarget&&$(gs(T.target,W),T.pointerType,!1),T.isOverTarget=!1}};F.onTouchStart=W=>{if(!W.currentTarget.contains(W.target))return;let P=wCt(W.nativeEvent);if(!P)return;T.activePointerId=P.identifier,T.ignoreEmulatedMouseEvents=!0,T.isOverTarget=!0,T.isPressed=!0,T.target=W.currentTarget,T.pointerType="touch",!s&&!l&&Ns(W.currentTarget),u||HP(T.target),x(W,T.pointerType)&&W.stopPropagation(),m(window,"scroll",ce,!0)},F.onTouchMove=W=>{if(!W.currentTarget.contains(W.target))return;if(!T.isPressed){W.stopPropagation();return}let P=GP(W.nativeEvent,T.activePointerId),ne=!0;P&&eu(P,W.currentTarget)?T.isOverTarget||(T.isOverTarget=!0,ne=x(W,T.pointerType)):T.isOverTarget&&(T.isOverTarget=!1,ne=$(W,T.pointerType,!1),E(W)),ne&&W.stopPropagation()},F.onTouchEnd=W=>{if(!W.currentTarget.contains(W.target))return;if(!T.isPressed){W.stopPropagation();return}let P=GP(W.nativeEvent,T.activePointerId),ne=!0;P&&eu(P,W.currentTarget)?(S(W,T.pointerType),ne=$(W,T.pointerType)):T.isOverTarget&&(ne=$(W,T.pointerType,!1)),ne&&W.stopPropagation(),T.isPressed=!1,T.activePointerId=null,T.isOverTarget=!1,T.ignoreEmulatedMouseEvents=!0,u||xg(T.target),w()},F.onTouchCancel=W=>{W.currentTarget.contains(W.target)&&(W.stopPropagation(),T.isPressed&&I(W))};let ce=W=>{T.isPressed&&W.target.contains(T.target)&&I({currentTarget:T.target,shiftKey:!1,ctrlKey:!1,metaKey:!1,altKey:!1})};F.onDragStart=W=>{W.currentTarget.contains(W.target)&&I(W)}}return F},[m,s,l,w,u,I,E,$,x,S]);return k.useEffect(()=>()=>{u||xg(y.current.target)},[u]),{isPressed:a||p,pressProps:Sn(f,L)}}function kC(t){return t.tagName==="A"&&t.hasAttribute("href")}function o_(t,e){const{key:n,code:r}=t,o=e,i=o.getAttribute("role");return(n==="Enter"||n===" "||n==="Spacebar"||r==="Space")&&!(o instanceof HTMLInputElement&&!T9(o,n)||o instanceof HTMLTextAreaElement||o.isContentEditable)&&!((i==="link"||!i&&kC(o))&&n!=="Enter")}function wCt(t){const{targetTouches:e}=t;return e.length>0?e[0]:null}function GP(t,e){const n=t.changedTouches;for(let r=0;r<n.length;r++){const o=n[r];if(o.identifier===e)return o}return null}function gs(t,e){return{currentTarget:t,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,metaKey:e.metaKey,altKey:e.altKey}}function _Ct(t){let e=t.width/2||t.radiusX||0,n=t.height/2||t.radiusY||0;return{top:t.clientY-n,right:t.clientX+e,bottom:t.clientY+n,left:t.clientX-e}}function xCt(t,e){return!(t.left>e.right||e.left>t.right||t.top>e.bottom||e.top>t.bottom)}function eu(t,e){let n=e.getBoundingClientRect(),r=_Ct(t);return xCt(n,r)}function i_(t){return!(t instanceof HTMLElement)||!t.hasAttribute("draggable")}function ZP(t,e){return t instanceof HTMLInputElement?!T9(t,e):t instanceof HTMLButtonElement?t.type!=="submit"&&t.type!=="reset":!kC(t)}const kCt=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function T9(t,e){return t.type==="checkbox"||t.type==="radio"?e===" ":kCt.has(t.type)}class $Ct{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor(e,n){this.nativeEvent=n,this.target=n.target,this.currentTarget=n.currentTarget,this.relatedTarget=n.relatedTarget,this.bubbles=n.bubbles,this.cancelable=n.cancelable,this.defaultPrevented=n.defaultPrevented,this.eventPhase=n.eventPhase,this.isTrusted=n.isTrusted,this.timeStamp=n.timeStamp,this.type=e}}function A9(t){let e=k.useRef({isFocused:!1,observer:null});Ln(()=>{const r=e.current;return()=>{r.observer&&(r.observer.disconnect(),r.observer=null)}},[]);let n=Eo(r=>{t==null||t(r)});return k.useCallback(r=>{if(r.target instanceof HTMLButtonElement||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement||r.target instanceof HTMLSelectElement){e.current.isFocused=!0;let o=r.target,i=s=>{e.current.isFocused=!1,o.disabled&&n(new $Ct("blur",s)),e.current.observer&&(e.current.observer.disconnect(),e.current.observer=null)};o.addEventListener("focusout",i,{once:!0}),e.current.observer=new MutationObserver(()=>{if(e.current.isFocused&&o.disabled){e.current.observer.disconnect();let s=o===document.activeElement?null:document.activeElement;o.dispatchEvent(new FocusEvent("blur",{relatedTarget:s})),o.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:s}))}}),e.current.observer.observe(o,{attributes:!0,attributeFilter:["disabled"]})}},[n])}function N9(t){let{isDisabled:e,onFocus:n,onBlur:r,onFocusChange:o}=t;const i=k.useCallback(l=>{if(l.target===l.currentTarget)return r&&r(l),o&&o(!1),!0},[r,o]),s=A9(i),a=k.useCallback(l=>{l.target===l.currentTarget&&document.activeElement===l.target&&(n&&n(l),o&&o(!0),s(l))},[o,n,s]);return{focusProps:{onFocus:!e&&(n||o||r)?a:void 0,onBlur:!e&&(r||o)?i:void 0}}}let Qd=null,Ek=new Set,YP=!1,Tc=!1,Ck=!1;const SCt={Tab:!0,Escape:!0};function $C(t,e){for(let n of Ek)n(t,e)}function ECt(t){return!(t.metaKey||!ul()&&t.altKey||t.ctrlKey||t.key==="Control"||t.key==="Shift"||t.key==="Meta")}function JP(t){Tc=!0,ECt(t)&&(Qd="keyboard",$C("keyboard",t))}function tu(t){Qd="pointer",(t.type==="mousedown"||t.type==="pointerdown")&&(Tc=!0,$C("pointer",t))}function CCt(t){$k(t)&&(Tc=!0,Qd="virtual")}function TCt(t){t.target===window||t.target===document||(!Tc&&!Ck&&(Qd="virtual",$C("virtual",t)),Tc=!1,Ck=!1)}function ACt(){Tc=!1,Ck=!0}function Tk(){if(typeof window=="undefined"||YP)return;let t=HTMLElement.prototype.focus;HTMLElement.prototype.focus=function(){Tc=!0,t.apply(this,arguments)},document.addEventListener("keydown",JP,!0),document.addEventListener("keyup",JP,!0),document.addEventListener("click",CCt,!0),window.addEventListener("focus",TCt,!0),window.addEventListener("blur",ACt,!1),typeof PointerEvent!="undefined"?(document.addEventListener("pointerdown",tu,!0),document.addEventListener("pointermove",tu,!0),document.addEventListener("pointerup",tu,!0)):(document.addEventListener("mousedown",tu,!0),document.addEventListener("mousemove",tu,!0),document.addEventListener("mouseup",tu,!0)),YP=!0}typeof document!="undefined"&&(document.readyState!=="loading"?Tk():document.addEventListener("DOMContentLoaded",Tk));function Py(){return Qd!=="pointer"}function Ak(){return Qd}function NCt(t,e,n){return!(t&&e==="keyboard"&&n instanceof KeyboardEvent&&!SCt[n.key])}function RCt(t,e,n){Tk(),k.useEffect(()=>{let r=(o,i)=>{NCt(n==null?void 0:n.isTextInput,o,i)&&t(Py())};return Ek.add(r),()=>{Ek.delete(r)}},e)}function xb(t){let{isDisabled:e,onBlurWithin:n,onFocusWithin:r,onFocusWithinChange:o}=t,i=k.useRef({isFocusWithin:!1}),s=k.useCallback(c=>{i.current.isFocusWithin&&!c.currentTarget.contains(c.relatedTarget)&&(i.current.isFocusWithin=!1,n&&n(c),o&&o(!1))},[n,o,i]),a=A9(s),l=k.useCallback(c=>{!i.current.isFocusWithin&&document.activeElement===c.target&&(r&&r(c),o&&o(!0),i.current.isFocusWithin=!0,a(c))},[r,o,a]);return e?{focusWithinProps:{onFocus:null,onBlur:null}}:{focusWithinProps:{onFocus:l,onBlur:s}}}let Oy=!1,s_=0;function Nk(){Oy=!0,setTimeout(()=>{Oy=!1},50)}function XP(t){t.pointerType==="touch"&&Nk()}function PCt(){if(typeof document!="undefined")return typeof PointerEvent!="undefined"?document.addEventListener("pointerup",XP):document.addEventListener("touchend",Nk),s_++,()=>{s_--,!(s_>0)&&(typeof PointerEvent!="undefined"?document.removeEventListener("pointerup",XP):document.removeEventListener("touchend",Nk))}}function kb(t){let{onHoverStart:e,onHoverChange:n,onHoverEnd:r,isDisabled:o}=t,[i,s]=k.useState(!1),a=k.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;k.useEffect(PCt,[]);let{hoverProps:l,triggerHoverEnd:c}=k.useMemo(()=>{let u=(p,h)=>{if(a.pointerType=h,o||h==="touch"||a.isHovered||!p.currentTarget.contains(p.target))return;a.isHovered=!0;let y=p.currentTarget;a.target=y,e&&e({type:"hoverstart",target:y,pointerType:h}),n&&n(!0),s(!0)},d=(p,h)=>{if(a.pointerType="",a.target=null,h==="touch"||!a.isHovered)return;a.isHovered=!1;let y=p.currentTarget;r&&r({type:"hoverend",target:y,pointerType:h}),n&&n(!1),s(!1)},f={};return typeof PointerEvent!="undefined"?(f.onPointerEnter=p=>{Oy&&p.pointerType==="mouse"||u(p,p.pointerType)},f.onPointerLeave=p=>{!o&&p.currentTarget.contains(p.target)&&d(p,p.pointerType)}):(f.onTouchStart=()=>{a.ignoreEmulatedMouseEvents=!0},f.onMouseEnter=p=>{!a.ignoreEmulatedMouseEvents&&!Oy&&u(p,"mouse"),a.ignoreEmulatedMouseEvents=!1},f.onMouseLeave=p=>{!o&&p.currentTarget.contains(p.target)&&d(p,"mouse")}),{hoverProps:f,triggerHoverEnd:d}},[e,n,r,o,a]);return k.useEffect(()=>{o&&c({currentTarget:a.target},a.pointerType)},[o]),{hoverProps:l,isHovered:i}}function OCt(t){let{ref:e,onInteractOutside:n,isDisabled:r,onInteractOutsideStart:o}=t,i=k.useRef({isPointerDown:!1,ignoreEmulatedMouseEvents:!1}),s=Eo(l=>{n&&Sg(l,e)&&(o&&o(l),i.current.isPointerDown=!0)}),a=Eo(l=>{n&&n(l)});k.useEffect(()=>{let l=i.current;if(!r)if(typeof PointerEvent!="undefined"){let c=u=>{l.isPointerDown&&Sg(u,e)&&a(u),l.isPointerDown=!1};return document.addEventListener("pointerdown",s,!0),document.addEventListener("pointerup",c,!0),()=>{document.removeEventListener("pointerdown",s,!0),document.removeEventListener("pointerup",c,!0)}}else{let c=d=>{l.ignoreEmulatedMouseEvents?l.ignoreEmulatedMouseEvents=!1:l.isPointerDown&&Sg(d,e)&&a(d),l.isPointerDown=!1},u=d=>{l.ignoreEmulatedMouseEvents=!0,l.isPointerDown&&Sg(d,e)&&a(d),l.isPointerDown=!1};return document.addEventListener("mousedown",s,!0),document.addEventListener("mouseup",c,!0),document.addEventListener("touchstart",s,!0),document.addEventListener("touchend",u,!0),()=>{document.removeEventListener("mousedown",s,!0),document.removeEventListener("mouseup",c,!0),document.removeEventListener("touchstart",s,!0),document.removeEventListener("touchend",u,!0)}}},[e,r,s,a])}function Sg(t,e){if(t.button>0)return!1;if(t.target){const n=t.target.ownerDocument;if(!n||!n.documentElement.contains(t.target)||t.target.closest("[data-react-aria-top-layer]"))return!1}return e.current&&!e.current.contains(t.target)}function QP(t){if(!t)return;let e=!0;return n=>{let r={...n,preventDefault(){n.preventDefault()},isDefaultPrevented(){return n.isDefaultPrevented()},stopPropagation(){console.error("stopPropagation is now the default behavior for events in React Spectrum. You can use continuePropagation() to revert this behavior.")},continuePropagation(){e=!1}};t(r),e&&n.stopPropagation()}}function ICt(t){return{keyboardProps:t.isDisabled?{}:{onKeyDown:QP(t.onKeyDown),onKeyUp:QP(t.onKeyUp)}}}const DCt=500;function R9(t){let{isDisabled:e,onLongPressStart:n,onLongPressEnd:r,onLongPress:o,threshold:i=DCt,accessibilityDescription:s}=t;const a=k.useRef(null);let{addGlobalListener:l,removeGlobalListener:c}=k9(),{pressProps:u}=xC({isDisabled:e,onPressStart(f){if(f.continuePropagation(),(f.pointerType==="mouse"||f.pointerType==="touch")&&(n&&n({...f,type:"longpressstart"}),a.current=setTimeout(()=>{f.target.dispatchEvent(new PointerEvent("pointercancel",{bubbles:!0})),o&&o({...f,type:"longpress"}),a.current=null},i),f.pointerType==="touch")){let p=h=>{h.preventDefault()};l(f.target,"contextmenu",p,{once:!0}),l(window,"pointerup",()=>{setTimeout(()=>{c(f.target,"contextmenu",p)},30)},{once:!0})}},onPressEnd(f){a.current&&clearTimeout(a.current),r&&(f.pointerType==="mouse"||f.pointerType==="touch")&&r({...f,type:"longpressend"})}}),d=uCt(o&&!e?s:null);return{longPressProps:Sn(u,d)}}function Ac(t){if(Ak()==="virtual"){let e=document.activeElement;x9(()=>{document.activeElement===e&&document.contains(t)&&Ns(t)})}else Ns(t)}function MCt(t){if(!(t instanceof HTMLElement)&&!(t instanceof SVGElement))return!1;let{display:e,visibility:n}=t.style,r=e!=="none"&&n!=="hidden"&&n!=="collapse";if(r){const{getComputedStyle:o}=t.ownerDocument.defaultView;let{display:i,visibility:s}=o(t);r=i!=="none"&&s!=="hidden"&&s!=="collapse"}return r}function LCt(t,e){return!t.hasAttribute("hidden")&&(t.nodeName==="DETAILS"&&e&&e.nodeName!=="SUMMARY"?t.hasAttribute("open"):!0)}function P9(t,e){return t.nodeName!=="#comment"&&MCt(t)&&LCt(t,e)&&(!t.parentElement||P9(t.parentElement,t))}const Rk=H.createContext(null);let Gt=null;function O9(t){let{children:e,contain:n,restoreFocus:r,autoFocus:o}=t,i=k.useRef(),s=k.useRef(),a=k.useRef([]),{parentNode:l}=k.useContext(Rk)||{},c=k.useMemo(()=>new Pk({scopeRef:a}),[a]);Ln(()=>{let f=l||bn.root;if(bn.getTreeNode(f.scopeRef)&&Gt&&!Dy(Gt,f.scopeRef)){let p=bn.getTreeNode(Gt);p&&(f=p)}f.addChild(c),bn.addNode(c)},[c,l]),Ln(()=>{let f=bn.getTreeNode(a);f.contain=n},[n]),Ln(()=>{let f=i.current.nextSibling,p=[];for(;f&&f!==s.current;)p.push(f),f=f.nextSibling;a.current=p},[e]),VCt(a,r,n),qCt(a,n),KCt(a,r,n),UCt(a,o),k.useEffect(()=>{if(a){let f=document.activeElement,p=null;if(fr(f,a.current)){for(let h of bn.traverse())fr(f,h.scopeRef.current)&&(p=h);p===bn.getTreeNode(a)&&(Gt=p.scopeRef)}return()=>{let h=bn.getTreeNode(a).parent.scopeRef;(a===Gt||Dy(a,Gt))&&(!h||bn.getTreeNode(h))&&(Gt=h),bn.removeTreeNode(a)}}},[a]);let u=k.useMemo(()=>BCt(a),[]),d=k.useMemo(()=>({focusManager:u,parentNode:c}),[c,u]);return H.createElement(Rk.Provider,{value:d},H.createElement("span",{"data-focus-scope-start":!0,hidden:!0,ref:i}),e,H.createElement("span",{"data-focus-scope-end":!0,hidden:!0,ref:s}))}function FCt(){var t;return(t=k.useContext(Rk))===null||t===void 0?void 0:t.focusManager}function BCt(t){return{focusNext(e={}){let n=t.current,{from:r,tabbable:o,wrap:i,accept:s}=e,a=r||document.activeElement,l=n[0].previousElementSibling,c=Ps(Jl(n),{tabbable:o,accept:s},n);c.currentNode=fr(a,n)?a:l;let u=c.nextNode();return!u&&i&&(c.currentNode=l,u=c.nextNode()),u&&Rs(u,!0),u},focusPrevious(e={}){let n=t.current,{from:r,tabbable:o,wrap:i,accept:s}=e,a=r||document.activeElement,l=n[n.length-1].nextElementSibling,c=Ps(Jl(n),{tabbable:o,accept:s},n);c.currentNode=fr(a,n)?a:l;let u=c.previousNode();return!u&&i&&(c.currentNode=l,u=c.previousNode()),u&&Rs(u,!0),u},focusFirst(e={}){let n=t.current,{tabbable:r,accept:o}=e,i=Ps(Jl(n),{tabbable:r,accept:o},n);i.currentNode=n[0].previousElementSibling;let s=i.nextNode();return s&&Rs(s,!0),s},focusLast(e={}){let n=t.current,{tabbable:r,accept:o}=e,i=Ps(Jl(n),{tabbable:r,accept:o},n);i.currentNode=n[n.length-1].nextElementSibling;let s=i.previousNode();return s&&Rs(s,!0),s}}}const SC=["input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[contenteditable]"],jCt=SC.join(":not([hidden]),")+",[tabindex]:not([disabled]):not([hidden])";SC.push('[tabindex]:not([tabindex="-1"]):not([disabled])');const zCt=SC.join(':not([hidden]):not([tabindex="-1"]),');function Jl(t){return t[0].parentElement}function Hf(t){let e=bn.getTreeNode(Gt);for(;e&&e.scopeRef!==t;){if(e.contain)return!1;e=e.parent}return!0}function qCt(t,e){let n=k.useRef(),r=k.useRef(null);Ln(()=>{let o=t.current;if(!e){r.current&&(cancelAnimationFrame(r.current),r.current=null);return}let i=l=>{if(l.key!=="Tab"||l.altKey||l.ctrlKey||l.metaKey||!Hf(t))return;let c=document.activeElement,u=t.current;if(!fr(c,u))return;let d=Ps(Jl(u),{tabbable:!0},u);d.currentNode=c;let f=l.shiftKey?d.previousNode():d.nextNode();f||(d.currentNode=l.shiftKey?u[u.length-1].nextElementSibling:u[0].previousElementSibling,f=l.shiftKey?d.previousNode():d.nextNode()),l.preventDefault(),f&&Rs(f,!0)},s=l=>{(!Gt||Dy(Gt,t))&&fr(l.target,t.current)?(Gt=t,n.current=l.target):Hf(t)&&!Iy(l.target,t)?n.current?n.current.focus():Gt&&My(Gt.current):Hf(t)&&(n.current=l.target)},a=l=>{r.current&&cancelAnimationFrame(r.current),r.current=requestAnimationFrame(()=>{Hf(t)&&!Iy(document.activeElement,t)&&(Gt=t,document.body.contains(l.target)?(n.current=l.target,n.current.focus()):Gt&&My(Gt.current))})};return document.addEventListener("keydown",i,!1),document.addEventListener("focusin",s,!1),o.forEach(l=>l.addEventListener("focusin",s,!1)),o.forEach(l=>l.addEventListener("focusout",a,!1)),()=>{document.removeEventListener("keydown",i,!1),document.removeEventListener("focusin",s,!1),o.forEach(l=>l.removeEventListener("focusin",s,!1)),o.forEach(l=>l.removeEventListener("focusout",a,!1))}},[t,e]),Ln(()=>()=>{r.current&&cancelAnimationFrame(r.current)},[r])}function I9(t){return Iy(t)}function fr(t,e){return e.some(n=>n.contains(t))}function Iy(t,e=null){if(t instanceof Element&&t.closest("[data-react-aria-top-layer]"))return!0;for(let{scopeRef:n}of bn.traverse(bn.getTreeNode(e)))if(fr(t,n.current))return!0;return!1}function WCt(t){return Iy(t,Gt)}function Dy(t,e){var n;let r=(n=bn.getTreeNode(e))===null||n===void 0?void 0:n.parent;for(;r;){if(r.scopeRef===t)return!0;r=r.parent}return!1}function Rs(t,e=!1){if(t!=null&&!e)try{Ac(t)}catch(n){}else if(t!=null)try{t.focus()}catch(n){}}function My(t,e=!0){let n=t[0].previousElementSibling,r=Ps(Jl(t),{tabbable:e},t);r.currentNode=n;let o=r.nextNode();e&&!o&&(r=Ps(Jl(t),{tabbable:!1},t),r.currentNode=n,o=r.nextNode()),Rs(o)}function UCt(t,e){const n=H.useRef(e);k.useEffect(()=>{n.current&&(Gt=t,fr(document.activeElement,Gt.current)||My(t.current)),n.current=!1},[t])}function VCt(t,e,n){Ln(()=>{if(e||n)return;let r=t.current,o=i=>{let s=i.target;fr(s,t.current)?Gt=t:I9(s)||(Gt=null)};return document.addEventListener("focusin",o,!1),r.forEach(i=>i.addEventListener("focusin",o,!1)),()=>{document.removeEventListener("focusin",o,!1),r.forEach(i=>i.removeEventListener("focusin",o,!1))}},[t,e,n])}function HCt(t){let e=bn.getTreeNode(Gt);for(;e&&e.scopeRef!==t;){if(e.nodeToRestore)return!1;e=e.parent}return(e==null?void 0:e.scopeRef)===t}function KCt(t,e,n){const r=k.useRef(typeof document!="undefined"?document.activeElement:null);Ln(()=>{let o=t.current;if(!e||n)return;let i=()=>{(!Gt||Dy(Gt,t))&&fr(document.activeElement,t.current)&&(Gt=t)};return document.addEventListener("focusin",i,!1),o.forEach(s=>s.addEventListener("focusin",i,!1)),()=>{document.removeEventListener("focusin",i,!1),o.forEach(s=>s.removeEventListener("focusin",i,!1))}},[t,n]),Ln(()=>{if(!e)return;let o=i=>{if(i.key!=="Tab"||i.altKey||i.ctrlKey||i.metaKey||!Hf(t))return;let s=document.activeElement;if(!fr(s,t.current))return;let a=bn.getTreeNode(t).nodeToRestore,l=Ps(document.body,{tabbable:!0});l.currentNode=s;let c=i.shiftKey?l.previousNode():l.nextNode();if((!document.body.contains(a)||a===document.body)&&(a=null,bn.getTreeNode(t).nodeToRestore=null),(!c||!fr(c,t.current))&&a){l.currentNode=a;do c=i.shiftKey?l.previousNode():l.nextNode();while(fr(c,t.current));i.preventDefault(),i.stopPropagation(),c?Rs(c,!0):I9(a)?Rs(a,!0):s.blur()}};return n||document.addEventListener("keydown",o,!0),()=>{n||document.removeEventListener("keydown",o,!0)}},[t,e,n]),Ln(()=>{if(e)return bn.getTreeNode(t).nodeToRestore=r.current,()=>{let o=bn.getTreeNode(t).nodeToRestore;if(e&&o&&(fr(document.activeElement,t.current)||document.activeElement===document.body&&HCt(t))){let i=bn.clone();requestAnimationFrame(()=>{if(document.activeElement===document.body){let s=i.getTreeNode(t);for(;s;){if(s.nodeToRestore&&document.body.contains(s.nodeToRestore)){Rs(s.nodeToRestore);return}s=s.parent}for(s=i.getTreeNode(t);s;){if(s.scopeRef&&bn.getTreeNode(s.scopeRef)){My(s.scopeRef.current,!0);return}s=s.parent}}})}}},[t,e])}function Ps(t,e,n){let r=e!=null&&e.tabbable?zCt:jCt,o=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode(i){var s;return!(e==null||(s=e.from)===null||s===void 0)&&s.contains(i)?NodeFilter.FILTER_REJECT:i.matches(r)&&P9(i)&&(!n||fr(i,n))&&(!(e!=null&&e.accept)||e.accept(i))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});return e!=null&&e.from&&(o.currentNode=e.from),o}class EC{get size(){return this.fastMap.size}getTreeNode(e){return this.fastMap.get(e)}addTreeNode(e,n,r){let o=this.fastMap.get(n!=null?n:null),i=new Pk({scopeRef:e});o.addChild(i),i.parent=o,this.fastMap.set(e,i),r&&(i.nodeToRestore=r)}addNode(e){this.fastMap.set(e.scopeRef,e)}removeTreeNode(e){if(e===null)return;let n=this.fastMap.get(e),r=n.parent;for(let i of this.traverse())i!==n&&n.nodeToRestore&&i.nodeToRestore&&n.scopeRef.current&&fr(i.nodeToRestore,n.scopeRef.current)&&(i.nodeToRestore=n.nodeToRestore);let o=n.children;r.removeChild(n),o.size>0&&o.forEach(i=>r.addChild(i)),this.fastMap.delete(n.scopeRef)}*traverse(e=this.root){if(e.scopeRef!=null&&(yield e),e.children.size>0)for(let n of e.children)yield*this.traverse(n)}clone(){let e=new EC;for(let n of this.traverse())e.addTreeNode(n.scopeRef,n.parent.scopeRef,n.nodeToRestore);return e}constructor(){this.fastMap=new Map,this.root=new Pk({scopeRef:null}),this.fastMap.set(null,this.root)}}class Pk{addChild(e){this.children.add(e),e.parent=this}removeChild(e){this.children.delete(e),e.parent=void 0}constructor(e){this.children=new Set,this.contain=!1,this.scopeRef=e.scopeRef}}let bn=new EC;function CC(t={}){let{autoFocus:e=!1,isTextInput:n,within:r}=t,o=k.useRef({isFocused:!1,isFocusVisible:e||Py()}),[i,s]=k.useState(!1),[a,l]=k.useState(()=>o.current.isFocused&&o.current.isFocusVisible),c=k.useCallback(()=>l(o.current.isFocused&&o.current.isFocusVisible),[]),u=k.useCallback(p=>{o.current.isFocused=p,s(p),c()},[c]);RCt(p=>{o.current.isFocusVisible=p,c()},[],{isTextInput:n});let{focusProps:d}=N9({isDisabled:r,onFocusChange:u}),{focusWithinProps:f}=xb({isDisabled:!r,onFocusWithinChange:u});return{isFocused:i,isFocusVisible:a,focusProps:r?f:d}}function xm(t){let{children:e,focusClass:n,focusRingClass:r}=t,{isFocused:o,isFocusVisible:i,focusProps:s}=CC(t),a=H.Children.only(e);return H.cloneElement(a,Sn(a.props,{...s,className:b9({[n||""]:o,[r||""]:i})}))}let GCt=H.createContext(null);function ZCt(t){let e=k.useContext(GCt)||{};$9(e,t);let{ref:n,...r}=e;return r}function D9(t,e){let{focusProps:n}=N9(t),{keyboardProps:r}=ICt(t),o=Sn(n,r),i=ZCt(e),s=t.isDisabled?{}:i,a=k.useRef(t.autoFocus);return k.useEffect(()=>{a.current&&e.current&&Ac(e.current),a.current=!1},[e]),{focusableProps:Sn({...o,tabIndex:t.excludeFromTabOrder&&!t.isDisabled?-1:void 0},s)}}function TC(t,e){let{elementType:n="button",isDisabled:r,onPress:o,onPressStart:i,onPressEnd:s,onPressChange:a,preventFocusOnPress:l,allowFocusWhenDisabled:c,onClick:u,href:d,target:f,rel:p,type:h="button"}=t,y;n==="button"?y={type:h,disabled:r}:y={role:"button",tabIndex:r?void 0:0,href:n==="a"&&r?void 0:d,target:n==="a"?f:void 0,type:n==="input"?h:void 0,disabled:n==="input"?r:void 0,"aria-disabled":!r||n==="input"?void 0:r,rel:n==="a"?p:void 0};let{pressProps:m,isPressed:w}=xC({onPressStart:i,onPressEnd:s,onPressChange:a,onPress:o,isDisabled:r,preventFocusOnPress:l,ref:e}),{focusableProps:x}=D9(t,e);c&&(x.tabIndex=r?-1:x.tabIndex);let $=Sn(x,m,Xd(t,{labelable:!0}));return{isPressed:w,buttonProps:Sn(y,$,{"aria-haspopup":t["aria-haspopup"],"aria-expanded":t["aria-expanded"],"aria-controls":t["aria-controls"],"aria-pressed":t["aria-pressed"],onClick:S=>{u&&(u(S),console.warn("onClick is deprecated, please use onPress"))}})}}const xu={SOLID:"solid",GHOST:"ghost",SOFT:"soft",TRANSPARENT:"transparent"};function eO({icon:t,size:e,side:n="left",text:r}){if(!H.isValidElement(t))return null;let o="";switch(r&&(e==="xs"?o=Xe(o,n==="left"?"mr-0_5":"ml-0_5"):o=Xe(o,n==="left"?"mr-1":"ml-1")),e){case"xs":{o=Xe(o,"w-4 h-4");break}case"sm":{o=Xe(o,"w-5 h-5");break}case"md":{o=Xe(o,"w-6 h-6");break}case"lg":{o=Xe(o,"w-7 h-7");break}default:throw new Error("Invalid size")}return typeof t.props.className=="string"&&(t.props.className.includes("w-")||t.props.className.includes("h-"))&&console.warn("Icon size should not be set in Button Icon! Found class "+t.props.className),H.cloneElement(t,{className:Xe(t.props.className,o)})}function YCt(t,e,n){let r={};const o=n.variant===xu.GHOST,i=a=>{r.border=`2px solid ${a}`},s=a=>{r.backgroundColor=a};return r.color=t.color,o&&(i(t.color),n.isDisabled&&i(t.disabledColor)),s(t.buttonBgColor),n.isDisabled&&(s(t.disabledBgColor),r.color=t.disabledColor),n.isHovered&&!n.isDisabled&&(r.color=t.hoverColor,s(t.hoverBgColor)),n.isPressed&&!n.isDisabled&&(s(t.pressedBgColor),o&&i(t.hoverColor)),{...r,...e}}const JCt={[xu.SOLID]:{[Ht.CAUTION]:{color:J.color.caution.solidText,buttonBgColor:J.color.caution.solid,hoverBgColor:J.color.caution.solidStrong,hoverColor:J.color.caution.solidText,pressedBgColor:J.color.caution.solidStronger,disabledBgColor:J.color.caution.solidFaint,disabledColor:J.color.neutral.textDisabled},[Ht.CRITICAL]:{color:J.color.critical.solidText,buttonBgColor:J.color.critical.solid,hoverBgColor:J.color.critical.solidStrong,hoverColor:J.color.critical.solidText,pressedBgColor:J.color.critical.solidStronger,disabledBgColor:J.color.critical.solidFaint,disabledColor:J.color.neutral.textDisabled},[Ht.NEUTRAL]:{color:J.color.neutral.solidText,buttonBgColor:J.color.neutral.solid,hoverBgColor:J.color.neutral.solidStrong,hoverColor:J.color.neutral.solidText,pressedBgColor:J.color.neutral.solidStronger,disabledBgColor:J.color.neutral.solidFaint,disabledColor:J.color.neutral.textDisabled},[Ht.SECONDARY]:{color:J.color.secondary.solidText,buttonBgColor:J.color.secondary.solid,hoverBgColor:J.color.secondary.solidStrong,hoverColor:J.color.secondary.solidText,pressedBgColor:J.color.secondary.solidStronger,disabledBgColor:J.color.secondary.solidFaint,disabledColor:J.color.neutral.textDisabled},[Ht.POSITIVE]:{color:J.color.positive.solidText,buttonBgColor:J.color.positive.solid,hoverBgColor:J.color.positive.solidStrong,hoverColor:J.color.positive.solidText,pressedBgColor:J.color.positive.solidStronger,disabledBgColor:J.color.positive.solidFaint,disabledColor:J.color.neutral.textDisabled},[Ht.PROMOTE]:{color:J.color.promote.solidText,buttonBgColor:J.color.promote.solid,hoverBgColor:J.color.promote.solidStrong,hoverColor:J.color.promote.solidText,pressedBgColor:J.color.promote.solidStronger,disabledBgColor:J.color.promote.solidFaint,disabledColor:J.color.neutral.textDisabled}},[xu.GHOST]:{[Ht.CAUTION]:{color:J.color.caution.solid,buttonBgColor:"transparent",hoverBgColor:J.color.neutral.solidFaint,hoverColor:J.color.caution.solidStrong,pressedBgColor:J.color.neutral.border,disabledBgColor:"transparent",disabledColor:J.color.neutral.textDisabled},[Ht.CRITICAL]:{color:J.color.critical.solid,buttonBgColor:"transparent",hoverBgColor:J.color.neutral.solidFaint,hoverColor:J.color.critical.solidStrong,pressedBgColor:J.color.neutral.border,disabledBgColor:"transparent",disabledColor:J.color.neutral.textDisabled},[Ht.NEUTRAL]:{color:J.color.neutral.solid,buttonBgColor:"transparent",hoverBgColor:J.color.neutral.solidFaint,hoverColor:J.color.neutral.solidStrong,pressedBgColor:J.color.neutral.solidSubdued,disabledBgColor:"transparent",disabledColor:J.color.neutral.textDisabled},[Ht.SECONDARY]:{color:J.color.secondary.solidText,buttonBgColor:"transparent",hoverBgColor:J.color.neutral.solidFaint,hoverColor:J.color.secondary.solidText,pressedBgColor:J.color.neutral.border,disabledBgColor:"transparent",disabledColor:J.color.neutral.textDisabled},[Ht.POSITIVE]:{color:J.color.positive.solid,buttonBgColor:"transparent",hoverBgColor:J.color.neutral.solidFaint,hoverColor:J.color.positive.solidStrong,pressedBgColor:J.color.neutral.border,disabledBgColor:"transparent",disabledColor:J.color.neutral.textDisabled},[Ht.PROMOTE]:{color:J.color.promote.solid,buttonBgColor:"transparent",hoverBgColor:J.color.neutral.solidFaint,hoverColor:J.color.promote.solidStrong,pressedBgColor:J.color.neutral.border,disabledBgColor:"transparent",disabledColor:J.color.neutral.textDisabled}},[xu.SOFT]:{[Ht.CAUTION]:{color:J.color.caution.solid,buttonBgColor:J.color.neutral.borderSubdued,hoverBgColor:J.color.neutral.border,hoverColor:J.color.caution.solid,pressedBgColor:J.color.neutral.borderStrong,disabledBgColor:"transparent",disabledColor:J.color.neutral.textDisabled},[Ht.CRITICAL]:{color:J.color.critical.solid,buttonBgColor:J.color.neutral.borderSubdued,hoverBgColor:J.color.neutral.border,hoverColor:J.color.critical.solid,pressedBgColor:J.color.neutral.borderStrong,disabledBgColor:"transparent",disabledColor:J.color.neutral.textDisabled},[Ht.NEUTRAL]:{color:J.color.neutral.text,buttonBgColor:J.color.neutral.borderSubdued,hoverBgColor:J.color.neutral.border,hoverColor:J.color.neutral.text,pressedBgColor:J.color.neutral.borderStrong,disabledBgColor:"transparent",disabledColor:J.color.neutral.textDisabled},[Ht.SECONDARY]:{color:J.color.secondary.solidText,buttonBgColor:J.color.neutral.borderSubdued,hoverBgColor:J.color.neutral.border,hoverColor:J.color.neutral.text,pressedBgColor:J.color.neutral.borderStrong,disabledBgColor:"transparent",disabledColor:J.color.neutral.textDisabled},[Ht.POSITIVE]:{color:J.color.positive.solid,buttonBgColor:J.color.neutral.borderSubdued,hoverBgColor:J.color.neutral.border,hoverColor:J.color.positive.solid,pressedBgColor:J.color.neutral.borderStrong,disabledBgColor:"transparent",disabledColor:J.color.neutral.textDisabled},[Ht.PROMOTE]:{color:J.color.promote.solid,buttonBgColor:J.color.neutral.borderSubdued,hoverBgColor:J.color.neutral.border,hoverColor:J.color.promote.solid,pressedBgColor:J.color.neutral.borderStrong,disabledBgColor:"transparent",disabledColor:J.color.neutral.textDisabled}},[xu.TRANSPARENT]:{[Ht.CAUTION]:{color:J.color.caution.solid,buttonBgColor:"transparent",hoverBgColor:J.color.neutral.border,hoverColor:J.color.caution.solidStrong,pressedBgColor:J.color.neutral.borderStrong,disabledBgColor:"transparent",disabledColor:J.color.neutral.textDisabled},[Ht.CRITICAL]:{color:J.color.critical.solid,buttonBgColor:"transparent",hoverBgColor:J.color.neutral.border,hoverColor:J.color.critical.solidStrong,pressedBgColor:J.color.neutral.borderStrong,disabledBgColor:"transparent",disabledColor:J.color.neutral.textDisabled},[Ht.NEUTRAL]:{color:J.color.neutral.text,buttonBgColor:"transparent",hoverBgColor:J.color.neutral.border,hoverColor:J.color.neutral.text,pressedBgColor:J.color.neutral.borderStrong,disabledBgColor:"transparent",disabledColor:J.color.neutral.textDisabled},[Ht.SECONDARY]:{color:J.color.neutral.textSubdued,buttonBgColor:"transparent",hoverBgColor:J.color.neutral.border,hoverColor:J.color.neutral.text,pressedBgColor:J.color.neutral.borderStrong,disabledBgColor:"transparent",disabledColor:J.color.neutral.textDisabled},[Ht.POSITIVE]:{color:J.color.positive.solid,buttonBgColor:"transparent",hoverBgColor:J.color.neutral.border,hoverColor:J.color.positive.solidStrong,pressedBgColor:J.color.neutral.borderStrong,disabledBgColor:"transparent",disabledColor:J.color.neutral.textDisabled},[Ht.PROMOTE]:{color:J.color.promote.solid,buttonBgColor:"transparent",hoverBgColor:J.color.neutral.border,hoverColor:J.color.promote.solidStrong,pressedBgColor:J.color.neutral.border,disabledBgColor:"transparent",disabledColor:J.color.neutral.textDisabled}}},XCt=({text:t,textElementProps:e,leftIcon:n,rightIcon:r,styleProps:o,elementProps:i})=>{var c;const[s,a]=QCt(o),l=t&&!n&&!r||!t&&n&&!r||!t&&!n&&r;return{...i,type:(c=i.type)!=null?c:"button",style:a,className:s,children:_.jsxs("span",{className:Xe("flex flex-grow-1 overflow-hidden"),style:{justifyContent:o.justifyContent!=="auto"&&o.justifyContent?o.justifyContent:l?"center":"space-between"},children:[n&&_.jsx("span",{children:_.jsx(eO,{text:t,size:o.size,side:"left",icon:n})}),t&&_.jsx("span",{...e,className:Xe("text-ellipsis overflow-hidden",e==null?void 0:e.className),children:t}),r&&_.jsx("span",{children:_.jsx(eO,{text:t,size:o.size,side:"right",icon:r})})]})}};function QCt({animateOnPress:t,className:e,isDisabled:n,isFocusVisible:r,isHovered:o,isPressed:i,isTouch:s,size:a,style:l,tone:c,variant:u,onHoverStyle:d,onPressStyle:f}){let p=e;switch(a){case"xs":{p=Xe(p,"text-xs font-600 min-w-6",s?"h-7 px-3":"h-6 px-1_5");break}case"sm":{p=Xe(p,"text-sm font-600 h-8 min-w-8",s?" px-3":"px-2");break}case"md":{p=Xe(p,"text-base h-9 smallscreen:h-10 min-w-10",s?"px-4":"px-3");break}case"lg":{p=Xe(p,"text-lg font-600 h-11 min-w-12","px-4");break}default:{let m=a;throw new Error("Invalid size "+m)}}p=Xe(p,"select-none inline-flex justify-center items-center rounded-md whitespace-nowrap overflow-hidden",s?"py-2":"py-1",r&&"ring-promote",t?"transition-all duration-100":"transition-colors duration-100",t&&i&&(s?"scale-94":"scale-97"),n?"cursor-not-allowed ":"cursor-pointer");let h=JCt[u][c],y=l;return d&&o&&(y={...y,...d}),f&&i&&(y={...y,...f}),[p,YCt(h,y,{isDisabled:n,isHovered:o,isPressed:i,variant:u})]}const tO={autoFocus:!1};function vd({animateOnPress:t=!0,ariaLabel:e,className:n="",focus:r,id:o,isDisabled:i=!1,isTouch:s=T0,justifyContent:a="auto",leftIcon:l,onHoverStyle:c,onPress:u,onPressStyle:d,rightIcon:f,size:p="md",style:h={},text:y,tone:m=Ht.NEUTRAL,tooltipPlacement:w,variant:x=xu.SOLID}){h.justifyContent&&console.warn("Button: Do not set justifyContent in style prop. Use justifyContent prop instead");const $=k.useRef(null),{autoFocus:S=tO.autoFocus}=r||tO,{hoverProps:I,isHovered:E}=kb({isDisabled:i}),{isFocusVisible:L,focusProps:T}=CC({autoFocus:S}),{buttonProps:F,isPressed:j}=TC({"aria-label":e,onPress:u,isDisabled:i,type:"button",autoFocus:S},$),U=Sn(I,F,T);return _.jsx("button",{ref:$,...XCt({elementProps:U,leftIcon:l,rightIcon:f,styleProps:{animateOnPress:t,className:n,isDisabled:i,isFocusVisible:L,isHovered:E,isPressed:j,isTouch:s,size:p,tone:m,style:h,variant:x,justifyContent:a,onHoverStyle:c,onPressStyle:d},text:y})})}function No({className:t="",hint:e,hintPos:n="bottom",children:r,onClick:o,active:i,style:s,removeFocus:a=!0}){return _.jsx("button",{type:"button","aria-label":e,"data-bangle-editor-pos":n,"data-bangle-editor-break":!0,className:Xe(i&&"BU_active",a&&"focus:outline-none",t),onClick:o,style:s,children:r})}function e2t({children:t,collapse:e=!0,className:n,justify:r="start",reverseRow:o,gap:i=2}){return _.jsx("div",{className:Xe(n,"flex flex-wrap",e&&"smallscreen:flex-col",i===1?"gap-1":i===2?"gap-2":i===3?"gap-3":"gap-4",o?"flex-row-reverse":"flex-row",r&&(r==="center"?"justify-center":r==="start"?"justify-start":"justify-end")),children:t})}function t2t(t,e){return k.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:e},t),k.createElement("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"}))}const n2t=k.forwardRef(t2t);var M9=n2t;function r2t(t,e){return k.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:e},t),k.createElement("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"}))}const o2t=k.forwardRef(r2t);var i2t=o2t;const L9=7e3;let a_=null;function l_(t,e="assertive",n=L9){a_||(a_=new s2t),a_.announce(t,e,n)}class s2t{createLog(e){let n=document.createElement("div");return n.setAttribute("role","log"),n.setAttribute("aria-live",e),n.setAttribute("aria-relevant","additions"),n}destroy(){this.node&&(document.body.removeChild(this.node),this.node=null)}announce(e,n="assertive",r=L9){if(!this.node)return;let o=document.createElement("div");o.textContent=e,n==="assertive"?this.assertiveLog.appendChild(o):this.politeLog.appendChild(o),e!==""&&setTimeout(()=>{o.remove()},r)}clear(e){this.node&&((!e||e==="assertive")&&(this.assertiveLog.innerHTML=""),(!e||e==="polite")&&(this.politeLog.innerHTML=""))}constructor(){this.node=document.createElement("div"),this.node.dataset.liveAnnouncer="true",Object.assign(this.node.style,{border:0,clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"}),this.assertiveLog=this.createLog("assertive"),this.node.appendChild(this.assertiveLog),this.politeLog=this.createLog("polite"),this.node.appendChild(this.politeLog),document.body.prepend(this.node)}}class a2t{getStringForLocale(e,n){let r=this.strings[n];r||(r=l2t(n,this.strings,this.defaultLocale),this.strings[n]=r);let o=r[e];if(!o)throw new Error(`Could not find intl message ${e} in ${n} locale`);return o}constructor(e,n="en-US"){this.strings={...e},this.defaultLocale=n}}function l2t(t,e,n="en-US"){if(e[t])return e[t];let r=c2t(t);if(e[r])return e[r];for(let o in e)if(o.startsWith(r+"-"))return e[o];return e[n]}function c2t(t){return Intl.Locale?new Intl.Locale(t).language:t.split("-")[0]}const nO=new Map,rO=new Map;class u2t{format(e,n){let r=this.strings.getStringForLocale(e,this.locale);return typeof r=="function"?r(n,this):r}plural(e,n,r="cardinal"){let o=n["="+e];if(o)return typeof o=="function"?o():o;let i=this.locale+":"+r,s=nO.get(i);s||(s=new Intl.PluralRules(this.locale,{type:r}),nO.set(i,s));let a=s.select(e);return o=n[a]||n.other,typeof o=="function"?o():o}number(e){let n=rO.get(this.locale);return n||(n=new Intl.NumberFormat(this.locale),rO.set(this.locale,n)),n.format(e)}select(e,n){let r=e[n]||e.other;return typeof r=="function"?r():r}constructor(e,n){this.locale=e,this.strings=n}}const d2t=new Set(["Arab","Syrc","Samr","Mand","Thaa","Mend","Nkoo","Adlm","Rohg","Hebr"]),f2t=new Set(["ae","ar","arc","bcc","bqi","ckb","dv","fa","glk","he","ku","mzn","nqo","pnb","ps","sd","ug","ur","yi"]);function p2t(t){if(Intl.Locale){let n=new Intl.Locale(t).maximize().script;return d2t.has(n)}let e=t.split("-")[0];return f2t.has(e)}function F9(){let t=typeof navigator!="undefined"&&(navigator.language||navigator.userLanguage)||"en-US";try{Intl.DateTimeFormat.supportedLocalesOf([t])}catch(e){t="en-US"}return{locale:t,direction:p2t(t)?"rtl":"ltr"}}let Ok=F9(),Kf=new Set;function oO(){Ok=F9();for(let t of Kf)t(Ok)}function h2t(){let t=vC(),[e,n]=k.useState(Ok);return k.useEffect(()=>(Kf.size===0&&window.addEventListener("languagechange",oO),Kf.add(n),()=>{Kf.delete(n),Kf.size===0&&window.removeEventListener("languagechange",oO)}),[]),t?{locale:"en-US",direction:"ltr"}:e}const m2t=H.createContext(null);function AC(){let t=h2t();return k.useContext(m2t)||t}const iO=new WeakMap;function g2t(t){let e=iO.get(t);return e||(e=new a2t(t),iO.set(t,e)),e}function NC(t){let{locale:e}=AC(),n=k.useMemo(()=>g2t(t),[t]);return k.useMemo(()=>new u2t(e,n),[e,n])}let c_=new Map;function B9(t){let{locale:e}=AC(),n=e+(t?Object.entries(t).sort((o,i)=>o[0]<i[0]?-1:1).join():"");if(c_.has(n))return c_.get(n);let r=new Intl.Collator(e,t);return c_.set(n,r),r}function y2t(t){let e=B9({usage:"search",...t}),n=k.useCallback((i,s)=>s.length===0?!0:(i=i.normalize("NFC"),s=s.normalize("NFC"),e.compare(i.slice(0,s.length),s)===0),[e]),r=k.useCallback((i,s)=>s.length===0?!0:(i=i.normalize("NFC"),s=s.normalize("NFC"),e.compare(i.slice(-s.length),s)===0),[e]),o=k.useCallback((i,s)=>{if(s.length===0)return!0;i=i.normalize("NFC"),s=s.normalize("NFC");let a=0,l=s.length;for(;a+l<=i.length;a++){let c=i.slice(a,a+l);if(e.compare(s,c)===0)return!0}return!1},[e]);return k.useMemo(()=>({startsWith:n,endsWith:r,contains:o}),[n,r,o])}const sO={border:0,clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"};function b2t(t={}){let{style:e,isFocusable:n}=t,[r,o]=k.useState(!1),{focusWithinProps:i}=xb({isDisabled:!n,onFocusWithinChange:a=>o(a)}),s=k.useMemo(()=>r?e:e?{...sO,...e}:sO,[r]);return{visuallyHiddenProps:{...i,style:s}}}function v2t(t){let{children:e,elementType:n="div",isFocusable:r,style:o,...i}=t,{visuallyHiddenProps:s}=b2t(t);return H.createElement(n,Sn(i,s),e)}function w2t(t){return t&&t.__esModule?t.default:t}const _2t=new WeakMap,ys=[];function j9(t,e){let{onClose:n,shouldCloseOnBlur:r,isOpen:o,isDismissable:i=!1,isKeyboardDismissDisabled:s=!1,shouldCloseOnInteractOutside:a}=t;k.useEffect(()=>(o&&ys.push(e),()=>{let h=ys.indexOf(e);h>=0&&ys.splice(h,1)}),[o,e]);let l=()=>{ys[ys.length-1]===e&&n&&n()},c=h=>{(!a||a(h.target))&&ys[ys.length-1]===e&&(h.stopPropagation(),h.preventDefault())},u=h=>{(!a||a(h.target))&&(ys[ys.length-1]===e&&(h.stopPropagation(),h.preventDefault()),l())},d=h=>{h.key==="Escape"&&!s&&(h.stopPropagation(),h.preventDefault(),l())};OCt({ref:e,onInteractOutside:i?u:null,onInteractOutsideStart:c});let{focusWithinProps:f}=xb({isDisabled:!r,onBlurWithin:h=>{!h.relatedTarget||WCt(h.relatedTarget)||(!a||a(h.relatedTarget))&&n()}}),p=h=>{h.target===h.currentTarget&&h.preventDefault()};return{overlayProps:{onKeyDown:d,...f},underlayProps:{onPointerDown:p}}}function x2t(t,e,n){let{type:r}=t,{isOpen:o}=e;k.useEffect(()=>{n&&n.current&&_2t.set(n.current,e.close)});let i;r==="menu"?i=!0:r==="listbox"&&(i="listbox");let s=cl();return{triggerProps:{"aria-haspopup":i,"aria-expanded":o,"aria-controls":o?s:null,onPress:e.toggle},overlayProps:{id:s}}}const u_=typeof document!="undefined"&&window.visualViewport,k2t=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let Eg=0,d_;function $2t(t={}){let{isDisabled:e}=t;Ln(()=>{if(!e)return Eg++,Eg===1&&(_b()?d_=E2t():d_=S2t()),()=>{Eg--,Eg===0&&d_()}},[e])}function S2t(){return _h(_p(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`),_p(document.documentElement,"overflow","hidden"))}function E2t(){let t,e=0,n=d=>{t=Ny(d.target),!(t===document.documentElement&&t===document.body)&&(e=d.changedTouches[0].pageY)},r=d=>{if(!t||t===document.documentElement||t===document.body){d.preventDefault();return}let f=d.changedTouches[0].pageY,p=t.scrollTop,h=t.scrollHeight-t.clientHeight;h!==0&&((p<=0&&f>e||p>=h&&f<e)&&d.preventDefault(),e=f)},o=d=>{let f=d.target;lO(f)&&f!==document.activeElement&&(d.preventDefault(),f.style.transform="translateY(-2000px)",f.focus(),requestAnimationFrame(()=>{f.style.transform=""}))},i=d=>{let f=d.target;lO(f)&&(f.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{f.style.transform="",u_&&(u_.height<window.innerHeight?requestAnimationFrame(()=>{aO(f)}):u_.addEventListener("resize",()=>aO(f),{once:!0}))}))},s=()=>{window.scrollTo(0,0)},a=window.pageXOffset,l=window.pageYOffset,c=_h(_p(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`),_p(document.documentElement,"overflow","hidden"),_p(document.body,"marginTop",`-${l}px`));window.scrollTo(0,0);let u=_h(Of(document,"touchstart",n,{passive:!1,capture:!0}),Of(document,"touchmove",r,{passive:!1,capture:!0}),Of(document,"touchend",o,{passive:!1,capture:!0}),Of(document,"focus",i,!0),Of(window,"scroll",s));return()=>{c(),u(),window.scrollTo(a,l)}}function _p(t,e,n){let r=t.style[e];return t.style[e]=n,()=>{t.style[e]=r}}function Of(t,e,n,r){return t.addEventListener(e,n,r),()=>{t.removeEventListener(e,n,r)}}function aO(t){let e=document.scrollingElement||document.documentElement;for(;t&&t!==e;){let n=Ny(t);if(n!==document.documentElement&&n!==document.body&&n!==t){let r=n.getBoundingClientRect().top,o=t.getBoundingClientRect().top;o>r+t.clientHeight&&(n.scrollTop+=o-r)}t=n.parentElement}}function lO(t){return t instanceof HTMLInputElement&&!k2t.has(t.type)||t instanceof HTMLTextAreaElement||t instanceof HTMLElement&&t.isContentEditable}const Ly=H.createContext(null);function C2t(t){let{children:e}=t,n=k.useContext(Ly),[r,o]=k.useState(0),i=k.useMemo(()=>({parent:n,modalCount:r,addModal(){o(s=>s+1),n&&n.addModal()},removeModal(){o(s=>s-1),n&&n.removeModal()}}),[n,r]);return H.createElement(Ly.Provider,{value:i},e)}function T2t(){let t=k.useContext(Ly);return{modalProviderProps:{"aria-hidden":t&&t.modalCount>0?!0:null}}}function A2t(t){let{modalProviderProps:e}=T2t();return H.createElement("div",{"data-overlay-container":!0,...t,...e})}function N2t(t){return H.createElement(C2t,null,H.createElement(A2t,t))}function R2t(t){let e=vC(),{portalContainer:n=e?null:document.body,...r}=t;if(H.useEffect(()=>{if(n!=null&&n.closest("[data-overlay-container]"))throw new Error("An OverlayContainer must not be inside another container. Please change the portalContainer prop.")},[n]),!n)return null;let o=H.createElement(N2t,r);return vl.createPortal(o,n)}function P2t(t){let e=k.useContext(Ly);if(!e)throw new Error("Modal is not contained within a provider");return k.useEffect(()=>{if(!(t!=null&&t.isDisabled||!e||!e.parent))return e.parent.addModal(),()=>{e&&e.parent&&e.parent.removeModal()}},[e,e.parent,t==null?void 0:t.isDisabled]),{modalProps:{"data-ismodal":!(t!=null&&t.isDisabled)}}}var z9={},q9={};q9={dismiss:""};var W9={};W9={dismiss:""};var U9={};U9={dismiss:"Odstranit"};var V9={};V9={dismiss:"Luk"};var H9={};H9={dismiss:"Schlieen"};var K9={};K9={dismiss:""};var G9={};G9={dismiss:"Dismiss"};var Z9={};Z9={dismiss:"Descartar"};var Y9={};Y9={dismiss:"Lpeta"};var J9={};J9={dismiss:"Hylk"};var X9={};X9={dismiss:"Rejeter"};var Q9={};Q9={dismiss:""};var eF={};eF={dismiss:"Odbaci"};var tF={};tF={dismiss:"Elutasts"};var nF={};nF={dismiss:"Ignora"};var rF={};rF={dismiss:""};var oF={};oF={dismiss:""};var iF={};iF={dismiss:"Atmesti"};var sF={};sF={dismiss:"Nerdt"};var aF={};aF={dismiss:"Lukk"};var lF={};lF={dismiss:"Negeren"};var cF={};cF={dismiss:"Zignoruj"};var uF={};uF={dismiss:"Descartar"};var dF={};dF={dismiss:"Dispensar"};var fF={};fF={dismiss:"Revocare"};var pF={};pF={dismiss:""};var hF={};hF={dismiss:"Zrui"};var mF={};mF={dismiss:"Opusti"};var gF={};gF={dismiss:"Odbaci"};var yF={};yF={dismiss:"Avvisa"};var bF={};bF={dismiss:"Kapat"};var vF={};vF={dismiss:""};var wF={};wF={dismiss:""};var _F={};_F={dismiss:""};z9={"ar-AE":q9,"bg-BG":W9,"cs-CZ":U9,"da-DK":V9,"de-DE":H9,"el-GR":K9,"en-US":G9,"es-ES":Z9,"et-EE":Y9,"fi-FI":J9,"fr-FR":X9,"he-IL":Q9,"hr-HR":eF,"hu-HU":tF,"it-IT":nF,"ja-JP":rF,"ko-KR":oF,"lt-LT":iF,"lv-LV":sF,"nb-NO":aF,"nl-NL":lF,"pl-PL":cF,"pt-BR":uF,"pt-PT":dF,"ro-RO":fF,"ru-RU":pF,"sk-SK":hF,"sl-SI":mF,"sr-SP":gF,"sv-SE":yF,"tr-TR":bF,"uk-UA":vF,"zh-CN":wF,"zh-TW":_F};function O2t(t){let{onDismiss:e,...n}=t,r=NC(w2t(z9)),o=Ay(n,r.format("dismiss")),i=()=>{e&&e()};return H.createElement(v2t,null,H.createElement("button",{...o,tabIndex:-1,onClick:i}))}let If=new WeakMap,xo=[];function I2t(t,e=document.body){let n=new Set(t),r=new Set,o=l=>{for(let f of l.querySelectorAll("[data-live-announcer], [data-react-aria-top-layer]"))n.add(f);let c=f=>{if(n.has(f)||r.has(f.parentElement)&&f.parentElement.getAttribute("role")!=="row")return NodeFilter.FILTER_REJECT;for(let p of n)if(f.contains(p))return NodeFilter.FILTER_SKIP;return NodeFilter.FILTER_ACCEPT},u=document.createTreeWalker(l,NodeFilter.SHOW_ELEMENT,{acceptNode:c}),d=c(l);if(d===NodeFilter.FILTER_ACCEPT&&i(l),d!==NodeFilter.FILTER_REJECT){let f=u.nextNode();for(;f!=null;)i(f),f=u.nextNode()}},i=l=>{var c;let u=(c=If.get(l))!==null&&c!==void 0?c:0;l.getAttribute("aria-hidden")==="true"&&u===0||(u===0&&l.setAttribute("aria-hidden","true"),r.add(l),If.set(l,u+1))};xo.length&&xo[xo.length-1].disconnect(),o(e);let s=new MutationObserver(l=>{for(let c of l)if(!(c.type!=="childList"||c.addedNodes.length===0)&&![...n,...r].some(u=>u.contains(c.target))){for(let u of c.removedNodes)u instanceof Element&&(n.delete(u),r.delete(u));for(let u of c.addedNodes)(u instanceof HTMLElement||u instanceof SVGElement)&&(u.dataset.liveAnnouncer==="true"||u.dataset.reactAriaTopLayer==="true")?n.add(u):u instanceof Element&&o(u)}});s.observe(e,{childList:!0,subtree:!0});let a={observe(){s.observe(e,{childList:!0,subtree:!0})},disconnect(){s.disconnect()}};return xo.push(a),()=>{s.disconnect();for(let l of r){let c=If.get(l);c===1?(l.removeAttribute("aria-hidden"),If.delete(l)):If.set(l,c-1)}a===xo[xo.length-1]?(xo.pop(),xo.length&&xo[xo.length-1].observe()):xo.splice(xo.indexOf(a),1)}}const D2t=H.createContext(null);function M2t(){let t=k.useContext(D2t),e=t==null?void 0:t.setContain;Ln(()=>{e==null||e(!0)},[e])}function xF(t){let{id:e,label:n,"aria-labelledby":r,"aria-label":o,labelElementType:i="label"}=t;e=cl(e);let s=cl(),a={};n?(r=r?`${s} ${r}`:s,a={id:s,htmlFor:i==="label"?e:void 0}):!r&&!o&&console.warn("If you do not provide a visible label, you must specify an aria-label or aria-labelledby attribute for accessibility");let l=Ay({id:e,"aria-label":o,"aria-labelledby":r});return{labelProps:a,fieldProps:l}}function L2t(t){let{description:e,errorMessage:n,isInvalid:r,validationState:o}=t,{labelProps:i,fieldProps:s}=xF(t),a=wh([!!e,!!n,r,o]),l=wh([!!e,!!n,r,o]);return s=Sn(s,{"aria-describedby":[a,l,t["aria-describedby"]].filter(Boolean).join(" ")||void 0}),{labelProps:i,fieldProps:s,descriptionProps:{id:a},errorMessageProps:{id:l}}}function Ik(t){return n1()?t.altKey:t.ctrlKey}function du(t){return ul()?t.metaKey:t.ctrlKey}const F2t=1e3;function B2t(t){let{keyboardDelegate:e,selectionManager:n,onTypeSelect:r}=t,o=k.useRef({search:"",timeout:null}).current,i=s=>{let a=j2t(s.key);if(!a||s.ctrlKey||s.metaKey||!s.currentTarget.contains(s.target))return;a===" "&&o.search.trim().length>0&&(s.preventDefault(),"continuePropagation"in s||s.stopPropagation()),o.search+=a;let l=e.getKeyForSearch(o.search,n.focusedKey);l==null&&(l=e.getKeyForSearch(o.search)),l!=null&&(n.setFocusedKey(l),r&&r(l)),clearTimeout(o.timeout),o.timeout=setTimeout(()=>{o.search=""},F2t)};return{typeSelectProps:{onKeyDownCapture:e.getKeyForSearch?i:null}}}function j2t(t){return t.length===1||!/^[A-Z]/i.test(t)?t:""}function kF(t){let{selectionManager:e,keyboardDelegate:n,ref:r,autoFocus:o=!1,shouldFocusWrap:i=!1,disallowEmptySelection:s=!1,disallowSelectAll:a=!1,selectOnFocus:l=e.selectionBehavior==="replace",disallowTypeAhead:c=!1,shouldUseVirtualFocus:u,allowsTabNavigation:d=!1,isVirtualized:f,scrollRef:p=r,linkBehavior:h="action"}=t,{direction:y}=AC(),m=_C(),w=j=>{if(j.altKey&&j.key==="Tab"&&j.preventDefault(),!r.current.contains(j.target))return;const U=(Ae,ae)=>{if(Ae!=null){if(e.isLink(Ae)&&h==="selection"&&l&&!Ik(j)){dC.flushSync(()=>{e.setFocusedKey(Ae,ae)});let fe=p.current.querySelector(`[data-key="${Ae}"]`);m.open(fe,j);return}if(e.setFocusedKey(Ae,ae),e.isLink(Ae)&&h==="override")return;j.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(Ae):l&&!Ik(j)&&e.replaceSelection(Ae)}};switch(j.key){case"ArrowDown":if(n.getKeyBelow){var ce,W;j.preventDefault();let Ae=e.focusedKey!=null?n.getKeyBelow(e.focusedKey):(ce=n.getFirstKey)===null||ce===void 0?void 0:ce.call(n);Ae==null&&i&&(Ae=(W=n.getFirstKey)===null||W===void 0?void 0:W.call(n,e.focusedKey)),U(Ae)}break;case"ArrowUp":if(n.getKeyAbove){var P,ne;j.preventDefault();let Ae=e.focusedKey!=null?n.getKeyAbove(e.focusedKey):(P=n.getLastKey)===null||P===void 0?void 0:P.call(n);Ae==null&&i&&(Ae=(ne=n.getLastKey)===null||ne===void 0?void 0:ne.call(n,e.focusedKey)),U(Ae)}break;case"ArrowLeft":if(n.getKeyLeftOf){var Q,oe;j.preventDefault();let Ae=n.getKeyLeftOf(e.focusedKey);Ae==null&&i&&(Ae=y==="rtl"?(Q=n.getFirstKey)===null||Q===void 0?void 0:Q.call(n,e.focusedKey):(oe=n.getLastKey)===null||oe===void 0?void 0:oe.call(n,e.focusedKey)),U(Ae,y==="rtl"?"first":"last")}break;case"ArrowRight":if(n.getKeyRightOf){var nt,xt;j.preventDefault();let Ae=n.getKeyRightOf(e.focusedKey);Ae==null&&i&&(Ae=y==="rtl"?(nt=n.getLastKey)===null||nt===void 0?void 0:nt.call(n,e.focusedKey):(xt=n.getFirstKey)===null||xt===void 0?void 0:xt.call(n,e.focusedKey)),U(Ae,y==="rtl"?"last":"first")}break;case"Home":if(n.getFirstKey){j.preventDefault();let Ae=n.getFirstKey(e.focusedKey,du(j));e.setFocusedKey(Ae),du(j)&&j.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(Ae):l&&e.replaceSelection(Ae)}break;case"End":if(n.getLastKey){j.preventDefault();let Ae=n.getLastKey(e.focusedKey,du(j));e.setFocusedKey(Ae),du(j)&&j.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(Ae):l&&e.replaceSelection(Ae)}break;case"PageDown":if(n.getKeyPageBelow){j.preventDefault();let Ae=n.getKeyPageBelow(e.focusedKey);U(Ae)}break;case"PageUp":if(n.getKeyPageAbove){j.preventDefault();let Ae=n.getKeyPageAbove(e.focusedKey);U(Ae)}break;case"a":du(j)&&e.selectionMode==="multiple"&&a!==!0&&(j.preventDefault(),e.selectAll());break;case"Escape":j.preventDefault(),s||e.clearSelection();break;case"Tab":if(!d){if(j.shiftKey)r.current.focus();else{let Ae=Ps(r.current,{tabbable:!0}),ae,fe;do fe=Ae.lastChild(),fe&&(ae=fe);while(fe);ae&&!ae.contains(document.activeElement)&&Ns(ae)}break}}},x=k.useRef({top:0,left:0});dCt(p,"scroll",f?null:()=>{x.current={top:p.current.scrollTop,left:p.current.scrollLeft}});let $=j=>{if(e.isFocused){j.currentTarget.contains(j.target)||e.setFocused(!1);return}if(j.currentTarget.contains(j.target)){if(e.setFocused(!0),e.focusedKey==null){let W=ne=>{ne!=null&&(e.setFocusedKey(ne),l&&e.replaceSelection(ne))},P=j.relatedTarget;var U,ce;P&&j.currentTarget.compareDocumentPosition(P)&Node.DOCUMENT_POSITION_FOLLOWING?W((U=e.lastSelectedKey)!==null&&U!==void 0?U:n.getLastKey()):W((ce=e.firstSelectedKey)!==null&&ce!==void 0?ce:n.getFirstKey())}else f||(p.current.scrollTop=x.current.top,p.current.scrollLeft=x.current.left);if(!f&&e.focusedKey!=null){let W=p.current.querySelector(`[data-key="${e.focusedKey}"]`);W&&(W.contains(document.activeElement)||Ns(W),Ak()==="keyboard"&&UP(W,{containingElement:r.current}))}}},S=j=>{j.currentTarget.contains(j.relatedTarget)||e.setFocused(!1)};const I=k.useRef(o);k.useEffect(()=>{if(I.current){let j=null;o==="first"&&(j=n.getFirstKey()),o==="last"&&(j=n.getLastKey());let U=e.selectedKeys;U.size&&(j=U.values().next().value),e.setFocused(!0),e.setFocusedKey(j),j==null&&!u&&Ac(r.current)}I.current=!1},[]);let E=k.useRef(e.focusedKey);k.useEffect(()=>{let j=Ak();if(e.isFocused&&e.focusedKey!=null&&(p!=null&&p.current)){let U=p.current.querySelector(`[data-key="${e.focusedKey}"]`);U&&j==="keyboard"&&(f||S9(p.current,U),UP(U,{containingElement:r.current}))}e.isFocused&&e.focusedKey==null&&E.current!=null&&Ac(r.current),E.current=e.focusedKey},[f,p,e.focusedKey,e.isFocused,r]);let L={onKeyDown:w,onFocus:$,onBlur:S,onMouseDown(j){p.current===j.target&&j.preventDefault()}},{typeSelectProps:T}=B2t({keyboardDelegate:n,selectionManager:e});c||(L=Sn(T,L));let F;return u||(F=e.focusedKey==null?0:-1),{collectionProps:{...L,tabIndex:F}}}function z2t(t){let{selectionManager:e,key:n,ref:r,shouldSelectOnPressUp:o,shouldUseVirtualFocus:i,focus:s,isDisabled:a,onAction:l,allowsDifferentPressOrigin:c,linkBehavior:u="action"}=t,d=_C(),f=oe=>{if(oe.pointerType==="keyboard"&&Ik(oe))e.toggleSelection(n);else{if(e.selectionMode==="none")return;if(e.isLink(n)){if(u==="selection"){d.open(r.current,oe),e.setSelectedKeys(e.selectedKeys);return}else if(u==="override"||u==="none")return}e.selectionMode==="single"?e.isSelected(n)&&!e.disallowEmptySelection?e.toggleSelection(n):e.replaceSelection(n):oe&&oe.shiftKey?e.extendSelection(n):e.selectionBehavior==="toggle"||oe&&(du(oe)||oe.pointerType==="touch"||oe.pointerType==="virtual")?e.toggleSelection(n):e.replaceSelection(n)}};k.useEffect(()=>{n===e.focusedKey&&e.isFocused&&!i&&(s?s():document.activeElement!==r.current&&Ac(r.current))},[r,n,e.focusedKey,e.childFocusStrategy,e.isFocused,i]),a=a||e.isDisabled(n);let p={};!i&&!a?p={tabIndex:n===e.focusedKey?0:-1,onFocus(oe){oe.target===r.current&&e.setFocusedKey(n)}}:a&&(p.onMouseDown=oe=>{oe.preventDefault()});let h=e.isLink(n)&&u==="override",y=e.isLink(n)&&u!=="selection"&&u!=="none",m=!a&&e.canSelectItem(n)&&!h,w=(l||y)&&!a,x=w&&(e.selectionBehavior==="replace"?!m:!m||e.isEmpty),$=w&&m&&e.selectionBehavior==="replace",S=x||$,I=k.useRef(null),E=S&&m,L=k.useRef(!1),T=k.useRef(!1),F=oe=>{l&&l(),y&&d.open(r.current,oe)},j={};o?(j.onPressStart=oe=>{I.current=oe.pointerType,L.current=E,oe.pointerType==="keyboard"&&(!S||uO())&&f(oe)},c?(j.onPressUp=x?null:oe=>{oe.pointerType!=="keyboard"&&m&&f(oe)},j.onPress=x?F:null):j.onPress=oe=>{if(x||$&&oe.pointerType!=="mouse"){if(oe.pointerType==="keyboard"&&!cO())return;F(oe)}else oe.pointerType!=="keyboard"&&m&&f(oe)}):(j.onPressStart=oe=>{I.current=oe.pointerType,L.current=E,T.current=x,m&&(oe.pointerType==="mouse"&&!x||oe.pointerType==="keyboard"&&(!w||uO()))&&f(oe)},j.onPress=oe=>{(oe.pointerType==="touch"||oe.pointerType==="pen"||oe.pointerType==="virtual"||oe.pointerType==="keyboard"&&S&&cO()||oe.pointerType==="mouse"&&T.current)&&(S?F(oe):m&&f(oe))}),p["data-key"]=n,j.preventFocusOnPress=i;let{pressProps:U,isPressed:ce}=xC(j),W=$?oe=>{I.current==="mouse"&&(oe.stopPropagation(),oe.preventDefault(),F(oe))}:void 0,{longPressProps:P}=R9({isDisabled:!E,onLongPress(oe){oe.pointerType==="touch"&&(f(oe),e.setSelectionBehavior("toggle"))}}),ne=oe=>{I.current==="touch"&&L.current&&oe.preventDefault()},Q=e.isLink(n)?oe=>{Cc.isOpening||oe.preventDefault()}:void 0;return{itemProps:Sn(p,m||x?U:{},E?P:{},{onDoubleClick:W,onDragStartCapture:ne,onClick:Q}),isPressed:ce,isSelected:e.isSelected(n),isFocused:e.isFocused&&e.focusedKey===n,isDisabled:a,allowsSelection:m,hasAction:S}}function cO(){let t=window.event;return(t==null?void 0:t.key)==="Enter"}function uO(){let t=window.event;return(t==null?void 0:t.key)===" "||(t==null?void 0:t.code)==="Space"}class $F{getNextKey(e){for(e=this.collection.getKeyAfter(e);e!=null;){if(this.collection.getItem(e).type==="item"&&!this.disabledKeys.has(e))return e;e=this.collection.getKeyAfter(e)}return null}getPreviousKey(e){for(e=this.collection.getKeyBefore(e);e!=null;){if(this.collection.getItem(e).type==="item"&&!this.disabledKeys.has(e))return e;e=this.collection.getKeyBefore(e)}return null}findKey(e,n,r){let o=this.getItem(e);if(!o)return null;let i=o.getBoundingClientRect();do e=n(e),o=this.getItem(e);while(o&&r(i,o.getBoundingClientRect()));return e}isSameRow(e,n){return e.top===n.top||e.left!==n.left}isSameColumn(e,n){return e.left===n.left||e.top!==n.top}getKeyBelow(e){return this.layout==="grid"&&this.orientation==="vertical"?this.findKey(e,n=>this.getNextKey(n),this.isSameRow):this.getNextKey(e)}getKeyAbove(e){return this.layout==="grid"&&this.orientation==="vertical"?this.findKey(e,n=>this.getPreviousKey(n),this.isSameRow):this.getPreviousKey(e)}getNextColumn(e,n){return n?this.getPreviousKey(e):this.getNextKey(e)}getKeyRightOf(e){return this.layout==="grid"?this.orientation==="vertical"?this.getNextColumn(e,this.direction==="rtl"):this.findKey(e,n=>this.getNextColumn(n,this.direction==="rtl"),this.isSameColumn):this.orientation==="horizontal"?this.getNextColumn(e,this.direction==="rtl"):null}getKeyLeftOf(e){return this.layout==="grid"?this.orientation==="vertical"?this.getNextColumn(e,this.direction==="ltr"):this.findKey(e,n=>this.getNextColumn(n,this.direction==="ltr"),this.isSameColumn):this.orientation==="horizontal"?this.getNextColumn(e,this.direction==="ltr"):null}getFirstKey(){let e=this.collection.getFirstKey();for(;e!=null;){if(this.collection.getItem(e).type==="item"&&!this.disabledKeys.has(e))return e;e=this.collection.getKeyAfter(e)}return null}getLastKey(){let e=this.collection.getLastKey();for(;e!=null;){if(this.collection.getItem(e).type==="item"&&!this.disabledKeys.has(e))return e;e=this.collection.getKeyBefore(e)}return null}getItem(e){return this.ref.current.querySelector(`[data-key="${e}"]`)}getKeyPageAbove(e){let n=this.ref.current,r=this.getItem(e);if(!r)return null;if(!Ry(n))return this.getFirstKey();let o=n.getBoundingClientRect(),i=r.getBoundingClientRect();if(this.orientation==="horizontal"){let s=o.x-n.scrollLeft,a=Math.max(0,i.x-s+i.width-o.width);for(;r&&i.x-s>a;)e=this.getKeyAbove(e),r=e==null?null:this.getItem(e),i=r==null?void 0:r.getBoundingClientRect()}else{let s=o.y-n.scrollTop,a=Math.max(0,i.y-s+i.height-o.height);for(;r&&i.y-s>a;)e=this.getKeyAbove(e),r=e==null?null:this.getItem(e),i=r==null?void 0:r.getBoundingClientRect()}return e!=null?e:this.getFirstKey()}getKeyPageBelow(e){let n=this.ref.current,r=this.getItem(e);if(!r)return null;if(!Ry(n))return this.getLastKey();let o=n.getBoundingClientRect(),i=r.getBoundingClientRect();if(this.orientation==="horizontal"){let s=o.x-n.scrollLeft,a=Math.min(n.scrollWidth,i.x-s-i.width+o.width);for(;r&&i.x-s<a;)e=this.getKeyBelow(e),r=e==null?null:this.getItem(e),i=r==null?void 0:r.getBoundingClientRect()}else{let s=o.y-n.scrollTop,a=Math.min(n.scrollHeight,i.y-s-i.height+o.height);for(;r&&i.y-s<a;)e=this.getKeyBelow(e),r=e==null?null:this.getItem(e),i=r==null?void 0:r.getBoundingClientRect()}return e!=null?e:this.getLastKey()}getKeyForSearch(e,n){if(!this.collator)return null;let r=this.collection,o=n||this.getFirstKey();for(;o!=null;){let i=r.getItem(o),s=i.textValue.slice(0,e.length);if(i.textValue&&this.collator.compare(s,e)===0)return o;o=this.getKeyBelow(o)}return null}constructor(...e){if(e.length===1){let n=e[0];this.collection=n.collection,this.ref=n.ref,this.collator=n.collator,this.disabledKeys=n.disabledKeys||new Set,this.orientation=n.orientation,this.direction=n.direction,this.layout=n.layout||"stack"}else this.collection=e[0],this.disabledKeys=e[1],this.ref=e[2],this.collator=e[3],this.layout="stack",this.orientation="vertical";this.layout==="stack"&&this.orientation==="vertical"&&(this.getKeyLeftOf=void 0,this.getKeyRightOf=void 0)}}function q2t(t){let{selectionManager:e,collection:n,disabledKeys:r,ref:o,keyboardDelegate:i}=t,s=B9({usage:"search",sensitivity:"base"}),a=e.disabledBehavior,l=k.useMemo(()=>i||new $F(n,a==="selection"?new Set:r,o,s),[i,n,r,o,s,a]),{collectionProps:c}=kF({...t,ref:o,selectionManager:e,keyboardDelegate:l});return{listProps:c}}function SF(t){return null}SF.getCollectionNode=function*(e,n){let{childItems:r,title:o,children:i}=e,s=e.title||e.children,a=e.textValue||(typeof s=="string"?s:"")||e["aria-label"]||"";!a&&!(n!=null&&n.suppressTextValueWarning)&&console.warn("<Item> with non-plain text contents is unsupported by type to select for accessibility. Please add a `textValue` prop."),yield{type:"item",props:e,rendered:s,textValue:a,"aria-label":e["aria-label"],hasChildNodes:W2t(e),*childNodes(){if(r)for(let l of r)yield{type:"item",value:l};else if(o){let l=[];H.Children.forEach(i,c=>{l.push({type:"item",element:c})}),yield*l}}}};function W2t(t){return t.hasChildItems!=null?t.hasChildItems:!!(t.childItems||t.title&&H.Children.count(t.children)>0)}let o1=SF;function EF(t){return null}EF.getCollectionNode=function*(e){let{children:n,title:r,items:o}=e;yield{type:"section",props:e,hasChildNodes:!0,rendered:r,"aria-label":e["aria-label"],*childNodes(){if(typeof n=="function"){if(!o)throw new Error("props.children was a function but props.items is missing");for(let i of o)yield{type:"item",value:i,renderer:n}}else{let i=[];H.Children.forEach(n,s=>{i.push({type:"item",element:s})}),yield*i}}}};let U2t=EF;class V2t{build(e,n){return this.context=n,dO(()=>this.iterateCollection(e))}*iterateCollection(e){let{children:n,items:r}=e;if(typeof n=="function"){if(!r)throw new Error("props.children was a function but props.items is missing");for(let o of e.items)yield*this.getFullNode({value:o},{renderer:n})}else{let o=[];H.Children.forEach(n,s=>{o.push(s)});let i=0;for(let s of o){let a=this.getFullNode({element:s,index:i},{});for(let l of a)i++,yield l}}}getKey(e,n,r,o){if(e.key!=null)return e.key;if(n.type==="cell"&&n.key!=null)return`${o}${n.key}`;let i=n.value;if(i!=null){var s;let a=(s=i.key)!==null&&s!==void 0?s:i.id;if(a==null)throw new Error("No key found for item");return a}return o?`${o}.${n.index}`:`$.${n.index}`}getChildState(e,n){return{renderer:n.renderer||e.renderer}}*getFullNode(e,n,r,o){let i=e.element;if(!i&&e.value&&n&&n.renderer){let l=this.cache.get(e.value);if(l&&(!l.shouldInvalidate||!l.shouldInvalidate(this.context))){l.index=e.index,l.parentKey=o?o.key:null,yield l;return}i=n.renderer(e.value)}if(H.isValidElement(i)){let l=i.type;if(typeof l!="function"&&typeof l.getCollectionNode!="function"){let f=typeof i.type=="function"?i.type.name:i.type;throw new Error(`Unknown element <${f}> in collection.`)}let c=l.getCollectionNode(i.props,this.context),u=e.index,d=c.next();for(;!d.done&&d.value;){let f=d.value;e.index=u;let p=f.key;p||(p=f.element?null:this.getKey(i,e,n,r));let y=[...this.getFullNode({...f,key:p,index:u,wrapper:H2t(e.wrapper,f.wrapper)},this.getChildState(n,f),r?`${r}${i.key}`:i.key,o)];for(let m of y){if(m.value=f.value||e.value,m.value&&this.cache.set(m.value,m),e.type&&m.type!==e.type)throw new Error(`Unsupported type <${f_(m.type)}> in <${f_(o.type)}>. Only <${f_(e.type)}> is supported.`);u++,yield m}d=c.next(y)}return}if(e.key==null)return;let s=this,a={type:e.type,props:e.props,key:e.key,parentKey:o?o.key:null,value:e.value,level:o?o.level+1:0,index:e.index,rendered:e.rendered,textValue:e.textValue,"aria-label":e["aria-label"],wrapper:e.wrapper,shouldInvalidate:e.shouldInvalidate,hasChildNodes:e.hasChildNodes,childNodes:dO(function*(){if(!e.hasChildNodes)return;let l=0;for(let c of e.childNodes()){c.key!=null&&(c.key=`${a.key}${c.key}`),c.index=l;let u=s.getFullNode(c,s.getChildState(n,c),a.key,a);for(let d of u)l++,yield d}})};yield a}constructor(){this.cache=new WeakMap}}function dO(t){let e=[],n=null;return{*[Symbol.iterator](){for(let r of e)yield r;n||(n=t());for(let r of n)e.push(r),yield r}}}function H2t(t,e){if(t&&e)return n=>t(e(n));if(t)return t;if(e)return e}function f_(t){return t[0].toUpperCase()+t.slice(1)}function K2t(t,e,n){let r=k.useMemo(()=>new V2t,[]),{children:o,items:i,collection:s}=t;return k.useMemo(()=>{if(s)return s;let l=r.build({children:o,items:i},n);return e(l)},[r,o,i,s,n,e])}function $b(t,e){return typeof e.getChildren=="function"?e.getChildren(t.key):t.childNodes}function G2t(t){return Z2t(t,0)}function Z2t(t,e){if(e<0)return;let n=0;for(let r of t){if(n===e)return r;n++}}function p_(t,e,n){if(e.parentKey===n.parentKey)return e.index-n.index;let r=[...fO(t,e),e],o=[...fO(t,n),n],i=r.slice(0,o.length).findIndex((s,a)=>s!==o[a]);return i!==-1?(e=r[i],n=o[i],e.index-n.index):r.findIndex(s=>s===n)>=0?1:(o.findIndex(s=>s===e)>=0,-1)}function fO(t,e){let n=[];for(;(e==null?void 0:e.parentKey)!=null;)e=t.getItem(e.parentKey),n.unshift(e);return n}const pO=new WeakMap;function CF(t){let e=pO.get(t);if(e!=null)return e;e=0;let n=r=>{for(let o of r)o.type==="section"?n($b(o,t)):e++};return n(t),pO.set(t,e),e}const Sb=new WeakMap;function Y2t(t){return typeof t=="string"?t.replace(/\s*/g,""):""+t}function TF(t,e){let n=Sb.get(t);if(!n)throw new Error("Unknown list");return`${n.id}-option-${Y2t(e)}`}function J2t(t,e,n){let r=Xd(t,{labelable:!0}),o=t.selectionBehavior||"toggle",i=t.linkBehavior||(o==="replace"?"action":"override");o==="toggle"&&i==="action"&&(i="override");let{listProps:s}=q2t({...t,ref:n,selectionManager:e.selectionManager,collection:e.collection,disabledKeys:e.disabledKeys,linkBehavior:i}),{focusWithinProps:a}=xb({onFocusWithin:t.onFocus,onBlurWithin:t.onBlur,onFocusWithinChange:t.onFocusChange}),l=cl(t.id);Sb.set(e,{id:l,shouldUseVirtualFocus:t.shouldUseVirtualFocus,shouldSelectOnPressUp:t.shouldSelectOnPressUp,shouldFocusOnHover:t.shouldFocusOnHover,isVirtualized:t.isVirtualized,onAction:t.onAction,linkBehavior:i});let{labelProps:c,fieldProps:u}=xF({...t,id:l,labelElementType:"span"});return{labelProps:c,listBoxProps:Sn(r,a,e.selectionManager.selectionMode==="multiple"?{"aria-multiselectable":"true"}:{},{role:"listbox",...Sn(u,s)})}}function AF(t,e,n){var r;let{key:o}=t,i=Sb.get(e);var s;let a=(s=t.isDisabled)!==null&&s!==void 0?s:e.disabledKeys.has(o);var l;let c=(l=t.isSelected)!==null&&l!==void 0?l:e.selectionManager.isSelected(o);var u;let d=(u=t.shouldSelectOnPressUp)!==null&&u!==void 0?u:i==null?void 0:i.shouldSelectOnPressUp;var f;let p=(f=t.shouldFocusOnHover)!==null&&f!==void 0?f:i==null?void 0:i.shouldFocusOnHover;var h;let y=(h=t.shouldUseVirtualFocus)!==null&&h!==void 0?h:i==null?void 0:i.shouldUseVirtualFocus;var m;let w=(m=t.isVirtualized)!==null&&m!==void 0?m:i==null?void 0:i.isVirtualized,x=wh(),$=wh(),S={role:"option","aria-disabled":a||void 0,"aria-selected":e.selectionManager.selectionMode!=="none"?c:void 0};ul()&&w9()||(S["aria-label"]=t["aria-label"],S["aria-labelledby"]=x,S["aria-describedby"]=$);let I=e.collection.getItem(o);if(w){let W=Number(I==null?void 0:I.index);S["aria-posinset"]=Number.isNaN(W)?void 0:W+1,S["aria-setsize"]=CF(e.collection)}let{itemProps:E,isPressed:L,isFocused:T,hasAction:F,allowsSelection:j}=z2t({selectionManager:e.selectionManager,key:o,ref:n,shouldSelectOnPressUp:d,allowsDifferentPressOrigin:d&&p,isVirtualized:w,shouldUseVirtualFocus:y,isDisabled:a,onAction:i!=null&&i.onAction?()=>{var W;return i==null||(W=i.onAction)===null||W===void 0?void 0:W.call(i,o)}:void 0,linkBehavior:i==null?void 0:i.linkBehavior}),{hoverProps:U}=kb({isDisabled:a||!p,onHoverStart(){Py()||(e.selectionManager.setFocused(!0),e.selectionManager.setFocusedKey(o))}}),ce=Xd(I==null?void 0:I.props,{isLink:!!(!(I==null||(r=I.props)===null||r===void 0)&&r.href)});return delete ce.id,{optionProps:{...S,...Sn(ce,E,U),id:TF(e,o)},labelProps:{id:x},descriptionProps:{id:$},isFocused:T,isFocusVisible:T&&Py(),isSelected:c,isDisabled:a,isPressed:L,allowsSelection:j,hasAction:F}}function X2t(t){let{heading:e,"aria-label":n}=t,r=cl();return{itemProps:{role:"presentation"},headingProps:e?{id:r,role:"presentation"}:{},groupProps:{role:"group","aria-label":n,"aria-labelledby":e?r:void 0}}}function Q2t(t){return t&&t.__esModule?t.default:t}var NF={},RF={};RF={longPressMessage:"     Alt +    "};var PF={};PF={longPressMessage:"    Alt+  ,    "};var OF={};OF={longPressMessage:"Dlouhm stiskem nebo stisknutm klves Alt + ipka dol otevete nabdku"};var IF={};IF={longPressMessage:"Langt tryk eller tryk p Alt + pil ned for at bne menuen"};var DF={};DF={longPressMessage:"Drcken Sie lange oder drcken Sie Alt + Nach-unten, um das Men zu ffnen"};var MF={};MF={longPressMessage:"    Alt +       "};var LF={};LF={longPressMessage:"Long press or press Alt + ArrowDown to open menu"};var FF={};FF={longPressMessage:"Mantenga pulsado o pulse Alt + flecha abajo para abrir el men"};var BF={};BF={longPressMessage:"Men avamiseks vajutage pikalt vi vajutage klahve Alt + allanool"};var jF={};jF={longPressMessage:"Avaa valikko painamalla pohjassa tai nppinyhdistelmll Alt + Alanuoli"};var zF={};zF={longPressMessage:"Appuyez de manire prolonge ou appuyez sur Alt+Flche vers le bas pour ouvrir le menu."};var qF={};qF={longPressMessage:"     Alt + ArrowDown    "};var WF={};WF={longPressMessage:"Dugo pritisnite ili pritisnite Alt + strelicu prema dolje za otvaranje izbornika"};var UF={};UF={longPressMessage:"Nyomja meg hosszan, vagy nyomja meg az Alt + lefele nyl gombot a men megnyitshoz"};var VF={};VF={longPressMessage:"Premere a lungo o premere Alt + Freccia gi per aprire il menu"};var HF={};HF={longPressMessage:" Alt+"};var KF={};KF={longPressMessage:"  Alt +     "};var GF={};GF={longPressMessage:"Nordami atidaryti meniu, nuspaud palaikykite arba paspauskite Alt + ArrowDown."};var ZF={};ZF={longPressMessage:"Lai atvrtu izvlni, turiet nospiestu vai nospiediet taustiu kombinciju Alt + lejupvrst bultia"};var YF={};YF={longPressMessage:"Langt trykk eller trykk Alt + PilNed for  pne menyen"};var JF={};JF={longPressMessage:"Druk lang op Alt + pijl-omlaag of druk op Alt om het menu te openen"};var XF={};XF={longPressMessage:"Nacinij i przytrzymaj lub nacinij klawisze Alt + Strzaka w d, aby otworzy menu"};var QF={};QF={longPressMessage:"Pressione e segure ou pressione Alt + Seta para baixo para abrir o menu"};var eB={};eB={longPressMessage:"Prima continuamente ou prima Alt + Seta Para Baixo para abrir o menu"};var tB={};tB={longPressMessage:"Apsai lung sau apsai pe Alt + sgeat n jos pentru a deschide meniul"};var nB={};nB={longPressMessage:"     Alt +  ,   "};var rB={};rB={longPressMessage:"Ponuku otvorte dlhm stlaenm alebo stlaenm klvesu Alt + klvesu so pkou nadol"};var oB={};oB={longPressMessage:"Za odprtje menija pritisnite in drite gumb ali pritisnite Alt+puica navzdol"};var iB={};iB={longPressMessage:"Dugo pritisnite ili pritisnite Alt + strelicu prema dole da otvorite meni"};var sB={};sB={longPressMessage:"Hll nedtryckt eller tryck p Alt + pil nedt fr att ppna menyn"};var aB={};aB={longPressMessage:"Meny amak iin uzun basn veya Alt + Aa Ok tuuna basn"};var lB={};lB={longPressMessage:"      Alt   ,   "};var cB={};cB={longPressMessage:" Alt + "};var uB={};uB={longPressMessage:" Alt+"};NF={"ar-AE":RF,"bg-BG":PF,"cs-CZ":OF,"da-DK":IF,"de-DE":DF,"el-GR":MF,"en-US":LF,"es-ES":FF,"et-EE":BF,"fi-FI":jF,"fr-FR":zF,"he-IL":qF,"hr-HR":WF,"hu-HU":UF,"it-IT":VF,"ja-JP":HF,"ko-KR":KF,"lt-LT":GF,"lv-LV":ZF,"nb-NO":YF,"nl-NL":JF,"pl-PL":XF,"pt-BR":QF,"pt-PT":eB,"ro-RO":tB,"ru-RU":nB,"sk-SK":rB,"sl-SI":oB,"sr-SP":iB,"sv-SE":sB,"tr-TR":aB,"uk-UA":lB,"zh-CN":cB,"zh-TW":uB};function eTt(t,e,n){let{type:r="menu",isDisabled:o,trigger:i="press"}=t,s=cl(),{triggerProps:a,overlayProps:l}=x2t({type:r},e,n),c=p=>{if(!o&&!(i==="longPress"&&!p.altKey)&&n&&n.current)switch(p.key){case"Enter":case" ":if(i==="longPress")return;case"ArrowDown":"continuePropagation"in p||p.stopPropagation(),p.preventDefault(),e.toggle("first");break;case"ArrowUp":"continuePropagation"in p||p.stopPropagation(),p.preventDefault(),e.toggle("last");break;default:"continuePropagation"in p&&p.continuePropagation()}},u=NC(Q2t(NF)),{longPressProps:d}=R9({isDisabled:o||i!=="longPress",accessibilityDescription:u.format("longPressMessage"),onLongPressStart(){e.close()},onLongPress(){e.open("first")}}),f={onPressStart(p){p.pointerType!=="touch"&&p.pointerType!=="keyboard"&&!o&&e.toggle(p.pointerType==="virtual"?"first":null)},onPress(p){p.pointerType==="touch"&&!o&&e.toggle()}};return delete a.onPress,{menuTriggerProps:{...a,...i==="press"?f:d,id:s,onKeyDown:c},menuProps:{...l,"aria-labelledby":s,autoFocus:e.focusStrategy||!0,onClose:e.close}}}function dB(t,e){let{inputElementType:n="input",isDisabled:r=!1,isRequired:o=!1,isReadOnly:i=!1,validationState:s,isInvalid:a=!1,type:l="text",value:c,defaultValue:u,onChange:d=()=>{}}=t,{focusableProps:f}=D9(t,e),{labelProps:p,fieldProps:h,descriptionProps:y,errorMessageProps:m}=L2t(t),w=Xd(t,{labelable:!0});const x={type:l,pattern:t.pattern};var $;return pCt(e,($=c!=null?c:u)!==null&&$!==void 0?$:"",d),{labelProps:p,inputProps:Sn(w,n==="input"&&x,{disabled:r,readOnly:i,"aria-required":o||void 0,"aria-invalid":a||s==="invalid"||void 0,"aria-errormessage":t["aria-errormessage"],"aria-activedescendant":t["aria-activedescendant"],"aria-autocomplete":t["aria-autocomplete"],"aria-haspopup":t["aria-haspopup"],value:t.value,defaultValue:t.value?void 0:t.defaultValue,onChange:S=>d(S.target.value),autoComplete:t.autoComplete,maxLength:t.maxLength,minLength:t.minLength,name:t.name,placeholder:t.placeholder,inputMode:t.inputMode,onCopy:t.onCopy,onCut:t.onCut,onPaste:t.onPaste,onCompositionEnd:t.onCompositionEnd,onCompositionStart:t.onCompositionStart,onCompositionUpdate:t.onCompositionUpdate,onSelect:t.onSelect,onBeforeInput:t.onBeforeInput,onInput:t.onInput,...f,...h}),descriptionProps:y,errorMessageProps:m}}function tTt(t){return t&&t.__esModule?t.default:t}var fB={},pB={};pB={buttonLabel:" ",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} `,other:()=>`${e.number(t.optionCount)} `})} .`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`  ${t.groupTitle},  ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} `,other:()=>`${e.number(t.groupCount)} `})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", ",other:""},t.isSelected)}`,listboxLabel:"",selectedAnnouncement:t=>`${t.optionText} `};var hB={};hB={buttonLabel:" ",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} `,other:()=>`${e.number(t.optionCount)} `})}  .`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`  ${t.groupTitle},  ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} `,other:()=>`${e.number(t.groupCount)} `})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", ",other:""},t.isSelected)}`,listboxLabel:"",selectedAnnouncement:t=>`${t.optionText}, `};var mB={};mB={buttonLabel:"Zobrazit doporuen",countAnnouncement:(t,e)=>`K dispozici ${e.plural(t.optionCount,{one:()=>`je ${e.number(t.optionCount)} monost`,other:()=>`jsou/je ${e.number(t.optionCount)} monosti/-`})}.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Zadan skupina ${t.groupTitle} ${e.plural(t.groupCount,{one:()=>`s ${e.number(t.groupCount)} monost`,other:()=>`se ${e.number(t.groupCount)} monostmi`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:" (vybrno)",other:""},t.isSelected)}`,listboxLabel:"Nvrhy",selectedAnnouncement:t=>`${t.optionText}, vybrno`};var gB={};gB={buttonLabel:"Vis forslag",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} mulighed tilgngelig`,other:()=>`${e.number(t.optionCount)} muligheder tilgngelige`})}.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Angivet gruppe ${t.groupTitle}, med ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} mulighed`,other:()=>`${e.number(t.groupCount)} muligheder`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", valgt",other:""},t.isSelected)}`,listboxLabel:"Forslag",selectedAnnouncement:t=>`${t.optionText}, valgt`};var yB={};yB={buttonLabel:"Empfehlungen anzeigen",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} Option`,other:()=>`${e.number(t.optionCount)} Optionen`})} verfgbar.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Eingetretene Gruppe ${t.groupTitle}, mit ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} Option`,other:()=>`${e.number(t.groupCount)} Optionen`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", ausgewhlt",other:""},t.isSelected)}`,listboxLabel:"Empfehlungen",selectedAnnouncement:t=>`${t.optionText}, ausgewhlt`};var bB={};bB={buttonLabel:" ",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} `,other:()=>`${e.number(t.optionCount)}  `})} .`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`  ${t.groupTitle},  ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} `,other:()=>`${e.number(t.groupCount)} `})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", ",other:""},t.isSelected)}`,listboxLabel:"",selectedAnnouncement:t=>`${t.optionText}, `};var vB={};vB={focusAnnouncement:(t,e)=>`${e.select({true:()=>`Entered group ${t.groupTitle}, with ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} option`,other:()=>`${e.number(t.groupCount)} options`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", selected",other:""},t.isSelected)}`,countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} option`,other:()=>`${e.number(t.optionCount)} options`})} available.`,selectedAnnouncement:t=>`${t.optionText}, selected`,buttonLabel:"Show suggestions",listboxLabel:"Suggestions"};var wB={};wB={buttonLabel:"Mostrar sugerencias",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} opcin`,other:()=>`${e.number(t.optionCount)} opciones`})} disponible(s).`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Se ha unido al grupo ${t.groupTitle}, con ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} opcin`,other:()=>`${e.number(t.groupCount)} opciones`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", seleccionado",other:""},t.isSelected)}`,listboxLabel:"Sugerencias",selectedAnnouncement:t=>`${t.optionText}, seleccionado`};var _B={};_B={buttonLabel:"Kuva soovitused",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} valik`,other:()=>`${e.number(t.optionCount)} valikud`})} saadaval.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Sisestatud rhm ${t.groupTitle}, valikuga ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} valik`,other:()=>`${e.number(t.groupCount)} valikud`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", valitud",other:""},t.isSelected)}`,listboxLabel:"Soovitused",selectedAnnouncement:t=>`${t.optionText}, valitud`};var xB={};xB={buttonLabel:"Nyt ehdotukset",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} vaihtoehto`,other:()=>`${e.number(t.optionCount)} vaihtoehdot`})} saatavilla.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Mentiin ryhmn ${t.groupTitle}, ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} vaihtoehdon`,other:()=>`${e.number(t.groupCount)} vaihtoehdon`})} kanssa.`,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", valittu",other:""},t.isSelected)}`,listboxLabel:"Ehdotukset",selectedAnnouncement:t=>`${t.optionText}, valittu`};var kB={};kB={buttonLabel:"Afficher les suggestions",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} option`,other:()=>`${e.number(t.optionCount)} options`})} disponible(s).`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Groupe ${t.groupTitle} saisi, avec ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} option`,other:()=>`${e.number(t.groupCount)} options`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", slectionn(s)",other:""},t.isSelected)}`,listboxLabel:"Suggestions",selectedAnnouncement:t=>`${t.optionText}, slectionn`};var $B={};$B={buttonLabel:" ",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>` ${e.number(t.optionCount)}`,other:()=>`${e.number(t.optionCount)} `})}  .`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`  ${t.groupTitle},  ${e.plural(t.groupCount,{one:()=>` ${e.number(t.groupCount)}`,other:()=>`${e.number(t.groupCount)} `})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", ",other:""},t.isSelected)}`,listboxLabel:"",selectedAnnouncement:t=>`${t.optionText}, `};var SB={};SB={buttonLabel:"Prikai prijedloge",countAnnouncement:(t,e)=>`Dostupno jo: ${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} opcija`,other:()=>`${e.number(t.optionCount)} opcije/a`})}.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Unesena skupina ${t.groupTitle}, s ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} opcijom`,other:()=>`${e.number(t.groupCount)} opcije/a`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", odabranih",other:""},t.isSelected)}`,listboxLabel:"Prijedlozi",selectedAnnouncement:t=>`${t.optionText}, odabrano`};var EB={};EB={buttonLabel:"Javaslatok megjelentse",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} lehetsg`,other:()=>`${e.number(t.optionCount)} lehetsg`})} ll rendelkezsre.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Belpett a(z) ${t.groupTitle} csoportba, amely ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} lehetsget`,other:()=>`${e.number(t.groupCount)} lehetsget`})} tartalmaz. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", kijellve",other:""},t.isSelected)}`,listboxLabel:"Javaslatok",selectedAnnouncement:t=>`${t.optionText}, kijellve`};var CB={};CB={buttonLabel:"Mostra suggerimenti",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} opzione disponibile`,other:()=>`${e.number(t.optionCount)} opzioni disponibili`})}.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Ingresso nel gruppo ${t.groupTitle}, con ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} opzione`,other:()=>`${e.number(t.groupCount)} opzioni`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", selezionato",other:""},t.isSelected)}`,listboxLabel:"Suggerimenti",selectedAnnouncement:t=>`${t.optionText}, selezionato`};var TB={};TB={buttonLabel:"",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} `,other:()=>`${e.number(t.optionCount)} `})}`,focusAnnouncement:(t,e)=>`${e.select({true:()=>` ${t.groupTitle}${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} `,other:()=>`${e.number(t.groupCount)} `})}`,other:""},t.isGroupChange)}${t.optionText}${e.select({true:"",other:""},t.isSelected)}`,listboxLabel:"",selectedAnnouncement:t=>`${t.optionText}`};var AB={};AB={buttonLabel:"  ",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} `,other:()=>`${e.number(t.optionCount)} `})}   .`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`  ${t.groupTitle}, ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} `,other:()=>`${e.number(t.groupCount)} `})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", ",other:""},t.isSelected)}`,listboxLabel:"",selectedAnnouncement:t=>`${t.optionText}, `};var NB={};NB={buttonLabel:"Rodyti pasilymus",countAnnouncement:(t,e)=>`Yra ${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} parinktis`,other:()=>`${e.number(t.optionCount)} parinktys (-i)`})}.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`vesta grup ${t.groupTitle}, su ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} parinktimi`,other:()=>`${e.number(t.groupCount)} parinktimis (-i)`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", pasirinkta",other:""},t.isSelected)}`,listboxLabel:"Pasilymai",selectedAnnouncement:t=>`${t.optionText}, pasirinkta`};var RB={};RB={buttonLabel:"Rdt ieteikumus",countAnnouncement:(t,e)=>`Pieejamo opciju skaits: ${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} opcija`,other:()=>`${e.number(t.optionCount)} opcijas`})}.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Ievadta grupa ${t.groupTitle}, ar ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} opciju`,other:()=>`${e.number(t.groupCount)} opcijm`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", atlasta",other:""},t.isSelected)}`,listboxLabel:"Ieteikumi",selectedAnnouncement:t=>`${t.optionText}, atlasta`};var PB={};PB={buttonLabel:"Vis forslag",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} alternativ`,other:()=>`${e.number(t.optionCount)} alternativer`})} finnes.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Angitt gruppe ${t.groupTitle}, med ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} alternativ`,other:()=>`${e.number(t.groupCount)} alternativer`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", valgt",other:""},t.isSelected)}`,listboxLabel:"Forslag",selectedAnnouncement:t=>`${t.optionText}, valgt`};var OB={};OB={buttonLabel:"Suggesties weergeven",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} optie`,other:()=>`${e.number(t.optionCount)} opties`})} beschikbaar.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Groep ${t.groupTitle} ingevoerd met ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} optie`,other:()=>`${e.number(t.groupCount)} opties`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", geselecteerd",other:""},t.isSelected)}`,listboxLabel:"Suggesties",selectedAnnouncement:t=>`${t.optionText}, geselecteerd`};var IB={};IB={buttonLabel:"Wywietlaj sugestie",countAnnouncement:(t,e)=>`dostpna/dostpne(-nych) ${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} opcja`,other:()=>`${e.number(t.optionCount)} opcje(-i)`})}.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Doczono do grupy ${t.groupTitle}, z ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} opcj`,other:()=>`${e.number(t.groupCount)} opcjami`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", wybrano",other:""},t.isSelected)}`,listboxLabel:"Sugestie",selectedAnnouncement:t=>`${t.optionText}, wybrano`};var DB={};DB={buttonLabel:"Mostrar sugestes",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} opo`,other:()=>`${e.number(t.optionCount)} opes`})} disponvel.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Grupo inserido ${t.groupTitle}, com ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} opo`,other:()=>`${e.number(t.groupCount)} opes`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", selecionado",other:""},t.isSelected)}`,listboxLabel:"Sugestes",selectedAnnouncement:t=>`${t.optionText}, selecionado`};var MB={};MB={buttonLabel:"Apresentar sugestes",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} opo`,other:()=>`${e.number(t.optionCount)} opes`})} disponvel.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Grupo introduzido ${t.groupTitle}, com ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} opo`,other:()=>`${e.number(t.groupCount)} opes`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", selecionado",other:""},t.isSelected)}`,listboxLabel:"Sugestes",selectedAnnouncement:t=>`${t.optionText}, selecionado`};var LB={};LB={buttonLabel:"Afiare sugestii",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} opiune`,other:()=>`${e.number(t.optionCount)} opiuni`})} disponibile.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Grup ${t.groupTitle} introdus, cu ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} opiune`,other:()=>`${e.number(t.groupCount)} opiuni`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", selectat",other:""},t.isSelected)}`,listboxLabel:"Sugestii",selectedAnnouncement:t=>`${t.optionText}, selectat`};var FB={};FB={buttonLabel:" ",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} `,other:()=>`${e.number(t.optionCount)} `})} .`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`  ${t.groupTitle},  ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} `,other:()=>`${e.number(t.groupCount)} `})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", ",other:""},t.isSelected)}`,listboxLabel:"",selectedAnnouncement:t=>`${t.optionText}, `};var BB={};BB={buttonLabel:"Zobrazi nvrhy",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} monos`,other:()=>`${e.number(t.optionCount)} monosti/-`})} k dispozcii.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Zadan skupina ${t.groupTitle}, s ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} monosou`,other:()=>`${e.number(t.groupCount)} monosami`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", vybrat",other:""},t.isSelected)}`,listboxLabel:"Nvrhy",selectedAnnouncement:t=>`${t.optionText}, vybrat`};var jB={};jB={buttonLabel:"Prikai predloge",countAnnouncement:(t,e)=>`Na voljo je ${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} opcija`,other:()=>`${e.number(t.optionCount)} opcije`})}.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Vnesena skupina ${t.groupTitle}, z ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} opcija`,other:()=>`${e.number(t.groupCount)} opcije`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", izbrano",other:""},t.isSelected)}`,listboxLabel:"Predlogi",selectedAnnouncement:t=>`${t.optionText}, izbrano`};var zB={};zB={buttonLabel:"Prikai predloge",countAnnouncement:(t,e)=>`Dostupno jo: ${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} opcija`,other:()=>`${e.number(t.optionCount)} opcije/a`})}.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Unesena grupa ${t.groupTitle}, s ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} opcijom`,other:()=>`${e.number(t.groupCount)} optione/a`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", izabranih",other:""},t.isSelected)}`,listboxLabel:"Predlozi",selectedAnnouncement:t=>`${t.optionText}, izabrano`};var qB={};qB={buttonLabel:"Visa frslag",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} alternativ`,other:()=>`${e.number(t.optionCount)} alternativ`})} tillgngliga.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Ingick i gruppen ${t.groupTitle} med ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} alternativ`,other:()=>`${e.number(t.groupCount)} alternativ`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", valda",other:""},t.isSelected)}`,listboxLabel:"Frslag",selectedAnnouncement:t=>`${t.optionText}, valda`};var WB={};WB={buttonLabel:"nerileri gster",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} seenek`,other:()=>`${e.number(t.optionCount)} seenekler`})} kullanlabilir.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Girilen grup ${t.groupTitle}, ile ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} seenek`,other:()=>`${e.number(t.groupCount)} seenekler`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", seildi",other:""},t.isSelected)}`,listboxLabel:"neriler",selectedAnnouncement:t=>`${t.optionText}, seildi`};var UB={};UB={buttonLabel:" ",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} `,other:()=>`${e.number(t.optionCount)} (-)`})} .`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`  ${t.groupTitle},  ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} `,other:()=>`${e.number(t.groupCount)} (-)`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", ",other:""},t.isSelected)}`,listboxLabel:"",selectedAnnouncement:t=>`${t.optionText}, `};var VB={};VB={buttonLabel:"",countAnnouncement:(t,e)=>` ${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} `,other:()=>`${e.number(t.optionCount)} `})}`,focusAnnouncement:(t,e)=>`${e.select({true:()=>` ${t.groupTitle}  ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} `,other:()=>`${e.number(t.groupCount)} `})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", ",other:""},t.isSelected)}`,listboxLabel:"",selectedAnnouncement:t=>`${t.optionText}, `};var HB={};HB={buttonLabel:"",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} `,other:()=>`${e.number(t.optionCount)} `})} `,focusAnnouncement:(t,e)=>`${e.select({true:()=>` ${t.groupTitle},  ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} `,other:()=>`${e.number(t.groupCount)} `})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", ",other:""},t.isSelected)}`,listboxLabel:"",selectedAnnouncement:t=>`${t.optionText}, `};fB={"ar-AE":pB,"bg-BG":hB,"cs-CZ":mB,"da-DK":gB,"de-DE":yB,"el-GR":bB,"en-US":vB,"es-ES":wB,"et-EE":_B,"fi-FI":xB,"fr-FR":kB,"he-IL":$B,"hr-HR":SB,"hu-HU":EB,"it-IT":CB,"ja-JP":TB,"ko-KR":AB,"lt-LT":NB,"lv-LV":RB,"nb-NO":PB,"nl-NL":OB,"pl-PL":IB,"pt-BR":DB,"pt-PT":MB,"ro-RO":LB,"ru-RU":FB,"sk-SK":BB,"sl-SI":jB,"sr-SP":zB,"sv-SE":qB,"tr-TR":WB,"uk-UA":UB,"zh-CN":VB,"zh-TW":HB};function nTt(t,e){let{buttonRef:n,popoverRef:r,inputRef:o,listBoxRef:i,keyboardDelegate:s,shouldFocusWrap:a,isReadOnly:l,isDisabled:c}=t,u=NC(tTt(fB)),{menuTriggerProps:d,menuProps:f}=eTt({type:"listbox",isDisabled:c||l},e,n);Sb.set(e,{id:f.id});let p=k.useMemo(()=>s||new $F(e.collection,e.disabledKeys,i),[s,e.collection,e.disabledKeys,i]),{collectionProps:h}=kF({selectionManager:e.selectionManager,keyboardDelegate:p,disallowTypeAhead:!0,disallowEmptySelection:!0,shouldFocusWrap:a,ref:o,isVirtualized:!0}),y=_C(),m=he=>{switch(he.key){case"Enter":case"Tab":if(e.isOpen&&he.key==="Enter"&&he.preventDefault(),e.isOpen&&e.selectionManager.focusedKey!=null&&e.selectionManager.isLink(e.selectionManager.focusedKey)){if(he.key==="Enter"){let be=i.current.querySelector(`[data-key="${e.selectionManager.focusedKey}"]`);be instanceof HTMLAnchorElement&&y.open(be,he)}e.close()}else e.commit();break;case"Escape":(e.selectedKey!==null||e.inputValue===""||t.allowsCustomValue)&&he.continuePropagation(),e.revert();break;case"ArrowDown":e.open("first","manual");break;case"ArrowUp":e.open("last","manual");break;case"ArrowLeft":case"ArrowRight":e.selectionManager.setFocusedKey(null);break}},w=he=>{var be;he.relatedTarget===(n==null?void 0:n.current)||!((be=r.current)===null||be===void 0)&&be.contains(he.relatedTarget)||(t.onBlur&&t.onBlur(he),e.setFocused(!1))},x=he=>{e.isFocused||(t.onFocus&&t.onFocus(he),e.setFocused(!0))},{labelProps:$,inputProps:S,descriptionProps:I,errorMessageProps:E}=dB({...t,onChange:e.setInputValue,onKeyDown:!l&&_h(e.isOpen&&h.onKeyDown,m,t.onKeyDown),onBlur:w,value:e.inputValue,onFocus:x,autoComplete:"off"},o),L=he=>{he.pointerType==="touch"&&(o.current.focus(),e.toggle(null,"manual"))},T=he=>{he.pointerType!=="touch"&&(o.current.focus(),e.toggle(he.pointerType==="keyboard"||he.pointerType==="virtual"?"first":null,"manual"))},F=Ay({id:d.id,"aria-label":u.format("buttonLabel"),"aria-labelledby":t["aria-labelledby"]||$.id}),j=Ay({id:f.id,"aria-label":u.format("listboxLabel"),"aria-labelledby":t["aria-labelledby"]||$.id}),U=k.useRef(0),ce=he=>{if(c||l)return;if(he.timeStamp-U.current<500){he.preventDefault(),o.current.focus();return}let be=he.target.getBoundingClientRect(),Ie=he.changedTouches[0],Qe=Math.ceil(be.left+.5*be.width),Ue=Math.ceil(be.top+.5*be.height);Ie.clientX===Qe&&Ie.clientY===Ue&&(he.preventDefault(),o.current.focus(),e.toggle(null,"manual"),U.current=he.timeStamp)},W=e.selectionManager.focusedKey!=null&&e.isOpen?e.collection.getItem(e.selectionManager.focusedKey):void 0;var P;let ne=(P=W==null?void 0:W.parentKey)!==null&&P!==void 0?P:null;var Q;let oe=(Q=e.selectionManager.focusedKey)!==null&&Q!==void 0?Q:null,nt=k.useRef(ne),xt=k.useRef(oe);k.useEffect(()=>{if(n1()&&W!=null&&oe!==xt.current){let he=e.selectionManager.isSelected(oe),be=ne!=null?e.collection.getItem(ne):null,Ie=(be==null?void 0:be["aria-label"])||(typeof(be==null?void 0:be.rendered)=="string"?be.rendered:"")||"",Qe=u.format("focusAnnouncement",{isGroupChange:be&&ne!==nt.current,groupTitle:Ie,groupCount:be?[...$b(be,e.collection)].length:0,optionText:W["aria-label"]||W.textValue||"",isSelected:he});l_(Qe)}nt.current=ne,xt.current=oe});let Ae=CF(e.collection),ae=k.useRef(Ae),fe=k.useRef(e.isOpen);k.useEffect(()=>{let he=e.isOpen!==fe.current&&(e.selectionManager.focusedKey==null||n1());if(e.isOpen&&(he||Ae!==ae.current)){let be=u.format("countAnnouncement",{optionCount:Ae});l_(be)}ae.current=Ae,fe.current=e.isOpen});let _e=k.useRef(e.selectedKey);return k.useEffect(()=>{if(n1()&&e.isFocused&&e.selectedItem&&e.selectedKey!==_e.current){let he=e.selectedItem["aria-label"]||e.selectedItem.textValue||"",be=u.format("selectedAnnouncement",{optionText:he});l_(be)}_e.current=e.selectedKey}),k.useEffect(()=>{if(e.isOpen)return I2t([o.current,r.current])},[e.isOpen,o,r]),{labelProps:$,buttonProps:{...d,...F,excludeFromTabOrder:!0,onPress:L,onPressStart:T,isDisabled:c||l},inputProps:Sn(S,{role:"combobox","aria-expanded":d["aria-expanded"],"aria-controls":e.isOpen?f.id:void 0,"aria-autocomplete":"list","aria-activedescendant":W?TF(e,W.key):void 0,onTouchEnd:ce,autoCorrect:"off",spellCheck:"false"}),listBoxProps:Sn(f,j,{autoFocus:e.focusStrategy,shouldUseVirtualFocus:!0,shouldSelectOnPressUp:!0,shouldFocusOnHover:!0,linkBehavior:"selection"}),descriptionProps:I,errorMessageProps:E}}class ei extends Set{constructor(e,n,r){super(e),e instanceof ei?(this.anchorKey=n||e.anchorKey,this.currentKey=r||e.currentKey):(this.anchorKey=n,this.currentKey=r)}}function rTt(t,e){if(t.size!==e.size)return!1;for(let n of t)if(!e.has(n))return!1;return!0}function oTt(t){let{selectionMode:e="none",disallowEmptySelection:n,allowDuplicateSelectionEvents:r,selectionBehavior:o="toggle",disabledBehavior:i="all"}=t,s=k.useRef(!1),[,a]=k.useState(!1),l=k.useRef(null),c=k.useRef(null),[,u]=k.useState(null),d=k.useMemo(()=>hO(t.selectedKeys),[t.selectedKeys]),f=k.useMemo(()=>hO(t.defaultSelectedKeys,new ei),[t.defaultSelectedKeys]),[p,h]=vb(d,f,t.onSelectionChange),y=k.useMemo(()=>t.disabledKeys?new Set(t.disabledKeys):new Set,[t.disabledKeys]),[m,w]=k.useState(o);o==="replace"&&m==="toggle"&&typeof p=="object"&&p.size===0&&w("replace");let x=k.useRef(o);return k.useEffect(()=>{o!==x.current&&(w(o),x.current=o)},[o]),{selectionMode:e,disallowEmptySelection:n,selectionBehavior:m,setSelectionBehavior:w,get isFocused(){return s.current},setFocused($){s.current=$,a($)},get focusedKey(){return l.current},get childFocusStrategy(){return c.current},setFocusedKey($,S="first"){l.current=$,c.current=S,u($)},selectedKeys:p,setSelectedKeys($){(r||!rTt($,p))&&h($)},disabledKeys:y,disabledBehavior:i}}function hO(t,e){return t?t==="all"?"all":new ei(t):e}class iTt{get selectionMode(){return this.state.selectionMode}get disallowEmptySelection(){return this.state.disallowEmptySelection}get selectionBehavior(){return this.state.selectionBehavior}setSelectionBehavior(e){this.state.setSelectionBehavior(e)}get isFocused(){return this.state.isFocused}setFocused(e){this.state.setFocused(e)}get focusedKey(){return this.state.focusedKey}get childFocusStrategy(){return this.state.childFocusStrategy}setFocusedKey(e,n){(e==null||this.collection.getItem(e))&&this.state.setFocusedKey(e,n)}get selectedKeys(){return this.state.selectedKeys==="all"?new Set(this.getSelectAllKeys()):this.state.selectedKeys}get rawSelection(){return this.state.selectedKeys}isSelected(e){return this.state.selectionMode==="none"?!1:(e=this.getKey(e),this.state.selectedKeys==="all"?this.canSelectItem(e):this.state.selectedKeys.has(e))}get isEmpty(){return this.state.selectedKeys!=="all"&&this.state.selectedKeys.size===0}get isSelectAll(){if(this.isEmpty)return!1;if(this.state.selectedKeys==="all")return!0;if(this._isSelectAll!=null)return this._isSelectAll;let e=this.getSelectAllKeys(),n=this.state.selectedKeys;return this._isSelectAll=e.every(r=>n.has(r)),this._isSelectAll}get firstSelectedKey(){let e=null;for(let n of this.state.selectedKeys){let r=this.collection.getItem(n);(!e||r&&p_(this.collection,r,e)<0)&&(e=r)}return e==null?void 0:e.key}get lastSelectedKey(){let e=null;for(let n of this.state.selectedKeys){let r=this.collection.getItem(n);(!e||r&&p_(this.collection,r,e)>0)&&(e=r)}return e==null?void 0:e.key}get disabledKeys(){return this.state.disabledKeys}get disabledBehavior(){return this.state.disabledBehavior}extendSelection(e){if(this.selectionMode==="none")return;if(this.selectionMode==="single"){this.replaceSelection(e);return}e=this.getKey(e);let n;if(this.state.selectedKeys==="all")n=new ei([e],e,e);else{let r=this.state.selectedKeys,o=r.anchorKey||e;n=new ei(r,o,e);for(let i of this.getKeyRange(o,r.currentKey||e))n.delete(i);for(let i of this.getKeyRange(e,o))this.canSelectItem(i)&&n.add(i)}this.state.setSelectedKeys(n)}getKeyRange(e,n){let r=this.collection.getItem(e),o=this.collection.getItem(n);return r&&o?p_(this.collection,r,o)<=0?this.getKeyRangeInternal(e,n):this.getKeyRangeInternal(n,e):[]}getKeyRangeInternal(e,n){let r=[],o=e;for(;o;){let i=this.collection.getItem(o);if((i&&i.type==="item"||i.type==="cell"&&this.allowsCellSelection)&&r.push(o),o===n)return r;o=this.collection.getKeyAfter(o)}return[]}getKey(e){let n=this.collection.getItem(e);if(!n||n.type==="cell"&&this.allowsCellSelection)return e;for(;n.type!=="item"&&n.parentKey!=null;)n=this.collection.getItem(n.parentKey);return!n||n.type!=="item"?null:n.key}toggleSelection(e){if(this.selectionMode==="none")return;if(this.selectionMode==="single"&&!this.isSelected(e)){this.replaceSelection(e);return}if(e=this.getKey(e),e==null)return;let n=new ei(this.state.selectedKeys==="all"?this.getSelectAllKeys():this.state.selectedKeys);n.has(e)?n.delete(e):this.canSelectItem(e)&&(n.add(e),n.anchorKey=e,n.currentKey=e),!(this.disallowEmptySelection&&n.size===0)&&this.state.setSelectedKeys(n)}replaceSelection(e){if(this.selectionMode==="none"||(e=this.getKey(e),e==null))return;let n=this.canSelectItem(e)?new ei([e],e,e):new ei;this.state.setSelectedKeys(n)}setSelectedKeys(e){if(this.selectionMode==="none")return;let n=new ei;for(let r of e)if(r=this.getKey(r),r!=null&&(n.add(r),this.selectionMode==="single"))break;this.state.setSelectedKeys(n)}getSelectAllKeys(){let e=[],n=r=>{for(;r;){if(this.canSelectItem(r)){let o=this.collection.getItem(r);o.type==="item"&&e.push(r),o.hasChildNodes&&(this.allowsCellSelection||o.type!=="item")&&n(G2t($b(o,this.collection)).key)}r=this.collection.getKeyAfter(r)}};return n(this.collection.getFirstKey()),e}selectAll(){!this.isSelectAll&&this.selectionMode==="multiple"&&this.state.setSelectedKeys("all")}clearSelection(){!this.disallowEmptySelection&&(this.state.selectedKeys==="all"||this.state.selectedKeys.size>0)&&this.state.setSelectedKeys(new ei)}toggleSelectAll(){this.isSelectAll?this.clearSelection():this.selectAll()}select(e,n){this.selectionMode!=="none"&&(this.selectionMode==="single"?this.isSelected(e)&&!this.disallowEmptySelection?this.toggleSelection(e):this.replaceSelection(e):this.selectionBehavior==="toggle"||n&&(n.pointerType==="touch"||n.pointerType==="virtual")?this.toggleSelection(e):this.replaceSelection(e))}isSelectionEqual(e){if(e===this.state.selectedKeys)return!0;let n=this.selectedKeys;if(e.size!==n.size)return!1;for(let r of e)if(!n.has(r))return!1;for(let r of n)if(!e.has(r))return!1;return!0}canSelectItem(e){if(this.state.selectionMode==="none"||this.state.disabledKeys.has(e))return!1;let n=this.collection.getItem(e);return!(!n||n.type==="cell"&&!this.allowsCellSelection)}isDisabled(e){return this.state.disabledKeys.has(e)&&this.state.disabledBehavior==="all"}isLink(e){var n,r;return!!(!((n=this.collection.getItem(e))===null||n===void 0||(r=n.props)===null||r===void 0)&&r.href)}constructor(e,n,r){this.collection=e,this.state=n;var o;this.allowsCellSelection=(o=r==null?void 0:r.allowsCellSelection)!==null&&o!==void 0?o:!1,this._isSelectAll=null}}class Dk{*[Symbol.iterator](){yield*this.iterable}get size(){return this.keyMap.size}getKeys(){return this.keyMap.keys()}getKeyBefore(e){let n=this.keyMap.get(e);return n?n.prevKey:null}getKeyAfter(e){let n=this.keyMap.get(e);return n?n.nextKey:null}getFirstKey(){return this.firstKey}getLastKey(){return this.lastKey}getItem(e){return this.keyMap.get(e)}at(e){const n=[...this.getKeys()];return this.getItem(n[e])}getChildren(e){let n=this.keyMap.get(e);return(n==null?void 0:n.childNodes)||[]}constructor(e){this.keyMap=new Map,this.iterable=e;let n=i=>{if(this.keyMap.set(i.key,i),i.childNodes&&i.type==="section")for(let s of i.childNodes)n(s)};for(let i of e)n(i);let r,o=0;for(let[i,s]of this.keyMap)r?(r.nextKey=i,s.prevKey=r.key):(this.firstKey=i,s.prevKey=void 0),s.type==="item"&&(s.index=o++),r=s,r.nextKey=void 0;this.lastKey=r==null?void 0:r.key}}function KB(t){let{filter:e}=t,n=oTt(t),r=k.useMemo(()=>t.disabledKeys?new Set(t.disabledKeys):new Set,[t.disabledKeys]),o=k.useCallback(c=>e?new Dk(e(c)):new Dk(c),[e]),i=k.useMemo(()=>({suppressTextValueWarning:t.suppressTextValueWarning}),[t.suppressTextValueWarning]),s=K2t(t,o,i),a=k.useMemo(()=>new iTt(s,n),[s,n]);const l=k.useRef(null);return k.useEffect(()=>{if(n.focusedKey!=null&&!s.getItem(n.focusedKey)){const c=l.current.getItem(n.focusedKey),u=[...l.current.getKeys()].map(y=>{const m=l.current.getItem(y);return m.type==="item"?m:null}).filter(y=>y!==null),d=[...s.getKeys()].map(y=>{const m=s.getItem(y);return m.type==="item"?m:null}).filter(y=>y!==null),f=u.length-d.length;let p=Math.min(f>1?Math.max(c.index-f+1,0):c.index,d.length-1),h;for(;p>=0;){if(!a.isDisabled(d[p].key)){h=d[p];break}p<d.length-1?p++:(p>c.index&&(p=c.index),p--)}n.setFocusedKey(h?h.key:null)}l.current=s},[s,a,n,n.focusedKey]),{collection:s,disabledKeys:r,selectionManager:a}}function sTt(t){var e;let[n,r]=vb(t.selectedKey,(e=t.defaultSelectedKey)!==null&&e!==void 0?e:null,t.onSelectionChange),o=k.useMemo(()=>n!=null?[n]:[],[n]),{collection:i,disabledKeys:s,selectionManager:a}=KB({...t,selectionMode:"single",disallowEmptySelection:!0,allowDuplicateSelectionEvents:!0,selectedKeys:o,onSelectionChange:c=>{var u;let d=(u=c.values().next().value)!==null&&u!==void 0?u:null;d===n&&t.onSelectionChange&&t.onSelectionChange(d),r(d)}}),l=n!=null?i.getItem(n):null;return{collection:i,disabledKeys:s,selectionManager:a,selectedKey:n,setSelectedKey:r,selectedItem:l}}function GB(t){let[e,n]=vb(t.isOpen,t.defaultOpen||!1,t.onOpenChange);const r=k.useCallback(()=>{n(!0)},[n]),o=k.useCallback(()=>{n(!1)},[n]),i=k.useCallback(()=>{n(!e)},[n,e]);return{isOpen:e,setOpen:n,open:r,close:o,toggle:i}}function aTt(t){let e=GB(t),[n,r]=k.useState(null);return{focusStrategy:n,...e,open(o=null){r(o),e.open()},toggle(o=null){r(o),e.toggle()}}}function lTt(t){var e,n;let{defaultFilter:r,menuTrigger:o="input",allowsEmptyCollection:i=!1,allowsCustomValue:s,shouldCloseOnBlur:a=!0}=t,[l,c]=k.useState(!1),[u,d]=k.useState(!1),f=rt=>{t.onSelectionChange&&t.onSelectionChange(rt),rt===m&&(Ae(),nt())};var p;let{collection:h,selectionManager:y,selectedKey:m,setSelectedKey:w,selectedItem:x,disabledKeys:$}=sTt({...t,onSelectionChange:f,items:(p=t.items)!==null&&p!==void 0?p:t.defaultItems});var S,I;let[E,L]=vb(t.inputValue,(I=(S=t.defaultInputValue)!==null&&S!==void 0?S:(e=h.getItem(m))===null||e===void 0?void 0:e.textValue)!==null&&I!==void 0?I:"",t.onInputChange),T=h,F=k.useMemo(()=>t.items!=null||!r?h:cTt(h,E,r),[h,E,r,t.items]),[j,U]=k.useState(F),ce=k.useRef("focus"),P=aTt({...t,onOpenChange:rt=>{t.onOpenChange&&t.onOpenChange(rt,rt?ce.current:void 0),y.setFocused(rt),rt||y.setFocusedKey(null)},isOpen:void 0,defaultOpen:void 0}),ne=(rt,Tt)=>{let wt=Tt==="manual"||Tt==="focus"&&o==="focus";(i||F.size>0||wt&&T.size>0||t.items)&&(wt&&!P.isOpen&&t.items===void 0&&c(!0),ce.current=Tt,P.open(rt))},Q=(rt,Tt)=>{let wt=Tt==="manual"||Tt==="focus"&&o==="focus";!(i||F.size>0||wt&&T.size>0||t.items)&&!P.isOpen||(wt&&!P.isOpen&&t.items===void 0&&c(!0),P.isOpen||(ce.current=Tt),oe(rt))},oe=k.useCallback(rt=>{P.isOpen&&U(F),P.toggle(rt)},[P,F]),nt=k.useCallback(()=>{P.isOpen&&(U(F),P.close())},[P,F]),xt=k.useRef(E),Ae=()=>{var rt,Tt;let wt=(Tt=(rt=h.getItem(m))===null||rt===void 0?void 0:rt.textValue)!==null&&Tt!==void 0?Tt:"";xt.current=wt,L(wt)};var ae,fe;let _e=k.useRef((fe=(ae=t.selectedKey)!==null&&ae!==void 0?ae:t.defaultSelectedKey)!==null&&fe!==void 0?fe:null);var he;let be=k.useRef((he=(n=h.getItem(m))===null||n===void 0?void 0:n.textValue)!==null&&he!==void 0?he:"");k.useEffect(()=>{var rt;u&&(F.size>0||i)&&!P.isOpen&&E!==xt.current&&o!=="manual"&&ne(null,"input"),!l&&!i&&P.isOpen&&F.size===0&&nt(),m!=null&&m!==_e.current&&nt(),E!==xt.current&&(y.setFocusedKey(null),c(!1),E===""&&(t.inputValue===void 0||t.selectedKey===void 0)&&w(null)),m!==_e.current&&(t.inputValue===void 0||t.selectedKey===void 0)?Ae():xt.current=E;var Tt;let wt=(Tt=(rt=h.getItem(m))===null||rt===void 0?void 0:rt.textValue)!==null&&Tt!==void 0?Tt:"";!u&&m!=null&&t.inputValue===void 0&&m===_e.current&&be.current!==wt&&(xt.current=wt,L(wt)),_e.current=m,be.current=wt});let Ie=()=>{s&&m==null?Qe():Ue()},Qe=()=>{_e.current=null,w(null),nt()},Ue=()=>{if(t.selectedKey!==void 0&&t.inputValue!==void 0){var rt;t.onSelectionChange(m);var Tt;let wt=(Tt=(rt=h.getItem(m))===null||rt===void 0?void 0:rt.textValue)!==null&&Tt!==void 0?Tt:"";xt.current=wt,nt()}else Ae(),nt()};const dn=()=>{if(s){var rt,Tt;const wt=(Tt=(rt=h.getItem(m))===null||rt===void 0?void 0:rt.textValue)!==null&&Tt!==void 0?Tt:"";E===wt?Ue():Qe()}else Ue()};let wi=()=>{P.isOpen&&y.focusedKey!=null?m===y.focusedKey?Ue():w(y.focusedKey):dn()},go=rt=>{rt?o==="focus"&&ne(null,"focus"):a&&dn(),d(rt)},Zo=k.useMemo(()=>P.isOpen?l?T:F:j,[P.isOpen,T,F,l,j]);return{...P,toggle:Q,open:ne,close:dn,selectionManager:y,selectedKey:m,setSelectedKey:w,disabledKeys:$,isFocused:u,setFocused:go,selectedItem:x,collection:Zo,inputValue:E,setInputValue:L,commit:wi,revert:Ie}}function cTt(t,e,n){return new Dk(ZB(t,t,e,n))}function ZB(t,e,n,r){let o=[];for(let i of e)if(i.type==="section"&&i.hasChildNodes){let s=ZB(t,$b(i,t),n,r);[...s].some(a=>a.type==="item")&&o.push({...i,childNodes:s})}else i.type==="item"&&r(i.textValue,n)?o.push({...i}):i.type!=="item"&&o.push({...i});return o}function uTt(t){let e=Xd(t,{labelable:!0}),n;return t.orientation==="vertical"&&(n="vertical"),t.elementType!=="hr"?{separatorProps:{...e,role:"separator","aria-orientation":n}}:{separatorProps:e}}function YB(t){let e=k.useRef(null),{listBoxRef:n=e,state:r}=t,{listBoxProps:o}=J2t(t,r,n),i=t.optionComponent||fTt;return _.jsx("ul",{...o,ref:n,className:Xe("outline-none",t.className),children:[...r.collection].map(s=>s.type==="section"?_.jsx(dTt,{optionComponent:i,section:s,state:r},s.key):_.jsx(i,{item:s,state:r},s.key))})}function dTt({section:t,state:e,optionComponent:n}){let{itemProps:r,headingProps:o,groupProps:i}=X2t({heading:t.rendered,"aria-label":t["aria-label"]}),{separatorProps:s}=uTt({elementType:"li"});return _.jsxs(_.Fragment,{children:[t.key!==e.collection.getFirstKey()&&_.jsx("li",{...s,className:"mx-1 my-2 border-t-1 border-colorNeutralBorder border-solid"}),_.jsxs("li",{...r,className:"pt-2",children:[t.rendered&&_.jsx("span",{...o,className:"text-xs font-bold uppercase mx-3 select-none text-colorNeutralTextSubdued",children:t.rendered}),_.jsx("ul",{...i,children:[...t.childNodes].map(a=>_.jsx(n,{item:a,state:e},a.key))})]})]})}function fTt({item:t,state:e}){let n=k.useRef(null),{optionProps:r,isDisabled:o,isSelected:i,isFocused:s}=AF({key:t.key},e,n);return _.jsx("li",{...r,ref:n,className:"outline-none",children:_.jsxs("div",{className:Xe("my-1 py-2 px-2 text-sm outline-none flex items-center justify-between select-none rounded",o&&"text-colorNeutralTextDisabled cursor-not-allowed",i?"bg-colorPromoteSolid":s?"bg-colorNeutralSolidFaint":""),children:[t.rendered,i&&_.jsx(M9,{"aria-hidden":"true",className:"w-4 h-4"})]})})}function pTt(t){let e=k.useRef(null),{popoverRef:n=e,isOpen:r,onClose:o,children:i}=t,{overlayProps:s}=j9({isOpen:r,onClose:o,shouldCloseOnBlur:!0,isDismissable:!1},n);return _.jsx(O9,{restoreFocus:!0,children:_.jsxs("div",{...s,ref:n,className:"shadow-md bg-colorBgLayerFloat absolute z-10 top-full w-full mt-2 rounded",children:[i,_.jsx(O2t,{onDismiss:o})]})})}function hTt(t){let{contains:e}=y2t({sensitivity:"base"}),n=lTt({...t,defaultFilter:e}),r=k.useRef(null),o=k.useRef(null),i=k.useRef(null),s=k.useRef(null),{buttonProps:a,inputProps:l,listBoxProps:c,labelProps:u}=nTt({...t,inputRef:o,buttonRef:r,listBoxRef:i,popoverRef:s},n),{buttonProps:d}=TC(a,r);return _.jsxs("div",{className:Xe("B-ui-components_combo-box flex flex-col relative"),children:[_.jsx("label",{...u,className:"block select-none text-sm font-medium text-left text-colorNeutralTextSubdued",children:t.label}),_.jsxs("div",{className:Xe("relative inline-flex flex-row rounded-md overflow-hidden","text-field-neutral border-solid border-1 border-colorNeutralTextFieldBorder px-1 py-1 rounded",n.isFocused&&"B-ui-components_misc-input-ring"),children:[_.jsx("input",{...l,ref:o,className:Xe("w-full outline-none px-2 py-1 text-field-neutral")}),_.jsx("button",{...d,ref:r,className:"px-1 cursor-pointer",children:_.jsx(i2t,{className:"w-5 h-5","aria-hidden":"true"})})]}),n.isOpen&&_.jsx(pTt,{popoverRef:s,isOpen:n.isOpen,onClose:n.close,children:_.jsx(YB,{className:"max-h-72 overflow-auto border-neutral bg-colorNeutralTextFieldBg text-colorNeutralTextFieldText rounded",...c,listBoxRef:i,state:n})})]})}function mTt(t,e){let{role:n="dialog"}=t,r=wh();r=t["aria-label"]?void 0:r;let o=k.useRef(!1);return k.useEffect(()=>{if(e.current&&!e.current.contains(document.activeElement)){Ac(e.current);let i=setTimeout(()=>{document.activeElement===e.current&&(o.current=!0,e.current.blur(),Ac(e.current),o.current=!1)},500);return()=>{clearTimeout(i)}}},[e]),M2t(),{dialogProps:{...Xd(t,{labelable:!0}),role:n,tabIndex:-1,"aria-labelledby":t["aria-labelledby"]||r,onBlur:i=>{o.current&&i.stopPropagation()}},titleProps:{id:r}}}const km=({children:t,style:e={},size:n,className:r="",...o})=>_.jsx("svg",{style:e,fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:`${n?`h-${n} w-${n}`:""} ${r}`,...o,children:t}),JB=t=>_.jsx(km,{...t,children:_.jsx("path",{d:"M6.343 7.757L4.93 9.172 12 16.242l7.071-7.07-1.414-1.415L12 13.414 6.343 7.757z"})}),XB=t=>_.jsx(km,{...t,children:_.jsx("path",{d:"M6.2253 4.81108C5.83477 4.42056 5.20161 4.42056 4.81108 4.81108C4.42056 5.20161 4.42056 5.83477 4.81108 6.2253L10.5858 12L4.81114 17.7747C4.42062 18.1652 4.42062 18.7984 4.81114 19.1889C5.20167 19.5794 5.83483 19.5794 6.22535 19.1889L12 13.4142L17.7747 19.1889C18.1652 19.5794 18.7984 19.5794 19.1889 19.1889C19.5794 18.7984 19.5794 18.1652 19.1889 17.7747L13.4142 12L19.189 6.2253C19.5795 5.83477 19.5795 5.20161 19.189 4.81108C18.7985 4.42056 18.1653 4.42056 17.7748 4.81108L12 10.5858L6.2253 4.81108Z",fill:"currentColor"})});function gTt(t){return _.jsxs(km,{...t,children:[_.jsx("path",{d:"M5.0333 14.8284L6.44751 16.2426L10.6902 12L6.44751 7.75733L5.0333 9.17155L7.86172 12L5.0333 14.8284Z",fill:"currentColor"}),_.jsx("path",{d:"M15 14H11V16H15V14Z",fill:"currentColor"}),_.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"currentColor",d:"M2 2C0.895431 2 0 2.89543 0 4V20C0 21.1046 0.89543 22 2 22H22C23.1046 22 24 21.1046 24 20V4C24 2.89543 23.1046 2 22 2H2ZM22 4H2L2 20H22V4Z"})]})}function yTt(t){return _.jsx(km,{...t,children:_.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 19C2 20.6569 3.34315 22 5 22H19C20.6569 22 22 20.6569 22 19V5C22 3.34315 20.6569 2 19 2H5C3.34315 2 2 3.34315 2 5V19ZM20 19C20 19.5523 19.5523 20 19 20H5C4.44772 20 4 19.5523 4 19V5C4 4.44772 4.44772 4 5 4H10V12.0111L12.395 12.0112L14.0001 9.86419L15.6051 12.0112H18.0001L18 4H19C19.5523 4 20 4.44772 20 5V19ZM16 4H12V9.33585L14.0001 6.66046L16 9.33571V4Z",fill:"currentColor"})})}function bTt(t){return _.jsxs(km,{...t,children:[_.jsx("path",{d:"M7 18H17V16H7V18Z",fill:"currentColor"}),_.jsx("path",{d:"M17 14H7V12H17V14Z",fill:"currentColor"}),_.jsx("path",{d:"M7 10H11V8H7V10Z",fill:"currentColor"}),_.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6 2C4.34315 2 3 3.34315 3 5V19C3 20.6569 4.34315 22 6 22H18C19.6569 22 21 20.6569 21 19V9C21 5.13401 17.866 2 14 2H6ZM6 4H13V9H19V19C19 19.5523 18.5523 20 18 20H6C5.44772 20 5 19.5523 5 19V5C5 4.44772 5.44772 4 6 4ZM15 4.10002C16.6113 4.4271 17.9413 5.52906 18.584 7H15V4.10002Z",fill:"currentColor"})]})}function vTt(t){return _.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",...t,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[_.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}),_.jsx("path",{d:"M12 3v18"})]})}function RC(t){return _.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...t})}function mO(t){return _.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...t,children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}function QB({className:t="",...e}){return _.jsx("svg",{"aria-label":"search spinner",className:"B-ui-components_spinner-icon "+t,viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",...e,children:_.jsx("circle",{cx:"50",cy:"50",r:"45"})})}function wTt(t){return _.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",children:[_.jsx("path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"}),_.jsx("path",{d:"M2 10h20"})]})}function _Tt(t){return _.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18",stroke:"currentColor",...t,children:[_.jsx("path",{d:"M10,5.5V1H3.5a.5.5,0,0,0-.5.5v15a.5.5,0,0,0,.5.5h11a.5.5,0,0,0,.5-.5V6H10.5A.5.5,0,0,1,10,5.5Z"}),_.jsx("path",{d:"M11,1h.043a.5.5,0,0,1,.3535.1465l3.457,3.457A.5.5,0,0,1,15,4.957V5H11Z"})]})}function xTt(t){return _.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",children:[_.jsx("circle",{cx:"11",cy:"11",r:"8"}),_.jsx("path",{d:"m21 21-4.3-4.3"})]})}function ej(t){return _.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18",fill:"currentColor",...t,children:[_.jsx("rect",{fill:"#ff13dc",opacity:"0",width:"18",height:"18"}),_.jsx("path",{d:"M12,9a.994.994,0,0,1-.2925.7045l-3.9915,3.99a1,1,0,1,1-1.4355-1.386l.0245-.0245L9.5905,9,6.3045,5.715A1,1,0,0,1,7.691,4.28l.0245.0245,3.9915,3.99A.994.994,0,0,1,12,9Z"})]})}function tj(t){return _.jsx("svg",{...t,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",children:_.jsx("path",{d:"M32 6C17.641 6 6 17.641 6 32c0 12.277 8.512 22.56 19.955 25.286-.592-.141-1.179-.299-1.755-.479V50.85c0 0-.975.325-2.275.325-3.637 0-5.148-3.245-5.525-4.875-.229-.993-.827-1.934-1.469-2.509-.767-.684-1.126-.686-1.131-.92-.01-.491.658-.471.975-.471 1.625 0 2.857 1.729 3.429 2.623 1.417 2.207 2.938 2.577 3.721 2.577.975 0 1.817-.146 2.397-.426.268-1.888 1.108-3.57 2.478-4.774-6.097-1.219-10.4-4.716-10.4-10.4 0-2.928 1.175-5.619 3.133-7.792C19.333 23.641 19 22.494 19 20.625c0-1.235.086-2.751.65-4.225 0 0 3.708.026 7.205 3.338C28.469 19.268 30.196 19 32 19s3.531.268 5.145.738c3.497-3.312 7.205-3.338 7.205-3.338.567 1.474.65 2.99.65 4.225 0 2.015-.268 3.19-.432 3.697C46.466 26.475 47.6 29.124 47.6 32c0 5.684-4.303 9.181-10.4 10.4 1.628 1.43 2.6 3.513 2.6 5.85v8.557c-.576.181-1.162.338-1.755.479C49.488 54.56 58 44.277 58 32 58 17.641 46.359 6 32 6zM33.813 57.93C33.214 57.972 32.61 58 32 58 32.61 58 33.213 57.971 33.813 57.93zM37.786 57.346c-1.164.265-2.357.451-3.575.554C35.429 57.797 36.622 57.61 37.786 57.346zM32 58c-.61 0-1.214-.028-1.813-.07C30.787 57.971 31.39 58 32 58zM29.788 57.9c-1.217-.103-2.411-.289-3.574-.554C27.378 57.61 28.571 57.797 29.788 57.9z"})})}function kTt(t){return _.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:Xe("animate-spin",t.className),children:[_.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),_.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}function Ar({children:t,dismissText:e="Close",headingTitle:n,headingIcon:r=null,footer:o=null,heroImageUrl:i,isDismissable:s=!1,isKeyboardDismissDisabled:a=!s,isLoading:l=!1,onDismiss:c,primaryButtonConfig:u,size:d="md",allowScroll:f=!1}){const p=H.useRef(null),h=k.useCallback(()=>{l||c()},[l,c]),{overlayProps:y,underlayProps:m}=j9({isOpen:!0,onClose:h,isDismissable:s,isKeyboardDismissDisabled:a},p),{modalProps:w}=P2t(),{dialogProps:x,titleProps:$}=mTt({role:"alertdialog"},p);return $2t(),_.jsx(R2t,{portalContainer:document.getElementById("dialog-container")||void 0,children:_.jsx("div",{className:"fixed flex justify-center z-modal backdrop-blur-sm items-start widescreen:items-center inset-0 transition-opacity",style:{backgroundColor:"rgba(0, 0, 0, 0.6)"},...m,children:_.jsx(O9,{contain:!0,restoreFocus:!0,autoFocus:!0,children:_.jsxs("div",{className:Xe("B-ui-components_dialog-content-container bg-colorNeutralBgLayerTop rounded-lg shadow-xl",d==="sm"&&"BU_small",d==="md"&&"BU_medium",d==="lg"&&"BU_large",d==="full"&&"w-full"),...y,...x,...w,ref:p,children:[i&&_.jsx("div",{className:"B-ui-components_dialog-hero",children:_.jsx("img",{src:i,alt:"hero"})}),_.jsx("div",{className:"B-ui-components_dialog-header-icon w-6 h-6",children:l?_.jsx("div",{role:"progressbar",className:"inline-block","aria-label":"Loading...",children:_.jsx(kTt,{className:"w-6 h-6"})}):r}),_.jsx("h2",{className:"B-ui-components_dialog-heading text-xl font-semibold break-all",...$,children:n}),_.jsx("hr",{className:"B-ui-components_dialog-divider"}),_.jsx("div",{className:Xe("B-ui-components_dialog-content",f&&"overflow-y-auto"),children:typeof t=="string"?_.jsx("p",{children:t}):t}),_.jsxs(e2t,{justify:null,reverseRow:!0,className:"B-ui-components_dialog-button-group pt-12 smallscreen:pt-4 flex-row-reverse",children:[u&&_.jsx(vd,{tone:u.isDestructive?"critical":"neutral",isDisabled:l||u.disabled,ariaLabel:u.text,onPress:()=>{u.onPress()},text:u.text}),s&&_.jsx(vd,{tone:"secondary",ariaLabel:"dismiss",isDisabled:l,onPress:h,text:e,focus:{autoFocus:u==null?void 0:u.isDestructive}})]}),_.jsx("footer",{className:"B-ui-components_dialog-footer",children:o})]})})})})}const $Tt=1500,gO=500;let Al={},STt=0,Df=!1,bs=null,Nl=null;function ETt(t={}){let{delay:e=$Tt,closeDelay:n=gO}=t,{isOpen:r,open:o,close:i}=GB(t),s=k.useMemo(()=>`${++STt}`,[]),a=k.useRef(),l=()=>{Al[s]=d},c=()=>{for(let p in Al)p!==s&&(Al[p](!0),delete Al[p])},u=()=>{clearTimeout(a.current),a.current=null,c(),l(),Df=!0,o(),bs&&(clearTimeout(bs),bs=null),Nl&&(clearTimeout(Nl),Nl=null)},d=p=>{p||n<=0?(clearTimeout(a.current),a.current=null,i()):a.current||(a.current=setTimeout(()=>{a.current=null,i()},n)),bs&&(clearTimeout(bs),bs=null),Df&&(Nl&&clearTimeout(Nl),Nl=setTimeout(()=>{delete Al[s],Nl=null,Df=!1},Math.max(gO,n)))},f=()=>{c(),l(),!r&&!bs&&!Df?bs=setTimeout(()=>{bs=null,Df=!0,u()},e):r||u()};return k.useEffect(()=>()=>{clearTimeout(a.current),Al[s]&&delete Al[s]},[s]),{isOpen:r,open:p=>{!p&&e>0&&!a.current?f():u()},close:d}}var yO=function(e){return e.reduce(function(n,r){var o=r[0],i=r[1];return n[o]=i,n},{})},bO=typeof window!="undefined"&&window.document&&window.document.createElement?k.useLayoutEffect:k.useEffect;function vO(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function wO(t){return[Gr,Wo,qo,Zr].some(function(e){return t[e]>=0})}function CTt(t){var e=t.state,n=t.name,r=e.rects.reference,o=e.rects.popper,i=e.modifiersData.preventOverflow,s=nh(e,{elementContext:"reference"}),a=nh(e,{altBoundary:!0}),l=vO(s,r),c=vO(a,o,i),u=wO(l),d=wO(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}var TTt={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:CTt},ATt=[t7,hE,n7,r7,X6,J6,Q6,G6,TTt],NTt=e7({defaultModifiers:ATt}),RTt=typeof Element!="undefined",PTt=typeof Map=="function",OTt=typeof Set=="function",ITt=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function i1(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,r,o;if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!i1(t[r],e[r]))return!1;return!0}var i;if(PTt&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(i=t.entries();!(r=i.next()).done;)if(!e.has(r.value[0]))return!1;for(i=t.entries();!(r=i.next()).done;)if(!i1(r.value[1],e.get(r.value[0])))return!1;return!0}if(OTt&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(i=t.entries();!(r=i.next()).done;)if(!e.has(r.value[0]))return!1;return!0}if(ITt&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(t[r]!==e[r])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof e.valueOf=="function")return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof e.toString=="function")return t.toString()===e.toString();if(o=Object.keys(t),n=o.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,o[r]))return!1;if(RTt&&t instanceof Element)return!1;for(r=n;r--!==0;)if(!((o[r]==="_owner"||o[r]==="__v"||o[r]==="__o")&&t.$$typeof)&&!i1(t[o[r]],e[o[r]]))return!1;return!0}return t!==t&&e!==e}var DTt=function(e,n){try{return i1(e,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}},MTt=Ws(DTt),LTt=[],FTt=function(e,n,r){r===void 0&&(r={});var o=k.useRef(null),i={onFirstUpdate:r.onFirstUpdate,placement:r.placement||"bottom",strategy:r.strategy||"absolute",modifiers:r.modifiers||LTt},s=k.useState({styles:{popper:{position:i.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),a=s[0],l=s[1],c=k.useMemo(function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(p){var h=p.state,y=Object.keys(h.elements);dC.flushSync(function(){l({styles:yO(y.map(function(m){return[m,h.styles[m]||{}]})),attributes:yO(y.map(function(m){return[m,h.attributes[m]]}))})})},requires:["computeStyles"]}},[]),u=k.useMemo(function(){var f={onFirstUpdate:i.onFirstUpdate,placement:i.placement,strategy:i.strategy,modifiers:[].concat(i.modifiers,[c,{name:"applyStyles",enabled:!1}])};return MTt(o.current,f)?o.current||f:(o.current=f,f)},[i.onFirstUpdate,i.placement,i.strategy,i.modifiers,c]),d=k.useRef();return bO(function(){d.current&&d.current.setOptions(u)},[u]),bO(function(){if(!(e==null||n==null)){var f=r.createPopper||NTt,p=f(e,n,u);return d.current=p,function(){p.destroy(),d.current=null}}},[e,n,r.createPopper]),{state:d.current?d.current.state:null,styles:a.styles,attributes:a.attributes,update:d.current?d.current.update:null,forceUpdate:d.current?d.current.forceUpdate:null}};function BTt({isActive:t=!1,delay:e=0,placement:n="bottom",xOffset:r=0,yOffset:o=0,isDisabled:i,immediateClose:s=!0}){var I,E,L;const[a,l]=k.useState(null),[c,u]=k.useState(null),d=ETt({delay:e,isDisabled:i}),f=k.useMemo(()=>({placement:n,modifiers:[{name:"offset",options:{offset:[o,r]}}]}),[n,r,o]),{styles:p,attributes:h,...y}=FTt(a,c,f),m=k.useCallback(()=>{if(s){d.close(!0);return}d.close(e===0)},[d,e,s]),w=k.useCallback(()=>{d.open(e===0)},[d,e]);k.useEffect(()=>{t?w():t||m()},[t,w,m]);const x=(L=(E=(I=y==null?void 0:y.state)==null?void 0:I.modifiersData)==null?void 0:E.hide)==null?void 0:L.isReferenceHidden;k.useEffect(()=>{x&&m()},[m,x]);const $={style:p.popper,attributes:h.popper},S={style:p.arrow,attributes:h.arrow};return{isTooltipVisible:d.isOpen,arrowProps:S,tooltipProps:$,setTooltipElement:u,setTriggerElement:l,tooltipElement:c,triggerElement:a,...y}}function nj({dataTestId:t,title:e,content:n}){return _.jsxs("div",{className:"m-3 p-4 rounded bg-colorCriticalSolidFaint","data-testid":t,children:[_.jsx("div",{className:"font-semibold text-lg text-left",children:e}),_.jsx("div",{className:"text-left font-light mt-2",children:n})]})}class GMt extends H.Component{constructor(){super(...arguments);ee(this,"state",{hasError:!1,error:void 0})}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error(n)}render(){var n,r,o;return this.state.hasError?_.jsx("div",{style:{},className:"w-full p-4 ",children:_.jsxs("div",{className:"w-full p-4 rounded-md B-ui-components_bangle-error-boundary",children:[_.jsx("div",{className:"w-full text-5xl text-center",children:""}),_.jsx("h1",{className:"w-full my-4 text-center",children:"-   "}),_.jsxs("div",{className:"w-full text-sm text-center",children:["      "," ",_.jsx("a",{target:"_blank",rel:"noreferrer",className:"font-extrabold underline",href:"https://flent.ru/contacts/",children:"Flent"}),_.jsxs("div",{className:"w-full text-sm italic text-center",children:["Error:"," ",((n=this.state.error)==null?void 0:n.displayMessage)||((r=this.state.error)==null?void 0:r.message)||((o=this.state.error)==null?void 0:o.name)]})]})]})}):this.props.children}}function $m({text:t,href:e}){let n=k.useRef(null),{buttonProps:r}=TC({elementType:"a"},n);return _.jsx(xm,{focusRingClass:"ring-promote",children:_.jsx("a",{...r,ref:n,target:"_blank",href:e,className:"underline outline-none rounded-sm",rel:"noreferrer noopener",style:{color:J.misc.linkText},children:t})})}const jTt=16,zTt=16;function wd({dataId:t,title:e,isActive:n,onClick:r,rightIcon:o=null,rightHoverIcon:i=null,leftNode:s=null,basePadding:a=zTt,depth:l=1,description:c="",className:u="",scrollIntoViewIfNeeded:d=!0,style:f={},disabled:p,allowHover:h=!T0}){const y=k.useRef(null),[m,w]=k.useState(!1);k.useEffect(()=>{d&&n&&y.current&&R0(y.current,!1)},[d,n]);const x=k.useCallback(()=>{h&&w(!0)},[h]),$=k.useCallback(()=>{h&&w(!1)},[h]);return _.jsx(_.Fragment,{children:_.jsxs("div",{"data-id":t,onClick:r,onMouseEnter:x,onMouseLeave:$,ref:y,className:Xe("flex flex-row items-center B-ui-components_inline-palette-row",p?"cursor-not-allowed":"cursor-pointer",u,n&&"BU_active",h&&"BU_hover-allowed",p&&"BU_disabled"),style:{paddingLeft:l*a,paddingRight:jTt,...f},children:[s,_.jsxs("span",{className:"flex flex-col",children:[_.jsx("span",{className:Xe("text-base font-bold truncate select-none",p&&"text-colorNeutralTextSubdued"),children:e}),_.jsx("span",{className:Xe("text-sm font-normal select-none",p&&"text-colorNeutralTextSubdued"),children:c})]}),_.jsx("span",{className:" flex flex-1"}),o,m?i:null]})})}const rj=H.forwardRef(({style:t,showClear:e=!1,onClear:n,className:r="",value:o,label:i,onFocus:s,onKeyDown:a,onChange:l,placeholder:c,autoCapitalize:u,spellCheck:d,autoCorrect:f},p)=>{var y,m;let h=0;return o?h=o.length:p&&typeof p!="function"&&((y=p.current)!=null&&y.value)&&(h=(m=p.current)==null?void 0:m.value.length),_.jsxs("div",{className:"B-ui-components_input-container",children:[_.jsx(xm,{focusClass:"B-ui-components_misc-input-ring",children:_.jsx("input",{onKeyDown:a,"aria-label":i,type:"text",onChange:l,ref:p,className:Xe("outline-offset-1 text-field-neutral border-1 border-colorNeutralTextFieldBorder rounded px-2 py-1",r),style:t,value:o,placeholder:c,onFocus:s,autoCapitalize:u?"on":"off",autoCorrect:f?"on":"off",spellCheck:d})}),_.jsx("div",{style:{position:"relative",display:"flex"},children:e&&h>0&&_.jsx("button",{className:"B-ui-components_input-clear","aria-label":"Clear search",onMouseDown:n})})]})});function oj(t,e){const[n,r]=k.useState(0),o=k.useMemo(()=>["Escape","Enter","ArrowDown","ArrowUp"],[]),i=k.useCallback(()=>{r(0)},[]),s=k.useCallback(c=>{c.preventDefault(),c.stopPropagation();const u=c.type;switch(u){case"keydown":case"click":break;default:throw new Error("Unknown select source "+u)}const d=c.currentTarget.getAttribute("data-id");e(d?()=>d:f=>{var p;return(p=f[PC(n,f.length)])==null?void 0:p.uid},{source:u,metaKey:!!c.metaKey,shiftKey:!!c.shiftKey})},[e,n]),a=k.useCallback(c=>{switch(c.key){case"ArrowUp":{r(u=>u-1);break}case"ArrowDown":{r(u=>u+1);break}case"Enter":{s(c);break}case"Escape":{t();break}default:throw new Error("Unknown key "+c.key)}},[t,s]);return{inputProps:k.useMemo(()=>({onSpecialKey:a,specialKeys:o}),[a,o]),counter:n,onSelect:s,resetCounter:i,updateCounter:r}}function PC(t,e){const n=t%e;return n<0?n+e:n}function ij({paletteType:t,onClickOutside:e,onClickInside:n,children:r,widescreen:o,className:i=""}){const s=k.useRef(null);return Nee(s,e,n),_.jsx("div",{"data-palette-type":t,ref:s,className:"B-ui-components_universal-palette-container z-popup "+Xe(o&&" BU_widescreen",i),children:r})}function bi({children:t,className:e=""}){return _.jsx("div",{className:Xe("flex flex-row justify-center my-1 space",e),children:t})}function Rt({children:t,className:e=""}){return _.jsx("span",{className:Xe("text-xs ml-2 mr-2 font-light",e),children:t})}const sj=H.forwardRef(({className:t,onInputValueChange:e,inputValue:n,specialKeys:r,onSpecialKey:o,placeholder:i,leftNode:s,selectOnMount:a=!1},l)=>{k.useEffect(()=>{var f;(f=l.current)==null||f.focus()},[l]);const c=k.useCallback(f=>{var p;a&&((p=f.target)==null||p.select())},[a]),u=k.useCallback(f=>{r.includes(f.key)&&(f.preventDefault(),o(f))},[r,o]),d=k.useCallback(f=>{e(f.target.value)},[e]);return _.jsxs("div",{className:Xe("B-ui-components_universal-palette-input-wrapper",t),style:{display:"flex"},children:[s&&null,_.jsx(rj,{ref:l,onKeyDown:u,placeholder:i,onFocus:c,autoCapitalize:!1,spellCheck:!1,autoCorrect:!1,label:"Palette Input",className:"B-ui-components_universal-palette-input w-full mx-4 my-4",value:n,onChange:d})]})});function Nc({item:t,onClick:e,isActive:n,className:r="",scrollIntoViewIfNeeded:o=!0,allowHover:i=!T0,style:s}){const a=k.useRef(null);k.useEffect(()=>{o&&n&&a.current&&R0(a.current,!1)},[o,n]);const l=_.jsxs("span",{children:[_.jsx("span",{className:"text-base font-normal",children:t.title}),t.extraInfo&&_.jsx("span",{className:"B-ui-components_extra-info text-base font-light",children:t.extraInfo})]});return _.jsxs("div",{"data-id":t.uid,ref:a,onClick:e,className:Xe("B-ui-components_universal-palette-item",r,n&&"BU_active",t.isDisabled&&"BU_disabled",t.showDividerAbove&&"BU_divider",i&&"BU_allow-hover"),style:{cursor:"pointer",display:"flex",justifyContent:"space-between",userSelect:"none",...s},children:[_.jsxs("div",{className:"flex flex-row",children:[_.jsx("div",{className:"B-ui-components_left-node",children:t.leftNode}),t.description?_.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[l,_.jsx("span",{className:"B-ui-components_description text-sm",children:t.description})]}):l]}),_.jsxs("div",{className:"flex flex-row",children:[_.jsx("span",{className:"B-ui-components_right-node",children:t.rightNode}),_.jsx("span",{className:"B-ui-components_right-hover-node",children:t.rightHoverNode})]})]})}function ef({children:t}){return _.jsx("div",{className:"",style:{overflowY:"scroll"},children:t})}function aj({placeholder:t,initialValue:e="",onDismiss:n,onExecute:r,updateError:o,error:i,children:s,selectOnMount:a,widescreen:l,className:c=""}){const u=Qh(),[d,f]=k.useState(!1),[p,h]=k.useState(e),y=k.useRef(null),m=k.useMemo(()=>[{uid:"input-confirm",title:"",isDisabled:!!(d||i)},{uid:"input-cancel",title:"",isDisabled:!!d}].filter(Boolean),[i,d]),w=i&&{uid:"error",title:"",description:i.message};k.useEffect(()=>{o(void 0),f(!1)},[p,o]),k.useEffect(()=>{f(!1)},[i]),k.useEffect(()=>{var F;i&&((F=y.current)==null||F.focus())},[i]);const x=k.useCallback(async F=>{const j=F(m);let U=!1;if(j==="input-confirm"&&!i){Xh(250).then(()=>{U||u.current||f(!0)});try{await r(p)}finally{U=!0}}else j==="input-cancel"&&n();U=!0},[p,n,m,i,r,u]),{inputProps:$,resetCounter:S,onSelect:I,counter:E}=oj(n,x),L=F=>{h(F),S()},T=m[PC(E,m.length)];return _.jsxs(ij,{paletteType:"input-palette",onClickOutside:()=>{n()},onClickInside:()=>{var F;(F=y.current)==null||F.focus()},className:"input-palette "+c,children:[_.jsx(sj,{leftNode:d?_.jsx(QB,{}):_.jsx(RC,{}),placeholder:t,inputValue:p,onInputValueChange:L,ref:y,selectOnMount:a,...$}),_.jsxs(ef,{className:"px-5 py-5 mx-5 my-5",children:[m.map((F,j)=>_.jsx(Nc,{item:F,onClick:I,isActive:F===T},F.uid)),w&&_.jsx(Nc,{item:w,isActive:!1,onClick:()=>{},className:"bg-colorCriticalSolidFaint"})]}),s]})}function qTt({label:t,labelProps:e}){return _.jsx("label",{...e,className:Xe("text-sm text-colorNeutralTextSubdued",e.className),children:t})}function _d({item:t,className:e="",titleClassName:n="text-base font-normal",extraInfoClassName:r="text-base font-light",descriptionClassName:o="text-sm",onClick:i,isActive:s,style:a,allowHover:l=!T0,extraInfoOnNewLine:c=!1}){if(typeof t.title=="string"){t.title=function(f){f=String(f);const p=f.split(" ");return p.length>1&&p[p.length-1].length>=30&&p.pop(),p.join(" ")}(t.title);const d=24;t.title=t.title.length>d?t.title.slice(0,d)+"...":t.title}const u=_.jsxs("span",{className:Xe(c&&"flex flex-col"),children:[_.jsx("span",{className:n,children:t.title}),t.extraInfo&&_.jsx("span",{className:Xe("B-ui-components_extra-info "+r,c&&"B-ui-components_extra-info-on-new-line"),children:t.extraInfo})]});return _.jsxs("div",{role:"button","data-id":t.uid,onClick:i,className:Xe("B-ui-components_sidebar-row2 rounded-md",l&&"BU_hover",s&&"BU_active",t.isDisabled&&"BU_disabled",t.showDividerAbove&&"BU_divider",e),style:{cursor:"pointer",display:"flex",justifyContent:"space-between",userSelect:"none",paddingTop:"4px",paddingBottom:"5px",marginBottom:"2px",marginTop:"2px",...a},children:[_.jsxs("div",{className:"flex flex-row",children:[_.jsx("span",{children:t.leftNode}),t.description?_.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:["d",u,_.jsx("span",{className:"B-ui-components_description "+o,children:t.description})]}):u]}),_.jsxs("div",{className:"flex flex-row",children:[_.jsx("span",{className:"B-ui-components_right-node",children:t.rightNode}),_.jsx("span",{className:"B-ui-components_right-hover-node",children:t.rightHoverNode})]})]})}function _O({hoverBgColorChange:t=!1,className:e="",children:n,...r}){return _.jsx("div",{className:Xe(t&&"BU_hover",e),...r,children:n})}function lj({className:t="",children:e}){return _.jsx("div",{className:"flex flex-col h-full "+t,style:{overflowY:"auto"},children:e})}function WTt({children:t}){return _.jsx("div",{className:"flex-grow",style:{overflowY:"auto"},children:t})}function UTt(t){let{label:e}=t,n=H.useRef(null),{labelProps:r,inputProps:o,descriptionProps:i,errorMessageProps:s}=dB(t,n);return _.jsxs("div",{className:t.className,style:{display:"flex",flexDirection:"column"},children:[_.jsx(qTt,{label:e,labelProps:r}),_.jsx(xm,{focusClass:"B-ui-components_misc-input-ring",children:_.jsx("input",{...o,ref:n,spellCheck:t.spellCheck===void 0?!0:t.spellCheck,className:"outline-none text-field-neutral border-1 border-colorNeutralTextFieldBorder rounded px-2 py-2",style:{}})}),t.description&&_.jsx("div",{...i,className:"text-sm text-colorNeutralTextSubdued",children:t.description}),t.errorMessage&&_.jsx("div",{...s,className:"text-sm",style:{color:J.color.critical.solidStrong},children:t.errorMessage})]})}const OC=new Hh([g0.spec(),y0.spec(),Id.spec(),v0.spec(),aS.spec(),PM.spec(),lS.spec(),Ao.spec(),fS.spec(),_x.spec(),_0.spec(),is.spec(),Zh.spec(),Dd.spec(),Vh.spec(),wS.spec(),UM.spec(),_S.spec()]);function VTt(){GTt(!0);const t=k.useCallback(()=>{hi(G_)},[]);return _.jsx(Ar,{heroImageUrl:"https://flent.ru/assets/forapp/whatsnew_cover2.png",isDismissable:!0,headingTitle:" ?",dismissText:"",onDismiss:t,size:"lg",children:_.jsx("div",{className:"overflow-y-scroll",style:{maxHeight:"min(50vh, 500px)",minHeight:"min(50vh, 500px)"},children:_.jsx(KTt,{})})})}const HTt=Z8(OC);Y8(OC);function cj(){return lee||"Error loading changelog"}function KTt(){const t=JL({specRegistry:OC,plugins:()=>[new ht({props:{editable:()=>!1}})],initialValue:HTt.parse(cj())||""});return _.jsx(fC,{state:t,focusOnInit:!1,className:"px-5 B-core-extension_changelog-dialog-container text-sm",renderNodeViews:()=>null,children:null})}function xO(){return cj().split(`
`).find(n=>n.startsWith("#"))}function GTt(t){const[e,n]=ES("app/changelog-last-seen1",""),{changelogHasUpdates:r}=fm();k.useEffect(()=>{const o=xO();t&&o&&e!==o&&n(o)},[t,n,e]),k.useEffect(()=>{e!==xO()!==r&&i_t(!0)},[r,e])}function ZTt(){const{dialogMetadata:t}=fm(),e=YTt(t),n=k.useCallback(()=>{hi(GD)},[]);return _.jsx(Ar,{onDismiss:n,primaryButtonConfig:{text:"Reload",onPress:()=>{window.location.reload()}},size:"md",isDismissable:!0,headingTitle:e.title,footer:_.jsx($m,{text:"Report an issue",href:"https://github.com/bangle-io/bangle-io/issues/new"}),children:e.description})}function YTt(t){if(t&&typeof t.title=="string"&&typeof t.description=="string"){const{title:e,description:n}=t;return{title:e,description:n}}return console.warn("Unable to parse dialog metadata",t),{title:"Error",description:"Something went wrong"}}let uj=ZQ();const kO=[!uj&&cn.NativeFS].filter(t=>!!t),JTt=uj?cn.NativeFS:cn.Browser,dj="ERROR_PICKING_DIRECTORY",fj="UNKNOWN_ERROR",XTt="INVALID_WORKSPACE_NAME",pj="WORKSPACE_AUTH_REJECTED",hj="CLICKED_TOO_SOON_ERROR",QTt="WORKSPACE_NAME_ALREADY_EXISTS",eAt="new-workspace-modal_browse-button";function IC({errorType:t,closeModal:e}){if(!t)return null;let n,r;switch(t){case QTt:{r="A workspace with the same name already exists.",n=_.jsxs("div",{children:[_.jsx("button",{className:"underline",onClick:()=>{e(),tm(()=>{tE(Hs.Workspace)})},children:"Click here"})," ","to open it"]});break}case dj:{r="      .",n=_.jsx("div",{children:",        , ,    ."});break}case hj:{r="That didnt work",n=_.jsx("div",{children:"Please try clicking the Browse button again."});break}case XTt:{r="Invalid workspace name",n=_.jsxs("div",{children:["Workspace cannot have ",_.jsx("code",{children:":"})," in its name."]});break}case pj:{r="Flent      .",n=_.jsxs("div",{children:[",      ",_.jsx("i",{children:""}),",   Flent      ."]});break}case fj:{r="An unknown error occurred.",n=_.jsxs("div",{children:["Please reload window and try again. If the problem still persists open an issue at"," ",_.jsx("a",{href:"https://github.com/bangle-io/bangle-io/issues",className:"underline",children:"Github"})," "]});break}default:{let o=t;throw new Error("Unknown error type "+o)}}return _.jsxs("div",{className:"w-full m-1 px-5 py-3 text-center rounded","data-testid":t,style:{backgroundColor:J.color.critical.solidFaint,color:J.color.critical.solidText},children:[_.jsx("div",{className:"font-semibold text-left",children:r}),_.jsx("div",{className:"text-left",children:n})]})}const tAt=(t,e)=>{switch(e.type){case"update_workspace":return{...t,workspace:e.workspace,error:void 0};case"update_error":return{...t,error:e.error};case"reset":return{error:void 0,workspace:void 0}}},nAt=({onDismiss:t,dialogName:e})=>{var c;const[n,r]=k.useReducer(tAt,{error:void 0,workspace:{name:a8()}}),o=k.useCallback(()=>{t(e)},[t,e]),i=n.error,{dispatchSerialOperation:s}=Xs(),a=k.useCallback(()=>{n.workspace&&(s({name:E1,value:{wsName:n.workspace.name}}),o())},[s,n,o]),l=k.useCallback(u=>{r({type:"update_workspace",workspace:{name:u}})},[]);return _.jsxs(Ar,{isDismissable:!0,headingTitle:"  ",onDismiss:o,dismissText:"",size:"md",primaryButtonConfig:{disabled:!n.workspace,onPress:a,text:""},footer:_.jsx($m,{text:"",href:"https://flent.ru/privacy"}),children:[i&&_.jsx("div",{className:"mb-5",children:_.jsx(IC,{errorType:i,closeModal:o})}),_.jsxs("div",{className:"flex flex-col mb-5",children:[_.jsx("div",{className:"mb-2",children:_.jsx("h2",{className:"text-lg font-medium",children:"     "})}),_.jsx(rAt,{isDisabled:!1,value:(c=n.workspace)==null?void 0:c.name,updateValue:l,onPressEnter:i?void 0:a})]})]})};function rAt({value:t="",updateValue:e,isDisabled:n,onPressEnter:r}){return _.jsx(_.Fragment,{children:_.jsx("div",{className:"mb-2",children:_.jsx("div",{className:"mt-2 text-lg text-colorNeutralTextSubdued",children:_.jsx(xm,{focusClass:"B-ui-components_misc-input-ring",children:_.jsx("input",{"aria-label":"workspace name input",className:"p-1 pl-2 w-full rounded border-neutral text-field-neutral",disabled:n,value:t,onChange:o=>{e==null||e(o.target.value)},onKeyDown:o=>{o.key==="Enter"&&(r==null||r())},style:{}})})})})})}const oAt=(t,e)=>{switch(e.type){case"update_workspace":return{...t,workspace:e.workspace,error:void 0};case"update_error":return{...t,error:e.error};case"reset":return{error:void 0,workspace:void 0}}},iAt=({onDismiss:t,dialogName:e})=>{var u,d;const[n,r]=k.useReducer(oAt,{error:void 0,workspace:void 0}),o=k.useCallback(()=>{t(e)},[t,e]),i=k.useCallback(f=>{r(f?{type:"update_workspace",workspace:{name:f.name,rootDir:f}}:{type:"reset"})},[]),s=n.error,a=k.useCallback(f=>{r({type:"update_error",error:f})},[]),{dispatchSerialOperation:l}=Xs(),c=k.useCallback(()=>{n.workspace&&(l({name:S1,value:{rootDirHandle:n.workspace.rootDir}}),o())},[l,n,o]);return _.jsxs(Ar,{isDismissable:!0,headingTitle:" ",dismissText:"",size:"md",primaryButtonConfig:{disabled:!n.workspace,onPress:c,text:" "},children:[s&&_.jsx("div",{className:"mb-5",children:_.jsx(IC,{errorType:s,closeModal:o})}),_.jsxs("div",{className:"flex flex-col mb-5",children:[_.jsxs("div",{className:"mb-2",children:[_.jsx("h2",{className:"text-lg font-medium",children:""}),_.jsx("span",{className:"text-sm text-colorNeutralTextSubdued",children:" ,   Flent    .        .    , ,      .md (,  Notion)."})]}),_.jsx(sAt,{setError:a,dirName:(d=(u=n.workspace)==null?void 0:u.rootDir)==null?void 0:d.name,updateRootDirHandle:i})]})]})};function sAt({setError:t,updateRootDirHandle:e,dirName:n}){const r=FCt(),o=k.useCallback(async i=>{try{const s=await KQ();e(s),i.pointerType==="keyboard"&&requestAnimationFrame(()=>{r.focusNext({wrap:!0})})}catch(s){if(s instanceof Error&&s.message.toLocaleLowerCase().includes("user activation is required")){t(hj);return}if(s instanceof pi&&(s.code===Jh||s.code===k0)){t(pj);return}if(s instanceof pi){t(dj);return}throw t(fj),s}},[e,r,t]);return _.jsx(_.Fragment,{children:_.jsx("div",{className:"",children:n?_.jsxs(_.Fragment,{children:[_.jsxs("span",{children:[" : ",_.jsx("span",{className:"font-bold",children:n})]}),_.jsx(vd,{tone:"secondary",variant:"soft",text:"",className:"ml-2",size:"xs",onPress:()=>{e(void 0)}})]}):_.jsx(vd,{id:eAt,ariaLabel:"pick directory",onPress:o,text:""})})})}const aAt=(t,e)=>{switch(e.type){case"update_workspace":return{...t,workspace:e.workspace,error:void 0};case"update_error":return{...t,error:e.error};case"reset":return{error:void 0,workspace:void 0}}},lAt=a8(),cAt=({onDismiss:t,dialogName:e})=>{var c;const[n,r]=k.useReducer(aAt,{error:void 0,workspace:{name:lAt}}),o=k.useCallback(()=>{t(e)},[t,e]),i=n.error,{dispatchSerialOperation:s}=Xs(),a=k.useCallback(()=>{n.workspace&&(s({name:C1,value:{wsName:n.workspace.name}}),o())},[s,n,o]),l=k.useCallback(u=>{r({type:"update_workspace",workspace:{name:u}})},[]);return _.jsxs(Ar,{isDismissable:!0,headingTitle:"New Browser Workspace",onDismiss:o,size:"md",primaryButtonConfig:{disabled:!n.workspace,onPress:a,text:"Create workspace"},footer:_.jsx($m,{text:"Privacy Policy",href:"https://bangle.io/privacy"}),children:[i&&_.jsx("div",{className:"mb-5",children:_.jsx(IC,{errorType:i,closeModal:o})}),_.jsxs("div",{className:"flex flex-col mb-5",children:[_.jsx("div",{className:"mb-2",children:_.jsx("h2",{className:"text-lg font-medium",children:"Give your workspace a fancy name "})}),_.jsx(uAt,{isDisabled:!1,value:(c=n.workspace)==null?void 0:c.name,updateValue:l,onPressEnter:i?void 0:a})]})]})};function uAt({value:t="",updateValue:e,isDisabled:n,onPressEnter:r}){return _.jsx(_.Fragment,{children:_.jsx("div",{className:"mb-2",children:_.jsx("div",{className:"mt-2 text-lg text-colorNeutralTextSubdued",children:_.jsx(xm,{focusClass:"ring-promote",children:_.jsx("input",{"aria-label":"workspace name input",className:"p-1 pl-2 w-full rounded border-neutral text-field-neutral",disabled:n,value:t,onChange:o=>{e==null||e(o.target.value)},onKeyDown:o=>{o.key==="Enter"&&(r==null||r())}})})})})})}var si=(t=>(t.Yes="Yes",t.No="No",t.Unknown="Unknown",t))(si||{});function mj(t,e){switch(t){case"Yes":return e.onYes();case"No":return e.onNo();case"Unknown":return e.onUnknown();default:throw new Error("Invalid TriState")}}function dAt({onDismiss:t,onSelect:e,hasGithub:n,hasPrivateFs:r}){const[o,i]=H.useState(JTt),s=KB({children:[_.jsx(o1,{"aria-label":"local file storage",textValue:"local file storage",children:_.jsxs("div",{children:[_.jsxs("div",{children:[_.jsx("span",{className:"font-bold",children:"   "}),kO.includes(cn.NativeFS)?_.jsx("span",{children:" ()"}):_.jsx("span",{children:" ()"})]}),_.jsx("div",{children:_.jsx("span",{className:"text-sm text-justify",children:"           .   ,        ."})})]})},cn.NativeFS),_.jsx(o1,{textValue:"browser storage",children:_.jsxs("div",{children:[_.jsx("div",{children:_.jsx("span",{className:"font-bold",children:""})}),_.jsx("div",{children:_.jsx("span",{className:"text-sm text-justify",children:"    .  ,     Flent.      ,    ."})})]})},r?cn.PrivateFS:cn.Browser),n?_.jsx(o1,{textValue:"github storage",children:_.jsxs("div",{children:[_.jsxs("div",{children:[_.jsx("span",{className:"font-bold",children:""}),_.jsx("span",{children:" (-)"})]}),_.jsx("div",{children:_.jsx("span",{className:"text-sm text-justify",children:"  ,  ,         ."})})]})},cn.Github):null].filter(a=>!!a),selectionMode:"single",disabledKeys:kO,selectedKeys:[o],onSelectionChange(a){if(typeof a!="string"){const l=[...a][0];l&&i(l)}}});return _.jsx(Ar,{footer:_.jsx($m,{text:"    ",href:"https://flent.ru/privacy"}),dismissText:"",isDismissable:!0,headingTitle:"  ",onDismiss:t,size:"md",primaryButtonConfig:{text:"",onPress:()=>{e(o)}},children:_.jsx(YB,{label:"  ",state:s,optionComponent:fAt,className:"B-core-extension_pick-workspace-storage"})})}const fAt=({item:t,state:e})=>{let n=H.useRef(null),{optionProps:r,isSelected:o,isDisabled:i,isFocused:s}=AF({key:t.key},e,n),{isFocusVisible:a,focusProps:l}=CC();return _.jsxs("li",{...Sn(r,l),ref:n,className:Xe("flex flex-row items-center rounded",a&&"ring-promote","outline-none rounded-sm cursor-pointer my-2",i&&"opacity-50 cursor-not-allowed",o&&"BU_is-active",s&&"BU_is-focused"),children:[_.jsx("div",{className:"px-3 py-2",children:t.rendered}),_.jsx("div",{className:"px-3",children:o?_.jsx(M9,{className:"w-4 h-4"}):_.jsx("div",{className:"w-4 h-4"})})]})},pAt=t=>{const[e,n]=H.useState(si.Unknown);k.useEffect(()=>{let o=!1;return l8().then(i=>{o||n(si.No)}),()=>{o=!0}},[]);const r=rE();return e===si.Unknown?null:_.jsx(dAt,{hasGithub:r.isExtensionDefined("@bangle.io/github-storage"),hasPrivateFs:e===si.Yes,onDismiss:()=>{t.onDismiss(t.dialogName)},onSelect:o=>{switch(o){case cn.Github:{oo({dialogName:"dialog::@bangle.io/github-storage:NEW_GITHUB_WORKSPACE_TOKEN_DIALOG"});return}case cn.Browser:{oo({dialogName:KD});return}case cn.NativeFS:{oo({dialogName:VD});return}case cn.PrivateFS:{oo({dialogName:HD});return}case cn.Help:throw new Error("Not allowed to create help workspace");default:throw new Error("Unknown storage type")}}})};function hAt(){const{dialogName:t,dialogMetadata:e}=fm(),n=k.useCallback((d=!0)=>{var f;hi($1),d&&((f=Q1())==null||f.focusView())},[]),r=Qh(),{wsName:o}=Xr(),[i,s]=k.useState(),{widescreen:a}=Vd(),l=k.useCallback(async d=>{if(!d||d.endsWith("/")||d.endsWith("/.md")){s(new Error("   "));return}if(!o){s(new Error("  "));return}let f=Qp(o,d);mi(f)||(f+=".md");try{await P6(jt(f),{open:!0}),n()}catch(p){if(!(p instanceof Error))throw p;if(r.current)return;if(s(p),!(p instanceof Io))throw p}},[n,r,o]),c=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],u=c[Math.floor(Math.random()*c.length)];return t!==$1?null:_.jsx(aj,{placeholder:"  ",onExecute:l,onDismiss:n,updateError:s,error:i,widescreen:a,initialValue:(e==null?void 0:e.initialValue)||u+" ",selectOnMount:!0,children:_.jsx(bi,{children:_.jsx(Rt,{})})})}function mAt(){const t=k.useCallback((c=!0)=>{hi(K_),c&&x6()},[]),e=Qh(),{widescreen:n}=Vd(),{wsName:r}=Xr(),o=_6(),[i,s]=k.useState(),a=k.useCallback(async c=>{if(!c||c.endsWith("/")||c.endsWith("/.md")){s(new Error("Must provide a note name"));return}if(!r){s(new Error("No workspace open"));return}if(!o){s(new Error("No note active"));return}let u=Qp(r,c);mi(u)||(u+=".md");try{const d=jt(o),f=jt(u);await y_t(d,f),t()}catch(d){if(e.current)return;if(t(),!(d instanceof Error))throw d;if(d instanceof lt){bt({severity:Be.ERROR,uid:"error-rename-note-"+o,title:"Unable to rename note",content:d.message});return}}},[o,t,e,r]),l=o?ft(o).filePath:"";return _.jsx(aj,{placeholder:"Enter the new name",onExecute:a,onDismiss:t,updateError:s,error:i,initialValue:l,selectOnMount:!0,widescreen:n,children:_.jsx(bi,{children:_.jsxs(Rt,{children:['You are currently renaming "',l,'"']})})})}function gAt(){const t=k.useCallback(()=>{hi(Z_)},[]);return _.jsx(Ar,{onDismiss:t,primaryButtonConfig:{text:"Reload",onPress:()=>{window.location.reload()}},size:"md",isDismissable:!0,headingTitle:"Reload Application",children:"Are you sure you want to reload the application?"})}function yAt(t=10){return Math.random().toString(36).substring(2,15).slice(0,t)}let bAt=0;const vAt=yAt(4);class wAt extends WeakMap{get(e){let n=super.get(e);return n||(n=(bAt++).toString()+"-"+vAt,this.set(e,n),n)}}const _At=new wAt;function xAt(t){return _At.get(t)}function kAt(t){if(t.aborted)throw new DOMException("AbortError","AbortError")}const gj="ABORTABLE_SERVICE_ABORTED$_0.39574939029022294%";function $At(t,{abortableMethodIdentifier:e="abortable"}={}){return new Proxy(t,{get(n,r){const o=Reflect.get(n,r);return typeof r=="string"&&r.startsWith(e)&&typeof o=="function"?(i,...s)=>{if(!(i instanceof AbortSignal))throw new Error(`An abortable methods (${r}) first param must be an "AbortSignal"`);kAt(i);const a=r+xAt(i);return i.addEventListener("abort",()=>{console.debug("aborting "+a),n.__signalWorkerToAbortMethod(a)},{once:!0}),Reflect.apply(o,null,[a,...s]).catch(l=>{throw l===gj?new DOMException("Aborted","AbortError"):l})}:o}})}function SAt(t){return e=>async(n,...r)=>{if(typeof n!="string")throw console.warn("You are probably calling this method incorrectly, please make sure to use the provided prox  y"),new Error("Cannot execute: uniqueAbortId must be string");let o=t.get(n);return o?console.debug("reusing controller"):(o=new AbortController,t.set(n,o)),console.debug(n+" about to start"),e(o.signal,...r).then(i=>(t.delete(n),console.debug(n+" finished successfully",o==null?void 0:o.signal.aborted),i),i=>{throw t.delete(n),Mc(i)?(console.debug(n+" threw Abort Error"),gj):i})}}function EAt(t){let e=new Map;return CAt(t({abortWrapper:SAt(e)}),e)}function CAt(t,e){return{...t,__signalWorkerToAbortMethod:async n=>{const r=e.get(n);r?(console.debug("aborted"+n),r.abort(),e.delete(n)):console.debug(`Cannot abort: ${n} not found`)}}}function Sm(t,e){const n=[];return{proxy:new Proxy({},{get:(i,s,a)=>{if(t.current){const l=Reflect.get(e(),s,a);return typeof l!="function"&&console.warn(`Proxying on a non-callable ${s} is not supported`),l}return function(...l){return new Promise((c,u)=>{const d=()=>{const f=Reflect.get(e(),s,a);try{c(Reflect.apply(f,this===a?e():this,l))}catch(p){u(p)}};t.current?d():n.push(d)})}}}),check:()=>{if(!t.current)return;let i=n.length;for(let s=0;s<i&&t.current;s++){const a=n.shift();a==null||a()}}}}const Em={current:void 0},tf=[];let Cm={current:!1};const yj=Sm(Cm,()=>{var t;return(t=Em.current)==null?void 0:t.editor});tf.push(yj.check);const bj=Sm(Cm,()=>{var t;return(t=Em.current)==null?void 0:t.test});tf.push(bj.check);const vj=Sm(Cm,()=>{var t;return(t=Em.current)==null?void 0:t.workspace});tf.push(vj.check);const wj=Sm(Cm,()=>{var t;return(t=Em.current)==null?void 0:t.abortable});tf.push(wj.check);const _j=Sm(Cm,()=>{var t;return(t=Em.current)==null?void 0:t.replicaSlices});tf.push(_j.check);if(tf.length!==5)throw new Error("Incorrect number of checks");const Tm={editor:yj.proxy,test:bj.proxy,workspace:vj.proxy,abortable:$At(wj.proxy),replicaSlices:_j.proxy};function TAt(){const{wsName:t}=Qn();if(!t){bt({severity:Be.ERROR,uid:"new-note-not-no-workspace",title:"  .",buttons:[]});return}const e=new AbortController;bt({severity:Be.INFO,uid:"downloading-ws-copy"+t,title:" .   zip-     .",buttons:[]}),Tm.abortable.abortableBackupAllFiles(e.signal,t).then(n=>{PAt(n,n.name)})}function AAt(){const{wsName:t}=Qn();return t?(RAt().then(e=>{const n=new AbortController;return bt({buttons:[],severity:Be.INFO,uid:"restoreWorkspaceFromBackup-"+t,title:"  !   . ,       ."}),Tm.abortable.abortableCreateWorkspaceFromBackup(n.signal,t,e)}).then(()=>Xh(100)).then(()=>{var e;iE(),bt({buttons:[],severity:Be.SUCCESS,uid:"recovery-finished-"+t,title:`Restore success! ${((e=Qn().noteWsPaths)==null?void 0:e.length)||0} notes were restored.`})},e=>{var n;if((n=e==null?void 0:e.message)!=null&&n.includes(_$.EMPTY_WORKSPACE_NEEDED)){bt({buttons:[],severity:Be.ERROR,uid:"restoreWorkspaceFromBackup-workspace-has-things",title:"     ."});return}}),!0):(bt({buttons:[],severity:Be.ERROR,uid:"restoreWorkspaceFromBackup-no-workspace",title:"   ."}),!1)}function xj(){const t=_6();return t?(Pu(void 0),typeof window!="undefined"&&window.confirm(` ,   ? "${tn(t).filePath}"?     ..`)&&O6(t).then(()=>{bt({buttons:[],severity:Be.SUCCESS,uid:"success-delete-"+t,title:"Successfully deleted "+t})}).catch(e=>{e instanceof Error&&bt({buttons:[],severity:Be.ERROR,uid:"delete-"+xj,title:e.message})}),!0):(bt({severity:Be.ERROR,uid:"delete-wsPath-not-found",title:"Cannot delete because there is no primary note",buttons:[]}),!0)}function NAt(t){if(t=t||Qn().wsName,!t){bt({buttons:[],severity:Be.ERROR,uid:"removeWorkspace-no-workspace",title:"  ."});return}if(t===Dc){bt({buttons:[],severity:Be.ERROR,uid:"removeWorkspace-not-allowed",title:"   "});return}window.confirm(` ,    "${t}"?       -   .`)&&(lwt(t),bt({buttons:[],severity:Be.SUCCESS,uid:"success-removed-"+t,title:"  "+t}))}function RAt(){return new Promise((t,e)=>{const n=document.createElement("input");n.type="file",n.accept=".zip",n.addEventListener("change",()=>{var o;const r=(o=n.files)==null?void 0:o[0];r?t(r):e(new Error("    "))},{once:!0}),n.click()})}function PAt(t,e){const n=URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download=e,r.addEventListener("click",()=>{setTimeout(()=>{URL.revokeObjectURL(n)},150)},{once:!0}),r.click()}const OAt=zn.create({name:FEt,application:{dialogs:[{name:G_,ReactComponent:VTt},{name:$1,ReactComponent:hAt},{name:K_,ReactComponent:mAt},{name:KT,ReactComponent:pAt},{name:VD,ReactComponent:iAt},{name:KD,ReactComponent:nAt},{name:HD,ReactComponent:cAt},{name:Z_,ReactComponent:gAt},{name:GD,ReactComponent:ZTt}],operations:[{name:XT,title:"  ",keywords:["dismiss","hide"],hidden:!0},{name:zP,title:" ",keywords:["remove"],hidden:!0},{name:J_,title:" ",keywords:["create","",""],keybinding:"Mod-y",preventEditorFocusOnExecute:!0},{name:GT,title:" ",keywords:["create"],preventEditorFocusOnExecute:!0},{name:Y_,title:"  ",keywords:["delete"]},{name:MP,title:"  ",preventEditorFocusOnExecute:!0},{name:LP,title:"/  ",keywords:["hide","outline","toc","backlink","right sidebar"],keybinding:"Mod-r"},{name:ZT,title:"/  ",keybinding:"Mod-\\",keywords:["hide"]},{name:YT,title:"  ",keywords:["preview"]},{name:JT,title:"  ",keywords:["hide"]},{name:FP,title:"/ ",keywords:["darkmode","lightmode","color"],hidden:!0},{name:S1,title:"Create native fs workspace",hidden:!0},{name:E1,title:"Create browser workspace",hidden:!0},{name:C1,title:"Create private fs workspace",hidden:!0},{name:MV,title:"Reload page in response to a service worker update",hidden:!0},{name:LV,title:"Dismiss prompt from service worker to update",hidden:!0},{name:qp,title:"Report an issue on Github",hidden:!0},{name:BP,title:"   "},{name:jP,title:"     "},{name:"operation::@bangle.io/core-extension:focus-primary-editor",title:"Editor: Focus on primary editor",hidden:!0},{name:"operation::@bangle.io/core-extension:focus-secondary-editor",title:"Editor: Focus on secondary editor",hidden:!0},{name:"operation::@bangle.io/core-extension:toggle-editing-mode",title:"Editor: Toggle editing mode",hidden:!0},{name:"operation::@bangle.io/core-extension:reload-application",title:" "}],operationHandler(){return{handle(t,e){var n,r;switch(t.name){case J_:{if(!Qn().wsName)return bt({severity:Be.ERROR,uid:"new-note-not-no-workspace",title:"  "}),!0;const{path:o}=e||{};return oo({dialogName:$1,metadata:{initialValue:typeof o=="string"?o:void 0}}),!0}case GT:return oo({dialogName:KT}),!0;case MP:return Pu(void 0),oo({dialogName:K_}),!0;case LP:return r_t(),!0;case zP:return xj(),!0;case ZT:{const{openedWsPaths:o}=Qn();return o.secondaryWsPath?Vl(i=>i.updateSecondaryWsPath(void 0)):o.primaryWsPath&&Vl(i=>i.updateSecondaryWsPath(o.primaryWsPath)),!0}case YT:{const o=Qn().primaryWsPath;return o&&Vl(i=>i.updateMiniEditorWsPath(o)),!0}case JT:return Vl(o=>o.updateMiniEditorWsPath(void 0)),!0;case XT:return typeof e=="number"?(eR(e),!0):(eR(),!0);case BP:return TAt(),!0;case jP:return AAt(),!0;case Y_:{const o=typeof e=="string"?e:void 0;return NAt(o?ss(o):void 0),!0}case"operation::@bangle.io/core-extension:focus-primary-editor":return(n=Q1())==null||n.focusView(),!0;case"operation::@bangle.io/core-extension:focus-secondary-editor":return(r=X1(Xf))==null||r.focusView(),!0;case FP:return o_t(),!0;case E1:{const{wsName:o}=e||{};return DAt(o),!0}case C1:{const{wsName:o}=e||{};return console.debug("Creating private fs workspace",o),MAt(o),!0}case S1:{const{rootDirHandle:o}=e||{};return IAt(o),!0}case qp:return window.open("https://github.com/bangle-io/bangle-io/issues/new"),!0;case"operation::@bangle.io/core-extension:toggle-editing-mode":{Zwt();let{editingAllowed:o}=J1();return bt({severity:o?Be.INFO:Be.WARNING,uid:"editing-mode"+o+Date.now(),title:"Editing mode is now "+(o?"on":"off")}),!0}case"operation::@bangle.io/core-extension:reload-application":return oo({dialogName:Z_}),!0;case"operation::@bangle.io/core-extension:show-changelog":return oo({dialogName:G_}),!0;default:return!1}}}}}});async function IAt(t){var n;const e=t==null?void 0:t.name;if(typeof e=="string")try{await X0(ss(e),cn.NativeFS,{rootDirHandle:t}),(n=window.fathom)==null||n.trackGoal("K3NFTGWX",0)}catch(r){throw bt({severity:Be.ERROR,uid:"error-create-workspace-"+(t==null?void 0:t.name),title:"Unable to create workspace "+(t==null?void 0:t.name),content:r.displayMessage||r.message}),r}else throw new Error("   "+S1);return!0}async function DAt(t){var e;if(typeof t!="string")throw new Error("   "+E1);try{await X0(t,cn.Browser,{}),(e=window.fathom)==null||e.trackGoal("AISLCLRF",0)}catch(n){throw bt({severity:Be.ERROR,uid:"error-create-workspace-"+t,title:"Unable to create workspace "+t,content:n.displayMessage||n.message}),n}return!0}async function MAt(t){var e;if(typeof t!="string")throw new Error("   "+C1);try{await X0(t,cn.PrivateFS,{}),(e=window.fathom)==null||e.trackGoal("KWXITXAK",0)}catch(n){throw bt({severity:Be.ERROR,uid:"error-create-workspace-"+t,title:"Unable to create workspace "+t,content:n.displayMessage||n.message}),n}return!0}const LAt="@bangle.io/core-palettes";/** @license
 * fzf v0.5.2
 * Copyright (c) 2021 Ajit
 * Licensed under BSD 3-Clause
 */const DC={216:"O",223:"s",248:"o",273:"d",295:"h",305:"i",320:"l",322:"l",359:"t",383:"s",384:"b",385:"B",387:"b",390:"O",392:"c",393:"D",394:"D",396:"d",398:"E",400:"E",402:"f",403:"G",407:"I",409:"k",410:"l",412:"M",413:"N",414:"n",415:"O",421:"p",427:"t",429:"t",430:"T",434:"V",436:"y",438:"z",477:"e",485:"g",544:"N",545:"d",549:"z",564:"l",565:"n",566:"t",567:"j",570:"A",571:"C",572:"c",573:"L",574:"T",575:"s",576:"z",579:"B",580:"U",581:"V",582:"E",583:"e",584:"J",585:"j",586:"Q",587:"q",588:"R",589:"r",590:"Y",591:"y",592:"a",593:"a",595:"b",596:"o",597:"c",598:"d",599:"d",600:"e",603:"e",604:"e",605:"e",606:"e",607:"j",608:"g",609:"g",610:"G",613:"h",614:"h",616:"i",618:"I",619:"l",620:"l",621:"l",623:"m",624:"m",625:"m",626:"n",627:"n",628:"N",629:"o",633:"r",634:"r",635:"r",636:"r",637:"r",638:"r",639:"r",640:"R",641:"R",642:"s",647:"t",648:"t",649:"u",651:"v",652:"v",653:"w",654:"y",655:"Y",656:"z",657:"z",663:"c",665:"B",666:"e",667:"G",668:"H",669:"j",670:"k",671:"L",672:"q",686:"h",867:"a",868:"e",869:"i",870:"o",871:"u",872:"c",873:"d",874:"h",875:"m",876:"r",877:"t",878:"v",879:"x",7424:"A",7427:"B",7428:"C",7429:"D",7431:"E",7432:"e",7433:"i",7434:"J",7435:"K",7436:"L",7437:"M",7438:"N",7439:"O",7440:"O",7441:"o",7442:"o",7443:"o",7446:"o",7447:"o",7448:"P",7449:"R",7450:"R",7451:"T",7452:"U",7453:"u",7454:"u",7455:"m",7456:"V",7457:"W",7458:"Z",7522:"i",7523:"r",7524:"u",7525:"v",7834:"a",7835:"s",8305:"i",8341:"h",8342:"k",8343:"l",8344:"m",8345:"n",8346:"p",8347:"s",8348:"t",8580:"c"};for(let t="".codePointAt(0);t<="".codePointAt(0);++t){const e=String.fromCodePoint(t);for(const n of"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"){const o=(n+e).normalize().codePointAt(0);o>126&&(DC[o]=n)}}const h_={a:[7844,7863],e:[7870,7879],o:[7888,7907],u:[7912,7921]};for(const t of Object.keys(h_)){const e=t.toUpperCase();for(let n=h_[t][0];n<=h_[t][1];++n)DC[n]=n%2===0?e:t}function Am(t){if(t<192||t>8580)return t;const e=DC[t];return e!==void 0?e.codePointAt(0):t}function va(t,e){return t>e?t:e}const kj=t=>t.split("").map(e=>e.codePointAt(0)),FAt=new Set(` \f
\r	\v\u2028\u2029\uFEFF`.split("").map(t=>t.codePointAt(0)));for(let t="".codePointAt(0);t<="".codePointAt(0);t++)FAt.add(t);const xd="".codePointAt(0),xh="A".codePointAt(0),kh="Z".codePointAt(0),$j="a".codePointAt(0),Sj="z".codePointAt(0),BAt="0".codePointAt(0),jAt="9".codePointAt(0);function ku(t,e,n){return n?t:e-t-1}const $h=16,Fy=-3,Sh=-1,Rc=$h/2,zAt=$h/2,qAt=Rc+Sh,Ej=-(Fy+Sh),Cj=2;function Mk(t){return t?new Set:null}function Mf(t,e,n){if(e!==null&&e.i16.length>t+n){const r=e.i16.subarray(t,t+n);return[t+n,r]}return[t,new Int16Array(n)]}function $O(t,e,n){if(e!==null&&e.i32.length>t+n){const r=e.i32.subarray(t,t+n);return[t+n,r]}return[t,new Int32Array(n)]}function Tj(t){return t>=$j&&t<=Sj?1:t>=xh&&t<=kh?2:t>=BAt&&t<=jAt?4:0}function Aj(t){const e=String.fromCodePoint(t);return e!==e.toUpperCase()?1:e!==e.toLowerCase()?2:e.match(/\p{Number}/gu)!==null?4:e.match(/\p{Letter}/gu)!==null?3:0}function By(t){return t<=xd?Tj(t):Aj(t)}function MC(t,e){return t===0&&e!==0?Rc:t===1&&e===2||t!==4&&e===4?qAt:e===0?zAt:0}function WAt(t,e){return e===0?Rc:MC(By(t[e-1]),By(t[e]))}function UAt(t,e,n,r){let o=t.slice(r),i=o.indexOf(n);if(i===0)return r;if(!e&&n>=$j&&n<=Sj){i>0&&(o=o.slice(0,i));const s=o.indexOf(n-32);s>=0&&(i=s)}return i<0?-1:r+i}function SO(t){for(const e of t)if(e>=128)return!1;return!0}function LC(t,e,n){if(!SO(t))return 0;if(!SO(e))return-1;let r=0,o=0;for(let i=0;i<e.length;i++){if(o=UAt(t,n,e[i],o),o<0)return-1;i===0&&o>0&&(r=o-1),o++}return r}const VAt=(t,e,n,r,o,i,s)=>{const a=o.length;if(a===0)return[{start:0,end:0,score:0},Mk(i)];const l=r.length;if(s!==null&&l*a>s.i16.length)return Rj(t,e,n,r,o,i);const c=LC(r,o,t);if(c<0)return[{start:-1,end:-1,score:0},null];let u=0,d=0,f=null,p=null,h=null,y=null;[u,f]=Mf(u,s,l),[u,p]=Mf(u,s,l),[u,h]=Mf(u,s,l),[d,y]=$O(d,s,a);const[,m]=$O(d,s,l);for(let fe=0;fe<m.length;fe++)m[fe]=r[fe];let w=0,x=0,$=0,S=0;const I=o[0];let E=o[0],L=0,T=0,F=!1,j=m.subarray(c),U=f.subarray(c).subarray(0,j.length),ce=p.subarray(c).subarray(0,j.length),W=h.subarray(c).subarray(0,j.length);for(let[fe,_e]of j.entries()){let he=null;_e<=xd?(he=Tj(_e),!t&&he===2&&(_e+=32)):(he=Aj(_e),!t&&he===2&&(_e=String.fromCodePoint(_e).toLowerCase().codePointAt(0)),e&&(_e=Am(_e))),j[fe]=_e;const be=MC(T,he);if(W[fe]=be,T=he,_e===E&&($<a&&(y[$]=c+fe,$++,E=o[Math.min($,a-1)]),S=c+fe),_e===I){const Ie=$h+be*Cj;if(U[fe]=Ie,ce[fe]=1,a===1&&(n&&Ie>w||!n&&Ie>=w)&&(w=Ie,x=c+fe,n&&be===Rc))break;F=!1}else F?U[fe]=va(L+Sh,0):U[fe]=va(L+Fy,0),ce[fe]=0,F=!0;L=U[fe]}if($!==a)return[{start:-1,end:-1,score:0},null];if(a===1){const fe={start:x,end:x+1,score:w};if(!i)return[fe,null];const _e=new Set;return _e.add(x),[fe,_e]}const P=y[0],ne=S-P+1;let Q=null;[u,Q]=Mf(u,s,ne*a);{const fe=f.subarray(P,S+1);for(const[_e,he]of fe.entries())Q[_e]=he}let[,oe]=Mf(u,s,ne*a);{const fe=p.subarray(P,S+1);for(const[_e,he]of fe.entries())oe[_e]=he}const nt=y.subarray(1),xt=o.slice(1).slice(0,nt.length);for(const[fe,_e]of nt.entries()){let he=!1;const be=xt[fe],Ie=fe+1,Qe=Ie*ne,Ue=m.subarray(_e,S+1),dn=h.subarray(_e).subarray(0,Ue.length),wi=oe.subarray(Qe+_e-P).subarray(0,Ue.length),go=oe.subarray(Qe+_e-P-1-ne).subarray(0,Ue.length),Zo=Q.subarray(Qe+_e-P).subarray(0,Ue.length),rt=Q.subarray(Qe+_e-P-1-ne).subarray(0,Ue.length),Tt=Q.subarray(Qe+_e-P-1).subarray(0,Ue.length);Tt[0]=0;for(const[wt,_i]of Ue.entries()){const yo=wt+_e;let bo=0,at=0,$t=0;if(he?at=Tt[wt]+Sh:at=Tt[wt]+Fy,be===_i){bo=rt[wt]+$h;let Yt=dn[wt];$t=go[wt]+1,Yt===Rc?$t=1:$t>1&&(Yt=va(Yt,va(Ej,h[yo-$t+1]))),bo+Yt<at?(bo+=dn[wt],$t=0):bo+=Yt}wi[wt]=$t,he=bo<at;const _t=va(va(bo,at),0);Ie===a-1&&(n&&_t>w||!n&&_t>=w)&&(w=_t,x=yo),Zo[wt]=_t}}const Ae=Mk(i);let ae=P;if(i&&Ae!==null){let fe=a-1;ae=x;let _e=!0;for(;;){const he=fe*ne,be=ae-P,Ie=Q[he+be];let Qe=0,Ue=0;if(fe>0&&ae>=y[fe]&&(Qe=Q[he-ne+be-1]),ae>y[fe]&&(Ue=Q[he+be-1]),Ie>Qe&&(Ie>Ue||Ie===Ue&&_e)){if(Ae.add(ae),fe===0)break;fe--}_e=oe[he+be]>1||he+ne+be+1<oe.length&&oe[he+ne+be+1]>0,ae--}}return[{start:ae,end:x+1,score:w},Ae]};function Nj(t,e,n,r,o,i,s){let a=0,l=0,c=!1,u=0,d=0;const f=Mk(s);let p=0;o>0&&(p=By(n[o-1]));for(let h=o;h<i;h++){let y=n[h];const m=By(y);if(t||(y>=xh&&y<=kh?y+=32:y>xd&&(y=String.fromCodePoint(y).toLowerCase().codePointAt(0))),e&&(y=Am(y)),y===r[a]){s&&f!==null&&f.add(h),l+=$h;let w=MC(p,m);u===0?d=w:(w===Rc&&(d=w),w=va(va(w,d),Ej)),a===0?l+=w*Cj:l+=w,c=!1,u++,a++}else c?l+=Sh:l+=Fy,c=!0,u=0,d=0;p=m}return[l,f]}const Rj=(t,e,n,r,o,i,s)=>{if(o.length===0)return[{start:0,end:0,score:0},null];if(LC(r,o,t)<0)return[{start:-1,end:-1,score:0},null];let a=0,l=-1,c=-1;const u=r.length,d=o.length;for(let f=0;f<u;f++){let p=r[ku(f,u,n)];t||(p>=xh&&p<=kh?p+=32:p>xd&&(p=String.fromCodePoint(p).toLowerCase().codePointAt(0))),e&&(p=Am(p));const h=o[ku(a,d,n)];if(p===h&&(l<0&&(l=f),a++,a===d)){c=f+1;break}}if(l>=0&&c>=0){a--;for(let h=c-1;h>=l;h--){const y=ku(h,u,n);let m=r[y];t||(m>=xh&&m<=kh?m+=32:m>xd&&(m=String.fromCodePoint(m).toLowerCase().codePointAt(0)));const w=ku(a,d,n),x=o[w];if(m===x&&(a--,a<0)){l=h;break}}if(!n){const h=l;l=u-c,c=u-h}const[f,p]=Nj(t,e,r,o,l,c,i);return[{start:l,end:c,score:f},p]}return[{start:-1,end:-1,score:0},null]},HAt=(t,e,n,r,o,i,s)=>{if(o.length===0)return[{start:0,end:0,score:0},null];const a=r.length,l=o.length;if(a<l)return[{start:-1,end:-1,score:0},null];if(LC(r,o,t)<0)return[{start:-1,end:-1,score:0},null];let c=0,u=-1,d=0,f=-1;for(let p=0;p<a;p++){const h=ku(p,a,n);let y=r[h];t||(y>=xh&&y<=kh?y+=32:y>xd&&(y=String.fromCodePoint(y).toLowerCase().codePointAt(0))),e&&(y=Am(y));const m=ku(c,l,n);if(o[m]===y){if(m===0&&(d=WAt(r,h)),c++,c===l){if(d>f&&(u=p,f=d),d===Rc)break;p-=c-1,c=0,d=0}}else p-=c,c=0,d=0}if(u>=0){let p=0,h=0;n?(p=u-l+1,h=u+1):(p=a-(u+1),h=a-(u-l+1));const[y]=Nj(t,e,r,o,p,h,!1);return[{start:p,end:h,score:y},null]}return[{start:-1,end:-1,score:0},null]},KAt=100*1024,GAt=2048;function ZAt(t,e){return{i16:new Int16Array(t),i32:new Int32Array(e)}}const YAt=ZAt(KAt,GAt),JAt=(t,e,n)=>{let r=!1;switch(e){case"smart-case":t.toLowerCase()!==t&&(r=!0);break;case"case-sensitive":r=!0;break;case"case-insensitive":t=t.toLowerCase(),r=!1;break}let o=kj(t);return n&&(o=o.map(Am)),{queryRunes:o,caseSensitive:r}};function XAt(t,e){const n=Object.keys(t).map(o=>parseInt(o,10)).sort((o,i)=>i-o);let r=[];for(const o of n)if(r=r.concat(t[o]),r.length>=e)break;return r}function QAt(t,e,n){return r=>{const o=this.runesList[r];if(e.length>o.length)return;let[i,s]=this.algoFn(n,this.opts.normalize,this.opts.forward,o,e,!0,YAt);if(i.start===-1)return;if(this.opts.fuzzy===!1){s=new Set;for(let l=i.start;l<i.end;++l)s.add(l)}const a=this.opts.sort?i.score:0;t[a]===void 0&&(t[a]=[]),t[a].push({item:this.items[r],...i,positions:s!=null?s:new Set})}}function e3t(t){const{queryRunes:e,caseSensitive:n}=JAt(t,this.opts.casing,this.opts.normalize),r={},o=QAt.bind(this)(r,e,n);for(let i=0,s=this.runesList.length;i<s;++i)o(i);return XAt(r,this.opts.limit)}const Pj={limit:1/0,selector:t=>t,casing:"smart-case",normalize:!0,fuzzy:"v2",tiebreakers:[],sort:!0,forward:!0};class t3t{constructor(e,...n){switch(this.opts={...Pj,...n[0]},this.items=e,this.runesList=e.map(r=>kj(this.opts.selector(r).normalize())),this.algoFn=HAt,this.opts.fuzzy){case"v2":this.algoFn=VAt;break;case"v1":this.algoFn=Rj;break}}}const n3t={...Pj,match:e3t};class r3t extends t3t{constructor(e,...n){super(e,...n),this.opts={...n3t,...n[0]}}find(e){if(e.length===0||this.items.length===0)return this.items.slice(0,this.opts.limit).map(o3t);e=e.normalize();let n=this.opts.match.bind(this)(e);return i3t(n,this.opts)}}const o3t=t=>({item:t,start:-1,end:-1,score:0,positions:new Set});function i3t(t,e){if(e.sort){const{selector:n}=e;t.sort((r,o)=>{if(r.score===o.score)for(const i of e.tiebreakers){const s=i(r,o,n);if(s!==0)return s}return 0})}return Number.isFinite(e.limit)&&t.splice(e.limit),t}function Eb(t,e,n){return n(t.item).length-n(e.item).length}function s3t(t,e){return t.start-e.start}class Lk{constructor(e,...n){this.finder=new r3t(e,...n),this.find=this.finder.find.bind(this.finder)}}function FC(t,e,...n){const r=k.useRef(n),[o,i]=k.useState(()=>new Lk(t,...r.current));return k.useEffect(()=>{i(new Lk(t,...r.current))},[t,r]),k.useMemo(()=>o.find(e),[o,e])}const Oj=200,a3t=6,l3t=5,c3t=200,EO=({wsPath:t,onClick:e})=>{const{fileName:n,dirPath:r}=tn(t);return{uid:t,title:Cr(n),rightNode:void 0,showDividerAbove:!1,extraInfo:r,data:{wsPath:t},rightHoverNode:_.jsx(No,{hint:"Open in split screen",hintPos:"left",onClick:e,children:_.jsx(vTt,{style:{height:18,width:18}})})}},u3t=H.forwardRef(({query:t,dismissPalette:e,onSelect:n,getActivePaletteItem:r},o)=>{const{recent:i,other:s}=f3t(t),a=k.useMemo(()=>{const u=i.map((d,f)=>{let p=EO({wsPath:d,onClick:h=>{h.stopPropagation(),ad(d),e()}});return f===0&&(p.rightNode=""),p});return[...u.slice(0,t?l3t:c3t),...s.map((d,f)=>{let p=EO({wsPath:d,onClick:h=>{h.stopPropagation(),ad(d),e()}});return f===0&&u.length>0&&(p.showDividerAbove=!0),p})]},[s,i,t,e]),l=k.useCallback((u,d)=>{const f=u(a),p=a.find(h=>h.uid===f);p&&I6(p.data.wsPath,d.metaKey?"newTab":d.shiftKey?"secondary":"primary")},[a]);k.useImperativeHandle(o,()=>({onExecuteItem:l}),[l]);const c=r(a);return _.jsxs(_.Fragment,{children:[_.jsx(ef,{children:a.map(u=>_.jsx(Nc,{item:u,onClick:n,isActive:c===u},u.uid))}),_.jsxs(bi,{children:[_.jsx(Rt,{}),_.jsxs(Rt,{children:[_.jsx("kbd",{className:"font-normal",children:""})," "]}),_.jsxs(Rt,{children:[_.jsx("kbd",{className:"font-normal",children:"Enter"})," "]}),_.jsxs(Rt,{children:[_.jsx("kbd",{className:"font-normal",children:"Shift-Enter"}),"  "]}),_.jsxs(Rt,{children:[_.jsxs("kbd",{className:"font-normal",children:[em("Mod"),"-Enter"]})," ","  "]})]})]})}),Ij={type:Hs.Notes,icon:_.jsx(bTt,{}),identifierPrefix:"",placeholder:"  (? - ).",parseRawQuery:t=>t,ReactComponent:u3t},d3t=[];function f3t(t){const{recentWsPaths:e=d3t,wsName:n}=Xr(),r=FC(e,t,{limit:Oj,selector:a=>tn(a).filePath,tiebreakers:[Eb]}),o=p3t(t,n),i=k.useMemo(()=>{let a;return t===""?a=e:a=r.map((l,c)=>l.item).slice(0,a3t),a},[r,e,t]),s=k.useMemo(()=>{const a=new Set(i);return o?o.filter(l=>!a.has(l.item)).map((l,c)=>l.item):[]},[o,i]);return{recent:i,other:s}}function p3t(t,e){const[n,r]=k.useState(void 0);return k.useEffect(()=>{const o=new AbortController;let i=!1;return e&&Tm.abortable.abortableFzfSearchNoteWsPaths(o.signal,e,t,Oj).then(s=>{i||r(s)}).catch(s=>{if(!Mc(s))throw s}),()=>{i=!0,o.abort()}},[t,e]),n}const h3t=10;function Dj(t,{maxEntries:e=h3t}={}){const[n,r]=ES(t,{}),o=k.useCallback(s=>{r(a=>{const l=Object.entries(a||{}).sort((u,d)=>typeof u[1]=="number"&&typeof d[1]=="number"?d[1]-u[1]:0),c=Object.fromEntries(l.slice(0,e));return c[s]=Date.now(),c})},[r,e]),i=k.useCallback(s=>{const a=s.sort((l,c)=>{const u=n[l.uid],d=n[c.uid];return u&&d?d-u:u&&!d?-1:d&&!u?1:l.title.localeCompare(c.title)});if(a[0]&&n[a[0].uid]){a[0].rightNode="Recent";const l=a.find(c=>n[c.uid]==null);l&&(l.showDividerAbove=!0)}return a},[n]);return{updateRecency:o,injectRecency:i}}const CO=">",m3t="ActionPaletteUIComponent/1",g3t=H.forwardRef(({query:t,onSelect:e,getActivePaletteItem:n,dismissPalette:r},o)=>{const i=rE(),{dispatchSerialOperation:s}=Xs(),{injectRecency:a,updateRecency:l}=Dj(m3t),c=k.useMemo(()=>{const f=i.getRegisteredOperations().filter(h=>!h.hidden).map(h=>({uid:h.name,title:h.title||h.name,data:h,keywords:h.keywords,preventEditorFocusOnExecute:h.preventEditorFocusOnExecute})).filter(h=>Fk(h.title,t)?!0:h.keywords?Fk(h.keywords,t):!1);return a(f).slice(0,50)},[i,a,t]),u=k.useCallback((f,p)=>{const h=f(c),y=c.find(w=>w.uid===h);return y&&h&&(s({name:y.data.name}),l(h)),{shouldPreventFocus:!!(y!=null&&y.preventEditorFocusOnExecute)}},[s,l,c]);k.useImperativeHandle(o,()=>({onExecuteItem:u}),[u]);const d=n(c);return _.jsxs(_.Fragment,{children:[_.jsx(ef,{children:c.map(f=>_.jsx(Nc,{item:f,onClick:e,isActive:d===f},f.uid))}),_.jsxs(bi,{children:[_.jsx(Rt,{children:"use:"}),_.jsxs(Rt,{children:[_.jsx("kbd",{className:"font-normal",children:""})," Navigate"]}),_.jsxs(Rt,{children:[_.jsx("kbd",{className:"font-normal",children:"Enter"})," Execute"]})]})]})}),Mj={type:Hs.Operation,icon:_.jsx(gTt,{}),identifierPrefix:CO,placeholder:"Operations",parseRawQuery:t=>t.startsWith(CO)?t.slice(1):null,ReactComponent:g3t};function Fk(t,e){return e=e.toLocaleLowerCase().trim(),e=e.split(" ").filter(Boolean).join(" "),Array.isArray(t)?t.filter(Boolean).some(n=>Fk(n,e)):(t=t.toLocaleLowerCase().trim(),t=t.split(" ").filter(Boolean).join(" "),t.includes(e)||e.includes(t))}const TO="#",y3t=H.forwardRef(({query:t,onSelect:e,getActivePaletteItem:n},r)=>{const o=k.useMemo(()=>{const{primaryEditor:a}=J1();if(!a||a.destroyed)return[];const l=[];return a.view.state.doc.forEach((c,u)=>{c.type.name==="heading"&&l.push({offset:u,level:c.attrs.level,title:c.textContent})}),l.filter(c=>t.length===1&&parseInt(t)<=6&&parseInt(t)>0?c.level===parseInt(t):Lj(c.title+" "+c.level,t)).map((c,u)=>({uid:u+"heading",title:c.title,extraInfo:"#"+c.level,data:c}))},[t]),i=k.useCallback((a,l)=>{const{primaryEditor:c}=J1(),u=a(o),d=o.find(f=>f.uid===u);d&&tm(()=>{if(!c||c.destroyed)return;c.focusView();const{dispatch:f,state:p}=c.view,h=p.tr;f(h.setSelection(Oe.near(h.doc.resolve(d.data.offset))).scrollIntoView())})},[o]);k.useImperativeHandle(r,()=>({onExecuteItem:i}),[i]);const s=n(o);return _.jsxs(_.Fragment,{children:[_.jsx(ef,{children:o.map(a=>_.jsx(Nc,{item:a,onClick:e,isActive:s===a},a.uid))}),_.jsxs(bi,{children:[_.jsx(Rt,{children:"use:"}),_.jsxs(Rt,{children:[_.jsx("kbd",{className:"font-normal",children:""})," Navigate"]}),_.jsxs(Rt,{children:[_.jsx("kbd",{className:"font-normal",children:"Enter"})," Jump to a heading"]})]})]})});function Lj(t,e){return e=e.toLocaleLowerCase(),Array.isArray(t)?t.filter(Boolean).some(n=>Lj(n,e)):(t=t.toLocaleLowerCase(),t.includes(e)||e.includes(t))}const b3t={type:Hs.Heading,icon:_.jsx(RC,{}),identifierPrefix:TO,placeholder:"Jump to a heading.",parseRawQuery:t=>t.startsWith(TO)?t.slice(1):null,ReactComponent:y3t},AO="?",v3t=H.forwardRef(({query:t,updatePalette:e,onSelect:n,getActivePaletteItem:r,allPalettes:o},i)=>{const s=o.map(c=>({uid:c.type,rightNode:_.jsx("kbd",{children:c.identifierPrefix}),rightHoverNode:_.jsx("kbd",{children:c.identifierPrefix}),title:c.type.split("/").slice(1).join("/"),data:{type:c.type}})).filter(c=>Fj(c.title,t)),a=k.useCallback((c,u)=>{const d=c(s),f=s.find(p=>p.uid===d);f&&e(f.data.type)},[e,s]);k.useImperativeHandle(i,()=>({onExecuteItem:a}),[a]);const l=r(s);return _.jsxs(_.Fragment,{children:[_.jsx(ef,{children:s.map(c=>_.jsx(Nc,{item:c,isActive:l===c,onClick:n},c.uid))}),_.jsxs(bi,{children:[_.jsx(Rt,{children:"use:"}),_.jsxs(Rt,{children:[_.jsx("kbd",{className:"font-normal",children:""})," Navigate"]}),_.jsxs(Rt,{children:[_.jsx("kbd",{className:"font-normal",children:"Enter"})," Select a Palette"]})]})]})}),w3t={type:Hs.Question,icon:_.jsx(RC,{}),identifierPrefix:AO,placeholder:"Available palettes",parseRawQuery:t=>t.startsWith(AO)?t.slice(1):null,ReactComponent:v3t};function Fj(t,e){return e=e.toLocaleLowerCase(),Array.isArray(t)?t.filter(Boolean).some(n=>Fj(n,e)):(t=t.toLocaleLowerCase(),t.includes(e)||e.includes(t))}const NO="ws:",_3t="WorkspacePaletteUIComponent/1",x3t=H.forwardRef(({query:t,dismissPalette:e,onSelect:n,getActivePaletteItem:r},o)=>{const{injectRecency:i,updateRecency:s}=Dj(_3t),[a,l]=k.useState([]),{dispatchSerialOperation:c}=Xs();k.useEffect(()=>{awt().then(p=>{l(p)})},[]);const u=k.useMemo(()=>i(a.filter(h=>Bj(h.name,t)).map((h,y)=>({uid:h.name,title:h.name,extraInfo:h.type,data:{workspace:h},rightHoverNode:_.jsx(XB,{style:{height:16,width:16},onClick:async m=>{m.stopPropagation(),c({name:Y_,value:h.name}),e()}})}))),[t,e,c,a,i]),d=r(u),f=k.useCallback((p,h)=>{const y=p(u),m=u.find(w=>w.uid===y);if(m&&y!=null){const w=ss(m.data.workspace.name);w_t({wsName:w,type:h.metaKey?"newTab":"replace"}),s(y)}},[s,u]);return k.useImperativeHandle(o,()=>({onExecuteItem:f}),[f]),_.jsxs(_.Fragment,{children:[_.jsx(ef,{children:u.map(p=>_.jsx(Nc,{item:p,onClick:n,isActive:p===d},p.uid))}),_.jsxs(bi,{children:[_.jsx(Rt,{children:"use:"}),_.jsxs(Rt,{children:[_.jsx("kbd",{className:"font-normal",children:""})," Navigate"]}),_.jsxs(Rt,{children:[_.jsx("kbd",{className:"font-normal",children:"Enter"})," Open a workspace"]}),_.jsxs(Rt,{children:[_.jsxs("kbd",{className:"font-normal",children:[em("Mod"),"-Enter"]})," ","Open a in new tab"]})]})]})});function Bj(t,e){return e=e.toLocaleLowerCase().trim(),Array.isArray(t)?t.filter(Boolean).some(n=>Bj(n,e)):(t=t.toLocaleLowerCase().trim(),t.includes(e)||e.includes(t))}const jj={type:Hs.Workspace,icon:_.jsx(yTt,{}),identifierPrefix:NO,placeholder:"Select a workspace to open",parseRawQuery:t=>t.startsWith(NO)?t.slice(3):null,ReactComponent:x3t},Bk=[b3t,jj,w3t,Mj,Ij],k3t=Object.fromEntries(Bk.map(t=>[t.type,t]));function $3t(){const{paletteMetadata:t,paletteType:e,paletteInitialQuery:n}=Vd(),r=k.useRef(null),[o,i]=k.useState(n||""),s=k.useCallback((x=!0)=>{i(""),e_t(),x&&tm(()=>{x6()})},[]),a=k.useRef(null),l=k.useCallback((x,$)=>{var I;const S=(I=a.current)==null?void 0:I.onExecuteItem(x,$);return Promise.resolve(S).then(E=>{s(!(E!=null&&E.shouldPreventFocus))}),S},[s]),c=k.useCallback((x,$="")=>{var S;Pu(x,$),x&&((S=document.querySelector(".B-ui-components_universal-palette-container input"))==null||S.focus())},[]),{inputProps:u,updateCounter:d,resetCounter:f,counter:p,onSelect:h}=oj(s,l);k.useEffect(()=>{f()},[o,f]),k.useEffect(()=>{i(n||""),f()},[f,e,n]);const y=k.useCallback(x=>{const $=Bk.find(I=>I.parseRawQuery(x)!=null);if(f(),!$){s();return}const S=$.parseRawQuery(x);$.type!==e?c($.type,S||""):i(S||"")},[f,s,e,c,i]),m=e?k3t[e]:void 0,w=k.useCallback(x=>x[PC(p,x.length)],[p]);return m?_.jsxs(ij,{paletteType:e,widescreen:!1,onClickOutside:s,onClickInside:()=>{var x;(x=document.querySelector(".B-ui-components_universal-palette-container input"))==null||x.focus()},children:[_.jsx(sj,{leftNode:m.icon,placeholder:m.placeholder,inputValue:m.identifierPrefix+o,onInputValueChange:y,ref:r,...u}),_.jsx(m.ReactComponent,{ref:a,query:o,paletteType:e,paletteMetadata:t,updatePalette:c,dismissPalette:s,onSelect:h,counter:p,getActivePaletteItem:w,updateCounter:d,allPalettes:Bk})]}):null}const S3t=zn.create({name:LAt,application:{operations:[{name:QT,title:"Operation Palette",hidden:!0,keybinding:Q4?"Mod-o":"Mod-P"},{name:eA,title:"Switch Workspace",hidden:!0,keybinding:SS?"Ctrl-r":"Ctrl-h"},{name:tA,title:"Open a Note",hidden:!0,keybinding:"Mod-p"}],ReactComponent:$3t,operationHandler(){const t=e=>{const n=fm();return(n==null?void 0:n.paletteType)===e?void 0:e};return{handle(e){switch(e.name){case QT:return Pu(t(Mj.type)),!0;case eA:return Pu(t(jj.type)),!0;case tA:return Pu(t(Ij.type)),!0;default:return}}}}}}),E3t="@bangle.io/github-storage",Cb=cn.Github,jy="operation::@bangle.io/github-storage:update-github-token",jk="operation::@bangle.io/github-storage:sync-github-changes",RO="operation::@bangle.io/github-storage:OPERATION_DISCARD_LOCAL_CHANGES",zy="operation::@bangle.io/github-storage:show-conflict-dialog",PO="operation::@bangle.io/github-storage:OPERATION_OPTIMIZE_GITHUB_STORAGE",zk="dialog::@bangle.io/github-storage:discard-local-changes",zj="dialog::@bangle.io/github-storage:NEW_GITHUB_WORKSPACE_TOKEN_DIALOG",qy="dialog::@bangle.io/github-storage:NEW_GITHUB_WORKSPACE_REPO_PICKER_DIALOG",qk="dialog::@bangle.io/github-storage:UPDATE_GITHUB_TOKEN_DIALOG",Wk="dialog::@bangle.io/github-storage:conflict",C3t="@bangle.io/github-storage:sync-lock";async function Tb(t,e){let n=await Dee(C3t+":"+t);if(!n)return{lockAcquired:!1,result:void 0};try{return{lockAcquired:!0,result:await e()}}finally{await n()}}const qj=()=>e8?15*1e3:1e3*60;function Er(t,e,n){return bt({severity:e,title:t,uid:"sync notification-"+Math.random(),transient:e!==Be.ERROR,content:n})}function Wj({wsPath:t,children:e,className:n,onClick:r}){const o=k.useCallback(()=>{Hd(jt(t)),r==null||r()},[t,r]);return _.jsx("a",{className:n,onClick:o,children:e})}const Uj={githubWsName:void 0,conflictedWsPaths:[]},qt=Ic([],{name:"slice::github-storage:main",state:Uj}),Eh=qt.action(function(e){return qt.tx(n=>qt.update(n,e))}),T3t=qt.action(function(){return qt.tx(e=>qt.update(e,Uj))});async function BC(t,e,{concurrency:n=Number.POSITIVE_INFINITY,abortSignal:r}){return OO(r),new Promise((o,i)=>{if(typeof e!="function")throw new TypeError("Mapper function is required");if(!((Number.isSafeInteger(n)||n===Number.POSITIVE_INFINITY)&&n>=1))throw new TypeError(`Expected \`concurrency\` to be an integer from 1 and up or \`Infinity\`, got \`${n}\` (${typeof n})`);OO(r);const s=[],a=t[Symbol.iterator]();let l=!1,c=!1,u=0,d=0,f=!1;r.addEventListener("abort",h=>{f=!0,i(new DOMException("Aborted","AbortError"))},{once:!0});const p=()=>{if(l||f)return;const h=a.next(),y=d;if(d++,h.done){c=!0,u===0&&o(s);return}u++,(async()=>{try{const m=await h.value;s[y]=await e(m,y),u--,p()}catch(m){l=!0,i(m)}})()};for(let h=0;h<n&&(p(),!c);h++);})}function OO(t){if(t.aborted)throw new DOMException("AbortError","AbortError")}function Vj(t){return{...t,deleted:void 0,source:void 0}}function Hj(t){return{...t,deleted:void 0,source:{file:t.file,sha:t.sha}}}function Kj(t){var e;return t.sha!==((e=t.source)==null?void 0:e.sha)}function Gj(t){return t.source==null}function Zj(t){return typeof t.deleted=="number"}function Yj(t){return!(Gj(t)||Zj(t)||Kj(t))}const IO="REMOTE_SYNC_NOT_ALLOWED_ERROR",qs=Symbol.for("@ts-pattern/matcher"),A3t=Symbol.for("@ts-pattern/isVariadic"),Wy="@ts-pattern/anonymous-select-key",Uk=t=>!!(t&&typeof t=="object"),s1=t=>t&&!!t[qs],ji=(t,e,n)=>{if(s1(t)){const r=t[qs](),{matched:o,selections:i}=r.match(e);return o&&i&&Object.keys(i).forEach(s=>n(s,i[s])),o}if(Uk(t)){if(!Uk(e))return!1;if(Array.isArray(t)){if(!Array.isArray(e))return!1;let r=[],o=[],i=[];for(const s of t.keys()){const a=t[s];s1(a)&&a[A3t]?i.push(a):i.length?o.push(a):r.push(a)}if(i.length){if(i.length>1)throw new Error("Pattern error: Using `...P.array(...)` several times in a single pattern is not allowed.");if(e.length<r.length+o.length)return!1;const s=e.slice(0,r.length),a=o.length===0?[]:e.slice(-o.length),l=e.slice(r.length,o.length===0?1/0:-o.length);return r.every((c,u)=>ji(c,s[u],n))&&o.every((c,u)=>ji(c,a[u],n))&&(i.length===0||ji(i[0],l,n))}return t.length===e.length&&t.every((s,a)=>ji(s,e[a],n))}return Object.keys(t).every(r=>{const o=t[r];return(r in e||s1(i=o)&&i[qs]().matcherType==="optional")&&ji(o,e[r],n);var i})}return Object.is(e,t)},dl=t=>{var e,n,r;return Uk(t)?s1(t)?(e=(n=(r=t[qs]()).getSelectionKeys)==null?void 0:n.call(r))!=null?e:[]:Array.isArray(t)?Ch(t,dl):Ch(Object.values(t),dl):[]},Ch=(t,e)=>t.reduce((n,r)=>n.concat(e(r)),[]);function vi(t){return Object.assign(t,{optional:()=>N3t(t),and:e=>ln(t,e),or:e=>R3t(t,e),select:e=>e===void 0?DO(t):DO(e,t)})}function N3t(t){return vi({[qs]:()=>({match:e=>{let n={};const r=(o,i)=>{n[o]=i};return e===void 0?(dl(t).forEach(o=>r(o,void 0)),{matched:!0,selections:n}):{matched:ji(t,e,r),selections:n}},getSelectionKeys:()=>dl(t),matcherType:"optional"})})}function ln(...t){return vi({[qs]:()=>({match:e=>{let n={};const r=(o,i)=>{n[o]=i};return{matched:t.every(o=>ji(o,e,r)),selections:n}},getSelectionKeys:()=>Ch(t,dl),matcherType:"and"})})}function R3t(...t){return vi({[qs]:()=>({match:e=>{let n={};const r=(o,i)=>{n[o]=i};return Ch(t,dl).forEach(o=>r(o,void 0)),{matched:t.some(o=>ji(o,e,r)),selections:n}},getSelectionKeys:()=>Ch(t,dl),matcherType:"or"})})}function Mt(t){return{[qs]:()=>({match:e=>({matched:!!t(e)})})}}function DO(...t){const e=typeof t[0]=="string"?t[0]:void 0,n=t.length===2?t[1]:typeof t[0]=="string"?void 0:t[0];return vi({[qs]:()=>({match:r=>{let o={[e!=null?e:Wy]:r};return{matched:n===void 0||ji(n,r,(i,s)=>{o[i]=s}),selections:o}},getSelectionKeys:()=>[e!=null?e:Wy].concat(n===void 0?[]:dl(n))})})}function Oi(t){return typeof t=="number"}function Ol(t){return typeof t=="string"}function fa(t){return typeof t=="bigint"}vi(Mt(function(t){return!0}));const Il=t=>Object.assign(vi(t),{startsWith:e=>{return Il(ln(t,(n=e,Mt(r=>Ol(r)&&r.startsWith(n)))));var n},endsWith:e=>{return Il(ln(t,(n=e,Mt(r=>Ol(r)&&r.endsWith(n)))));var n},minLength:e=>Il(ln(t,(n=>Mt(r=>Ol(r)&&r.length>=n))(e))),maxLength:e=>Il(ln(t,(n=>Mt(r=>Ol(r)&&r.length<=n))(e))),includes:e=>{return Il(ln(t,(n=e,Mt(r=>Ol(r)&&r.includes(n)))));var n},regex:e=>{return Il(ln(t,(n=e,Mt(r=>Ol(r)&&!!r.match(n)))));var n}});Il(Mt(Ol));const Ii=t=>Object.assign(vi(t),{between:(e,n)=>Ii(ln(t,((r,o)=>Mt(i=>Oi(i)&&r<=i&&o>=i))(e,n))),lt:e=>Ii(ln(t,(n=>Mt(r=>Oi(r)&&r<n))(e))),gt:e=>Ii(ln(t,(n=>Mt(r=>Oi(r)&&r>n))(e))),lte:e=>Ii(ln(t,(n=>Mt(r=>Oi(r)&&r<=n))(e))),gte:e=>Ii(ln(t,(n=>Mt(r=>Oi(r)&&r>=n))(e))),int:()=>Ii(ln(t,Mt(e=>Oi(e)&&Number.isInteger(e)))),finite:()=>Ii(ln(t,Mt(e=>Oi(e)&&Number.isFinite(e)))),positive:()=>Ii(ln(t,Mt(e=>Oi(e)&&e>0))),negative:()=>Ii(ln(t,Mt(e=>Oi(e)&&e<0)))});Ii(Mt(Oi));const pa=t=>Object.assign(vi(t),{between:(e,n)=>pa(ln(t,((r,o)=>Mt(i=>fa(i)&&r<=i&&o>=i))(e,n))),lt:e=>pa(ln(t,(n=>Mt(r=>fa(r)&&r<n))(e))),gt:e=>pa(ln(t,(n=>Mt(r=>fa(r)&&r>n))(e))),lte:e=>pa(ln(t,(n=>Mt(r=>fa(r)&&r<=n))(e))),gte:e=>pa(ln(t,(n=>Mt(r=>fa(r)&&r>=n))(e))),positive:()=>pa(ln(t,Mt(e=>fa(e)&&e>0))),negative:()=>pa(ln(t,Mt(e=>fa(e)&&e<0)))});pa(Mt(fa));vi(Mt(function(t){return typeof t=="boolean"}));vi(Mt(function(t){return typeof t=="symbol"}));vi(Mt(function(t){return t==null}));const Vk={matched:!1,value:void 0};function P3t(t){return new Uy(t,Vk)}class Uy{constructor(e,n){this.input=void 0,this.state=void 0,this.input=e,this.state=n}with(...e){if(this.state.matched)return this;const n=e[e.length-1],r=[e[0]];let o;e.length===3&&typeof e[1]=="function"?(r.push(e[0]),o=e[1]):e.length>2&&r.push(...e.slice(1,e.length-1));let i=!1,s={};const a=(c,u)=>{i=!0,s[c]=u},l=!r.some(c=>ji(c,this.input,a))||o&&!o(this.input)?Vk:{matched:!0,value:n(i?Wy in s?s[Wy]:s:this.input,this.input)};return new Uy(this.input,l)}when(e,n){if(this.state.matched)return this;const r=!!e(this.input);return new Uy(this.input,r?{matched:!0,value:n(this.input,this.input)}:Vk)}otherwise(e){return this.state.matched?this.state.value:e(this.input)}exhaustive(){return this.run()}run(){if(this.state.matched)return this.state.value;let e;try{e=JSON.stringify(this.input)}catch(n){e=this.input}throw new Error(`Pattern matching error: no pattern matches value ${e}`)}returnType(){return this}}const Th={action:"noop",target:void 0},MO={action:"conflict",target:void 0};function O3t(t,e){return t&&e?t.sha===e.sha?si.Yes:si.No:si.Unknown}function I3t({fileEntry:t,ancestorFileEntry:e}){const n=O3t(t,e);return mj(n,{onYes:()=>si.No,onNo:()=>si.Yes,onUnknown:()=>si.Unknown})}function D3t({fileA:t,fileB:e,ancestor:n}){if(t&&e&&t.sha===e.sha&&t.deleted===void 0&&e.deleted===void 0)return n&&t.sha!==n.sha?{action:"set",target:"ancestor"}:Th;if(!t&&!e)return Th;if(!t&&e)return LO(e,"fileB","fileA");if(t&&!e)return LO(t,"fileA","fileB");if(t&&e)return M3t(t,e,n);throw new Error("impossible file-sync condition")}function M3t(t,e,n){if(!n)return MO;let r;(a=>{a.NoChange="NoChange",a.Modified="Modified",a.Deleted="Deleted"})(r||(r={}));const o=({fileEntry:a,ancestorFileEntry:l})=>{if(a.deleted)return"Deleted";const c=I3t({ancestorFileEntry:l,fileEntry:a});return mj(c,{onYes:()=>"Modified",onNo:()=>"NoChange",onUnknown:()=>{throw new Error("Invalid file state")}})},i=o({fileEntry:t,ancestorFileEntry:n}),s=o({fileEntry:e,ancestorFileEntry:n});return P3t([i,s]).with(["NoChange","NoChange"],()=>Th).with(["NoChange","Modified"],()=>({action:"set",target:"fileA"})).with(["NoChange","Deleted"],()=>({action:"delete",target:"fileA"})).with(["Modified","NoChange"],()=>({action:"set",target:"fileB"})).with(["Modified","Modified"],()=>MO).with(["Modified","Deleted"],()=>({action:"set",target:"fileB"})).with(["Deleted","NoChange"],()=>({action:"delete",target:"fileB"})).with(["Deleted","Modified"],()=>({action:"set",target:"fileA"})).with(["Deleted","Deleted"],()=>Th).exhaustive()}function LO(t,e,n){return t.deleted?Th:{action:"set",target:n}}const jC=E3t,L3t=2,Gi="LOCAL_ENTRIES_TABLE",zC="MISC_TABLE",F3t=[Gi,zC];function lc(){return $0(jC,L3t,{upgrade(t,e){switch(e){case 0:{for(const n of F3t)t.createObjectStore(n,{keyPath:"key"});break}case 1:{t.createObjectStore(zC,{keyPath:"key"});break}}}})}const Hk=YS(jC,zC,lc);function ca(){return YS(jC,Gi,lc)}async function Ah(){return await Hk.get("ghToken")}async function Jj(t){t?await Hk.put("ghToken",t):await Hk.delete("ghToken")}async function cc(t){const e=await t.arrayBuffer(),n=new Uint8Array(e),o=new TextEncoder().encode(`blob ${n.length}\0`),i=new Uint8Array(o.length+n.length);if(i.set(o),i.set(n,o.length),typeof globalThis!="undefined"&&globalThis.crypto&&globalThis.crypto.subtle){const s=await globalThis.crypto.subtle.digest("SHA-1",i);return Array.from(new Uint8Array(s)).map(a=>a.toString(16).padStart(2,"0")).join("")}else if(typeof require!="undefined"){const a=require("crypto").createHash("sha1");return a.update(i),a.digest("hex")}else throw new Error("Unsupported environment")}const B3t=nm(cc);async function j3t(t){if(typeof globalThis!="undefined"&&"Blob"in globalThis&&t instanceof Blob){const e=await t.arrayBuffer(),n=new Uint8Array(e);let r="";for(let o=0;o<n.length;o++)r+=String.fromCharCode(n[o]);return btoa(r)}else if(typeof Buffer!="undefined"){const e=await t.arrayBuffer();return Buffer.from(e).toString("base64")}else throw new Error("Unsupported environment: Unable to convert blob to base64 string")}function m_(t){return IDBKeyRange.bound(`${t}:`,`${t}:`)}class z3t{async createEntry(e){return await ca().putIfNotExists(e.uid,e)}async hasEntry(e){return!!await this.readEntry(e)}async listAllEntries(e){return(await(await lc()).getAll(Gi,m_(e))).map(o=>o.value)}async listAllKeys(e){if(e.endsWith(":"))throw new Error("file-entry-manager: wsName should not end with :");return(await lc()).getAllKeys(Gi,m_(e))}async listSoftDeletedKeys(e){if(e.endsWith(":"))throw new Error("ile-entry-manager: wsName should not end with :");const r=(await lc()).transaction(Gi,"readonly");let i=await r.objectStore(Gi).openCursor(m_(e)),s=[];for(;i;)i.value.value.deleted&&s.push(i.key),i=await i.continue();return await r.done,s}readEntry(e){return ca().get(e)}async removeEntry(e){await ca().delete(e)}async resetCurrentToSource(e){let n=!1;return await ca().updateIfExists(e,o=>o.source?{...o,file:o.source.file,sha:o.source.sha,deleted:void 0}:(n=!0,o))?!n:!1}async softDeleteEntry(e){return ca().updateIfExists(e,n=>({...n,deleted:Date.now()}),{durability:"strict"})}async updateSource(e,n,r){const o=r||await cc(n);return ca().updateIfExists(e,i=>({...i,source:{...i.source,file:n,sha:o}}))}async updateSourceAndCurrent(e,n,r){const o=r||await cc(n);return ca().updateIfExists(e,i=>({...i,file:n,sha:o,deleted:void 0,source:{...i.source,file:n,sha:o}}),{durability:"strict"})}async writeFile(e,n,r){const o=r||await cc(n);return ca().updateIfExists(e,i=>({...i,file:n,sha:o}))}}const Dn=new z3t,Gf="INVALID_GITHUB_TOKEN",Nh="GITHUB_API_ERROR",xp="GITHUB_STORAGE_NOT_ALLOWED",Uu="INVALID_GITHUB_RESPONSE",q3t="INVALID_GITHUB_FILE_FORMAT",W3t=async({token:t,query:e,variables:n,abortSignal:r})=>fetch("https://api.github.com/graphql",{signal:r,method:"POST",headers:{"Content-Type":"application/json",Authorization:`bearer ${t}`},body:JSON.stringify({query:e,variables:n})}),Xj=async({path:t,token:e,headers:n,abortSignal:r,method:o,body:i})=>{const s=t.includes("https://")?t:`https://api.github.com${t}`;return fetch(s,{method:o,signal:r,headers:{Authorization:`token ${e}`,...n||{}},body:i})},qC=["repo","public_repo"],U3t=t=>{if(t.includes(":"))return console.debug("@bangle.io/github-storage: Found path with invalid char ':'",t),!1;if(t.includes("//"))return console.debug("@bangle.io/github-storage: Found path with invalid char '//'",t),!1;if(t.length>150)return console.debug("@bangle.io/github-storage: Found path larger than the limit'",t),!1;const e=_ee(t.split("/"));return e===void 0?(console.debug("@bangle.io/github-storage: Filename not found",t),!1):e.startsWith(".")?(console.debug('@bangle.io/github-storage: Filename starts with "."',t),!1):!0},V3t=`
rateLimit {
  limit
  cost
  remaining
  resetAt
}`;async function Nm({path:t,token:e,abortSignal:n,headers:r,isBlob:o}){const i=await Xj({path:t,token:e,abortSignal:n,headers:r,method:"GET"});return i.ok?(console.debug("Github API limit left",i.headers.get("X-RateLimit-Remaining")),{data:await(o?i.blob():i.json()),headers:i.headers}):i.json().then(a=>{throw new lt({message:a.message,code:Nh})})}async function Qj({query:t,variables:e,token:n}){const r=await W3t({query:t,variables:e,token:n}),o=await r.json();if(!r.ok)throw new lt({message:o.message||"Github responded with an invalid status code",code:Nh});if(o.errors&&o.errors.length>0){console.debug("Github Graphql API error",o.errors[0]);const i=o.errors[0];throw new lt({message:i.message,code:Nh})}return console.debug("Github graphql API limit left",r.headers.get("X-RateLimit-Remaining")),o.data}async function ez({abortSignal:t,token:e}){let r=(await H3t({token:e,abortSignal:t})||"").split(",").map(o=>o.trim());return qC.some(o=>r.includes(o))}async function H3t({abortSignal:t,token:e}){const{headers:n}=await Nm({path:`?cacheBust=${Date.now()}`,token:e,abortSignal:t});return n.get("X-OAuth-Scopes")}async function*K3t({token:t}){var s;const e=`
    query ($after: String) {
      ${V3t}
      viewer {
        repositories(first: 50, after: $after) {
          pageInfo {
            endCursor
            hasNextPage
          }
          edges {
            node {
              name
              defaultBranchRef {
                name
                target {
                  oid
                }
              }
              nameWithOwner
              description
            }
          }
        }
      }
    }`;let n,r,o=0,i=[];do{let a=await Qj({query:e,variables:{after:r},token:t});if(o++>20)break;if(!Array.isArray((s=a.viewer.repositories)==null?void 0:s.edges)){yield i;break}({hasNextPage:n,endCursor:r}=a.viewer.repositories.pageInfo),i=i.concat(a.viewer.repositories.edges.map(l=>{var c,u,d,f,p,h;return{name:(c=l.node)==null?void 0:c.name,owner:(d=(u=l.node)==null?void 0:u.nameWithOwner)==null?void 0:d.split("/")[0],branch:(p=(f=l.node)==null?void 0:f.defaultBranchRef)==null?void 0:p.name,description:((h=l.node)==null?void 0:h.description)||""}}).filter(l=>l.name&&l.owner&&l.branch)),yield i}while(n)}function tz(){let t,e=GZ();const n=async o=>{const{config:i,abortSignal:s}=o;let a;if(t&&(a=await oz({config:i,abortSignal:s,cacheBustValue:Date.now()}),a===t.sha))return console.debug("github-storage:getRepoTree reusing tree from previous call",a),t;const l=await G3t({...o,commitSha:a});return t=l,l};return o=>e.add(()=>n(o))}const Ab=tz();async function G3t({abortSignal:t,wsName:e,config:n,commitSha:r}){const o=async(c=0,u)=>{if(c>3)throw new lt({message:u||`Could not get tree for ${e}`,code:Uu});try{let d=`/repos/${n.owner}/${n.repoName}/git/trees/${r||n.branch}?recursive=1&cacheBust=${Date.now()}`;return(await Nm({path:d,token:n.githubToken,abortSignal:t})).data}catch(d){if(d instanceof Error||d instanceof lt){if(d.message.includes("Git Repository is empty.")){let f=d.message;return iz({config:n}).then(p=>o(c+1,f))}if(d.message==="Not Found")return oz({config:n,abortSignal:t}).then(f=>({truncated:!1,tree:[],sha:f}))}throw d}},{truncated:i,tree:s,sha:a}=await o(0);if(i||!s)throw new lt({message:"Github response is truncated",code:Uu});const l=s.filter(c=>c&&c.type==="blob"&&U3t(c.path)).map(c=>{const u=OS(e+"/"+c.path);if(!u)throw new lt({message:"File path contains invalid characters :"+c.path,code:Uu});return[u,{url:c.url,wsPath:u,sha:c.sha}]});return{sha:a,tree:new Map(l)}}async function Z3t({headSha:t,commitMessage:e,additions:n,deletions:r,config:o,abortSignal:i}){var d,f;let s=`
    mutation ($input: CreateCommitOnBranchInput!) {
      createCommitOnBranch(input: $input) {
        commit {
          url
          oid
        }
      }
    }
  `;const a=()=>Qj({query:s,variables:{input:{expectedHeadOid:t,branch:{branchName:o.branch,repositoryNameWithOwner:`${o.owner}/${o.repoName}`},message:e,fileChanges:{additions:n.map(p=>({path:p.path,contents:p.base64Content})),deletions:r}}},token:o.githubToken}),c=(f=(d=(await a().catch(p=>{if(p instanceof lt&&(p.message.includes(`but expected ${t}`)||p.message.includes(`to point to "${t}" but it did not`)))return console.debug("github-storage:pushChanges retrying after error",p.message),Xh(2e3).then(()=>a());throw p})).createCommitOnBranch)==null?void 0:d.commit)==null?void 0:f.oid,{data:u}=await Nm({path:`/repos/${o.owner}/${o.repoName}/commits/${c}`,token:o.githubToken,abortSignal:i});u.files.forEach(p=>{const h=p.blob_url.split("/"),y=h[h.indexOf("blob")+1];if(typeof y!="string"||y.length!==40)throw new lt({message:"Invalid github blob returned",code:Uu})})}async function nz({wsPath:t,tree:e,config:n,abortSignal:r}){const o=e.tree.get(t);if(!o)return;const{fileName:i}=ft(t,!0);return rz({config:n,abortSignal:r,fileBlobUrl:o.url,fileName:i})}async function rz({fileBlobUrl:t,config:e,fileName:n,abortSignal:r}){return Nm({isBlob:!0,path:t,token:e.githubToken,abortSignal:r,headers:{Accept:"application/vnd.github.v3.raw+json"}}).then(o=>new File([o.data],n))}async function oz({config:t,abortSignal:e,cacheBustValue:n=Date.now()}){let r=`/repos/${t.owner}/${t.repoName}/commits/${t.branch}?cacheBust=${n}`;const o=async()=>(await Nm({path:r,token:t.githubToken,abortSignal:e,headers:{Accept:"application/vnd.github.v3.raw+json"}})).data;let i;try{i=await o()}catch(a){if(a instanceof Error&&a.message.includes("Git Repository is empty."))await iz({config:t}),i=await o();else throw a}const s=i==null?void 0:i.sha;if(typeof s!="string")throw new lt({message:"Invalid github response for getLatestCommitSha"});return s}async function iz({config:t}){const e=`## Welcome to Bangle.io
 This is a sample note to get things started.`,n="welcome-to-bangle.md",r=await Xj({path:`https://api.github.com/repos/${t.owner}/${t.repoName}/contents/`+n,method:"PUT",token:t.githubToken,headers:{Accept:"application/vnd.github.v3.raw+json"},body:JSON.stringify({message:"Bangle.io first commit",content:btoa(e),branch:t.branch})});if(!r.ok){const o=await r.json().then(i=>i.message);if(o==="reference already exists"||o.includes(`"sha" wasn't supplied`)||o==="Not Found")return;throw new lt({message:o,code:Nh})}}async function Y3t({additions:t,deletions:e,abortSignal:n,sha:r,config:o}){if(t.length===0&&e.length===0)return;const{commitBody:i,commitHeadline:s}=J3t(t,e);await Z3t({abortSignal:n,headSha:r,commitMessage:{headline:s,body:i},additions:await Promise.all(t.map(async({wsPath:a,file:l})=>({base64Content:await j3t(l),path:ft(a,!0).filePath}))),deletions:e.map(a=>{const{filePath:l}=ft(a,!0);return{path:l}}),config:o})}function J3t(t,e){const r=`Commit auto generated by ${typeof window=="undefined"?"https:://bangle.io":window.location.host} | ${S0}`;let o="Bangle.io : ",i=t[0]&&ft(t[0].wsPath).fileName,s=t[1]&&ft(t[1].wsPath).fileName,a=e[0]&&ft(e[0]).fileName;return i&&(o+=`Update ${i}`,s&&t.length===2?o+=` and ${s}`:t.length>2&&(o+=` and ${t.length-1} more`),o+=";"),a&&(o.endsWith(";")&&(o+=" "),o+=`Delete ${a}`,e.length>1&&(o+=` and ${e.length-1} more`),o+=";"),{commitBody:r,commitHeadline:o}}async function sz(t,e,n){return(await BC(t,async o=>{const i=await rz({fileBlobUrl:o.remoteUrl,config:e,abortSignal:n,fileName:ft(o.wsPath,!0).fileName});if(i)return{...o,remoteFile:i}},{concurrency:5,abortSignal:n})).filter(o=>o!==void 0)}async function X3t(t){const e=await m6(t);if(!(!e||e.type!==Cb))return e.metadata}function Q3t(t){const e=K1(t)||"";let n=t.slice(0,-1*e.length);/-conflict-\d+$/.test(n)&&(n=n.slice(0,-1*n.slice(n.lastIndexOf("-conflict-")).length));const r=Date.now();return n+`-conflict-${r}`+e}async function eNt({wsName:t,config:e,abortSignal:n}){const r=await Ab({wsName:t,config:e});Ys(n);const o=await Dn.listAllEntries(t),{remoteOps:i,conflicts:s,localOps:a}=az(o,r);if(s.length>0)return{status:"merge-conflict",conflict:s,count:s.length};const l=await sz(a.update,e,n);await Y3t({additions:i.update,deletions:i.delete,abortSignal:n,sha:r.sha,config:e});const c={...a,update:l};return await tNt({localOps:c,remoteOps:i,abortSignal:n,config:e}),console.debug("Successfully synced with github"),{status:"success",count:a.delete.length+a.update.length+i.delete.length+i.update.length}}async function tNt({localOps:t,remoteOps:e,abortSignal:n,config:r}){Ys(n);const i=(await lc()).transaction(Gi,"readwrite",{durability:"strict"}),s=i.objectStore(Gi);let a=[],l=[];const c=async(u,d)=>{for(const f of u){const{wsPath:p}=f,h=await s.get(p);if(h){const y=ks(p,d(f,h.value));a.push(s.put(y))}else l.push(p)}};await c(e.update,(u,d)=>({...d,source:{...d.source,file:u.file,sha:u.sha}})),await c(t.sourceUpdate,(u,d)=>{var f;return((f=d.source)==null?void 0:f.sha)===u.expectedLocalSourceSha?{...d,source:{...d.source,file:d.file,sha:d.sha}}:(console.warn(`Skipping source update for ${u.wsPath} because source sha does not match with the one provided at sync.`),l.push(u.wsPath),d)}),await c(t.update,(u,d)=>d.sha!==u.expectedLocalSha?(console.warn(`Local file "${d.uid}" has been modified since sync started. Skipping update`),d):{...d,deleted:void 0,file:u.remoteFile,sha:u.remoteSha,source:{...d.source,file:u.remoteFile,sha:u.remoteSha}});for(const u of[...e.delete,...t.delete])a.push(s.delete(u));return await Promise.all(a),await i.done,{skipped:l}}function az(t,e){var l;const n=[],r={update:[],delete:[]},o={delete:[],update:[],sourceUpdate:[]},i="fileB",s="fileA",a="ancestor";for(const c of t){const u=c.uid,d=e.tree.get(u),f={deleted:c.deleted,sha:c.sha,uid:u},p=c.source?{deleted:void 0,sha:c.source.sha,uid:u}:void 0;let h;d?h={deleted:void 0,sha:d.sha,uid:u}:!d&&p&&(h={deleted:Date.now(),sha:p.sha,uid:u});const y=D3t({fileA:f,fileB:h,ancestor:p}),m=y.action;if(m!=="noop"){if(m==="conflict"){n.push(u);continue}else if(m==="delete")switch(y.target){case i:{r.delete.push(u);continue}case s:{o.delete.push(u);continue}default:throw new Error("Unknown target")}else if(m==="set")switch(y.target){case i:{r.update.push({wsPath:u,file:c.file,sha:c.sha});continue}case s:{if(!d)throw new Error("Remote cannot be undefined");o.update.push({wsPath:u,expectedLocalSha:c.sha,remoteUrl:d.url,remoteSha:d.sha});continue}case a:{o.sourceUpdate.push({wsPath:u,expectedLocalSourceSha:(l=c.source)==null?void 0:l.sha});continue}default:throw new Error("Unknown target")}throw new Error(`Unknown sync action: ${m}`)}}return t.filter(c=>c.deleted&&!e.tree.has(c.uid)).forEach(c=>{o.delete.push(c.uid)}),{conflicts:n,remoteOps:r,localOps:o}}async function nNt(t){var n;const e=await Dn.readEntry(t);return(n=e==null?void 0:e.source)!=null&&n.file?(console.debug("resetting file entry to source",e.uid),Dn.resetCurrentToSource(t)):(console.debug("discardLocalChanges:removing file entry",t),await Dn.removeEntry(t),!0)}async function rNt({config:t,wsPath:e,abortSignal:n}){const r=await Dn.readEntry(e);if(!r){console.debug("No existing entry found for",e);return}const o=await Ab({wsName:ft(e).wsName,config:t,abortSignal:n}),i=await nz({wsPath:e,config:t,tree:o});if(!i){console.warn("No remote file found for",e);return}const s=Q3t(e);return await Dn.createEntry(Vj({uid:s,file:r.file,sha:await cc(r.file)})),await Dn.updateSourceAndCurrent(e,i),{localContentWsPath:s,remoteContentWsPath:e}}async function oNt({wsName:t,config:e}){const[n,r]=await Promise.all([Ab({wsName:t,config:e}),Dn.listAllEntries(t)]);return az(r,n).conflicts.map(i=>jt(i))}async function iNt({wsName:t,config:e,retainedWsPaths:n,abortSignal:r,tree:o,pruneUnused:i}){const s=await Dn.listAllEntries(t),a=new Set(s.map(p=>p.uid)),l=await sz(Array.from(n).map(p=>{if(a.has(p))return;const h=o.tree.get(p);if(h)return{wsPath:p,remoteUrl:h.url,remoteSha:h.sha}}).filter(p=>p!==void 0),e,r);Ys(r);const u=(await lc()).transaction(Gi,"readwrite"),d=u.objectStore(Gi);let f=[];for(const p of l)await d.get(p.wsPath)||(console.debug("github-storage:optimizeDatabase:adding entry",p.wsPath),f.push(d.put(ks(p.wsPath,Hj({uid:p.wsPath,file:p.remoteFile,sha:p.remoteSha})))));if(i)for(const p of s)Yj(p)&&!n.has(p.uid)&&(console.debug("github-storage:optimizeDatabase:purging entry",p.uid),f.push(d.delete(p.uid)));return await Promise.all(f),await u.done,!0}const Nb=async t=>{const e=await X3t(ss(t)),n=await Ah();return!e||!n?void 0:{...e,repoName:t,githubToken:n}},lz=v$(()=>!1),cz=pl({deferred:!1})((t,e=!1)=>{async function n(o,i){const{githubWsName:s}=qt.get(o.state);if(!s)return Er("Not a Github workspace",Be.WARNING),!1;const a=await Nb(s);if(!a)return!1;const l=lz(o);if(l.current)return i&&Er("Github sync already in progress",Be.INFO),!1;try{const{lockAcquired:c,result:u}=await Tb(s,async()=>(l.current=!0,await r(o,a)));return c?(u!==!1&&u.status==="merge-conflict"&&i&&bt({severity:Be.ERROR,title:"Github sync failed",uid:"sync notification-"+Math.random(),content:"Syncing failed due to merge conflicts. Please resolve the issues and try again.",transient:!1,buttons:[{operation:zy,title:"Resolve Conflicts",dismissOnClick:!0}]}),u):(i&&Er("Github sync already in progress",Be.INFO),console.warn("Github sync: lock not acquired"),!1)}catch(c){return Mc(c)||(console.error(c),Er("Github sync failed",Be.ERROR,c instanceof Error?c.message:"Unknown error")),!1}finally{l.current=!1}}async function r(o,i){const{wsName:s}=Qn(),{githubWsName:a}=qt.get(o.state);return s!==a||!a||t.aborted?!1:eNt({wsName:a,config:i,abortSignal:t})}return async o=>{const i=await n(o,e);if(i===!1)console.debug("gh-sync returned false");else{iE();const{count:s}=i;if(i.status==="merge-conflict"){o.dispatch(Eh({conflictedWsPaths:i.conflict.map(a=>jt(a))}));return}typeof s=="number"&&(s===0&&e&&Er("Github sync completed",Be.INFO),s>0&&Er("Github sync completed",Be.INFO,`Synced ${s} file${s===1?"":"s"}`))}}}),sNt=pl({deferred:!1})(function(e,n){return async r=>{if(lz(r).current){Er("Cannot discard local changes",Be.INFO,"A sync is already in progress, please wait for it to finish.");return}const{githubWsName:i}=qt.get(r.state);if(i!==e){Er("Cannot discard local changes",Be.INFO,"This is not a Github workspace");return}const{lockAcquired:s,result:a}=await Tb(e,async()=>{const l=await Dn.listAllEntries(e);return(await BC(l.filter(u=>Kj(u)||Gj(u)||Zj(u)),async u=>nNt(u.uid),{concurrency:10,abortSignal:new AbortController().signal})).every(u=>u)});if(!s){Er("Cannot discard local changes",Be.INFO,"A sync is already in progress, please wait for it to finish.");return}if(!a){Er("Failed to discard local changes",Be.INFO,"Failed to discard local changes. Please try again.");return}Er("Successfully discarded local changes",Be.SUCCESS),n&&window.location.reload()}}),aNt=pl({deferred:!1})(function(e,n){return async r=>{const{githubWsName:o}=qt.get(r.state);if(o!==e){Er("Cannot update Github token",Be.INFO,"This is not a Github workspace");return}await Jj(n)}}),lNt=pl({deferred:!1})(function(e){return async n=>{const r=await Nb(e);if(!r)return;const{conflictedWsPaths:o}=qt.get(n.state);try{const{lockAcquired:i,result:s}=await Tb(e,async()=>{let a=[];for(const l of o)a.push(await rNt({config:r,wsPath:l,abortSignal:new AbortController().signal}));return a});if(!i||s.some(a=>a==null)){i||console.warn("cannot manually resolve conflict, lock not acquired"),Er("Unable to resolve conflict",Be.ERROR,"Please close any other Bangle tab and try again.");return}else if(s){n.dispatch(Eh({conflictedWsPaths:[]})),iE(),Er("Manual Conflict Resolution",Be.SUCCESS,"Successfully created copies of the the conflicted files. Please resolve the conflicts manually and then sync again.");const a=s.find(l=>!!l);a&&Vl(l=>l.updatePrimaryWsPath(a.remoteContentWsPath).updateSecondaryWsPath(a.localContentWsPath));return}return}catch(i){console.error(i),Er("Unable to resolve conflict",Be.ERROR,"Something went wrong, please reload and try again.");return}}}),uz=pl({deferred:!1})(function(){return async e=>{const{githubWsName:n}=qt.get(e.state);if(!n)return;const r=await Nb(n);if(!r)return;const o=await oNt({wsName:n,config:r}),{wsName:i}=Qn();if(i!==n)return;const{conflictedWsPaths:s}=qt.get(e.state);if(o.length>0){e.dispatch(Eh({conflictedWsPaths:o}));return}if(s.length>0&&o.length===0){e.dispatch(Eh({conflictedWsPaths:[]}));return}}}),WC=pl({deferred:!1})(function(e,n){const r=async o=>{const{githubWsName:i}=qt.get(o.state);if(!i)return;const s=await Nb(i);if(!s)return;const a=await Ab({wsName:i,config:s,abortSignal:n}),{lockAcquired:l,result:c}=await Tb(i,async()=>{const{openedWsPaths:u,wsName:d,recentWsPaths:f}=Qn();if(d!==i||n.aborted)return!1;const p=new Set([...u.toArray(),...f||[]].filter(h=>typeof h=="string"));return iNt({tree:a,abortSignal:n,config:s,retainedWsPaths:p,wsName:i,pruneUnused:e})});if(!l||!c){!l&&console.debug("cannot cleanup ws paths, lock not acquired");return}};return async o=>r(o).finally(()=>{o.dispatch(cz(n))})}),cNt=v$(()=>new Map),uNt=Ko(async t=>{const e=oE(t);if(!e)return;let n=!1;Lh(t,()=>{n=!0});const r=await m6(e);if(n)return;const o=(r==null?void 0:r.type)===Cb,i=Qn().wsName,{githubWsName:s}=qt.get(t.state);if(i===e&&e!==s){if(!o&&s!==void 0){t.dispatch(T3t());return}if(o&&s===void 0){t.dispatch(Eh({githubWsName:e}));return}}},{name:"githubWorkspaceEffect"}),dNt=Ko(t=>{const{githubWsName:e}=qt.track(t);if(N6(t),!e)return;const n=new AbortController;Lh(t,()=>{n.abort()}),t.dispatch(WC(!1,n.signal))},{name:"githubSyncEffect"}),fNt=Ko(t=>{let e=new AbortController;const n=setInterval(()=>{e.abort(),e=new AbortController;const{githubWsName:r}=qt.get(t.state),{isInactivePage:o}=Qn();!r||o||t.dispatch(WC(!0,e.signal))},qj());Lh(t,()=>{e.abort(),clearInterval(n)})},{name:"githubPeriodSyncEffect"}),pNt=Ko(async t=>{const e=setInterval(()=>{const{githubWsName:n}=qt.get(t.state);if(n&&!Qn().isInactivePage){t.dispatch(uz());return}},qj());Lh(t,()=>{clearInterval(e)})},{name:"githubConflictIntervalEffect"}),hNt=Ko(t=>{N6(t);const{githubWsName:e}=qt.track(t);e&&t.dispatch(uz())},{name:"githubConflictEffect"}),mNt=Ko(t=>{const e=cNt(t),{githubWsName:n,conflictedWsPaths:r}=qt.track(t);if(n){for(const o of r){const i=o8();s_t({uid:i,description:`There is a conflict with ${o} on Github. Please resolve the conflict on Github and then click on the sync button to resolve the conflict.`,title:"Encountered Conflict",severity:Be.WARNING,wsPath:o,serialOperation:zy}),e.current.set(o,i)}for(const[o,i]of e.current)r.includes(o)||(a_t(i),e.current.delete(o))}},{name:"githubSetConflictNotification"}),gNt=[uNt,dNt,fNt,pNt,hNt,mNt];function yNt(){const t=k.useCallback(()=>{hi(Wk)},[]),{conflictedWsPaths:e,githubWsName:n}=Vs(qt),r=w$();return k.useEffect(()=>{e.length===0&&(t(),bt({title:"No Github conflicts",severity:Be.INFO,uid:"gh-conflict"+Date.now(),transient:!0}))},[e,t]),_.jsxs(Ar,{isDismissable:!0,headingTitle:"Github Conflict",onDismiss:t,primaryButtonConfig:{text:"Resolve Manually",onPress:()=>{n&&r(lNt(n)),t()}},allowScroll:!0,children:[_.jsx("p",{className:"text-sm",children:"Bangle was unable to sync the following files because of your local files and remote files have conflicting changes. This can happen if a file is modified at multiple places at simultaneously."}),_.jsx("ul",{className:"list-disc list-inside py-3 pl-2 text-sm",children:e.map(o=>_.jsx("li",{children:_.jsx(Wj,{className:"cursor-pointer hover:underline",wsPath:o,onClick:t,children:o})},o))}),_.jsx("p",{className:"text-sm",children:"You can resolve this issue by doing:"}),_.jsxs("ol",{className:"list-decimal list-inside py-2 pl-2 text-sm",children:[_.jsxs("li",{className:"mb-2",children:["Clicking resolve will create a new file with the same name but ending with ",_.jsx("code",{children:"-conflict"})," for each of the conflicting files and the original file will be reset to match contents of the remote file."]}),_.jsxs("li",{className:"mb-2",children:["The ",_.jsx("code",{children:"-conflict"})," file will act as a reference to your local change, so that you do not loose any data."]}),_.jsx("li",{className:"mb-2",children:"You can compare this file with the original file and make any necessary change to resolve the conflict."}),_.jsxs("li",{className:"mb-2",children:["Once you have made changes to the original file, delete the",_.jsx("code",{children:"-conflict"})," files and sync again."]})]})]})}function bNt(){const[t,e]=k.useState(!1),[n,r]=k.useState(!1),{githubWsName:o}=Vs(qt),i=w$(),s=k.useCallback(()=>{t||hi(zk)},[t]);return n?_.jsx(Ar,{isDismissable:!1,headingTitle:"Confirm discarding of local changes",onDismiss:()=>{},children:"Please reload the application manually."}):o?_.jsxs(Ar,{isDismissable:!0,headingTitle:"Confirm discarding of local changes",isLoading:t,primaryButtonConfig:{isDestructive:!0,text:"Discard",onPress:async()=>{t||o&&(e(!0),i(sNt(o,!0)),s())}},onDismiss:()=>{s()},children:["Are you sure you want to discard all your local changes? This action cannot be undone and may result in a ",_.jsx("b",{children:"loss of any unsaved changes"}),"."]}):_.jsx(Ar,{isDismissable:!0,onDismiss:()=>{s()},headingTitle:"Not a Github workspace",children:"This action can only occur in a workspace that is stored in Github. Please open one and try again."})}const vNt=3e3;function wNt(){const{openedWsPaths:t}=Xr(),{githubWsName:e}=Vs(qt);return e?_.jsx(_Nt,{wsName:e,openedWsPaths:t}):_.jsx("div",{className:"pl-3",children:"Please open a Github workspace"})}function _Nt({wsName:t,openedWsPaths:e}){const[n,r]=k.useState(void 0),[o,i]=k.useState(0),{conflictedWsPaths:s}=Vs(qt),{dispatchSerialOperation:a}=Xs();return k.useEffect(()=>{let l=!1;return Dn.listAllEntries(t).then(c=>{if(!l){const u=c.filter(d=>!Yj(d));r(d=>{const f=u.map(h=>h.uid),p=(d==null?void 0:d.map(h=>h.uid))||[];return kee(f,p)?d:u})}}),()=>{l=!0}},[o,t]),k.useEffect(()=>{},[n]),Pee(()=>{i(l=>l+1)},[],vNt),!n||n.length===0?_.jsx("div",{className:"px-3 text-lg",children:"Everything is synced !"}):_.jsxs("div",{children:[_.jsx("div",{className:"px-4 my-4",children:_.jsx(vd,{className:"w-full",onPress:()=>{bt({title:"Starting sync",severity:Be.INFO,uid:"starting-sync"+Date.now(),transient:!0}),a({name:jk})},ariaLabel:"Press sync to push any local changes and pull any new remote changes",tooltipPlacement:"bottom",text:"Sync"})}),_.jsx("div",{className:"px-3 text-sm",children:"Files that need to be synced"}),_.jsx("div",{className:"",children:n.map(l=>{const c=mi(l.uid)?jt(l.uid):void 0;return _.jsx(_d,{isActive:e.primaryWsPath===c,className:"rounded text-sm truncate py-1 select-none pl-3",extraInfoClassName:"ml-1 text-sm",onClick:()=>{c&&!l.deleted&&Hd(jt(c))},item:{uid:c||l.uid,isDisabled:!!(!c||l.deleted),showDividerAbove:!1,title:`${l.deleted?"(deleted) ":""}${c&&s.includes(c)?"(conflict) ":""}${c?tn(c).filePath:""}`}},c)})})]})}const xNt=200;function kNt(){const[t,e]=k.useState(void 0),[n,r]=k.useState(!1),[o,i]=k.useState(void 0),s=N0(n,{wait:100});k.useEffect(()=>{Ah().then(l=>{l&&e(l)})},[]);const a=k.useCallback(async()=>{if(t)try{if(r(!0),i(void 0),!await ez({token:t}))throw new Error(`Bangle.io requires the one of the following scopes: ${qC.join(", ")}`);await Jj(t),oo({dialogName:qy,metadata:{githubToken:t}})}catch(l){l instanceof Error&&i(l)}finally{r(!1)}},[t]);return k.useCallback(l=>{l.key==="Enter"&&a()},[a]),_.jsx(Ar,{isDismissable:!0,headingTitle:"",dismissText:"",isLoading:s,primaryButtonConfig:{text:"",disabled:!t||t.length===0,onPress:a},onDismiss:()=>{hi(zj)},headingIcon:"",footer:"",children:_.jsxs("div",{style:{minHeight:xNt},children:["   ,   Flent        .    .     ,   .",_.jsx("div",{className:"my-4"})]})})}const $Nt=200;function SNt(){const{dialogMetadata:t}=Vd(),[e,n]=k.useState(!1),r=N0(e,{wait:100}),[o,i]=k.useState(void 0),[s,a]=k.useState([]),[l,c]=k.useState(),u=k.useCallback(()=>{hi(qy)},[]),d=typeof(t==null?void 0:t.githubToken)=="string"?t.githubToken:void 0,f=k.useCallback(async()=>{var h;if(l)try{n(!0);const y={owner:l.owner,branch:l.branch};await X0(ss(l.name),Cb,y),(h=window.fathom)==null||h.trackGoal("JSUCQKTL",0),u()}catch(y){y instanceof Error&&(i(y),n(!1))}},[u,l]);k.useEffect(()=>{d||hi(qy)},[d]),k.useEffect(()=>{let h=!1;return(async()=>{if(d)try{n(!0);let y=K3t({token:d});for await(const m of y)h||a(m)}catch(y){y instanceof Error&&i(y)}finally{n(!1)}})(),()=>{h=!0}},[d]);const p=k.useMemo(()=>Array.from(Object.entries(s.reduce((h,y)=>{let m=h[y.owner]||[];return h[y.owner]=m,m.push(y),h},{}))),[s]);return d?_.jsx(Ar,{isDismissable:!0,headingTitle:"Github workspace",dismissText:"Cancel",isLoading:r,primaryButtonConfig:{text:"Open",disabled:!l,onPress:f},onDismiss:u,headingIcon:_.jsx(tj,{className:"w-8 h-8"}),footer:_.jsx($m,{text:"How to create a personal access Github token?",href:"https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token"}),children:_.jsxs("div",{style:{minHeight:$Nt},children:[o&&_.jsx(nj,{title:"Error",content:o.message}),"Please pick a repository that will be used to store your notes.",_.jsx("div",{className:"my-4",children:_.jsx(hTt,{label:"Select repository",menuTrigger:"focus",onKeyUp:h=>{h.key==="Enter"&&f()},onSelectionChange:h=>{if(typeof h=="string"){const[y,m]=h.split("/");c(s.find(w=>w.owner===y&&w.name===m))}else c(void 0)},children:p.map(([h,y])=>_.jsx(U2t,{title:h,children:y.map(m=>_.jsxs(o1,{textValue:`${m.owner}/${m.name}`,children:[m.owner,"/",m.name]},`${m.owner}/${m.name}`))},h))})})]})}):null}function ENt(){const[t,e]=k.useState(),[n,r]=k.useState(void 0),[o,i]=k.useState(!1),{githubWsName:s}=Vs(qt),a=w$();k.useEffect(()=>{Ah().then(d=>{d&&e(d)})},[]);const l=k.useCallback(()=>{o||hi(qk)},[o]),c=k.useCallback(async()=>{if(!(o||!t||!s)){i(!0),r(void 0);try{const d=await ez({token:t});i(!1),d||r(new Error(`Bangle.io requires the one of the following scopes: ${qC.join(", ")}`)),a(aNt(s,t)),bt({title:"Github token updated",uid:"github-token-updated"+Date.now()}),l()}catch(d){if(i(!1),d instanceof lt)r(d);else throw d}}},[o,l,a,t,s]),u=k.useCallback(d=>{d.key==="Enter"&&c(),d.key==="Escape"&&l()},[c,l]);return s?_.jsx(Ar,{isDismissable:!0,headingTitle:"Update Github token",isLoading:o,primaryButtonConfig:{text:"Update",onPress:c},onDismiss:()=>{l()},children:_.jsxs("div",{children:[n&&_.jsx(nj,{title:"Error",content:n.message}),"The token will be safely stored in your browser's local storage.",_.jsx("div",{className:"my-4",children:_.jsx(UTt,{autoComplete:"off",spellCheck:!1,onKeyDown:u,placeholder:"Github personal access token",label:"Token",value:t,onChange:d=>{e(d)}})})]})}):_.jsx(Ar,{isDismissable:!0,onDismiss:l,headingTitle:"Update Github token",children:"This action can only occur in a workspace that is stored in Github. Please open one and try again."})}function CNt(t){if(!(t instanceof lt))return!1;const e=t.code;if(L6(t))return console.debug(t.code,t.name),bt({severity:Be.ERROR,title:"Error writing to browser storage",content:t.message,uid:e+Math.random(),buttons:[]}),!0;switch(e){case Nh:{if(t.message.includes("Bad credentials")){bt({severity:Be.ERROR,title:"Bad Github credentials",content:"Please check your Github token has correct permissions and try again.",uid:`github-storage-error-${e}`,buttons:[{title:"Update token",hint:"Update your Github token",operation:jy,dismissOnClick:!0}]});break}bt({severity:Be.ERROR,title:"Github API error",content:t.message,uid:`github-storage-error-${e}`,buttons:[]});break}case q3t:{bt({severity:Be.ERROR,title:"Invalid file format",content:t.message,uid:"github-file-format",buttons:[]});break}case Gf:{bt({severity:Be.ERROR,title:"Github token is invalid",content:"Please check your Github token has correct permissions and try again.",uid:`github-storage-error-${e}`,buttons:[{title:"Update token",hint:"Update your Github token",operation:jy,dismissOnClick:!0}]});break}case Uu:{bt({severity:Be.ERROR,title:"Received invalid response from Github",content:t.message,uid:Uu,buttons:[]});break}case xp:{bt({severity:Be.ERROR,title:"Not allowed",content:t.message,uid:xp+t.message,buttons:[]});break}case IO:{bt({severity:Be.ERROR,title:"Not allowed",content:t.message,uid:IO+t.message,buttons:[]});break}default:return console.error(t),bt({severity:Be.ERROR,title:"Bangle.io encountered a problem.",uid:"uncaughtExceptionNotification-"+t.name,buttons:[{title:"Report issue",hint:"Report an issue on Github",operation:qp}],content:t.message}),!1}return!0}class TNt{constructor(){ee(this,"name",Cb);ee(this,"displayName","Github storage");ee(this,"description","");ee(this,"hidden",!0);ee(this,"onChange",()=>{});ee(this,"_getTree",tz())}async createFile(e,n,r){const o=Vj({uid:e,file:n,sha:await cc(n)});await Dn.createEntry(o),this.onChange({type:"create",wsPath:e})}async deleteFile(e,n){await Dn.softDeleteEntry(e),this.onChange({type:"delete",wsPath:e})}async fileExists(e,n){return!!await this.readFile(e,n)}async fileStat(e,n){throw new lt({message:"fileStat is not supported",code:xp})}isSupported(){return!0}async listAllFiles(e,n,r){const o=await r.readWorkspaceMetadata(n),i=await Ah();if(!i)throw new lt({message:"Github token is required",code:Gf});if(e.aborted)return[];const{tree:s}=await this._getTree({wsName:n,config:{repoName:n,...o,githubToken:i},abortSignal:e});let a=await Dn.listAllKeys(n),l=new Set(await Dn.listSoftDeletedKeys(n));return Array.from(new Set([...a,...s.keys()])).filter(c=>!l.has(c))}async newWorkspaceMetadata(e,n){if(!n.owner)throw new lt({message:"Github owner is required",code:Gf});if(!n.branch)throw new lt({message:"Github branch is required",code:Gf});return{owner:n.owner,branch:n.branch}}parseError(e){try{return C0(JSON.parse(e))}catch(n){return}}async readFile(e,n){const{wsName:r}=ft(e),o=await Dn.readEntry(e);if(o!=null&&o.deleted)return;if(o)return o.file;const i=await n.readWorkspaceMetadata(r),s=await(await this._makeGetRemoteFileEntryCb(i))(e);if(!s)return;if(await Dn.createEntry(s))return s.file}async renameFile(e,n,r){const o=await this.readFile(e,r);if(!o)throw new lt({message:"Cannot rename as file not found",code:xp});await this.createFile(n,o,r),await this.deleteFile(e,r),this.onChange({type:"rename",oldWsPath:e,newWsPath:n})}serializeError(e){return JSON.stringify(E0(e))}async writeFile(e,n,r,o){if(!await Dn.writeFile(e,n,o))throw new lt({message:`File ${e} not found`,code:xp});this.onChange({type:"write",wsPath:e})}async _makeGetRemoteFileEntryCb(e,n=new AbortController().signal){const r=await Ah();if(!r)throw new lt({message:"Github token is required",code:Gf});return async o=>{const{wsName:i}=ft(o,!0),s={repoName:i,...e,githubToken:r},a=await this._getTree({wsName:i,config:s,abortSignal:n}),l=await nz({wsPath:o,config:s,abortSignal:n,tree:a});if(l)return Hj({uid:o,file:l,sha:await cc(l)})}}}const ANt="@bangle.io/github-storage",NNt=zn.create({name:ANt,application:{nsmSlices:[qt],nsmEffects:gNt,storageProvider:new TNt,dialogs:[{name:zk,ReactComponent:bNt},{name:zj,ReactComponent:kNt},{name:qy,ReactComponent:SNt},{name:qk,ReactComponent:ENt},{name:Wk,ReactComponent:yNt}],sidebars:[{title:"Github sync",name:"sidebar::@bangle.io/github-storage:sidebar",ReactComponent:wNt,activitybarIcon:H.createElement(tj,{}),hint:"Sync your local workspace with Github",activitybarIconShow(t){const e=Ug().state,n=qt.get(e).githubWsName;return n?n===t:!1}}],onStorageError:t=>CNt(t),operations:[{name:jy,title:"Github: Update personal access token",hidden:!0},{name:jk,title:"Github: Sync changes",hidden:!0},{name:RO,title:"Github: Discard local changes",hidden:!0},{name:zy,title:"Github: Show conflicted files",hidden:!0},{name:PO,title:"Github: Optimize storage",hidden:!0}],operationHandler(){return{handle(t,e){switch(t.name){case jk:{const{wsName:n}=Qn();return n?(Ug().dispatch(cz(new AbortController().signal,!0)),!0):!1}case RO:return oo({dialogName:zk}),!0;case jy:return oo({dialogName:qk}),!0;case zy:return oo({dialogName:Wk}),!0;case PO:return Ug().dispatch(WC(!0,new AbortController().signal)),!0;default:return!1}}}}}}),RNt="@bangle.io/helpfs-storage";var PNt=zn.create({name:RNt,application:{storageProvider:new E_t,onStorageError:t=>!0}});const ONt="assets/images",dz=new vt("imageMenuKey");let ua;async function fz(){if(ua)return ua;let[t,e]=await Promise.all([import("./dayjs.min-5545c1a0.js").then(function(n){return n.d}),import("./localizedFormat-909da070.js").then(function(n){return n.l})]);if(ua=t.default||t,e=e.default||e,ua==null||ua.extend(e),!ua)throw new Error("dayJs cannot be undefined");return ua}const INt="YYYYMMDDHHmmssSSS";function pz(t){const e=new Image;return e.src=t,new Promise(n=>{e.onload=()=>{n({width:e.width,height:e.height})}})}function hz(t){const{fileName:e}=tn(t),r=/.*-(\d+x\d+)\..*/.exec(e);if(r!=null&&r[1]){const[o,i]=r[1].split("x").map(s=>parseInt(s,10));return{width:o,height:i}}}function FO(t){return`${t.width}x${t.height}`}function DNt(t){const e=t.lastIndexOf("."),n=e===-1?t:t.slice(0,e),r=e===-1?"":t.slice(e);return{name:n,ext:r}}async function MNt(t,e,n=!1){const r=hz(t);let{fileName:o}=tn(t);if(n){const d=f0(/-\d{17}/g,o).filter(f=>f.match);for(const f of d)FNt(f.subString.slice(1))&&(o=o.replace(f.subString,""))}r&&(o=zNt(o,"-"+FO(r),""));let i="";n&&(i="-"+(await fz())(Date.now()).format(INt));const{name:s,ext:a}=DNt(o),l="-"+FO(e),u=[s,i,l].filter(Boolean).join("")+a;return Kee(t,u)}function LNt(t){let[e,n,r,o,i,s,a]=[t.slice(0,4),t.slice(4,6),t.slice(6,8),t.slice(8,10),t.slice(10,12),t.slice(12,14),t.slice(14)];return{year:parseInt(e),month:parseInt(n),day:parseInt(r),hour:parseInt(o),minute:parseInt(i),second:parseInt(s),milliseconds:parseInt(a)}}function FNt(t){let{year:e,month:n,day:r,hour:o,minute:i,second:s,milliseconds:a}=LNt(t);return e>2e3&&e<2100&&n>0&&n<=12&&r>0&&r<=31&&o>=0&&o<24&&i>=0&&i<60&&s>=0&&s<60&&a>=0&&a<1e3}const mz=/.*-scale(\d.+)$/;function BNt(t){t||(t="");const e=mz.exec(t);return e!=null&&e[1]?parseFloat(e[1]):1}function jNt(t,e=1){t||(t="");const n=mz.exec(t);return n&&n[1]&&(t=t.split(`-scale${n[1]}`).join("")),e===1?t:t+"-scale"+e.toFixed(2)}function zNt(t,e,n){return t.replace(new RegExp(e,"g"),n)}async function qNt(t,e,n,r){let o=Ld(e,ONt+"/"+t);return o=await MNt(o,n,!0),{wsPath:o,srcUrl:encodeURI("/"+tn(o).filePath)}}async function WNt(t,e,n){const{wsPath:r}=Rd(n.state),{wsName:o}=tn(r);return(await Promise.all(t.map(async s=>{const a=window.URL.createObjectURL(s),l=await pz(a);window.URL.revokeObjectURL(a);const{wsPath:c,srcUrl:u}=await qNt(s.name,o,l);if(o===Qn().wsName)return await b_t(c,s),u}))).filter(Boolean).map(s=>e.create({src:s}))}function UNt(){return({schema:t})=>[Od.createPlugin({name:"image",containerDOM:["span",{style:"display: inline-block;"}]})]}function Cg({scaleFactor:t,view:e,isActive:n}){const r=Math.ceil(t*100);return _.jsx(lo,{hintPos:"top",hint:"Scale image "+r+"%",onMouseDown:o=>{o.preventDefault(),HNt((i={})=>({alt:jNt(i==null?void 0:i.alt,t)}))(e.state,e.dispatch,e)},isActive:n,children:_.jsx("svg",{viewBox:"0 0 26 26",xmlns:"http://www.w3.org/2000/svg",children:_.jsx("text",{x:"13",y:"13",stroke:"currentColor",textAnchor:"middle",alignmentBaseline:"central",dominantBaseline:"middle",children:r})})})}function VNt(){const t=qn();return _.jsx(_.Fragment,{children:_.jsx(gC,{menuKey:dz,renderMenuType:({type:e})=>{if(e==="imageMenu"){const n=KNt(t.state);return _.jsx(bh,{children:_.jsxs(yd,{children:[_.jsx(Cg,{view:t,isActive:n===.25,scaleFactor:.25}),_.jsx(Cg,{view:t,isActive:n===.5,scaleFactor:.5}),_.jsx(Cg,{view:t,isActive:n===.75,scaleFactor:.75}),_.jsx(Cg,{view:t,isActive:n===1,scaleFactor:1})]})})}return null}})})}const HNt=(t={})=>(e,n,r)=>{if(!(e.selection instanceof Me)||!e.selection.node)return!1;const{node:o}=e.selection;if(o.type!==e.schema.nodes.image)return!1;if(n){const i=typeof t=="function"?t(o.attrs):t;n(e.tr.setNodeMarkup(e.selection.$from.pos,void 0,{...o.attrs,...i}))}return!0};function KNt(t){var r;if(!(t.selection instanceof Me)||!t.selection.node)return;const{node:e}=t.selection;if(e.type!==t.schema.nodes.image)return;const{alt:n}=(r=e.attrs)!=null?r:{};return BNt(n)}const GNt={image:({nodeViewRenderArg:t})=>{let{src:e,alt:n}=t.node.attrs;return _.jsx(YNt,{nodeAttrs:{src:e,alt:n}})}},BO=t=>!t||t.startsWith("http://")||t.startsWith("https://")||t.startsWith("data:image/");function ZNt({nodeAttrs:t,openedWsPaths:e,readFile:n}){const{src:r,alt:o}=t,[i,s]=k.useState(null),a=e.primaryWsPath2&&!BO(r)?PS(r,e.primaryWsPath2):void 0,[l,c]=k.useState(()=>{if(a)return hz(a)});let u,d;l&&({height:u,width:d}=l);const f=Qh();k.useEffect(()=>{let y=null;if(e.primaryWsPath2)if(BO(r))s(r);else{if(RS(r))throw new Error("Image source cannot be a wsPath");a&&n(a).then(m=>{m&&(y=window.URL.createObjectURL(m),d||pz(y).then(w=>{f.current||c({height:w.height,width:w.width})}),f.current||s(y))}).catch(m=>{})}return()=>{y&&window.URL.revokeObjectURL(y)}},[r,e.primaryWsPath2,f,n,a,d]);let p=d,h=u;if(o&&d&&u&&/.*scale\d.\d\d$/.test(o)){const y=o.split("scale")[1];if(y){const m=parseFloat(y);p=m*d,h=m*u}}return _.jsx("img",{src:i||"/404.png",alt:o||r,width:p,height:h})}function YNt({nodeAttrs:t}){const{openedWsPaths:e}=Xr();return _.jsx(ZNt,{nodeAttrs:t,openedWsPaths:e,readFile:v_t})}const JNt="@bangle.io/image-extension",XNt=zn.create({name:JNt,editor:{specs:[_x.spec()],plugins:[_x.plugins({createImageNodes:WNt}),UNt(),t9.plugins({key:dz,calculateType:(t,e)=>t.selection instanceof Me&&t.selection.node.type.name==="image"?"imageMenu":null})],renderReactNodeView:GNt,ReactComponent:VNt}}),g_="wikiLink",QNt=eRt;function eRt(){const{toDOM:t,parseDOM:e}=m0(g_,{tag:"span",parsingPriority:52});return{type:"node",name:g_,schema:{attrs:{path:{default:null},title:{default:null}},inline:!0,group:"inline",selectable:!1,draggable:!0,toDOM:t,parseDOM:e},markdown:{toMarkdown:(n,r)=>{n.text("[[",!1);const{path:o,title:i}=r.attrs;let s=o;i&&i!==o&&(s+="|"+i),n.text(s,!1),n.text("]]",!1)},parseMarkdown:{wiki_link:{block:g_,getAttrs:n=>{if(typeof n.payload=="string"){let[r,o]=n.payload.split("|");return{path:r,title:o}}return null},noCloseToken:!0}}}}}var gz=Object.freeze({__proto__:null,spec:QNt});function tRt(t){H8(t,{tokenName:"wiki_link",regex:/\[\[([^\]\[]+)\]\]/g,getTokenDetails:e=>({payload:e.slice(2,-2),markup:e.slice(2,-2)})})}let jO=0;const nRt=typeof window!="undefined"&&window.requestAnimationFrame?window.requestAnimationFrame:function(t){var e=new Date().getTime(),n=Math.max(0,16-(e-jO)),r=window.setTimeout(function(){t(e+n)},n);return jO=e+n,r},{decrementSuggestTooltipCounter:rRt,incrementSuggestTooltipCounter:oRt,queryIsSuggestTooltipActive:iRt}=ho,UC=sRt,VC=aRt;function sRt({markName:t,trigger:e}){const n=ho.spec({markName:t,trigger:e});return{...n,options:{...n.options,trigger:e}}}function aRt({key:t,markName:e,tooltipRenderOpts:n={}}){return({schema:r,specRegistry:o})=>{const{trigger:i}=o.options[e],s=new vt("suggestTooltipKey"),a=nb(n.tooltipDOMSpec),l=()=>a.dom.getAttribute("data-popper-placement")==="top-start";if(!r.marks[e])throw Po(`Couldn't find the markName:${e}, please make sure you have initialized to use the same markName you initialized the spec with`),new Error(`markName ${e} not found`);const c=(d="UP")=>(f,p,h)=>(nRt(()=>{h==null||h.focus()}),(d==="UP"?!l():l())?rRt(s)(f,p,h):oRt(s)(f,p,h));let u;return[H$(t,{setExecuteItemCommand:d=>{u=d},tooltipContentDOM:a.contentDOM,markName:e,suggestTooltipKey:s}),ho.plugins({key:s,markName:e,trigger:i,tooltipRenderOpts:{placement:"bottom",...n,tooltipDOMSpec:a},onEnter:(d,f,p)=>u?u(d,f,p):!1,onArrowDown:c("DOWN"),onArrowUp:c("UP")})]}}function Rb(t){return e=>t.getState(e).suggestTooltipKey}function lr(t,e){return(n,r,o)=>{const i=Rb(t)(n);return ho.replaceSuggestMarkWith(i,e)(n,r,o)}}function yz(t){return e=>{const n=Rb(t)(e);return iRt(n)(e)}}function lRt(t){return e=>{const n=Rb(t)(e);return ho.queryTriggerText(n)(e)}}function HC(t){const e=qn(),{triggerText:n,counter:r,show:o}=gd(Rb(t)(e.state),!0),{tooltipContentDOM:i}=gd(t);return{query:n,counter:r,isVisible:o,tooltipContentDOM:i}}function KC(t,e,n,r){const{setExecuteItemCommand:o}=gd(t),i=qn(),s=k.useCallback(()=>ho.removeSuggestMark(t)(i.state,i.dispatch,i),[i,t]),a=zO(n,e.length),l=k.useCallback(u=>{const d=e[u];return d?r!=null&&r(d)?f=>!0:(f,p,h)=>d.editorExecuteCommand({item:d,itemIndex:u})(f,p,h):ho.removeSuggestMark(t)},[t,e,r]);return k.useEffect(()=>(o((u,d,f)=>l(zO(n,e.length))(u,d,f)),()=>{o(void 0)}),[o,l,e,n]),{getItemProps:k.useCallback((u,d)=>({isActive:a===d,onClick:f=>{l(d)(i.state,i.dispatch,i)&&f.preventDefault()}}),[a,l,i]),dismissPalette:s}}function zO(t,e){const n=t%e;return n<0?n+e:n}const qO={height:16,width:16};function cRt(){const t=uRt(),e=k.useCallback(i=>s=>{if(!i)return;const a=jt(i),l=i8(s);l===Xp.NewTab?eb(a):l===Xp.ShiftClick?ad(a):Hd(a)},[]),[n,r]=k.useState(()=>new Set),o=k.useCallback(i=>!n.has(i.wsPath),[n]);return _.jsx("div",{"data-testid":"inline-backlink_widget-container",className:"flex flex-col",children:!t||t.length===0?_.jsxs("span",{children:[" No backlinks found!",_.jsx("br",{}),_.jsxs("span",{className:"font-light",children:["Create one by typing ",_.jsx("kbd",{className:"font-normal",children:"[["})," followed by the name of the note."]})]}):t.map((i,s)=>_.jsxs(H.Fragment,{children:[_.jsx(_d,{titleClassName:"",className:"rounded text-sm truncate py-2 px-2 select-none",extraInfoClassName:"text-sm",onClick:e(i.wsPath),item:{uid:i.wsPath,showDividerAbove:!1,title:ft(i.wsPath).fileNameWithoutExt,leftNode:_.jsx(No,{onClick:a=>{r(l=>{if(l.has(i.wsPath)){const c=new Set(l);return c.delete(i.wsPath),c}else{const c=new Set(l);return c.add(i.wsPath),c}}),a.stopPropagation(),a.preventDefault()},children:o(i)?_.jsx(ej,{style:qO}):_.jsx(JB,{style:qO})}),rightNode:_.jsx(No,{className:"text-xs font-semibold rounded bg-colorNeutralSolidFaint px-1",children:i.matches.length}),rightHoverNode:_.jsx(No,{className:"text-xs font-semibold rounded bg-colorNeutralSolidFaint px-1",children:i.matches.length})}}),!o(i)&&i.matches.map((a,l)=>_.jsx(_d,{className:"B-search-notes_search-result-text-match ml-1 pl-3 rounded "+(l===0?"mt-0":"mt-1"),onClick:e(i.wsPath),titleClassName:"text-sm",item:{uid:"search-result-text-match-"+l,title:_.jsx(dRt,{highlightText:a.match})}},l))]},s))})}function uRt(){const{focusedEditorId:t}=w6(),{wsName:e,openedWsPaths:n}=Xr(),[r,o]=k.useState(void 0),i=k.useCallback((a,l)=>{e&&Tm.abortable.abortableSearchWsForPmNode(l.signal,e,"backlink:*",[{nodeName:"wikiLink",dataAttrName:"path",printBefore:"[[",printAfter:"]]",queryIdentifier:"backlink:"}]).then(c=>{const u=Cr(ft(a).fileName);o(c.map(d=>{const f=d.matches.filter(p=>{const[,h]=p.match;return h?h.includes(u):!1});return{wsPath:d.uid,matches:f}}).filter(d=>d.matches.length>0))},c=>{if(!Mc(c))throw c})},[e]),s=k.useMemo(()=>{if(t!=null)return n.getByIndex(t)},[n,t]);return k.useEffect(()=>{const a=new AbortController;let l=s&&CS(()=>{i(s,a)},{timeout:1e3});return()=>{a.abort(),l&&V1(l)}},[s,e,i]),r}function dRt({highlightText:t}){return _.jsx("div",{className:"B-inline-backlink_highlight-text-container",children:t.map((e,n)=>_.jsx("span",{className:Xe(n%2===1&&"bg-colorPromoteSolidFaint","text-sm"),children:e},n))})}const bz="@bangle.io/inline-backlink",GC="wikiLink",WO=A0(bz+"-paletteMark"),Rh=new vt("inlineBacklinkPlatteKey"),fRt=H.forwardRef(({onHoverChange:t,title:e,linkNotFound:n,onClick:r},o)=>{const{hoverProps:i,isHovered:s}=kb({isDisabled:!1}),a=N0(s,{maxWait:300,wait:100});return k.useEffect(()=>{t(a)},[a,t]),_.jsxs("button",{ref:o,...i,"aria-label":e,"data-testid":"inline-backlink-button",className:Xe("B-inline-backlink_backlink-node hover:underline inline-flex gap-0_5 flex-row items-center rounded py-0 px-1 mx-1 text-start",n&&"B-inline-backlink_backlink-node-not-found"),draggable:!1,onClick:r,children:[_.jsx("span",{children:_.jsx(_Tt,{className:"h-4 w-4 text-colorPromoteIcon",style:{fill:J.misc.editorBacklinkBg}})}),_.jsx("span",{className:"inline whitespace-break-spaces",children:e})]})}),vz=nm(t=>WZ(t.doc,t.schema.nodes[gz.spec().name]).map(r=>r.node.attrs.path).filter(r=>typeof r=="string")),pRt=nm(t=>{let e=[...t];const n=new Set(e),r=e.sort((s,a)=>s.split("/").length-a.split("/").length),o=new Set(e.map(s=>{const{fileNameWithoutExt:a}=ft(s,!0);return a.toLocaleLowerCase()})),i=new Set(e.map(s=>{const{filePath:a}=ft(s,!0);return Cr(a)}));return{sortedByNesting:r,wsPathSet:n,filePathsWithoutExt:i,lowerCaseFileNameWithoutExt:o}}),wz=zee((t,e)=>{let n=new Map;const r=(i,s)=>{const a=K1(s),{fileName:l,fileNameWithoutExt:c}=ft(i,!0);if(a){if(l===s)return i;for(const u of AS)if(l===s+u)return i;return}else return c===s?i:void 0},o=pRt(t);for(let i of e){const s=K1(i);if(i.startsWith("./")||i.startsWith("../"))continue;if(i.includes("/")){const l=Cr(i);if(o.filePathsWithoutExt.has(l)){let c;s?c=o.sortedByNesting.find(u=>{const{filePath:d}=ft(u,!0);return d===i}):c=o.sortedByNesting.find(u=>{const{filePath:d}=ft(u,!0);return Cr(d)===i}),c&&n.set(i,c)}if(i.startsWith("/")){const c=i.slice(1);let u=Cr(c);if(o.filePathsWithoutExt.has(u)){let d=o.sortedByNesting.find(f=>{const{filePath:p}=ft(f,!0);return p===c});d&&n.set(i,d)}}continue}const a=i.toLocaleLowerCase();if(o.lowerCaseFileNameWithoutExt.has(Cr(a))||o.lowerCaseFileNameWithoutExt.has(a)){let l,c;for(const u of o.sortedByNesting){if(l)break;l=r(u,i),!c&&r(jt(u.toLocaleLowerCase()),a)&&(c=u)}if(l){n.set(i,l);continue}else if(c){n.set(i,c);continue}}}return n}),y_=40;function hRt(t,e){const n=new vt("editor_watchPluginHost");return new ht({key:n,state:{init(){return new Set},apply(r,o,i,s){for(const{pluginKey:a,operation:l}of e)kM(a,s,i)&&o.add(l);return o}},view(r){let o=0;const i=r8(()=>{V1(o),o=CS(()=>{const s=r.state,a=n.getState(s);a&&a.size>0&&(a.forEach(l=>{t.dispatchSerialOperation({name:l,value:{editorId:t.editorId}})}),a.clear())},{timeout:2*y_})},{wait:y_,maxWait:2*y_});return{destroy(){i.cancel(),V1(o)},update(s,a){const{state:l}=s;a!==l&&i()}}}})}function mRt(t){return _.jsx(gRt,{...t},t.wsPath)}function gRt({className:t,editorDisplayType:e=Ju.Page,editorId:n,eternalVars:r,wsPath:o}){const{dispatchSerialOperation:i}=Xs(),s=IV(),a=DV(),[l,c]=k.useState();k.useEffect(()=>{let p=!1;return Z0(o,r.extensionRegistry).then(h=>{p||c(h)}),()=>{p=!0}},[o,r.extensionRegistry]);const u=k.useRef(null),d=k.useCallback(p=>{const h=Proxy.revocable(p,{});u.current=h,ywt(s.state,o,n),s.dispatch(ZN({editorId:n,editor:h.proxy}))},[s,o,n]);k.useEffect(()=>()=>{const p=u.current;if(p){u.current=null;const h=Q0(s.state,n);if(h===p.proxy){s.dispatch(ZN({editor:void 0,editorId:n}));const y=y6(n,h);s.dispatch(Swt(y))}setTimeout(()=>{p.revoke()},100)}},[n,s]);const f=n!=null&&l?vwt(s.state,n,o,l):void 0;return l?_.jsx(yRt,{nsmStore:a,initialSelection:f,dispatchSerialOperation:i,className:t,editorId:n,eternalVars:r,initialValue:l,wsPath:o,onEditorReady:d,editorDisplayType:e}):null}function yRt({nsmStore:t,className:e,dispatchSerialOperation:n,editorDisplayType:r,editorId:o,eternalVars:i,initialValue:s,onEditorReady:a,initialSelection:l,wsPath:c}){const u=bRt({dispatchSerialOperation:n,editorDisplayType:r,editorId:o,eternalVars:i,initialSelection:l,initialValue:s,wsPath:c,nsmStore:t}),d=k.useCallback(p=>i.extensionRegistry.renderReactNodeViews({nodeViewRenderArg:p}),[i]);let f="B-editor_display-page";switch(r){case Ju.Page:{f="B-editor_display-page";break}case Ju.Floating:{f="B-editor_display-popup";break}default:{let p=r;throw new Error("Unknown error type "+p)}}return _.jsx(fC,{className:Xe(e,f),focusOnInit:!1,onReady:a,renderNodeViews:d,state:u,children:i.extensionRegistry.renderExtensionEditorComponents()})}function bRt({dispatchSerialOperation:t,editorDisplayType:e,editorId:n,initialSelection:r,initialValue:o,wsPath:i,nsmStore:s,eternalVars:a}){const l=k.useMemo(()=>({wsPath:i,editorId:n,editorDisplayType:e,dispatchSerialOperation:t,nsmStore:s,createdAt:Date.now(),collabMessageBus:a.editorCollabMessageBus}),[n,s,i,t,e,a]),c=k.useCallback(()=>[H$(_M,l),...a.extensionRegistry.getPlugins(),hRt(l,a.extensionRegistry.getEditorWatchPluginStates())],[a,l]);return JL({plugins:c,pluginMetadata:l,specRegistry:a.extensionRegistry.specRegistry,initialValue:o,pmStateOpts:{selection:r},editorProps:{},dropCursorOpts:{color:J.color.promote.solidStrong,width:2}})}const vRt=H.forwardRef(({noContent:t,popupContainerProps:e,editorProps:n},r)=>vl.createPortal(_.jsx("div",{ref:r,className:Xe("py-4 pl-6 overflow-y-auto rounded-md ",e.className),...e.positionProps,style:{...e.style,backgroundColor:J.misc.editorBg},children:t||_.jsx(mRt,{...n,editorId:Lg,editorDisplayType:Ju.Floating})}),document.getElementById("tooltip-container"))),wRt=H.forwardRef(({positionProps:t,wsPath:e,style:n},r)=>_.jsx(vRt,{ref:r,editorProps:{eternalVars:Jq(),wsPath:e},popupContainerProps:{style:{...n,width:J.misc.miniEditorWidth,height:400},className:"B-inline-backlink_popup-editor z-popup border-1 border-solid border-colorNeutralBorder shadow-2xl",positionProps:t}}));function _Rt({wikiLink:t,currentWsPath:e,editorState:n}){const{wsName:r,noteWsPaths:o}=Xr();return k.useCallback(i=>{i.preventDefault(),!(!r||!o)&&xRt({wikiLink:t,currentWsPath:e,wsName:r,noteWsPaths:o,editorState:n}).then(s=>{const a=jt(s),l=i8(i);l===Xp.NewTab?eb(a):l===Xp.ShiftClick?ad(a):Hd(a)},s=>{if(s instanceof Io){bt({severity:Be.ERROR,title:"Invalid backlink path",content:s.message,uid:Date.now()+"-invalid-backlink-path",buttons:[]});return}throw s})},[o,e,n,t,r])}async function xRt({wikiLink:t,currentWsPath:e,wsName:n,noteWsPaths:r,editorState:o}){const s=wz(r,vz(o)).get(t);if(s)return s;const a=K1(t)?t:NS(t);if(e&&(a.startsWith("./")||a.startsWith("../"))){const c=PS(a,e);return O3(c),c}let l=Ld(n,a);return e&&!t.includes("/")&&(l=Hee(a,e)),O3(l),await P6(l,{open:!1}),l}function kRt({nodeAttrs:t,editorState:e}){const{wsPath:n,editorDisplayType:r}=Rd(e),{wsName:o,noteWsPaths:i}=Xr();let{path:s,title:a}=t;a=a||s;const l=_Rt({wikiLink:s,currentWsPath:n,editorState:e}),[c,u]=k.useState(void 0),d=r===Ju.Floating,[f,p]=k.useState(!1),{hoverProps:h,isHovered:y}=kb({isDisabled:d}),{isTooltipVisible:m,setTooltipElement:w,setTriggerElement:x,tooltipProps:$}=BTt({isDisabled:d,isActive:!d&&(f||y),xOffset:10,yOffset:0,placement:"right",delay:450,immediateClose:!1});return k.useEffect(()=>{if(i){const S=wz(i,vz(e)).get(s);u(S)}},[o,i,s,e]),k.useEffect(()=>{let S=c,I=!1;return S&&m&&(I=!0,Vl(E=>E.updatePopupEditorWsPath(S))),()=>{I&&Vl(E=>S&&S===E.popupEditorWsPath?E.updatePopupEditorWsPath(void 0):E)}},[c,m]),_.jsxs(_.Fragment,{children:[_.jsx(fRt,{ref:x,linkNotFound:!c,title:a,onClick:l,onHoverChange:p}),m&&c&&_.jsx(wRt,{disablePreview:d,positionProps:{...h,...$.attributes},ref:w,style:$.style,wsPath:c})]})}const $Rt={[GC]:({nodeViewRenderArg:t})=>{const{path:e,title:n}=t.node.attrs;return typeof e!="string"?_.jsx("span",{children:"Invalid Path"}):_.jsx(kRt,{nodeAttrs:{path:e,title:n},editorState:t.view.state})}};function SRt(){return()=>[Od.createPlugin({name:GC,containerDOM:["span",{style:"display: inline-block;"}]})]}function UO(t,e){let n=t.split("]]").join("");n=n.trim(),n=NS(n);let r=Qp(e,n);try{rm(r)}catch(o){r=Qp(e,Vee(n))}return r}function ERt(t,e){const{fileName:n,filePath:r}=ft(t),o=e.filter(i=>ft(i).fileName===n);return o.length===0||o.length>1?Cr(r):Cr(n)}const CRt=12,b_=(t,e)=>(n,r,o)=>{const i=n.schema.nodes[GC],s=ERt(t,e);return Md(i,"wikiLink must be defined"),lr(Rh,i.create({path:s}))(n,r,o)};function TRt(){const t=qn();return!t||t.isDestroyed?null:_.jsx(ARt,{})}function ARt(){const{query:t,counter:e,tooltipContentDOM:n,isVisible:r}=HC(Rh);return vl.createPortal(_.jsx(NRt,{query:t,counter:e,isVisible:r,editorView:qn()}),n)}function NRt({query:t,counter:e,isVisible:n,editorView:r}){return _.jsx("div",{className:"shadow-2xl B-ui-components_inline-palette-wrapper flex flex-col bg-colorNeutralBgLayerFloat",children:_.jsxs("div",{className:"B-ui-components_inline-palette-items-wrapper",children:[n&&_.jsx(PRt,{query:t,counter:e,editorView:r}),_.jsxs(bi,{children:[_.jsxs(Rt,{children:[_.jsx("kbd",{className:"font-normal",children:""})," Navigate"]}),_.jsxs(Rt,{children:[_.jsx("kbd",{className:"font-normal",children:"Enter"})," Create link"]}),_.jsxs(Rt,{children:[_.jsx("kbd",{className:"font-normal",children:"Esc"})," Dismiss"]})]})]})})}const RRt=[];function PRt({query:t,editorView:e,counter:n}){const{wsName:r,noteWsPaths:o=RRt}=Xr(),i=FC(o,t,{limit:CRt,selector:l=>ft(l,!0).filePath,tiebreakers:[Eb]}),s=k.useMemo(()=>{let l=i.map(u=>{const d=u.item;return{wsPath:d,uid:d,title:Cr(ft(d,!0).filePath),editorExecuteCommand:()=>b_(d,o)}});if(!l.find(u=>u.title===t||NS(t)===ft(u.wsPath,!0).filePath)&&t.length>0&&r){const u=UO(t,r);let d={uid:"create-"+u,wsPath:u,title:"Create: "+Cr(ft(u).filePath),editorExecuteCommand:()=>b_(u,o)};l=$ee(l,1,d)}return l},[o,i,r,t]),{getItemProps:a}=KC(Rh,s,n,()=>!1);return k.useEffect(()=>{r&&(t==="]]"||t.includes("[[")?lr(Rh,"")(e.state,e.dispatch,e):t.endsWith("]]")&&b_(UO(t,r),o)(e.state,e.dispatch,e))},[t,r,e,o]),_.jsxs(_.Fragment,{children:[t===""&&_.jsx(wd,{dataId:"searchNote",className:"palette-row",title:" Search for a note to link it"}),s.map((l,c)=>_.jsx(wd,{dataId:l.uid,className:"palette-row",description:l.title,...a(l,c)},l.uid))]})}const ORt=t=>t.dom.parentElement,IRt=gz.spec(),DRt=zn.create({name:bz,editor:{specs:[IRt,UC({markName:WO,trigger:"[["})],highPriorityPlugins:[VC({key:Rh,markName:WO,tooltipRenderOpts:{getScrollContainer:ORt}})],plugins:[SRt()],markdownItPlugins:[tRt],ReactComponent:TRt,renderReactNodeView:$Rt},application:{noteSidebarWidgets:[{name:"note-sidebar-widget::@bangle.io/inline-backlink",ReactComponent:cRt,title:"Backlink references"}]}}),ZC="@bangle.io/inline-command-palette",v_=A0(ZC+"/paletteMark"),Wr=new vt(ZC+"-key"),YC="REGULAR_TYPE",Pb="HINT_TYPE",MRt=[Pb,YC];class cr{constructor(e){ee(this,"uid");ee(this,"title");ee(this,"type");ee(this,"description");ee(this,"rightHoverIcon");ee(this,"keybinding");ee(this,"keywords");ee(this,"disabled");ee(this,"hidden");ee(this,"editorExecuteCommand");ee(this,"group");ee(this,"highPriority");ee(this,"skipFiltering");const{uid:n,title:r,type:o=YC,description:i,keywords:s,disabled:a,hidden:l,editorExecuteCommand:c,group:u,highPriority:d,skipFiltering:f,...p}=e;if(Object.keys(p).length>0)throw new Error(`PaletteItem: the following fields are not recognized "${Object.keys(p).join(",")}"`);if(!MRt.includes(o))throw new Error("PaletteItem: Unknown type "+o);if(!u)throw new Error("PaletteItem: group is required");this.uid=n,this.title=r,this.type=o,this.description=i,this.keywords=s,this.disabled=a,this.hidden=l,this.editorExecuteCommand=c,this.group=u,this.highPriority=d,this.skipFiltering=f}static create(e){return new cr(e)}}const LRt=24*60*60*1e3,VO=(t,e)=>{const n=t(e),r=n.startOf("day");return n.diff(r)===0||n.diff(r)===LRt/2?n.format("ll"):n.format("ll LT")},FRt=cr.create({uid:"date",type:Pb,title:" ",description:"   -  '/tomorrow', '/next friday 3pm', '/sep 23'",keywords:["date","time"],group:"date",disabled:!0,editorExecuteCommand:()=>{}});let w_;async function BRt(){if(!w_){let[t,e]=await Promise.all([import("./chrono-05fcb368.js").then(n=>n.getChrono()),fz()]);w_={chrono:t,dayjs:e}}return w_}function jRt(t){const[e,n]=k.useState(void 0),[r,o]=k.useState("not-started"),i=k.useRef(),s=Qh(),a=k.useMemo(()=>{if(e){const{parsedDates:l,dayjs:c}=e;return l.map((u,d)=>cr.create({uid:"parsedDate"+d,highPriority:!0,skipFiltering:!0,title:"Insert date",group:"date",description:'Insert "'+VO(c,u.date())+'"',editorExecuteCommand:()=>lr(Wr,VO(c,u.date())+" ")}))}return[FRt]},[e]);return k.useEffect(()=>{t&&r==="not-started"&&(o("loading"),BRt().then(l=>{s.current||(i.current=l,o("loaded"))}).catch(l=>{if(!s.current)throw o("not-started"),l}))},[t,r,o,s]),k.useEffect(()=>{if(t&&r==="loaded"&&i.current){const{chrono:l,dayjs:c}=i.current;let u=c().startOf("day").toDate();const d=l.parse(t,u);d.length>0?n({parsedDates:d,chrono:l,dayjs:c}):n(void 0)}},[t,r]),k.useEffect(()=>{t===""&&e&&n(void 0)},[t,e]),a}const{insertEmptyParagraphAbove:zRt,insertEmptyParagraphBelow:qRt}=Vh,{queryIsBulletListActive:WRt}=Id,{queryIsOrderedListActive:URt}=Dd,{insertEmptyParaAbove:VRt,insertEmptyParaBelow:HRt}=Ao,{insertEmptyParaAbove:KRt,insertEmptyParaBelow:GRt}=g0;function ZRt(){return uo(zRt(),VRt(),KRt())}function YRt(){return uo(qRt(),HRt(),GRt())}function Lf(){return uo(URt(),WRt())}const{convertToParagraph:JRt}=Vh,{toggleBulletList:HO,toggleTodoList:KO,queryIsBulletListActive:XRt,queryIsTodoListActive:QRt}=Id,{insertEmptySiblingListAbove:ePt,insertEmptySiblingListBelow:tPt}=Zh,{toggleOrderedList:GO,queryIsOrderedListActive:nPt}=Dd,rPt=t=>(e,n)=>{const r=e.schema.nodes.heading;return Md(r,"   "),nd(r,{level:t})(e,n)};function oPt(){return k.useMemo(()=>[cr.create({uid:"paraBelow",title:"   ",group:"editor",description:"     ",disabled:e=>Lf()(e),editorExecuteCommand:()=>(e,n,r)=>(r&&no(r,YRt()),lr(Wr,"")(e,n,r))}),cr.create({uid:"paraAbove",title:"   ",group:"editor",description:"     ",disabled:e=>Lf()(e),editorExecuteCommand:()=>(e,n,r)=>(r&&no(r,ZRt()),lr(Wr,"")(e,n,r))}),cr.create({uid:"paraConvert",title:"",group:"editor",description:"    ",editorExecuteCommand:()=>(e,n,r)=>(r&&no(r,(o,i,s)=>QRt()(o)?KO()(o,i,s):XRt()(o)?HO()(o,i,s):nPt()(o)?GO()(o,i,s):JRt()(o,i,s)),lr(Wr,"")(e,n,r))}),cr.create({uid:"bulletListConvert",title:" ",group:"editor",keywords:["unordered","lists"],description:"     ",editorExecuteCommand:()=>(e,n,r)=>(r&&no(r,HO()),lr(Wr,"")(e,n,r))}),cr.create({uid:"todoListConvert",title:"Todo",group:"editor",keywords:["todo","lists","checkbox","checked"],description:"     ",editorExecuteCommand:()=>(e,n,r)=>(r&&no(r,KO()),lr(Wr,"")(e,n,r))}),cr.create({uid:"orderedListConvert",group:"editor",title:"  ",keywords:["numbered","lists"],description:"     ",editorExecuteCommand:()=>(e,n,r)=>(r&&no(r,GO()),lr(Wr,"")(e,n,r))}),cr.create({uid:"insertSiblingListAbove",group:"editor",title:"   ",keywords:["insert","above","lists"],description:"      ",disabled:e=>!Lf()(e),editorExecuteCommand:()=>(e,n,r)=>(r&&no(r,ePt()),lr(Wr,"")(e,n,r))}),cr.create({uid:"insertSiblingListBelow",group:"editor",title:"   ",keywords:["insert","below","lists"],description:"      ",disabled:e=>!Lf()(e),editorExecuteCommand:()=>(e,n,r)=>(r&&r&&no(r,tPt()),lr(Wr,"")(e,n,r))}),...Array.from({length:3},(e,n)=>{const r=n+1;return cr.create({uid:"headingConvert"+r,title:"H"+r,group:"editor",description:"      "+r,disabled:o=>Lf()(o),editorExecuteCommand:()=>(o,i,s)=>(s&&no(s,rPt(r)),lr(Wr,"")(o,i,s))})})],[])}const iPt=[cr.create({uid:"useBacklink",type:Pb,title:"   ",description:" [[,    ,     .",keywords:["backlink","link"],group:"hints",disabled:!0,editorExecuteCommand:()=>{}})];function ZO(t,e,n,r,o){var a;let i=[...r,...n];if(!i.every(l=>l instanceof cr))throw new Error(`uid: "${(a=i.find(l=>!(l instanceof cr)))==null?void 0:a.uid}" must be an instance of PaletteItem `);i=i.filter(l=>typeof l.hidden=="function"?!l.hidden(t.state):!l.hidden),i.forEach(l=>{l._isItemDisabled=o(l)});let s=[...iPt,...i.filter(l=>l.type===Pb)];return i=i.filter(l=>aPt(l,e)&&l.type===YC).sort((l,c)=>{let u=YO(l,c,"highPriority");return u!==0||(u=YO(l,c,"_isItemDisabled",!0),u!==0)?u:l.group===c.group?l.title.localeCompare(c.title):l.group.localeCompare(c.group)}),{items:i,hintItems:s}}function sPt(){const{query:t,counter:e,isVisible:n,tooltipContentDOM:r}=HC(Wr),o=qn(),i=jRt(t),s=oPt(),a=k.useCallback(f=>typeof f.disabled=="function"?f.disabled(o.state):f.disabled,[o]),[{items:l,hintItems:c},u]=k.useState(()=>ZO(o,t,s,i,a));k.useEffect(()=>{const f=ZO(o,t,s,i,a);u(f)},[o,t,s,i,a,n]);const{getItemProps:d}=KC(Wr,l,e,a);return vl.createPortal(_.jsxs("div",{className:"B-ui-components_inline-palette-wrapper flex flex-col bg-colorNeutralBgLayerFloat shadow-2xl",children:[_.jsxs("div",{className:"B-ui-components_inline-palette-items-wrapper",children:[l.map((f,p)=>_.jsx(wd,{dataId:f.uid,disabled:f._isItemDisabled,title:(f._isItemDisabled?" ":"")+f.title,description:f.description,rightHoverIcon:f.rightHoverIcon,rightIcon:_.jsx("kbd",{className:"whitespace-nowrap",children:f.keybinding}),...d(f,p)},f.uid)),c.map((f,p)=>_.jsx(wd,{dataId:f.uid,className:"palette-row",title:" Tip "+f.title,description:f.description,rightHoverIcon:f.rightHoverIcon,rightIcon:_.jsx("kbd",{className:"whitespace-nowrap",children:f.keybinding})},f.uid))]}),_.jsxs(bi,{children:[_.jsxs(Rt,{children:[_.jsx("kbd",{className:"font-normal",children:""})," "]}),_.jsxs(Rt,{children:[_.jsx("kbd",{className:"font-normal",children:"Enter"}),"  "]}),_.jsxs(Rt,{children:[_.jsx("kbd",{className:"font-normal",children:"Esc"})," "]})]})]}),r)}function aPt(t,e){if(t.skipFiltering||Zf(t.title,e)||t.keywords&&Zf(t.keywords,e)||Zf(t.group,e)||Zf(t.description,e))return t}function Zf(t,e){return e=e.toLocaleLowerCase(),Array.isArray(t)?t.filter(Boolean).some(n=>Zf(n,e)):(t=t.toLocaleLowerCase(),t.includes(e)||e.includes(t))}function YO(t,e,n,r=!1){return t[n]&&!e[n]?r?1:-1:e[n]&&!t[n]?r?-1:1:0}const lPt=t=>t.dom.parentElement,__="/",cPt=zn.create({name:ZC,editor:{ReactComponent:sPt,specs:[UC({markName:v_,trigger:__})],highPriorityPlugins:[VC({key:Wr,markName:v_,tooltipRenderOpts:{getScrollContainer:lPt}})],plugins:[en({[Oee.toggleInlineCommandPalette.key]:(t,e,n)=>{var c;const{tr:r,schema:o,selection:i}=t;if(yz(Wr)(t))return!1;const s=i.$from.marks(),a=o.mark(v_,{trigger:__}),l=(c=i.$from.nodeBefore)==null?void 0:c.text;return l&&!l.endsWith(" ")&&r.replaceSelectionWith(o.text(" "),!1),r.replaceSelectionWith(o.text(__,[a,...s]),!1),e==null||e(r),!0}})]}});var uPt=function(e,n){return e[n].content},dPt=function(e,n,r,o,i){var s=e.utils.arrayReplaceAt,a=e.utils.lib.ucmicro,l=new RegExp([a.Z.source,a.P.source,a.Cc.source].join("|"));function c(u,d,f){var p,h=0,y=[];return u.replace(i,function(m,w,x){var $;if(r.hasOwnProperty(m)){if($=r[m],w>0&&!l.test(x[w-1])||w+m.length<x.length&&!l.test(x[w+m.length]))return}else $=m.slice(1,-1);w>h&&(p=new f("text","",0),p.content=u.slice(h,w),y.push(p)),p=new f("emoji","",0),p.markup=$,p.content=n[$],y.push(p),h=w+m.length}),h<u.length&&(p=new f("text","",0),p.content=u.slice(h),y.push(p)),y}return function(d){var f,p,h,y,m,w=d.tokens,x=0;for(p=0,h=w.length;p<h;p++)if(w[p].type==="inline")for(y=w[p].children,f=y.length-1;f>=0;f--)m=y[f],(m.type==="link_open"||m.type==="link_close")&&m.info==="auto"&&(x-=m.nesting),m.type==="text"&&x===0&&o.test(m.content)&&(w[p].children=y=s(y,f,c(m.content,m.level,d.Token)))}};function fPt(t){return t.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var pPt=function(e){var n=e.defs,r;e.enabled.length&&(n=Object.keys(n).reduce(function(l,c){return e.enabled.indexOf(c)>=0&&(l[c]=n[c]),l},{})),r=Object.keys(e.shortcuts).reduce(function(l,c){return n[c]?Array.isArray(e.shortcuts[c])?(e.shortcuts[c].forEach(function(u){l[u]=c}),l):(l[e.shortcuts[c]]=c,l):l},{});var o=Object.keys(n),i;o.length===0?i="^$":i=o.map(function(l){return":"+l+":"}).concat(Object.keys(r)).sort().reverse().map(function(l){return fPt(l)}).join("|");var s=RegExp(i),a=RegExp(i,"g");return{defs:n,shortcuts:r,scanRE:s,replaceRE:a}},hPt=uPt,mPt=dPt,gPt=pPt,yPt=function(e,n){var r={defs:{},shortcuts:{},enabled:[]},o=gPt(e.utils.assign({},r,n||{}));e.renderer.rules.emoji=hPt,e.core.ruler.after("linkify","emoji",mPt(e,o.defs,o.shortcuts,o.scanRE,o.replaceRE))},bPt=Ws(yPt);const vPt=kPt,wPt=$Pt,_Pt={insertEmoji:_z},Kk="emoji",xPt=t=>t.nodes[Kk];function kPt({getEmoji:t,defaultEmojiAlias:e="smiley"}){const{toDOM:n,parseDOM:r}=m0(Kk,{tag:"span",parsingPriority:51,content:o=>t(o.attrs.emojiAlias,o)});return{type:"node",name:Kk,schema:{attrs:{emojiAlias:{default:e}},inline:!0,group:"inline",draggable:!0,atom:!0,toDOM:n,parseDOM:r},markdown:{toMarkdown:(o,i)=>{o.write(`:${i.attrs.emojiAlias}:`)},parseMarkdown:{emoji:{node:"emoji",getAttrs:o=>({emojiAlias:o.markup})}}}}}function $Pt({keybindings:t={}}={}){return()=>[]}function _z(t){return function(e,n){let r=xPt(e.schema),{$from:o}=e.selection,i=o.index();if(!o.parent.canReplaceWith(i,i,r))return!1;if(n){const s={emojiAlias:t};n(e.tr.replaceSelectionWith(r.create(s)))}return!0}}var JO=Object.freeze({__proto__:null,spec:vPt,plugins:wPt,commands:_Pt,insertEmoji:_z});const SPt=bPt,a1={item:void 0,coords:void 0};function EPt(t,e){const n=Ob(e);let r=0;for(let o=0;o<t[0];o++)r+=n[o].length;return r+=t[1],r}function xz(t,e){const n=Ob(e);let r=NPt(t,n);if(r!=null)for(let o=0;o<n.length;o++){const i=n[o].length;if(r<i)return[o,r];r=r-i}}function kz(t,e){const n=xz(t,e);return n?{item:Ob(e)[n[0]][n[1]],coords:n}:a1}function CPt(t,e=1,n,r){const{coords:o}=APt(t,e,n,r);return o==null?null:EPt(o,r)}function TPt(t,e,n=1){let r=t+n;if(e.length!==0){for(;r<0;)r+=e.length;return r=r%e.length,r}}function $z({rowWidth:t,squareMargin:e,squareSide:n}){const r=n+2*e,o=Math.floor((t-2)/r);return{containerWidth:o*r,rowCount:o}}function APt(t,e=1,n,r){const o=xz(t,r);if(!o)return a1;const i=Ob(r),s=o[0],a=o[1],l=i[s].length,c=e===1?a+n:a-n;if(c<l&&c>=0)return{item:i[s][c],coords:[s,c]};const u=TPt(s,i,c>=l?1:-1);if(u==null)return a1;const d=i[u],f=e===1?0:d.length-1,p=d[f];return p==null?a1:{item:p,coords:[u,f]}}function Ob(t){return t.map(e=>e.emojis)}function NPt(t,e){const n=e.reduce((r,o)=>r+o.length,0);if(n!==0){for(;t<0;)t+=n;return t=t%n,t}}const{decrementSuggestTooltipCounter:RPt,incrementSuggestTooltipCounter:PPt,updateSuggestTooltipCounter:OPt,removeSuggestMark:XO,resetSuggestTooltipCounter:IPt,defaultKeys:DPt}=ho,MPt=zPt,LPt=qPt,FPt={queryTriggerText:Vy,selectEmoji:Ib},BPt=":",jPt=2e3;function zPt({markName:t,trigger:e=BPt}){return{...ho.spec({markName:t,trigger:e}),options:{trigger:e}}}function qPt({key:t=new vt("emojiSuggestMenu"),markName:e,tooltipRenderOpts:n={},getEmojiGroups:r,maxItems:o=jPt,squareSide:i=32,squareMargin:s=2,rowWidth:a=400}){return({schema:l,specRegistry:c})=>{const{trigger:u}=c.options[e],d=new vt("suggestTooltipKey"),f=nb(n.tooltipDOMSpec),p=()=>f.dom.getAttribute("data-popper-placement")==="top-start";if(!l.marks[e])throw Po(`Couldn't find the markName:${e}, please make sure you have initialized to use the same markName you initialized the spec with`),new Error(`markName ${e} not found`);const h=U$(6),y=m=>(w,x,$)=>{if(requestAnimationFrame(()=>{const F=document.getElementById(h);F&&("scrollIntoViewIfNeeded"in document.body?F.scrollIntoViewIfNeeded(!1):F.scrollIntoView&&F.scrollIntoView(!1)),$==null||$.focus()}),m==="LEFT")return RPt(d)(w,x,$);if(m==="RIGHT")return PPt(d)(w,x,$);const S=m==="UP"?!p():p(),I=r(Vy(t)(w)),{counter:E}=d.getState(w),{rowCount:L}=$z({rowWidth:a,squareMargin:s,squareSide:i}),T=CPt(E,S?-1:1,L,I);return T==null?!1:OPt(d,T)(w,x,$)};return[H$(t,{getEmojiGroups:r,maxItems:o,tooltipContentDOM:f.contentDOM,markName:e,squareSide:i,squareMargin:s,selectedEmojiSquareId:h,rowWidth:a,suggestTooltipKey:d}),ho.plugins({key:d,markName:e,trigger:u,tooltipRenderOpts:{...n,tooltipDOMSpec:f},keybindings:{...DPt,left:"ArrowLeft",right:"ArrowRight"},onEnter:(m,w,x)=>{const $=r(Vy(t)(m));if($.flatMap(T=>T.emojis).length===0)return XO(t)(m,w,x);const{counter:I}=d.getState(m),{item:E}=kz(I,$);if(!E)return XO(t)(m,w,x);const L=E[0];return x&&no(x,IPt(d)),Ib(t,L)(m,w,x)},onArrowDown:y("DOWN"),onArrowUp:y("UP"),onArrowLeft:y("LEFT"),onArrowRight:y("RIGHT")})]}}function JC(t){return e=>t.getState(e).suggestTooltipKey}function Vy(t){return e=>{const n=JC(t)(e);return ho.queryTriggerText(n)(e)}}function Ib(t,e){return(n,r,o)=>{const i=Ee(n,"emoji").create({emojiAlias:e}),s=JC(t)(n);return ho.replaceSuggestMarkWith(s,i)(n,r,o)}}var QO=Object.freeze({__proto__:null,spec:MPt,plugins:LPt,commands:FPt,getSuggestTooltipKey:JC,queryTriggerText:Vy,selectEmoji:Ib});const XC="@bangle.io/inline-emoji",Sz=new vt(XC+"SuggestKey"),eI=A0(XC)+"-emojiSuggest";var WPt=[["grinning","",0],["smiley","",1],["smile","",2],["grin","",3],["laughing","",4],["satisfied","",4],["sweat_smile","",5],["rofl","",6],["joy","",7],["slightly_smiling_face","",8],["upside_down_face","",9],["wink","",10],["blush","",11],["innocent","",12],["smiling_face_with_three_hearts","",13],["heart_eyes","",14],["star_struck","",15],["kissing_heart","",16],["kissing","",17],["relaxed","",18],["kissing_closed_eyes","",19],["kissing_smiling_eyes","",20],["smiling_face_with_tear","",21],["yum","",22],["stuck_out_tongue","",23],["stuck_out_tongue_winking_eye","",24],["zany_face","",25],["stuck_out_tongue_closed_eyes","",26],["money_mouth_face","",27],["hugs","",28],["hand_over_mouth","",29],["shushing_face","",30],["thinking","",31],["zipper_mouth_face","",32],["raised_eyebrow","",33],["neutral_face","",34],["expressionless","",35],["no_mouth","",36],["smirk","",37],["unamused","",38],["roll_eyes","",39],["grimacing","",40],["lying_face","",41],["relieved","",42],["pensive","",43],["sleepy","",44],["drooling_face","",45],["sleeping","",46],["mask","",47],["face_with_thermometer","",48],["face_with_head_bandage","",49],["nauseated_face","",50],["vomiting_face","",51],["sneezing_face","",52],["hot_face","",53],["cold_face","",54],["woozy_face","",55],["dizzy_face","",56],["exploding_head","",57],["cowboy_hat_face","",58],["partying_face","",59],["disguised_face","",60],["sunglasses","",61],["nerd_face","",62],["monocle_face","",63],["confused","",64],["worried","",65],["slightly_frowning_face","",66],["frowning_face","",67],["open_mouth","",68],["hushed","",69],["astonished","",70],["flushed","",71],["pleading_face","",72],["frowning","",73],["anguished","",74],["fearful","",75],["cold_sweat","",76],["disappointed_relieved","",77],["cry","",78],["sob","",79],["scream","",80],["confounded","",81],["persevere","",82],["disappointed","",83],["sweat","",84],["weary","",85],["tired_face","",86],["yawning_face","",87],["triumph","",88],["rage","",89],["pout","",89],["angry","",90],["cursing_face","",91],["smiling_imp","",92],["imp","",93],["skull","",94],["skull_and_crossbones","",95],["hankey","",96],["poop","",96],["shit","",96],["clown_face","",97],["japanese_ogre","",98],["japanese_goblin","",99],["ghost","",100],["alien","",101],["space_invader","",102],["robot","",103],["smiley_cat","",104],["smile_cat","",105],["joy_cat","",106],["heart_eyes_cat","",107],["smirk_cat","",108],["kissing_cat","",109],["scream_cat","",110],["crying_cat_face","",111],["pouting_cat","",112],["see_no_evil","",113],["hear_no_evil","",114],["speak_no_evil","",115],["kiss","",116],["love_letter","",117],["cupid","",118],["gift_heart","",119],["sparkling_heart","",120],["heartpulse","",121],["heartbeat","",122],["revolving_hearts","",123],["two_hearts","",124],["heart_decoration","",125],["heavy_heart_exclamation","",126],["broken_heart","",127],["heart","",128],["orange_heart","",129],["yellow_heart","",130],["green_heart","",131],["blue_heart","",132],["purple_heart","",133],["brown_heart","",134],["black_heart","",135],["white_heart","",136],["100","",137],["anger","",138],["boom","",139],["collision","",139],["dizzy","",140],["sweat_drops","",141],["dash","",142],["hole","",143],["bomb","",144],["speech_balloon","",145],["eye_speech_bubble","",146],["left_speech_bubble","",147],["right_anger_bubble","",148],["thought_balloon","",149],["zzz","",150],["wave","",151],["raised_back_of_hand","",152],["raised_hand_with_fingers_splayed","",153],["hand","",154],["raised_hand","",154],["vulcan_salute","",155],["ok_hand","",156],["pinched_fingers","",157],["pinching_hand","",158],["v","",159],["crossed_fingers","",160],["love_you_gesture","",161],["metal","",162],["call_me_hand","",163],["point_left","",164],["point_right","",165],["point_up_2","",166],["middle_finger","",167],["fu","",167],["point_down","",168],["point_up","",169],["+1","",170],["thumbsup","",170],["-1","",171],["thumbsdown","",171],["fist_raised","",172],["fist","",172],["fist_oncoming","",173],["facepunch","",173],["punch","",173],["fist_left","",174],["fist_right","",175],["clap","",176],["raised_hands","",177],["open_hands","",178],["palms_up_together","",179],["handshake","",180],["pray","",181],["writing_hand","",182],["nail_care","",183],["selfie","",184],["muscle","",185],["mechanical_arm","",186],["mechanical_leg","",187],["leg","",188],["foot","",189],["ear","",190],["ear_with_hearing_aid","",191],["nose","",192],["brain","",193],["anatomical_heart","",194],["lungs","",195],["tooth","",196],["bone","",197],["eyes","",198],["eye","",199],["tongue","",200],["lips","",201],["baby","",202],["child","",203],["boy","",204],["girl","",205],["adult","",206],["blond_haired_person","",207],["man","",208],["bearded_person","",209],["red_haired_man","",210],["curly_haired_man","",211],["white_haired_man","",212],["bald_man","",213],["woman","",214],["red_haired_woman","",215],["person_red_hair","",216],["curly_haired_woman","",217],["person_curly_hair","",218],["white_haired_woman","",219],["person_white_hair","",220],["bald_woman","",221],["person_bald","",222],["blond_haired_woman","",223],["blonde_woman","",223],["blond_haired_man","",224],["older_adult","",225],["older_man","",226],["older_woman","",227],["frowning_person","",228],["frowning_man","",229],["frowning_woman","",230],["pouting_face","",231],["pouting_man","",232],["pouting_woman","",233],["no_good","",234],["no_good_man","",235],["ng_man","",235],["no_good_woman","",236],["ng_woman","",236],["ok_person","",237],["ok_man","",238],["ok_woman","",239],["tipping_hand_person","",240],["information_desk_person","",240],["tipping_hand_man","",241],["sassy_man","",241],["tipping_hand_woman","",242],["sassy_woman","",242],["raising_hand","",243],["raising_hand_man","",244],["raising_hand_woman","",245],["deaf_person","",246],["deaf_man","",247],["deaf_woman","",248],["bow","",249],["bowing_man","",250],["bowing_woman","",251],["facepalm","",252],["man_facepalming","",253],["woman_facepalming","",254],["shrug","",255],["man_shrugging","",256],["woman_shrugging","",257],["health_worker","",258],["man_health_worker","",259],["woman_health_worker","",260],["student","",261],["man_student","",262],["woman_student","",263],["teacher","",264],["man_teacher","",265],["woman_teacher","",266],["judge","",267],["man_judge","",268],["woman_judge","",269],["farmer","",270],["man_farmer","",271],["woman_farmer","",272],["cook","",273],["man_cook","",274],["woman_cook","",275],["mechanic","",276],["man_mechanic","",277],["woman_mechanic","",278],["factory_worker","",279],["man_factory_worker","",280],["woman_factory_worker","",281],["office_worker","",282],["man_office_worker","",283],["woman_office_worker","",284],["scientist","",285],["man_scientist","",286],["woman_scientist","",287],["technologist","",288],["man_technologist","",289],["woman_technologist","",290],["singer","",291],["man_singer","",292],["woman_singer","",293],["artist","",294],["man_artist","",295],["woman_artist","",296],["pilot","",297],["man_pilot","",298],["woman_pilot","",299],["astronaut","",300],["man_astronaut","",301],["woman_astronaut","",302],["firefighter","",303],["man_firefighter","",304],["woman_firefighter","",305],["police_officer","",306],["cop","",306],["policeman","",307],["policewoman","",308],["detective","",309],["male_detective","",310],["female_detective","",311],["guard","",312],["guardsman","",313],["guardswoman","",314],["ninja","",315],["construction_worker","",316],["construction_worker_man","",317],["construction_worker_woman","",318],["prince","",319],["princess","",320],["person_with_turban","",321],["man_with_turban","",322],["woman_with_turban","",323],["man_with_gua_pi_mao","",324],["woman_with_headscarf","",325],["person_in_tuxedo","",326],["man_in_tuxedo","",327],["woman_in_tuxedo","",328],["person_with_veil","",329],["man_with_veil","",330],["woman_with_veil","",331],["bride_with_veil","",331],["pregnant_woman","",332],["breast_feeding","",333],["woman_feeding_baby","",334],["man_feeding_baby","",335],["person_feeding_baby","",336],["angel","",337],["santa","",338],["mrs_claus","",339],["mx_claus","",340],["superhero","",341],["superhero_man","",342],["superhero_woman","",343],["supervillain","",344],["supervillain_man","",345],["supervillain_woman","",346],["mage","",347],["mage_man","",348],["mage_woman","",349],["fairy","",350],["fairy_man","",351],["fairy_woman","",352],["vampire","",353],["vampire_man","",354],["vampire_woman","",355],["merperson","",356],["merman","",357],["mermaid","",358],["elf","",359],["elf_man","",360],["elf_woman","",361],["genie","",362],["genie_man","",363],["genie_woman","",364],["zombie","",365],["zombie_man","",366],["zombie_woman","",367],["massage","",368],["massage_man","",369],["massage_woman","",370],["haircut","",371],["haircut_man","",372],["haircut_woman","",373],["walking","",374],["walking_man","",375],["walking_woman","",376],["standing_person","",377],["standing_man","",378],["standing_woman","",379],["kneeling_person","",380],["kneeling_man","",381],["kneeling_woman","",382],["person_with_probing_cane","",383],["man_with_probing_cane","",384],["woman_with_probing_cane","",385],["person_in_motorized_wheelchair","",386],["man_in_motorized_wheelchair","",387],["woman_in_motorized_wheelchair","",388],["person_in_manual_wheelchair","",389],["man_in_manual_wheelchair","",390],["woman_in_manual_wheelchair","",391],["runner","",392],["running","",392],["running_man","",393],["running_woman","",394],["woman_dancing","",395],["dancer","",395],["man_dancing","",396],["business_suit_levitating","",397],["dancers","",398],["dancing_men","",399],["dancing_women","",400],["sauna_person","",401],["sauna_man","",402],["sauna_woman","",403],["climbing","",404],["climbing_man","",405],["climbing_woman","",406],["person_fencing","",407],["horse_racing","",408],["skier","",409],["snowboarder","",410],["golfing","",411],["golfing_man","",412],["golfing_woman","",413],["surfer","",414],["surfing_man","",415],["surfing_woman","",416],["rowboat","",417],["rowing_man","",418],["rowing_woman","",419],["swimmer","",420],["swimming_man","",421],["swimming_woman","",422],["bouncing_ball_person","",423],["bouncing_ball_man","",424],["basketball_man","",424],["bouncing_ball_woman","",425],["basketball_woman","",425],["weight_lifting","",426],["weight_lifting_man","",427],["weight_lifting_woman","",428],["bicyclist","",429],["biking_man","",430],["biking_woman","",431],["mountain_bicyclist","",432],["mountain_biking_man","",433],["mountain_biking_woman","",434],["cartwheeling","",435],["man_cartwheeling","",436],["woman_cartwheeling","",437],["wrestling","",438],["men_wrestling","",439],["women_wrestling","",440],["water_polo","",441],["man_playing_water_polo","",442],["woman_playing_water_polo","",443],["handball_person","",444],["man_playing_handball","",445],["woman_playing_handball","",446],["juggling_person","",447],["man_juggling","",448],["woman_juggling","",449],["lotus_position","",450],["lotus_position_man","",451],["lotus_position_woman","",452],["bath","",453],["sleeping_bed","",454],["people_holding_hands","",455],["two_women_holding_hands","",456],["couple","",457],["two_men_holding_hands","",458],["couplekiss","",459],["couplekiss_man_woman","",460],["couplekiss_man_man","",461],["couplekiss_woman_woman","",462],["couple_with_heart","",463],["couple_with_heart_woman_man","",464],["couple_with_heart_man_man","",465],["couple_with_heart_woman_woman","",466],["family","",467],["family_man_woman_boy","",468],["family_man_woman_girl","",469],["family_man_woman_girl_boy","",470],["family_man_woman_boy_boy","",471],["family_man_woman_girl_girl","",472],["family_man_man_boy","",473],["family_man_man_girl","",474],["family_man_man_girl_boy","",475],["family_man_man_boy_boy","",476],["family_man_man_girl_girl","",477],["family_woman_woman_boy","",478],["family_woman_woman_girl","",479],["family_woman_woman_girl_boy","",480],["family_woman_woman_boy_boy","",481],["family_woman_woman_girl_girl","",482],["family_man_boy","",483],["family_man_boy_boy","",484],["family_man_girl","",485],["family_man_girl_boy","",486],["family_man_girl_girl","",487],["family_woman_boy","",488],["family_woman_boy_boy","",489],["family_woman_girl","",490],["family_woman_girl_boy","",491],["family_woman_girl_girl","",492],["speaking_head","",493],["bust_in_silhouette","",494],["busts_in_silhouette","",495],["people_hugging","",496],["footprints","",497],["monkey_face","",498],["monkey","",499],["gorilla","",500],["orangutan","",501],["dog","",502],["dog2","",503],["guide_dog","",504],["service_dog","",505],["poodle","",506],["wolf","",507],["fox_face","",508],["raccoon","",509],["cat","",510],["cat2","",511],["black_cat","",512],["lion","",513],["tiger","",514],["tiger2","",515],["leopard","",516],["horse","",517],["racehorse","",518],["unicorn","",519],["zebra","",520],["deer","",521],["bison","",522],["cow","",523],["ox","",524],["water_buffalo","",525],["cow2","",526],["pig","",527],["pig2","",528],["boar","",529],["pig_nose","",530],["ram","",531],["sheep","",532],["goat","",533],["dromedary_camel","",534],["camel","",535],["llama","",536],["giraffe","",537],["elephant","",538],["mammoth","",539],["rhinoceros","",540],["hippopotamus","",541],["mouse","",542],["mouse2","",543],["rat","",544],["hamster","",545],["rabbit","",546],["rabbit2","",547],["chipmunk","",548],["beaver","",549],["hedgehog","",550],["bat","",551],["bear","",552],["polar_bear","",553],["koala","",554],["panda_face","",555],["sloth","",556],["otter","",557],["skunk","",558],["kangaroo","",559],["badger","",560],["feet","",561],["paw_prints","",561],["turkey","",562],["chicken","",563],["rooster","",564],["hatching_chick","",565],["baby_chick","",566],["hatched_chick","",567],["bird","",568],["penguin","",569],["dove","",570],["eagle","",571],["duck","",572],["swan","",573],["owl","",574],["dodo","",575],["feather","",576],["flamingo","",577],["peacock","",578],["parrot","",579],["frog","",580],["crocodile","",581],["turtle","",582],["lizard","",583],["snake","",584],["dragon_face","",585],["dragon","",586],["sauropod","",587],["t-rex","",588],["whale","",589],["whale2","",590],["dolphin","",591],["flipper","",591],["seal","",592],["fish","",593],["tropical_fish","",594],["blowfish","",595],["shark","",596],["octopus","",597],["shell","",598],["snail","",599],["butterfly","",600],["bug","",601],["ant","",602],["bee","",603],["honeybee","",603],["beetle","",604],["lady_beetle","",605],["cricket","",606],["cockroach","",607],["spider","",608],["spider_web","",609],["scorpion","",610],["mosquito","",611],["fly","",612],["worm","",613],["microbe","",614],["bouquet","",615],["cherry_blossom","",616],["white_flower","",617],["rosette","",618],["rose","",619],["wilted_flower","",620],["hibiscus","",621],["sunflower","",622],["blossom","",623],["tulip","",624],["seedling","",625],["potted_plant","",626],["evergreen_tree","",627],["deciduous_tree","",628],["palm_tree","",629],["cactus","",630],["ear_of_rice","",631],["herb","",632],["shamrock","",633],["four_leaf_clover","",634],["maple_leaf","",635],["fallen_leaf","",636],["leaves","",637],["grapes","",638],["melon","",639],["watermelon","",640],["tangerine","",641],["orange","",641],["mandarin","",641],["lemon","",642],["banana","",643],["pineapple","",644],["mango","",645],["apple","",646],["green_apple","",647],["pear","",648],["peach","",649],["cherries","",650],["strawberry","",651],["blueberries","",652],["kiwi_fruit","",653],["tomato","",654],["olive","",655],["coconut","",656],["avocado","",657],["eggplant","",658],["potato","",659],["carrot","",660],["corn","",661],["hot_pepper","",662],["bell_pepper","",663],["cucumber","",664],["leafy_green","",665],["broccoli","",666],["garlic","",667],["onion","",668],["mushroom","",669],["peanuts","",670],["chestnut","",671],["bread","",672],["croissant","",673],["baguette_bread","",674],["flatbread","",675],["pretzel","",676],["bagel","",677],["pancakes","",678],["waffle","",679],["cheese","",680],["meat_on_bone","",681],["poultry_leg","",682],["cut_of_meat","",683],["bacon","",684],["hamburger","",685],["fries","",686],["pizza","",687],["hotdog","",688],["sandwich","",689],["taco","",690],["burrito","",691],["tamale","",692],["stuffed_flatbread","",693],["falafel","",694],["egg","",695],["fried_egg","",696],["shallow_pan_of_food","",697],["stew","",698],["fondue","",699],["bowl_with_spoon","",700],["green_salad","",701],["popcorn","",702],["butter","",703],["salt","",704],["canned_food","",705],["bento","",706],["rice_cracker","",707],["rice_ball","",708],["rice","",709],["curry","",710],["ramen","",711],["spaghetti","",712],["sweet_potato","",713],["oden","",714],["sushi","",715],["fried_shrimp","",716],["fish_cake","",717],["moon_cake","",718],["dango","",719],["dumpling","",720],["fortune_cookie","",721],["takeout_box","",722],["crab","",723],["lobster","",724],["shrimp","",725],["squid","",726],["oyster","",727],["icecream","",728],["shaved_ice","",729],["ice_cream","",730],["doughnut","",731],["cookie","",732],["birthday","",733],["cake","",734],["cupcake","",735],["pie","",736],["chocolate_bar","",737],["candy","",738],["lollipop","",739],["custard","",740],["honey_pot","",741],["baby_bottle","",742],["milk_glass","",743],["coffee","",744],["teapot","",745],["tea","",746],["sake","",747],["champagne","",748],["wine_glass","",749],["cocktail","",750],["tropical_drink","",751],["beer","",752],["beers","",753],["clinking_glasses","",754],["tumbler_glass","",755],["cup_with_straw","",756],["bubble_tea","",757],["beverage_box","",758],["mate","",759],["ice_cube","",760],["chopsticks","",761],["plate_with_cutlery","",762],["fork_and_knife","",763],["spoon","",764],["hocho","",765],["knife","",765],["amphora","",766],["earth_africa","",767],["earth_americas","",768],["earth_asia","",769],["globe_with_meridians","",770],["world_map","",771],["japan","",772],["compass","",773],["mountain_snow","",774],["mountain","",775],["volcano","",776],["mount_fuji","",777],["camping","",778],["beach_umbrella","",779],["desert","",780],["desert_island","",781],["national_park","",782],["stadium","",783],["classical_building","",784],["building_construction","",785],["bricks","",786],["rock","",787],["wood","",788],["hut","",789],["houses","",790],["derelict_house","",791],["house","",792],["house_with_garden","",793],["office","",794],["post_office","",795],["european_post_office","",796],["hospital","",797],["bank","",798],["hotel","",799],["love_hotel","",800],["convenience_store","",801],["school","",802],["department_store","",803],["factory","",804],["japanese_castle","",805],["european_castle","",806],["wedding","",807],["tokyo_tower","",808],["statue_of_liberty","",809],["church","",810],["mosque","",811],["hindu_temple","",812],["synagogue","",813],["shinto_shrine","",814],["kaaba","",815],["fountain","",816],["tent","",817],["foggy","",818],["night_with_stars","",819],["cityscape","",820],["sunrise_over_mountains","",821],["sunrise","",822],["city_sunset","",823],["city_sunrise","",824],["bridge_at_night","",825],["hotsprings","",826],["carousel_horse","",827],["ferris_wheel","",828],["roller_coaster","",829],["barber","",830],["circus_tent","",831],["steam_locomotive","",832],["railway_car","",833],["bullettrain_side","",834],["bullettrain_front","",835],["train2","",836],["metro","",837],["light_rail","",838],["station","",839],["tram","",840],["monorail","",841],["mountain_railway","",842],["train","",843],["bus","",844],["oncoming_bus","",845],["trolleybus","",846],["minibus","",847],["ambulance","",848],["fire_engine","",849],["police_car","",850],["oncoming_police_car","",851],["taxi","",852],["oncoming_taxi","",853],["car","",854],["red_car","",854],["oncoming_automobile","",855],["blue_car","",856],["pickup_truck","",857],["truck","",858],["articulated_lorry","",859],["tractor","",860],["racing_car","",861],["motorcycle","",862],["motor_scooter","",863],["manual_wheelchair","",864],["motorized_wheelchair","",865],["auto_rickshaw","",866],["bike","",867],["kick_scooter","",868],["skateboard","",869],["roller_skate","",870],["busstop","",871],["motorway","",872],["railway_track","",873],["oil_drum","",874],["fuelpump","",875],["rotating_light","",876],["traffic_light","",877],["vertical_traffic_light","",878],["stop_sign","",879],["construction","",880],["anchor","",881],["boat","",882],["sailboat","",882],["canoe","",883],["speedboat","",884],["passenger_ship","",885],["ferry","",886],["motor_boat","",887],["ship","",888],["airplane","",889],["small_airplane","",890],["flight_departure","",891],["flight_arrival","",892],["parachute","",893],["seat","",894],["helicopter","",895],["suspension_railway","",896],["mountain_cableway","",897],["aerial_tramway","",898],["artificial_satellite","",899],["rocket","",900],["flying_saucer","",901],["bellhop_bell","",902],["luggage","",903],["hourglass","",904],["hourglass_flowing_sand","",905],["watch","",906],["alarm_clock","",907],["stopwatch","",908],["timer_clock","",909],["mantelpiece_clock","",910],["clock12","",911],["clock1230","",912],["clock1","",913],["clock130","",914],["clock2","",915],["clock230","",916],["clock3","",917],["clock330","",918],["clock4","",919],["clock430","",920],["clock5","",921],["clock530","",922],["clock6","",923],["clock630","",924],["clock7","",925],["clock730","",926],["clock8","",927],["clock830","",928],["clock9","",929],["clock930","",930],["clock10","",931],["clock1030","",932],["clock11","",933],["clock1130","",934],["new_moon","",935],["waxing_crescent_moon","",936],["first_quarter_moon","",937],["moon","",938],["waxing_gibbous_moon","",938],["full_moon","",939],["waning_gibbous_moon","",940],["last_quarter_moon","",941],["waning_crescent_moon","",942],["crescent_moon","",943],["new_moon_with_face","",944],["first_quarter_moon_with_face","",945],["last_quarter_moon_with_face","",946],["thermometer","",947],["sunny","",948],["full_moon_with_face","",949],["sun_with_face","",950],["ringed_planet","",951],["star","",952],["star2","",953],["stars","",954],["milky_way","",955],["cloud","",956],["partly_sunny","",957],["cloud_with_lightning_and_rain","",958],["sun_behind_small_cloud","",959],["sun_behind_large_cloud","",960],["sun_behind_rain_cloud","",961],["cloud_with_rain","",962],["cloud_with_snow","",963],["cloud_with_lightning","",964],["tornado","",965],["fog","",966],["wind_face","",967],["cyclone","",968],["rainbow","",969],["closed_umbrella","",970],["open_umbrella","",971],["umbrella","",972],["parasol_on_ground","",973],["zap","",974],["snowflake","",975],["snowman_with_snow","",976],["snowman","",977],["comet","",978],["fire","",979],["droplet","",980],["ocean","",981],["jack_o_lantern","",982],["christmas_tree","",983],["fireworks","",984],["sparkler","",985],["firecracker","",986],["sparkles","",987],["balloon","",988],["tada","",989],["confetti_ball","",990],["tanabata_tree","",991],["bamboo","",992],["dolls","",993],["flags","",994],["wind_chime","",995],["rice_scene","",996],["red_envelope","",997],["ribbon","",998],["gift","",999],["reminder_ribbon","",1e3],["tickets","",1001],["ticket","",1002],["medal_military","",1003],["trophy","",1004],["medal_sports","",1005],["1st_place_medal","",1006],["2nd_place_medal","",1007],["3rd_place_medal","",1008],["soccer","",1009],["baseball","",1010],["softball","",1011],["basketball","",1012],["volleyball","",1013],["football","",1014],["rugby_football","",1015],["tennis","",1016],["flying_disc","",1017],["bowling","",1018],["cricket_game","",1019],["field_hockey","",1020],["ice_hockey","",1021],["lacrosse","",1022],["ping_pong","",1023],["badminton","",1024],["boxing_glove","",1025],["martial_arts_uniform","",1026],["goal_net","",1027],["golf","",1028],["ice_skate","",1029],["fishing_pole_and_fish","",1030],["diving_mask","",1031],["running_shirt_with_sash","",1032],["ski","",1033],["sled","",1034],["curling_stone","",1035],["dart","",1036],["yo_yo","",1037],["kite","",1038],["8ball","",1039],["crystal_ball","",1040],["magic_wand","",1041],["nazar_amulet","",1042],["video_game","",1043],["joystick","",1044],["slot_machine","",1045],["game_die","",1046],["jigsaw","",1047],["teddy_bear","",1048],["pi_ata","",1049],["nesting_dolls","",1050],["spades","",1051],["hearts","",1052],["diamonds","",1053],["clubs","",1054],["chess_pawn","",1055],["black_joker","",1056],["mahjong","",1057],["flower_playing_cards","",1058],["performing_arts","",1059],["framed_picture","",1060],["art","",1061],["thread","",1062],["sewing_needle","",1063],["yarn","",1064],["knot","",1065],["eyeglasses","",1066],["dark_sunglasses","",1067],["goggles","",1068],["lab_coat","",1069],["safety_vest","",1070],["necktie","",1071],["shirt","",1072],["tshirt","",1072],["jeans","",1073],["scarf","",1074],["gloves","",1075],["coat","",1076],["socks","",1077],["dress","",1078],["kimono","",1079],["sari","",1080],["one_piece_swimsuit","",1081],["swim_brief","",1082],["shorts","",1083],["bikini","",1084],["womans_clothes","",1085],["purse","",1086],["handbag","",1087],["pouch","",1088],["shopping","",1089],["school_satchel","",1090],["thong_sandal","",1091],["mans_shoe","",1092],["shoe","",1092],["athletic_shoe","",1093],["hiking_boot","",1094],["flat_shoe","",1095],["high_heel","",1096],["sandal","",1097],["ballet_shoes","",1098],["boot","",1099],["crown","",1100],["womans_hat","",1101],["tophat","",1102],["mortar_board","",1103],["billed_cap","",1104],["military_helmet","",1105],["rescue_worker_helmet","",1106],["prayer_beads","",1107],["lipstick","",1108],["ring","",1109],["gem","",1110],["mute","",1111],["speaker","",1112],["sound","",1113],["loud_sound","",1114],["loudspeaker","",1115],["mega","",1116],["postal_horn","",1117],["bell","",1118],["no_bell","",1119],["musical_score","",1120],["musical_note","",1121],["notes","",1122],["studio_microphone","",1123],["level_slider","",1124],["control_knobs","",1125],["microphone","",1126],["headphones","",1127],["radio","",1128],["saxophone","",1129],["accordion","",1130],["guitar","",1131],["musical_keyboard","",1132],["trumpet","",1133],["violin","",1134],["banjo","",1135],["drum","",1136],["long_drum","",1137],["iphone","",1138],["calling","",1139],["phone","",1140],["telephone","",1140],["telephone_receiver","",1141],["pager","",1142],["fax","",1143],["battery","",1144],["electric_plug","",1145],["computer","",1146],["desktop_computer","",1147],["printer","",1148],["keyboard","",1149],["computer_mouse","",1150],["trackball","",1151],["minidisc","",1152],["floppy_disk","",1153],["cd","",1154],["dvd","",1155],["abacus","",1156],["movie_camera","",1157],["film_strip","",1158],["film_projector","",1159],["clapper","",1160],["tv","",1161],["camera","",1162],["camera_flash","",1163],["video_camera","",1164],["vhs","",1165],["mag","",1166],["mag_right","",1167],["candle","",1168],["bulb","",1169],["flashlight","",1170],["izakaya_lantern","",1171],["lantern","",1171],["diya_lamp","",1172],["notebook_with_decorative_cover","",1173],["closed_book","",1174],["book","",1175],["open_book","",1175],["green_book","",1176],["blue_book","",1177],["orange_book","",1178],["books","",1179],["notebook","",1180],["ledger","",1181],["page_with_curl","",1182],["scroll","",1183],["page_facing_up","",1184],["newspaper","",1185],["newspaper_roll","",1186],["bookmark_tabs","",1187],["bookmark","",1188],["label","",1189],["moneybag","",1190],["coin","",1191],["yen","",1192],["dollar","",1193],["euro","",1194],["pound","",1195],["money_with_wings","",1196],["credit_card","",1197],["receipt","",1198],["chart","",1199],["email","",1200],["envelope","",1200],["e-mail","",1201],["incoming_envelope","",1202],["envelope_with_arrow","",1203],["outbox_tray","",1204],["inbox_tray","",1205],["package","",1206],["mailbox","",1207],["mailbox_closed","",1208],["mailbox_with_mail","",1209],["mailbox_with_no_mail","",1210],["postbox","",1211],["ballot_box","",1212],["pencil2","",1213],["black_nib","",1214],["fountain_pen","",1215],["pen","",1216],["paintbrush","",1217],["crayon","",1218],["memo","",1219],["pencil","",1219],["briefcase","",1220],["file_folder","",1221],["open_file_folder","",1222],["card_index_dividers","",1223],["date","",1224],["calendar","",1225],["spiral_notepad","",1226],["spiral_calendar","",1227],["card_index","",1228],["chart_with_upwards_trend","",1229],["chart_with_downwards_trend","",1230],["bar_chart","",1231],["clipboard","",1232],["pushpin","",1233],["round_pushpin","",1234],["paperclip","",1235],["paperclips","",1236],["straight_ruler","",1237],["triangular_ruler","",1238],["scissors","",1239],["card_file_box","",1240],["file_cabinet","",1241],["wastebasket","",1242],["lock","",1243],["unlock","",1244],["lock_with_ink_pen","",1245],["closed_lock_with_key","",1246],["key","",1247],["old_key","",1248],["hammer","",1249],["axe","",1250],["pick","",1251],["hammer_and_pick","",1252],["hammer_and_wrench","",1253],["dagger","",1254],["crossed_swords","",1255],["gun","",1256],["boomerang","",1257],["bow_and_arrow","",1258],["shield","",1259],["carpentry_saw","",1260],["wrench","",1261],["screwdriver","",1262],["nut_and_bolt","",1263],["gear","",1264],["clamp","",1265],["balance_scale","",1266],["probing_cane","",1267],["link","",1268],["chains","",1269],["hook","",1270],["toolbox","",1271],["magnet","",1272],["ladder","",1273],["alembic","",1274],["test_tube","",1275],["petri_dish","",1276],["dna","",1277],["microscope","",1278],["telescope","",1279],["satellite","",1280],["syringe","",1281],["drop_of_blood","",1282],["pill","",1283],["adhesive_bandage","",1284],["stethoscope","",1285],["door","",1286],["elevator","",1287],["mirror","",1288],["window","",1289],["bed","",1290],["couch_and_lamp","",1291],["chair","",1292],["toilet","",1293],["plunger","",1294],["shower","",1295],["bathtub","",1296],["mouse_trap","",1297],["razor","",1298],["lotion_bottle","",1299],["safety_pin","",1300],["broom","",1301],["basket","",1302],["roll_of_paper","",1303],["bucket","",1304],["soap","",1305],["toothbrush","",1306],["sponge","",1307],["fire_extinguisher","",1308],["shopping_cart","",1309],["smoking","",1310],["coffin","",1311],["headstone","",1312],["funeral_urn","",1313],["moyai","",1314],["placard","",1315],["atm","",1316],["put_litter_in_its_place","",1317],["potable_water","",1318],["wheelchair","",1319],["mens","",1320],["womens","",1321],["restroom","",1322],["baby_symbol","",1323],["wc","",1324],["passport_control","",1325],["customs","",1326],["baggage_claim","",1327],["left_luggage","",1328],["warning","",1329],["children_crossing","",1330],["no_entry","",1331],["no_entry_sign","",1332],["no_bicycles","",1333],["no_smoking","",1334],["do_not_litter","",1335],["non-potable_water","",1336],["no_pedestrians","",1337],["no_mobile_phones","",1338],["underage","",1339],["radioactive","",1340],["biohazard","",1341],["arrow_up","",1342],["arrow_upper_right","",1343],["arrow_right","",1344],["arrow_lower_right","",1345],["arrow_down","",1346],["arrow_lower_left","",1347],["arrow_left","",1348],["arrow_upper_left","",1349],["arrow_up_down","",1350],["left_right_arrow","",1351],["leftwards_arrow_with_hook","",1352],["arrow_right_hook","",1353],["arrow_heading_up","",1354],["arrow_heading_down","",1355],["arrows_clockwise","",1356],["arrows_counterclockwise","",1357],["back","",1358],["end","",1359],["on","",1360],["soon","",1361],["top","",1362],["place_of_worship","",1363],["atom_symbol","",1364],["om","",1365],["star_of_david","",1366],["wheel_of_dharma","",1367],["yin_yang","",1368],["latin_cross","",1369],["orthodox_cross","",1370],["star_and_crescent","",1371],["peace_symbol","",1372],["menorah","",1373],["six_pointed_star","",1374],["aries","",1375],["taurus","",1376],["gemini","",1377],["cancer","",1378],["leo","",1379],["virgo","",1380],["libra","",1381],["scorpius","",1382],["sagittarius","",1383],["capricorn","",1384],["aquarius","",1385],["pisces","",1386],["ophiuchus","",1387],["twisted_rightwards_arrows","",1388],["repeat","",1389],["repeat_one","",1390],["arrow_forward","",1391],["fast_forward","",1392],["next_track_button","",1393],["play_or_pause_button","",1394],["arrow_backward","",1395],["rewind","",1396],["previous_track_button","",1397],["arrow_up_small","",1398],["arrow_double_up","",1399],["arrow_down_small","",1400],["arrow_double_down","",1401],["pause_button","",1402],["stop_button","",1403],["record_button","",1404],["eject_button","",1405],["cinema","",1406],["low_brightness","",1407],["high_brightness","",1408],["signal_strength","",1409],["vibration_mode","",1410],["mobile_phone_off","",1411],["female_sign","",1412],["male_sign","",1413],["transgender_symbol","",1414],["heavy_multiplication_x","",1415],["heavy_plus_sign","",1416],["heavy_minus_sign","",1417],["heavy_division_sign","",1418],["infinity","",1419],["bangbang","",1420],["interrobang","",1421],["question","",1422],["grey_question","",1423],["grey_exclamation","",1424],["exclamation","",1425],["heavy_exclamation_mark","",1425],["wavy_dash","",1426],["currency_exchange","",1427],["heavy_dollar_sign","",1428],["medical_symbol","",1429],["recycle","",1430],["fleur_de_lis","",1431],["trident","",1432],["name_badge","",1433],["beginner","",1434],["o","",1435],["white_check_mark","",1436],["ballot_box_with_check","",1437],["heavy_check_mark","",1438],["x","",1439],["negative_squared_cross_mark","",1440],["curly_loop","",1441],["loop","",1442],["part_alternation_mark","",1443],["eight_spoked_asterisk","",1444],["eight_pointed_black_star","",1445],["sparkle","",1446],["copyright","",1447],["registered","",1448],["tm","",1449],["hash","#",1450],["asterisk","*",1451],["zero","0",1452],["one","1",1453],["two","2",1454],["three","3",1455],["four","4",1456],["five","5",1457],["six","6",1458],["seven","7",1459],["eight","8",1460],["nine","9",1461],["keycap_ten","",1462],["capital_abcd","",1463],["abcd","",1464],["1234","",1465],["symbols","",1466],["abc","",1467],["a","",1468],["ab","",1469],["b","",1470],["cl","",1471],["cool","",1472],["free","",1473],["information_source","",1474],["id","",1475],["m","",1476],["new","",1477],["ng","",1478],["o2","",1479],["ok","",1480],["parking","",1481],["sos","",1482],["up","",1483],["vs","",1484],["koko","",1485],["sa","",1486],["u6708","",1487],["u6709","",1488],["u6307","",1489],["ideograph_advantage","",1490],["u5272","",1491],["u7121","",1492],["u7981","",1493],["accept","",1494],["u7533","",1495],["u5408","",1496],["u7a7a","",1497],["congratulations","",1498],["secret","",1499],["u55b6","",1500],["u6e80","",1501],["red_circle","",1502],["orange_circle","",1503],["yellow_circle","",1504],["green_circle","",1505],["large_blue_circle","",1506],["purple_circle","",1507],["brown_circle","",1508],["black_circle","",1509],["white_circle","",1510],["red_square","",1511],["orange_square","",1512],["yellow_square","",1513],["green_square","",1514],["blue_square","",1515],["purple_square","",1516],["brown_square","",1517],["black_large_square","",1518],["white_large_square","",1519],["black_medium_square","",1520],["white_medium_square","",1521],["black_medium_small_square","",1522],["white_medium_small_square","",1523],["black_small_square","",1524],["white_small_square","",1525],["large_orange_diamond","",1526],["large_blue_diamond","",1527],["small_orange_diamond","",1528],["small_blue_diamond","",1529],["small_red_triangle","",1530],["small_red_triangle_down","",1531],["diamond_shape_with_a_dot_inside","",1532],["radio_button","",1533],["white_square_button","",1534],["black_square_button","",1535],["checkered_flag","",1536],["triangular_flag_on_post","",1537],["crossed_flags","",1538],["black_flag","",1539],["white_flag","",1540],["rainbow_flag","",1541],["transgender_flag","",1542],["pirate_flag","",1543],["ascension_island","",1544],["andorra","",1545],["united_arab_emirates","",1546],["afghanistan","",1547],["antigua_barbuda","",1548],["anguilla","",1549],["albania","",1550],["armenia","",1551],["angola","",1552],["antarctica","",1553],["argentina","",1554],["american_samoa","",1555],["austria","",1556],["australia","",1557],["aruba","",1558],["aland_islands","",1559],["azerbaijan","",1560],["bosnia_herzegovina","",1561],["barbados","",1562],["bangladesh","",1563],["belgium","",1564],["burkina_faso","",1565],["bulgaria","",1566],["bahrain","",1567],["burundi","",1568],["benin","",1569],["st_barthelemy","",1570],["bermuda","",1571],["brunei","",1572],["bolivia","",1573],["caribbean_netherlands","",1574],["brazil","",1575],["bahamas","",1576],["bhutan","",1577],["bouvet_island","",1578],["botswana","",1579],["belarus","",1580],["belize","",1581],["canada","",1582],["cocos_islands","",1583],["congo_kinshasa","",1584],["central_african_republic","",1585],["congo_brazzaville","",1586],["switzerland","",1587],["cote_divoire","",1588],["cook_islands","",1589],["chile","",1590],["cameroon","",1591],["cn","",1592],["colombia","",1593],["clipperton_island","",1594],["costa_rica","",1595],["cuba","",1596],["cape_verde","",1597],["curacao","",1598],["christmas_island","",1599],["cyprus","",1600],["czech_republic","",1601],["de","",1602],["diego_garcia","",1603],["djibouti","",1604],["denmark","",1605],["dominica","",1606],["dominican_republic","",1607],["algeria","",1608],["ceuta_melilla","",1609],["ecuador","",1610],["estonia","",1611],["egypt","",1612],["western_sahara","",1613],["eritrea","",1614],["es","",1615],["ethiopia","",1616],["eu","",1617],["european_union","",1617],["finland","",1618],["fiji","",1619],["falkland_islands","",1620],["micronesia","",1621],["faroe_islands","",1622],["fr","",1623],["gabon","",1624],["gb","",1625],["uk","",1625],["grenada","",1626],["georgia","",1627],["french_guiana","",1628],["guernsey","",1629],["ghana","",1630],["gibraltar","",1631],["greenland","",1632],["gambia","",1633],["guinea","",1634],["guadeloupe","",1635],["equatorial_guinea","",1636],["greece","",1637],["south_georgia_south_sandwich_islands","",1638],["guatemala","",1639],["guam","",1640],["guinea_bissau","",1641],["guyana","",1642],["hong_kong","",1643],["heard_mcdonald_islands","",1644],["honduras","",1645],["croatia","",1646],["haiti","",1647],["hungary","",1648],["canary_islands","",1649],["indonesia","",1650],["ireland","",1651],["israel","",1652],["isle_of_man","",1653],["india","",1654],["british_indian_ocean_territory","",1655],["iraq","",1656],["iran","",1657],["iceland","",1658],["it","",1659],["jersey","",1660],["jamaica","",1661],["jordan","",1662],["jp","",1663],["kenya","",1664],["kyrgyzstan","",1665],["cambodia","",1666],["kiribati","",1667],["comoros","",1668],["st_kitts_nevis","",1669],["north_korea","",1670],["kr","",1671],["kuwait","",1672],["cayman_islands","",1673],["kazakhstan","",1674],["laos","",1675],["lebanon","",1676],["st_lucia","",1677],["liechtenstein","",1678],["sri_lanka","",1679],["liberia","",1680],["lesotho","",1681],["lithuania","",1682],["luxembourg","",1683],["latvia","",1684],["libya","",1685],["morocco","",1686],["monaco","",1687],["moldova","",1688],["montenegro","",1689],["st_martin","",1690],["madagascar","",1691],["marshall_islands","",1692],["macedonia","",1693],["mali","",1694],["myanmar","",1695],["mongolia","",1696],["macau","",1697],["northern_mariana_islands","",1698],["martinique","",1699],["mauritania","",1700],["montserrat","",1701],["malta","",1702],["mauritius","",1703],["maldives","",1704],["malawi","",1705],["mexico","",1706],["malaysia","",1707],["mozambique","",1708],["namibia","",1709],["new_caledonia","",1710],["niger","",1711],["norfolk_island","",1712],["nigeria","",1713],["nicaragua","",1714],["netherlands","",1715],["norway","",1716],["nepal","",1717],["nauru","",1718],["niue","",1719],["new_zealand","",1720],["oman","",1721],["panama","",1722],["peru","",1723],["french_polynesia","",1724],["papua_new_guinea","",1725],["philippines","",1726],["pakistan","",1727],["poland","",1728],["st_pierre_miquelon","",1729],["pitcairn_islands","",1730],["puerto_rico","",1731],["palestinian_territories","",1732],["portugal","",1733],["palau","",1734],["paraguay","",1735],["qatar","",1736],["reunion","",1737],["romania","",1738],["serbia","",1739],["ru","",1740],["rwanda","",1741],["saudi_arabia","",1742],["solomon_islands","",1743],["seychelles","",1744],["sudan","",1745],["sweden","",1746],["singapore","",1747],["st_helena","",1748],["slovenia","",1749],["svalbard_jan_mayen","",1750],["slovakia","",1751],["sierra_leone","",1752],["san_marino","",1753],["senegal","",1754],["somalia","",1755],["suriname","",1756],["south_sudan","",1757],["sao_tome_principe","",1758],["el_salvador","",1759],["sint_maarten","",1760],["syria","",1761],["swaziland","",1762],["tristan_da_cunha","",1763],["turks_caicos_islands","",1764],["chad","",1765],["french_southern_territories","",1766],["togo","",1767],["thailand","",1768],["tajikistan","",1769],["tokelau","",1770],["timor_leste","",1771],["turkmenistan","",1772],["tunisia","",1773],["tonga","",1774],["tr","",1775],["trinidad_tobago","",1776],["tuvalu","",1777],["taiwan","",1778],["tanzania","",1779],["ukraine","",1780],["uganda","",1781],["us_outlying_islands","",1782],["united_nations","",1783],["us","",1784],["uruguay","",1785],["uzbekistan","",1786],["vatican_city","",1787],["st_vincent_grenadines","",1788],["venezuela","",1789],["british_virgin_islands","",1790],["us_virgin_islands","",1791],["vietnam","",1792],["vanuatu","",1793],["wallis_futuna","",1794],["samoa","",1795],["kosovo","",1796],["yemen","",1797],["mayotte","",1798],["south_africa","",1799],["zambia","",1800],["zimbabwe","",1801],["england","",1802],["scotland","",1803],["wales","",1804]];const Ez=WPt.map(t=>[t[0],t[1]]),tI=Object.fromEntries(Ez);function UPt(){return _.jsx(VPt,{emojiSuggestKey:Sz})}function VPt({emojiSuggestKey:t}){const e=qn(),{tooltipContentDOM:n,getEmojiGroups:r,maxItems:o,squareSide:i,squareMargin:s,rowWidth:a,palettePadding:l,selectedEmojiSquareId:c,suggestTooltipKey:u}=gd(t),{counter:d,triggerText:f,show:p}=gd(u);return vl.createPortal(_.jsxs("div",{className:"shadow-2xl bg-colorBgLayerFloat",children:[_.jsx("div",{className:"bangle-emoji-suggest bg-colorBgLayerFloat text-colorNeutralText b-0",style:{padding:l},children:_.jsx("div",{style:{width:a,display:"flex",justifyContent:"center"},children:p&&_.jsx(HPt,{view:e,rowWidth:a,squareMargin:s,squareSide:i,maxItems:o,emojiSuggestKey:t,getEmojiGroups:r,triggerText:f,counter:d,selectedEmojiSquareId:c})})}),_.jsxs(bi,{className:"bg-colorNeutralBgLayerFloat",children:[_.jsxs(Rt,{children:[_.jsx("kbd",{className:"font-normal",children:""})," Navigate"]}),_.jsxs(Rt,{children:[_.jsx("kbd",{className:"font-normal",children:"Enter"})," Select Emoji"]}),_.jsxs(Rt,{children:[_.jsx("kbd",{className:"font-normal",children:"Esc"})," Dismiss"]})]})]}),n)}function HPt({view:t,rowWidth:e,squareMargin:n,squareSide:r,emojiSuggestKey:o,getEmojiGroups:i,triggerText:s,counter:a,selectedEmojiSquareId:l,maxItems:c}){const u=k.useMemo(()=>i(s),[i,s]),{containerWidth:d}=$z({rowWidth:e,squareMargin:n,squareSide:r}),{item:f}=kz(a,u),p=k.useCallback(h=>{Ib(o,h)(t.state,t.dispatch,t)},[t,o]);return k.useEffect(()=>{u.every(h=>h.emojis.length===0)&&ho.removeSuggestMark(o)(t.state,t.dispatch,t)},[u,o,t]),_.jsx("div",{className:"bangle-emoji-suggest-container",style:{width:d},children:u.map(({name:h,emojis:y},m)=>_.jsxs("div",{className:"bangle-emoji-suggest-group",children:[h&&_.jsx("span",{children:h}),_.jsx("div",{children:y.slice(0,c).map(([w,x],$)=>_.jsx(KPt,{isSelected:(f==null?void 0:f[0])===w,emoji:x,emojiAlias:w,onSelectEmoji:p,selectedEmojiSquareId:l,style:{margin:n,width:r,height:r,lineHeight:r+"px",fontSize:Math.max(r-7,4)}},w))})]},h||m))})}function KPt({isSelected:t,emoji:e,emojiAlias:n,onSelectEmoji:r,style:o,selectedEmojiSquareId:i}){return _.jsx("button",{className:`bangle-emoji-square ${t?"bangle-is-selected":""}`,id:t?i:void 0,onClick:s=>{s.preventDefault(),r(n)},style:o,children:e})}const GPt=t=>t.dom.parentElement,ZPt=500;function YPt(t=""){return[{name:"",emojis:Ez.filter(([n])=>n?n.includes(t):!1).slice(0,ZPt)}]}const JPt=zn.create({name:XC,editor:{specs:[JO.spec({getEmoji:t=>tI[t]||""}),QO.spec({markName:eI})],plugins:[JO.plugins(),QO.plugins({key:Sz,getEmojiGroups:t=>YPt(t),markName:eI,tooltipRenderOpts:{getScrollContainer:GPt,placement:"bottom"}})],markdownItPlugins:[[SPt,{defs:tI}]],ReactComponent:UPt}});function Fl(){return Fl=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fl.apply(this,arguments)}function XPt(t,e){if(t==null)return{};var n={},r=Object.keys(t),o,i;for(i=0;i<r.length;i++)o=r[i],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}var QPt=["bottom","height","left","right","top","width"],eOt=function(e,n){return e===void 0&&(e={}),n===void 0&&(n={}),QPt.some(function(r){return e[r]!==n[r]})},ha=new Map,Cz,tOt=function t(){var e=[];ha.forEach(function(n,r){var o=r.getBoundingClientRect();eOt(o,n.rect)&&(n.rect=o,e.push(n))}),e.forEach(function(n){n.callbacks.forEach(function(r){return r(n.rect)})}),Cz=window.requestAnimationFrame(t)};function nOt(t,e){return{observe:function(){var r=ha.size===0;ha.has(t)?ha.get(t).callbacks.push(e):ha.set(t,{rect:void 0,hasRectChanged:!1,callbacks:[e]}),r&&tOt()},unobserve:function(){var r=ha.get(t);if(r){var o=r.callbacks.indexOf(e);o>=0&&r.callbacks.splice(o,1),r.callbacks.length||ha.delete(t),ha.size||cancelAnimationFrame(Cz)}}}}var Hy=typeof window!="undefined"?H.useLayoutEffect:H.useEffect;function rOt(t,e){e===void 0&&(e={width:0,height:0});var n=H.useState(t.current),r=n[0],o=n[1],i=H.useReducer(oOt,e),s=i[0],a=i[1],l=H.useRef(!1);return Hy(function(){t.current!==r&&o(t.current)}),Hy(function(){if(r&&!l.current){l.current=!0;var c=r.getBoundingClientRect();a({rect:c})}},[r]),H.useEffect(function(){if(r){var c=nOt(r,function(u){a({rect:u})});return c.observe(),function(){c.unobserve()}}},[r]),s}function oOt(t,e){var n=e.rect;return t.height!==n.height||t.width!==n.width?n:t}var iOt=function(){return 50},sOt=function(e){return e},aOt=function(e,n){var r=n?"offsetWidth":"offsetHeight";return e[r]},lOt=function(e){for(var n=Math.max(e.start-e.overscan,0),r=Math.min(e.end+e.overscan,e.size-1),o=[],i=n;i<=r;i++)o.push(i);return o};function cOt(t){var e,n=t.size,r=n===void 0?0:n,o=t.estimateSize,i=o===void 0?iOt:o,s=t.overscan,a=s===void 0?1:s,l=t.paddingStart,c=l===void 0?0:l,u=t.paddingEnd,d=u===void 0?0:u,f=t.parentRef,p=t.horizontal,h=t.scrollToFn,y=t.useObserver,m=t.initialRect,w=t.onScrollElement,x=t.scrollOffsetFn,$=t.keyExtractor,S=$===void 0?sOt:$,I=t.measureSize,E=I===void 0?aOt:I,L=t.rangeExtractor,T=L===void 0?lOt:L,F=p?"width":"height",j=p?"scrollLeft":"scrollTop",U=H.useRef({scrollOffset:0,measurements:[]}),ce=H.useState(0),W=ce[0],P=ce[1];U.current.scrollOffset=W;var ne=y||rOt,Q=ne(f,m),oe=Q[F];U.current.outerSize=oe;var nt=H.useCallback(function(at){f.current&&(f.current[j]=at)},[f,j]),xt=h||nt;h=H.useCallback(function(at){xt(at,nt)},[nt,xt]);var Ae=H.useState({}),ae=Ae[0],fe=Ae[1],_e=H.useCallback(function(){return fe({})},[]),he=H.useRef([]),be=H.useMemo(function(){var at=he.current.length>0?Math.min.apply(Math,he.current):0;he.current=[];for(var $t=U.current.measurements.slice(0,at),_t=at;_t<r;_t++){var Yt=S(_t),rn=ae[Yt],Ft=$t[_t-1]?$t[_t-1].end:c,tr=typeof rn=="number"?rn:i(_t),nr=Ft+tr;$t[_t]={index:_t,start:Ft,size:tr,end:nr,key:Yt}}return $t},[i,ae,c,r,S]),Ie=(((e=be[r-1])==null?void 0:e.end)||c)+d;U.current.measurements=be,U.current.totalSize=Ie;var Qe=w?w.current:f.current,Ue=H.useRef(x);Ue.current=x,Hy(function(){if(!Qe){P(0);return}var at=function(_t){var Yt=Ue.current?Ue.current(_t):Qe[j];P(Yt)};return at(),Qe.addEventListener("scroll",at,{capture:!1,passive:!0}),function(){Qe.removeEventListener("scroll",at)}},[Qe,j]);var dn=dOt(U.current),wi=dn.start,go=dn.end,Zo=H.useMemo(function(){return T({start:wi,end:go,overscan:a,size:be.length})},[wi,go,a,be.length,T]),rt=H.useRef(E);rt.current=E;var Tt=H.useMemo(function(){for(var at=[],$t=function(Ft,tr){var nr=Zo[Ft],xi=be[nr],rr=Fl(Fl({},xi),{},{measureRef:function(wn){if(wn){var Qs=rt.current(wn,p);if(Qs!==rr.size){var sf=U.current.scrollOffset;rr.start<sf&&nt(sf+(Qs-rr.size)),he.current.push(nr),fe(function(Ub){var ea;return Fl(Fl({},Ub),{},(ea={},ea[rr.key]=Qs,ea))})}}}});at.push(rr)},_t=0,Yt=Zo.length;_t<Yt;_t++)$t(_t);return at},[Zo,nt,p,be]),wt=H.useRef(!1);Hy(function(){wt.current&&fe({}),wt.current=!0},[i]);var _i=H.useCallback(function(at,$t){var _t=$t===void 0?{}:$t,Yt=_t.align,rn=Yt===void 0?"start":Yt,Ft=U.current,tr=Ft.scrollOffset,nr=Ft.outerSize;rn==="auto"&&(at<=tr?rn="start":at>=tr+nr?rn="end":rn="start"),rn==="start"?h(at):rn==="end"?h(at-nr):rn==="center"&&h(at-nr/2)},[h]),yo=H.useCallback(function(at,$t){var _t=$t===void 0?{}:$t,Yt=_t.align,rn=Yt===void 0?"auto":Yt,Ft=XPt(_t,["align"]),tr=U.current,nr=tr.measurements,xi=tr.scrollOffset,rr=tr.outerSize,vo=nr[Math.max(0,Math.min(at,r-1))];if(vo){if(rn==="auto")if(vo.end>=xi+rr)rn="end";else if(vo.start<=xi)rn="start";else return;var wn=rn==="center"?vo.start+vo.size/2:rn==="end"?vo.end:vo.start;_i(wn,Fl({align:rn},Ft))}},[_i,r]),bo=H.useCallback(function(){for(var at=arguments.length,$t=new Array(at),_t=0;_t<at;_t++)$t[_t]=arguments[_t];yo.apply(void 0,$t),requestAnimationFrame(function(){yo.apply(void 0,$t)})},[yo]);return{virtualItems:Tt,totalSize:Ie,scrollToOffset:_i,scrollToIndex:bo,measure:_e}}var uOt=function(e,n,r,o){for(;e<=n;){var i=(e+n)/2|0,s=r(i);if(s<o)e=i+1;else if(s>o)n=i-1;else return i}return e>0?e-1:0};function dOt(t){for(var e=t.measurements,n=t.outerSize,r=t.scrollOffset,o=e.length-1,i=function(c){return e[c].start},s=uOt(0,o,i,r),a=s;a<o&&e[a].end<r+n;)a++;return{start:s,end:a}}function fOt(t){const e=new Set,n=t.map(o=>h8(o)[1]);n.forEach(o=>{let i=o,s;for(;(s=i.lastIndexOf("/"))!==-1&&(i=i.substring(0,s),!e.has(i));)e.add(i)});const r=(o,i)=>{const s=o.split("/"),a=i.split("/"),l=Math.min(s.length,a.length);for(let c=0;c<l;c++){const u=s[c],d=a[c];if(u!==d&&u&&d&&u!==d)return!e.has(o)&&s[c+1]===void 0?1:!e.has(i)&&a[c+1]===void 0?-1:u.localeCompare(d)}return o.localeCompare(i)};return{dirSet:e,filesAndDirList:[...e,...n].sort(r)}}const pOt=2,hOt=8,mOt=8,gOt=typeof window=="undefined"?16:parseFloat(getComputedStyle(document.documentElement).fontSize),yOt=1.5*gOt;function bOt(){const{widescreen:t}=Vd(),{wsName:e,openedWsPaths:n,noteWsPaths:r=[]}=Xr(),{dispatchSerialOperation:o}=Xs(),{primaryWsPath:i}=n,s=i?ft(i).filePath:void 0,a=k.useCallback(()=>{t||$6()},[t]),l=k.useCallback(c=>{o({name:J_,value:{path:c}})},[o]);return e?r.length===0?_.jsx("div",{className:"flex flex-col items-center justify-center h-full",children:_.jsx("span",{className:"text-sm font-extrabold bangle-io_textColorLighter",children:"  "})}):_.jsx(vOt,{wsName:e,files:r,activeFilePath:s,closeSidebar:a,createNewFile:l}):_.jsx("div",{className:"flex flex-col items-center justify-center h-full",children:_.jsx("span",{className:"text-sm font-extrabold cursor-pointer bangle-io_textColorLighter",onClick:()=>{tE(Hs.Workspace)}})})}const x_={height:16,width:16};function vOt({wsName:t,files:e,activeFilePath:n,closeSidebar:r,createNewFile:o}){const{filesAndDirList:i,dirSet:s}=k.useMemo(()=>fOt(e),[e]);return!t||i.length===0?null:_.jsx(wOt,{wsName:t,filesAndDirList:i,dirSet:s,activeFilePath:n,closeSidebar:r,createNewFile:o})}const wOt=({wsName:t,filesAndDirList:e,dirSet:n,activeFilePath:r,closeSidebar:o,createNewFile:i})=>{const[s,a]=ES("RenderTree6261:"+t,()=>e.filter(h=>n.has(h)&&h.split("/").length===pOt)),l=k.useRef(s);k.useEffect(()=>{l.current=s},[s]),k.useEffect(()=>{if(r){const p=l.current.filter(h=>!r.startsWith(h+"/"));p.length<l.current.length&&a(p)}},[r,a]);const c=H.useRef(null),u=k.useMemo(()=>e.filter(p=>!s.some(h=>p.startsWith(h+"/"))),[e,s]),d=cOt({size:u.length,parentRef:c,overscan:60,estimateSize:H.useCallback(()=>yOt,[]),keyExtractor:k.useCallback(p=>u[p],[u])}),f=d.virtualItems.map(p=>{const h=u[p.index],y=n.has(h),m=Ld(t,h),w=h.split("/"),x=w.length,$=Cr(w.pop()||"Unknown file name"),S=I=>{if(y){a(E=>E.includes(h)?E.filter(L=>L!==h):[...E,h]);return}I.metaKey?eb(m):I.shiftKey?ad(m):Hd(m),o()};return _.jsx(_Ot,{virtualRow:p,path:h,isDir:y,wsPath:m,name:$,depth:x,isActive:r===h,isCollapsed:s.includes(h),createNewFile:i,onClick:S},h)});return _.jsx("div",{ref:c,style:{height:"100%",overflow:"auto"},children:_.jsx("div",{style:{height:`${d.totalSize*1.5}px`,width:"100%",position:"relative"},children:f})})};function _Ot({virtualRow:t,path:e,isDir:n,wsPath:r,name:o,depth:i,isActive:s,isCollapsed:a,onClick:l,createNewFile:c}){const u=k.useRef(null);return k.useEffect(()=>{s&&(Q4||u.current&&R0(u.current,!1))},[s]),_.jsx("div",{ref:u,style:{position:"absolute",top:0,left:0,width:"100%",height:`${t.size}px`,transform:`translateY(${t.start*1.4}px)`},children:_.jsx(_d,{isActive:s,onClick:l,titleClassName:"text-base truncate select-none",style:{paddingLeft:i*mOt,paddingRight:hOt},item:{uid:r,showDividerAbove:!1,title:o,leftNode:_.jsx(No,{onClick:async d=>{},children:n?a?_.jsx("svg",{class:"w-4 h-4 mt-1.5 mr-1",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"2 2 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:_.jsx("path",{d:"m9 18 6-6-6-6"})}):_.jsx("svg",{class:"w-4 h-4 mt-1 mr-1",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:_.jsx("path",{d:"m18 15-6-6-6 6"})}):null}),leftHoverNode:n?null:_.jsx(No,{hint:"New file",onClick:async d=>{d.stopPropagation(),i===0?c():c(e+"/")},hintPos:"bottom-right",children:_.jsx(mO,{style:x_})}),rightHoverNode:n?_.jsx(No,{hint:"New file",onClick:async d=>{d.stopPropagation(),i===0?c():c(e+"/")},hintPos:"bottom-right",children:_.jsx(mO,{style:x_})}):_.jsx(No,{hint:"Delete file",hintPos:"bottom-right",onClick:async d=>{d.stopPropagation(),window.confirm(`    "${o}"? `)&&O6(r)},children:_.jsx(XB,{style:x_})})}})})}function xOt(){return _.jsx(lj,{className:"note-browser flex flex-col h-full",children:_.jsx("div",{className:"my-1 ml-4 mt-3 mr-3",children:_.jsx(bOt,{})})})}const kOt="@bangle.io/note-browser",nI="Mod-e",$Ot=zn.create({name:kOt,application:{operations:[{name:"operation::@bangle.io/note-browser:toggle-note-browser",title:"Show/Hide Notes Browser",keybinding:nI,hidden:!0,keywords:["hide","note browser","note sidebar","notes sidebar","all notes","file","files","explorer"]}],sidebars:[{name:"sidebar::@bangle.io/note-browser:note-browser",title:" ",hint:`Note browser
`+em(nI),activitybarIcon:H.createElement(wTt,{}),ReactComponent:xOt}],operationHandler(){return{handle(t){switch(t.name){case"operation::@bangle.io/note-browser:toggle-note-browser":return n_t("sidebar::@bangle.io/note-browser:note-browser"),!0;default:return!1}}}}}}),kp=new vt("note-outline_watchHeadingsPluginKey"),SOt=100,EOt=250,Gk="operation::@bangle.io/note-outline:watch-headings-plugin-state-update",COt=2500;function TOt(){const{focusedEditorId:t,primaryEditor:e}=w6(),{wsName:n}=Xr(),[r,o]=k.useState(),i=k.useRef(0),s=k.useMemo(()=>r==null?void 0:r.find(c=>c.hasContentInsideViewport),[r]);AOt(s,i);const a=k.useCallback(()=>{var d;let c=t!=null&&((d=X1(t))==null?void 0:d.view.state);if(c||(c=e==null?void 0:e.view.state),!c){o(void 0);return}const u=kp.getState(c);u&&o(u.headings)},[t,e]);x_t(c=>{var u;if(c.name===Gk){const d=(u=c.value)==null?void 0:u.editorId;return t==null||d!==t?!1:(a(),!0)}return!1},[a,t]);const l=k.useCallback(c=>{const u=t!=null&&X1(t);if(u){if(!u||u.destroyed)return;u.focusView();const{dispatch:d,state:f}=u.view,p=f.tr;i.current=Date.now(),d(p.setSelection(Oe.near(p.doc.resolve(c.offset))).scrollIntoView())}},[t]);return k.useEffect(()=>{a()},[n,a]),_.jsxs("div",{className:"note-outline_container flex flex-col",children:[(!r||r.length===0)&&_.jsxs("span",{children:[" No headings found!",_.jsx("br",{}),_.jsx("span",{className:"font-light",children:"Create heading by typing # followed by a space."})]}),r==null?void 0:r.map((c,u)=>{let d="";const f=s===c;return f&&(d="note-outline_first-node-in-viewport"),c.isActive,_.jsx(vd,{variant:c.isActive?"solid":f?"soft":"transparent",tone:c.isActive?"promote":"neutral",ariaLabel:c.title,size:"sm",className:d,onPress:()=>{l(c)},justifyContent:"flex-start",style:{paddingLeft:12*(c.level-1),paddingTop:4,paddingBottom:4,whiteSpace:"nowrap"},text:_.jsx("span",{className:"pl-1",children:c.title||`<Empty heading-${c.level}>`})},c.title+u)})]})}function AOt(t,e){const n=k.useRef(!1),r=k.useCallback(()=>{if(Date.now()-e.current<COt)return;const o=document.querySelector(".note-outline_container .note-outline_first-node-in-viewport");o instanceof HTMLElement&&tm(()=>R0(o,!1)),n.current=!1},[e]);k.useEffect(()=>{let o=null;return n.current||(n.current=!0,o=CS(r)),()=>{o!=null&&V1(o),n.current=!1}},[t,r])}function k_(t){return u0.getState(t)}function NOt(){let t={init(e,n){const r=k_(n);return r||console.warn("note-outline expects editorIntersectionObserverPluginState"),{headings:rI(n,r)}},apply(e,n,r,o){const i=e.getMeta(kp),s=k_(o),a=s!==k_(r);return i||a?{...n,headings:rI(o,s)}:n}};return new ht({key:kp,state:t,view(e){let n=r8(()=>{!e.isDestroyed&&e.hasFocus()&&e.dispatch(e.state.tr.setMeta(kp,!0))},{wait:SOt,maxWait:EOt});return{update(r,o){const{state:i}=r;o!==i&&(i.doc.eq(o.doc)&&i.selection.eq(o.selection)||n())},destroy(){n.cancel()}}}})}function rI(t,e){const n=[];t.doc.forEach((o,i,s)=>{if(o.type.name==="heading"){const a=ROt(i,e),l={offset:i,level:o.attrs.level,title:o.textContent,isActive:!1,hasContentInsideViewport:a};n.push(l)}});const r=oI(t.selection.from,n);if(r&&(r.isActive=!0),e&&!n.some(i=>i.hasContentInsideViewport)){const i=oI(e.minStartPosition,n);i&&(i.hasContentInsideViewport=!0)}return n}function oI(t,e){let n=1/0,r;for(const o of e){let i=t-o.offset;if(i>=0&&i<n&&(n=i,r=o),i<0)break}return r}function ROt(t,e){return e?t>=e.minStartPosition&&t<=e.maxStartPosition:!1}const iI="@bangle.io/note-outline",POt=zn.create({name:iI,editor:{plugins:[NOt()],watchPluginStates:[{operation:Gk,pluginKey:kp}]},application:{operations:[{name:Gk,title:"headings plugin state has updated",hidden:!0}],noteSidebarWidgets:[{name:`note-sidebar-widget::${iI}`,ReactComponent:TOt,title:"Outline"}]}}),QC="@bangle.io/note-tags",Tz=A0(QC+"-paletteMark"),Ss=new vt(QC+"-key"),uc="tag",OOt="#!$%^&*()+|~=`{}[]:\";'<>?,.@\\",IOt="#";let Az=/(?:^|\s+)(#\w[\w-/]*)(?![\w-/#!$%^&*()+|~=`{}\[\]:";\'<>?,.\\@])/g,Nz=!1;try{Az=new RegExp("(?<![\\w-/#!$%^&*()+|~=`{}\\[\\]:\";\\'<>?,.\\\\@])#\\w[\\w-/]*(?![\\w-/#!$%^&*()+|~=`{}\\[\\]:\";\\'<>?,.\\\\@])","g")}catch(t){if(!(t instanceof Error))throw t;if(t.message==="Invalid regular expression: invalid group specifier name")Nz=!0;else throw t}const DOt=Az,MOt=Nz,LOt=500,FOt=t=>t.dom.parentElement;function BOt(){return()=>[Od.createPlugin({name:uc,containerDOM:["span",{style:"display: inline-block; color: pink;",class:"note-tag-container"}]}),en({Space:sI("Space"),...Object.fromEntries(OOt.split("").map(t=>[t,sI(t)]))})]}function jOt(){return()=>[VC({key:Ss,markName:Tz,tooltipRenderOpts:{getScrollContainer:FOt}})]}function sI(t){return(e,n,r)=>{if(yz(Ss)(e)){const o=lRt(Ss)(e),{$from:i}=e.selection;let s=i.parent.textBetween(Math.max(0,i.parentOffset-LOt),i.parentOffset,void 0,"");if(t==="Space"){if(s==="#")return!1;if(o==="")return lr(Ss,e.schema.text("# "))(e,n,r);const a=e.schema.nodes[uc];return Md(a,"tag nodeType must be defined"),lr(Ss,a.create({tagValue:o}))(e,n,r)}return lr(Ss,e.schema.text("#"+o+t))(e,n,r)}return!1}}function zOt(){const{toDOM:t,parseDOM:e}=m0(uc,{tag:"span",parsingPriority:52}),n={type:"node",name:uc,schema:{attrs:{tagValue:{default:"tag"}},inline:!0,group:"inline",selectable:!1,atom:!0,draggable:!0,toDOM:t,allowGapCursor:!0,parseDOM:e},markdown:{toMarkdown:(r,o)=>{const{tagValue:i}=o.attrs;r.text("#"+i,!1)},parseMarkdown:{note_tag:{block:uc,getAttrs:r=>typeof r.payload=="string"?{tagValue:r.payload}:{tagValue:void 0},noCloseToken:!0}}}};return[UC({markName:Tz,trigger:IOt}),n]}function qOt(t){H8(t,{tokenName:"note_tag",regex:DOt,getTokenDetails:(e,n,r)=>{let o=!1;return MOt&&e[0]===" "&&(e=e.slice(1),o=!0),{payload:e.slice(1),markup:e.slice(1),whiteSpaceBefore:o}}})}const WOt={[uc]:({nodeViewRenderArg:t})=>_.jsx(UOt,{tagValue:t.node.attrs.tagValue})};function UOt({tagValue:t}){const{dispatchSerialOperation:e}=Xs(),n=k.useCallback(()=>{Hwt(e,t)},[t,e]);return _.jsxs("span",{className:"B-note-tags_inline-note-tag",onClick:n,children:["#",t]})}const VOt=16;function HOt(t){const e=new Set;return t.descendants((n,r,o)=>{n.type.name==="tag"&&e.add(n.attrs.tagValue)}),e}async function KOt(t,e,n){let r=!1;n==null||n.addEventListener("abort",i=>{r=!0},{once:!0});const o=new Set;for(const i of t){if(r)throw new DOMException("Aborted","AbortError");const s=await e(i);if(r)throw new DOMException("Aborted","AbortError");s&&HOt(s).forEach(l=>{o.add(l)})}return[...o]}function GOt(t,e){const{noteWsPaths:n=[]}=Xr(),[r,o]=k.useState([]);k.useEffect(()=>{const s=new AbortController;return e&&KOt(n,l=>R6(l).catch(c=>{}),s.signal).then(l=>{console.log("allTags",l),o(l)}).catch(l=>{if(!Mc(l))throw l}),()=>{s.abort()}},[n,e]);const i=FC(r,t,{limit:VOt,tiebreakers:[Eb],selector:s=>s});return k.useMemo(()=>{let s=i.map(a=>a.item);return console.log("search items",s),s},[i])}const aI=t=>(t=t.trim(),(e,n,r)=>{const o=e.schema.nodes[uc];return t===""?!1:(Md(o,"tag nodeType must be defined"),lr(Ss,o.create({tagValue:t}))(e,n,r))});function ZOt(){const{query:t,counter:e,tooltipContentDOM:n,isVisible:r}=HC(Ss),o=GOt(t,r),i=k.useMemo(()=>{if(t.length>0){const a={description:"",uid:"create-tag",title:'Create a tag "'+t+'"',editorExecuteCommand:()=>aI(t)},l=o.map(c=>({description:c,uid:"existing-tag-"+c,title:c,editorExecuteCommand:()=>aI(c)}));return o.includes(t)?l:[a,...l]}return[]},[t,o]),{getItemProps:s}=KC(Ss,i,e,void 0);return vl.createPortal(_.jsxs("div",{className:"shadow-2xl B-ui-components_inline-palette-wrapper flex flex-col bg-colorNeutralBgLayerFloat",children:[_.jsx("div",{className:"B-ui-components_inline-palette-items-wrapper tag-picker-inline-palette",children:t?i.map((a,l)=>_.jsx(wd,{dataId:"blah",...s(a,l),className:"palette-row tag-picker-inline-palette-item",title:a.title},a.uid)):_.jsx(wd,{dataId:"searchNote",className:"palette-row",title:" Search for a tag"})}),_.jsxs(bi,{children:[_.jsxs(Rt,{children:[_.jsx("kbd",{className:"font-normal",children:""})," Navigate"]}),_.jsxs(Rt,{children:[_.jsx("kbd",{className:"font-normal",children:"Enter"})," Add a tag"]}),_.jsxs(Rt,{children:[_.jsx("kbd",{className:"font-normal",children:"Esc"})," Dismiss"]})]})]}),n)}const YOt=zn.create({name:QC,editor:{ReactComponent:ZOt,specs:[zOt()],highPriorityPlugins:[jOt()],plugins:[BOt()],renderReactNodeView:WOt,markdownItPlugins:[qOt]}}),JOt=10,lI="operation::@bangle.io/search-notes:show-search-sidebar",$_="sidebar::@bangle.io/search-notes:search-notes",XOt="@bangle.io/search-notes";async function QOt(t,e,n,{caseSensitive:r=!1,maxChars:o=75,perFileMatchMax:i=200,totalMatchMax:s=2e3}={}){return await Tm.abortable.abortableSearchWsForPmNode(t,n,e,[{nodeName:"tag",dataAttrName:"tagValue",printBefore:"#",queryIdentifier:"tag:"},{nodeName:"wikiLink",dataAttrName:"path",printBefore:"[[",printAfter:"]]",queryIdentifier:"backlink:"}],{caseSensitive:r,maxChars:o,perFileMatchMax:i,totalMatchMax:s,concurrency:JOt})}const eIt={searchQuery:"",externalInputChange:0,pendingSearch:!1,searchResults:null},tIt="slice::search-notes:main",co=Ic([],{name:tIt,state:eIt}),nIt=co.action(function(e){return co.tx(n=>co.update(n,{searchQuery:e.query}))}),rIt=co.action(function(e){return co.tx(n=>co.update(n,r=>({searchQuery:e,externalInputChange:r.externalInputChange+1})))}),Yf=co.action(function(e){return co.tx(n=>co.update(n,e))}),oIt=Ko(function(e){oE(e),e.dispatch(Yf({searchResults:null,pendingSearch:!1}))}),iIt=Ko(function(e){const n=oE(e),{searchQuery:r}=co.track(e);if(!n)return;if(r===""){e.dispatch(Yf({searchResults:null,pendingSearch:!1}));return}e.dispatch(Yf({searchResults:null,pendingSearch:!0}));let o=new AbortController;Lh(e,()=>{o.abort()}),QOt(o.signal,r,n).then(i=>{o.signal.aborted?console.warn("Search aborted",i):e.dispatch(Yf({searchResults:i,pendingSearch:!1}))}).catch(i=>{if(!Mc(i))throw e.dispatch(Yf({pendingSearch:!1})),i})}),sIt=Ko(function(e){const{searchQuery:n}=co.track(e);if(!n)return;const r=n?new RegExp(n.replace(/[-[\]{}()*+?.,\\^$|]/g,"\\$&"),"i"):void 0;Kwt(r)}),aIt=[oIt,iIt,sIt],lIt=({searchQuery:t,updateSearchQuery:e})=>{const n=k.useRef(null),r=k.useCallback(i=>{i.preventDefault(),e("")},[e]),o=k.useCallback(i=>{e(i.target.value)},[e]);return k.useEffect(()=>{var i;(i=n.current)==null||i.focus()},[]),_.jsx(rj,{label:"Search",ref:n,className:"w-full",showClear:!0,value:t,onClear:r,onChange:o,placeholder:""})};function cIt({highlightText:t}){return _.jsx("div",{className:"B-search-notes_highlight-text-container",children:t.map((e,n)=>_.jsx("span",{className:"B-search-notes_highlight-text text-sm",children:e},n))})}function uIt(t,e){const[n,r]=k.useState(new Set),o=k.useMemo(()=>t.map(s=>()=>{r(l=>{const c=new Set(l);return c.has(s)?c.delete(s):c.add(s),c})}),[t]),i=k.useCallback(s=>n.has(s),[n]);return k.useEffect(()=>{e>0&&r(()=>new Set(t))},[e,t]),{onClicks:o,isCollapsed:i}}function dIt({results:t,collapseAllCounter:e}){const{onClicks:n,isCollapsed:r}=uIt(t,e),{widescreen:o}=Vd(),{primaryWsPath:i}=Xr(),[s,a]=k.useState();k.useEffect(()=>{let c=!1;return s&&i===s.wsPath&&setTimeout(()=>{tm(()=>{const u=Q1();if(c||!u||u.destroyed)return;u.focusView();const{dispatch:d,state:f}=u.view;let p=f.tr;s.match.parentPos>=p.doc.content.size?p=p.setSelection(Oe.atEnd(p.doc)):(p.doc.nodeAt(s.match.parentPos)&&(p=p.setSelection(Me.create(p.doc,s.match.parentPos))),setTimeout(()=>{if(!u.destroyed){const{dispatch:y,state:m}=u.view,w=m.tr;y(w.setSelection(Oe.near(w.doc.resolve(s.match.parentPos))))}},300));try{d(p.scrollIntoView())}catch(h){}a(null)})},50),()=>{c=!0}},[s,i]);const l=Ree(s);return _.jsx(_.Fragment,{children:t.map((c,u)=>{const d=jt(c.uid);return _.jsxs(H.Fragment,{children:[_.jsx(_d,{titleClassName:"text-sm font-bold",className:Xe("B-search-notes_search-result-note-match pl-1 pr-3  select-none",i===c.uid&&"BU_active"),extraInfoClassName:"text-sm",extraInfoOnNewLine:!0,onClick:n[u],item:{uid:"search-notes-result-"+u,showDividerAbove:!1,title:tn(d).fileNameWithoutExt,extraInfo:tn(d).dirPath,leftNode:_.jsx(No,{children:r(c)?_.jsx(ej,{style:cI}):_.jsx(JB,{style:cI})}),rightNode:_.jsx(No,{className:"text-xs font-semibold",children:c.matches.length}),rightHoverNode:_.jsx(No,{className:"text-xs font-semibold",children:c.matches.length})}}),!r(c)&&c.matches.map((f,p)=>_.jsx(Wj,{wsPath:c.uid,className:Xe("rounded-sm block B-search-notes_search-result-text-match ",i===c.uid&&(l==null?void 0:l.matchIndex)===p&&"B-search-notes_previously-clicked",p===0?"mt-3":"mt-4",p===c.matches.length-1?"pb-4 border-b-1 border-colorNeutralBorder":""),onClick:()=>{const h=Q1();o?h&&!h.destroyed&&a({wsPath:c.uid,match:f,matchIndex:p}):$6()},children:_.jsx(_d,{className:"pl-3",titleClassName:"text-sm ",item:{uid:"search-result-text-match-"+p,title:_.jsx(cIt,{highlightText:f.match})}})},p))]},u)})})}const cI={height:16,width:16};function fIt(){const{wsName:t}=Xr(),[{pendingSearch:e,searchResults:n,searchQuery:r,externalInputChange:o},i]=OV(co),[s,a]=k.useState(0),[l,c]=k.useState(r||""),[u,d]=k.useState(o),f=N0(l,{wait:30});return k.useEffect(()=>{u!==o?(d(o),c(r)):f!==r&&i(nIt({query:f}))},[o,r,f,u,i]),k.useEffect(()=>{a(0)},[f,t]),t?_.jsxs(lj,{className:"B-search-notes_search-notes px-4 py-4",children:[_.jsx(_O,{className:"",children:_.jsx(lIt,{searchQuery:l,updateSearchQuery:c})}),_.jsxs(_O,{className:"flex flex-row justify-between pt-1 pb-2 text-xs",children:[n&&_.jsx("span",{className:"",children:n.length===0?" ":`: ${n.length}`}),n&&_.jsx(No,{onClick:()=>{a(p=>p+1)}}),e&&_.jsxs(_.Fragment,{children:[_.jsx("span",{className:"",children:"... "}),_.jsx("span",{className:"w-3 h-3 mr-2",children:_.jsx(QB,{})})]})]}),_.jsx(WTt,{children:n&&_.jsx(dIt,{results:n,collapseAllCounter:s})})]}):_.jsx("div",{className:"flex flex-col items-center justify-center h-full",children:_.jsx("span",{className:"text-sm font-extrabold cursor-pointer text-colorNeutralTextSubdued",onClick:()=>{tE(Hs.Workspace)}})})}const uI="Mod-F",pIt=zn.create({name:XOt,application:{nsmSlices:[co],nsmEffects:aIt,operations:[{name:lI,title:"Open search sidebar",keybinding:uI,hidden:!0},{name:Fg,title:"Execute search",hidden:!0}],operationHandler(){function t(){if(fm().sidebar===$_){const n=document.querySelector('input[aria-label="Search"]');n==null||n.focus(),n==null||n.select()}else t_t($_)}return{handle(e,n){const r=Ug();switch(e.name){case lI:return t(),!0;case Fg:{if(t(),typeof n!="string")throw new Error(`Invalid payload for ${Fg} operation`);return r.dispatch(rIt(n)),!0}default:return!1}}}},sidebars:[{name:$_,title:"  ",hint:`Search notes
`+em(uI),activitybarIcon:H.createElement(xTt,{}),ReactComponent:fIt}]},editor:{}}),hIt=()=>{const t=new A6([JPt,I_t,N_t,PNt,P_t,LEt,cPt,POt,DRt,YOt,XNt,OAt,$Ot,pIt,NNt,S3t]),e=new XZ,n=new Dh({});return{extensionRegistry:t,storageEmitter:e,editorCollabMessageBus:n}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Zk=function(t,e){return Zk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)r.hasOwnProperty(o)&&(n[o]=r[o])},Zk(t,e)};function Rm(t,e){Zk(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var de=function(){return de=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},de.apply(this,arguments)};function Pc(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Nr(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),o,i=[],s;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i}function kn(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Nr(arguments[e]));return t}var ls;(function(t){t.Fatal="fatal",t.Error="error",t.Warning="warning",t.Log="log",t.Info="info",t.Debug="debug",t.Critical="critical"})(ls||(ls={}));function mIt(t){t.then(null,function(e){console.error(e)})}function gIt(){return typeof __SENTRY_BROWSER_BUNDLE__!="undefined"&&!!__SENTRY_BROWSER_BUNDLE__}function e2(){return!gIt()&&Object.prototype.toString.call(typeof process!="undefined"?process:0)==="[object process]"}function yIt(t,e){return t.require(e)}var bIt={};function un(){return e2()?global:typeof window!="undefined"?window:typeof self!="undefined"?self:bIt}function t2(t,e,n){var r=n||un(),o=r.__SENTRY__=r.__SENTRY__||{},i=o[t]||(o[t]=e());return i}var Rz=Object.prototype.toString;function n2(t){switch(Rz.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return _l(t,Error)}}function nf(t,e){return Rz.call(t)==="[object "+e+"]"}function Pz(t){return nf(t,"ErrorEvent")}function dI(t){return nf(t,"DOMError")}function vIt(t){return nf(t,"DOMException")}function kd(t){return nf(t,"String")}function r2(t){return t===null||typeof t!="object"&&typeof t!="function"}function $d(t){return nf(t,"Object")}function Db(t){return typeof Event!="undefined"&&_l(t,Event)}function wIt(t){return typeof Element!="undefined"&&_l(t,Element)}function _It(t){return nf(t,"RegExp")}function o2(t){return!!(t&&t.then&&typeof t.then=="function")}function xIt(t){return $d(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t}function kIt(t){return typeof t=="number"&&t!==t}function _l(t,e){try{return t instanceof e}catch(n){return!1}}function Yk(t,e){try{for(var n=t,r=5,o=80,i=[],s=0,a=0,l=" > ",c=l.length,u=void 0;n&&s++<r&&(u=$It(n,e),!(u==="html"||s>1&&a+i.length*c+u.length>=o));)i.push(u),a+=u.length,n=n.parentNode;return i.reverse().join(l)}catch(d){return"<unknown>"}}function $It(t,e){var n=t,r=[],o,i,s,a,l;if(!n||!n.tagName)return"";r.push(n.tagName.toLowerCase());var c=e&&e.length?e.filter(function(d){return n.getAttribute(d)}).map(function(d){return[d,n.getAttribute(d)]}):null;if(c&&c.length)c.forEach(function(d){r.push("["+d[0]+'="'+d[1]+'"]')});else if(n.id&&r.push("#"+n.id),o=n.className,o&&kd(o))for(i=o.split(/\s+/),l=0;l<i.length;l++)r.push("."+i[l]);var u=["type","name","title","alt"];for(l=0;l<u.length;l++)s=u[l],a=n.getAttribute(s),a&&r.push("["+s+'="'+a+'"]');return r.join("")}function SIt(){var t=un();try{return t.document.location.href}catch(e){return""}}var EIt=Object.setPrototypeOf||({__proto__:[]}instanceof Array?CIt:TIt);function CIt(t,e){return t.__proto__=e,t}function TIt(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n]);return t}var En=function(t){Rm(e,t);function e(n){var r=this.constructor,o=t.call(this,n)||this;return o.message=n,o.name=r.prototype.constructor.name,EIt(o,r.prototype),o}return e}(Error),rf=typeof __SENTRY_DEBUG__=="undefined"?!0:__SENTRY_DEBUG__,AIt=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/;function NIt(t){return t==="http"||t==="https"}function Pm(t,e){e===void 0&&(e=!1);var n=t.host,r=t.path,o=t.pass,i=t.port,s=t.projectId,a=t.protocol,l=t.publicKey;return a+"://"+l+(e&&o?":"+o:"")+("@"+n+(i?":"+i:"")+"/"+(r&&r+"/")+s)}function RIt(t){var e=AIt.exec(t);if(!e)throw new En("Invalid Sentry Dsn: "+t);var n=Nr(e.slice(1),6),r=n[0],o=n[1],i=n[2],s=i===void 0?"":i,a=n[3],l=n[4],c=l===void 0?"":l,u=n[5],d="",f=u,p=f.split("/");if(p.length>1&&(d=p.slice(0,-1).join("/"),f=p.pop()),f){var h=f.match(/^\d+/);h&&(f=h[0])}return Oz({host:a,pass:s,path:d,projectId:f,port:c,protocol:r,publicKey:o})}function Oz(t){return"user"in t&&!("publicKey"in t)&&(t.publicKey=t.user),{user:t.publicKey||"",protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function PIt(t){if(rf){var e=t.port,n=t.projectId,r=t.protocol,o=["protocol","publicKey","host","projectId"];if(o.forEach(function(i){if(!t[i])throw new En("Invalid Sentry Dsn: "+i+" missing")}),!n.match(/^\d+$/))throw new En("Invalid Sentry Dsn: Invalid projectId "+n);if(!NIt(r))throw new En("Invalid Sentry Dsn: Invalid protocol "+r);if(e&&isNaN(parseInt(e,10)))throw new En("Invalid Sentry Dsn: Invalid port "+e);return!0}}function i2(t){var e=typeof t=="string"?RIt(t):Oz(t);return PIt(e),e}var OIt=["fatal","error","warning","log","info","debug","critical"],IIt=un(),DIt="Sentry Logger ",Ky=["debug","info","warn","error","log","assert"];function Iz(t){var e=un();if(!("console"in e))return t();var n=e.console,r={};Ky.forEach(function(o){var i=n[o]&&n[o].__sentry_original__;o in e.console&&i&&(r[o]=n[o],n[o]=i)});try{return t()}finally{Object.keys(r).forEach(function(o){n[o]=r[o]})}}function fI(){var t=!1,e={enable:function(){t=!0},disable:function(){t=!1}};return rf?Ky.forEach(function(n){e[n]=function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];t&&Iz(function(){var i;(i=IIt.console)[n].apply(i,kn([DIt+"["+n+"]:"],r))})}}):Ky.forEach(function(n){e[n]=function(){}}),e}var pt;rf?pt=t2("logger",fI):pt=fI();function $p(t,e){return e===void 0&&(e=0),typeof t!="string"||e===0||t.length<=e?t:t.substr(0,e)+"..."}function pI(t,e){if(!Array.isArray(t))return"";for(var n=[],r=0;r<t.length;r++){var o=t[r];try{n.push(String(o))}catch(i){n.push("[value cannot be serialized]")}}return n.join(e)}function s2(t,e){return kd(t)?_It(e)?e.test(t):typeof e=="string"?t.indexOf(e)!==-1:!1:!1}function mr(t,e,n){if(e in t){var r=t[e],o=n(r);if(typeof o=="function")try{Dz(o,r)}catch(i){}t[e]=o}}function Mb(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0})}function Dz(t,e){var n=e.prototype||{};t.prototype=e.prototype=n,Mb(t,"__sentry_original__",e)}function a2(t){return t.__sentry_original__}function MIt(t){return Object.keys(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&")}function Mz(t){var e=t;if(n2(t))e=de({message:t.message,name:t.name,stack:t.stack},mI(t));else if(Db(t)){var n=t;e=de({type:n.type,target:hI(n.target),currentTarget:hI(n.currentTarget)},mI(n)),typeof CustomEvent!="undefined"&&_l(t,CustomEvent)&&(e.detail=n.detail)}return e}function hI(t){try{return wIt(t)?Yk(t):Object.prototype.toString.call(t)}catch(e){return"<unknown>"}}function mI(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function LIt(t,e){e===void 0&&(e=40);var n=Object.keys(Mz(t));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=e)return $p(n[0],e);for(var r=n.length;r>0;r--){var o=n.slice(0,r).join(", ");if(!(o.length>e))return r===n.length?o:$p(o,e)}return""}function Jk(t){var e,n;if($d(t)){var r={};try{for(var o=Pc(Object.keys(t)),i=o.next();!i.done;i=o.next()){var s=i.value;typeof t[s]!="undefined"&&(r[s]=Jk(t[s]))}}catch(a){e={error:a}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}return Array.isArray(t)?t.map(Jk):t}var FIt=50;function BIt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.sort(function(r,o){return r[0]-o[0]}).map(function(r){return r[1]});return function(r,o){var i,s,a,l;o===void 0&&(o=0);var c=[];try{for(var u=Pc(r.split(`
`).slice(o)),d=u.next();!d.done;d=u.next()){var f=d.value;try{for(var p=(a=void 0,Pc(n)),h=p.next();!h.done;h=p.next()){var y=h.value,m=y(f);if(m){c.push(m);break}}}catch(w){a={error:w}}finally{try{h&&!h.done&&(l=p.return)&&l.call(p)}finally{if(a)throw a.error}}}}catch(w){i={error:w}}finally{try{d&&!d.done&&(s=u.return)&&s.call(u)}finally{if(i)throw i.error}}return jIt(c)}}function jIt(t){if(!t.length)return[];var e=t,n=e[0].function||"",r=e[e.length-1].function||"";return(n.indexOf("captureMessage")!==-1||n.indexOf("captureException")!==-1)&&(e=e.slice(1)),r.indexOf("sentryWrapped")!==-1&&(e=e.slice(0,-1)),e.slice(0,FIt).map(function(o){return de(de({},o),{filename:o.filename||e[0].filename,function:o.function||"?"})}).reverse()}var S_="<anonymous>";function fl(t){try{return!t||typeof t!="function"?S_:t.name||S_}catch(e){return S_}}function Lb(){if(!("fetch"in un()))return!1;try{return new Headers,new Request(""),new Response,!0}catch(t){return!1}}function Xk(t){return t&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function zIt(){if(!Lb())return!1;var t=un();if(Xk(t.fetch))return!0;var e=!1,n=t.document;if(n&&typeof n.createElement=="function")try{var r=n.createElement("iframe");r.hidden=!0,n.head.appendChild(r),r.contentWindow&&r.contentWindow.fetch&&(e=Xk(r.contentWindow.fetch)),n.head.removeChild(r)}catch(o){rf&&pt.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",o)}return e}function qIt(){if(!Lb())return!1;try{return new Request("_",{referrerPolicy:"origin"}),!0}catch(t){return!1}}function WIt(){var t=un(),e=t.chrome,n=e&&e.app&&e.app.runtime,r="history"in t&&!!t.history.pushState&&!!t.history.replaceState;return!n&&r}var Qt=un(),Sp={},gI={};function UIt(t){if(!gI[t])switch(gI[t]=!0,t){case"console":VIt();break;case"dom":eDt();break;case"xhr":ZIt();break;case"fetch":HIt();break;case"history":YIt();break;case"error":tDt();break;case"unhandledrejection":nDt();break;default:rf&&pt.warn("unknown instrumentation type:",t);return}}function $a(t,e){Sp[t]=Sp[t]||[],Sp[t].push(e),UIt(t)}function ui(t,e){var n,r;if(!(!t||!Sp[t]))try{for(var o=Pc(Sp[t]||[]),i=o.next();!i.done;i=o.next()){var s=i.value;try{s(e)}catch(a){rf&&pt.error(`Error while triggering instrumentation handler.
Type: `+t+`
Name: `+fl(s)+`
Error:`,a)}}}catch(a){n={error:a}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}function VIt(){"console"in Qt&&Ky.forEach(function(t){t in Qt.console&&mr(Qt.console,t,function(e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];ui("console",{args:n,level:t}),e&&e.apply(Qt.console,n)}})})}function HIt(){zIt()&&mr(Qt,"fetch",function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r={args:e,fetchData:{method:KIt(e),url:GIt(e)},startTimestamp:Date.now()};return ui("fetch",de({},r)),t.apply(Qt,e).then(function(o){return ui("fetch",de(de({},r),{endTimestamp:Date.now(),response:o})),o},function(o){throw ui("fetch",de(de({},r),{endTimestamp:Date.now(),error:o})),o})}})}function KIt(t){return t===void 0&&(t=[]),"Request"in Qt&&_l(t[0],Request)&&t[0].method?String(t[0].method).toUpperCase():t[1]&&t[1].method?String(t[1].method).toUpperCase():"GET"}function GIt(t){return t===void 0&&(t=[]),typeof t[0]=="string"?t[0]:"Request"in Qt&&_l(t[0],Request)?t[0].url:String(t[0])}function ZIt(){if("XMLHttpRequest"in Qt){var t=XMLHttpRequest.prototype;mr(t,"open",function(e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=this,i=n[1],s=o.__sentry_xhr__={method:kd(n[0])?n[0].toUpperCase():n[0],url:n[1]};kd(i)&&s.method==="POST"&&i.match(/sentry_key/)&&(o.__sentry_own_request__=!0);var a=function(){if(o.readyState===4){try{s.status_code=o.status}catch(l){}ui("xhr",{args:n,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:o})}};return"onreadystatechange"in o&&typeof o.onreadystatechange=="function"?mr(o,"onreadystatechange",function(l){return function(){for(var c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];return a(),l.apply(o,c)}}):o.addEventListener("readystatechange",a),e.apply(o,n)}}),mr(t,"send",function(e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return this.__sentry_xhr__&&n[0]!==void 0&&(this.__sentry_xhr__.body=n[0]),ui("xhr",{args:n,startTimestamp:Date.now(),xhr:this}),e.apply(this,n)}})}}var Tg;function YIt(){if(!WIt())return;var t=Qt.onpopstate;Qt.onpopstate=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=Qt.location.href,i=Tg;if(Tg=o,ui("history",{from:i,to:o}),t)try{return t.apply(this,n)}catch(s){}};function e(n){return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var i=r.length>2?r[2]:void 0;if(i){var s=Tg,a=String(i);Tg=a,ui("history",{from:s,to:a})}return n.apply(this,r)}}mr(Qt.history,"pushState",e),mr(Qt.history,"replaceState",e)}var JIt=1e3,Ag,Ng;function XIt(t,e){if(!t||t.type!==e.type)return!0;try{if(t.target!==e.target)return!0}catch(n){}return!1}function QIt(t){if(t.type!=="keypress")return!1;try{var e=t.target;if(!e||!e.tagName)return!0;if(e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable)return!1}catch(n){}return!0}function yI(t,e){return e===void 0&&(e=!1),function(n){if(!(!n||Ng===n)&&!QIt(n)){var r=n.type==="keypress"?"input":n.type;Ag===void 0?(t({event:n,name:r,global:e}),Ng=n):XIt(Ng,n)&&(t({event:n,name:r,global:e}),Ng=n),clearTimeout(Ag),Ag=Qt.setTimeout(function(){Ag=void 0},JIt)}}}function eDt(){if("document"in Qt){var t=ui.bind(null,"dom"),e=yI(t,!0);Qt.document.addEventListener("click",e,!1),Qt.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach(function(n){var r=Qt[n]&&Qt[n].prototype;!r||!r.hasOwnProperty||!r.hasOwnProperty("addEventListener")||(mr(r,"addEventListener",function(o){return function(i,s,a){if(i==="click"||i=="keypress")try{var l=this,c=l.__sentry_instrumentation_handlers__=l.__sentry_instrumentation_handlers__||{},u=c[i]=c[i]||{refCount:0};if(!u.handler){var d=yI(t);u.handler=d,o.call(this,i,d,a)}u.refCount+=1}catch(f){}return o.call(this,i,s,a)}}),mr(r,"removeEventListener",function(o){return function(i,s,a){if(i==="click"||i=="keypress")try{var l=this,c=l.__sentry_instrumentation_handlers__||{},u=c[i];u&&(u.refCount-=1,u.refCount<=0&&(o.call(this,i,u.handler,a),u.handler=void 0,delete c[i]),Object.keys(c).length===0&&delete l.__sentry_instrumentation_handlers__)}catch(d){}return o.call(this,i,s,a)}}))})}}var E_=null;function tDt(){E_=Qt.onerror,Qt.onerror=function(t,e,n,r,o){return ui("error",{column:r,error:o,line:n,msg:t,url:e}),E_?E_.apply(this,arguments):!1}}var C_=null;function nDt(){C_=Qt.onunhandledrejection,Qt.onunhandledrejection=function(t){return ui("unhandledrejection",t),C_?C_.apply(this,arguments):!0}}function rDt(){var t=typeof WeakSet=="function",e=t?new WeakSet:[];function n(o){if(t)return e.has(o)?!0:(e.add(o),!1);for(var i=0;i<e.length;i++){var s=e[i];if(s===o)return!0}return e.push(o),!1}function r(o){if(t)e.delete(o);else for(var i=0;i<e.length;i++)if(e[i]===o){e.splice(i,1);break}}return[n,r]}function Vu(){var t=un(),e=t.crypto||t.msCrypto;if(e!==void 0&&e.getRandomValues){var n=new Uint16Array(8);e.getRandomValues(n),n[3]=n[3]&4095|16384,n[4]=n[4]&16383|32768;var r=function(o){for(var i=o.toString(16);i.length<4;)i="0"+i;return i};return r(n[0])+r(n[1])+r(n[2])+r(n[3])+r(n[4])+r(n[5])+r(n[6])+r(n[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(o){var i=Math.random()*16|0,s=o==="x"?i:i&3|8;return s.toString(16)})}function T_(t){if(!t)return{};var e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};var n=e[6]||"",r=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],relative:e[5]+n+r}}function Lz(t){return t.exception&&t.exception.values?t.exception.values[0]:void 0}function Xl(t){var e=t.message,n=t.event_id;if(e)return e;var r=Lz(t);return r?r.type&&r.value?r.type+": "+r.value:r.type||r.value||n||"<unknown>":n||"<unknown>"}function Qk(t,e,n){var r=t.exception=t.exception||{},o=r.values=r.values||[],i=o[0]=o[0]||{};i.value||(i.value=e||""),i.type||(i.type=n||"Error")}function Ph(t,e){var n=Lz(t);if(n){var r={type:"generic",handled:!0},o=n.mechanism;if(n.mechanism=de(de(de({},r),o),e),e&&"data"in e){var i=de(de({},o&&o.data),e.data);n.mechanism.data=i}}}function bI(t){if(t&&t.__sentry_captured__)return!0;try{Mb(t,"__sentry_captured__",!0)}catch(e){}return!1}function Bl(t,e,n){e===void 0&&(e=1/0),n===void 0&&(n=1/0);try{return Bz("",t,e,n)}catch(r){return{ERROR:"**non-serializable** ("+r+")"}}}function Fz(t,e,n){e===void 0&&(e=3),n===void 0&&(n=100*1024);var r=Bl(t,e);return sDt(r)>n?Fz(t,e-1,n):r}function Bz(t,e,n,r,o){n===void 0&&(n=1/0),r===void 0&&(r=1/0),o===void 0&&(o=rDt());var i=Nr(o,2),s=i[0],a=i[1],l=e;if(l&&typeof l.toJSON=="function")try{return l.toJSON()}catch(y){}if(e===null||["number","boolean","string"].includes(typeof e)&&!kIt(e))return e;var c=oDt(t,e);if(!c.startsWith("[object "))return c;if(n===0)return c.replace("object ","");if(s(e))return"[Circular ~]";var u=Array.isArray(e)?[]:{},d=0,f=n2(e)||Db(e)?Mz(e):e;for(var p in f)if(Object.prototype.hasOwnProperty.call(f,p)){if(d>=r){u[p]="[MaxProperties ~]";break}var h=f[p];u[p]=Bz(p,h,n-1,r,o),d+=1}return a(e),u}function oDt(t,e){try{return t==="domain"&&e&&typeof e=="object"&&e._events?"[Domain]":t==="domainEmitter"?"[DomainEmitter]":typeof global!="undefined"&&e===global?"[Global]":typeof window!="undefined"&&e===window?"[Window]":typeof document!="undefined"&&e===document?"[Document]":xIt(e)?"[SyntheticEvent]":typeof e=="number"&&e!==e?"[NaN]":e===void 0?"[undefined]":typeof e=="function"?"[Function: "+fl(e)+"]":typeof e=="symbol"?"["+String(e)+"]":typeof e=="bigint"?"[BigInt: "+String(e)+"]":"[object "+Object.getPrototypeOf(e).constructor.name+"]"}catch(n){return"**non-serializable** ("+n+")"}}function iDt(t){return~-encodeURI(t).split(/%..|./).length}function sDt(t){return iDt(JSON.stringify(t))}function Oc(t){return new xl(function(e){e(t)})}function Oh(t){return new xl(function(e,n){n(t)})}var xl=function(){function t(e){var n=this;this._state=0,this._handlers=[],this._resolve=function(r){n._setResult(1,r)},this._reject=function(r){n._setResult(2,r)},this._setResult=function(r,o){if(n._state===0){if(o2(o)){o.then(n._resolve,n._reject);return}n._state=r,n._value=o,n._executeHandlers()}},this._executeHandlers=function(){if(n._state!==0){var r=n._handlers.slice();n._handlers=[],r.forEach(function(o){o[0]||(n._state===1&&o[1](n._value),n._state===2&&o[2](n._value),o[0]=!0)})}};try{e(this._resolve,this._reject)}catch(r){this._reject(r)}}return t.prototype.then=function(e,n){var r=this;return new t(function(o,i){r._handlers.push([!1,function(s){if(!e)o(s);else try{o(e(s))}catch(a){i(a)}},function(s){if(!n)i(s);else try{o(n(s))}catch(a){i(a)}}]),r._executeHandlers()})},t.prototype.catch=function(e){return this.then(function(n){return n},e)},t.prototype.finally=function(e){var n=this;return new t(function(r,o){var i,s;return n.then(function(a){s=!1,i=a,e&&e()},function(a){s=!0,i=a,e&&e()}).then(function(){if(s){o(i);return}r(i)})})},t}();function jz(t){var e=[];function n(){return t===void 0||e.length<t}function r(s){return e.splice(e.indexOf(s),1)[0]}function o(s){if(!n())return Oh(new En("Not adding Promise due to buffer limit reached."));var a=s();return e.indexOf(a)===-1&&e.push(a),a.then(function(){return r(a)}).then(null,function(){return r(a).then(null,function(){})}),a}function i(s){return new xl(function(a,l){var c=e.length;if(!c)return a(!0);var u=setTimeout(function(){s&&s>0&&a(!1)},s);e.forEach(function(d){Oc(d).then(function(){--c||(clearTimeout(u),a(!0))},l)})})}return{$:e,add:o,drain:i}}function aDt(t){return OIt.indexOf(t)!==-1}function lDt(t){return t==="warn"?ls.Warning:aDt(t)?t:ls.Log}function zz(t){return t>=200&&t<300?"success":t===429?"rate_limit":t>=400&&t<500?"invalid":t>=500?"failed":"unknown"}var e$={nowSeconds:function(){return Date.now()/1e3}};function cDt(){var t=un().performance;if(!(!t||!t.now)){var e=Date.now()-t.now();return{now:function(){return t.now()},timeOrigin:e}}}function uDt(){try{var t=yIt(module,"perf_hooks");return t.performance}catch(e){return}}var A_=e2()?uDt():cDt(),vI=A_===void 0?e$:{nowSeconds:function(){return(A_.timeOrigin+A_.now())/1e3}},Fb=e$.nowSeconds.bind(e$),wI=vI.nowSeconds.bind(vI);(function(){var t=un().performance;if(!(!t||!t.now)){var e=3600*1e3,n=t.now(),r=Date.now(),o=t.timeOrigin?Math.abs(t.timeOrigin+n-r):e,i=o<e,s=t.timing&&t.timing.navigationStart,a=typeof s=="number",l=a?Math.abs(s+n-r):e,c=l<e;return i||c?o<=l?t.timeOrigin:s:r}})();function Bb(t,e){return e===void 0&&(e=[]),[t,e]}function dDt(t){var e=Nr(t,2),n=Nr(e[1],1),r=Nr(n[0],1),o=r[0];return o.type}function jb(t){var e=Nr(t,2),n=e[0],r=e[1],o=JSON.stringify(n);return r.reduce(function(i,s){var a=Nr(s,2),l=a[0],c=a[1],u=r2(c)?String(c):JSON.stringify(c);return i+`
`+JSON.stringify(l)+`
`+u},o)}function fDt(t,e,n){var r=[{type:"client_report"},{timestamp:n||Fb(),discarded_events:t}];return Bb(e?{dsn:e}:{},[r])}var pDt=60*1e3;function hDt(t,e){e===void 0&&(e=Date.now());var n=parseInt(""+t,10);if(!isNaN(n))return n*1e3;var r=Date.parse(""+t);return isNaN(r)?pDt:r-e}function l2(t,e){return t[e]||t.all||0}function qz(t,e,n){return n===void 0&&(n=Date.now()),l2(t,e)>n}function Wz(t,e,n){var r,o,i,s;n===void 0&&(n=Date.now());var a=de({},t),l=e["x-sentry-rate-limits"],c=e["retry-after"];if(l)try{for(var u=Pc(l.trim().split(",")),d=u.next();!d.done;d=u.next()){var f=d.value,p=f.split(":",2),h=parseInt(p[0],10),y=(isNaN(h)?60:h)*1e3;if(!p[1])a.all=n+y;else try{for(var m=(i=void 0,Pc(p[1].split(";"))),w=m.next();!w.done;w=m.next()){var x=w.value;a[x]=n+y}}catch($){i={error:$}}finally{try{w&&!w.done&&(s=m.return)&&s.call(m)}finally{if(i)throw i.error}}}}catch($){r={error:$}}finally{try{d&&!d.done&&(o=u.return)&&o.call(u)}finally{if(r)throw r.error}}else c&&(a.all=n+hDt(c,n));return a}var _I=100,Gy=function(){function t(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={}}return t.clone=function(e){var n=new t;return e&&(n._breadcrumbs=kn(e._breadcrumbs),n._tags=de({},e._tags),n._extra=de({},e._extra),n._contexts=de({},e._contexts),n._user=e._user,n._level=e._level,n._span=e._span,n._session=e._session,n._transactionName=e._transactionName,n._fingerprint=e._fingerprint,n._eventProcessors=kn(e._eventProcessors),n._requestSession=e._requestSession),n},t.prototype.addScopeListener=function(e){this._scopeListeners.push(e)},t.prototype.addEventProcessor=function(e){return this._eventProcessors.push(e),this},t.prototype.setUser=function(e){return this._user=e||{},this._session&&this._session.update({user:e}),this._notifyScopeListeners(),this},t.prototype.getUser=function(){return this._user},t.prototype.getRequestSession=function(){return this._requestSession},t.prototype.setRequestSession=function(e){return this._requestSession=e,this},t.prototype.setTags=function(e){return this._tags=de(de({},this._tags),e),this._notifyScopeListeners(),this},t.prototype.setTag=function(e,n){var r;return this._tags=de(de({},this._tags),(r={},r[e]=n,r)),this._notifyScopeListeners(),this},t.prototype.setExtras=function(e){return this._extra=de(de({},this._extra),e),this._notifyScopeListeners(),this},t.prototype.setExtra=function(e,n){var r;return this._extra=de(de({},this._extra),(r={},r[e]=n,r)),this._notifyScopeListeners(),this},t.prototype.setFingerprint=function(e){return this._fingerprint=e,this._notifyScopeListeners(),this},t.prototype.setLevel=function(e){return this._level=e,this._notifyScopeListeners(),this},t.prototype.setTransactionName=function(e){return this._transactionName=e,this._notifyScopeListeners(),this},t.prototype.setTransaction=function(e){return this.setTransactionName(e)},t.prototype.setContext=function(e,n){var r;return n===null?delete this._contexts[e]:this._contexts=de(de({},this._contexts),(r={},r[e]=n,r)),this._notifyScopeListeners(),this},t.prototype.setSpan=function(e){return this._span=e,this._notifyScopeListeners(),this},t.prototype.getSpan=function(){return this._span},t.prototype.getTransaction=function(){var e=this.getSpan();return e&&e.transaction},t.prototype.setSession=function(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this},t.prototype.getSession=function(){return this._session},t.prototype.update=function(e){if(!e)return this;if(typeof e=="function"){var n=e(this);return n instanceof t?n:this}return e instanceof t?(this._tags=de(de({},this._tags),e._tags),this._extra=de(de({},this._extra),e._extra),this._contexts=de(de({},this._contexts),e._contexts),e._user&&Object.keys(e._user).length&&(this._user=e._user),e._level&&(this._level=e._level),e._fingerprint&&(this._fingerprint=e._fingerprint),e._requestSession&&(this._requestSession=e._requestSession)):$d(e)&&(e=e,this._tags=de(de({},this._tags),e.tags),this._extra=de(de({},this._extra),e.extra),this._contexts=de(de({},this._contexts),e.contexts),e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint),e.requestSession&&(this._requestSession=e.requestSession)),this},t.prototype.clear=function(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this},t.prototype.addBreadcrumb=function(e,n){var r=typeof n=="number"?Math.min(n,_I):_I;if(r<=0)return this;var o=de({timestamp:Fb()},e);return this._breadcrumbs=kn(this._breadcrumbs,[o]).slice(-r),this._notifyScopeListeners(),this},t.prototype.clearBreadcrumbs=function(){return this._breadcrumbs=[],this._notifyScopeListeners(),this},t.prototype.applyToEvent=function(e,n){if(this._extra&&Object.keys(this._extra).length&&(e.extra=de(de({},this._extra),e.extra)),this._tags&&Object.keys(this._tags).length&&(e.tags=de(de({},this._tags),e.tags)),this._user&&Object.keys(this._user).length&&(e.user=de(de({},this._user),e.user)),this._contexts&&Object.keys(this._contexts).length&&(e.contexts=de(de({},this._contexts),e.contexts)),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span){e.contexts=de({trace:this._span.getTraceContext()},e.contexts);var r=this._span.transaction&&this._span.transaction.name;r&&(e.tags=de({transaction:r},e.tags))}return this._applyFingerprint(e),e.breadcrumbs=kn(e.breadcrumbs||[],this._breadcrumbs),e.breadcrumbs=e.breadcrumbs.length>0?e.breadcrumbs:void 0,e.sdkProcessingMetadata=this._sdkProcessingMetadata,this._notifyEventProcessors(kn(Uz(),this._eventProcessors),e,n)},t.prototype.setSDKProcessingMetadata=function(e){return this._sdkProcessingMetadata=de(de({},this._sdkProcessingMetadata),e),this},t.prototype._notifyEventProcessors=function(e,n,r,o){var i=this;return o===void 0&&(o=0),new xl(function(s,a){var l=e[o];if(n===null||typeof l!="function")s(n);else{var c=l(de({},n),r);o2(c)?c.then(function(u){return i._notifyEventProcessors(e,u,r,o+1).then(s)}).then(null,a):i._notifyEventProcessors(e,c,r,o+1).then(s).then(null,a)}})},t.prototype._notifyScopeListeners=function(){var e=this;this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(function(n){n(e)}),this._notifyingListeners=!1)},t.prototype._applyFingerprint=function(e){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint},t}();function Uz(){return t2("globalEventProcessors",function(){return[]})}function c2(t){Uz().push(t)}var mDt=function(){function t(e){this.errors=0,this.sid=Vu(),this.duration=0,this.status="ok",this.init=!0,this.ignoreDuration=!1;var n=wI();this.timestamp=n,this.started=n,e&&this.update(e)}return t.prototype.update=function(e){if(e===void 0&&(e={}),e.user&&(!this.ipAddress&&e.user.ip_address&&(this.ipAddress=e.user.ip_address),!this.did&&!e.did&&(this.did=e.user.id||e.user.email||e.user.username)),this.timestamp=e.timestamp||wI(),e.ignoreDuration&&(this.ignoreDuration=e.ignoreDuration),e.sid&&(this.sid=e.sid.length===32?e.sid:Vu()),e.init!==void 0&&(this.init=e.init),!this.did&&e.did&&(this.did=""+e.did),typeof e.started=="number"&&(this.started=e.started),this.ignoreDuration)this.duration=void 0;else if(typeof e.duration=="number")this.duration=e.duration;else{var n=this.timestamp-this.started;this.duration=n>=0?n:0}e.release&&(this.release=e.release),e.environment&&(this.environment=e.environment),!this.ipAddress&&e.ipAddress&&(this.ipAddress=e.ipAddress),!this.userAgent&&e.userAgent&&(this.userAgent=e.userAgent),typeof e.errors=="number"&&(this.errors=e.errors),e.status&&(this.status=e.status)},t.prototype.close=function(e){e?this.update({status:e}):this.status==="ok"?this.update({status:"exited"}):this.update()},t.prototype.toJSON=function(){return Jk({sid:""+this.sid,init:this.init,started:new Date(this.started*1e3).toISOString(),timestamp:new Date(this.timestamp*1e3).toISOString(),status:this.status,errors:this.errors,did:typeof this.did=="number"||typeof this.did=="string"?""+this.did:void 0,duration:this.duration,attrs:{release:this.release,environment:this.environment,ip_address:this.ipAddress,user_agent:this.userAgent}})},t}(),xI=typeof __SENTRY_DEBUG__=="undefined"?!0:__SENTRY_DEBUG__,u2=4,gDt=100,d2=function(){function t(e,n,r){n===void 0&&(n=new Gy),r===void 0&&(r=u2),this._version=r,this._stack=[{}],this.getStackTop().scope=n,e&&this.bindClient(e)}return t.prototype.isOlderThan=function(e){return this._version<e},t.prototype.bindClient=function(e){var n=this.getStackTop();n.client=e,e&&e.setupIntegrations&&e.setupIntegrations()},t.prototype.pushScope=function(){var e=Gy.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e},t.prototype.popScope=function(){return this.getStack().length<=1?!1:!!this.getStack().pop()},t.prototype.withScope=function(e){var n=this.pushScope();try{e(n)}finally{this.popScope()}},t.prototype.getClient=function(){return this.getStackTop().client},t.prototype.getScope=function(){return this.getStackTop().scope},t.prototype.getStack=function(){return this._stack},t.prototype.getStackTop=function(){return this._stack[this._stack.length-1]},t.prototype.captureException=function(e,n){var r=this._lastEventId=n&&n.event_id?n.event_id:Vu(),o=n;if(!n){var i=void 0;try{throw new Error("Sentry syntheticException")}catch(s){i=s}o={originalException:e,syntheticException:i}}return this._invokeClient("captureException",e,de(de({},o),{event_id:r})),r},t.prototype.captureMessage=function(e,n,r){var o=this._lastEventId=r&&r.event_id?r.event_id:Vu(),i=r;if(!r){var s=void 0;try{throw new Error(e)}catch(a){s=a}i={originalException:e,syntheticException:s}}return this._invokeClient("captureMessage",e,n,de(de({},i),{event_id:o})),o},t.prototype.captureEvent=function(e,n){var r=n&&n.event_id?n.event_id:Vu();return e.type!=="transaction"&&(this._lastEventId=r),this._invokeClient("captureEvent",e,de(de({},n),{event_id:r})),r},t.prototype.lastEventId=function(){return this._lastEventId},t.prototype.addBreadcrumb=function(e,n){var r=this.getStackTop(),o=r.scope,i=r.client;if(!(!o||!i)){var s=i.getOptions&&i.getOptions()||{},a=s.beforeBreadcrumb,l=a===void 0?null:a,c=s.maxBreadcrumbs,u=c===void 0?gDt:c;if(!(u<=0)){var d=Fb(),f=de({timestamp:d},e),p=l?Iz(function(){return l(f,n)}):f;p!==null&&o.addBreadcrumb(p,u)}}},t.prototype.setUser=function(e){var n=this.getScope();n&&n.setUser(e)},t.prototype.setTags=function(e){var n=this.getScope();n&&n.setTags(e)},t.prototype.setExtras=function(e){var n=this.getScope();n&&n.setExtras(e)},t.prototype.setTag=function(e,n){var r=this.getScope();r&&r.setTag(e,n)},t.prototype.setExtra=function(e,n){var r=this.getScope();r&&r.setExtra(e,n)},t.prototype.setContext=function(e,n){var r=this.getScope();r&&r.setContext(e,n)},t.prototype.configureScope=function(e){var n=this.getStackTop(),r=n.scope,o=n.client;r&&o&&e(r)},t.prototype.run=function(e){var n=kI(this);try{e(this)}finally{kI(n)}},t.prototype.getIntegration=function(e){var n=this.getClient();if(!n)return null;try{return n.getIntegration(e)}catch(r){return xI&&pt.warn("Cannot retrieve integration "+e.id+" from the current Hub"),null}},t.prototype.startSpan=function(e){return this._callExtensionMethod("startSpan",e)},t.prototype.startTransaction=function(e,n){return this._callExtensionMethod("startTransaction",e,n)},t.prototype.traceHeaders=function(){return this._callExtensionMethod("traceHeaders")},t.prototype.captureSession=function(e){if(e===void 0&&(e=!1),e)return this.endSession();this._sendSessionUpdate()},t.prototype.endSession=function(){var e=this.getStackTop(),n=e&&e.scope,r=n&&n.getSession();r&&r.close(),this._sendSessionUpdate(),n&&n.setSession()},t.prototype.startSession=function(e){var n=this.getStackTop(),r=n.scope,o=n.client,i=o&&o.getOptions()||{},s=i.release,a=i.environment,l=un(),c=(l.navigator||{}).userAgent,u=new mDt(de(de(de({release:s,environment:a},r&&{user:r.getUser()}),c&&{userAgent:c}),e));if(r){var d=r.getSession&&r.getSession();d&&d.status==="ok"&&d.update({status:"exited"}),this.endSession(),r.setSession(u)}return u},t.prototype._sendSessionUpdate=function(){var e=this.getStackTop(),n=e.scope,r=e.client;if(n){var o=n.getSession&&n.getSession();o&&r&&r.captureSession&&r.captureSession(o)}},t.prototype._invokeClient=function(e){for(var n,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];var i=this.getStackTop(),s=i.scope,a=i.client;a&&a[e]&&(n=a)[e].apply(n,kn(r,[s]))},t.prototype._callExtensionMethod=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=zb(),i=o.__SENTRY__;if(i&&i.extensions&&typeof i.extensions[e]=="function")return i.extensions[e].apply(this,n);xI&&pt.warn("Extension method "+e+" couldn't be found, doing nothing.")},t}();function zb(){var t=un();return t.__SENTRY__=t.__SENTRY__||{extensions:{},hub:void 0},t}function kI(t){var e=zb(),n=Sa(e);return f2(e,t),n}function Lr(){var t=zb();return(!Vz(t)||Sa(t).isOlderThan(u2))&&f2(t,new d2),e2()?yDt(t):Sa(t)}function yDt(t){try{var e=zb().__SENTRY__,n=e&&e.extensions&&e.extensions.domain&&e.extensions.domain.active;if(!n)return Sa(t);if(!Vz(n)||Sa(n).isOlderThan(u2)){var r=Sa(t).getStackTop();f2(n,new d2(r.client,Gy.clone(r.scope)))}return Sa(n)}catch(o){return Sa(t)}}function Vz(t){return!!(t&&t.__SENTRY__&&t.__SENTRY__.hub)}function Sa(t){return t2("hub",function(){return new d2},t)}function f2(t,e){if(!t)return!1;var n=t.__SENTRY__=t.__SENTRY__||{};return n.hub=e,!0}function Hz(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=Lr();if(r&&r[t])return r[t].apply(r,kn(e));throw new Error("No hub defined or "+t+" was not found on the hub, please open a bug report.")}function bDt(t,e){var n=new Error("Sentry syntheticException");return Hz("captureException",t,{captureContext:e,originalException:t,syntheticException:n})}function vDt(t){Hz("withScope",t)}var wDt="7";function Zy(t,e,n){return{initDsn:t,metadata:e||{},dsn:i2(t),tunnel:n}}function Kz(t){var e=t.protocol?t.protocol+":":"",n=t.port?":"+t.port:"";return e+"//"+t.host+n+(t.path?"/"+t.path:"")+"/api/"}function Gz(t,e){return""+Kz(t)+t.projectId+"/"+e+"/"}function Zz(t){return MIt({sentry_key:t.publicKey,sentry_version:wDt})}function _Dt(t){return Gz(t,"store")}function Yz(t){return _Dt(t)+"?"+Zz(t)}function xDt(t){return Gz(t,"envelope")}function qb(t,e){return e||xDt(t)+"?"+Zz(t)}function kDt(t,e){var n=i2(t),r=Kz(n)+"embed/error-page/",o="dsn="+Pm(n);for(var i in e)if(i!=="dsn")if(i==="user"){if(!e.user)continue;e.user.name&&(o+="&name="+encodeURIComponent(e.user.name)),e.user.email&&(o+="&email="+encodeURIComponent(e.user.email))}else o+="&"+encodeURIComponent(i)+"="+encodeURIComponent(e[i]);return r+"?"+o}var xn=typeof __SENTRY_DEBUG__=="undefined"?!0:__SENTRY_DEBUG__,$I=[];function SI(t){return t.reduce(function(e,n){return e.every(function(r){return n.name!==r.name})&&e.push(n),e},[])}function $Dt(t){var e=t.defaultIntegrations&&kn(t.defaultIntegrations)||[],n=t.integrations,r=kn(SI(e));Array.isArray(n)?r=kn(r.filter(function(s){return n.every(function(a){return a.name!==s.name})}),SI(n)):typeof n=="function"&&(r=n(r),r=Array.isArray(r)?r:[r]);var o=r.map(function(s){return s.name}),i="Debug";return o.indexOf(i)!==-1&&r.push.apply(r,kn(r.splice(o.indexOf(i),1))),r}function SDt(t){$I.indexOf(t.name)===-1&&(t.setupOnce(c2,Lr),$I.push(t.name),xn&&pt.log("Integration installed: "+t.name))}function EDt(t){var e={};return $Dt(t).forEach(function(n){e[n.name]=n,SDt(n)}),Mb(e,"initialized",!0),e}var EI="Not capturing exception because it's already been captured.",CDt=function(){function t(e,n){this._integrations={},this._numProcessing=0,this._backend=new e(n),this._options=n,n.dsn&&(this._dsn=i2(n.dsn))}return t.prototype.captureException=function(e,n,r){var o=this;if(bI(e)){xn&&pt.log(EI);return}var i=n&&n.event_id;return this._process(this._getBackend().eventFromException(e,n).then(function(s){return o._captureEvent(s,n,r)}).then(function(s){i=s})),i},t.prototype.captureMessage=function(e,n,r,o){var i=this,s=r&&r.event_id,a=r2(e)?this._getBackend().eventFromMessage(String(e),n,r):this._getBackend().eventFromException(e,r);return this._process(a.then(function(l){return i._captureEvent(l,r,o)}).then(function(l){s=l})),s},t.prototype.captureEvent=function(e,n,r){if(n&&n.originalException&&bI(n.originalException)){xn&&pt.log(EI);return}var o=n&&n.event_id;return this._process(this._captureEvent(e,n,r).then(function(i){o=i})),o},t.prototype.captureSession=function(e){if(!this._isEnabled()){xn&&pt.warn("SDK not enabled, will not capture session.");return}typeof e.release!="string"?xn&&pt.warn("Discarded session because of missing or non-string release"):(this._sendSession(e),e.update({init:!1}))},t.prototype.getDsn=function(){return this._dsn},t.prototype.getOptions=function(){return this._options},t.prototype.getTransport=function(){return this._getBackend().getTransport()},t.prototype.flush=function(e){var n=this;return this._isClientDoneProcessing(e).then(function(r){return n.getTransport().close(e).then(function(o){return r&&o})})},t.prototype.close=function(e){var n=this;return this.flush(e).then(function(r){return n.getOptions().enabled=!1,r})},t.prototype.setupIntegrations=function(){this._isEnabled()&&!this._integrations.initialized&&(this._integrations=EDt(this._options))},t.prototype.getIntegration=function(e){try{return this._integrations[e.id]||null}catch(n){return xn&&pt.warn("Cannot retrieve integration "+e.id+" from the current Client"),null}},t.prototype._updateSessionFromEvent=function(e,n){var r,o,i=!1,s=!1,a=n.exception&&n.exception.values;if(a){s=!0;try{for(var l=Pc(a),c=l.next();!c.done;c=l.next()){var u=c.value,d=u.mechanism;if(d&&d.handled===!1){i=!0;break}}}catch(h){r={error:h}}finally{try{c&&!c.done&&(o=l.return)&&o.call(l)}finally{if(r)throw r.error}}}var f=e.status==="ok",p=f&&e.errors===0||f&&i;p&&(e.update(de(de({},i&&{status:"crashed"}),{errors:e.errors||Number(s||i)})),this.captureSession(e))},t.prototype._sendSession=function(e){this._getBackend().sendSession(e)},t.prototype._isClientDoneProcessing=function(e){var n=this;return new xl(function(r){var o=0,i=1,s=setInterval(function(){n._numProcessing==0?(clearInterval(s),r(!0)):(o+=i,e&&o>=e&&(clearInterval(s),r(!1)))},i)})},t.prototype._getBackend=function(){return this._backend},t.prototype._isEnabled=function(){return this.getOptions().enabled!==!1&&this._dsn!==void 0},t.prototype._prepareEvent=function(e,n,r){var o=this,i=this.getOptions(),s=i.normalizeDepth,a=s===void 0?3:s,l=i.normalizeMaxBreadth,c=l===void 0?1e3:l,u=de(de({},e),{event_id:e.event_id||(r&&r.event_id?r.event_id:Vu()),timestamp:e.timestamp||Fb()});this._applyClientOptions(u),this._applyIntegrationsMetadata(u);var d=n;r&&r.captureContext&&(d=Gy.clone(d).update(r.captureContext));var f=Oc(u);return d&&(f=d.applyToEvent(u,r)),f.then(function(p){return p&&(p.sdkProcessingMetadata=de(de({},p.sdkProcessingMetadata),{normalizeDepth:Bl(a)+" ("+typeof a+")"})),typeof a=="number"&&a>0?o._normalizeEvent(p,a,c):p})},t.prototype._normalizeEvent=function(e,n,r){if(!e)return null;var o=de(de(de(de(de({},e),e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(function(i){return de(de({},i),i.data&&{data:Bl(i.data,n,r)})})}),e.user&&{user:Bl(e.user,n,r)}),e.contexts&&{contexts:Bl(e.contexts,n,r)}),e.extra&&{extra:Bl(e.extra,n,r)});return e.contexts&&e.contexts.trace&&(o.contexts.trace=e.contexts.trace),o.sdkProcessingMetadata=de(de({},o.sdkProcessingMetadata),{baseClientNormalized:!0}),o},t.prototype._applyClientOptions=function(e){var n=this.getOptions(),r=n.environment,o=n.release,i=n.dist,s=n.maxValueLength,a=s===void 0?250:s;"environment"in e||(e.environment="environment"in n?r:"production"),e.release===void 0&&o!==void 0&&(e.release=o),e.dist===void 0&&i!==void 0&&(e.dist=i),e.message&&(e.message=$p(e.message,a));var l=e.exception&&e.exception.values&&e.exception.values[0];l&&l.value&&(l.value=$p(l.value,a));var c=e.request;c&&c.url&&(c.url=$p(c.url,a))},t.prototype._applyIntegrationsMetadata=function(e){var n=Object.keys(this._integrations);n.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=kn(e.sdk.integrations||[],n))},t.prototype._sendEvent=function(e){this._getBackend().sendEvent(e)},t.prototype._captureEvent=function(e,n,r){return this._processEvent(e,n,r).then(function(o){return o.event_id},function(o){xn&&pt.error(o)})},t.prototype._processEvent=function(e,n,r){var o=this,i=this.getOptions(),s=i.beforeSend,a=i.sampleRate,l=this.getTransport();function c(d,f){l.recordLostEvent&&l.recordLostEvent(d,f)}if(!this._isEnabled())return Oh(new En("SDK not enabled, will not capture event."));var u=e.type==="transaction";return!u&&typeof a=="number"&&Math.random()>a?(c("sample_rate","event"),Oh(new En("Discarding event because it's not included in the random sample (sampling rate = "+a+")"))):this._prepareEvent(e,r,n).then(function(d){if(d===null)throw c("event_processor",e.type||"event"),new En("An event processor returned null, will not send event.");var f=n&&n.data&&n.data.__sentry__===!0;if(f||u||!s)return d;var p=s(d,n);return TDt(p)}).then(function(d){if(d===null)throw c("before_send",e.type||"event"),new En("`beforeSend` returned `null`, will not send event.");var f=r&&r.getSession&&r.getSession();return!u&&f&&o._updateSessionFromEvent(f,d),o._sendEvent(d),d}).then(null,function(d){throw d instanceof En?d:(o.captureException(d,{data:{__sentry__:!0},originalException:d}),new En(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: `+d))})},t.prototype._process=function(e){var n=this;this._numProcessing+=1,e.then(function(r){return n._numProcessing-=1,r},function(r){return n._numProcessing-=1,r})},t}();function TDt(t){var e="`beforeSend` method has to return `null` or a valid event.";if(o2(t))return t.then(function(n){if(!($d(n)||n===null))throw new En(e);return n},function(n){throw new En("beforeSend rejected with "+n)});if(!($d(t)||t===null))throw new En(e);return t}function p2(t){if(!(!t.metadata||!t.metadata.sdk)){var e=t.metadata.sdk,n=e.name,r=e.version;return{name:n,version:r}}}function Jz(t,e){return e&&(t.sdk=t.sdk||{},t.sdk.name=t.sdk.name||e.name,t.sdk.version=t.sdk.version||e.version,t.sdk.integrations=kn(t.sdk.integrations||[],e.integrations||[]),t.sdk.packages=kn(t.sdk.packages||[],e.packages||[])),t}function Xz(t,e){var n=p2(e),r=de(de({sent_at:new Date().toISOString()},n&&{sdk:n}),!!e.tunnel&&{dsn:Pm(e.dsn)}),o="aggregates"in t?"sessions":"session",i=[{type:o},t],s=Bb(r,[i]);return[s,o]}function ADt(t,e){var n=Nr(Xz(t,e),2),r=n[0],o=n[1];return{body:jb(r),type:o,url:qb(e.dsn,e.tunnel)}}function NDt(t,e){var n=p2(e),r=t.type||"event",o=(t.sdkProcessingMetadata||{}).transactionSampling,i=o||{},s=i.method,a=i.rate;Jz(t,e.metadata.sdk),t.tags=t.tags||{},t.extra=t.extra||{},t.sdkProcessingMetadata&&t.sdkProcessingMetadata.baseClientNormalized||(t.tags.skippedNormalization=!0,t.extra.normalizeDepth=t.sdkProcessingMetadata?t.sdkProcessingMetadata.normalizeDepth:"unset"),delete t.sdkProcessingMetadata;var l=de(de({event_id:t.event_id,sent_at:new Date().toISOString()},n&&{sdk:n}),!!e.tunnel&&{dsn:Pm(e.dsn)}),c=[{type:r,sample_rates:[{id:s,rate:a}]},t];return Bb(l,[c])}function RDt(t,e){var n=p2(e),r=t.type||"event",o=r==="transaction"||!!e.tunnel,i=(t.sdkProcessingMetadata||{}).transactionSampling,s=i||{},a=s.method,l=s.rate;Jz(t,e.metadata.sdk),t.tags=t.tags||{},t.extra=t.extra||{},t.sdkProcessingMetadata&&t.sdkProcessingMetadata.baseClientNormalized||(t.tags.skippedNormalization=!0,t.extra.normalizeDepth=t.sdkProcessingMetadata?t.sdkProcessingMetadata.normalizeDepth:"unset"),delete t.sdkProcessingMetadata;var c;try{c=JSON.stringify(t)}catch(y){t.tags.JSONStringifyError=!0,t.extra.JSONStringifyError=y;try{c=JSON.stringify(Bl(t))}catch(m){var u=m;c=JSON.stringify({message:"JSON.stringify error after renormalization",extra:{message:u.message,stack:u.stack}})}}var d={body:c,type:r,url:o?qb(e.dsn,e.tunnel):Yz(e.dsn)};if(o){var f=de(de({event_id:t.event_id,sent_at:new Date().toISOString()},n&&{sdk:n}),!!e.tunnel&&{dsn:Pm(e.dsn)}),p=[{type:r,sample_rates:[{id:a,rate:l}]},d.body],h=Bb(f,[p]);d.body=jb(h)}return d}var PDt=function(){function t(){}return t.prototype.sendEvent=function(e){return Oc({reason:"NoopTransport: Event has been skipped because no Dsn is configured.",status:"skipped"})},t.prototype.close=function(e){return Oc(!0)},t}(),ODt=function(){function t(e){this._options=e,this._options.dsn||xn&&pt.warn("No DSN provided, backend will not do anything."),this._transport=this._setupTransport()}return t.prototype.eventFromException=function(e,n){throw new En("Backend has to implement `eventFromException` method")},t.prototype.eventFromMessage=function(e,n,r){throw new En("Backend has to implement `eventFromMessage` method")},t.prototype.sendEvent=function(e){if(this._newTransport&&this._options.dsn&&this._options._experiments&&this._options._experiments.newTransport){var n=Zy(this._options.dsn,this._options._metadata,this._options.tunnel),r=NDt(e,n);this._newTransport.send(r).then(null,function(o){xn&&pt.error("Error while sending event:",o)})}else this._transport.sendEvent(e).then(null,function(o){xn&&pt.error("Error while sending event:",o)})},t.prototype.sendSession=function(e){if(!this._transport.sendSession){xn&&pt.warn("Dropping session because custom transport doesn't implement sendSession");return}if(this._newTransport&&this._options.dsn&&this._options._experiments&&this._options._experiments.newTransport){var n=Zy(this._options.dsn,this._options._metadata,this._options.tunnel),r=Nr(Xz(e,n),1),o=r[0];this._newTransport.send(o).then(null,function(i){xn&&pt.error("Error while sending session:",i)})}else this._transport.sendSession(e).then(null,function(i){xn&&pt.error("Error while sending session:",i)})},t.prototype.getTransport=function(){return this._transport},t.prototype._setupTransport=function(){return new PDt},t}();function IDt(t,e){e.debug===!0&&(xn?pt.enable():console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle."));var n=Lr(),r=n.getScope();r&&r.update(e.initialScope);var o=new t(e);n.bindClient(o)}var DDt=30;function Qz(t,e,n){n===void 0&&(n=jz(t.bufferSize||DDt));var r={},o=function(s){return n.drain(s)};function i(s){var a=dDt(s),l=a==="event"?"error":a,c={category:l,body:jb(s)};if(qz(r,l))return Oh({status:"rate_limit",reason:CI(r,l)});var u=function(){return e(c).then(function(d){var f=d.body,p=d.headers,h=d.reason,y=d.statusCode,m=zz(y);return p&&(r=Wz(r,p)),m==="success"?Oc({status:m,reason:h}):Oh({status:m,reason:h||f||(m==="rate_limit"?CI(r,l):"Unknown transport error")})})};return n.add(u)}return{send:i,flush:o}}function CI(t,e){return"Too many "+e+" requests, backing off until: "+new Date(l2(t,e)).toISOString()}var TI="6.19.7",AI,MDt=function(){function t(){this.name=t.id}return t.prototype.setupOnce=function(){AI=Function.prototype.toString,Function.prototype.toString=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=a2(this)||this;return AI.apply(r,e)}},t.id="FunctionToString",t}(),LDt=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],FDt=function(){function t(e){e===void 0&&(e={}),this._options=e,this.name=t.id}return t.prototype.setupOnce=function(e,n){e(function(r){var o=n();if(o){var i=o.getIntegration(t);if(i){var s=o.getClient(),a=s?s.getOptions():{},l=BDt(i._options,a);return jDt(r,l)?null:r}}return r})},t.id="InboundFilters",t}();function BDt(t,e){return t===void 0&&(t={}),e===void 0&&(e={}),{allowUrls:kn(t.whitelistUrls||[],t.allowUrls||[],e.whitelistUrls||[],e.allowUrls||[]),denyUrls:kn(t.blacklistUrls||[],t.denyUrls||[],e.blacklistUrls||[],e.denyUrls||[]),ignoreErrors:kn(t.ignoreErrors||[],e.ignoreErrors||[],LDt),ignoreInternal:t.ignoreInternal!==void 0?t.ignoreInternal:!0}}function jDt(t,e){return e.ignoreInternal&&VDt(t)?(xn&&pt.warn(`Event dropped due to being internal Sentry Error.
Event: `+Xl(t)),!0):zDt(t,e.ignoreErrors)?(xn&&pt.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: "+Xl(t)),!0):qDt(t,e.denyUrls)?(xn&&pt.warn("Event dropped due to being matched by `denyUrls` option.\nEvent: "+Xl(t)+`.
Url: `+Yy(t)),!0):WDt(t,e.allowUrls)?!1:(xn&&pt.warn("Event dropped due to not being matched by `allowUrls` option.\nEvent: "+Xl(t)+`.
Url: `+Yy(t)),!0)}function zDt(t,e){return!e||!e.length?!1:UDt(t).some(function(n){return e.some(function(r){return s2(n,r)})})}function qDt(t,e){if(!e||!e.length)return!1;var n=Yy(t);return n?e.some(function(r){return s2(n,r)}):!1}function WDt(t,e){if(!e||!e.length)return!0;var n=Yy(t);return n?e.some(function(r){return s2(n,r)}):!0}function UDt(t){if(t.message)return[t.message];if(t.exception)try{var e=t.exception.values&&t.exception.values[0]||{},n=e.type,r=n===void 0?"":n,o=e.value,i=o===void 0?"":o;return[""+i,r+": "+i]}catch(s){return xn&&pt.error("Cannot extract message for event "+Xl(t)),[]}return[]}function VDt(t){try{return t.exception.values[0].type==="SentryError"}catch(e){}return!1}function NI(t){t===void 0&&(t=[]);for(var e=t.length-1;e>=0;e--){var n=t[e];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function Yy(t){try{if(t.stacktrace)return NI(t.stacktrace.frames);var e;try{e=t.exception.values[0].stacktrace.frames}catch(n){}return e?NI(e):null}catch(n){return xn&&pt.error("Cannot extract url for event "+Xl(t)),null}}var of="?",HDt=10,KDt=20,GDt=30,ZDt=40,YDt=50;function Om(t,e,n,r){var o={filename:t,function:e,in_app:!0};return n!==void 0&&(o.lineno=n),r!==void 0&&(o.colno=r),o}var JDt=/^\s*at (?:(.*?) ?\((?:address at )?)?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,XDt=/\((\S*)(?::(\d+))(?::(\d+))\)/,QDt=function(t){var e=JDt.exec(t);if(e){var n=e[2]&&e[2].indexOf("eval")===0;if(n){var r=XDt.exec(e[2]);r&&(e[2]=r[1],e[3]=r[2],e[4]=r[3])}var o=Nr(eq(e[1]||of,e[2]),2),i=o[0],s=o[1];return Om(s,i,e[3]?+e[3]:void 0,e[4]?+e[4]:void 0)}},e5t=[GDt,QDt],t5t=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|capacitor).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,n5t=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,r5t=function(t){var e,n=t5t.exec(t);if(n){var r=n[3]&&n[3].indexOf(" > eval")>-1;if(r){var o=n5t.exec(n[3]);o&&(n[1]=n[1]||"eval",n[3]=o[1],n[4]=o[2],n[5]="")}var i=n[3],s=n[1]||of;return e=Nr(eq(s,i),2),s=e[0],i=e[1],Om(i,s,n[4]?+n[4]:void 0,n[5]?+n[5]:void 0)}},o5t=[YDt,r5t],i5t=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,s5t=function(t){var e=i5t.exec(t);return e?Om(e[2],e[1]||of,+e[3],e[4]?+e[4]:void 0):void 0},a5t=[ZDt,s5t],l5t=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,c5t=function(t){var e=l5t.exec(t);return e?Om(e[2],e[3]||of,+e[1]):void 0},u5t=[HDt,c5t],d5t=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,f5t=function(t){var e=d5t.exec(t);return e?Om(e[5],e[3]||e[4]||of,+e[1],+e[2]):void 0},p5t=[KDt,f5t],eq=function(t,e){var n=t.indexOf("safari-extension")!==-1,r=t.indexOf("safari-web-extension")!==-1;return n||r?[t.indexOf("@")!==-1?t.split("@")[0]:of,n?"safari-extension:"+e:"safari-web-extension:"+e]:[t,e]};function tq(t){var e=h2(t),n={type:t&&t.name,value:y5t(t)};return e.length&&(n.stacktrace={frames:e}),n.type===void 0&&n.value===""&&(n.value="Unrecoverable error caught"),n}function h5t(t,e,n){var r={exception:{values:[{type:Db(t)?t.constructor.name:n?"UnhandledRejection":"Error",value:"Non-Error "+(n?"promise rejection":"exception")+" captured with keys: "+LIt(t)}]},extra:{__serialized__:Fz(t)}};if(e){var o=h2(e);o.length&&(r.stacktrace={frames:o})}return r}function N_(t){return{exception:{values:[tq(t)]}}}function h2(t){var e=t.stacktrace||t.stack||"",n=g5t(t);try{return BIt(u5t,p5t,e5t,a5t,o5t)(e,n)}catch(r){}return[]}var m5t=/Minified React error #\d+;/i;function g5t(t){if(t){if(typeof t.framesToPop=="number")return t.framesToPop;if(m5t.test(t.message))return 1}return 0}function y5t(t){var e=t&&t.message;return e?e.error&&typeof e.error.message=="string"?e.error.message:e:"No error message"}function b5t(t,e,n){var r=e&&e.syntheticException||void 0,o=m2(t,r,n);return Ph(o),o.level=ls.Error,e&&e.event_id&&(o.event_id=e.event_id),Oc(o)}function v5t(t,e,n,r){e===void 0&&(e=ls.Info);var o=n&&n.syntheticException||void 0,i=t$(t,o,r);return i.level=e,n&&n.event_id&&(i.event_id=n.event_id),Oc(i)}function m2(t,e,n,r){var o;if(Pz(t)&&t.error){var i=t;return N_(i.error)}if(dI(t)||vIt(t)){var s=t;if("stack"in t)o=N_(t);else{var a=s.name||(dI(s)?"DOMError":"DOMException"),l=s.message?a+": "+s.message:a;o=t$(l,e,n),Qk(o,l)}return"code"in s&&(o.tags=de(de({},o.tags),{"DOMException.code":""+s.code})),o}if(n2(t))return N_(t);if($d(t)||Db(t)){var c=t;return o=h5t(c,e,r),Ph(o,{synthetic:!0}),o}return o=t$(t,e,n),Qk(o,""+t,void 0),Ph(o,{synthetic:!0}),o}function t$(t,e,n){var r={message:t};if(n&&e){var o=h2(e);o.length&&(r.stacktrace={frames:o})}return r}var Co=typeof __SENTRY_DEBUG__=="undefined"?!0:__SENTRY_DEBUG__,ni=un(),Rg;function g2(){if(Rg)return Rg;if(Xk(ni.fetch))return Rg=ni.fetch.bind(ni);var t=ni.document,e=ni.fetch;if(t&&typeof t.createElement=="function")try{var n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n);var r=n.contentWindow;r&&r.fetch&&(e=r.fetch),t.head.removeChild(n)}catch(o){Co&&pt.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",o)}return Rg=e.bind(ni)}function w5t(t,e){var n=Object.prototype.toString.call(ni&&ni.navigator)==="[object Navigator]",r=n&&typeof ni.navigator.sendBeacon=="function";if(r){var o=ni.navigator.sendBeacon.bind(ni.navigator);return o(t,e)}if(Lb()){var i=g2();return mIt(i(t,{body:e,method:"POST",credentials:"omit",keepalive:!0}))}}function R_(t){var e=t;return e==="event"?"error":e}var P_=un(),nq=function(){function t(e){var n=this;this.options=e,this._buffer=jz(30),this._rateLimits={},this._outcomes={},this._api=Zy(e.dsn,e._metadata,e.tunnel),this.url=Yz(this._api.dsn),this.options.sendClientReports&&P_.document&&P_.document.addEventListener("visibilitychange",function(){P_.document.visibilityState==="hidden"&&n._flushOutcomes()})}return t.prototype.sendEvent=function(e){return this._sendRequest(RDt(e,this._api),e)},t.prototype.sendSession=function(e){return this._sendRequest(ADt(e,this._api),e)},t.prototype.close=function(e){return this._buffer.drain(e)},t.prototype.recordLostEvent=function(e,n){var r;if(this.options.sendClientReports){var o=R_(n)+":"+e;Co&&pt.log("Adding outcome: "+o),this._outcomes[o]=(r=this._outcomes[o],(r!=null?r:0)+1)}},t.prototype._flushOutcomes=function(){if(this.options.sendClientReports){var e=this._outcomes;if(this._outcomes={},!Object.keys(e).length){Co&&pt.log("No outcomes to flush");return}Co&&pt.log(`Flushing outcomes:
`+JSON.stringify(e,null,2));var n=qb(this._api.dsn,this._api.tunnel),r=Object.keys(e).map(function(i){var s=Nr(i.split(":"),2),a=s[0],l=s[1];return{reason:l,category:a,quantity:e[i]}}),o=fDt(r,this._api.tunnel&&Pm(this._api.dsn));try{w5t(n,jb(o))}catch(i){Co&&pt.error(i)}}},t.prototype._handleResponse=function(e){var n=e.requestType,r=e.response,o=e.headers,i=e.resolve,s=e.reject,a=zz(r.status);if(this._rateLimits=Wz(this._rateLimits,o),this._isRateLimited(n)&&Co&&pt.warn("Too many "+n+" requests, backing off until: "+this._disabledUntil(n)),a==="success"){i({status:a});return}s(r)},t.prototype._disabledUntil=function(e){var n=R_(e);return new Date(l2(this._rateLimits,n))},t.prototype._isRateLimited=function(e){var n=R_(e);return qz(this._rateLimits,n)},t}(),_5t=function(t){Rm(e,t);function e(n,r){r===void 0&&(r=g2());var o=t.call(this,n)||this;return o._fetch=r,o}return e.prototype._sendRequest=function(n,r){var o=this;if(this._isRateLimited(n.type))return this.recordLostEvent("ratelimit_backoff",n.type),Promise.reject({event:r,type:n.type,reason:"Transport for "+n.type+" requests locked till "+this._disabledUntil(n.type)+" due to too many requests.",status:429});var i={body:n.body,method:"POST",referrerPolicy:qIt()?"origin":""};return this.options.fetchParameters!==void 0&&Object.assign(i,this.options.fetchParameters),this.options.headers!==void 0&&(i.headers=this.options.headers),this._buffer.add(function(){return new xl(function(s,a){o._fetch(n.url,i).then(function(l){var c={"x-sentry-rate-limits":l.headers.get("X-Sentry-Rate-Limits"),"retry-after":l.headers.get("Retry-After")};o._handleResponse({requestType:n.type,response:l,headers:c,resolve:s,reject:a})}).catch(a)})}).then(void 0,function(s){throw s instanceof En?o.recordLostEvent("queue_overflow",n.type):o.recordLostEvent("network_error",n.type),s})},e}(nq),x5t=function(t){Rm(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype._sendRequest=function(n,r){var o=this;return this._isRateLimited(n.type)?(this.recordLostEvent("ratelimit_backoff",n.type),Promise.reject({event:r,type:n.type,reason:"Transport for "+n.type+" requests locked till "+this._disabledUntil(n.type)+" due to too many requests.",status:429})):this._buffer.add(function(){return new xl(function(i,s){var a=new XMLHttpRequest;a.onreadystatechange=function(){if(a.readyState===4){var c={"x-sentry-rate-limits":a.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":a.getResponseHeader("Retry-After")};o._handleResponse({requestType:n.type,response:a,headers:c,resolve:i,reject:s})}},a.open("POST",n.url);for(var l in o.options.headers)Object.prototype.hasOwnProperty.call(o.options.headers,l)&&a.setRequestHeader(l,o.options.headers[l]);a.send(n.body)})}).then(void 0,function(i){throw i instanceof En?o.recordLostEvent("queue_overflow",n.type):o.recordLostEvent("network_error",n.type),i})},e}(nq);function k5t(t,e){e===void 0&&(e=g2());function n(r){var o=de({body:r.body,method:"POST",referrerPolicy:"origin"},t.requestOptions);return e(t.url,o).then(function(i){return i.text().then(function(s){return{body:s,headers:{"x-sentry-rate-limits":i.headers.get("X-Sentry-Rate-Limits"),"retry-after":i.headers.get("Retry-After")},reason:i.statusText,statusCode:i.status}})})}return Qz({bufferSize:t.bufferSize},n)}var $5t=4;function S5t(t){function e(n){return new xl(function(r,o){var i=new XMLHttpRequest;i.onreadystatechange=function(){if(i.readyState===$5t){var a={body:i.response,headers:{"x-sentry-rate-limits":i.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":i.getResponseHeader("Retry-After")},reason:i.statusText,statusCode:i.status};r(a)}},i.open("POST",t.url);for(var s in t.headers)Object.prototype.hasOwnProperty.call(t.headers,s)&&i.setRequestHeader(s,t.headers[s]);i.send(n.body)})}return Qz({bufferSize:t.bufferSize},e)}var E5t=function(t){Rm(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.eventFromException=function(n,r){return b5t(n,r,this._options.attachStacktrace)},e.prototype.eventFromMessage=function(n,r,o){return r===void 0&&(r=ls.Info),v5t(n,r,o,this._options.attachStacktrace)},e.prototype._setupTransport=function(){if(!this._options.dsn)return t.prototype._setupTransport.call(this);var n=de(de({},this._options.transportOptions),{dsn:this._options.dsn,tunnel:this._options.tunnel,sendClientReports:this._options.sendClientReports,_metadata:this._options._metadata}),r=Zy(n.dsn,n._metadata,n.tunnel),o=qb(r.dsn,r.tunnel);if(this._options.transport)return new this._options.transport(n);if(Lb()){var i=de({},n.fetchParameters);return this._newTransport=k5t({requestOptions:i,url:o}),new _5t(n)}return this._newTransport=S5t({url:o,headers:n.headers}),new x5t(n)},e}(ODt),Pg=un(),n$=0;function rq(){return n$>0}function C5t(){n$+=1,setTimeout(function(){n$-=1})}function Sd(t,e,n){if(e===void 0&&(e={}),typeof t!="function")return t;try{var r=t.__sentry_wrapped__;if(r)return r;if(a2(t))return t}catch(a){return t}var o=function(){var a=Array.prototype.slice.call(arguments);try{n&&typeof n=="function"&&n.apply(this,arguments);var l=a.map(function(c){return Sd(c,e)});return t.apply(this,l)}catch(c){throw C5t(),vDt(function(u){u.addEventProcessor(function(d){return e.mechanism&&(Qk(d,void 0,void 0),Ph(d,e.mechanism)),d.extra=de(de({},d.extra),{arguments:a}),d}),bDt(c)}),c}};try{for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(o[i]=t[i])}catch(a){}Dz(o,t),Mb(t,"__sentry_wrapped__",o);try{var s=Object.getOwnPropertyDescriptor(o,"name");s.configurable&&Object.defineProperty(o,"name",{get:function(){return t.name}})}catch(a){}return o}function T5t(t){if(t===void 0&&(t={}),!!Pg.document){if(!t.eventId){Co&&pt.error("Missing eventId option in showReportDialog call");return}if(!t.dsn){Co&&pt.error("Missing dsn option in showReportDialog call");return}var e=Pg.document.createElement("script");e.async=!0,e.src=kDt(t.dsn,t),t.onLoad&&(e.onload=t.onLoad);var n=Pg.document.head||Pg.document.body;n&&n.appendChild(e)}}var y2=function(){function t(e){this.name=t.id,this._installFunc={onerror:A5t,onunhandledrejection:N5t},this._options=de({onerror:!0,onunhandledrejection:!0},e)}return t.prototype.setupOnce=function(){Error.stackTraceLimit=50;var e=this._options;for(var n in e){var r=this._installFunc[n];r&&e[n]&&(O5t(n),r(),this._installFunc[n]=void 0)}},t.id="GlobalHandlers",t}();function A5t(){$a("error",function(t){var e=Nr(sq(),2),n=e[0],r=e[1];if(n.getIntegration(y2)){var o=t.msg,i=t.url,s=t.line,a=t.column,l=t.error;if(!(rq()||l&&l.__sentry_own_request__)){var c=l===void 0&&kd(o)?P5t(o,i,s,a):oq(m2(l||o,void 0,r,!1),i,s,a);c.level=ls.Error,iq(n,l,c,"onerror")}}})}function N5t(){$a("unhandledrejection",function(t){var e=Nr(sq(),2),n=e[0],r=e[1];if(n.getIntegration(y2)){var o=t;try{"reason"in t?o=t.reason:"detail"in t&&"reason"in t.detail&&(o=t.detail.reason)}catch(s){}if(rq()||o&&o.__sentry_own_request__)return!0;var i=r2(o)?R5t(o):m2(o,void 0,r,!0);i.level=ls.Error,iq(n,o,i,"onunhandledrejection")}})}function R5t(t){return{exception:{values:[{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+String(t)}]}}}function P5t(t,e,n,r){var o=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i,i=Pz(t)?t.message:t,s="Error",a=i.match(o);a&&(s=a[1],i=a[2]);var l={exception:{values:[{type:s,value:i}]}};return oq(l,e,n,r)}function oq(t,e,n,r){var o=t.exception=t.exception||{},i=o.values=o.values||[],s=i[0]=i[0]||{},a=s.stacktrace=s.stacktrace||{},l=a.frames=a.frames||[],c=isNaN(parseInt(r,10))?void 0:r,u=isNaN(parseInt(n,10))?void 0:n,d=kd(e)&&e.length>0?e:SIt();return l.length===0&&l.push({colno:c,filename:d,function:"?",in_app:!0,lineno:u}),t}function O5t(t){Co&&pt.log("Global Handler attached: "+t)}function iq(t,e,n,r){Ph(n,{handled:!1,type:r}),t.captureEvent(n,{originalException:e})}function sq(){var t=Lr(),e=t.getClient(),n=e&&e.getOptions().attachStacktrace;return[t,n]}var I5t=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],D5t=function(){function t(e){this.name=t.id,this._options=de({XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0},e)}return t.prototype.setupOnce=function(){var e=un();this._options.setTimeout&&mr(e,"setTimeout",RI),this._options.setInterval&&mr(e,"setInterval",RI),this._options.requestAnimationFrame&&mr(e,"requestAnimationFrame",M5t),this._options.XMLHttpRequest&&"XMLHttpRequest"in e&&mr(XMLHttpRequest.prototype,"send",L5t);var n=this._options.eventTarget;if(n){var r=Array.isArray(n)?n:I5t;r.forEach(F5t)}},t.id="TryCatch",t}();function RI(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[0];return e[0]=Sd(r,{mechanism:{data:{function:fl(t)},handled:!0,type:"instrument"}}),t.apply(this,e)}}function M5t(t){return function(e){return t.apply(this,[Sd(e,{mechanism:{data:{function:"requestAnimationFrame",handler:fl(t)},handled:!0,type:"instrument"}})])}}function L5t(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=this,o=["onload","onerror","onprogress","onreadystatechange"];return o.forEach(function(i){i in r&&typeof r[i]=="function"&&mr(r,i,function(s){var a={mechanism:{data:{function:i,handler:fl(s)},handled:!0,type:"instrument"}},l=a2(s);return l&&(a.mechanism.data.handler=fl(l)),Sd(s,a)})}),t.apply(this,e)}}function F5t(t){var e=un(),n=e[t]&&e[t].prototype;!n||!n.hasOwnProperty||!n.hasOwnProperty("addEventListener")||(mr(n,"addEventListener",function(r){return function(o,i,s){try{typeof i.handleEvent=="function"&&(i.handleEvent=Sd(i.handleEvent.bind(i),{mechanism:{data:{function:"handleEvent",handler:fl(i),target:t},handled:!0,type:"instrument"}}))}catch(a){}return r.apply(this,[o,Sd(i,{mechanism:{data:{function:"addEventListener",handler:fl(i),target:t},handled:!0,type:"instrument"}}),s])}}),mr(n,"removeEventListener",function(r){return function(o,i,s){var a=i;try{var l=a&&a.__sentry_wrapped__;l&&r.call(this,o,l,s)}catch(c){}return r.call(this,o,a,s)}}))}var aq=function(){function t(e){this.name=t.id,this._options=de({console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0},e)}return t.prototype.addSentryBreadcrumb=function(e){this._options.sentry&&Lr().addBreadcrumb({category:"sentry."+(e.type==="transaction"?"transaction":"event"),event_id:e.event_id,level:e.level,message:Xl(e)},{event:e})},t.prototype.setupOnce=function(){this._options.console&&$a("console",j5t),this._options.dom&&$a("dom",B5t(this._options.dom)),this._options.xhr&&$a("xhr",z5t),this._options.fetch&&$a("fetch",q5t),this._options.history&&$a("history",W5t)},t.id="Breadcrumbs",t}();function B5t(t){function e(n){var r,o=typeof t=="object"?t.serializeAttribute:void 0;typeof o=="string"&&(o=[o]);try{r=n.event.target?Yk(n.event.target,o):Yk(n.event,o)}catch(i){r="<unknown>"}r.length!==0&&Lr().addBreadcrumb({category:"ui."+n.name,message:r},{event:n.event,name:n.name,global:n.global})}return e}function j5t(t){var e={category:"console",data:{arguments:t.args,logger:"console"},level:lDt(t.level),message:pI(t.args," ")};if(t.level==="assert")if(t.args[0]===!1)e.message="Assertion failed: "+(pI(t.args.slice(1)," ")||"console.assert"),e.data.arguments=t.args.slice(1);else return;Lr().addBreadcrumb(e,{input:t.args,level:t.level})}function z5t(t){if(t.endTimestamp){if(t.xhr.__sentry_own_request__)return;var e=t.xhr.__sentry_xhr__||{},n=e.method,r=e.url,o=e.status_code,i=e.body;Lr().addBreadcrumb({category:"xhr",data:{method:n,url:r,status_code:o},type:"http"},{xhr:t.xhr,input:i});return}}function q5t(t){t.endTimestamp&&(t.fetchData.url.match(/sentry_key/)&&t.fetchData.method==="POST"||(t.error?Lr().addBreadcrumb({category:"fetch",data:t.fetchData,level:ls.Error,type:"http"},{data:t.error,input:t.args}):Lr().addBreadcrumb({category:"fetch",data:de(de({},t.fetchData),{status_code:t.response.status}),type:"http"},{input:t.args,response:t.response})))}function W5t(t){var e=un(),n=t.from,r=t.to,o=T_(e.location.href),i=T_(n),s=T_(r);i.path||(i=o),o.protocol===s.protocol&&o.host===s.host&&(r=s.relative),o.protocol===i.protocol&&o.host===i.host&&(n=i.relative),Lr().addBreadcrumb({category:"navigation",data:{from:n,to:r}})}var U5t="cause",V5t=5,H5t=function(){function t(e){e===void 0&&(e={}),this.name=t.id,this._key=e.key||U5t,this._limit=e.limit||V5t}return t.prototype.setupOnce=function(){c2(function(e,n){var r=Lr().getIntegration(t);return r?K5t(r._key,r._limit,e,n):e})},t.id="LinkedErrors",t}();function K5t(t,e,n,r){if(!n.exception||!n.exception.values||!r||!_l(r.originalException,Error))return n;var o=lq(e,r.originalException,t);return n.exception.values=kn(o,n.exception.values),n}function lq(t,e,n,r){if(r===void 0&&(r=[]),!_l(e[n],Error)||r.length+1>=t)return r;var o=tq(e[n]);return lq(t,e[n],n,kn([o],r))}var Rl=un(),G5t=function(){function t(){this.name=t.id}return t.prototype.setupOnce=function(){c2(function(e){if(Lr().getIntegration(t)){if(!Rl.navigator&&!Rl.location&&!Rl.document)return e;var n=e.request&&e.request.url||Rl.location&&Rl.location.href,r=(Rl.document||{}).referrer,o=(Rl.navigator||{}).userAgent,i=de(de(de({},e.request&&e.request.headers),r&&{Referer:r}),o&&{"User-Agent":o}),s=de(de({},n&&{url:n}),{headers:i});return de(de({},e),{request:s})}return e})},t.id="UserAgent",t}(),Z5t=function(){function t(){this.name=t.id}return t.prototype.setupOnce=function(e,n){e(function(r){var o=n().getIntegration(t);if(o){try{if(Y5t(r,o._previousEvent))return Co&&pt.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(i){return o._previousEvent=r}return o._previousEvent=r}return r})},t.id="Dedupe",t}();function Y5t(t,e){return e?!!(J5t(t,e)||X5t(t,e)):!1}function J5t(t,e){var n=t.message,r=e.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!uq(t,e)||!cq(t,e))}function X5t(t,e){var n=PI(e),r=PI(t);return!(!n||!r||n.type!==r.type||n.value!==r.value||!uq(t,e)||!cq(t,e))}function cq(t,e){var n=OI(t),r=OI(e);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(var o=0;o<r.length;o++){var i=r[o],s=n[o];if(i.filename!==s.filename||i.lineno!==s.lineno||i.colno!==s.colno||i.function!==s.function)return!1}return!0}function uq(t,e){var n=t.fingerprint,r=e.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch(o){return!1}}function PI(t){return t.exception&&t.exception.values&&t.exception.values[0]}function OI(t){var e=t.exception;if(e)try{return e.values[0].stacktrace.frames}catch(n){return}else if(t.stacktrace)return t.stacktrace.frames}var Q5t=function(t){Rm(e,t);function e(n){n===void 0&&(n={});var r=this;return n._metadata=n._metadata||{},n._metadata.sdk=n._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:"npm:@sentry/browser",version:TI}],version:TI},r=t.call(this,E5t,n)||this,r}return e.prototype.showReportDialog=function(n){n===void 0&&(n={});var r=un().document;if(r){if(!this._isEnabled()){Co&&pt.error("Trying to call showReportDialog with Sentry Client disabled");return}T5t(de(de({},n),{dsn:n.dsn||this.getDsn()}))}},e.prototype._prepareEvent=function(n,r,o){return n.platform=n.platform||"javascript",t.prototype._prepareEvent.call(this,n,r,o)},e.prototype._sendEvent=function(n){var r=this.getIntegration(aq);r&&r.addSentryBreadcrumb(n),t.prototype._sendEvent.call(this,n)},e}(CDt),eMt=[new FDt,new MDt,new D5t,new aq,new y2,new H5t,new Z5t,new G5t];function tMt(t){if(t===void 0&&(t={}),t.defaultIntegrations===void 0&&(t.defaultIntegrations=eMt),t.release===void 0){var e=un();e.SENTRY_RELEASE&&e.SENTRY_RELEASE.id&&(t.release=e.SENTRY_RELEASE.id)}t.autoSessionTracking===void 0&&(t.autoSessionTracking=!0),t.sendClientReports===void 0&&(t.sendClientReports=!0),IDt(Q5t,t),t.autoSessionTracking&&nMt()}function II(t){t.startSession({ignoreDuration:!0}),t.captureSession()}function nMt(){var t=un(),e=t.document;if(typeof e=="undefined"){Co&&pt.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");return}var n=Lr();n.captureSession&&(II(n),$a("history",function(r){var o=r.from,i=r.to;o===void 0||o===i||II(Lr())}))}let Ep;function Ed(){return Md(Ep,"mainApi not registered"),Ep}function rMt(t,e){if(Ep){console.warn("mainApi already registered");return}console.debug("[naukar] mainApi registered"),Ep=t,e.addEventListener("abort",()=>{Ep=void 0},{once:!0})}const oMt={wsName:void 0,openedFilesSha:{}},Ih=Ic([],{name:"naukar/replicaWorkspace",state:oMt}),DI=1e3,iMt=!0;let sMt=!Wh&&iMt?console.debug.bind(console,"collab-manager/state:"):()=>{};class dc{constructor(e,n=[],r=0){this.doc=e,this.steps=n,this.version=r,n.length>DI&&(this.steps=n.slice(n.length-DI))}static addEvents(e,n,r,o){if(dc.isInvalidVersion(e,n))return dt.left(Jt.InvalidVersion);const i=r.map(u=>Object.assign(u,{clientID:o}));if(e.version!==n)return dt.left(Jt.OutdatedVersion);let s=e.doc;const a=[];for(const u of i){let d;try{d=u.apply(s)}catch(f){return console.error(f),dt.left(Jt.ApplyFailed)}if(d.doc==null)return dt.left(Jt.ApplyFailed);s=d.doc,a.push(u.getMap())}const l=e.version+i.length,c=e.steps.concat(i);return sMt(`${o}: addEvents version=${l}`),dt.right(new dc(s,c,l))}static getEvents(e,n){if(dc.isInvalidVersion(e,n))return dt.left(Jt.InvalidVersion);let r=e.steps.length-(e.version-n);return r<0?dt.left(Jt.HistoryNotAvailable):dt.right({version:e.version,steps:e.steps.slice(r)})}static isInvalidVersion(e,n){return n<0||n>e.version}}const MI=100;class aMt{constructor(e){if(this.opts=e,this.pendingDeleteRecord=new Map,this.opts.deleteWaitTime>=this.opts.maxDurationToKeepRecord)throw new Error("deleteWaitTime must be less than maxDurationToKeepRecord")}addPendingDelete(e,n){var r;(r=this.pendingDeleteRecord.get(e))===null||r===void 0||r.abortDelete.abort();const o=new AbortController;this.pendingDeleteRecord.set(e,{deleteTime:Date.now(),abortDelete:o}),lMt(n,o.signal,this.opts.deleteWaitTime),this.containSize()}checkAccess(e,n){const r=this.pendingDeleteRecord.get(e);return r?n>r.deleteTime?(r.abortDelete.abort(),!0):!1:!0}containSize(){const e=Date.now();let n=Array.from(this.pendingDeleteRecord.entries()).filter(r=>e-r[1].deleteTime<=this.opts.maxDurationToKeepRecord);n.length>MI&&(n=n.sort((r,o)=>o[1].deleteTime-r[1].deleteTime).slice(0,MI)),this.pendingDeleteRecord=new Map(n)}destroy(){this.pendingDeleteRecord.forEach(e=>{e.abortDelete.abort()}),this.pendingDeleteRecord.clear()}}function lMt(t,e,n){const r=setTimeout(t,n);e.addEventListener("abort",()=>{clearTimeout(r)},{once:!0})}const cMt=!0;let uMt=!Wh&&cMt?console.debug.bind(console,"collab-manager:"):()=>{};class dMt{constructor(e){this._options=e,this._abortController=new AbortController,this._handleRequest=async(n,r)=>{if(!this._instanceDeleteGuard.checkAccess(n.body.docName,n.body.clientCreatedAt))return{ok:!1,body:Jt.HistoryNotAvailable,type:n.type};switch(uMt(`id=${r} userId=${n.body.userId} received request=${n.type}, `),n.type){case Ur.GetDocument:return this._handleGetDocument(n,r);case Ur.PullEvents:return this._handlePullEvents(n,r);case Ur.PushEvents:return this._handlePushEvents(n,r);default:throw new Error("Unknown request type")}},this._instances=new Map,this.managerId=e.managerId||KI,this._serverCom=new Yq(this.managerId,e.collabMessageBus,this._handleRequest,this._abortController.signal),this._instanceDeleteGuard=new aMt(this._options.instanceDeleteGuardOpts||{deleteWaitTime:500,maxDurationToKeepRecord:1e3*60})}destroy(){this._abortController.abort(),this._instanceDeleteGuard.destroy()}getAllDocNames(){return new Set(this._instances.keys())}getCollabState(e){var n;return(n=this._instances.get(e))===null||n===void 0?void 0:n.collabState}isDestroyed(){return this._abortController.signal.aborted}requestDeleteInstance(e){this.isDestroyed()||this._instanceDeleteGuard.addPendingDelete(e,()=>{this._instances.delete(e)})}resetDoc(e){this._instances.delete(e),this._serverCom.broadcast({type:Hu.ResetClient,body:{docName:e}})}async _createInstance(e){const n=await this._options.getInitialState(e);let r=this._instances.get(e);return r?dt.right(r):n?(r=new fMt(e,this._options.schema,n,this._options.applyState),this._instances.set(e,r),dt.right(r)):dt.left(Jt.DocumentNotFound)}async _getInstance(e){const n=this._instances.get(e);return n?(n.lastActive=Date.now(),dt.right(n)):this._createInstance(e)}async _handleGetDocument(e,n){const r=o=>({doc:o.collabState.doc.toJSON(),users:o.userCount,version:o.collabState.version,managerId:this.managerId});return this._toResponse(dt.map(await this._getInstance(e.body.docName),r),e.type)}async _handlePullEvents(e,n){const r=o=>this.managerId!==e.body.managerId?dt.left(Jt.IncorrectManager):o.getEvents(e.body);return this._toResponse(dt.flatMap(await this._getInstance(e.body.docName),r),e.type)}async _handlePushEvents(e,n){const r=o=>{const{type:i,body:s}=e;if(this.managerId!==s.managerId)return dt.left(Jt.IncorrectManager);const a=o.addEvents(s);return dt.isRight(a)&&queueMicrotask(()=>{this._serverCom.broadcast({type:Hu.NewVersion,body:{docName:o.docName,version:o.collabState.version}})}),a};return this._toResponse(dt.flatMap(await this._getInstance(e.body.docName),r),e.type)}_toResponse(e,n){return dt.isLeft(e)?{ok:!1,body:e.left,type:n}:{ok:!0,body:e.right,type:n}}}class fMt{constructor(e,n,r,o=(i,s,a)=>!0){this.docName=e,this.schema=n,this._collabState=r,this._applyState=o,this.lastActive=Date.now()}get collabState(){return this._collabState}get userCount(){return 1}addEvents({clientID:e,version:n,steps:r,userId:o,docName:i}){this.lastActive=Date.now();let s=pMt(n);if(s===void 0)return dt.left(Jt.InvalidVersion);const a=r.map(l=>jn.fromJSON(this.schema,l));return dt.flatMap(dc.addEvents(this._collabState,s,a,e),l=>{if(this._applyState(i,l,this._collabState))this._collabState=l;else return dt.left(Jt.ApplyFailed);return dt.right({empty:null})})}getEvents({docName:e,version:n,userId:r,managerId:o}){return dt.map(dc.getEvents(this._collabState,n),i=>({version:i.version,steps:i.steps.map(s=>s.toJSON()),clientIDs:i.steps.map(s=>s.clientID),users:this.userCount}))}}function pMt(t){let e=Number(t);if(!isNaN(e)&&Math.floor(e)===e&&e>=0)return e}class hMt{constructor(e,n,r){ee(this,"_pendingWrites",new Set);ee(this,"_running",!1);ee(this,"_writeQueue",[]);this._abortSignal=e,this._write=n,this._onPendingChange=r}get isRunning(){return this._running}get queue(){return[...this._writeQueue]}add(e){if(this._abortSignal.aborted){console.warn("WriteQueue: aborted cannot write",e.wsPath);return}const n=this._writeQueue.find(r=>r.wsPath===e.wsPath);n?n.collabState=e.collabState:this._writeQueue.push({...e}),!this._running&&(this._running=!0,this.run().finally(()=>{this._running=!1}))}async run(){if(this._writeQueue.length!==0)for(;this._writeQueue.length>0;){const e=this._writeQueue.shift();if(!e)return;if(this._abortSignal.aborted){console.warn("WriteQueue: aborted cannot write",e.wsPath);return}const{wsPath:n}=e;this.updateWriteStatus(n,!0);try{await this._write(e)}catch(r){}finally{this.updateWriteStatus(n,!1)}}}updateWriteStatus(e,n){n?this._pendingWrites.add(e):this._pendingWrites.delete(e),this._onPendingChange(n?"ADD":"REMOVE",e,[...this._pendingWrites])}}function mMt(t,e,n,r,o,i,s){const a=new hMt(o,n,r);return new dMt({schema:t,collabMessageBus:e,instanceDeleteGuardOpts:{deleteWaitTime:1e3,maxDurationToKeepRecord:1e3*60*5},getInitialState:async l=>{try{const c=await Z0(jt(l),i);if(o.aborted){console.warn("setupCollabManager: abortSignal aborted");return}if(!c){console.warn("setupCollabManager: doc not found",l);return}return new dc(c)}catch(c){c instanceof Error&&s(c);return}},applyState:(l,c,u)=>(queueMicrotask(()=>{a.add({wsPath:l,collabState:c})}),!0)})}function dq(t){return Wb(t).current}const Wb=v$(()=>{});function gMt(t,e,n,r){const o=Wb(t),i=mMt(e.extensionRegistry.specRegistry.schema,e.editorCollabMessageBus,async s=>{try{const a=jt(s.wsPath),l=i6(a,s.collabState.doc,e.extensionRegistry),c=await B3t(l);await XS(a,l,c),Ed().replicaSlices.replicaWorkspaceUpdateFileShaEntry({wsPath:a,info:{pendingWrite:!1,lastKnownDiskSha:c,currentDiskSha:c}})}catch(a){if(a instanceof Error)r(a);else throw a}},(s,a,l)=>{Ed().replicaSlices.replicaWorkspaceUpdateFileShaEntry({wsPath:a,info:{pendingWrite:s==="ADD"}})},n,e.extensionRegistry,r);n.addEventListener("abort",()=>{i.destroy()},{once:!0}),o.current=i}const yMt=Ko(function(e){const{wsName:n}=Ih.track(e),r=Wb(e).current;r==null||r.getAllDocNames().forEach(o=>{const i=jt(o);n!==tn(i).wsName&&(console.log("worker-editor: deleting instance",o),r==null||r.requestDeleteInstance(o))})}),bMt=Ko(function(e){const{openedFilesSha:n,wsName:r}=Ih.track(e),o=Wb(e).current;if(!(!n||!r)&&Dc!==r)for(const i of Object.values(n)){const{pendingWrite:s,wsPath:a,currentDiskSha:l,lastKnownDiskSha:c}=i;!s&&l&&c&&l!==c&&queueMicrotask(()=>{Ed().replicaSlices.replicaWorkspaceUpdateFileShaEntry({wsPath:a,info:{currentDiskSha:l,lastKnownDiskSha:l}}),o==null||o.resetDoc(i.wsPath)})}}),vMt=[bMt,yMt];var r$={exports:{}};(function(t,e){((n,r)=>{r(e)})(Xq,function(n){const{Array:r,Object:o,String:i,BigInt:s,Math:a,Date:l,Map:c,URL:u,Error:d,Uint8Array:f,Uint16Array:p,Uint32Array:h,DataView:y,Blob:m,Promise:w,TextEncoder:x,TextDecoder:$,FileReader:S,document:I,crypto:E,btoa:L}=globalThis,T=-2;function F(b){return j(b.map(([v,g])=>new r(v).fill(g,0,v)))}function j(b){return b.reduce((v,g)=>v.concat(r.isArray(g)?j(g):g),[])}const U=[0,1,2,3].concat(...F([[2,4],[2,5],[4,6],[4,7],[8,8],[8,9],[16,10],[16,11],[32,12],[32,13],[64,14],[64,15],[2,0],[1,16],[1,17],[2,18],[2,19],[4,20],[4,21],[8,22],[8,23],[16,24],[16,25],[32,26],[32,27],[64,28],[64,29]]));function ce(){const b=this;function v(g,C){let R=0;do R|=1&g,g>>>=1,R<<=1;while(--C>0);return R>>>1}b.build_tree=g=>{const C=b.dyn_tree,R=b.stat_desc.static_tree,A=b.stat_desc.elems;let O,B,z,K=-1;for(g.heap_len=0,g.heap_max=573,O=0;A>O;O++)C[2*O]!==0?(g.heap[++g.heap_len]=K=O,g.depth[O]=0):C[2*O+1]=0;for(;2>g.heap_len;)z=g.heap[++g.heap_len]=2>K?++K:0,C[2*z]=1,g.depth[z]=0,g.opt_len--,R&&(g.static_len-=R[2*z+1]);for(b.max_code=K,O=a.floor(g.heap_len/2);O>=1;O--)g.pqdownheap(C,O);z=A;do O=g.heap[1],g.heap[1]=g.heap[g.heap_len--],g.pqdownheap(C,1),B=g.heap[1],g.heap[--g.heap_max]=O,g.heap[--g.heap_max]=B,C[2*z]=C[2*O]+C[2*B],g.depth[z]=a.max(g.depth[O],g.depth[B])+1,C[2*O+1]=C[2*B+1]=z,g.heap[1]=z++,g.pqdownheap(C,1);while(g.heap_len>=2);g.heap[--g.heap_max]=g.heap[1],(X=>{const re=b.dyn_tree,ie=b.stat_desc.static_tree,se=b.stat_desc.extra_bits,M=b.stat_desc.extra_base,G=b.stat_desc.max_length;let N,D,q,Z,le,Y,ue=0;for(Z=0;15>=Z;Z++)X.bl_count[Z]=0;for(re[2*X.heap[X.heap_max]+1]=0,N=X.heap_max+1;573>N;N++)D=X.heap[N],Z=re[2*re[2*D+1]+1]+1,Z>G&&(Z=G,ue++),re[2*D+1]=Z,D>b.max_code||(X.bl_count[Z]++,le=0,M>D||(le=se[D-M]),Y=re[2*D],X.opt_len+=Y*(Z+le),ie&&(X.static_len+=Y*(ie[2*D+1]+le)));if(ue!==0){do{for(Z=G-1;X.bl_count[Z]===0;)Z--;X.bl_count[Z]--,X.bl_count[Z+1]+=2,X.bl_count[G]--,ue-=2}while(ue>0);for(Z=G;Z!==0;Z--)for(D=X.bl_count[Z];D!==0;)q=X.heap[--N],q>b.max_code||(re[2*q+1]!=Z&&(X.opt_len+=(Z-re[2*q+1])*re[2*q],re[2*q+1]=Z),D--)}})(g),((X,re,ie)=>{const se=[];let M,G,N,D=0;for(M=1;15>=M;M++)se[M]=D=D+ie[M-1]<<1;for(G=0;re>=G;G++)N=X[2*G+1],N!==0&&(X[2*G]=v(se[N]++,N))})(C,b.max_code,g.bl_count)}}function W(b,v,g,C,R){const A=this;A.static_tree=b,A.extra_bits=v,A.extra_base=g,A.elems=C,A.max_length=R}ce._length_code=[0,1,2,3,4,5,6,7].concat(...F([[2,8],[2,9],[2,10],[2,11],[4,12],[4,13],[4,14],[4,15],[8,16],[8,17],[8,18],[8,19],[16,20],[16,21],[16,22],[16,23],[32,24],[32,25],[32,26],[31,27],[1,28]])),ce.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],ce.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],ce.d_code=b=>256>b?U[b]:U[256+(b>>>7)],ce.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ce.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],ce.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ce.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];const P=F([[144,8],[112,9],[24,7],[8,8]]);W.static_ltree=j([12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,19,275,147,403,83,339,211,467,51,307,179,435,115,371,243,499,11,267,139,395,75,331,203,459,43,299,171,427,107,363,235,491,27,283,155,411,91,347,219,475,59,315,187,443,123,379,251,507,7,263,135,391,71,327,199,455,39,295,167,423,103,359,231,487,23,279,151,407,87,343,215,471,55,311,183,439,119,375,247,503,15,271,143,399,79,335,207,463,47,303,175,431,111,367,239,495,31,287,159,415,95,351,223,479,63,319,191,447,127,383,255,511,0,64,32,96,16,80,48,112,8,72,40,104,24,88,56,120,4,68,36,100,20,84,52,116,3,131,67,195,35,163,99,227].map((b,v)=>[b,P[v]]));const ne=F([[30,5]]);function Q(b,v,g,C,R){const A=this;A.good_length=b,A.max_lazy=v,A.nice_length=g,A.max_chain=C,A.func=R}W.static_dtree=j([0,16,8,24,4,20,12,28,2,18,10,26,6,22,14,30,1,17,9,25,5,21,13,29,3,19,11,27,7,23].map((b,v)=>[b,ne[v]])),W.static_l_desc=new W(W.static_ltree,ce.extra_lbits,257,286,15),W.static_d_desc=new W(W.static_dtree,ce.extra_dbits,0,30,15),W.static_bl_desc=new W(null,ce.extra_blbits,0,19,7);const oe=[new Q(0,0,0,0,0),new Q(4,4,8,4,1),new Q(4,5,16,8,1),new Q(4,6,32,32,1),new Q(4,4,16,16,2),new Q(8,16,32,32,2),new Q(8,16,128,128,2),new Q(8,32,128,256,2),new Q(32,128,258,1024,2),new Q(32,258,258,4096,2)],nt=["need dictionary","stream end","","","stream error","data error","","buffer error","",""],xt=113,Ae=666,ae=262;function fe(b,v,g,C){const R=b[2*v],A=b[2*g];return A>R||R==A&&C[v]<=C[g]}function _e(){const b=this;let v,g,C,R,A,O,B,z,K,X,re,ie,se,M,G,N,D,q,Z,le,Y,ue,V,me,Le,Ne,pe,ge,Fe,tt,Ze,qe,Ve;const wo=new ce,Si=new ce,Ke=new ce;let Bt,Ye,kt,xr,Pn,gn;function cf(){let ke;for(ke=0;286>ke;ke++)Ze[2*ke]=0;for(ke=0;30>ke;ke++)qe[2*ke]=0;for(ke=0;19>ke;ke++)Ve[2*ke]=0;Ze[512]=1,b.opt_len=b.static_len=0,Ye=kt=0}function kl(ke,xe){let $e,Ce=-1,ye=ke[1],je=0,ot=7,St=4;ye===0&&(ot=138,St=3),ke[2*(xe+1)+1]=65535;for(let Pt=0;xe>=Pt;Pt++)$e=ye,ye=ke[2*(Pt+1)+1],++je<ot&&$e==ye||(St>je?Ve[2*$e]+=je:$e!==0?($e!=Ce&&Ve[2*$e]++,Ve[32]++):je>10?Ve[36]++:Ve[34]++,je=0,Ce=$e,ye===0?(ot=138,St=3):$e==ye?(ot=6,St=3):(ot=7,St=4))}function Ei(ke){b.pending_buf[b.pending++]=ke}function ia(ke){Ei(255&ke),Ei(ke>>>8&255)}function ct(ke,xe){let $e;const Ce=xe;gn>16-Ce?($e=ke,Pn|=$e<<gn&65535,ia(Pn),Pn=$e>>>16-gn,gn+=Ce-16):(Pn|=ke<<gn&65535,gn+=Ce)}function Vn(ke,xe){const $e=2*ke;ct(65535&xe[$e],65535&xe[$e+1])}function sa(ke,xe){let $e,Ce,ye=-1,je=ke[1],ot=0,St=7,Pt=4;for(je===0&&(St=138,Pt=3),$e=0;xe>=$e;$e++)if(Ce=je,je=ke[2*($e+1)+1],++ot>=St||Ce!=je){if(Pt>ot)do Vn(Ce,Ve);while(--ot!=0);else Ce!==0?(Ce!=ye&&(Vn(Ce,Ve),ot--),Vn(16,Ve),ct(ot-3,2)):ot>10?(Vn(18,Ve),ct(ot-11,7)):(Vn(17,Ve),ct(ot-3,3));ot=0,ye=Ce,je===0?(St=138,Pt=3):Ce==je?(St=6,Pt=3):(St=7,Pt=4)}}function uf(){gn==16?(ia(Pn),Pn=0,gn=0):8>gn||(Ei(255&Pn),Pn>>>=8,gn-=8)}function On(ke,xe){let $e,Ce,ye;if(b.dist_buf[Ye]=ke,b.lc_buf[Ye]=255&xe,Ye++,ke===0?Ze[2*xe]++:(kt++,ke--,Ze[2*(ce._length_code[xe]+256+1)]++,qe[2*ce.d_code(ke)]++),(8191&Ye)==0&&pe>2){for($e=8*Ye,Ce=Y-D,ye=0;30>ye;ye++)$e+=qe[2*ye]*(5+ce.extra_dbits[ye]);if($e>>>=3,kt<a.floor(Ye/2)&&$e<a.floor(Ce/2))return!0}return Ye==Bt-1}function Ci(ke,xe){let $e,Ce,ye,je,ot=0;if(Ye!==0)do $e=b.dist_buf[ot],Ce=b.lc_buf[ot],ot++,$e===0?Vn(Ce,ke):(ye=ce._length_code[Ce],Vn(ye+256+1,ke),je=ce.extra_lbits[ye],je!==0&&(Ce-=ce.base_length[ye],ct(Ce,je)),$e--,ye=ce.d_code($e),Vn(ye,xe),je=ce.extra_dbits[ye],je!==0&&($e-=ce.base_dist[ye],ct($e,je)));while(Ye>ot);Vn(256,ke),xr=ke[513]}function _o(){gn>8?ia(Pn):gn>0&&Ei(255&Pn),Pn=0,gn=0}function jr(ke,xe,$e){ct(0+($e?1:0),3),((Ce,ye)=>{_o(),xr=8,ia(ye),ia(~ye),b.pending_buf.set(z.subarray(Ce,Ce+ye),b.pending),b.pending+=ye})(ke,xe)}function on(ke){((xe,$e,Ce)=>{let ye,je,ot=0;pe>0?(wo.build_tree(b),Si.build_tree(b),ot=(()=>{let St;for(kl(Ze,wo.max_code),kl(qe,Si.max_code),Ke.build_tree(b),St=18;St>=3&&Ve[2*ce.bl_order[St]+1]===0;St--);return b.opt_len+=3*(St+1)+5+5+4,St})(),ye=b.opt_len+3+7>>>3,je=b.static_len+3+7>>>3,je>ye||(ye=je)):ye=je=$e+5,$e+4>ye||xe==-1?je==ye?(ct(2+(Ce?1:0),3),Ci(W.static_ltree,W.static_dtree)):(ct(4+(Ce?1:0),3),((St,Pt,sn)=>{let fn;for(ct(St-257,5),ct(Pt-1,5),ct(sn-4,4),fn=0;sn>fn;fn++)ct(Ve[2*ce.bl_order[fn]+1],3);sa(Ze,St-1),sa(qe,Pt-1)})(wo.max_code+1,Si.max_code+1,ot+1),Ci(Ze,qe)):jr(xe,$e,Ce),cf(),Ce&&_o()})(0>D?-1:D,Y-D,ke),D=Y,v.flush_pending()}function yn(){let ke,xe,$e,Ce;do{if(Ce=K-V-Y,Ce===0&&Y===0&&V===0)Ce=A;else if(Ce==-1)Ce--;else if(Y>=A+A-ae){z.set(z.subarray(A,A+A),0),ue-=A,Y-=A,D-=A,ke=se,$e=ke;do xe=65535&re[--$e],re[$e]=A>xe?0:xe-A;while(--ke!=0);ke=A,$e=ke;do xe=65535&X[--$e],X[$e]=A>xe?0:xe-A;while(--ke!=0);Ce+=A}if(v.avail_in===0)return;ke=v.read_buf(z,Y+V,Ce),V+=ke,3>V||(ie=255&z[Y],ie=(ie<<N^255&z[Y+1])&G)}while(ae>V&&v.avail_in!==0)}function Ti(ke){let xe,$e,Ce=Le,ye=Y,je=me;const ot=Y>A-ae?Y-(A-ae):0;let St=tt;const Pt=B,sn=Y+258;let fn=z[ye+je-1],Ai=z[ye+je];Fe>me||(Ce>>=2),St>V&&(St=V);do if(xe=ke,z[xe+je]==Ai&&z[xe+je-1]==fn&&z[xe]==z[ye]&&z[++xe]==z[ye+1]){ye+=2,xe++;do;while(z[++ye]==z[++xe]&&z[++ye]==z[++xe]&&z[++ye]==z[++xe]&&z[++ye]==z[++xe]&&z[++ye]==z[++xe]&&z[++ye]==z[++xe]&&z[++ye]==z[++xe]&&z[++ye]==z[++xe]&&sn>ye);if($e=258-(sn-ye),ye=sn-258,$e>je){if(ue=ke,je=$e,$e>=St)break;fn=z[ye+je-1],Ai=z[ye+je]}}while((ke=65535&X[ke&Pt])>ot&&--Ce!=0);return je>V?V:je}b.depth=[],b.bl_count=[],b.heap=[],Ze=[],qe=[],Ve=[],b.pqdownheap=(ke,xe)=>{const $e=b.heap,Ce=$e[xe];let ye=xe<<1;for(;ye<=b.heap_len&&(ye<b.heap_len&&fe(ke,$e[ye+1],$e[ye],b.depth)&&ye++,!fe(ke,Ce,$e[ye],b.depth));)$e[xe]=$e[ye],xe=ye,ye<<=1;$e[xe]=Ce},b.deflateInit=(ke,xe,$e,Ce,ye,je)=>(Ce||(Ce=8),ye||(ye=8),je||(je=0),ke.msg=null,xe==-1&&(xe=6),1>ye||ye>9||Ce!=8||9>$e||$e>15||0>xe||xe>9||0>je||je>2?T:(ke.dstate=b,O=$e,A=1<<O,B=A-1,M=ye+7,se=1<<M,G=se-1,N=a.floor((M+3-1)/3),z=new f(2*A),X=[],re=[],Bt=1<<ye+6,b.pending_buf=new f(4*Bt),C=4*Bt,b.dist_buf=new p(Bt),b.lc_buf=new f(Bt),pe=xe,ge=je,(ot=>(ot.total_in=ot.total_out=0,ot.msg=null,b.pending=0,b.pending_out=0,g=xt,R=0,wo.dyn_tree=Ze,wo.stat_desc=W.static_l_desc,Si.dyn_tree=qe,Si.stat_desc=W.static_d_desc,Ke.dyn_tree=Ve,Ke.stat_desc=W.static_bl_desc,Pn=0,gn=0,xr=8,cf(),(()=>{K=2*A,re[se-1]=0;for(let St=0;se-1>St;St++)re[St]=0;Ne=oe[pe].max_lazy,Fe=oe[pe].good_length,tt=oe[pe].nice_length,Le=oe[pe].max_chain,Y=0,D=0,V=0,q=me=2,le=0,ie=0})(),0))(ke))),b.deflateEnd=()=>g!=42&&g!=xt&&g!=Ae?T:(b.lc_buf=null,b.dist_buf=null,b.pending_buf=null,re=null,X=null,z=null,b.dstate=null,g==xt?-3:0),b.deflateParams=(ke,xe,$e)=>{let Ce=0;return xe==-1&&(xe=6),0>xe||xe>9||0>$e||$e>2?T:(oe[pe].func!=oe[xe].func&&ke.total_in!==0&&(Ce=ke.deflate(1)),pe!=xe&&(pe=xe,Ne=oe[pe].max_lazy,Fe=oe[pe].good_length,tt=oe[pe].nice_length,Le=oe[pe].max_chain),ge=$e,Ce)},b.deflateSetDictionary=(ke,xe,$e)=>{let Ce,ye=$e,je=0;if(!xe||g!=42)return T;if(3>ye)return 0;for(ye>A-ae&&(ye=A-ae,je=$e-ye),z.set(xe.subarray(je,je+ye),0),Y=ye,D=ye,ie=255&z[0],ie=(ie<<N^255&z[1])&G,Ce=0;ye-3>=Ce;Ce++)ie=(ie<<N^255&z[Ce+2])&G,X[Ce&B]=re[ie],re[ie]=Ce;return 0},b.deflate=(ke,xe)=>{let $e,Ce,ye,je,ot;if(xe>4||0>xe)return T;if(!ke.next_out||!ke.next_in&&ke.avail_in!==0||g==Ae&&xe!=4)return ke.msg=nt[4],T;if(ke.avail_out===0)return ke.msg=nt[7],-5;var St;if(v=ke,je=R,R=xe,g==42&&(Ce=8+(O-8<<4)<<8,ye=(pe-1&255)>>1,ye>3&&(ye=3),Ce|=ye<<6,Y!==0&&(Ce|=32),Ce+=31-Ce%31,g=xt,Ei((St=Ce)>>8&255),Ei(255&St)),b.pending!==0){if(v.flush_pending(),v.avail_out===0)return R=-1,0}else if(v.avail_in===0&&je>=xe&&xe!=4)return v.msg=nt[7],-5;if(g==Ae&&v.avail_in!==0)return ke.msg=nt[7],-5;if(v.avail_in!==0||V!==0||xe!=0&&g!=Ae){switch(ot=-1,oe[pe].func){case 0:ot=(Pt=>{let sn,fn=65535;for(fn>C-5&&(fn=C-5);;){if(1>=V){if(yn(),V===0&&Pt==0)return 0;if(V===0)break}if(Y+=V,V=0,sn=D+fn,(Y===0||Y>=sn)&&(V=Y-sn,Y=sn,on(!1),v.avail_out===0)||Y-D>=A-ae&&(on(!1),v.avail_out===0))return 0}return on(Pt==4),v.avail_out===0?Pt==4?2:0:Pt==4?3:1})(xe);break;case 1:ot=(Pt=>{let sn,fn=0;for(;;){if(ae>V){if(yn(),ae>V&&Pt==0)return 0;if(V===0)break}if(3>V||(ie=(ie<<N^255&z[Y+2])&G,fn=65535&re[ie],X[Y&B]=re[ie],re[ie]=Y),fn===0||(Y-fn&65535)>A-ae||ge!=2&&(q=Ti(fn)),3>q)sn=On(0,255&z[Y]),V--,Y++;else if(sn=On(Y-ue,q-3),V-=q,q>Ne||3>V)Y+=q,q=0,ie=255&z[Y],ie=(ie<<N^255&z[Y+1])&G;else{q--;do Y++,ie=(ie<<N^255&z[Y+2])&G,fn=65535&re[ie],X[Y&B]=re[ie],re[ie]=Y;while(--q!=0);Y++}if(sn&&(on(!1),v.avail_out===0))return 0}return on(Pt==4),v.avail_out===0?Pt==4?2:0:Pt==4?3:1})(xe);break;case 2:ot=(Pt=>{let sn,fn,Ai=0;for(;;){if(ae>V){if(yn(),ae>V&&Pt==0)return 0;if(V===0)break}if(3>V||(ie=(ie<<N^255&z[Y+2])&G,Ai=65535&re[ie],X[Y&B]=re[ie],re[ie]=Y),me=q,Z=ue,q=2,Ai!==0&&Ne>me&&A-ae>=(Y-Ai&65535)&&(ge!=2&&(q=Ti(Ai)),5>=q&&(ge==1||q==3&&Y-ue>4096)&&(q=2)),3>me||q>me)if(le!==0){if(sn=On(0,255&z[Y-1]),sn&&on(!1),Y++,V--,v.avail_out===0)return 0}else le=1,Y++,V--;else{fn=Y+V-3,sn=On(Y-1-Z,me-3),V-=me-1,me-=2;do++Y>fn||(ie=(ie<<N^255&z[Y+2])&G,Ai=65535&re[ie],X[Y&B]=re[ie],re[ie]=Y);while(--me!=0);if(le=0,q=2,Y++,sn&&(on(!1),v.avail_out===0))return 0}}return le!==0&&(sn=On(0,255&z[Y-1]),le=0),on(Pt==4),v.avail_out===0?Pt==4?2:0:Pt==4?3:1})(xe)}if(ot!=2&&ot!=3||(g=Ae),ot==0||ot==2)return v.avail_out===0&&(R=-1),0;if(ot==1){if(xe==1)ct(2,3),Vn(256,W.static_ltree),uf(),9>1+xr+10-gn&&(ct(2,3),Vn(256,W.static_ltree),uf()),xr=7;else if(jr(0,0,!1),xe==3)for($e=0;se>$e;$e++)re[$e]=0;if(v.flush_pending(),v.avail_out===0)return R=-1,0}}return xe!=4?0:1}}function he(){const b=this;b.next_in_index=0,b.next_out_index=0,b.avail_in=0,b.total_in=0,b.avail_out=0,b.total_out=0}he.prototype={deflateInit:function(b,v){const g=this;return g.dstate=new _e,v||(v=15),g.dstate.deflateInit(g,b,v)},deflate:function(b){const v=this;return v.dstate?v.dstate.deflate(v,b):T},deflateEnd:function(){const b=this;if(!b.dstate)return T;const v=b.dstate.deflateEnd();return b.dstate=null,v},deflateParams:function(b,v){const g=this;return g.dstate?g.dstate.deflateParams(g,b,v):T},deflateSetDictionary:function(b,v){const g=this;return g.dstate?g.dstate.deflateSetDictionary(g,b,v):T},read_buf:function(b,v,g){const C=this;let R=C.avail_in;return R>g&&(R=g),R===0?0:(C.avail_in-=R,b.set(C.next_in.subarray(C.next_in_index,C.next_in_index+R),v),C.next_in_index+=R,C.total_in+=R,R)},flush_pending:function(){const b=this;let v=b.dstate.pending;v>b.avail_out&&(v=b.avail_out),v!==0&&(b.next_out.set(b.dstate.pending_buf.subarray(b.dstate.pending_out,b.dstate.pending_out+v),b.next_out_index),b.next_out_index+=v,b.dstate.pending_out+=v,b.total_out+=v,b.avail_out-=v,b.dstate.pending-=v,b.dstate.pending===0&&(b.dstate.pending_out=0))}};const be=-2,Ie=-3,Qe=-5,Ue=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],dn=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],wi=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],go=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],Zo=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],rt=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],Tt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];function wt(){let b,v,g,C,R,A;function O(z,K,X,re,ie,se,M,G,N,D,q){let Z,le,Y,ue,V,me,Le,Ne,pe,ge,Fe,tt,Ze,qe,Ve;ge=0,V=X;do g[z[K+ge]]++,ge++,V--;while(V!==0);if(g[0]==X)return M[0]=-1,G[0]=0,0;for(Ne=G[0],me=1;15>=me&&g[me]===0;me++);for(Le=me,me>Ne&&(Ne=me),V=15;V!==0&&g[V]===0;V--);for(Y=V,Ne>V&&(Ne=V),G[0]=Ne,qe=1<<me;V>me;me++,qe<<=1)if(0>(qe-=g[me]))return Ie;if(0>(qe-=g[V]))return Ie;for(g[V]+=qe,A[1]=me=0,ge=1,Ze=2;--V!=0;)A[Ze]=me+=g[ge],Ze++,ge++;V=0,ge=0;do(me=z[K+ge])!==0&&(q[A[me]++]=V),ge++;while(++V<X);for(X=A[Y],A[0]=V=0,ge=0,ue=-1,tt=-Ne,R[0]=0,Fe=0,Ve=0;Y>=Le;Le++)for(Z=g[Le];Z--!=0;){for(;Le>tt+Ne;){if(ue++,tt+=Ne,Ve=Y-tt,Ve=Ve>Ne?Ne:Ve,(le=1<<(me=Le-tt))>Z+1&&(le-=Z+1,Ze=Le,Ve>me))for(;++me<Ve&&(le<<=1)>g[++Ze];)le-=g[Ze];if(Ve=1<<me,D[0]+Ve>1440)return Ie;R[ue]=Fe=D[0],D[0]+=Ve,ue!==0?(A[ue]=V,C[0]=me,C[1]=Ne,me=V>>>tt-Ne,C[2]=Fe-R[ue-1]-me,N.set(C,3*(R[ue-1]+me))):M[0]=Fe}for(C[1]=Le-tt,X>ge?q[ge]<re?(C[0]=256>q[ge]?0:96,C[2]=q[ge++]):(C[0]=se[q[ge]-re]+16+64,C[2]=ie[q[ge++]-re]):C[0]=192,le=1<<Le-tt,me=V>>>tt;Ve>me;me+=le)N.set(C,3*(Fe+me));for(me=1<<Le-1;V&me;me>>>=1)V^=me;for(V^=me,pe=(1<<tt)-1;(V&pe)!=A[ue];)ue--,tt-=Ne,pe=(1<<tt)-1}return qe!==0&&Y!=1?Qe:0}function B(z){let K;for(b||(b=[],v=[],g=new Int32Array(16),C=[],R=new Int32Array(15),A=new Int32Array(16)),v.length<z&&(v=[]),K=0;z>K;K++)v[K]=0;for(K=0;16>K;K++)g[K]=0;for(K=0;3>K;K++)C[K]=0;R.set(g.subarray(0,15),0),A.set(g.subarray(0,16),0)}this.inflate_trees_bits=(z,K,X,re,ie)=>{let se;return B(19),b[0]=0,se=O(z,0,19,19,null,null,X,K,re,b,v),se==Ie?ie.msg="oversubscribed dynamic bit lengths tree":se!=Qe&&K[0]!==0||(ie.msg="incomplete dynamic bit lengths tree",se=Ie),se},this.inflate_trees_dynamic=(z,K,X,re,ie,se,M,G,N)=>{let D;return B(288),b[0]=0,D=O(X,0,z,257,go,Zo,se,re,G,b,v),D!=0||re[0]===0?(D==Ie?N.msg="oversubscribed literal/length tree":D!=-4&&(N.msg="incomplete literal/length tree",D=Ie),D):(B(288),D=O(X,z,K,0,rt,Tt,M,ie,G,b,v),D!=0||ie[0]===0&&z>257?(D==Ie?N.msg="oversubscribed distance tree":D==Qe?(N.msg="incomplete distance tree",D=Ie):D!=-4&&(N.msg="empty distance tree with lengths",D=Ie),D):0)}}function _i(){const b=this;let v,g,C,R,A=0,O=0,B=0,z=0,K=0,X=0,re=0,ie=0,se=0,M=0;function G(N,D,q,Z,le,Y,ue,V){let me,Le,Ne,pe,ge,Fe,tt,Ze,qe,Ve,wo,Si,Ke,Bt,Ye,kt;tt=V.next_in_index,Ze=V.avail_in,ge=ue.bitb,Fe=ue.bitk,qe=ue.write,Ve=qe<ue.read?ue.read-qe-1:ue.end-qe,wo=Ue[N],Si=Ue[D];do{for(;20>Fe;)Ze--,ge|=(255&V.read_byte(tt++))<<Fe,Fe+=8;if(me=ge&wo,Le=q,Ne=Z,kt=3*(Ne+me),(pe=Le[kt])!==0)for(;;){if(ge>>=Le[kt+1],Fe-=Le[kt+1],(16&pe)!=0){for(pe&=15,Ke=Le[kt+2]+(ge&Ue[pe]),ge>>=pe,Fe-=pe;15>Fe;)Ze--,ge|=(255&V.read_byte(tt++))<<Fe,Fe+=8;for(me=ge&Si,Le=le,Ne=Y,kt=3*(Ne+me),pe=Le[kt];;){if(ge>>=Le[kt+1],Fe-=Le[kt+1],(16&pe)!=0){for(pe&=15;pe>Fe;)Ze--,ge|=(255&V.read_byte(tt++))<<Fe,Fe+=8;if(Bt=Le[kt+2]+(ge&Ue[pe]),ge>>=pe,Fe-=pe,Ve-=Ke,Bt>qe){Ye=qe-Bt;do Ye+=ue.end;while(0>Ye);if(pe=ue.end-Ye,Ke>pe){if(Ke-=pe,qe-Ye>0&&pe>qe-Ye)do ue.win[qe++]=ue.win[Ye++];while(--pe!=0);else ue.win.set(ue.win.subarray(Ye,Ye+pe),qe),qe+=pe,Ye+=pe,pe=0;Ye=0}}else Ye=qe-Bt,qe-Ye>0&&2>qe-Ye?(ue.win[qe++]=ue.win[Ye++],ue.win[qe++]=ue.win[Ye++],Ke-=2):(ue.win.set(ue.win.subarray(Ye,Ye+2),qe),qe+=2,Ye+=2,Ke-=2);if(qe-Ye>0&&Ke>qe-Ye)do ue.win[qe++]=ue.win[Ye++];while(--Ke!=0);else ue.win.set(ue.win.subarray(Ye,Ye+Ke),qe),qe+=Ke,Ye+=Ke,Ke=0;break}if(64&pe)return V.msg="invalid distance code",Ke=V.avail_in-Ze,Ke=Ke>Fe>>3?Fe>>3:Ke,Ze+=Ke,tt-=Ke,Fe-=Ke<<3,ue.bitb=ge,ue.bitk=Fe,V.avail_in=Ze,V.total_in+=tt-V.next_in_index,V.next_in_index=tt,ue.write=qe,Ie;me+=Le[kt+2],me+=ge&Ue[pe],kt=3*(Ne+me),pe=Le[kt]}break}if(64&pe)return 32&pe?(Ke=V.avail_in-Ze,Ke=Ke>Fe>>3?Fe>>3:Ke,Ze+=Ke,tt-=Ke,Fe-=Ke<<3,ue.bitb=ge,ue.bitk=Fe,V.avail_in=Ze,V.total_in+=tt-V.next_in_index,V.next_in_index=tt,ue.write=qe,1):(V.msg="invalid literal/length code",Ke=V.avail_in-Ze,Ke=Ke>Fe>>3?Fe>>3:Ke,Ze+=Ke,tt-=Ke,Fe-=Ke<<3,ue.bitb=ge,ue.bitk=Fe,V.avail_in=Ze,V.total_in+=tt-V.next_in_index,V.next_in_index=tt,ue.write=qe,Ie);if(me+=Le[kt+2],me+=ge&Ue[pe],kt=3*(Ne+me),(pe=Le[kt])===0){ge>>=Le[kt+1],Fe-=Le[kt+1],ue.win[qe++]=Le[kt+2],Ve--;break}}else ge>>=Le[kt+1],Fe-=Le[kt+1],ue.win[qe++]=Le[kt+2],Ve--}while(Ve>=258&&Ze>=10);return Ke=V.avail_in-Ze,Ke=Ke>Fe>>3?Fe>>3:Ke,Ze+=Ke,tt-=Ke,Fe-=Ke<<3,ue.bitb=ge,ue.bitk=Fe,V.avail_in=Ze,V.total_in+=tt-V.next_in_index,V.next_in_index=tt,ue.write=qe,0}b.init=(N,D,q,Z,le,Y)=>{v=0,re=N,ie=D,C=q,se=Z,R=le,M=Y,g=null},b.proc=(N,D,q)=>{let Z,le,Y,ue,V,me,Le,Ne=0,pe=0,ge=0;for(ge=D.next_in_index,ue=D.avail_in,Ne=N.bitb,pe=N.bitk,V=N.write,me=V<N.read?N.read-V-1:N.end-V;;)switch(v){case 0:if(me>=258&&ue>=10&&(N.bitb=Ne,N.bitk=pe,D.avail_in=ue,D.total_in+=ge-D.next_in_index,D.next_in_index=ge,N.write=V,q=G(re,ie,C,se,R,M,N,D),ge=D.next_in_index,ue=D.avail_in,Ne=N.bitb,pe=N.bitk,V=N.write,me=V<N.read?N.read-V-1:N.end-V,q!=0)){v=q==1?7:9;break}B=re,g=C,O=se,v=1;case 1:for(Z=B;Z>pe;){if(ue===0)return N.bitb=Ne,N.bitk=pe,D.avail_in=ue,D.total_in+=ge-D.next_in_index,D.next_in_index=ge,N.write=V,N.inflate_flush(D,q);q=0,ue--,Ne|=(255&D.read_byte(ge++))<<pe,pe+=8}if(le=3*(O+(Ne&Ue[Z])),Ne>>>=g[le+1],pe-=g[le+1],Y=g[le],Y===0){z=g[le+2],v=6;break}if(16&Y){K=15&Y,A=g[le+2],v=2;break}if(!(64&Y)){B=Y,O=le/3+g[le+2];break}if(32&Y){v=7;break}return v=9,D.msg="invalid literal/length code",q=Ie,N.bitb=Ne,N.bitk=pe,D.avail_in=ue,D.total_in+=ge-D.next_in_index,D.next_in_index=ge,N.write=V,N.inflate_flush(D,q);case 2:for(Z=K;Z>pe;){if(ue===0)return N.bitb=Ne,N.bitk=pe,D.avail_in=ue,D.total_in+=ge-D.next_in_index,D.next_in_index=ge,N.write=V,N.inflate_flush(D,q);q=0,ue--,Ne|=(255&D.read_byte(ge++))<<pe,pe+=8}A+=Ne&Ue[Z],Ne>>=Z,pe-=Z,B=ie,g=R,O=M,v=3;case 3:for(Z=B;Z>pe;){if(ue===0)return N.bitb=Ne,N.bitk=pe,D.avail_in=ue,D.total_in+=ge-D.next_in_index,D.next_in_index=ge,N.write=V,N.inflate_flush(D,q);q=0,ue--,Ne|=(255&D.read_byte(ge++))<<pe,pe+=8}if(le=3*(O+(Ne&Ue[Z])),Ne>>=g[le+1],pe-=g[le+1],Y=g[le],(16&Y)!=0){K=15&Y,X=g[le+2],v=4;break}if(!(64&Y)){B=Y,O=le/3+g[le+2];break}return v=9,D.msg="invalid distance code",q=Ie,N.bitb=Ne,N.bitk=pe,D.avail_in=ue,D.total_in+=ge-D.next_in_index,D.next_in_index=ge,N.write=V,N.inflate_flush(D,q);case 4:for(Z=K;Z>pe;){if(ue===0)return N.bitb=Ne,N.bitk=pe,D.avail_in=ue,D.total_in+=ge-D.next_in_index,D.next_in_index=ge,N.write=V,N.inflate_flush(D,q);q=0,ue--,Ne|=(255&D.read_byte(ge++))<<pe,pe+=8}X+=Ne&Ue[Z],Ne>>=Z,pe-=Z,v=5;case 5:for(Le=V-X;0>Le;)Le+=N.end;for(;A!==0;){if(me===0&&(V==N.end&&N.read!==0&&(V=0,me=V<N.read?N.read-V-1:N.end-V),me===0&&(N.write=V,q=N.inflate_flush(D,q),V=N.write,me=V<N.read?N.read-V-1:N.end-V,V==N.end&&N.read!==0&&(V=0,me=V<N.read?N.read-V-1:N.end-V),me===0)))return N.bitb=Ne,N.bitk=pe,D.avail_in=ue,D.total_in+=ge-D.next_in_index,D.next_in_index=ge,N.write=V,N.inflate_flush(D,q);N.win[V++]=N.win[Le++],me--,Le==N.end&&(Le=0),A--}v=0;break;case 6:if(me===0&&(V==N.end&&N.read!==0&&(V=0,me=V<N.read?N.read-V-1:N.end-V),me===0&&(N.write=V,q=N.inflate_flush(D,q),V=N.write,me=V<N.read?N.read-V-1:N.end-V,V==N.end&&N.read!==0&&(V=0,me=V<N.read?N.read-V-1:N.end-V),me===0)))return N.bitb=Ne,N.bitk=pe,D.avail_in=ue,D.total_in+=ge-D.next_in_index,D.next_in_index=ge,N.write=V,N.inflate_flush(D,q);q=0,N.win[V++]=z,me--,v=0;break;case 7:if(pe>7&&(pe-=8,ue++,ge--),N.write=V,q=N.inflate_flush(D,q),V=N.write,me=V<N.read?N.read-V-1:N.end-V,N.read!=N.write)return N.bitb=Ne,N.bitk=pe,D.avail_in=ue,D.total_in+=ge-D.next_in_index,D.next_in_index=ge,N.write=V,N.inflate_flush(D,q);v=8;case 8:return q=1,N.bitb=Ne,N.bitk=pe,D.avail_in=ue,D.total_in+=ge-D.next_in_index,D.next_in_index=ge,N.write=V,N.inflate_flush(D,q);case 9:return q=Ie,N.bitb=Ne,N.bitk=pe,D.avail_in=ue,D.total_in+=ge-D.next_in_index,D.next_in_index=ge,N.write=V,N.inflate_flush(D,q);default:return q=be,N.bitb=Ne,N.bitk=pe,D.avail_in=ue,D.total_in+=ge-D.next_in_index,D.next_in_index=ge,N.write=V,N.inflate_flush(D,q)}},b.free=()=>{}}wt.inflate_trees_fixed=(b,v,g,C)=>(b[0]=9,v[0]=5,g[0]=dn,C[0]=wi,0);const yo=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];function bo(b,v){const g=this;let C,R=0,A=0,O=0,B=0;const z=[0],K=[0],X=new _i;let re=0,ie=new Int32Array(4320);const se=new wt;g.bitk=0,g.bitb=0,g.win=new f(v),g.end=v,g.read=0,g.write=0,g.reset=(M,G)=>{G&&(G[0]=0),R==6&&X.free(M),R=0,g.bitk=0,g.bitb=0,g.read=g.write=0},g.reset(b,null),g.inflate_flush=(M,G)=>{let N,D,q;return D=M.next_out_index,q=g.read,N=(q>g.write?g.end:g.write)-q,N>M.avail_out&&(N=M.avail_out),N!==0&&G==Qe&&(G=0),M.avail_out-=N,M.total_out+=N,M.next_out.set(g.win.subarray(q,q+N),D),D+=N,q+=N,q==g.end&&(q=0,g.write==g.end&&(g.write=0),N=g.write-q,N>M.avail_out&&(N=M.avail_out),N!==0&&G==Qe&&(G=0),M.avail_out-=N,M.total_out+=N,M.next_out.set(g.win.subarray(q,q+N),D),D+=N,q+=N),M.next_out_index=D,g.read=q,G},g.proc=(M,G)=>{let N,D,q,Z,le,Y,ue,V;for(Z=M.next_in_index,le=M.avail_in,D=g.bitb,q=g.bitk,Y=g.write,ue=Y<g.read?g.read-Y-1:g.end-Y;;){let me,Le,Ne,pe,ge,Fe,tt,Ze;switch(R){case 0:for(;3>q;){if(le===0)return g.bitb=D,g.bitk=q,M.avail_in=le,M.total_in+=Z-M.next_in_index,M.next_in_index=Z,g.write=Y,g.inflate_flush(M,G);G=0,le--,D|=(255&M.read_byte(Z++))<<q,q+=8}switch(N=7&D,re=1&N,N>>>1){case 0:D>>>=3,q-=3,N=7&q,D>>>=N,q-=N,R=1;break;case 1:me=[],Le=[],Ne=[[]],pe=[[]],wt.inflate_trees_fixed(me,Le,Ne,pe),X.init(me[0],Le[0],Ne[0],0,pe[0],0),D>>>=3,q-=3,R=6;break;case 2:D>>>=3,q-=3,R=3;break;case 3:return D>>>=3,q-=3,R=9,M.msg="invalid block type",G=Ie,g.bitb=D,g.bitk=q,M.avail_in=le,M.total_in+=Z-M.next_in_index,M.next_in_index=Z,g.write=Y,g.inflate_flush(M,G)}break;case 1:for(;32>q;){if(le===0)return g.bitb=D,g.bitk=q,M.avail_in=le,M.total_in+=Z-M.next_in_index,M.next_in_index=Z,g.write=Y,g.inflate_flush(M,G);G=0,le--,D|=(255&M.read_byte(Z++))<<q,q+=8}if((~D>>>16&65535)!=(65535&D))return R=9,M.msg="invalid stored block lengths",G=Ie,g.bitb=D,g.bitk=q,M.avail_in=le,M.total_in+=Z-M.next_in_index,M.next_in_index=Z,g.write=Y,g.inflate_flush(M,G);A=65535&D,D=q=0,R=A!==0?2:re!==0?7:0;break;case 2:if(le===0||ue===0&&(Y==g.end&&g.read!==0&&(Y=0,ue=Y<g.read?g.read-Y-1:g.end-Y),ue===0&&(g.write=Y,G=g.inflate_flush(M,G),Y=g.write,ue=Y<g.read?g.read-Y-1:g.end-Y,Y==g.end&&g.read!==0&&(Y=0,ue=Y<g.read?g.read-Y-1:g.end-Y),ue===0)))return g.bitb=D,g.bitk=q,M.avail_in=le,M.total_in+=Z-M.next_in_index,M.next_in_index=Z,g.write=Y,g.inflate_flush(M,G);if(G=0,N=A,N>le&&(N=le),N>ue&&(N=ue),g.win.set(M.read_buf(Z,N),Y),Z+=N,le-=N,Y+=N,ue-=N,(A-=N)!=0)break;R=re!==0?7:0;break;case 3:for(;14>q;){if(le===0)return g.bitb=D,g.bitk=q,M.avail_in=le,M.total_in+=Z-M.next_in_index,M.next_in_index=Z,g.write=Y,g.inflate_flush(M,G);G=0,le--,D|=(255&M.read_byte(Z++))<<q,q+=8}if(O=N=16383&D,(31&N)>29||(N>>5&31)>29)return R=9,M.msg="too many length or distance symbols",G=Ie,g.bitb=D,g.bitk=q,M.avail_in=le,M.total_in+=Z-M.next_in_index,M.next_in_index=Z,g.write=Y,g.inflate_flush(M,G);if(N=258+(31&N)+(N>>5&31),!C||C.length<N)C=[];else for(V=0;N>V;V++)C[V]=0;D>>>=14,q-=14,B=0,R=4;case 4:for(;4+(O>>>10)>B;){for(;3>q;){if(le===0)return g.bitb=D,g.bitk=q,M.avail_in=le,M.total_in+=Z-M.next_in_index,M.next_in_index=Z,g.write=Y,g.inflate_flush(M,G);G=0,le--,D|=(255&M.read_byte(Z++))<<q,q+=8}C[yo[B++]]=7&D,D>>>=3,q-=3}for(;19>B;)C[yo[B++]]=0;if(z[0]=7,N=se.inflate_trees_bits(C,z,K,ie,M),N!=0)return(G=N)==Ie&&(C=null,R=9),g.bitb=D,g.bitk=q,M.avail_in=le,M.total_in+=Z-M.next_in_index,M.next_in_index=Z,g.write=Y,g.inflate_flush(M,G);B=0,R=5;case 5:for(;N=O,258+(31&N)+(N>>5&31)>B;){let qe,Ve;for(N=z[0];N>q;){if(le===0)return g.bitb=D,g.bitk=q,M.avail_in=le,M.total_in+=Z-M.next_in_index,M.next_in_index=Z,g.write=Y,g.inflate_flush(M,G);G=0,le--,D|=(255&M.read_byte(Z++))<<q,q+=8}if(N=ie[3*(K[0]+(D&Ue[N]))+1],Ve=ie[3*(K[0]+(D&Ue[N]))+2],16>Ve)D>>>=N,q-=N,C[B++]=Ve;else{for(V=Ve==18?7:Ve-14,qe=Ve==18?11:3;N+V>q;){if(le===0)return g.bitb=D,g.bitk=q,M.avail_in=le,M.total_in+=Z-M.next_in_index,M.next_in_index=Z,g.write=Y,g.inflate_flush(M,G);G=0,le--,D|=(255&M.read_byte(Z++))<<q,q+=8}if(D>>>=N,q-=N,qe+=D&Ue[V],D>>>=V,q-=V,V=B,N=O,V+qe>258+(31&N)+(N>>5&31)||Ve==16&&1>V)return C=null,R=9,M.msg="invalid bit length repeat",G=Ie,g.bitb=D,g.bitk=q,M.avail_in=le,M.total_in+=Z-M.next_in_index,M.next_in_index=Z,g.write=Y,g.inflate_flush(M,G);Ve=Ve==16?C[V-1]:0;do C[V++]=Ve;while(--qe!=0);B=V}}if(K[0]=-1,ge=[],Fe=[],tt=[],Ze=[],ge[0]=9,Fe[0]=6,N=O,N=se.inflate_trees_dynamic(257+(31&N),1+(N>>5&31),C,ge,Fe,tt,Ze,ie,M),N!=0)return N==Ie&&(C=null,R=9),G=N,g.bitb=D,g.bitk=q,M.avail_in=le,M.total_in+=Z-M.next_in_index,M.next_in_index=Z,g.write=Y,g.inflate_flush(M,G);X.init(ge[0],Fe[0],ie,tt[0],ie,Ze[0]),R=6;case 6:if(g.bitb=D,g.bitk=q,M.avail_in=le,M.total_in+=Z-M.next_in_index,M.next_in_index=Z,g.write=Y,(G=X.proc(g,M,G))!=1)return g.inflate_flush(M,G);if(G=0,X.free(M),Z=M.next_in_index,le=M.avail_in,D=g.bitb,q=g.bitk,Y=g.write,ue=Y<g.read?g.read-Y-1:g.end-Y,re===0){R=0;break}R=7;case 7:if(g.write=Y,G=g.inflate_flush(M,G),Y=g.write,ue=Y<g.read?g.read-Y-1:g.end-Y,g.read!=g.write)return g.bitb=D,g.bitk=q,M.avail_in=le,M.total_in+=Z-M.next_in_index,M.next_in_index=Z,g.write=Y,g.inflate_flush(M,G);R=8;case 8:return G=1,g.bitb=D,g.bitk=q,M.avail_in=le,M.total_in+=Z-M.next_in_index,M.next_in_index=Z,g.write=Y,g.inflate_flush(M,G);case 9:return G=Ie,g.bitb=D,g.bitk=q,M.avail_in=le,M.total_in+=Z-M.next_in_index,M.next_in_index=Z,g.write=Y,g.inflate_flush(M,G);default:return G=be,g.bitb=D,g.bitk=q,M.avail_in=le,M.total_in+=Z-M.next_in_index,M.next_in_index=Z,g.write=Y,g.inflate_flush(M,G)}}},g.free=M=>{g.reset(M,null),g.win=null,ie=null},g.set_dictionary=(M,G,N)=>{g.win.set(M.subarray(G,G+N),0),g.read=g.write=N},g.sync_point=()=>R==1?1:0}const at=13,$t=[0,0,255,255];function _t(){const b=this;function v(g){return g&&g.istate?(g.total_in=g.total_out=0,g.msg=null,g.istate.mode=7,g.istate.blocks.reset(g,null),0):be}b.mode=0,b.method=0,b.was=[0],b.need=0,b.marker=0,b.wbits=0,b.inflateEnd=g=>(b.blocks&&b.blocks.free(g),b.blocks=null,0),b.inflateInit=(g,C)=>(g.msg=null,b.blocks=null,8>C||C>15?(b.inflateEnd(g),be):(b.wbits=C,g.istate.blocks=new bo(g,1<<C),v(g),0)),b.inflate=(g,C)=>{let R,A;if(!g||!g.istate||!g.next_in)return be;const O=g.istate;for(C=C==4?Qe:0,R=Qe;;)switch(O.mode){case 0:if(g.avail_in===0)return R;if(R=C,g.avail_in--,g.total_in++,(15&(O.method=g.read_byte(g.next_in_index++)))!=8){O.mode=at,g.msg="unknown compression method",O.marker=5;break}if(8+(O.method>>4)>O.wbits){O.mode=at,g.msg="invalid win size",O.marker=5;break}O.mode=1;case 1:if(g.avail_in===0)return R;if(R=C,g.avail_in--,g.total_in++,A=255&g.read_byte(g.next_in_index++),((O.method<<8)+A)%31!=0){O.mode=at,g.msg="incorrect header check",O.marker=5;break}if(!(32&A)){O.mode=7;break}O.mode=2;case 2:if(g.avail_in===0)return R;R=C,g.avail_in--,g.total_in++,O.need=(255&g.read_byte(g.next_in_index++))<<24&4278190080,O.mode=3;case 3:if(g.avail_in===0)return R;R=C,g.avail_in--,g.total_in++,O.need+=(255&g.read_byte(g.next_in_index++))<<16&16711680,O.mode=4;case 4:if(g.avail_in===0)return R;R=C,g.avail_in--,g.total_in++,O.need+=(255&g.read_byte(g.next_in_index++))<<8&65280,O.mode=5;case 5:return g.avail_in===0?R:(R=C,g.avail_in--,g.total_in++,O.need+=255&g.read_byte(g.next_in_index++),O.mode=6,2);case 6:return O.mode=at,g.msg="need dictionary",O.marker=0,be;case 7:if(R=O.blocks.proc(g,R),R==Ie){O.mode=at,O.marker=0;break}if(R==0&&(R=C),R!=1)return R;R=C,O.blocks.reset(g,O.was),O.mode=12;case 12:return g.avail_in=0,1;case at:return Ie;default:return be}},b.inflateSetDictionary=(g,C,R)=>{let A=0,O=R;if(!g||!g.istate||g.istate.mode!=6)return be;const B=g.istate;return O<1<<B.wbits||(O=(1<<B.wbits)-1,A=R-O),B.blocks.set_dictionary(C,A,O),B.mode=7,0},b.inflateSync=g=>{let C,R,A,O,B;if(!g||!g.istate)return be;const z=g.istate;if(z.mode!=at&&(z.mode=at,z.marker=0),(C=g.avail_in)===0)return Qe;for(R=g.next_in_index,A=z.marker;C!==0&&4>A;)g.read_byte(R)==$t[A]?A++:A=g.read_byte(R)!==0?0:4-A,R++,C--;return g.total_in+=R-g.next_in_index,g.next_in_index=R,g.avail_in=C,z.marker=A,A!=4?Ie:(O=g.total_in,B=g.total_out,v(g),g.total_in=O,g.total_out=B,z.mode=7,0)},b.inflateSyncPoint=g=>g&&g.istate&&g.istate.blocks?g.istate.blocks.sync_point():be}function Yt(){}Yt.prototype={inflateInit:function(b){const v=this;return v.istate=new _t,b||(b=15),v.istate.inflateInit(v,b)},inflate:function(b){const v=this;return v.istate?v.istate.inflate(v,b):be},inflateEnd:function(){const b=this;if(!b.istate)return be;const v=b.istate.inflateEnd(b);return b.istate=null,v},inflateSync:function(){const b=this;return b.istate?b.istate.inflateSync(b):be},inflateSetDictionary:function(b,v){const g=this;return g.istate?g.istate.inflateSetDictionary(g,b,v):be},read_byte:function(b){return this.next_in[b]},read_buf:function(b,v){return this.next_in.subarray(b,b+v)}};const rn={chunkSize:524288,maxWorkers:typeof navigator!="undefined"&&navigator.hardwareConcurrency||2,terminateWorkerTimeout:5e3,useWebWorkers:!0,workerScripts:void 0},Ft=o.assign({},rn);function tr(){return Ft}function nr(b){if(b.baseURL!==void 0&&(Ft.baseURL=b.baseURL),b.chunkSize!==void 0&&(Ft.chunkSize=b.chunkSize),b.maxWorkers!==void 0&&(Ft.maxWorkers=b.maxWorkers),b.terminateWorkerTimeout!==void 0&&(Ft.terminateWorkerTimeout=b.terminateWorkerTimeout),b.useWebWorkers!==void 0&&(Ft.useWebWorkers=b.useWebWorkers),b.Deflate!==void 0&&(Ft.Deflate=b.Deflate),b.Inflate!==void 0&&(Ft.Inflate=b.Inflate),b.workerScripts!==void 0){if(b.workerScripts.deflate){if(!r.isArray(b.workerScripts.deflate))throw new d("workerScripts.deflate must be an array");Ft.workerScripts||(Ft.workerScripts={}),Ft.workerScripts.deflate=b.workerScripts.deflate}if(b.workerScripts.inflate){if(!r.isArray(b.workerScripts.inflate))throw new d("workerScripts.inflate must be an array");Ft.workerScripts||(Ft.workerScripts={}),Ft.workerScripts.inflate=b.workerScripts.inflate}}}const xi=[];for(let b=0;256>b;b++){let v=b;for(let g=0;8>g;g++)1&v?v=v>>>1^3988292384:v>>>=1;xi[b]=v}class rr{constructor(v){this.crc=v||-1}append(v){let g=0|this.crc;for(let C=0,R=0|v.length;R>C;C++)g=g>>>8^xi[255&(g^v[C])];this.crc=g}get(){return~this.crc}}function vo(b){if(x===void 0){const v=new f((b=unescape(encodeURIComponent(b))).length);for(let g=0;g<v.length;g++)v[g]=b.charCodeAt(g);return v}return new x().encode(b)}const wn={concat(b,v){if(b.length===0||v.length===0)return b.concat(v);const g=b[b.length-1],C=wn.getPartial(g);return C===32?b.concat(v):wn._shiftRight(v,C,0|g,b.slice(0,b.length-1))},bitLength(b){const v=b.length;if(v===0)return 0;const g=b[v-1];return 32*(v-1)+wn.getPartial(g)},clamp(b,v){if(32*b.length<v)return b;const g=(b=b.slice(0,a.ceil(v/32))).length;return v&=31,g>0&&v&&(b[g-1]=wn.partial(v,b[g-1]&2147483648>>v-1,1)),b},partial:(b,v,g)=>b===32?v:(g?0|v:v<<32-b)+1099511627776*b,getPartial:b=>a.round(b/1099511627776)||32,_shiftRight(b,v,g,C){for(C===void 0&&(C=[]);v>=32;v-=32)C.push(g),g=0;if(v===0)return C.concat(b);for(let O=0;O<b.length;O++)C.push(g|b[O]>>>v),g=b[O]<<32-v;const R=b.length?b[b.length-1]:0,A=wn.getPartial(R);return C.push(wn.partial(v+A&31,v+A>32?g:C.pop(),1)),C}},Qs={bytes:{fromBits(b){const v=wn.bitLength(b)/8,g=new f(v);let C;for(let R=0;v>R;R++)!(3&R)&&(C=b[R/4]),g[R]=C>>>24,C<<=8;return g},toBits(b){const v=[];let g,C=0;for(g=0;g<b.length;g++)C=C<<8|b[g],(3&g)==3&&(v.push(C),C=0);return 3&g&&v.push(wn.partial(8*(3&g),C)),v}}},sf={sha1:function(b){b?(this._h=b._h.slice(0),this._buffer=b._buffer.slice(0),this._length=b._length):this.reset()}};sf.sha1.prototype={blockSize:512,reset:function(){const b=this;return b._h=this._init.slice(0),b._buffer=[],b._length=0,b},update:function(b){const v=this;typeof b=="string"&&(b=Qs.utf8String.toBits(b));const g=v._buffer=wn.concat(v._buffer,b),C=v._length,R=v._length=C+wn.bitLength(b);if(R>9007199254740991)throw new d("Cannot hash more than 2^53 - 1 bits");const A=new h(g);let O=0;for(let B=v.blockSize+C-(v.blockSize+C&v.blockSize-1);R>=B;B+=v.blockSize)v._block(A.subarray(16*O,16*(O+1))),O+=1;return g.splice(0,16*O),v},finalize:function(){const b=this;let v=b._buffer;const g=b._h;v=wn.concat(v,[wn.partial(1,1)]);for(let C=v.length+2;15&C;C++)v.push(0);for(v.push(a.floor(b._length/4294967296)),v.push(0|b._length);v.length;)b._block(v.splice(0,16));return b.reset(),g},_init:[1732584193,4023233417,2562383102,271733878,3285377520],_key:[1518500249,1859775393,2400959708,3395469782],_f:(b,v,g,C)=>b>19?b>39?b>59?b>79?void 0:v^g^C:v&g|v&C|g&C:v^g^C:v&g|~v&C,_S:(b,v)=>v<<b|v>>>32-b,_block:function(b){const v=this,g=v._h,C=r(80);for(let K=0;16>K;K++)C[K]=b[K];let R=g[0],A=g[1],O=g[2],B=g[3],z=g[4];for(let K=0;79>=K;K++){16>K||(C[K]=v._S(1,C[K-3]^C[K-8]^C[K-14]^C[K-16]));const X=v._S(5,R)+v._f(K,A,O,B)+z+C[K]+v._key[a.floor(K/20)]|0;z=B,B=O,O=v._S(30,A),A=R,R=X}g[0]=g[0]+R|0,g[1]=g[1]+A|0,g[2]=g[2]+O|0,g[3]=g[3]+B|0,g[4]=g[4]+z|0}};const Ub={getRandomValues(b){const v=new h(b.buffer),g=C=>{let R=987654321;const A=4294967295;return()=>(R=36969*(65535&R)+(R>>16)&A,(((R<<16)+(C=18e3*(65535&C)+(C>>16)&A)&A)/4294967296+.5)*(a.random()>.5?1:-1))};for(let C,R=0;R<b.length;R+=4){const A=g(4294967296*(C||a.random()));C=987654071*A(),v[R/4]=4294967296*A()|0}return b}},ea={importKey:b=>new ea.hmacSha1(Qs.bytes.toBits(b)),pbkdf2(b,v,g,C){if(g=g||1e4,0>C||0>g)throw new d("invalid params to pbkdf2");const R=1+(C>>5)<<2;let A,O,B,z,K;const X=new ArrayBuffer(R),re=new y(X);let ie=0;const se=wn;for(v=Qs.bytes.toBits(v),K=1;(R||1)>ie;K++){for(A=O=b.encrypt(se.concat(v,[K])),B=1;g>B;B++)for(O=b.encrypt(O),z=0;z<O.length;z++)A[z]^=O[z];for(B=0;(R||1)>ie&&B<A.length;B++)re.setInt32(ie,A[B]),ie+=4}return X.slice(0,C/8)},hmacSha1:class{constructor(b){const v=this,g=v._hash=sf.sha1,C=[[],[]],R=g.prototype.blockSize/32;v._baseHash=[new g,new g],b.length>R&&(b=g.hash(b));for(let A=0;R>A;A++)C[0][A]=909522486^b[A],C[1][A]=1549556828^b[A];v._baseHash[0].update(C[0]),v._baseHash[1].update(C[1]),v._resultHash=new g(v._baseHash[0])}reset(){const b=this;b._resultHash=new b._hash(b._baseHash[0]),b._updated=!1}update(b){this._updated=!0,this._resultHash.update(b)}digest(){const b=this,v=b._resultHash.finalize(),g=new b._hash(b._baseHash[1]).update(v).finalize();return b.reset(),g}encrypt(b){if(this._updated)throw new d("encrypt on already updated hmac called!");return this.update(b),this.digest(b)}}},Vb="Invalid pasword",qc=16,b2={name:"PBKDF2"},pq=o.assign({hash:{name:"HMAC"}},b2),v2=o.assign({iterations:1e3,hash:{name:"SHA-1"}},b2),hq=["deriveBits"],af=[8,12,16],lf=[16,24,32],ta=10,w2=[0,0,0,0],Im=E!==void 0,_2=Im&&E.subtle!==void 0,ki=Qs.bytes,x2=class{constructor(b){const v=this;v._tables=[[[],[],[],[],[]],[[],[],[],[],[]]],v._tables[0][0][0]||v._precompute();const g=v._tables[0][4],C=v._tables[1],R=b.length;let A,O,B,z=1;if(R!==4&&R!==6&&R!==8)throw new d("invalid aes key size");for(v._key=[O=b.slice(0),B=[]],A=R;4*R+28>A;A++){let K=O[A-1];(A%R==0||R===8&&A%R==4)&&(K=g[K>>>24]<<24^g[K>>16&255]<<16^g[K>>8&255]<<8^g[255&K],A%R==0&&(K=K<<8^K>>>24^z<<24,z=z<<1^283*(z>>7))),O[A]=O[A-R]^K}for(let K=0;A;K++,A--){const X=O[3&K?A:A-4];B[K]=4>=A||4>K?X:C[0][g[X>>>24]]^C[1][g[X>>16&255]]^C[2][g[X>>8&255]]^C[3][g[255&X]]}}encrypt(b){return this._crypt(b,0)}decrypt(b){return this._crypt(b,1)}_precompute(){const b=this._tables[0],v=this._tables[1],g=b[4],C=v[4],R=[],A=[];let O,B,z,K;for(let X=0;256>X;X++)A[(R[X]=X<<1^283*(X>>7))^X]=X;for(let X=O=0;!g[X];X^=B||1,O=A[O]||1){let re=O^O<<1^O<<2^O<<3^O<<4;re=re>>8^255&re^99,g[X]=re,C[re]=X,K=R[z=R[B=R[X]]];let ie=16843009*K^65537*z^257*B^16843008*X,se=257*R[re]^16843008*re;for(let M=0;4>M;M++)b[M][X]=se=se<<24^se>>>8,v[M][re]=ie=ie<<24^ie>>>8}for(let X=0;5>X;X++)b[X]=b[X].slice(0),v[X]=v[X].slice(0)}_crypt(b,v){if(b.length!==4)throw new d("invalid aes block size");const g=this._key[v],C=g.length/4-2,R=[0,0,0,0],A=this._tables[v],O=A[0],B=A[1],z=A[2],K=A[3],X=A[4];let re,ie,se,M=b[0]^g[0],G=b[v?3:1]^g[1],N=b[2]^g[2],D=b[v?1:3]^g[3],q=4;for(let Z=0;C>Z;Z++)re=O[M>>>24]^B[G>>16&255]^z[N>>8&255]^K[255&D]^g[q],ie=O[G>>>24]^B[N>>16&255]^z[D>>8&255]^K[255&M]^g[q+1],se=O[N>>>24]^B[D>>16&255]^z[M>>8&255]^K[255&G]^g[q+2],D=O[D>>>24]^B[M>>16&255]^z[G>>8&255]^K[255&N]^g[q+3],q+=4,M=re,G=ie,N=se;for(let Z=0;4>Z;Z++)R[v?3&-Z:Z]=X[M>>>24]<<24^X[G>>16&255]<<16^X[N>>8&255]<<8^X[255&D]^g[q++],re=M,M=G,G=N,N=D,D=re;return R}},k2=class{constructor(b,v){this._prf=b,this._initIv=v,this._iv=v}reset(){this._iv=this._initIv}update(b){return this.calculate(this._prf,b,this._iv)}incWord(b){if((b>>24&255)==255){let v=b>>16&255,g=b>>8&255,C=255&b;v===255?(v=0,g===255?(g=0,C===255?C=0:++C):++g):++v,b=0,b+=v<<16,b+=g<<8,b+=C}else b+=1<<24;return b}incCounter(b){(b[0]=this.incWord(b[0]))===0&&(b[1]=this.incWord(b[1]))}calculate(b,v,g){let C;if(!(C=v.length))return[];const R=wn.bitLength(v);for(let A=0;C>A;A+=4){this.incCounter(g);const O=b.encrypt(g);v[A]^=O[0],v[A+1]^=O[1],v[A+2]^=O[2],v[A+3]^=O[3]}return wn.clamp(v,R)}},$2=ea.hmacSha1;class mq{constructor(v,g,C){o.assign(this,{password:v,signed:g,strength:C-1,pendingInput:new f(0)})}async append(v){const g=this;if(g.password){const C=Qr(v,0,af[g.strength]+2);await(async(R,A,O)=>{await E2(R,O,Qr(A,0,af[R.strength]));const B=Qr(A,af[R.strength]),z=R.keys.passwordVerification;if(z[0]!=B[0]||z[1]!=B[1])throw new d(Vb)})(g,C,g.password),g.password=null,g.aesCtrGladman=new k2(new x2(g.keys.key),r.from(w2)),g.hmac=new $2(g.keys.authentication),v=Qr(v,af[g.strength]+2)}return S2(g,v,new f(v.length-ta-(v.length-ta)%qc),0,ta,!0)}flush(){const v=this,g=v.pendingInput,C=Qr(g,0,g.length-ta),R=Qr(g,g.length-ta);let A=new f(0);if(C.length){const B=ki.toBits(C);v.hmac.update(B);const z=v.aesCtrGladman.update(B);A=ki.fromBits(z)}let O=!0;if(v.signed){const B=Qr(ki.fromBits(v.hmac.digest()),0,ta);for(let z=0;ta>z;z++)B[z]!=R[z]&&(O=!1)}return{valid:O,data:A}}}class gq{constructor(v,g){o.assign(this,{password:v,strength:g-1,pendingInput:new f(0)})}async append(v){const g=this;let C=new f(0);g.password&&(C=await(async(A,O)=>{const B=(z=new f(af[A.strength]),Im&&typeof E.getRandomValues=="function"?E.getRandomValues(z):Ub.getRandomValues(z));var z;return await E2(A,O,B),Hb(B,A.keys.passwordVerification)})(g,g.password),g.password=null,g.aesCtrGladman=new k2(new x2(g.keys.key),r.from(w2)),g.hmac=new $2(g.keys.authentication));const R=new f(C.length+v.length-v.length%qc);return R.set(C,0),S2(g,v,R,C.length,0)}flush(){const v=this;let g=new f(0);if(v.pendingInput.length){const R=v.aesCtrGladman.update(ki.toBits(v.pendingInput));v.hmac.update(R),g=ki.fromBits(R)}const C=Qr(ki.fromBits(v.hmac.digest()),0,ta);return{data:Hb(g,C),signature:C}}}function S2(b,v,g,C,R,A){const O=v.length-R;let B;for(b.pendingInput.length&&(v=Hb(b.pendingInput,v),g=((z,K)=>{if(K&&K>z.length){const X=z;(z=new f(K)).set(X,0)}return z})(g,O-O%qc)),B=0;O-qc>=B;B+=qc){const z=ki.toBits(Qr(v,B,B+qc));A&&b.hmac.update(z);const K=b.aesCtrGladman.update(z);A||b.hmac.update(K),g.set(ki.fromBits(K),B+C)}return b.pendingInput=Qr(v,B),g}async function E2(b,v,g){const C=vo(v),R=await((B,z,K,X,re)=>Im&&_2&&typeof E.subtle.importKey=="function"?E.subtle.importKey("raw",z,K,!1,re):ea.importKey(z))(0,C,pq,0,hq),A=await(async(B,z,K)=>Im&&_2&&typeof E.subtle.deriveBits=="function"?await E.subtle.deriveBits(B,z,K):ea.pbkdf2(z,B.salt,v2.iterations,K))(o.assign({salt:g},v2),R,8*(2*lf[b.strength]+2)),O=new f(A);b.keys={key:ki.toBits(Qr(O,0,lf[b.strength])),authentication:ki.toBits(Qr(O,lf[b.strength],2*lf[b.strength])),passwordVerification:Qr(O,2*lf[b.strength])}}function Hb(b,v){let g=b;return b.length+v.length&&(g=new f(b.length+v.length),g.set(b,0),g.set(v,b.length)),g}function Qr(b,v,g){return b.subarray(v,g)}class yq{constructor(v,g){o.assign(this,{password:v,passwordVerification:g}),A2(this,v)}append(v){const g=this;if(g.password){const C=C2(g,v.subarray(0,12));if(g.password=null,C[11]!=g.passwordVerification)throw new d(Vb);v=v.subarray(12)}return C2(g,v)}flush(){return{valid:!0,data:new f(0)}}}class bq{constructor(v,g){o.assign(this,{password:v,passwordVerification:g}),A2(this,v)}append(v){const g=this;let C,R;if(g.password){g.password=null;const A=E.getRandomValues(new f(12));A[11]=g.passwordVerification,C=new f(v.length+A.length),C.set(T2(g,A),0),R=12}else C=new f(v.length),R=0;return C.set(T2(g,v),R),C}flush(){return{data:new f(0)}}}function C2(b,v){const g=new f(v.length);for(let C=0;C<v.length;C++)g[C]=N2(b)^v[C],Kb(b,g[C]);return g}function T2(b,v){const g=new f(v.length);for(let C=0;C<v.length;C++)g[C]=N2(b)^v[C],Kb(b,v[C]);return g}function A2(b,v){b.keys=[305419896,591751049,878082192],b.crcKey0=new rr(b.keys[0]),b.crcKey2=new rr(b.keys[2]);for(let g=0;g<v.length;g++)Kb(b,v.charCodeAt(g))}function Kb(b,v){b.crcKey0.append([v]),b.keys[0]=~b.crcKey0.get(),b.keys[1]=P2(b.keys[1]+R2(b.keys[0])),b.keys[1]=P2(a.imul(b.keys[1],134775813)+1),b.crcKey2.append([b.keys[1]>>>24]),b.keys[2]=~b.crcKey2.get()}function N2(b){const v=2|b.keys[2];return R2(a.imul(v,1^v)>>>8)}function R2(b){return 255&b}function P2(b){return 4294967295&b}const O2="deflate",I2="inflate",Gb="Invalid signature";class vq{constructor(v,{signature:g,password:C,signed:R,compressed:A,zipCrypto:O,passwordVerification:B,encryptionStrength:z},{chunkSize:K}){const X=!!C;o.assign(this,{signature:g,encrypted:X,signed:R,compressed:A,inflate:A&&new v({chunkSize:K}),crc32:R&&new rr,zipCrypto:O,decrypt:X&&O?new yq(C,B):new mq(C,R,z)})}async append(v){const g=this;return g.encrypted&&v.length&&(v=await g.decrypt.append(v)),g.compressed&&v.length&&(v=await g.inflate.append(v)),(!g.encrypted||g.zipCrypto)&&g.signed&&v.length&&g.crc32.append(v),v}async flush(){const v=this;let g,C=new f(0);if(v.encrypted){const R=v.decrypt.flush();if(!R.valid)throw new d(Gb);C=R.data}if((!v.encrypted||v.zipCrypto)&&v.signed){const R=new y(new f(4).buffer);if(g=v.crc32.get(),R.setUint32(0,g),v.signature!=R.getUint32(0,!1))throw new d(Gb)}return v.compressed&&(C=await v.inflate.append(C)||new f(0),await v.inflate.flush()),{data:C,signature:g}}}class wq{constructor(v,{encrypted:g,signed:C,compressed:R,level:A,zipCrypto:O,password:B,passwordVerification:z,encryptionStrength:K},{chunkSize:X}){o.assign(this,{encrypted:g,signed:C,compressed:R,deflate:R&&new v({level:A||5,chunkSize:X}),crc32:C&&new rr,zipCrypto:O,encrypt:g&&O?new bq(B,z):new gq(B,K)})}async append(v){const g=this;let C=v;return g.compressed&&v.length&&(C=await g.deflate.append(v)),g.encrypted&&C.length&&(C=await g.encrypt.append(C)),(!g.encrypted||g.zipCrypto)&&g.signed&&v.length&&g.crc32.append(v),C}async flush(){const v=this;let g,C=new f(0);if(v.compressed&&(C=await v.deflate.flush()||new f(0)),v.encrypted){C=await v.encrypt.append(C);const R=v.encrypt.flush();g=R.signature;const A=new f(C.length+R.data.length);A.set(C,0),A.set(R.data,C.length),C=A}return v.encrypted&&!v.zipCrypto||!v.signed||(g=v.crc32.get()),{data:C,signature:g}}}const D2="init",M2="append",Zb="flush";let L2=!0;var Yb=(b,v,g,C,R,A,O)=>(o.assign(b,{busy:!0,codecConstructor:v,options:o.assign({},g),scripts:O,terminate(){b.worker&&!b.busy&&(b.worker.terminate(),b.interface=null)},onTaskFinished(){b.busy=!1,R(b)}}),A?((B,z)=>{let K;const X={type:"module"};if(!B.interface){if(L2)try{B.worker=re({},z.baseURL)}catch(M){L2=!1,B.worker=re(X,z.baseURL)}else B.worker=re(X,z.baseURL);B.worker.addEventListener("message",M=>{const G=M.data;if(K){const N=G.error,D=G.type;if(N){const q=new d(N.message);q.stack=N.stack,K.reject(q),K=null,B.onTaskFinished()}else if(D==D2||D==Zb||D==M2){const q=G.data;D==Zb?(K.resolve({data:new f(q),signature:G.signature}),K=null,B.onTaskFinished()):K.resolve(q&&new f(q))}}},!1),B.interface={append:M=>ie({type:M2,data:M}),flush:()=>ie({type:Zb}),abort(){B.onTaskFinished()}}}return B.interface;function re(M,G){let N,D;N=B.scripts[0],typeof N=="function"&&(N=N());try{D=new u(N,G)}catch(q){D=N}return new Worker(D,M)}async function ie(M){if(!K){const G=B.options,N=B.scripts.slice(1);await se({scripts:N,type:D2,options:G,config:{chunkSize:z.chunkSize}})}return se(M)}function se(M){const G=B.worker,N=new w((D,q)=>K={resolve:D,reject:q});try{if(M.data)try{M.data=M.data.buffer,G.postMessage(M,[M.data])}catch(D){G.postMessage(M)}else G.postMessage(M)}catch(D){K.reject(D),K=null,B.onTaskFinished()}return N}})(b,C):((B,z)=>{const K=((X,re,ie)=>re.codecType.startsWith(O2)?new wq(X,re,ie):re.codecType.startsWith(I2)?new vq(X,re,ie):void 0)(B.codecConstructor,B.options,z);return{async append(X){try{return await K.append(X)}catch(re){throw B.onTaskFinished(),re}},async flush(){try{return await K.flush()}finally{B.onTaskFinished()}},abort(){B.onTaskFinished()}}})(b,C));let na=[];const Jb=[];function F2(b,v,g){const C=!(!v.compressed&&!v.signed&&!v.encrypted)&&(v.useWebWorkers||v.useWebWorkers===void 0&&g.useWebWorkers),R=C&&g.workerScripts?g.workerScripts[v.codecType]:[];if(na.length<g.maxWorkers){const O={};return na.push(O),Yb(O,b,v,g,A,C,R)}{const O=na.find(B=>!B.busy);return O?(Xb(O),Yb(O,b,v,g,A,C,R)):new w(B=>Jb.push({resolve:B,codecConstructor:b,options:v,webWorker:C,scripts:R}))}function A(O){if(Jb.length){const[{resolve:B,codecConstructor:z,options:K,webWorker:X,scripts:re}]=Jb.splice(0,1);B(Yb(O,z,K,g,A,X,re))}else O.worker?(Xb(O),Number.isFinite(g.terminateWorkerTimeout)&&g.terminateWorkerTimeout>=0&&(O.terminateTimeout=setTimeout(()=>{na=na.filter(B=>B!=O),O.terminate()},g.terminateWorkerTimeout))):na=na.filter(B=>B!=O)}}function Xb(b){b.terminateTimeout&&(clearTimeout(b.terminateTimeout),b.terminateTimeout=null)}const B2="Abort error";async function j2(b,v,g,C,R,A,O){const B=a.max(A.chunkSize,64);return async function z(K=0,X=0){const re=O.signal,ie=R();if(ie>K){Qb(re,b);const se=await v.readUint8Array(K+C,a.min(B,ie-K)),M=se.length;Qb(re,b);const G=await b.append(se);if(Qb(re,b),X+=await z2(g,G),O.onprogress)try{O.onprogress(K+M,ie)}catch(N){}return z(K+B,X)}{const se=await b.flush();return X+=await z2(g,se.data),{signature:se.signature,length:X}}}()}function Qb(b,v){if(b&&b.aborted)throw v.abort(),new d(B2)}async function z2(b,v){return v.length&&await b.writeUint8Array(v),v.length}const q2="HTTP error ",ev="HTTP Range not supported",W2="Reader is not seekable",tv="text/plain",nv="GET";class U2{constructor(){this.size=0}init(){this.initialized=!0}}class ra extends U2{}class Wc extends U2{writeUint8Array(v){this.size+=v.length}}class V2 extends ra{constructor(v){super(),this.blob=v,this.size=v.size}async readUint8Array(v,g){if(this.blob.arrayBuffer)return new f(await this.blob.slice(v,v+g).arrayBuffer());{const C=new S;return new w((R,A)=>{C.onload=O=>R(new f(O.target.result)),C.onerror=()=>A(C.error),C.readAsArrayBuffer(this.blob.slice(v,v+g))})}}}class H2 extends Wc{constructor(v){super(),this.contentType=v,this.arrayBuffersMaxlength=8,K2(this)}writeUint8Array(v){super.writeUint8Array(v),this.arrayBuffers.length==this.arrayBuffersMaxlength&&G2(this),this.arrayBuffers.push(v.buffer)}getData(){return this.blob||(this.arrayBuffers.length&&G2(this),this.blob=this.pendingBlob,K2(this)),this.blob}}function K2(b){b.pendingBlob=new m([],{type:b.contentType}),b.arrayBuffers=[]}function G2(b){b.pendingBlob=new m([b.pendingBlob,...b.arrayBuffers],{type:b.contentType}),b.arrayBuffers=[]}class _q extends ra{constructor(v,g){super(),this.url=v,this.preventHeadRequest=g.preventHeadRequest,this.useRangeHeader=g.useRangeHeader,this.forceRangeRequests=g.forceRangeRequests,this.options=o.assign({},g),delete this.options.preventHeadRequest,delete this.options.useRangeHeader,delete this.options.forceRangeRequests,delete this.options.useXHR}async init(){super.init(),await Z2(this,ov,X2)}readUint8Array(v,g){return Y2(this,v,g,ov,X2)}}class xq extends ra{constructor(v,g){super(),this.url=v,this.preventHeadRequest=g.preventHeadRequest,this.useRangeHeader=g.useRangeHeader,this.forceRangeRequests=g.forceRangeRequests,this.options=g}async init(){super.init(),await Z2(this,iv,Q2)}readUint8Array(v,g){return Y2(this,v,g,iv,Q2)}}async function Z2(b,v,g){if((C=>{if(I!==void 0){const R=I.createElement("a");return R.href=C,R.protocol=="http:"||R.protocol=="https:"}return/^https?:\/\//i.test(C)})(b.url)&&(b.useRangeHeader||b.forceRangeRequests)){const C=await v(nv,b,J2(b));if(!b.forceRangeRequests&&C.headers.get("Accept-Ranges")!="bytes")throw new d(ev);{let R;const A=C.headers.get("Content-Range");if(A){const O=A.trim().split(/\s*\/\s*/);if(O.length){const B=O[1];B&&B!="*"&&(R=Number(B))}}R===void 0?await tT(b,v,g):b.size=R}}else await tT(b,v,g)}async function Y2(b,v,g,C,R){if(b.useRangeHeader||b.forceRangeRequests){const A=await C(nv,b,J2(b,v,g));if(A.status!=206)throw new d(ev);return new f(await A.arrayBuffer())}return b.data||await R(b,b.options),new f(b.data.subarray(v,v+g))}function J2(b,v=0,g=1){return o.assign({},rv(b),{Range:"bytes="+v+"-"+(v+g-1)})}function rv(b){const v=b.options.headers;if(v)return Symbol.iterator in v?o.fromEntries(v):v}async function X2(b){await eT(b,ov)}async function Q2(b){await eT(b,iv)}async function eT(b,v){const g=await v(nv,b,rv(b));b.data=new f(await g.arrayBuffer()),b.size||(b.size=b.data.length)}async function tT(b,v,g){if(b.preventHeadRequest)await g(b,b.options);else{const C=(await v("HEAD",b,rv(b))).headers.get("Content-Length");C?b.size=Number(C):await g(b,b.options)}}async function ov(b,{options:v,url:g},C){const R=await fetch(g,o.assign({},v,{method:b,headers:C}));if(400>R.status)return R;throw new d(q2+(R.statusText||R.status))}function iv(b,{url:v},g){return new w((C,R)=>{const A=new XMLHttpRequest;if(A.addEventListener("load",()=>{if(400>A.status){const O=[];A.getAllResponseHeaders().trim().split(/[\r\n]+/).forEach(B=>{const z=B.trim().split(/\s*:\s*/);z[0]=z[0].trim().replace(/^[a-z]|-[a-z]/g,K=>K.toUpperCase()),O.push(z)}),C({status:A.status,arrayBuffer:()=>A.response,headers:new c(O)})}else R(new d(q2+(A.statusText||A.status)))},!1),A.addEventListener("error",O=>R(O.detail.error),!1),A.open(b,v),g)for(const O of o.entries(g))A.setRequestHeader(O[0],O[1]);A.responseType="arraybuffer",A.send()})}class nT extends ra{constructor(v,g={}){super(),this.url=v,g.useXHR?this.reader=new xq(v,g):this.reader=new _q(v,g)}set size(v){}get size(){return this.reader.size}async init(){super.init(),await this.reader.init()}readUint8Array(v,g){return this.reader.readUint8Array(v,g)}}const Wn=4294967295,$i=65535,rT=67324752,sv=33639248,av=101075792,oT=117853008,lv=21589,cv=2048,Dm="/",iT=new l(2107,11,31),sT=new l(1980,0,1),kq="\0 !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~ ".split("");function uv(b,v){if(v&&v.trim().toLowerCase()=="cp437")return(g=>{let C="";for(let R=0;R<g.length;R++)C+=kq[g[R]];return C})(b);if($===void 0){const g=new S;return new w((C,R)=>{g.onload=A=>C(A.target.result),g.onerror=()=>R(g.error),g.readAsText(new m([b]))})}return new $(v).decode(b)}const $q=["filename","rawFilename","directory","encrypted","compressedSize","uncompressedSize","lastModDate","rawLastModDate","comment","rawComment","signature","extraField","rawExtraField","bitFlag","extraFieldZip64","extraFieldUnicodePath","extraFieldUnicodeComment","extraFieldAES","filenameUTF8","commentUTF8","offset","zip64","compressionMethod","extraFieldNTFS","lastAccessDate","creationDate","extraFieldExtendedTimestamp","version","versionMadeBy","msDosCompatible","internalFileAttribute","externalFileAttribute"];class Mm{constructor(v){$q.forEach(g=>this[g]=v[g])}}const Lm="File format is not recognized",aT="End of central directory not found",lT="End of Zip64 central directory not found",cT="End of Zip64 central directory locator not found",uT="Central directory header not found",dT="Local file header not found",fT="Zip64 extra field not found",pT="File contains encrypted entry",hT="Encryption method not supported",dv="Compression method not supported",mT="utf-8",gT="cp437",yT=["uncompressedSize","compressedSize","offset"];class Sq{constructor(v,g,C){o.assign(this,{reader:v,config:g,options:C})}async getData(v,g,C={}){const R=this,{reader:A,offset:O,extraFieldAES:B,compressionMethod:z,config:K,bitFlag:X,signature:re,rawLastModDate:ie,compressedSize:se}=R,M=R.localDirectory={};A.initialized||await A.init();let G=await oa(A,O,30);const N=or(G);let D=Uc(R,C,"password");if(D=D&&D.length&&D,B&&B.originalCompressionMethod!=99)throw new d(dv);if(z!=0&&z!=8)throw new d(dv);if(Nn(N,0)!=rT)throw new d(dT);bT(M,N,4),G=await oa(A,O,30+M.filenameLength+M.extraFieldLength),M.rawExtraField=G.subarray(30+M.filenameLength),await vT(R,M,N,4),g.lastAccessDate=M.lastAccessDate,g.creationDate=M.creationDate;const q=R.encrypted&&M.encrypted,Z=q&&!B;if(q){if(!Z&&B.strength===void 0)throw new d(hT);if(!D)throw new d(pT)}const le=await F2(K.Inflate,{codecType:I2,password:D,zipCrypto:Z,encryptionStrength:B&&B.strength,signed:Uc(R,C,"checkSignature"),passwordVerification:Z&&(X.dataDescriptor?ie>>>8&255:re>>>24&255),signature:re,compressed:z!=0,encrypted:q,useWebWorkers:Uc(R,C,"useWebWorkers")},K);v.initialized||await v.init();const Y=Uc(R,C,"signal"),ue=O+30+M.filenameLength+M.extraFieldLength;return await j2(le,A,v,ue,()=>se,K,{onprogress:C.onprogress,signal:Y}),v.getData()}}function bT(b,v,g){const C=b.rawBitFlag=eo(v,g+2),R=(1&C)==1,A=Nn(v,g+6);o.assign(b,{encrypted:R,version:eo(v,g),bitFlag:{level:(6&C)>>1,dataDescriptor:(8&C)==8,languageEncodingFlag:(C&cv)==cv},rawLastModDate:A,lastModDate:Eq(A),filenameLength:eo(v,g+22),extraFieldLength:eo(v,g+24)})}async function vT(b,v,g,C){const R=v.rawExtraField,A=v.extraField=new c,O=or(new f(R));let B=0;try{for(;B<R.length;){const G=eo(O,B),N=eo(O,B+2);A.set(G,{type:G,data:R.slice(B+4,B+4+N)}),B+=4+N}}catch(G){}const z=eo(g,C+4);v.signature=Nn(g,C+10),v.uncompressedSize=Nn(g,C+18),v.compressedSize=Nn(g,C+14);const K=A.get(1);K&&(((G,N)=>{N.zip64=!0;const D=or(G.data);G.values=[];for(let Z=0;Z<a.floor(G.data.length/8);Z++)G.values.push(Fm(D,0+8*Z));const q=yT.filter(Z=>N[Z]==Wn);for(let Z=0;Z<q.length;Z++)G[q[Z]]=G.values[Z];yT.forEach(Z=>{if(N[Z]==Wn){if(G[Z]===void 0)throw new d(fT);N[Z]=G[Z]}})})(K,v),v.extraFieldZip64=K);const X=A.get(28789);X&&(await wT(X,"filename","rawFilename",v,b),v.extraFieldUnicodePath=X);const re=A.get(25461);re&&(await wT(re,"comment","rawComment",v,b),v.extraFieldUnicodeComment=re);const ie=A.get(39169);ie?(((G,N,D)=>{const q=or(G.data);G.vendorVersion=Vc(q,0),G.vendorId=Vc(q,2);const Z=Vc(q,4);G.strength=Z,G.originalCompressionMethod=D,N.compressionMethod=G.compressionMethod=eo(q,5)})(ie,v,z),v.extraFieldAES=ie):v.compressionMethod=z;const se=A.get(10);se&&(((G,N)=>{const D=or(G.data);let q,Z=4;try{for(;Z<G.data.length&&!q;){const le=eo(D,Z),Y=eo(D,Z+2);le==1&&(q=G.data.slice(Z+4,Z+4+Y)),Z+=4+Y}}catch(le){}try{if(q&&q.length==24){const le=or(q),Y=le.getBigUint64(0,!0),ue=le.getBigUint64(8,!0),V=le.getBigUint64(16,!0);o.assign(G,{rawLastModDate:Y,rawLastAccessDate:ue,rawCreationDate:V});const me={lastModDate:fv(Y),lastAccessDate:fv(ue),creationDate:fv(V)};o.assign(G,me),o.assign(N,me)}}catch(le){}})(se,v),v.extraFieldNTFS=se);const M=A.get(lv);M&&(((G,N)=>{const D=or(G.data),q=Vc(D,0),Z=[],le=[];(1&q)==1&&(Z.push("lastModDate"),le.push("rawLastModDate")),(2&q)==2&&(Z.push("lastAccessDate"),le.push("rawLastAccessDate")),(4&q)==4&&(Z.push("creationDate"),le.push("rawCreationDate"));let Y=1;Z.forEach((ue,V)=>{if(G.data.length>=Y+4){const me=Nn(D,Y);N[ue]=G[ue]=new l(1e3*me);const Le=le[V];G[Le]=me}Y+=4})})(M,v),v.extraFieldExtendedTimestamp=M)}async function wT(b,v,g,C,R){const A=or(b.data);b.version=Vc(A,0),b.signature=Nn(A,1);const O=new rr;O.append(R[g]);const B=or(new f(4));B.setUint32(0,O.get(),!0),b[v]=await uv(b.data.subarray(5)),b.valid=!R.bitFlag.languageEncodingFlag&&b.signature==Nn(B,0),b.valid&&(C[v]=b[v],C[v+"UTF8"]=!0)}function Uc(b,v,g){return v[g]===void 0?b.options[g]:v[g]}function Eq(b){const v=(4294901760&b)>>16,g=65535&b;try{return new l(1980+((65024&v)>>9),((480&v)>>5)-1,31&v,(63488&g)>>11,(2016&g)>>5,2*(31&g),0)}catch(C){}}function fv(b){return new l(Number(b/s(1e4)-s(116444736e5)))}function Vc(b,v){return b.getUint8(v)}function eo(b,v){return b.getUint16(v,!0)}function Nn(b,v){return b.getUint32(v,!0)}function Fm(b,v){return Number(b.getBigUint64(v,!0))}function or(b){return new y(b.buffer)}function oa(b,v,g){return b.readUint8Array(v,g)}const _T="File already exists",xT="Zip file comment exceeds 64KB",kT="File entry comment exceeds 64KB",$T="File entry name exceeds 64KB",pv="Version exceeds 65535",ST="The strength must equal 1, 2, or 3",ET="Extra field type exceeds 65535",CT="Extra field data exceeds 64KB",Bm="Zip64 is not supported",TT=new f([7,0,2,0,65,69,3,0,0]);let hv=0;function AT(b,v,g){if(b.arrayBuffer)return v||g?b.slice(v,g).arrayBuffer():b.arrayBuffer();{const C=new S;return new w((R,A)=>{C.onload=O=>R(O.target.result),C.onerror=()=>A(C.error),C.readAsArrayBuffer(v||g?b.slice(v,g):b)})}}function mv(b){if(b)return(s(b.getTime())+s(116444736e5))*s(1e4)}function Un(b,v,g){return v[g]===void 0?b.options[g]:v[g]}function jm(b,v,g){b.setUint8(v,g)}function Wt(b,v,g){b.setUint16(v,g,!0)}function Dt(b,v,g){b.setUint32(v,g,!0)}function Br(b,v,g){b.setBigUint64(v,g,!0)}function Rn(b,v,g){b.set(v,g)}function Yo(b){return new y(b.buffer)}nr({Deflate:function(b){const v=new he,g=(C=b&&b.chunkSize?b.chunkSize:65536)+5*(a.floor(C/16383)+1);var C;const R=new f(g);let A=b?b.level:-1;A===void 0&&(A=-1),v.deflateInit(A),v.next_out=R,this.append=(O,B)=>{let z,K,X=0,re=0,ie=0;const se=[];if(O.length){v.next_in_index=0,v.next_in=O,v.avail_in=O.length;do{if(v.next_out_index=0,v.avail_out=g,z=v.deflate(0),z!=0)throw new d("deflating: "+v.msg);v.next_out_index&&(v.next_out_index==g?se.push(new f(R)):se.push(R.slice(0,v.next_out_index))),ie+=v.next_out_index,B&&v.next_in_index>0&&v.next_in_index!=X&&(B(v.next_in_index),X=v.next_in_index)}while(v.avail_in>0||v.avail_out===0);return se.length>1?(K=new f(ie),se.forEach(M=>{K.set(M,re),re+=M.length})):K=se[0]||new f(0),K}},this.flush=()=>{let O,B,z=0,K=0;const X=[];do{if(v.next_out_index=0,v.avail_out=g,O=v.deflate(4),O!=1&&O!=0)throw new d("deflating: "+v.msg);g-v.avail_out>0&&X.push(R.slice(0,v.next_out_index)),K+=v.next_out_index}while(v.avail_in>0||v.avail_out===0);return v.deflateEnd(),B=new f(K),X.forEach(re=>{B.set(re,z),z+=re.length}),B}},Inflate:function(b){const v=new Yt,g=b&&b.chunkSize?a.floor(2*b.chunkSize):131072,C=new f(g);let R=!1;v.inflateInit(),v.next_out=C,this.append=(A,O)=>{const B=[];let z,K,X=0,re=0,ie=0;if(A.length!==0){v.next_in_index=0,v.next_in=A,v.avail_in=A.length;do{if(v.next_out_index=0,v.avail_out=g,v.avail_in!==0||R||(v.next_in_index=0,R=!0),z=v.inflate(0),R&&z===Qe){if(v.avail_in!==0)throw new d("inflating: bad input")}else if(z!==0&&z!==1)throw new d("inflating: "+v.msg);if((R||z===1)&&v.avail_in===A.length)throw new d("inflating: bad input");v.next_out_index&&(v.next_out_index===g?B.push(new f(C)):B.push(C.slice(0,v.next_out_index))),ie+=v.next_out_index,O&&v.next_in_index>0&&v.next_in_index!=X&&(O(v.next_in_index),X=v.next_in_index)}while(v.avail_in>0||v.avail_out===0);return B.length>1?(K=new f(ie),B.forEach(se=>{K.set(se,re),re+=se.length})):K=B[0]||new f(0),K}},this.flush=()=>{v.inflateEnd()}}}),n.BlobReader=V2,n.BlobWriter=H2,n.Data64URIReader=class extends ra{constructor(b){super(),this.dataURI=b;let v=b.length;for(;b.charAt(v-1)=="=";)v--;this.dataStart=b.indexOf(",")+1,this.size=a.floor(.75*(v-this.dataStart))}readUint8Array(b,v){const g=new f(v),C=4*a.floor(b/3),R=atob(this.dataURI.substring(C+this.dataStart,4*a.ceil((b+v)/3)+this.dataStart)),A=b-3*a.floor(C/4);for(let O=A;A+v>O;O++)g[O-A]=R.charCodeAt(O);return g}},n.Data64URIWriter=class extends Wc{constructor(b){super(),this.data="data:"+(b||"")+";base64,",this.pending=[]}writeUint8Array(b){super.writeUint8Array(b);let v=0,g=this.pending;const C=this.pending.length;for(this.pending="",v=0;v<3*a.floor((C+b.length)/3)-C;v++)g+=i.fromCharCode(b[v]);for(;v<b.length;v++)this.pending+=i.fromCharCode(b[v]);g.length>2?this.data+=L(g):this.pending=g}getData(){return this.data+L(this.pending)}},n.ERR_ABORT=B2,n.ERR_BAD_FORMAT=Lm,n.ERR_CENTRAL_DIRECTORY_NOT_FOUND=uT,n.ERR_DUPLICATED_NAME=_T,n.ERR_ENCRYPTED=pT,n.ERR_EOCDR_LOCATOR_ZIP64_NOT_FOUND=cT,n.ERR_EOCDR_NOT_FOUND=aT,n.ERR_EOCDR_ZIP64_NOT_FOUND=lT,n.ERR_EXTRAFIELD_ZIP64_NOT_FOUND=fT,n.ERR_HTTP_RANGE=ev,n.ERR_INVALID_COMMENT=xT,n.ERR_INVALID_ENCRYPTION_STRENGTH=ST,n.ERR_INVALID_ENTRY_COMMENT=kT,n.ERR_INVALID_ENTRY_NAME=$T,n.ERR_INVALID_EXTRAFIELD_DATA=CT,n.ERR_INVALID_EXTRAFIELD_TYPE=ET,n.ERR_INVALID_PASSWORD=Vb,n.ERR_INVALID_SIGNATURE=Gb,n.ERR_INVALID_VERSION=pv,n.ERR_LOCAL_FILE_HEADER_NOT_FOUND=dT,n.ERR_NOT_SEEKABLE_READER=W2,n.ERR_UNSUPPORTED_COMPRESSION=dv,n.ERR_UNSUPPORTED_ENCRYPTION=hT,n.ERR_UNSUPPORTED_FORMAT=Bm,n.HttpRangeReader=class extends nT{constructor(b,v={}){v.useRangeHeader=!0,super(b,v)}},n.HttpReader=nT,n.ReadableStreamReader=class{constructor(b){this.readableStream=b,this.reader=b.getReader(),this.size=1/0,this.index=0,this.currentSize=0,this.pendingValue=new f}init(){this.initialized=!0}async readUint8Array(b,v){if(this.index!=b)throw new d(W2);let g,C=new f(v),R=0;do{const A=await this.reader.read();let{value:O}=A;if(g=A.done,O?this.currentSize+=O.length:(O=this.pendingValue,this.pendingValue=new f),this.pendingValue.length){const B=new f(this.pendingValue.length+O.length);B.set(this.pendingValue),B.set(O,this.pendingValue.length),this.pendingValue=new f,O=B}R+O.length>v?(C.set(O.subarray(0,v),R),this.pendingValue=O.subarray(v),R+=v):(C.set(O,R),R+=O.length)}while(v>R&&!g);return g&&this.size==1/0&&(this.size=this.currentSize),this.size<v&&(C=C.slice(0,this.size),v=this.size),this.index+=v,C}},n.Reader=ra,n.TextReader=class extends ra{constructor(b){super(),this.blobReader=new V2(new m([b],{type:tv}))}init(){super.init(),this.blobReader.init(),this.size=this.blobReader.size}readUint8Array(b,v){return this.blobReader.readUint8Array(b,v)}},n.TextWriter=class extends Wc{constructor(b){super(),this.encoding=b,this.blob=new m([],{type:tv})}writeUint8Array(b){super.writeUint8Array(b),this.blob=new m([this.blob,b.buffer],{type:tv})}getData(){if(this.blob.text)return this.blob.text();{const b=new S;return new w((v,g)=>{b.onload=C=>v(C.target.result),b.onerror=()=>g(b.error),b.readAsText(this.blob,this.encoding)})}}},n.Uint8ArrayReader=class extends ra{constructor(b){super(),this.array=b,this.size=b.length}readUint8Array(b,v){return this.array.slice(b,b+v)}},n.Uint8ArrayWriter=class extends Wc{constructor(){super(),this.array=new f(0)}writeUint8Array(b){super.writeUint8Array(b);const v=this.array;this.array=new f(v.length+b.length),this.array.set(v),this.array.set(b,v.length)}getData(){return this.array}},n.WritableStreamWriter=class extends Wc{constructor(b){super(),this.writableStream=b,this.writer=b.getWriter()}async writeUint8Array(b){return await this.writer.ready,this.writer.write(b)}async getData(){return await this.writer.ready,await this.writer.close(),this.writableStream}},n.Writer=Wc,n.ZipReader=class{constructor(b,v={}){o.assign(this,{reader:b,options:v,config:tr()})}async*getEntriesGenerator(b={}){const v=this,g=v.reader;if(g.initialized||await g.init(),22>g.size)throw new d(Lm);const C=await(async(ie,se,M)=>{const G=new f(4);return or(G).setUint32(0,101010256,!0),await N(22)||await N(a.min(1048582,M));async function N(D){const q=M-D,Z=await oa(ie,q,D);for(let le=Z.length-22;le>=0;le--)if(Z[le]==G[0]&&Z[le+1]==G[1]&&Z[le+2]==G[2]&&Z[le+3]==G[3])return{offset:q+le,buffer:Z.slice(le,le+22).buffer}}})(g,0,g.size);if(!C)throw new d(aT);const R=or(C);let A=Nn(R,12),O=Nn(R,16),B=eo(R,8),z=0;if(O==Wn||A==Wn||B==$i){const ie=or(await oa(g,C.offset-20,20));if(Nn(ie,0)!=oT)throw new d(lT);O=Fm(ie,8);let se=await oa(g,O,56),M=or(se);const G=C.offset-20-56;if(Nn(M,0)!=av&&O!=G){const N=O;O=G,z=O-N,se=await oa(g,O,56),M=or(se)}if(Nn(M,0)!=av)throw new d(cT);B=Fm(M,32),A=Fm(M,40),O-=A}if(0>O||O>=g.size)throw new d(Lm);let K=0,X=await oa(g,O,A),re=or(X);if(A){const ie=C.offset-A;if(Nn(re,K)!=sv&&O!=ie){const se=O;O=ie,z=O-se,X=await oa(g,O,A),re=or(X)}}if(0>O||O>=g.size)throw new d(Lm);for(let ie=0;B>ie;ie++){const se=new Sq(g,v.config,v.options);if(Nn(re,K)!=sv)throw new d(uT);bT(se,re,K+6);const M=!!se.bitFlag.languageEncodingFlag,G=K+46,N=G+se.filenameLength,D=N+se.extraFieldLength,q=eo(re,K+4),Z=(0&q)==0;o.assign(se,{versionMadeBy:q,msDosCompatible:Z,compressedSize:0,uncompressedSize:0,commentLength:eo(re,K+32),directory:Z&&(16&Vc(re,K+38))==16,offset:Nn(re,K+42)+z,internalFileAttribute:Nn(re,K+34),externalFileAttribute:Nn(re,K+38),rawFilename:X.subarray(G,N),filenameUTF8:M,commentUTF8:M,rawExtraField:X.subarray(N,D)});const le=D+se.commentLength;se.rawComment=X.subarray(D,le);const Y=Uc(v,b,"filenameEncoding"),ue=Uc(v,b,"commentEncoding"),[V,me]=await w.all([uv(se.rawFilename,se.filenameUTF8?mT:Y||gT),uv(se.rawComment,se.commentUTF8?mT:ue||gT)]);se.filename=V,se.comment=me,!se.directory&&se.filename.endsWith(Dm)&&(se.directory=!0),await vT(se,se,re,K+6);const Le=new Mm(se);if(Le.getData=(Ne,pe)=>se.getData(Ne,Le,pe),K=le,b.onprogress)try{b.onprogress(ie+1,B,new Mm(se))}catch(Ne){}yield Le}return!0}async getEntries(b={}){const v=[],g=this.getEntriesGenerator(b);let C=g.next();for(;!(await C).done;)v.push((await C).value),C=g.next();return v}async close(){}},n.ZipWriter=class{constructor(b,v={}){o.assign(this,{writer:b,options:v,config:tr(),files:new c,offset:b.size,pendingCompressedSize:0,pendingEntries:[],pendingAddFileCalls:new Set})}async add(b="",v,g={}){const C=this;if(hv>=C.config.maxWorkers)return new w((R,A)=>C.pendingEntries.push({name:b,reader:v,options:g,resolve:R,reject:A}));{let R;hv++;try{return R=(async(A,O,B,z)=>{if(O=O.trim(),z.directory&&!O.endsWith(Dm)?O+=Dm:z.directory=O.endsWith(Dm),A.files.has(O))throw new d(_T);const K=vo(O);if(K.length>$i)throw new d($T);const X=z.comment||"",re=vo(X);if(re.length>$i)throw new d(kT);const ie=A.options.version||z.version||0;if(ie>$i)throw new d(pv);const se=A.options.versionMadeBy||z.versionMadeBy||20;if(se>$i)throw new d(pv);const M=Un(A,z,"lastModDate")||new l,G=Un(A,z,"lastAccessDate"),N=Un(A,z,"creationDate"),D=Un(A,z,"password"),q=Un(A,z,"encryptionStrength")||3,Z=Un(A,z,"zipCrypto");if(D!==void 0&&q!==void 0&&(1>q||q>3))throw new d(ST);let le=new f(0);const Y=z.extraField;if(Y){let Bt=0,Ye=0;Y.forEach(kt=>Bt+=4+kt.length),le=new f(Bt),Y.forEach((kt,xr)=>{if(xr>$i)throw new d(ET);if(kt.length>$i)throw new d(CT);Rn(le,new p([xr]),Ye),Rn(le,new p([kt.length]),Ye+2),Rn(le,kt,Ye+4),Ye+=4+kt.length})}let ue=Un(A,z,"extendedTimestamp");ue===void 0&&(ue=!0);let V=0,me=Un(A,z,"keepOrder");me===void 0&&(me=!0);let Le=0,Ne=Un(A,z,"msDosCompatible");Ne===void 0&&(Ne=!0);const pe=Un(A,z,"internalFileAttribute")||0,ge=Un(A,z,"externalFileAttribute")||0;B&&(B.initialized||await B.init(),Le=B.size,V=(Bt=>Bt+5*(a.floor(Bt/16383)+1))(Le));let Fe=z.zip64||A.options.zip64||!1;if(A.offset+A.pendingCompressedSize>=Wn||Le>=Wn||V>=Wn){if(z.zip64===!1||A.options.zip64===!1||!me)throw new d(Bm);Fe=!0}A.pendingCompressedSize+=V,await w.resolve();const tt=Un(A,z,"level"),Ze=Un(A,z,"useWebWorkers"),qe=Un(A,z,"bufferedWrite");let Ve=Un(A,z,"dataDescriptor"),wo=Un(A,z,"dataDescriptorSignature");const Si=Un(A,z,"signal");Ve===void 0&&(Ve=!0),Ve&&wo===void 0&&(wo=!1);const Ke=await(async(Bt,Ye,kt,xr)=>{const Pn=Bt.files,gn=Bt.writer,cf=r.from(Pn.values()).pop();let kl,Ei,ia,ct={};Pn.set(Ye,ct);try{let Vn,sa,uf;if(xr.keepOrder&&(Vn=cf&&cf.lock),ct.lock=uf=new w(On=>ia=On),xr.bufferedWrite||Bt.lockWrite||!xr.dataDescriptor?(sa=new H2,sa.init(),kl=!0):(Bt.lockWrite=new w(On=>Ei=On),gn.initialized||await gn.init(),sa=gn),ct=await(async(On,Ci,_o,jr)=>{const{rawFilename:on,lastAccessDate:yn,creationDate:Ti,password:ke,level:xe,zip64:$e,zipCrypto:Ce,dataDescriptor:ye,dataDescriptorSignature:je,directory:ot,version:St,versionMadeBy:Pt,rawComment:sn,rawExtraField:fn,useWebWorkers:Ai,onprogress:Cq,signal:Tq,encryptionStrength:NT,extendedTimestamp:RT,msDosCompatible:Aq,internalFileAttribute:Nq,externalFileAttribute:Rq}=jr,$l=!(!ke||!ke.length),gv=xe!==0&&!ot;let Ni,aa,hs;if($l&&!Ce){Ni=new f(TT.length+2);const ir=Yo(Ni);Wt(ir,0,39169),Rn(Ni,TT,2),jm(ir,8,NT)}else Ni=new f(0);if(RT){hs=new f(9+(yn?4:0)+(Ti?4:0));const ir=Yo(hs);Wt(ir,0,lv),Wt(ir,2,hs.length-4),jm(ir,4,1+(yn?2:0)+(Ti?4:0)),Dt(ir,5,a.floor(jr.lastModDate.getTime()/1e3)),yn&&Dt(ir,9,a.floor(yn.getTime()/1e3)),Ti&&Dt(ir,13,a.floor(Ti.getTime()/1e3));try{aa=new f(36);const to=Yo(aa),wv=mv(jr.lastModDate);Wt(to,0,10),Wt(to,2,32),Wt(to,8,1),Wt(to,10,24),Br(to,12,wv),Br(to,20,mv(yn)||wv),Br(to,28,mv(Ti)||wv)}catch(to){aa=new f(0)}}else aa=hs=new f(0);const _n={version:St||20,versionMadeBy:Pt,zip64:$e,directory:!!ot,filenameUTF8:!0,rawFilename:on,commentUTF8:!0,rawComment:sn,rawExtraFieldZip64:new f($e?28:0),rawExtraFieldExtendedTimestamp:hs,rawExtraFieldNTFS:aa,rawExtraFieldAES:Ni,rawExtraField:fn,extendedTimestamp:RT,msDosCompatible:Aq,internalFileAttribute:Nq,externalFileAttribute:Rq};let df=_n.uncompressedSize=0,yv=cv;ye&&(yv|=8);let zm=0;gv&&(zm=8),$e&&(_n.version=_n.version>45?_n.version:45),$l&&(yv|=1,Ce||(_n.version=_n.version>51?_n.version:51,zm=99,gv&&(_n.rawExtraFieldAES[9]=8))),_n.compressionMethod=zm;const PT=_n.headerArray=new f(26),Jo=Yo(PT);Wt(Jo,0,_n.version),Wt(Jo,2,yv),Wt(Jo,4,zm);const OT=new h(1),IT=Yo(OT);let la;la=jr.lastModDate<sT?sT:jr.lastModDate>iT?iT:jr.lastModDate,Wt(IT,0,(la.getHours()<<6|la.getMinutes())<<5|la.getSeconds()/2),Wt(IT,2,(la.getFullYear()-1980<<4|la.getMonth()+1)<<5|la.getDate());const bv=OT[0];Dt(Jo,6,bv),Wt(Jo,22,on.length);const DT=Ni.length+hs.length+aa.length+_n.rawExtraField.length;Wt(Jo,24,DT);const Ri=new f(30+on.length+DT);let vv;Dt(Yo(Ri),0,rT),Rn(Ri,PT,4),Rn(Ri,on,30),Rn(Ri,Ni,30+on.length),Rn(Ri,hs,30+on.length+Ni.length),Rn(Ri,aa,30+on.length+Ni.length+hs.length),Rn(Ri,_n.rawExtraField,30+on.length+Ni.length+hs.length+aa.length);let Sl=0;if(On){const ir=await F2(_o.Deflate,{codecType:O2,level:xe,password:ke,encryptionStrength:NT,zipCrypto:$l&&Ce,passwordVerification:$l&&Ce&&bv>>8&255,signed:!0,compressed:gv,encrypted:$l,useWebWorkers:Ai},_o);await Ci.writeUint8Array(Ri),_n.dataWritten=!0,vv=await j2(ir,On,Ci,0,()=>On.size,_o,{onprogress:Cq,signal:Tq}),df=_n.uncompressedSize=On.size,Sl=vv.length}else await Ci.writeUint8Array(Ri),_n.dataWritten=!0;let El,qm=new f(0),Hc=0;if(ye&&(qm=new f($e?je?24:20:je?16:12),El=Yo(qm),je&&(Hc=4,Dt(El,0,134695760))),On){const ir=vv.signature;if($l&&!Ce||ir===void 0||(Dt(Jo,10,ir),_n.signature=ir,ye&&Dt(El,Hc,ir)),$e){const to=Yo(_n.rawExtraFieldZip64);Wt(to,0,1),Wt(to,2,24),Dt(Jo,14,Wn),Br(to,12,s(Sl)),Dt(Jo,18,Wn),Br(to,4,s(df)),ye&&(Br(El,Hc+4,s(Sl)),Br(El,Hc+12,s(df)))}else Dt(Jo,14,Sl),Dt(Jo,18,df),ye&&(Dt(El,Hc+4,Sl),Dt(El,Hc+8,df))}ye&&await Ci.writeUint8Array(qm);const Pq=Ri.length+Sl+qm.length;return o.assign(_n,{compressedSize:Sl,lastModDate:la,rawLastModDate:bv,creationDate:Ti,lastAccessDate:yn,encrypted:$l,length:Pq}),_n})(kt,sa,Bt.config,xr),ct.lock=uf,Pn.set(Ye,ct),ct.filename=Ye,kl){let On=0;const Ci=sa.getData();let _o;await w.all([Bt.lockWrite,Vn]);do _o=r.from(Pn.values()).find(jr=>jr.writingBufferedData),_o&&await _o.lock;while(_o&&_o.lock);if(ct.writingBufferedData=!0,!xr.dataDescriptor){const on=await AT(Ci,0,26),yn=new y(on);ct.encrypted&&!xr.zipCrypto||Dt(yn,14,ct.signature),ct.zip64?(Dt(yn,18,Wn),Dt(yn,22,Wn)):(Dt(yn,18,ct.compressedSize),Dt(yn,22,ct.uncompressedSize)),await gn.writeUint8Array(new f(on)),On=26}await(async(jr,on,yn=0)=>{await async function ke(){if(yn<on.size){const xe=await AT(on,yn,yn+536870912);await jr.writeUint8Array(new f(xe)),yn+=536870912,await ke()}}()})(gn,Ci,On),delete ct.writingBufferedData}if(ct.offset=Bt.offset,ct.zip64)Br(Yo(ct.rawExtraFieldZip64),20,s(ct.offset));else if(ct.offset>=Wn)throw new d(Bm);return Bt.offset+=ct.length,ct}catch(Vn){throw(kl&&ct.writingBufferedData||!kl&&ct.dataWritten)&&(Vn.corruptedEntry=Bt.hasCorruptedEntries=!0,ct.uncompressedSize&&(Bt.offset+=ct.uncompressedSize)),Pn.delete(Ye),Vn}finally{ia(),Ei&&Ei()}})(A,O,B,o.assign({},z,{rawFilename:K,rawComment:re,version:ie,versionMadeBy:se,lastModDate:M,lastAccessDate:G,creationDate:N,rawExtraField:le,zip64:Fe,password:D,level:tt,useWebWorkers:Ze,encryptionStrength:q,extendedTimestamp:ue,zipCrypto:Z,bufferedWrite:qe,keepOrder:me,dataDescriptor:Ve,dataDescriptorSignature:wo,signal:Si,msDosCompatible:Ne,internalFileAttribute:pe,externalFileAttribute:ge}));return V&&(A.pendingCompressedSize-=V),o.assign(Ke,{name:O,comment:X,extraField:Y}),new Mm(Ke)})(C,b,v,g),this.pendingAddFileCalls.add(R),await R}finally{this.pendingAddFileCalls.delete(R),hv--;const A=C.pendingEntries.shift();A&&C.add(A.name,A.reader,A.options).then(A.resolve).catch(A.reject)}}}async close(b=new f(0),v={}){for(;this.pendingAddFileCalls.size;)await w.all(r.from(this.pendingAddFileCalls));return await(async(g,C,R)=>{const A=g.writer,O=g.files;let B=0,z=0,K=g.offset,X=O.size;for(const[,M]of O)z+=46+M.rawFilename.length+M.rawComment.length+M.rawExtraFieldZip64.length+M.rawExtraFieldAES.length+M.rawExtraFieldExtendedTimestamp.length+M.rawExtraFieldNTFS.length+M.rawExtraField.length;let re=R.zip64||g.options.zip64||!1;if(K>=Wn||z>=Wn||X>=$i){if(R.zip64===!1||g.options.zip64===!1)throw new d(Bm);re=!0}const ie=new f(z+(re?98:22)),se=Yo(ie);if(C&&C.length){if(C.length>$i)throw new d(xT);Wt(se,B+20,C.length)}for(const[M,G]of r.from(O.values()).entries()){const{rawFilename:N,rawExtraFieldZip64:D,rawExtraFieldAES:q,rawExtraField:Z,rawComment:le,versionMadeBy:Y,headerArray:ue,directory:V,zip64:me,msDosCompatible:Le,internalFileAttribute:Ne,externalFileAttribute:pe}=G;let ge,Fe;if(G.extendedTimestamp){Fe=G.rawExtraFieldNTFS,ge=new f(9);const Ze=Yo(ge);Wt(Ze,0,lv),Wt(Ze,2,ge.length-4),jm(Ze,4,1),Dt(Ze,5,a.floor(G.lastModDate.getTime()/1e3))}else Fe=ge=new f(0);const tt=D.length+q.length+ge.length+Fe.length+Z.length;if(Dt(se,B,sv),Wt(se,B+4,Y),Rn(ie,ue,B+6),Wt(se,B+30,tt),Wt(se,B+32,le.length),Dt(se,B+34,Ne),pe?Dt(se,B+38,pe):V&&Le&&jm(se,B+38,16),Dt(se,B+42,me?Wn:G.offset),Rn(ie,N,B+46),Rn(ie,D,B+46+N.length),Rn(ie,q,B+46+N.length+D.length),Rn(ie,ge,B+46+N.length+D.length+q.length),Rn(ie,Fe,B+46+N.length+D.length+q.length+ge.length),Rn(ie,Z,B+46+N.length+D.length+q.length+ge.length+Fe.length),Rn(ie,le,B+46+N.length+tt),B+=46+N.length+tt+le.length,R.onprogress)try{R.onprogress(M+1,O.size,new Mm(G))}catch(Ze){}}re&&(Dt(se,B,av),Br(se,B+4,s(44)),Wt(se,B+12,45),Wt(se,B+14,45),Br(se,B+24,s(X)),Br(se,B+32,s(X)),Br(se,B+40,s(z)),Br(se,B+48,s(K)),Dt(se,B+56,oT),Br(se,B+64,s(K)+s(z)),Dt(se,B+72,1),X=$i,K=Wn,z=Wn,B+=76),Dt(se,B,101010256),Wt(se,B+8,X),Wt(se,B+10,X),Dt(se,B+12,z),Dt(se,B+16,K),await A.writeUint8Array(ie),C&&C.length&&await A.writeUint8Array(C)})(this,b,v),this.writer.getData()}},n.configure=nr,n.getMimeType=()=>"application/octet-stream",n.terminateWorkers=()=>{na.forEach(b=>{Xb(b),b.terminate()})},o.defineProperty(n,"__esModule",{value:!0})})})(r$,r$.exports);var Ql=r$.exports;const wMt=10;function _Mt(t,e,n,r,o,{caseSensitive:i,maxChars:s,nodeName:a,dataAttrName:l,queryIdentifier:c,printBefore:u="",printAfter:d=""}){if(e.type.name!==a)return;const f=i?e.attrs[l]:e.attrs[l].toLocaleLowerCase(),p=o.split(c)[1];if(f!==p&&p!=="*")return;let h=r.type.name;h==="doc"&&(h=e.type.name);const y=t.resolve(n).nodeBefore;let m="";y?(m=LI(t,n,s),m.length<LI(t,n,s+1).length&&(m=""+m),m.length>0&&(m=m+" ")):m="";let w="";return t.resolve(n+1).nodeAfter?(w=FI(t,n,s),w.length<FI(t,n,s+1).length&&(w=w+""),w.length>0&&(w=" "+w)):w="",{parent:h,parentPos:n,match:[m,u+e.attrs[l]+d,w]}}const Jy="_%$$%_";function LI(t,e,n){const r=t.textBetween(Math.max(e-n,0),e,Jy,"").split(Jy);return(r[r.length-1]||"").trim()}function FI(t,e,n){return(t.textBetween(e+1,Math.min(e+n,t.content.size),Jy,"").split(Jy)[0]||"").trim()}function xMt(t,e){return e.find(n=>t.startsWith(n.queryIdentifier)&&t.length>n.queryIdentifier.length)}async function kMt(t,e,n,r,o=[],{concurrency:i=wMt,caseSensitive:s=!1,maxChars:a=75,perFileMatchMax:l=200,totalMatchMax:c=5e3}={}){if(e==="")return[];e=e.slice(0,500),e=s?e:e.toLocaleLowerCase();let u=xMt(e,o);const d=await BC(n,h=>r(h).then(y=>{if(t.aborted||!y)return null;let m=0;const w={uid:h,matches:[]};return y.descendants((x,$,S)=>{if(m>l||!S)return!1;let I=S.type.name;if(I==="doc"&&(I=x.type.name),u){const E=_Mt(y,x,$,S,e,{caseSensitive:s,maxChars:a,dataAttrName:u.dataAttrName,nodeName:u.nodeName,queryIdentifier:u.queryIdentifier,printBefore:u.printBefore,printAfter:u.printAfter});E&&w.matches.push(E)}else if(x.isTextblock){const E=s?x.textContent:x.textContent.toLocaleLowerCase();if(!E.includes(e))return!0;let T=$Mt(e,E,a,l);m+=T.length,w.matches.push(...T.map(F=>({parent:I,parentPos:$,match:F})))}return!0}),w}),{concurrency:i,abortSignal:t});let f=0,p=!1;return d.filter(h=>{if(h==null||p)return!1;const y=h.matches.length;return y===0?!1:(f+=y,f>=c&&(p=!0),!0)})}function $Mt(t,e,n,r){t=t.replace(/[-[\]{}()*+?.,\\^$|]/g,"\\$&");const o=RegExp(t,"g");let i;const s=[];let a=0;for(;(i=o.exec(e))!==null;){a++;const[l,c]=[i.index,i.index+i[0].length];if(r&&a>r)break;s.push(SMt(e,l,c,n))}return s}function SMt(t,e,n,r){const o=Math.max(0,e-r);let i=t.substring(o,e).trimStart();o>0&&(i=EMt(i),i=""+i);let s=t.substr(n,r).trimEnd();return n+r<t.length&&(s=CMt(s),s+=""),[i,t.slice(e,n),s]}function EMt(t){const e=t.indexOf(" ");return e===-1?t:t.slice(e+1).trimStart()}function CMt(t){const e=t.lastIndexOf(" ");return e===-1?t:t.slice(0,e).trimEnd()}const TMt=(t,e)=>EAt(({abortWrapper:o})=>{const i=async(u,d)=>(await fvt(u,d)).map(f=>jt(f)),s=async(u,d)=>(await i(u,d)).filter(f=>mi(f)),a=async u=>Z0(jt(u),e.extensionRegistry),l=async u=>JS(u),c=async(u,d)=>XS(u,d);return{abortableSearchWsForPmNode:o(AMt(s,a)),abortableFzfSearchNoteWsPaths:o(PMt(s)),abortableBackupAllFiles:o(NMt(i,l)),abortableReadAllFilesBackup:o(fq()),abortableCreateWorkspaceFromBackup:o(RMt(i,c))}});function AMt(t,e){return async(n,r,o,i,s)=>{Ys(n);const a=await t(r,n);return a?kMt(n,o,a,e,i,s):[]}}function NMt(t,e){return async(n,r)=>{const o=await t(r,n);if(!o||o.length===0)throw new lt({message:"Can not backup an empty workspace",code:_$.EMPTY_WORKSPACE});let i=new Ql.ZipWriter(new Ql.BlobWriter("application/zip"),{useWebWorkers:!1});for(const l of o){const c=await e(l);c&&await i.add(encodeURIComponent(l),new Ql.BlobReader(c),{bufferedWrite:!0,signal:n})}const s=await i.close();return Ys(n),new File([s],`${r}-backup`,{type:"application/zip"})}}function fq(){return async(t,e)=>{var i;const r=await new Ql.ZipReader(new Ql.BlobReader(e),{useWebWorkers:!1}).getEntries();let o=[];for(const s of r){let l=s.filename.split(".").pop().toLowerCase()==="md"?"text/markdown":Ql.getMimeType(s.filename);Ys(t);const c=await((i=s.getData)==null?void 0:i.call(s,new Ql.BlobWriter(l)));o.push(new File([c],s.filename,{type:l}))}return o}}function RMt(t,e){return async(n,r,o)=>{const i=await t(r,n);if(!i||i.length>0)throw new lt({message:"Can only use backup files on an empty workspace",code:_$.EMPTY_WORKSPACE_NEEDED});const s=await fq()(n,o);for(const a of s){const{filePath:l}=ft(decodeURIComponent(a.name)),c=Ld(r,l);await e(c,a)}}}function PMt(t){return async(e,n,r,o=128)=>{const i=await t(n,e);if(Ys(e),!i||i.length===0)return[];const s={limit:o,selector:c=>ft(c,!0).filePath,fuzzy:r.length<=4?"v1":"v2",tiebreakers:[Eb,s3t]};return new Lk(i,s).find(r)}}const OMt=(t,e,n)=>({registerCollabMessagePort:async o=>{U4(o,e.editorCollabMessageBus,n),gMt(t,e,n,async i=>{throw i})}}),IMt=Ih.action(t=>Ih.tx(()=>t)),DMt=(t,e)=>({setReplicaWorkspaceState:async r=>{t.dispatch(IMt(r))}}),MMt=t=>({handlesBaseError:async n=>n instanceof lt?new lt({message:"Send me to main",code:"TEST_CODE"}):!1,isWorkerEnv:async()=>TS(),status:async()=>!0,requestDeleteCollabInstance:async n=>{const r=dq(t);Md(r,"collabManager must be defined"),r.requestDeleteInstance(n)},throwCallbackError:async()=>{setTimeout(()=>{throw new Error("[naukar] I am a testThrowCallbackError")},0)},throwError:async()=>{throw new Error("[naukar] I am a testThrowError")}}),LMt=t=>({});function FMt(t,e,n){const r=TMt(t,e),o=OMt(t,e,n),i=MMt(t),s=LMt(),a=DMt(t);return{abortable:r,editor:o,workspace:s,test:i,replicaSlices:a}}function BMt(t){return gvt({type:"worker",otherStoreParams:{debug:n=>{cee||(console.group(`[naukar] ${n.type} update`),console.log(n),console.groupEnd())}},eternalVars:t,effects:vMt,onRefreshWorkspace:()=>{Ed().replicaSlices.refreshWorkspace()},slices:[Ih]})}TS()&&Wg!=="local"&&tMt(uee);const jMt=Mee();function zMt(t,e=new AbortController().signal){jMt==="worker"&&(self.addEventListener("error",i=>{console.warn("[naukar] error",i.error),console.error(i.error),Ed().application.onError(i.error),i.preventDefault()}),self.addEventListener("unhandledrejection",i=>{console.warn("[naukar] unhandledrejection"),console.error(i.reason),Ed().application.onError(i.reason),i.preventDefault()}));const n=BMt(t),r=FMt(n,t,e);e.addEventListener("abort",()=>{n.destroy()},{once:!0});const o={config:Fo,isReady:async()=>{var i;return!n.destroyed&&!!((i=dq(n))!=null&&i.managerId)}};return self._e2eNaukarHelpers=o,{...r,__internal_register_main_cb:async i=>(rMt(i,e),!0)}}const qMt=hIt();var WMt=zMt(qMt);console.log("naukar initialized :) t=",performance.now());Lee();UMt();async function UMt(){LT.length>0&&await Promise.all(LT)}i$(WMt);export{Xq as c,Ws as g};
//# sourceMappingURL=worker-8065324c.js.map
